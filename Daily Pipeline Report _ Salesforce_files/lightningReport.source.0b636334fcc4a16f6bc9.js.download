(()=>{var e,t,r,i,s,n={19366:(e,t,r)=>{var i={"./A.png":98381,"./B.png":8987,"./copilot-onboarding.png":36046,"./matrix1x1-all.png":94549,"./matrix1x1-r1c1.png":80559,"./matrix1x1-r1cGT.png":83010,"./matrix1x1-rGTc1.png":50961,"./matrix1x1-rGTcGT.png":42342,"./matrix1x2-all.png":84062,"./matrix1x2-r1c1.png":32475,"./matrix1x2-r1c2.png":8254,"./matrix1x2-r1cGT.png":46118,"./matrix1x2-rGTc1.png":4242,"./matrix1x2-rGTc2.png":28512,"./matrix1x2-rGTcGT.png":98254,"./matrix2x1-all.png":4298,"./matrix2x1-r1c1.png":45233,"./matrix2x1-r1cGT.png":81337,"./matrix2x1-r2c1.png":439,"./matrix2x1-r2cGT.png":81266,"./matrix2x1-rGTc1.png":42704,"./matrix2x1-rGTcGT.png":32382,"./matrix2x2-all.png":21006,"./matrix2x2-r1c1.png":11159,"./matrix2x2-r1c2.png":41008,"./matrix2x2-r1cGT.png":43325,"./matrix2x2-r2c1.png":34847,"./matrix2x2-r2c2.png":10330,"./matrix2x2-r2cGT.png":96260,"./matrix2x2-rGTc1.png":53635,"./matrix2x2-rGTc2.png":55727,"./matrix2x2-rGTcGT.png":59021,"./sumx1-all.png":85565,"./sumx1-grand.png":67842,"./sumx1-sub1.png":66316,"./sumx2-all.png":16686,"./sumx2-grand.png":73816,"./sumx2-sub1.png":27833,"./sumx2-sub2.png":13489,"./sumx3-all.png":93333,"./sumx3-grand.png":16099,"./sumx3-sub1.png":64924,"./sumx3-sub2.png":54524,"./sumx3-sub3.png":75657};function s(e){var t=n(e);return r(t)}function n(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=19366},26585:(e,t,r)=>{var i={"./thumb-application.png":72492,"./thumb-chart-bubblemap.png":72927,"./thumb-chart-bullet.png":80458,"./thumb-chart-calheatmap.png":30992,"./thumb-chart-choropleth.png":49718,"./thumb-chart-combo.png":67273,"./thumb-chart-comparisontable.png":70907,"./thumb-chart-customtable.png":92886,"./thumb-chart-flatgauge.png":93724,"./thumb-chart-funnel.png":65184,"./thumb-chart-gauge.png":92547,"./thumb-chart-geomap.png":28477,"./thumb-chart-hbar.png":63341,"./thumb-chart-hdot.png":64189,"./thumb-chart-heatmap.png":6387,"./thumb-chart-legend.png":99133,"./thumb-chart-line.png":39074,"./thumb-chart-map.png":32945,"./thumb-chart-matrix.png":7044,"./thumb-chart-metric.png":65179,"./thumb-chart-metricsradar.png":69640,"./thumb-chart-origami.png":32588,"./thumb-chart-parallelcoords.png":53085,"./thumb-chart-pie.png":62987,"./thumb-chart-pivottable.png":40130,"./thumb-chart-polargauge.png":27440,"./thumb-chart-pyramid.png":45382,"./thumb-chart-rating.png":36079,"./thumb-chart-sankey.png":17719,"./thumb-chart-scatter.png":40494,"./thumb-chart-stackhbar.png":82225,"./thumb-chart-stackpyramid.png":99834,"./thumb-chart-stackvbar.png":60179,"./thumb-chart-stackwaterfall.png":97618,"./thumb-chart-time-bar.png":9551,"./thumb-chart-time-combo.png":59096,"./thumb-chart-time-line.png":57875,"./thumb-chart-time.png":80522,"./thumb-chart-treemap.png":20725,"./thumb-chart-valuestable.png":98242,"./thumb-chart-vbar.png":71589,"./thumb-chart-vdot.png":6267,"./thumb-chart-waterfall.png":32495,"./thumb-chart.png":9557,"./thumb-component.png":48605,"./thumb-dashboard.png":80038,"./thumb-edgemart-csv.png":20517,"./thumb-edgemart.png":46439,"./thumb-flow.png":35861,"./thumb-report.png":34146};function s(e){var t=n(e);return r(t)}function n(e){if(!r.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=n,e.exports=s,s.id=26585},63321:(e,t,r)=>{e=r.nmd(e);var i=function(){var e=function(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r},t=[1,5],r=[1,6],i=[5,12,24],s=[1,22],n=[1,18],o=[1,19],a=[1,20],l=[1,21],u=[1,23],d=[1,27],c=[12,24],h=[12,24,27],p=[24,27],g={trace:function(){},yy:{},symbols_:{error:2,Root:3,DataFunction:4,".":5,SerializationFunction:6,SelectionFunction:7,ManipulationFunction:8,SELECTION:9,"(":10,ComplexArguments:11,")":12,MANIPULATION:13,SERIALIZATION:14,Reference:15,IDENTIFIER:16,TYPE:17,PrimitiveArgument:18,INTEGER:19,"-":20,STRING:21,BOOLEAN:22,PrimitiveArguments:23,",":24,PrimitiveArray:25,"[":26,"]":27,ComplexArgument:28,$accept:0,$end:1},terminals_:{2:"error",5:".",9:"SELECTION",10:"(",12:")",13:"MANIPULATION",14:"SERIALIZATION",16:"IDENTIFIER",17:"TYPE",19:"INTEGER",20:"-",21:"STRING",22:"BOOLEAN",24:",",26:"[",27:"]"},productions_:[0,[3,3],[4,1],[4,1],[7,4],[8,4],[6,3],[6,4],[15,3],[18,1],[18,2],[18,1],[18,1],[23,1],[23,3],[25,2],[25,3],[28,1],[28,1],[28,1],[28,1],[11,1],[11,3]],performAction:function(e,t,r,i,s,n,o){var a=n.length-1;switch(s){case 1:return{base:n[a-2],serialization:n[a]};case 2:case 3:case 17:case 18:case 19:case 20:this.$=n[a];break;case 4:this.$={type:"selection",function:n[a-3],args:n[a-1]};break;case 5:this.$={type:"manipulation",function:n[a-3],args:n[a-1]};break;case 6:this.$={type:"serialization",function:n[a-2],args:[]};break;case 7:this.$={type:"serialization",function:n[a-3],args:n[a-1]};break;case 8:this.$={type:"reference",step:n[a-2],messageType:n[a]};break;case 9:this.$={type:"integer",value:n[a]};break;case 10:this.$={type:"integer",value:-n[a]};break;case 11:this.$={type:"string",value:n[a].slice(1,n[a].length-1)};break;case 12:this.$={type:"boolean",value:n[a]};break;case 13:case 21:this.$=[n[a]];break;case 14:case 22:n[a-2].push(n[a]),this.$=n[a-2];break;case 15:this.$={type:"array",values:[]};break;case 16:this.$={type:"array",values:n[a-1]}}},table:[{3:1,4:2,7:3,8:4,9:t,13:r},{1:[3]},{5:[1,7]},e(i,[2,2]),e(i,[2,3]),{10:[1,8]},{10:[1,9]},{6:10,14:[1,11]},{4:16,7:3,8:4,9:t,11:12,13:r,15:15,16:s,18:14,19:n,20:o,21:a,22:l,25:17,26:u,28:13},{4:16,7:3,8:4,9:t,11:24,13:r,15:15,16:s,18:14,19:n,20:o,21:a,22:l,25:17,26:u,28:13},{1:[2,1]},{10:[1,25]},{12:[1,26],24:d},e(c,[2,21]),e(c,[2,17]),e(c,[2,18]),e(c,[2,19]),e(c,[2,20]),e(h,[2,9]),{19:[1,28]},e(h,[2,11]),e(h,[2,12]),{5:[1,29]},{18:32,19:n,20:o,21:a,22:l,23:31,27:[1,30]},{12:[1,33],24:d},{4:16,7:3,8:4,9:t,11:35,12:[1,34],13:r,15:15,16:s,18:14,19:n,20:o,21:a,22:l,25:17,26:u,28:13},e(i,[2,4]),{4:16,7:3,8:4,9:t,13:r,15:15,16:s,18:14,19:n,20:o,21:a,22:l,25:17,26:u,28:36},e(h,[2,10]),{17:[1,37]},e(c,[2,15]),{24:[1,39],27:[1,38]},e(p,[2,13]),e(i,[2,5]),{1:[2,6]},{12:[1,40],24:d},e(c,[2,22]),e(c,[2,8]),e(c,[2,16]),{18:41,19:n,20:o,21:a,22:l},{1:[2,7]},e(p,[2,14])],defaultActions:{10:[2,1],34:[2,6],40:[2,7]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],s=[],n=this.table,o="",a=0,l=0,u=0,d=s.slice.call(arguments,1),c=Object.create(this.lexer),h={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(h.yy[p]=this.yy[p]);c.setInput(e,h.yy),h.yy.lexer=c,h.yy.parser=this,void 0===c.yylloc&&(c.yylloc={});var g=c.yylloc;s.push(g);var m=c.options&&c.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,f,y,b,C,E,S,T,I,v=function(){var e;return"number"!=typeof(e=c.lex()||1)&&(e=t.symbols_[e]||e),e},R={};;){if(y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(null==_&&(_=v()),b=n[y]&&n[y][_]),void 0===b||!b.length||!b[0]){var w="";for(E in I=[],n[y])this.terminals_[E]&&E>2&&I.push("'"+this.terminals_[E]+"'");w=c.showPosition?"Parse error on line "+(a+1)+":\n"+c.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==_?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(w,{text:c.match,token:this.terminals_[_]||_,line:c.yylineno,loc:g,expected:I})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+_);switch(b[0]){case 1:r.push(_),i.push(c.yytext),s.push(c.yylloc),r.push(b[1]),_=null,f?(_=f,f=null):(l=c.yyleng,o=c.yytext,a=c.yylineno,g=c.yylloc,u>0&&u--);break;case 2:if(S=this.productions_[b[1]][1],R.$=i[i.length-S],R._$={first_line:s[s.length-(S||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(S||1)].first_column,last_column:s[s.length-1].last_column},m&&(R._$.range=[s[s.length-(S||1)].range[0],s[s.length-1].range[1]]),void 0!==(C=this.performAction.apply(R,[o,l,a,h.yy,b[1],i,s].concat(d))))return C;S&&(r=r.slice(0,-1*S*2),i=i.slice(0,-1*S),s=s.slice(0,-1*S)),r.push(this.productions_[b[1]][0]),i.push(R.$),s.push(R._$),T=n[r[r.length-2]][r[r.length-1]],r.push(T);break;case 3:return!0}}return!0}},m={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var n in s)this[n]=s[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),n=0;n<s.length;n++)if((r=this._input.match(this.rules[s[n]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=n,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,s[n])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,s[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,i){switch(r){case 0:break;case 1:return"(";case 2:return")";case 3:return",";case 4:return".";case 5:return"[";case 6:return"]";case 7:return"-";case 8:return"INTEGER";case 9:case 10:return"STRING";case 11:return"BOOLEAN";case 12:case 13:case 14:return"SELECTION";case 15:case 16:case 17:case 18:case 19:case 20:case 21:return"MANIPULATION";case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:case 36:return"SERIALIZATION";case 37:case 38:return"TYPE";case 39:return"IDENTIFIER"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:-)/,/^(?:[0-9]+?\b)/,/^(?:'([^'\\]|\\.)*')/,/^(?:"([^"\\]|\\.)*")/,/^(?:(true|false))/,/^(?:row\b)/,/^(?:column\b)/,/^(?:cell\b)/,/^(?:flatten\b)/,/^(?:concat\b)/,/^(?:join\b)/,/^(?:coalesce\b)/,/^(?:slice\b)/,/^(?:valueAt\b)/,/^(?:toArray\b)/,/^(?:asObject\b)/,/^(?:asObject\b)/,/^(?:asString\b)/,/^(?:asEquality\b)/,/^(?:asRange\b)/,/^(?:asDateRange\b)/,/^(?:asProjection\b)/,/^(?:asDateProjection\b)/,/^(?:asGrouping\b)/,/^(?:asOrder\b)/,/^(?:asSQLSelect\b)/,/^(?:asSQLWhere\b)/,/^(?:asSQLGrouping\b)/,/^(?:asSQLHaving\b)/,/^(?:asSQLOrder\b)/,/^(?:result\b)/,/^(?:selection\b)/,/^(?:[_0-9A-Za-z]*)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};function _(){this.yy={}}return g.lexer=m,_.prototype=g,g.Parser=_,new _}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var i=r(44809).readFileSync(r(29795).normalize(e[1]),"utf8");return t.parser.parse(i)},r.c[r.s]===e&&t.main(process.argv.slice(1))},32702:(e,t,r)=>{e=r.nmd(e);var i=function(){var e=function(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r},t=[1,3],r=[1,8],i=[1,9],s=[1,10],n=[1,11],o=[11,14],a={trace:function(){},yy:{},symbols_:{error:2,Root:3,Function:4,Arg:5,IDENTIFIER:6,INTEGER:7,"-":8,STRING:9,ArgList:10,",":11,FUNCTION:12,"(":13,")":14,$accept:0,$end:1},terminals_:{2:"error",6:"IDENTIFIER",7:"INTEGER",8:"-",9:"STRING",11:",",12:"FUNCTION",13:"(",14:")"},productions_:[0,[3,1],[5,1],[5,1],[5,1],[5,2],[5,1],[10,1],[10,3],[4,4]],performAction:function(e,t,r,i,s,n,o){var a=n.length-1;switch(s){case 1:return this.$=n[a];case 2:this.$=n[a];break;case 3:this.$={type:"identifier",name:n[a]};break;case 4:this.$={type:"integer",value:n[a]};break;case 5:this.$={type:"integer",value:-n[a]};break;case 6:this.$={type:"string",value:n[a].slice(1,n[a].length-1)};break;case 7:this.$=[n[a]];break;case 8:n[a-2].push(n[a]),this.$=n[a-2];break;case 9:this.$={type:"function",function:n[a-3],args:n[a-1]}}},table:[{3:1,4:2,12:t},{1:[3]},{1:[2,1]},{13:[1,4]},{4:7,5:6,6:r,7:i,8:s,9:n,10:5,12:t},{11:[1,13],14:[1,12]},e(o,[2,7]),e(o,[2,2]),e(o,[2,3]),e(o,[2,4]),{7:[1,14]},e(o,[2,6]),e([1,11,14],[2,9]),{4:7,5:15,6:r,7:i,8:s,9:n,12:t},e(o,[2,5]),e(o,[2,8])],defaultActions:{2:[2,1]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],s=[],n=this.table,o="",a=0,l=0,u=0,d=s.slice.call(arguments,1),c=Object.create(this.lexer),h={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(h.yy[p]=this.yy[p]);c.setInput(e,h.yy),h.yy.lexer=c,h.yy.parser=this,void 0===c.yylloc&&(c.yylloc={});var g=c.yylloc;s.push(g);var m=c.options&&c.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,f,y,b,C,E,S,T,I,v=function(){var e;return"number"!=typeof(e=c.lex()||1)&&(e=t.symbols_[e]||e),e},R={};;){if(y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(null==_&&(_=v()),b=n[y]&&n[y][_]),void 0===b||!b.length||!b[0]){var w="";for(E in I=[],n[y])this.terminals_[E]&&E>2&&I.push("'"+this.terminals_[E]+"'");w=c.showPosition?"Parse error on line "+(a+1)+":\n"+c.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==_?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(w,{text:c.match,token:this.terminals_[_]||_,line:c.yylineno,loc:g,expected:I})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+_);switch(b[0]){case 1:r.push(_),i.push(c.yytext),s.push(c.yylloc),r.push(b[1]),_=null,f?(_=f,f=null):(l=c.yyleng,o=c.yytext,a=c.yylineno,g=c.yylloc,u>0&&u--);break;case 2:if(S=this.productions_[b[1]][1],R.$=i[i.length-S],R._$={first_line:s[s.length-(S||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(S||1)].first_column,last_column:s[s.length-1].last_column},m&&(R._$.range=[s[s.length-(S||1)].range[0],s[s.length-1].range[1]]),void 0!==(C=this.performAction.apply(R,[o,l,a,h.yy,b[1],i,s].concat(d))))return C;S&&(r=r.slice(0,-1*S*2),i=i.slice(0,-1*S),s=s.slice(0,-1*S)),r.push(this.productions_[b[1]][0]),i.push(R.$),s.push(R._$),T=n[r[r.length-2]][r[r.length-1]],r.push(T);break;case 3:return!0}}return!0}},l={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var n in s)this[n]=s[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),n=0;n<s.length;n++)if((r=this._input.match(this.rules[s[n]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=n,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,s[n])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,s[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,i){switch(r){case 0:break;case 1:return"(";case 2:return")";case 3:return",";case 4:return"-";case 5:case 6:case 7:case 8:case 9:case 10:case 11:return"FUNCTION";case 12:return"IDENTIFIER";case 13:return"INTEGER";case 14:case 15:return"STRING"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:-)/,/^(?:results\b)/,/^(?:selection\b)/,/^(?:value\b)/,/^(?:single_quote\b)/,/^(?:no_quote\b)/,/^(?:field\b)/,/^(?:coalesce\b)/,/^(?:[_A-Za-z][_0-9A-Za-z]*)/,/^(?:[0-9]+?\b)/,/^(?:'([^'\\]|\\.)*')/,/^(?:"([^"\\]|\\.)*")/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],inclusive:!0}}};function u(){this.yy={}}return a.lexer=l,u.prototype=a,a.Parser=u,new u}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var i=r(44809).readFileSync(r(29795).normalize(e[1]),"utf8");return t.parser.parse(i)},r.c[r.s]===e&&t.main(process.argv.slice(1))},76681:(e,t,r)=>{e=r.nmd(e);var i=function(){var e=function(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r},t=[5,9],r={trace:function(){},yy:{},symbols_:{error:2,ValueList:3,VALUE:4,",":5,Selector:6,SELECTOR:7,"(":8,")":9,EOF:10,$accept:0,$end:1},terminals_:{2:"error",4:"VALUE",5:",",7:"SELECTOR",8:"(",9:")",10:"EOF"},productions_:[0,[3,1],[3,3],[6,5]],performAction:function(e,t,r,i,s,n,o){var a=n.length-1;switch(s){case 1:this.$=[n[a]];break;case 2:n[a-2].push(n[a]),this.$=n[a-2];break;case 3:return{selectorType:n[a-4],values:n[a-2]}}},table:[{6:1,7:[1,2]},{1:[3]},{8:[1,3]},{3:4,4:[1,5]},{5:[1,7],9:[1,6]},e(t,[2,1]),{10:[1,8]},{4:[1,9]},{1:[2,3]},e(t,[2,2])],defaultActions:{8:[2,3]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],s=[],n=this.table,o="",a=0,l=0,u=0,d=s.slice.call(arguments,1),c=Object.create(this.lexer),h={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(h.yy[p]=this.yy[p]);c.setInput(e,h.yy),h.yy.lexer=c,h.yy.parser=this,void 0===c.yylloc&&(c.yylloc={});var g=c.yylloc;s.push(g);var m=c.options&&c.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,f,y,b,C,E,S,T,I,v=function(){var e;return"number"!=typeof(e=c.lex()||1)&&(e=t.symbols_[e]||e),e},R={};;){if(y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(null==_&&(_=v()),b=n[y]&&n[y][_]),void 0===b||!b.length||!b[0]){var w="";for(E in I=[],n[y])this.terminals_[E]&&E>2&&I.push("'"+this.terminals_[E]+"'");w=c.showPosition?"Parse error on line "+(a+1)+":\n"+c.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==_?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(w,{text:c.match,token:this.terminals_[_]||_,line:c.yylineno,loc:g,expected:I})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+_);switch(b[0]){case 1:r.push(_),i.push(c.yytext),s.push(c.yylloc),r.push(b[1]),_=null,f?(_=f,f=null):(l=c.yyleng,o=c.yytext,a=c.yylineno,g=c.yylloc,u>0&&u--);break;case 2:if(S=this.productions_[b[1]][1],R.$=i[i.length-S],R._$={first_line:s[s.length-(S||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(S||1)].first_column,last_column:s[s.length-1].last_column},m&&(R._$.range=[s[s.length-(S||1)].range[0],s[s.length-1].range[1]]),void 0!==(C=this.performAction.apply(R,[o,l,a,h.yy,b[1],i,s].concat(d))))return C;S&&(r=r.slice(0,-1*S*2),i=i.slice(0,-1*S),s=s.slice(0,-1*S)),r.push(this.productions_[b[1]][0]),i.push(R.$),s.push(R._$),T=n[r[r.length-2]][r[r.length-1]],r.push(T);break;case 3:return!0}}return!0}},i={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var n in s)this[n]=s[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),n=0;n<s.length;n++)if((r=this._input.match(this.rules[s[n]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=n,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,s[n])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,s[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,i){switch(r){case 0:break;case 1:return"(";case 2:return")";case 3:return",";case 4:return"EOF";case 5:case 6:case 7:case 8:return"SELECTOR";case 9:return"VALUE"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/,/^(?:minWidth\b)/,/^(?:maxWidth\b)/,/^(?:orientation\b)/,/^(?:platform\b)/,/^(?:(?:[1-9][0-9]*|0)|(?:[a-zA-Z]+))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9],inclusive:!0}}};function s(){this.yy={}}return r.lexer=i,s.prototype=r,r.Parser=s,new s}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var i=r(36741).readFileSync(r(77572).normalize(e[1]),"utf8");return t.parser.parse(i)},r.c[r.s]===e&&t.main(process.argv.slice(1))},95545:(e,t,r)=>{e=r.nmd(e);var i=function(){var e=function(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r},t=[1,5],r=[1,6],i=[1,7],s=[1,5,8,12,13,17,19,23,24,26,27,34,35,39,57,58],n=[1,5,12],o=[1,29],a=[1,33],l=[1,35],u=[1,36],d=[1,37],c=[1,38],h=[1,42],p=[1,5,12,19],g=[2,19],m=[1,43],_=[1,44],f=[1,46],y=[1,47],b=[2,20],C=[1,5,12,19,23,24,26,27,35,39],E=[1,53],S=[1,50],T=[1,51],I=[1,5,12,17,19,23,24,26,27,34,35,39,57,58],v=[1,63],R=[1,66],w=[2,63],A=[1,71],D=[1,5,12,17,19,23,24,26,27,34,35,39,55,57,58],L=[12,35],M=[12,19],N={trace:function(){},yy:{},symbols_:{error:2,Root:3,Statement:4,TERMINATOR:5,OrderClause:6,Identifier:7,"=":8,ORDER:9,OrderList:10,OrderExpression:11,",":12,BY:13,ParenOrderedList:14,ParenOrderedListItem:15,OrderedListItem:16,"(":17,OrderedLIList:18,")":19,OrderedListItemWithParam:20,OrderedListItemNoNulls:21,Expression:22,ASC:23,DESC:24,NullOrder:25,NULLS_FIRST:26,NULLS_LAST:27,Value:28,Invocation:29,Array:30,Literal:31,Parenthetical:32,Accessor:33,"[":34,"]":35,ArrayList:36,ArrayExpression:37,RangeExpression:38,RANGE:39,IDENTIFIER:40,IDTOKEN:41,ParameterToken:42,StringToken:43,NumberToken:44,BOOL:45,NullToken:46,PARAMETER:47,STRING:48,NUMBER:49,NULL:50,OrderedListNoNulls:51,InvocationList:52,WithinGroup:53,ExpressionList:54,WITHIN:55,GROUP:56,".":57,DOUBLECOLON:58,Index:59,$accept:0,$end:1},terminals_:{2:"error",5:"TERMINATOR",8:"=",9:"ORDER",12:",",13:"BY",17:"(",19:")",23:"ASC",24:"DESC",26:"NULLS_FIRST",27:"NULLS_LAST",34:"[",35:"]",39:"RANGE",40:"IDENTIFIER",41:"IDTOKEN",45:"BOOL",47:"PARAMETER",48:"STRING",49:"NUMBER",50:"NULL",54:"ExpressionList",55:"WITHIN",56:"GROUP",57:".",58:"DOUBLECOLON"},productions_:[0,[3,0],[3,1],[3,2],[4,1],[4,3],[6,2],[10,1],[10,3],[11,3],[11,3],[11,3],[14,5],[15,3],[18,1],[18,3],[21,1],[21,2],[21,2],[16,1],[16,1],[20,2],[20,3],[20,2],[20,3],[20,2],[25,1],[25,1],[22,1],[22,1],[28,1],[28,1],[28,1],[28,1],[28,2],[28,2],[30,2],[30,3],[36,1],[36,3],[37,1],[37,1],[38,3],[38,2],[38,2],[38,1],[7,1],[7,1],[31,1],[31,1],[31,1],[31,1],[31,1],[42,1],[43,1],[44,1],[46,1],[51,1],[51,3],[32,3],[29,4],[29,4],[29,2],[52,0],[52,1],[53,7],[33,2],[33,2],[33,1],[59,3]],performAction:function(e,t,r,i,s,n,o){var a=n.length-1;switch(s){case 2:return n[a];case 3:return n[a-1];case 4:n[a].inputStream=n[a].list[0][0],this.$=n[a];break;case 5:n[a].outputStream=n[a-2][1],n[a].inputStream=n[a].list[0][0],this.$=n[a];break;case 6:this.$={list:n[a]};break;case 7:case 56:case 14:case 38:case 57:this.$=[n[a]];break;case 8:case 15:case 39:case 58:n[a-2].push(n[a]),this.$=n[a-2];break;case 9:this.$=[n[a-2][1],["arr",n[a]]];break;case 10:case 11:this.$=[n[a-2][1],n[a]];break;case 12:this.$=[n[a-3]].concat(n[a-1]);break;case 13:case 59:case 65:case 69:this.$=n[a-1];break;case 16:case 19:this.$=["ord",n[a],!1];break;case 17:case 21:this.$=["ord",n[a-1],!1];break;case 18:case 23:this.$=["ord",n[a-1],!0];break;case 20:case 28:case 29:case 30:case 31:case 32:case 33:case 40:case 41:case 48:case 49:case 50:case 51:case 52:case 64:case 66:case 67:case 68:this.$=n[a];break;case 22:this.$=["ord",n[a-2],!1,n[a]];break;case 24:this.$=["ord",n[a-2],!0,n[a]];break;case 25:this.$=["ord",n[a-1],null,n[a]];break;case 26:this.$=!0;break;case 27:this.$=!1;break;case 34:case 35:this.$=[".",n[a-1],n[a]];break;case 36:this.$=["arr",[]];break;case 37:this.$=["arr",n[a-1]];break;case 42:this.$=["@",n[a-2],n[a]];break;case 43:this.$=["@",void 0,n[a]];break;case 44:this.$=["@",n[a-1],void 0];break;case 45:this.$=["@",void 0,void 0];break;case 46:this.$=["'",n[a]];break;case 47:this.$=["'",n[a].slice(1,+(n[a].length-2)+1)];break;case 53:this.$=["$",n[a]];break;case 54:this.$=['"',n[a].slice(1,+(n[a].length-2)+1)];break;case 55:this.$=["#",+n[a]];break;case 60:case 61:this.$=["(",n[a-3],n[a-1]];break;case 62:n[a-1].push(n[a]),this.$=n[a-1];break;case 63:this.$=[]}},table:[{1:[2,1],3:1,4:2,6:3,7:4,9:t,40:r,41:i},{1:[3]},{1:[2,2],5:[1,8]},e(t,[2,4]),{8:[1,9]},{7:12,10:10,11:11,40:r,41:i},e(s,[2,46]),e(s,[2,47]),{1:[2,3]},{4:13,6:3,7:4,9:t,40:r,41:i},e(t,[2,6],{12:[1,14]}),e(n,[2,7]),{13:[1,15]},e(t,[2,5]),{7:12,11:16,40:r,41:i},{7:26,14:17,15:18,16:19,17:[1,20],20:22,22:21,28:23,29:24,30:25,31:27,32:28,34:o,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},e(n,[2,8]),e(n,[2,9]),e(n,[2,10]),e(n,[2,11]),{7:26,16:39,17:h,20:40,22:41,28:23,29:24,30:25,31:27,32:28,34:o,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},e(p,g,{25:45,23:m,24:_,26:f,27:y}),e(p,b),e(C,[2,28],{33:48,59:52,17:[1,49],34:E,57:S,58:T}),e(C,[2,29],{59:52,33:54,53:56,17:[1,55],34:E,55:[1,57],57:S,58:T}),e(I,[2,30]),e(I,[2,31]),e(I,[2,32]),e(I,[2,33]),{7:26,17:h,22:61,28:23,29:24,30:25,31:27,32:28,34:o,35:[1,58],36:59,37:60,38:62,39:v,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},e(I,[2,48]),e(I,[2,49]),e(I,[2,50]),e(I,[2,51]),e(I,[2,52]),e(I,[2,53]),e(I,[2,54]),e(I,[2,55]),e(I,[2,56]),{12:[1,64]},{12:b,19:[1,65]},{12:g,19:R,23:m,24:_,25:45,26:f,27:y},{7:26,17:h,22:67,28:23,29:24,30:25,31:27,32:28,34:o,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},e(p,[2,21],{25:68,26:f,27:y}),e(p,[2,23],{25:69,26:f,27:y}),e(p,[2,25]),e(p,[2,26]),e(p,[2,27]),e(I,[2,34]),{19:w,52:70,54:A},{7:72,40:r,41:i},{7:73,40:r,41:i},e(I,[2,68]),{7:26,17:h,22:74,28:23,29:24,30:25,31:27,32:28,34:o,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},e(I,[2,35]),{19:w,52:75,54:A},e(D,[2,62]),{56:[1,76]},e(I,[2,36]),{12:[1,78],35:[1,77]},e(L,[2,38]),e(L,[2,40],{39:[1,79]}),e(L,[2,41]),e(L,[2,45],{28:23,29:24,30:25,7:26,31:27,32:28,42:30,43:31,44:32,46:34,22:80,17:h,34:o,40:r,41:i,45:a,47:l,48:u,49:d,50:c}),{7:26,16:82,17:h,18:81,20:22,22:21,28:23,29:24,30:25,31:27,32:28,34:o,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},e(n,[2,13]),e(I,[2,59]),{19:R},e(p,[2,22]),e(p,[2,24]),{19:[1,83]},{19:[2,64]},e(I,[2,66]),e(I,[2,67]),{35:[1,84]},{19:[1,85]},{17:[1,86]},e(I,[2,37]),{7:26,17:h,22:61,28:23,29:24,30:25,31:27,32:28,34:o,37:87,38:62,39:v,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},e(L,[2,44],{28:23,29:24,30:25,7:26,31:27,32:28,42:30,43:31,44:32,46:34,22:88,17:h,34:o,40:r,41:i,45:a,47:l,48:u,49:d,50:c}),e(L,[2,43]),{12:[1,90],19:[1,89]},e(M,[2,14]),e(D,[2,60]),e(I,[2,69]),e(D,[2,61]),{9:[1,91]},e(L,[2,39]),e(L,[2,42]),e(n,[2,12]),{7:26,16:92,17:h,20:22,22:21,28:23,29:24,30:25,31:27,32:28,34:o,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},{13:[1,93]},e(M,[2,15]),{7:26,17:h,21:94,22:95,28:23,29:24,30:25,31:27,32:28,34:o,40:r,41:i,42:30,43:31,44:32,45:a,46:34,47:l,48:u,49:d,50:c},{19:[1,96]},{19:[2,16],23:[1,97],24:[1,98]},e(D,[2,65]),{19:[2,17]},{19:[2,18]}],defaultActions:{8:[2,3],71:[2,64],97:[2,17],98:[2,18]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],s=[],n=this.table,o="",a=0,l=0,u=0,d=s.slice.call(arguments,1),c=Object.create(this.lexer),h={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(h.yy[p]=this.yy[p]);c.setInput(e,h.yy),h.yy.lexer=c,h.yy.parser=this,void 0===c.yylloc&&(c.yylloc={});var g=c.yylloc;s.push(g);var m=c.options&&c.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,f,y,b,C,E,S,T,I,v=function(){var e;return"number"!=typeof(e=c.lex()||1)&&(e=t.symbols_[e]||e),e},R={};;){if(y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(null==_&&(_=v()),b=n[y]&&n[y][_]),void 0===b||!b.length||!b[0]){var w="";for(E in I=[],n[y])this.terminals_[E]&&E>2&&I.push("'"+this.terminals_[E]+"'");w=c.showPosition?"Parse error on line "+(a+1)+":\n"+c.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==_?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(w,{text:c.match,token:this.terminals_[_]||_,line:c.yylineno,loc:g,expected:I})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+_);switch(b[0]){case 1:r.push(_),i.push(c.yytext),s.push(c.yylloc),r.push(b[1]),_=null,f?(_=f,f=null):(l=c.yyleng,o=c.yytext,a=c.yylineno,g=c.yylloc,u>0&&u--);break;case 2:if(S=this.productions_[b[1]][1],R.$=i[i.length-S],R._$={first_line:s[s.length-(S||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(S||1)].first_column,last_column:s[s.length-1].last_column},m&&(R._$.range=[s[s.length-(S||1)].range[0],s[s.length-1].range[1]]),void 0!==(C=this.performAction.apply(R,[o,l,a,h.yy,b[1],i,s].concat(d))))return C;S&&(r=r.slice(0,-1*S*2),i=i.slice(0,-1*S),s=s.slice(0,-1*S)),r.push(this.productions_[b[1]][0]),i.push(R.$),s.push(R._$),T=n[r[r.length-2]][r[r.length-1]],r.push(T);break;case 3:return!0}}return!0}},O={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var n in s)this[n]=s[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),n=0;n<s.length;n++)if((r=this._input.match(this.rules[s[n]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=n,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,s[n])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,s[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,i){switch(r){case 0:case 1:break;case 2:return"TERMINATOR";case 3:return"=";case 4:return",";case 5:return"(";case 6:return")";case 7:return"ORDER";case 8:return"ASC";case 9:return"DESC";case 10:return"BY";case 11:return"NULLS_FIRST";case 12:return"NULLS_LAST";case 13:return"IDENTIFIER";case 14:return"IDTOKEN";case 15:return"PARAMETER";case 16:return"STRING";case 17:case 18:case 19:return"NUMBER";case 20:return"."}},rules:[/^(?:\s+)/,/^(?:\n+)/,/^(?:;)/,/^(?:=)/,/^(?:,)/,/^(?:\()/,/^(?:\))/,/^(?:order\b)/,/^(?:asc\b)/,/^(?:desc\b)/,/^(?:by\b)/,/^(?:nulls\sfirst\b)/,/^(?:nulls\slast\b)/,/^(?:[_A-Za-z][_0-9A-Za-z]*)/,/^(?:'([^'\\]|\\.)*')/,/^(?:\$[0-9]+)/,/^(?:"([^"\\]|\\.)*")/,/^(?:[0-9](?:\.[0-9]+)?e\+[0-9]+)/,/^(?:[0-9]{1,19}(?:\.[0-9]+)?)/,/^(?:\.[0-9]+)/,/^(?:\.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],inclusive:!0}}};function P(){this.yy={}}return N.lexer=O,P.prototype=N,N.Parser=P,new P}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var i=r(62060).readFileSync(r(35423).normalize(e[1]),"utf8");return t.parser.parse(i)},r.c[r.s]===e&&t.main(process.argv.slice(1))},78976:(e,t,r)=>{e=r.nmd(e);var i=function(){var e=function(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r},t=[1,23],r=[1,24],i=[1,25],s=[1,26],n=[1,27],o=[1,30],a=[1,28],l=[1,29],u=[1,31],d=[1,32],c=[1,47],h=[1,41],p=[1,40],g=[1,21],m=[1,22],_=[1,45],f=[1,48],y=[1,49],b=[1,50],C=[1,51],E=[1,36],S=[1,37],T=[1,38],I=[1,39],v=[1,6],R=[1,63],w=[1,54],A=[1,53],D=[1,55],L=[1,56],M=[1,57],N=[1,58],O=[1,59],P=[1,60],x=[1,61],Z=[1,62],F=[1,64],k=[2,71],B=[1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,109,110,111,112,113,114,115,116,117,118,119,120],W=[1,71],G=[1,68],U=[1,69],H=[1,6,10,23,26,35,39,40,41,43,51,52,54,55,56,60,61,71,72,76,79,82,83,84,99,105,106,109,110,111,112,113,114,115,116,117,118,119,120],V=[1,6,39,40,41,43,51,52,54,55,60,61,71,72,76,79,82,83,84,105,106,109,110,111,112,113,114,115,116,117,118,119,120],j=[1,100],q=[1,106],z=[2,123],$=[1,6,26,39,40,41,43,51,52,54,55,60,61,71,72,76,79,82,83,84,105,106,109,110,111,112,113,114,115,116,117,118,119,120],Q=[1,6,39,40,41,43,51,52,54,55,60,61,71,72,76,79,82,83,84,85,104,105,106,109,110,111,112,113,114,115,116,117,118,119,120],Y=[1,133],K=[1,6,39],J=[1,142],X=[1,6,39,41],ee=[2,61],te=[1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,110,111,112,113,114,115,116,117,118,119,120],re=[1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,110,111,113,114,115,116,117,118,119,120],ie=[1,146],se=[79,82,84],ne=[39,72],oe=[1,151],ae=[1,153],le=[1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,114,115,116,117,118,119,120],ue=[1,169],de=[2,33],ce=[1,191],he=[2,47],pe=[1,195],ge=[1,196],me=[1,198],_e=[1,199],fe=[2,48],ye=[1,6,39,60],be=[2,62],Ce=[39,41],Ee=[26,41],Se=[26,39,41],Te={trace:function(){},yy:{},symbols_:{error:2,Root:3,Program:4,Statement:5,TERMINATOR:6,SaqlClause:7,Expression:8,Identifier:9,"=":10,LoadClause:11,FilterClause:12,GroupClause:13,OrderClause:14,ForeachClause:15,LimitClause:16,JoinClause:17,StreamClause:18,UnionClause:19,LOAD:20,StringToken:21,FILTER:22,BY:23,GROUP:24,GroupList:25,ORDER:26,OrderList:27,FOREACH:28,GenerateClause:29,JOIN:30,LIMIT:31,NumberToken:32,OFFSET:33,STREAM:34,THROUGH:35,UNION:36,ExpressionList:37,GroupExpression:38,",":39,"(":40,")":41,GroupModifier:42,JOINDIR:43,OrderExpression:44,ParenOrderedList:45,ParenOrderedListItem:46,OrderedListItem:47,OrderedLIList:48,OrderedListItemWithParam:49,OrderedListItemNoNulls:50,ASC:51,DESC:52,NullOrder:53,NULLS_FIRST:54,NULLS_LAST:55,GENERATE:56,GenerateList:57,GenerateExpression:58,ExpressionWith:59,AS:60,WITH:61,Value:62,Invocation:63,Operation:64,CaseStatement:65,WindowFunc:66,Array:67,Literal:68,Parenthetical:69,Accessor:70,"[":71,"]":72,ArrayList:73,ArrayExpression:74,RangeExpression:75,RANGE:76,CASE:77,WhenThenList:78,END:79,ElseStatement:80,WhenThenStatement:81,WHEN:82,THEN:83,ELSE:84,OVER:85,WindowFrame:86,PARTITION:87,WindowFrameResets:88,WinOrderClause:89,WindowResetIdentiferList:90,WindowResetIdentifer:91,IDENTIFIER:92,IDTOKEN:93,ParameterToken:94,BOOL:95,NullToken:96,PARAMETER:97,STRING:98,NUMBER:99,NULL:100,OrderedListNoNulls:101,InvocationList:102,WithinGroup:103,WITHIN:104,".":105,DOUBLECOLON:106,Index:107,UNARY:108,NOT:109,"-":110,"+":111,MATH:112,SHIFT:113,COMPARE:114,LOGIC_AND:115,LOGIC_OR:116,LOGIC_BITWISE:117,RELATION:118,IN:119,IS:120,$accept:0,$end:1},terminals_:{2:"error",6:"TERMINATOR",10:"=",20:"LOAD",22:"FILTER",23:"BY",24:"GROUP",26:"ORDER",28:"FOREACH",30:"JOIN",31:"LIMIT",33:"OFFSET",34:"STREAM",35:"THROUGH",36:"UNION",39:",",40:"(",41:")",43:"JOINDIR",51:"ASC",52:"DESC",54:"NULLS_FIRST",55:"NULLS_LAST",56:"GENERATE",60:"AS",61:"WITH",71:"[",72:"]",76:"RANGE",77:"CASE",79:"END",82:"WHEN",83:"THEN",84:"ELSE",85:"OVER",87:"PARTITION",92:"IDENTIFIER",93:"IDTOKEN",95:"BOOL",97:"PARAMETER",98:"STRING",99:"NUMBER",100:"NULL",104:"WITHIN",105:".",106:"DOUBLECOLON",108:"UNARY",109:"NOT",110:"-",111:"+",112:"MATH",113:"SHIFT",114:"COMPARE",115:"LOGIC_AND",116:"LOGIC_OR",117:"LOGIC_BITWISE",118:"RELATION",119:"IN",120:"IS"},productions_:[0,[3,0],[3,1],[4,1],[4,3],[4,2],[5,1],[5,1],[5,3],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[11,2],[12,4],[13,2],[14,2],[15,3],[17,2],[16,3],[16,3],[18,2],[18,4],[19,2],[25,1],[25,3],[38,8],[38,4],[42,0],[42,1],[27,1],[27,3],[44,3],[44,3],[44,3],[45,5],[46,3],[48,1],[48,3],[50,1],[50,2],[50,2],[47,1],[47,1],[49,2],[49,3],[49,2],[49,3],[49,2],[53,1],[53,1],[29,2],[57,1],[57,3],[58,1],[58,3],[37,1],[37,3],[59,1],[59,3],[8,1],[8,1],[8,1],[8,1],[8,1],[62,1],[62,1],[62,1],[62,1],[62,2],[62,2],[67,2],[67,3],[73,1],[73,3],[74,1],[74,1],[75,3],[75,2],[75,2],[75,1],[65,3],[65,4],[65,4],[65,5],[78,1],[78,2],[81,4],[80,2],[66,3],[86,8],[86,11],[88,3],[88,1],[90,1],[90,3],[91,1],[91,2],[89,1],[89,1],[89,1],[9,1],[9,1],[68,1],[68,1],[68,1],[68,1],[68,1],[94,1],[21,1],[32,1],[96,1],[101,1],[101,3],[69,3],[63,4],[63,4],[63,2],[102,0],[102,1],[103,7],[70,2],[70,2],[70,1],[107,3],[64,2],[64,2],[64,2],[64,2],[64,3],[64,3],[64,3],[64,3],[64,3],[64,3],[64,3],[64,3],[64,3],[64,3],[64,4],[64,3],[64,4]],performAction:function(e,t,r,i,s,n,o){var a=n.length-1;switch(s){case 2:return this.$=n[a];case 3:case 57:case 61:case 63:case 78:case 90:case 117:case 29:case 35:case 116:case 42:case 99:this.$=[n[a]];break;case 4:case 30:case 36:case 43:case 58:case 62:case 79:case 118:n[a-2].push(n[a]),this.$=n[a-2];break;case 5:case 41:case 119:case 125:case 129:this.$=n[a-1];break;case 6:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 34:case 56:case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 80:case 81:case 108:case 109:case 110:case 111:case 112:case 124:case 126:case 127:case 128:case 48:case 101:case 103:case 104:case 105:this.$=n[a];break;case 7:this.$={type:"expr",expr:n[a]};break;case 8:n[a].into=n[a-2][1],this.$=n[a];break;case 18:this.$={type:"load",from:n[a]};break;case 19:this.$={type:"filter",input:n[a-2][1],expr:n[a]};break;case 20:this.$={type:"group",list:n[a]};break;case 21:this.$={type:"order",list:n[a]};break;case 22:this.$={type:"foreach",input:n[a-1][1],expr:["obj",n[a]]};break;case 23:this.$={type:"join",list:n[a]};break;case 24:this.$={type:"limit",input:n[a-1][1],expr:n[a]};break;case 25:this.$={type:"offset",input:n[a-1][1],expr:n[a]};break;case 26:this.$={type:"stream",input:n[a][1]};break;case 27:this.$={type:"stream",input:n[a-2][1],expr:n[a]};break;case 28:this.$={type:"union",input:n[a][0][1],expr:["arr",n[a].slice(1)]};break;case 31:n[a-4].push(n[a-2]),this.$=[n[a-7][1],["g_arr",n[a-4]],n[a]];break;case 32:this.$=[n[a-3][1],n[a-1],n[a]];break;case 33:this.$="";break;case 37:this.$=[n[a-2][1],["arr",n[a]]];break;case 38:case 39:this.$=[n[a-2][1],n[a]];break;case 40:this.$=[n[a-3]].concat(n[a-1]);break;case 44:case 47:this.$=["ord",n[a],!1];break;case 45:case 49:this.$=["ord",n[a-1],!1];break;case 46:case 51:this.$=["ord",n[a-1],!0];break;case 50:this.$=["ord",n[a-2],!1,n[a]];break;case 52:this.$=["ord",n[a-2],!0,n[a]];break;case 53:this.$=["ord",n[a-1],null,n[a]];break;case 54:this.$=!0;break;case 55:this.$=!1;break;case 59:n[a].splice(0,0,n[a][0][1]),this.$=n[a];break;case 60:n[a-2].splice(0,0,n[a][1]),this.$=n[a-2];break;case 64:this.$=[n[a-2],n[a]];break;case 74:case 75:case 102:this.$=[".",n[a-1],n[a]];break;case 76:this.$=["arr",[]];break;case 77:this.$=["arr",n[a-1]];break;case 82:this.$=["@",n[a-2],n[a]];break;case 83:this.$=["@",void 0,n[a]];break;case 84:this.$=["@",n[a-1],void 0];break;case 85:this.$=["@",void 0,void 0];break;case 86:this.$=["case",{list:n[a-1]}];break;case 87:this.$=["case",{expr:n[a-2],list:n[a-1]}];break;case 88:n[a-2].push(n[a-1]),this.$=["case",{list:n[a-2]}];break;case 89:n[a-2].push(n[a-1]),this.$=["case",{expr:n[a-3],list:n[a-2]}];break;case 91:case 122:n[a-1].push(n[a]),this.$=n[a-1];break;case 92:this.$=["when",n[a-2],n[a]];break;case 93:this.$=["else",n[a]];break;case 94:this.$=["window",n[a-2],n[a]];break;case 95:this.$=["winFrame",n[a-5],n[a-1]];break;case 96:this.$=["winFrame",n[a-8],n[a-4],["winOrderList",n[a-1]]];break;case 97:this.$=["winResetList",n[a-1]];break;case 98:this.$=["winResetList",n[a]];break;case 100:n[a-2].push(n[a]),n[a-2];break;case 106:this.$=["'",n[a]];break;case 107:this.$=["'",n[a].slice(1,+(n[a].length-2)+1)];break;case 113:this.$=["$",n[a]];break;case 114:this.$=['"',n[a].slice(1,+(n[a].length-2)+1)];break;case 115:this.$=["#",+n[a]];break;case 120:case 121:this.$=["(",n[a-3],n[a-1]];break;case 123:this.$=[];break;case 130:this.$=[n[a-1],n[a]];break;case 131:this.$=["!",n[a]];break;case 132:this.$=["u-",n[a]];break;case 133:this.$=["u+",n[a]];break;case 134:this.$=["+",n[a-2],n[a]];break;case 135:this.$=["-",n[a-2],n[a]];break;case 136:case 137:case 138:case 142:case 143:this.$=[n[a-1],n[a-2],n[a]];break;case 139:this.$=["&&",n[a-2],n[a]];break;case 140:this.$=["||",n[a-2],n[a]];break;case 141:this.$=["$$[$0-1]",n[a-2],n[a]];break;case 144:this.$=["not in",n[a-3],n[a]];break;case 145:this.$=["isnull",n[a-2]];break;case 146:this.$=["isnotnull",n[a-3]]}},table:[{1:[2,1],3:1,4:2,5:3,7:4,8:5,9:6,11:7,12:8,13:9,14:10,15:11,16:12,17:13,18:14,19:15,20:t,21:43,22:r,24:i,26:s,28:n,30:o,31:a,32:44,33:l,34:u,36:d,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{1:[3]},{1:[2,2],6:[1,52]},e(v,[2,3]),e(v,[2,6]),e(v,[2,7],{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e([1,6,40,71,105,106,109,110,111,112,113,114,115,116,117,118,119,120],k,{10:[1,65]}),e(v,[2,9]),e(v,[2,10]),e(v,[2,11]),e(v,[2,12]),e(v,[2,13]),e(v,[2,14]),e(v,[2,15]),e(v,[2,16]),e(v,[2,17]),e(B,[2,65],{70:66,107:70,40:[1,67],71:W,105:G,106:U}),e(B,[2,66],{107:70,70:72,103:74,40:[1,73],71:W,85:[1,75],104:[1,76],105:G,106:U}),e(B,[2,67]),e(B,[2,68]),e(B,[2,69]),e(H,[2,106]),e(H,[2,107]),{21:77,98:y},{9:78,92:g,93:m},{9:81,25:79,38:80,92:g,93:m},{9:84,27:82,44:83,92:g,93:m},{9:85,92:g,93:m},{9:86,92:g,93:m},{9:87,92:g,93:m},{9:81,25:88,38:80,92:g,93:m},{9:89,92:g,93:m},{8:91,9:92,21:43,32:44,37:90,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(V,[2,70]),e(V,[2,72]),e(V,[2,73]),{8:93,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:94,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:95,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:96,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:98,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,78:97,81:99,82:j,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:104,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,72:[1,101],73:102,74:103,75:105,76:q,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(V,[2,108]),e(V,[2,109]),e(V,[2,110]),e(V,[2,111]),e(V,[2,112]),{8:107,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(V,[2,113]),e(V,[2,114]),e(V,[2,115]),e(V,[2,116]),e(v,[2,5],{7:4,8:5,9:6,11:7,12:8,13:9,14:10,15:11,16:12,17:13,18:14,19:15,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,94:42,21:43,32:44,96:46,5:108,20:t,22:r,24:i,26:s,28:n,30:o,31:a,33:l,34:u,36:d,40:c,71:h,77:p,92:g,93:m,95:_,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I}),{8:109,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:110,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:111,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:112,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:113,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:114,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:115,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:116,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:117,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:118,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{119:[1,119]},{96:120,100:C,109:[1,121]},{5:122,7:4,8:5,9:6,11:7,12:8,13:9,14:10,15:11,16:12,17:13,18:14,19:15,20:t,21:43,22:r,24:i,26:s,28:n,30:o,31:a,32:44,33:l,34:u,36:d,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(V,[2,74]),{8:91,9:92,21:43,32:44,37:124,40:c,41:z,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,102:123,108:E,109:S,110:T,111:I},{9:125,92:g,93:m},{9:126,92:g,93:m},e($,[2,128]),{8:127,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(V,[2,75]),{8:91,9:92,21:43,32:44,37:124,40:c,41:z,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,102:128,108:E,109:S,110:T,111:I},e(Q,[2,122]),{40:[1,130],86:129},{24:[1,131]},e(v,[2,18]),{23:[1,132]},e(v,[2,20],{39:Y}),e(K,[2,29]),{23:[1,134]},e(v,[2,21],{39:[1,135]}),e(K,[2,35]),{23:[1,136]},{29:137,56:[1,138]},{32:139,99:b},{32:140,99:b},e(v,[2,23],{39:Y}),e(v,[2,26],{35:[1,141]}),e(v,[2,28],{39:J}),e(X,ee,{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(V,k),e(te,[2,130],{109:R}),e(te,[2,131],{109:R}),e(re,[2,132],{109:R,112:D}),e(re,[2,133],{109:R,112:D}),{79:[1,143],80:144,81:145,82:j,84:ie},{78:147,81:99,82:j,109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},e(se,[2,90]),{8:148,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(V,[2,76]),{39:[1,150],72:[1,149]},e(ne,[2,78]),e(ne,[2,80],{76:oe,109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(ne,[2,81]),e(ne,[2,85],{62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,94:42,21:43,32:44,96:46,9:92,8:152,40:c,71:h,77:p,92:g,93:m,95:_,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I}),{41:ae,109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},e(v,[2,4]),e(re,[2,134],{109:R,112:D}),e(re,[2,135],{109:R,112:D}),e(te,[2,136],{109:R}),e([1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,113,114,115,116,117,118,119,120],[2,137],{109:R,110:w,111:A,112:D}),e([1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,114,115,116,117,120],[2,138],{109:R,110:w,111:A,112:D,113:L,118:x,119:Z}),e([1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,115,116],[2,139],{109:R,110:w,111:A,112:D,113:L,114:M,117:P,118:x,119:Z,120:F}),e([1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,116],[2,140],{109:R,110:w,111:A,112:D,113:L,114:M,115:N,117:P,118:x,119:Z,120:F}),e([1,6,39,41,43,51,52,54,55,60,61,72,76,79,82,83,84,115,116,117],[2,141],{109:R,110:w,111:A,112:D,113:L,114:M,118:x,119:Z,120:F}),e(le,[2,142],{109:R,110:w,111:A,112:D,113:L}),e(le,[2,143],{109:R,110:w,111:A,112:D,113:L}),{8:154,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(B,[2,145]),{96:155,100:C},e(v,[2,8]),{41:[1,156]},{39:J,41:[2,124]},e($,[2,126]),e($,[2,127]),{72:[1,157],109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},{41:[1,158]},e(B,[2,94]),{71:[1,159]},{40:[1,160]},{8:161,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{9:81,38:162,92:g,93:m},{8:164,9:92,21:43,32:44,40:[1,163],62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{9:84,44:165,92:g,93:m},{8:170,9:92,21:43,32:44,40:ue,45:166,46:167,47:168,49:171,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(v,[2,22]),{8:175,9:92,21:43,32:44,40:c,57:172,58:173,59:174,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(v,[2,24]),e(v,[2,25]),{8:176,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:177,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(B,[2,86]),{79:[1,178]},e(se,[2,91]),{8:179,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{79:[1,180],80:181,81:145,82:j,84:ie},{83:[1,182],109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},e(V,[2,77]),{8:104,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,74:183,75:105,76:q,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(ne,[2,84],{62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,94:42,21:43,32:44,96:46,9:92,8:184,40:c,71:h,77:p,92:g,93:m,95:_,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I}),e(ne,[2,83],{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(V,[2,119]),e(te,[2,144],{109:R}),e(B,[2,146]),e(Q,[2,120]),e($,[2,129]),e(Q,[2,121]),{8:186,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,75:185,76:q,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{26:[1,187]},e(v,[2,19],{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(K,[2,30]),{8:189,9:92,21:43,32:44,37:188,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(K,de,{42:190,43:ce,109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(K,[2,36]),e(K,[2,37]),e(K,[2,38]),e(K,[2,39]),{8:194,9:92,21:43,32:44,40:c,47:192,49:193,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(X,he,{53:197,51:pe,52:ge,54:me,55:_e,109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(X,fe),e(v,[2,56],{39:[1,200]}),e(K,[2,57]),e(K,[2,59],{60:[1,201]}),e(ye,[2,63],{61:[1,202],109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(v,[2,27],{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(X,be,{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),e(B,[2,88]),{79:[2,93],109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},e(B,[2,87]),{79:[1,203]},{8:204,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(ne,[2,79]),e(ne,[2,82],{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),{72:[1,205]},{76:oe,109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},{23:[1,206]},{39:[1,207]},{39:ee,41:ae,109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},e(K,[2,32]),e(K,[2,34]),{39:[1,208]},{39:fe,41:[1,209]},{39:he,41:ae,51:pe,52:ge,53:197,54:me,55:_e,109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},e(X,[2,49],{53:210,54:me,55:_e}),e(X,[2,51],{53:211,54:me,55:_e}),e(X,[2,53]),e(X,[2,54]),e(X,[2,55]),{8:175,9:92,21:43,32:44,40:c,58:212,59:174,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{9:213,92:g,93:m},{8:214,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(B,[2,89]),e(se,[2,92],{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),{87:[1,215]},{8:217,9:92,21:43,32:44,40:c,50:216,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:218,9:92,21:43,32:44,40:c,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{8:170,9:92,21:43,32:44,40:c,47:220,48:219,49:171,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(X,[2,41]),e(X,[2,50]),e(X,[2,52]),e(K,[2,58]),e(K,[2,60]),e(ye,[2,64],{109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F}),{23:[1,221]},{41:[1,222]},{41:[2,44],51:[1,223],52:[1,224],109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},{39:be,41:[1,225],109:R,110:w,111:A,112:D,113:L,114:M,115:N,116:O,117:P,118:x,119:Z,120:F},{39:[1,227],41:[1,226]},e(Ce,[2,42]),{9:231,40:[1,229],88:228,91:230,92:g,93:m},e(Q,[2,125]),{41:[2,45]},{41:[2,46]},e(K,de,{42:232,43:ce}),e(X,[2,40]),{8:170,9:92,21:43,32:44,40:c,47:233,49:171,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},{26:[1,235],41:[1,234]},{9:231,90:236,91:237,92:g,93:m},e(Ee,[2,98]),e(Se,[2,101],{107:70,70:238,71:W,105:G,106:U}),e(K,[2,31]),e(Ce,[2,43]),e(B,[2,95]),{23:[1,239]},{39:[1,241],41:[1,240]},e(Ce,[2,99]),e(Se,[2,102]),{8:170,9:92,21:43,32:44,40:ue,45:245,46:244,47:243,49:171,62:16,63:17,64:18,65:19,66:20,67:33,68:34,69:35,71:h,77:p,89:242,92:g,93:m,94:42,95:_,96:46,97:f,98:y,99:b,100:C,108:E,109:S,110:T,111:I},e(Ee,[2,97]),{9:231,91:246,92:g,93:m},{41:[1,247]},{41:[2,103]},{41:[2,104]},{41:[2,105]},e(Ce,[2,100]),e(B,[2,96])],defaultActions:{223:[2,45],224:[2,46],243:[2,103],244:[2,104],245:[2,105]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],s=[],n=this.table,o="",a=0,l=0,u=0,d=s.slice.call(arguments,1),c=Object.create(this.lexer),h={yy:{}};for(var p in this.yy)Object.prototype.hasOwnProperty.call(this.yy,p)&&(h.yy[p]=this.yy[p]);c.setInput(e,h.yy),h.yy.lexer=c,h.yy.parser=this,void 0===c.yylloc&&(c.yylloc={});var g=c.yylloc;s.push(g);var m=c.options&&c.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _,f,y,b,C,E,S,T,I,v=function(){var e;return"number"!=typeof(e=c.lex()||1)&&(e=t.symbols_[e]||e),e},R={};;){if(y=r[r.length-1],this.defaultActions[y]?b=this.defaultActions[y]:(null==_&&(_=v()),b=n[y]&&n[y][_]),void 0===b||!b.length||!b[0]){var w="";for(E in I=[],n[y])this.terminals_[E]&&E>2&&I.push("'"+this.terminals_[E]+"'");w=c.showPosition?"Parse error on line "+(a+1)+":\n"+c.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[_]||_)+"'":"Parse error on line "+(a+1)+": Unexpected "+(1==_?"end of input":"'"+(this.terminals_[_]||_)+"'"),this.parseError(w,{text:c.match,token:this.terminals_[_]||_,line:c.yylineno,loc:g,expected:I})}if(b[0]instanceof Array&&b.length>1)throw new Error("Parse Error: multiple actions possible at state: "+y+", token: "+_);switch(b[0]){case 1:r.push(_),i.push(c.yytext),s.push(c.yylloc),r.push(b[1]),_=null,f?(_=f,f=null):(l=c.yyleng,o=c.yytext,a=c.yylineno,g=c.yylloc,u>0&&u--);break;case 2:if(S=this.productions_[b[1]][1],R.$=i[i.length-S],R._$={first_line:s[s.length-(S||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(S||1)].first_column,last_column:s[s.length-1].last_column},m&&(R._$.range=[s[s.length-(S||1)].range[0],s[s.length-1].range[1]]),void 0!==(C=this.performAction.apply(R,[o,l,a,h.yy,b[1],i,s].concat(d))))return C;S&&(r=r.slice(0,-1*S*2),i=i.slice(0,-1*S),s=s.slice(0,-1*S)),r.push(this.productions_[b[1]][0]),i.push(R.$),s.push(R._$),T=n[r[r.length-2]][r[r.length-1]],r.push(T);break;case 3:return!0}}return!0}},Ie={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,s;if(this.options.backtrack_lexer&&(s={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(s.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var n in s)this[n]=s[n];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var s=this._currentRules(),n=0;n<s.length;n++)if((r=this._input.match(this.rules[s[n]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=n,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,s[n])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,s[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r,i){switch(r){case 0:case 1:case 2:case 3:break;case 4:throw"Unterminated block comment.";case 5:return"->";case 6:return"+";case 7:return"-";case 8:case 9:case 10:return"MATH";case 11:case 12:return"SHIFT";case 13:case 14:return"RELATION";case 15:return"IN";case 16:case 17:case 18:case 19:case 20:case 21:case 44:return"COMPARE";case 22:case 23:return"LOGIC_AND";case 24:case 25:return"LOGIC_OR";case 26:case 27:case 28:return"LOGIC_BITWISE";case 29:return"IS";case 30:return"NOT";case 31:return"NULL";case 32:case 33:return"UNARY";case 34:return"TERMINATOR";case 35:return"=";case 36:return",";case 37:return"(";case 38:return")";case 39:return"[";case 40:return"]";case 41:return"RANGE";case 42:return"DOUBLECOLON";case 43:return"LOAD";case 45:return"FILTER";case 46:case 47:return"GROUP";case 48:return"ORDER";case 49:return"FOREACH";case 50:return"LIMIT";case 51:return"OFFSET";case 52:return"JOIN";case 53:return"STREAM";case 54:return"UNION";case 55:return"THROUGH";case 56:return"GENERATE";case 57:case 59:return"ASC";case 58:case 60:return"DESC";case 61:return"USING";case 62:case 63:case 64:case 65:return"JOINDIR";case 66:return"BY";case 67:return"AS";case 68:return"WITH";case 69:return"CASE";case 70:return"WHEN";case 71:return"THEN";case 72:return"ELSE";case 73:return"END";case 74:return"OVER";case 75:return"PARTITION";case 76:return"WITHIN";case 77:return"NULLS_FIRST";case 78:return"NULLS_LAST";case 79:return"IDENTIFIER";case 80:return"IDTOKEN";case 81:return"PARAMETER";case 82:return"STRING";case 83:case 84:case 85:return"NUMBER";case 86:return"."}},rules:[/^(?:\s+)/,/^(?:\n+)/,/^(?:(--|\/\/)[^\r\n]*[\r\n]?)/,/^(?:(\/\*)[^*]*[*]+([^*\/][^*]*[*]+)*[\/])/,/^(?:(\/\*))/,/^(?:->)/,/^(?:\+)/,/^(?:-)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:<<)/,/^(?:>>)/,/^(?:in\*)/,/^(?:like\b)/,/^(?:in\b)/,/^(?:==)/,/^(?:!=)/,/^(?:<=)/,/^(?:>=)/,/^(?:<)/,/^(?:>)/,/^(?:&&)/,/^(?:and\b)/,/^(?:\|\|)/,/^(?:or\b)/,/^(?:&)/,/^(?:\|)/,/^(?:\^)/,/^(?:is\b)/,/^(?:not\b)/,/^(?:null\b)/,/^(?:!)/,/^(?:~)/,/^(?:;)/,/^(?:=)/,/^(?:,)/,/^(?:\()/,/^(?:\))/,/^(?:\[)/,/^(?:\])/,/^(?:\.\.)/,/^(?:::)/,/^(?:load\b)/,/^(?:matches\b)/,/^(?:filter\b)/,/^(?:group\b)/,/^(?:cogroup\b)/,/^(?:order\b)/,/^(?:foreach\b)/,/^(?:limit\b)/,/^(?:offset\b)/,/^(?:join\b)/,/^(?:stream\b)/,/^(?:union\b)/,/^(?:through\b)/,/^(?:generate\b)/,/^(?:ascending\b)/,/^(?:descending\b)/,/^(?:asc\b)/,/^(?:desc\b)/,/^(?:using\b)/,/^(?:left\b)/,/^(?:right\b)/,/^(?:full\b)/,/^(?:inner\b)/,/^(?:by\b)/,/^(?:as\b)/,/^(?:with\b)/,/^(?:case\b)/,/^(?:when\b)/,/^(?:then\b)/,/^(?:else\b)/,/^(?:end\b)/,/^(?:over\b)/,/^(?:partition\b)/,/^(?:within\b)/,/^(?:nulls\sfirst\b)/,/^(?:nulls\slast\b)/,/^(?:[_A-Za-z][_0-9A-Za-z]*)/,/^(?:'([^'\\]|\\.)*')/,/^(?:\$[0-9]+)/,/^(?:"([^"\\]|\\.)*")/,/^(?:[0-9](?:\.[0-9]+)?e\+[0-9]+)/,/^(?:[0-9]{1,19}(?:\.[0-9]+)?)/,/^(?:\.[0-9]+)/,/^(?:\.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86],inclusive:!0}}};function ve(){this.yy={}}return Te.lexer=Ie,ve.prototype=Te,Te.Parser=ve,new ve}();t.parser=i,t.Parser=i.Parser,t.parse=function(){return i.parse.apply(i,arguments)},t.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var i=r(77832).readFileSync(r(24869).normalize(e[1]),"utf8");return t.parser.parse(i)},r.c[r.s]===e&&t.main(process.argv.slice(1))},14234:(e,t,r)=>{"use strict";r.d(t,{qj:()=>z,aV:()=>he});var i=r(15671),s=r(43144),n=r(82963),o=r(61120),a=r(97326),l=r(79340),u=r(4942),d=r(67294),c=r(46871),h=r(87462),p=r(86010);function g(e){var t=e.cellCount,r=e.cellSize,i=e.computeMetadataCallback,s=e.computeMetadataCallbackProps,n=e.nextCellsCount,o=e.nextCellSize,a=e.nextScrollToIndex,l=e.scrollToIndex,u=e.updateScrollOffsetForScrollToIndex;t===n&&("number"!=typeof r&&"number"!=typeof o||r===o)||(i(s),l>=0&&l===a&&u())}var m=r(44925),_=(r(45697),function(){function e(t){var r=t.cellCount,s=t.cellSizeGetter,n=t.estimatedCellSize;(0,i.Z)(this,e),(0,u.Z)(this,"_cellSizeAndPositionData",{}),(0,u.Z)(this,"_lastMeasuredIndex",-1),(0,u.Z)(this,"_lastBatchedIndex",-1),(0,u.Z)(this,"_cellCount",void 0),(0,u.Z)(this,"_cellSizeGetter",void 0),(0,u.Z)(this,"_estimatedCellSize",void 0),this._cellSizeGetter=s,this._cellCount=r,this._estimatedCellSize=n}return(0,s.Z)(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,r=e.estimatedCellSize,i=e.cellSizeGetter;this._cellCount=t,this._estimatedCellSize=r,this._cellSizeGetter=i}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index ".concat(e," is outside of range 0..").concat(this._cellCount));if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),r=t.offset+t.size,i=this._lastMeasuredIndex+1;i<=e;i++){var s=this._cellSizeGetter({index:i});if(void 0===s||isNaN(s))throw Error("Invalid size returned for cell ".concat(i," of value ").concat(s));null===s?(this._cellSizeAndPositionData[i]={offset:r,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[i]={offset:r,size:s},r+=s,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,r=void 0===t?"auto":t,i=e.containerSize,s=e.currentOffset,n=e.targetIndex;if(i<=0)return 0;var o,a=this.getSizeAndPositionOfCell(n),l=a.offset,u=l-i+a.size;switch(r){case"start":o=l;break;case"end":o=u;break;case"center":o=l-(i-a.size)/2;break;default:o=Math.max(u,Math.min(l,s))}var d=this.getTotalSize();return Math.max(0,Math.min(d-i,o))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,r=e.offset;if(0===this.getTotalSize())return{};var i=r+t,s=this._findNearestCell(r),n=this.getSizeAndPositionOfCell(s);r=n.offset+n.size;for(var o=s;r<i&&o<this._cellCount-1;)o++,r+=this.getSizeAndPositionOfCell(o).size;return{start:s,stop:o}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,r){for(;t<=e;){var i=t+Math.floor((e-t)/2),s=this.getSizeAndPositionOfCell(i).offset;if(s===r)return i;s<r?t=i+1:s>r&&(e=i-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var r=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=r,r*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset ".concat(e," specified"));e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),r=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(r,0,e):this._exponentialSearch(r,e)}}]),e}()),f=function(){return"undefined"!=typeof window&&window.chrome?16777100:15e5},y=function(){function e(t){var r=t.maxScrollSize,s=void 0===r?f():r,n=(0,m.Z)(t,["maxScrollSize"]);(0,i.Z)(this,e),(0,u.Z)(this,"_cellSizeAndPositionManager",void 0),(0,u.Z)(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new _(n),this._maxScrollSize=s}return(0,s.Z)(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,r=e.offset,i=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize(),n=this._getOffsetPercentage({containerSize:t,offset:r,totalSize:s});return Math.round(n*(s-i))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,r=void 0===t?"auto":t,i=e.containerSize,s=e.currentOffset,n=e.targetIndex;s=this._safeOffsetToOffset({containerSize:i,offset:s});var o=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:r,containerSize:i,currentOffset:s,targetIndex:n});return this._offsetToSafeOffset({containerSize:i,offset:o})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,r=e.offset;return r=this._safeOffsetToOffset({containerSize:t,offset:r}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:r})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,r=e.offset,i=e.totalSize;return i<=t?0:r/(i-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,r=e.offset,i=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize();if(i===s)return r;var n=this._getOffsetPercentage({containerSize:t,offset:r,totalSize:i});return Math.round(n*(s-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,r=e.offset,i=this._cellSizeAndPositionManager.getTotalSize(),s=this.getTotalSize();if(i===s)return r;var n=this._getOffsetPercentage({containerSize:t,offset:r,totalSize:s});return Math.round(n*(i-t))}}]),e}();function b(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(r){var i=r.callback,s=r.indices,n=Object.keys(s),o=!e||n.every((function(e){var t=s[e];return Array.isArray(t)?t.length>0:t>=0})),a=n.length!==Object.keys(t).length||n.some((function(e){var r=t[e],i=s[e];return Array.isArray(i)?r.join(",")!==i.join(","):r!==i}));t=s,o&&a&&i(s)}}function C(e){var t=e.cellSize,r=e.cellSizeAndPositionManager,i=e.previousCellsCount,s=e.previousCellSize,n=e.previousScrollToAlignment,o=e.previousScrollToIndex,a=e.previousSize,l=e.scrollOffset,u=e.scrollToAlignment,d=e.scrollToIndex,c=e.size,h=e.sizeJustIncreasedFromZero,p=e.updateScrollIndexCallback,g=r.getCellCount(),m=d>=0&&d<g;m&&(c!==a||h||!s||"number"==typeof t&&t!==s||u!==n||d!==o)?p(d):!m&&g>0&&(c<a||g<i)&&l>r.getTotalSize()-c&&p(g-1)}var E,S,T,I=r(632),v=(E="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||E.webkitRequestAnimationFrame||E.mozRequestAnimationFrame||E.oRequestAnimationFrame||E.msRequestAnimationFrame||function(e){return E.setTimeout(e,1e3/60)},R=E.cancelAnimationFrame||E.webkitCancelAnimationFrame||E.mozCancelAnimationFrame||E.oCancelAnimationFrame||E.msCancelAnimationFrame||function(e){E.clearTimeout(e)},w=v,A=R,D=function(e){return A(e.id)},L=function(e,t){var r;Promise.resolve().then((function(){r=Date.now()}));var i={id:w((function s(){Date.now()-r>=t?e.call():i.id=w(s)}))};return i};function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(r,!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O="observed",P="requested",x=(T=S=function(e){function t(e){var r;(0,i.Z)(this,t),r=(0,n.Z)(this,(0,o.Z)(t).call(this,e)),(0,u.Z)((0,a.Z)(r),"_onGridRenderedMemoizer",b()),(0,u.Z)((0,a.Z)(r),"_onScrollMemoizer",b(!1)),(0,u.Z)((0,a.Z)(r),"_deferredInvalidateColumnIndex",null),(0,u.Z)((0,a.Z)(r),"_deferredInvalidateRowIndex",null),(0,u.Z)((0,a.Z)(r),"_recomputeScrollLeftFlag",!1),(0,u.Z)((0,a.Z)(r),"_recomputeScrollTopFlag",!1),(0,u.Z)((0,a.Z)(r),"_horizontalScrollBarSize",0),(0,u.Z)((0,a.Z)(r),"_verticalScrollBarSize",0),(0,u.Z)((0,a.Z)(r),"_scrollbarPresenceChanged",!1),(0,u.Z)((0,a.Z)(r),"_scrollingContainer",void 0),(0,u.Z)((0,a.Z)(r),"_childrenToDisplay",void 0),(0,u.Z)((0,a.Z)(r),"_columnStartIndex",void 0),(0,u.Z)((0,a.Z)(r),"_columnStopIndex",void 0),(0,u.Z)((0,a.Z)(r),"_rowStartIndex",void 0),(0,u.Z)((0,a.Z)(r),"_rowStopIndex",void 0),(0,u.Z)((0,a.Z)(r),"_renderedColumnStartIndex",0),(0,u.Z)((0,a.Z)(r),"_renderedColumnStopIndex",0),(0,u.Z)((0,a.Z)(r),"_renderedRowStartIndex",0),(0,u.Z)((0,a.Z)(r),"_renderedRowStopIndex",0),(0,u.Z)((0,a.Z)(r),"_initialScrollTop",void 0),(0,u.Z)((0,a.Z)(r),"_initialScrollLeft",void 0),(0,u.Z)((0,a.Z)(r),"_disablePointerEventsTimeoutId",void 0),(0,u.Z)((0,a.Z)(r),"_styleCache",{}),(0,u.Z)((0,a.Z)(r),"_cellCache",{}),(0,u.Z)((0,a.Z)(r),"_debounceScrollEndedCallback",(function(){r._disablePointerEventsTimeoutId=null,r.setState({isScrolling:!1,needToResetStyleCache:!1})})),(0,u.Z)((0,a.Z)(r),"_invokeOnGridRenderedHelper",(function(){var e=r.props.onSectionRendered;r._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:r._columnStartIndex,columnOverscanStopIndex:r._columnStopIndex,columnStartIndex:r._renderedColumnStartIndex,columnStopIndex:r._renderedColumnStopIndex,rowOverscanStartIndex:r._rowStartIndex,rowOverscanStopIndex:r._rowStopIndex,rowStartIndex:r._renderedRowStartIndex,rowStopIndex:r._renderedRowStopIndex}})})),(0,u.Z)((0,a.Z)(r),"_setScrollingContainerRef",(function(e){r._scrollingContainer=e})),(0,u.Z)((0,a.Z)(r),"_onScroll",(function(e){e.target===r._scrollingContainer&&r.handleScrollEvent(e.target)}));var s=new y({cellCount:e.columnCount,cellSizeGetter:function(r){return t._wrapSizeGetter(e.columnWidth)(r)},estimatedCellSize:t._getEstimatedColumnSize(e)}),l=new y({cellCount:e.rowCount,cellSizeGetter:function(r){return t._wrapSizeGetter(e.rowHeight)(r)},estimatedCellSize:t._getEstimatedRowSize(e)});return r.state={instanceProps:{columnSizeAndPositionManager:s,rowSizeAndPositionManager:l,prevColumnWidth:e.columnWidth,prevRowHeight:e.rowHeight,prevColumnCount:e.columnCount,prevRowCount:e.rowCount,prevIsScrolling:!0===e.isScrolling,prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},e.scrollToRow>0&&(r._initialScrollTop=r._getCalculatedScrollTop(e,r.state)),e.scrollToColumn>0&&(r._initialScrollLeft=r._getCalculatedScrollLeft(e,r.state)),r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,r=void 0===t?this.props.scrollToAlignment:t,i=e.columnIndex,s=void 0===i?this.props.scrollToColumn:i,n=e.rowIndex,o=void 0===n?this.props.scrollToRow:n,a=N({},this.props,{scrollToAlignment:r,scrollToColumn:s,scrollToRow:o});return{scrollLeft:this._getCalculatedScrollLeft(a),scrollTop:this._getCalculatedScrollTop(a)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,r=void 0===t?0:t,i=e.scrollTop,s=void 0===i?0:i;if(!(s<0)){this._debounceScrollEnded();var n=this.props,o=n.autoHeight,a=n.autoWidth,l=n.height,u=n.width,d=this.state.instanceProps,c=d.scrollbarSize,h=d.rowSizeAndPositionManager.getTotalSize(),p=d.columnSizeAndPositionManager.getTotalSize(),g=Math.min(Math.max(0,p-u+c),r),m=Math.min(Math.max(0,h-l+c),s);if(this.state.scrollLeft!==g||this.state.scrollTop!==m){var _={isScrolling:!0,scrollDirectionHorizontal:g!==this.state.scrollLeft?g>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:m!==this.state.scrollTop?m>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:O};o||(_.scrollTop=m),a||(_.scrollLeft=g),_.needToResetStyleCache=!1,this.setState(_)}this._invokeOnScrollMemoizer({scrollLeft:g,scrollTop:m,totalColumnsWidth:p,totalRowsHeight:h})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,r=e.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,r):r}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,r=e.rowCount,i=this.state.instanceProps;i.columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),i.rowSizeAndPositionManager.getSizeAndPositionOfCell(r-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,i=e.rowIndex,s=void 0===i?0:i,n=this.props,o=n.scrollToColumn,a=n.scrollToRow,l=this.state.instanceProps;l.columnSizeAndPositionManager.resetCell(r),l.rowSizeAndPositionManager.resetCell(s),this._recomputeScrollLeftFlag=o>=0&&(1===this.state.scrollDirectionHorizontal?r<=o:r>=o),this._recomputeScrollTopFlag=a>=0&&(1===this.state.scrollDirectionVertical?s<=a:s>=a),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,r=e.rowIndex,i=this.props.columnCount,s=this.props;i>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(N({},s,{scrollToColumn:t})),void 0!==r&&this._updateScrollTopForScrollToRow(N({},s,{scrollToRow:r}))}},{key:"componentDidMount",value:function(){var e=this.props,r=e.getScrollbarSize,i=e.height,s=e.scrollLeft,n=e.scrollToColumn,o=e.scrollTop,a=e.scrollToRow,l=e.width,u=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),u.scrollbarSizeMeasured||this.setState((function(e){var t=N({},e,{needToResetStyleCache:!1});return t.instanceProps.scrollbarSize=r(),t.instanceProps.scrollbarSizeMeasured=!0,t})),"number"==typeof s&&s>=0||"number"==typeof o&&o>=0){var d=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:s,scrollTop:o});d&&(d.needToResetStyleCache=!1,this.setState(d))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var c=i>0&&l>0;n>=0&&c&&this._updateScrollLeftForScrollToColumn(),a>=0&&c&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:s||0,scrollTop:o||0,totalColumnsWidth:u.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:u.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var r=this,i=this.props,s=i.autoHeight,n=i.autoWidth,o=i.columnCount,a=i.height,l=i.rowCount,u=i.scrollToAlignment,d=i.scrollToColumn,c=i.scrollToRow,h=i.width,p=this.state,g=p.scrollLeft,m=p.scrollPositionChangeReason,_=p.scrollTop,f=p.instanceProps;this._handleInvalidatedGridSize();var y=o>0&&0===e.columnCount||l>0&&0===e.rowCount;m===P&&(!n&&g>=0&&(g!==this._scrollingContainer.scrollLeft||y)&&(this._scrollingContainer.scrollLeft=g),!s&&_>=0&&(_!==this._scrollingContainer.scrollTop||y)&&(this._scrollingContainer.scrollTop=_));var b=(0===e.width||0===e.height)&&a>0&&h>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):C({cellSizeAndPositionManager:f.columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:g,scrollToAlignment:u,scrollToIndex:d,size:h,sizeJustIncreasedFromZero:b,updateScrollIndexCallback:function(){return r._updateScrollLeftForScrollToColumn(r.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):C({cellSizeAndPositionManager:f.rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:_,scrollToAlignment:u,scrollToIndex:c,size:a,sizeJustIncreasedFromZero:b,updateScrollIndexCallback:function(){return r._updateScrollTopForScrollToRow(r.props)}}),this._invokeOnGridRenderedHelper(),g!==t.scrollLeft||_!==t.scrollTop){var E=f.rowSizeAndPositionManager.getTotalSize(),S=f.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:g,scrollTop:_,totalColumnsWidth:S,totalRowsHeight:E})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&D(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,r=e.autoHeight,i=e.autoWidth,s=e.className,n=e.containerProps,o=e.containerRole,a=e.containerStyle,l=e.height,u=e.id,c=e.noContentRenderer,g=e.role,m=e.style,_=e.tabIndex,f=e.width,y=this.state,b=y.instanceProps,C=y.needToResetStyleCache,E=this._isScrolling(),S={boxSizing:"border-box",direction:"ltr",height:r?"auto":l,position:"relative",width:i?"auto":f,WebkitOverflowScrolling:"touch",willChange:"transform"};C&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var T=b.columnSizeAndPositionManager.getTotalSize(),I=b.rowSizeAndPositionManager.getTotalSize(),v=I>l?b.scrollbarSize:0,R=T>f?b.scrollbarSize:0;R===this._horizontalScrollBarSize&&v===this._verticalScrollBarSize||(this._horizontalScrollBarSize=R,this._verticalScrollBarSize=v,this._scrollbarPresenceChanged=!0),S.overflowX=T+v<=f?"hidden":"auto",S.overflowY=I+R<=l?"hidden":"auto";var w=this._childrenToDisplay,A=0===w.length&&l>0&&f>0;return d.createElement("div",(0,h.Z)({ref:this._setScrollingContainerRef},n,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:(0,p.Z)("ReactVirtualized__Grid",s),id:u,onScroll:this._onScroll,role:g,style:N({},S,{},m),tabIndex:_}),w.length>0&&d.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:o,style:N({width:t?"auto":T,height:I,maxWidth:T,maxHeight:I,overflow:"hidden",pointerEvents:E?"none":"",position:"relative"},a)},w),A&&c())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,r=e.cellRenderer,i=e.cellRangeRenderer,s=e.columnCount,n=e.deferredMeasurementCache,o=e.height,a=e.overscanColumnCount,l=e.overscanIndicesGetter,u=e.overscanRowCount,d=e.rowCount,c=e.width,h=e.isScrollingOptOut,p=t.scrollDirectionHorizontal,g=t.scrollDirectionVertical,m=t.instanceProps,_=this._initialScrollTop>0?this._initialScrollTop:t.scrollTop,f=this._initialScrollLeft>0?this._initialScrollLeft:t.scrollLeft,y=this._isScrolling(e,t);if(this._childrenToDisplay=[],o>0&&c>0){var b=m.columnSizeAndPositionManager.getVisibleCellRange({containerSize:c,offset:f}),C=m.rowSizeAndPositionManager.getVisibleCellRange({containerSize:o,offset:_}),E=m.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:c,offset:f}),S=m.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:o,offset:_});this._renderedColumnStartIndex=b.start,this._renderedColumnStopIndex=b.stop,this._renderedRowStartIndex=C.start,this._renderedRowStopIndex=C.stop;var T=l({direction:"horizontal",cellCount:s,overscanCellsCount:a,scrollDirection:p,startIndex:"number"==typeof b.start?b.start:0,stopIndex:"number"==typeof b.stop?b.stop:-1}),I=l({direction:"vertical",cellCount:d,overscanCellsCount:u,scrollDirection:g,startIndex:"number"==typeof C.start?C.start:0,stopIndex:"number"==typeof C.stop?C.stop:-1}),v=T.overscanStartIndex,R=T.overscanStopIndex,w=I.overscanStartIndex,A=I.overscanStopIndex;if(n){if(!n.hasFixedHeight())for(var D=w;D<=A;D++)if(!n.has(D,0)){v=0,R=s-1;break}if(!n.hasFixedWidth())for(var L=v;L<=R;L++)if(!n.has(0,L)){w=0,A=d-1;break}}this._childrenToDisplay=i({cellCache:this._cellCache,cellRenderer:r,columnSizeAndPositionManager:m.columnSizeAndPositionManager,columnStartIndex:v,columnStopIndex:R,deferredMeasurementCache:n,horizontalOffsetAdjustment:E,isScrolling:y,isScrollingOptOut:h,parent:this,rowSizeAndPositionManager:m.rowSizeAndPositionManager,rowStartIndex:w,rowStopIndex:A,scrollLeft:f,scrollTop:_,styleCache:this._styleCache,verticalOffsetAdjustment:S,visibleColumnIndices:b,visibleRowIndices:C}),this._columnStartIndex=v,this._columnStopIndex=R,this._rowStartIndex=w,this._rowStopIndex=A}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&D(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=L(this._debounceScrollEndedCallback,e)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,r=e.scrollLeft,i=e.scrollTop,s=e.totalColumnsWidth,n=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var r=e.scrollLeft,i=e.scrollTop,o=t.props,a=o.height;(0,o.onScroll)({clientHeight:a,clientWidth:o.width,scrollHeight:n,scrollLeft:r,scrollTop:i,scrollWidth:s})},indices:{scrollLeft:r,scrollTop:i}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var r=e.scrollLeft,i=e.scrollTop,s=t._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:r,scrollTop:i});s&&(s.needToResetStyleCache=!1,this.setState(s))}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollLeft(e,r)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,i=t._getScrollLeftForScrollToColumnStateUpdate(e,r);i&&(i.needToResetStyleCache=!1,this.setState(i))}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return t._getCalculatedScrollTop(e,r)}},{key:"_resetStyleCache",value:function(){var e=this._styleCache,t=this._cellCache,r=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var i=this._rowStartIndex;i<=this._rowStopIndex;i++)for(var s=this._columnStartIndex;s<=this._columnStopIndex;s++){var n="".concat(i,"-").concat(s);this._styleCache[n]=e[n],r&&(this._cellCache[n]=t[n])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,i=t._getScrollTopForScrollToRowStateUpdate(e,r);i&&(i.needToResetStyleCache=!1,this.setState(i))}}],[{key:"getDerivedStateFromProps",value:function(e,r){var i={};0===e.columnCount&&0!==r.scrollLeft||0===e.rowCount&&0!==r.scrollTop?(i.scrollLeft=0,i.scrollTop=0):(e.scrollLeft!==r.scrollLeft&&e.scrollToColumn<0||e.scrollTop!==r.scrollTop&&e.scrollToRow<0)&&Object.assign(i,t._getScrollToPositionStateUpdate({prevState:r,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}));var s,n,o=r.instanceProps;return i.needToResetStyleCache=!1,e.columnWidth===o.prevColumnWidth&&e.rowHeight===o.prevRowHeight||(i.needToResetStyleCache=!0),o.columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:t._getEstimatedColumnSize(e),cellSizeGetter:t._wrapSizeGetter(e.columnWidth)}),o.rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:t._getEstimatedRowSize(e),cellSizeGetter:t._wrapSizeGetter(e.rowHeight)}),0!==o.prevColumnCount&&0!==o.prevRowCount||(o.prevColumnCount=0,o.prevRowCount=0),e.autoHeight&&!1===e.isScrolling&&!0===o.prevIsScrolling&&Object.assign(i,{isScrolling:!1}),g({cellCount:o.prevColumnCount,cellSize:"number"==typeof o.prevColumnWidth?o.prevColumnWidth:null,computeMetadataCallback:function(){return o.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"==typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:o.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){s=t._getScrollLeftForScrollToColumnStateUpdate(e,r)}}),g({cellCount:o.prevRowCount,cellSize:"number"==typeof o.prevRowHeight?o.prevRowHeight:null,computeMetadataCallback:function(){return o.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"==typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:o.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){n=t._getScrollTopForScrollToRowStateUpdate(e,r)}}),o.prevColumnCount=e.columnCount,o.prevColumnWidth=e.columnWidth,o.prevIsScrolling=!0===e.isScrolling,o.prevRowCount=e.rowCount,o.prevRowHeight=e.rowHeight,o.prevScrollToColumn=e.scrollToColumn,o.prevScrollToRow=e.scrollToRow,o.scrollbarSize=e.getScrollbarSize(),void 0===o.scrollbarSize?(o.scrollbarSizeMeasured=!1,o.scrollbarSize=0):o.scrollbarSizeMeasured=!0,i.instanceProps=o,N({},i,{},s,{},n)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"==typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"==typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var t=e.prevState,r=e.scrollLeft,i=e.scrollTop,s={scrollPositionChangeReason:P};return"number"==typeof r&&r>=0&&(s.scrollDirectionHorizontal=r>t.scrollLeft?1:-1,s.scrollLeft=r),"number"==typeof i&&i>=0&&(s.scrollDirectionVertical=i>t.scrollTop?1:-1,s.scrollTop=i),"number"==typeof r&&r>=0&&r!==t.scrollLeft||"number"==typeof i&&i>=0&&i!==t.scrollTop?s:{}}},{key:"_wrapSizeGetter",value:function(e){return"function"==typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(e,t){var r=e.columnCount,i=e.height,s=e.scrollToAlignment,n=e.scrollToColumn,o=e.width,a=t.scrollLeft,l=t.instanceProps;if(r>0){var u=r-1,d=n<0?u:Math.min(u,n),c=l.rowSizeAndPositionManager.getTotalSize(),h=l.scrollbarSizeMeasured&&c>i?l.scrollbarSize:0;return l.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:s,containerSize:o-h,currentOffset:a,targetIndex:d})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(e,r){var i=r.scrollLeft,s=t._getCalculatedScrollLeft(e,r);return"number"==typeof s&&s>=0&&i!==s?t._getScrollToPositionStateUpdate({prevState:r,scrollLeft:s,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(e,t){var r=e.height,i=e.rowCount,s=e.scrollToAlignment,n=e.scrollToRow,o=e.width,a=t.scrollTop,l=t.instanceProps;if(i>0){var u=i-1,d=n<0?u:Math.min(u,n),c=l.columnSizeAndPositionManager.getTotalSize(),h=l.scrollbarSizeMeasured&&c>o?l.scrollbarSize:0;return l.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:s,containerSize:r-h,currentOffset:a,targetIndex:d})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(e,r){var i=r.scrollTop,s=t._getCalculatedScrollTop(e,r);return"number"==typeof s&&s>=0&&i!==s?t._getScrollToPositionStateUpdate({prevState:r,scrollLeft:-1,scrollTop:s}):{}}}]),t}(d.PureComponent),(0,u.Z)(S,"propTypes",null),T);(0,u.Z)(x,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(e){for(var t=e.cellCache,r=e.cellRenderer,i=e.columnSizeAndPositionManager,s=e.columnStartIndex,n=e.columnStopIndex,o=e.deferredMeasurementCache,a=e.horizontalOffsetAdjustment,l=e.isScrolling,u=e.isScrollingOptOut,d=e.parent,c=e.rowSizeAndPositionManager,h=e.rowStartIndex,p=e.rowStopIndex,g=e.styleCache,m=e.verticalOffsetAdjustment,_=e.visibleColumnIndices,f=e.visibleRowIndices,y=[],b=i.areOffsetsAdjusted()||c.areOffsetsAdjusted(),C=!l&&!b,E=h;E<=p;E++)for(var S=c.getSizeAndPositionOfCell(E),T=s;T<=n;T++){var I=i.getSizeAndPositionOfCell(T),v=T>=_.start&&T<=_.stop&&E>=f.start&&E<=f.stop,R="".concat(E,"-").concat(T),w=void 0;C&&g[R]?w=g[R]:o&&!o.has(E,T)?w={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(w={height:S.size,left:I.offset+a,position:"absolute",top:S.offset+m,width:I.size},g[R]=w);var A={columnIndex:T,isScrolling:l,isVisible:v,key:R,parent:d,rowIndex:E,style:w},D=void 0;!u&&!l||a||m?D=r(A):(t[R]||(t[R]=r(A)),D=t[R]),null!=D&&!1!==D&&y.push(D)}return y},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:I.Z,noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(e){var t=e.cellCount,r=e.overscanCellsCount,i=e.scrollDirection,s=e.startIndex,n=e.stopIndex;return 1===i?{overscanStartIndex:Math.max(0,s),overscanStopIndex:Math.min(t-1,n+r)}:{overscanStartIndex:Math.max(0,s-r),overscanStopIndex:Math.min(t-1,n)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),(0,c.polyfill)(x);const Z=x;function F(e){var t=e.cellCount,r=e.overscanCellsCount,i=e.scrollDirection,s=e.startIndex,n=e.stopIndex;return r=Math.max(1,r),1===i?{overscanStartIndex:Math.max(0,s-1),overscanStopIndex:Math.min(t-1,n+r)}:{overscanStartIndex:Math.max(0,s-r),overscanStopIndex:Math.min(t-1,n+1)}}var k,B;function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}var G=(B=k=function(e){function t(){var e,r;(0,i.Z)(this,t);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return r=(0,n.Z)(this,(e=(0,o.Z)(t)).call.apply(e,[this].concat(l))),(0,u.Z)((0,a.Z)(r),"state",{scrollToColumn:0,scrollToRow:0,instanceProps:{prevScrollToColumn:0,prevScrollToRow:0}}),(0,u.Z)((0,a.Z)(r),"_columnStartIndex",0),(0,u.Z)((0,a.Z)(r),"_columnStopIndex",0),(0,u.Z)((0,a.Z)(r),"_rowStartIndex",0),(0,u.Z)((0,a.Z)(r),"_rowStopIndex",0),(0,u.Z)((0,a.Z)(r),"_onKeyDown",(function(e){var t=r.props,i=t.columnCount,s=t.disabled,n=t.mode,o=t.rowCount;if(!s){var a=r._getScrollState(),l=a.scrollToColumn,u=a.scrollToRow,d=r._getScrollState(),c=d.scrollToColumn,h=d.scrollToRow;switch(e.key){case"ArrowDown":h="cells"===n?Math.min(h+1,o-1):Math.min(r._rowStopIndex+1,o-1);break;case"ArrowLeft":c="cells"===n?Math.max(c-1,0):Math.max(r._columnStartIndex-1,0);break;case"ArrowRight":c="cells"===n?Math.min(c+1,i-1):Math.min(r._columnStopIndex+1,i-1);break;case"ArrowUp":h="cells"===n?Math.max(h-1,0):Math.max(r._rowStartIndex-1,0)}c===l&&h===u||(e.preventDefault(),r._updateScrollState({scrollToColumn:c,scrollToRow:h}))}})),(0,u.Z)((0,a.Z)(r),"_onSectionRendered",(function(e){var t=e.columnStartIndex,i=e.columnStopIndex,s=e.rowStartIndex,n=e.rowStopIndex;r._columnStartIndex=t,r._columnStopIndex=i,r._rowStartIndex=s,r._rowStopIndex=n})),r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"setScrollIndexes",value:function(e){var t=e.scrollToColumn,r=e.scrollToRow;this.setState({scrollToRow:r,scrollToColumn:t})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.children,i=this._getScrollState(),s=i.scrollToColumn,n=i.scrollToRow;return d.createElement("div",{className:t,onKeyDown:this._onKeyDown},r({onSectionRendered:this._onSectionRendered,scrollToColumn:s,scrollToRow:n}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(e){var t=e.scrollToColumn,r=e.scrollToRow,i=this.props,s=i.isControlled,n=i.onScrollToChange;"function"==typeof n&&n({scrollToColumn:t,scrollToRow:r}),s||this.setState({scrollToColumn:t,scrollToRow:r})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.isControlled?{}:e.scrollToColumn!==t.instanceProps.prevScrollToColumn||e.scrollToRow!==t.instanceProps.prevScrollToRow?function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(r,!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{scrollToColumn:e.scrollToColumn,scrollToRow:e.scrollToRow,instanceProps:{prevScrollToColumn:e.scrollToColumn,prevScrollToRow:e.scrollToRow}}):{}}}]),t}(d.PureComponent),(0,u.Z)(k,"propTypes",null),B);(0,u.Z)(G,"defaultProps",{disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0}),(0,c.polyfill)(G);function U(e,t){var i,s=void 0!==(i=void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:r.g).document&&i.document.attachEvent;if(!s){var n=function(){var e=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||function(e){return i.setTimeout(e,20)};return function(t){return e(t)}}(),o=function(){var e=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||i.clearTimeout;return function(t){return e(t)}}(),a=function(e){var t=e.__resizeTriggers__,r=t.firstElementChild,i=t.lastElementChild,s=r.firstElementChild;i.scrollLeft=i.scrollWidth,i.scrollTop=i.scrollHeight,s.style.width=r.offsetWidth+1+"px",s.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},l=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;a(this),this.__resizeRAF__&&o(this.__resizeRAF__),this.__resizeRAF__=n((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(r){r.call(t,e)})))}))}},u=!1,d="",c="animationstart",h="Webkit Moz O ms".split(" "),p="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g=i.document.createElement("fakeelement");if(void 0!==g.style.animationName&&(u=!0),!1===u)for(var m=0;m<h.length;m++)if(void 0!==g.style[h[m]+"AnimationName"]){d="-"+h[m].toLowerCase()+"-",c=p[m],u=!0;break}var _="resizeanim",f="@"+d+"keyframes "+_+" { from { opacity: 0; } to { opacity: 0; } } ",y=d+"animation: 1ms "+_+"; "}return{addResizeListener:function(t,r){if(s)t.attachEvent("onresize",r);else{if(!t.__resizeTriggers__){var n=t.ownerDocument,o=i.getComputedStyle(t);o&&"static"==o.position&&(t.style.position="relative"),function(t){if(!t.getElementById("detectElementResize")){var r=(f||"")+".resize-triggers { "+(y||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=t.head||t.getElementsByTagName("head")[0],s=t.createElement("style");s.id="detectElementResize",s.type="text/css",null!=e&&s.setAttribute("nonce",e),s.styleSheet?s.styleSheet.cssText=r:s.appendChild(t.createTextNode(r)),i.appendChild(s)}}(n),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=n.createElement("div")).className="resize-triggers";var u='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>';if(window.trustedTypes){var d=trustedTypes.createPolicy("react-virtualized-auto-sizer",{createHTML:function(){return u}});t.__resizeTriggers__.innerHTML=d.createHTML("")}else t.__resizeTriggers__.innerHTML=u;t.appendChild(t.__resizeTriggers__),a(t),t.addEventListener("scroll",l,!0),c&&(t.__resizeTriggers__.__animationListener__=function(e){e.animationName==_&&a(t)},t.__resizeTriggers__.addEventListener(c,t.__resizeTriggers__.__animationListener__))}t.__resizeListeners__.push(r)}},removeResizeListener:function(e,t){if(s)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(c,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}var H,V;function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(r,!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var z=(V=H=function(e){function t(){var e,r;(0,i.Z)(this,t);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return r=(0,n.Z)(this,(e=(0,o.Z)(t)).call.apply(e,[this].concat(l))),(0,u.Z)((0,a.Z)(r),"state",{height:r.props.defaultHeight||0,width:r.props.defaultWidth||0}),(0,u.Z)((0,a.Z)(r),"_parentNode",void 0),(0,u.Z)((0,a.Z)(r),"_autoSizer",void 0),(0,u.Z)((0,a.Z)(r),"_window",void 0),(0,u.Z)((0,a.Z)(r),"_detectElementResize",void 0),(0,u.Z)((0,a.Z)(r),"_onResize",(function(){var e=r.props,t=e.disableHeight,i=e.disableWidth,s=e.onResize;if(r._parentNode){var n=r._parentNode.offsetHeight||0,o=r._parentNode.offsetWidth||0,a=(r._window||window).getComputedStyle(r._parentNode)||{},l=parseInt(a.paddingLeft,10)||0,u=parseInt(a.paddingRight,10)||0,d=parseInt(a.paddingTop,10)||0,c=parseInt(a.paddingBottom,10)||0,h=n-d-c,p=o-l-u;(!t&&r.state.height!==h||!i&&r.state.width!==p)&&(r.setState({height:n-d-c,width:o-l-u}),s({height:n,width:o}))}})),(0,u.Z)((0,a.Z)(r),"_setRef",(function(e){r._autoSizer=e})),r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._window=this._autoSizer.parentNode.ownerDocument.defaultView,this._detectElementResize=U(e,this._window),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,i=e.disableHeight,s=e.disableWidth,n=e.style,o=this.state,a=o.height,l=o.width,u={overflow:"visible"},c={};return i||(u.height=0,c.height=a),s||(u.width=0,c.width=l),d.createElement("div",{className:r,ref:this._setRef,style:q({},u,{},n)},t(c))}}]),t}(d.Component),(0,u.Z)(H,"propTypes",null),V);(0,u.Z)(z,"defaultProps",{onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}});var $,Q,Y=r(73935),K=(Q=$=function(e){function t(){var e,r;(0,i.Z)(this,t);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return r=(0,n.Z)(this,(e=(0,o.Z)(t)).call.apply(e,[this].concat(l))),(0,u.Z)((0,a.Z)(r),"_child",void 0),(0,u.Z)((0,a.Z)(r),"_measure",(function(){var e=r.props,t=e.cache,i=e.columnIndex,s=void 0===i?0:i,n=e.parent,o=e.rowIndex,a=void 0===o?r.props.index||0:o,l=r._getCellMeasurements(),u=l.height,d=l.width;u===t.getHeight(a,s)&&d===t.getWidth(a,s)||(t.set(a,s,d,u),n&&"function"==typeof n.recomputeGridSize&&n.recomputeGridSize({columnIndex:s,rowIndex:a}))})),(0,u.Z)((0,a.Z)(r),"_registerChild",(function(e){!e||e instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),r._child=e,e&&r._maybeMeasureCell()})),r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e({measure:this._measure,registerChild:this._registerChild}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=this._child||(0,Y.findDOMNode)(this);if(t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){var r=t.style.width,i=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var s=Math.ceil(t.offsetHeight),n=Math.ceil(t.offsetWidth);return r&&(t.style.width=r),i&&(t.style.height=i),{height:s,width:n}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,r=e.columnIndex,i=void 0===r?0:r,s=e.parent,n=e.rowIndex,o=void 0===n?this.props.index||0:n;if(!t.has(o,i)){var a=this._getCellMeasurements(),l=a.height,u=a.width;t.set(o,i,u,l),s&&"function"==typeof s.invalidateCellSizeAfterRender&&s.invalidateCellSizeAfterRender({columnIndex:i,rowIndex:o})}}}]),t}(d.PureComponent),(0,u.Z)($,"propTypes",null),Q);(0,u.Z)(K,"__internalCellMeasurerFlag",!1);function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(r,!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee="observed",te="requested",re=function(e){function t(){var e,r;(0,i.Z)(this,t);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return r=(0,n.Z)(this,(e=(0,o.Z)(t)).call.apply(e,[this].concat(l))),(0,u.Z)((0,a.Z)(r),"state",{isScrolling:!1,scrollLeft:0,scrollTop:0}),(0,u.Z)((0,a.Z)(r),"_calculateSizeAndPositionDataOnNextUpdate",!1),(0,u.Z)((0,a.Z)(r),"_onSectionRenderedMemoizer",b()),(0,u.Z)((0,a.Z)(r),"_onScrollMemoizer",b(!1)),(0,u.Z)((0,a.Z)(r),"_invokeOnSectionRenderedHelper",(function(){var e=r.props,t=e.cellLayoutManager,i=e.onSectionRendered;r._onSectionRenderedMemoizer({callback:i,indices:{indices:t.getLastRenderedIndices()}})})),(0,u.Z)((0,a.Z)(r),"_setScrollingContainerRef",(function(e){r._scrollingContainer=e})),(0,u.Z)((0,a.Z)(r),"_updateScrollPositionForScrollToCell",(function(){var e=r.props,t=e.cellLayoutManager,i=e.height,s=e.scrollToAlignment,n=e.scrollToCell,o=e.width,a=r.state,l=a.scrollLeft,u=a.scrollTop;if(n>=0){var d=t.getScrollPositionForCell({align:s,cellIndex:n,height:i,scrollLeft:l,scrollTop:u,width:o});d.scrollLeft===l&&d.scrollTop===u||r._setScrollPosition(d)}})),(0,u.Z)((0,a.Z)(r),"_onScroll",(function(e){if(e.target===r._scrollingContainer){r._enablePointerEventsAfterDelay();var t=r.props,i=t.cellLayoutManager,s=t.height,n=t.isScrollingChange,o=t.width,a=r._scrollbarSize,l=i.getTotalSize(),u=l.height,d=l.width,c=Math.max(0,Math.min(d-o+a,e.target.scrollLeft)),h=Math.max(0,Math.min(u-s+a,e.target.scrollTop));if(r.state.scrollLeft!==c||r.state.scrollTop!==h){var p=e.cancelable?ee:te;r.state.isScrolling||n(!0),r.setState({isScrolling:!0,scrollLeft:c,scrollPositionChangeReason:p,scrollTop:h})}r._invokeOnScrollMemoizer({scrollLeft:c,scrollTop:h,totalWidth:d,totalHeight:u})}})),r._scrollbarSize=(0,I.Z)(),void 0===r._scrollbarSize?(r._scrollbarSizeMeasured=!1,r._scrollbarSize=0):r._scrollbarSizeMeasured=!0,r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.cellLayoutManager,r=e.scrollLeft,i=e.scrollToCell,s=e.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=(0,I.Z)(),this._scrollbarSizeMeasured=!0,this.setState({})),i>=0?this._updateScrollPositionForScrollToCell():(r>=0||s>=0)&&this._setScrollPosition({scrollLeft:r,scrollTop:s}),this._invokeOnSectionRenderedHelper();var n=t.getTotalSize(),o=n.height,a=n.width;this._invokeOnScrollMemoizer({scrollLeft:r||0,scrollTop:s||0,totalHeight:o,totalWidth:a})}},{key:"componentDidUpdate",value:function(e,t){var r=this.props,i=r.height,s=r.scrollToAlignment,n=r.scrollToCell,o=r.width,a=this.state,l=a.scrollLeft,u=a.scrollPositionChangeReason,d=a.scrollTop;u===te&&(l>=0&&l!==t.scrollLeft&&l!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=l),d>=0&&d!==t.scrollTop&&d!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=d)),i===e.height&&s===e.scrollToAlignment&&n===e.scrollToCell&&o===e.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var e=this.props,t=e.autoHeight,r=e.cellCount,i=e.cellLayoutManager,s=e.className,n=e.height,o=e.horizontalOverscanSize,a=e.id,l=e.noContentRenderer,u=e.style,c=e.verticalOverscanSize,h=e.width,g=this.state,m=g.isScrolling,_=g.scrollLeft,f=g.scrollTop;(this._lastRenderedCellCount!==r||this._lastRenderedCellLayoutManager!==i||this._calculateSizeAndPositionDataOnNextUpdate)&&(this._lastRenderedCellCount=r,this._lastRenderedCellLayoutManager=i,this._calculateSizeAndPositionDataOnNextUpdate=!1,i.calculateSizeAndPositionData());var y=i.getTotalSize(),b=y.height,C=y.width,E=Math.max(0,_-o),S=Math.max(0,f-c),T=Math.min(C,_+h+o),I=Math.min(b,f+n+c),v=n>0&&h>0?i.cellRenderers({height:I-S,isScrolling:m,width:T-E,x:E,y:S}):[],R={boxSizing:"border-box",direction:"ltr",height:t?"auto":n,position:"relative",WebkitOverflowScrolling:"touch",width:h,willChange:"transform"},w=b>n?this._scrollbarSize:0,A=C>h?this._scrollbarSize:0;return R.overflowX=C+w<=h?"hidden":"auto",R.overflowY=b+A<=n?"hidden":"auto",d.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:(0,p.Z)("ReactVirtualized__Collection",s),id:a,onScroll:this._onScroll,role:"grid",style:X({},R,{},u),tabIndex:0},r>0&&d.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:b,maxHeight:b,maxWidth:C,overflow:"hidden",pointerEvents:m?"none":"",width:C}},v),0===r&&l())}},{key:"_enablePointerEventsAfterDelay",value:function(){var e=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout((function(){(0,e.props.isScrollingChange)(!1),e._disablePointerEventsTimeoutId=null,e.setState({isScrolling:!1})}),150)}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,r=e.scrollLeft,i=e.scrollTop,s=e.totalHeight,n=e.totalWidth;this._onScrollMemoizer({callback:function(e){var r=e.scrollLeft,i=e.scrollTop,o=t.props,a=o.height;(0,o.onScroll)({clientHeight:a,clientWidth:o.width,scrollHeight:s,scrollLeft:r,scrollTop:i,scrollWidth:n})},indices:{scrollLeft:r,scrollTop:i}})}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,r=e.scrollTop,i={scrollPositionChangeReason:te};t>=0&&(i.scrollLeft=t),r>=0&&(i.scrollTop=r),(t>=0&&t!==this.state.scrollLeft||r>=0&&r!==this.state.scrollTop)&&this.setState(i)}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 0!==e.cellCount||0===t.scrollLeft&&0===t.scrollTop?e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop?e.scrollTop:t.scrollTop,scrollPositionChangeReason:te}:null:{scrollLeft:0,scrollTop:0,scrollPositionChangeReason:te}}}]),t}(d.PureComponent);(0,u.Z)(re,"defaultProps",{"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0}),re.propTypes={},(0,c.polyfill)(re);const ie=re;var se=function(){function e(t){var r=t.height,s=t.width,n=t.x,o=t.y;(0,i.Z)(this,e),this.height=r,this.width=s,this.x=n,this.y=o,this._indexMap={},this._indices=[]}return(0,s.Z)(e,[{key:"addCellIndex",value:function(e){var t=e.index;this._indexMap[t]||(this._indexMap[t]=!0,this._indices.push(t))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y," ").concat(this.width,"x").concat(this.height)}}]),e}(),ne=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;(0,i.Z)(this,e),this._sectionSize=t,this._cellMetadata=[],this._sections={}}return(0,s.Z)(e,[{key:"getCellIndices",value:function(e){var t=e.height,r=e.width,i=e.x,s=e.y,n={};return this.getSections({height:t,width:r,x:i,y:s}).forEach((function(e){return e.getCellIndices().forEach((function(e){n[e]=e}))})),Object.keys(n).map((function(e){return n[e]}))}},{key:"getCellMetadata",value:function(e){var t=e.index;return this._cellMetadata[t]}},{key:"getSections",value:function(e){for(var t=e.height,r=e.width,i=e.x,s=e.y,n=Math.floor(i/this._sectionSize),o=Math.floor((i+r-1)/this._sectionSize),a=Math.floor(s/this._sectionSize),l=Math.floor((s+t-1)/this._sectionSize),u=[],d=n;d<=o;d++)for(var c=a;c<=l;c++){var h="".concat(d,".").concat(c);this._sections[h]||(this._sections[h]=new se({height:this._sectionSize,width:this._sectionSize,x:d*this._sectionSize,y:c*this._sectionSize})),u.push(this._sections[h])}return u}},{key:"getTotalSectionCount",value:function(){return Object.keys(this._sections).length}},{key:"toString",value:function(){var e=this;return Object.keys(this._sections).map((function(t){return e._sections[t].toString()}))}},{key:"registerCell",value:function(e){var t=e.cellMetadatum,r=e.index;this._cellMetadata[r]=t,this.getSections(t).forEach((function(e){return e.addCellIndex({index:r})}))}}]),e}();function oe(e){var t=e.align,r=void 0===t?"auto":t,i=e.cellOffset,s=e.cellSize,n=e.containerSize,o=e.currentOffset,a=i,l=a-n+s;switch(r){case"start":return a;case"end":return l;case"center":return a-(n-s)/2;default:return Math.max(l,Math.min(a,o))}}var ae=function(e){function t(e,r){var s;return(0,i.Z)(this,t),(s=(0,n.Z)(this,(0,o.Z)(t).call(this,e,r)))._cellMetadata=[],s._lastRenderedCellIndices=[],s._cellCache=[],s._isScrollingChange=s._isScrollingChange.bind((0,a.Z)(s)),s._setCollectionViewRef=s._setCollectionViewRef.bind((0,a.Z)(s)),s}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"forceUpdate",value:function(){void 0!==this._collectionView&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var e=(0,h.Z)({},this.props);return d.createElement(ie,(0,h.Z)({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},e))}},{key:"calculateSizeAndPositionData",value:function(){var e=this.props,t=function(e){for(var t=e.cellCount,r=e.cellSizeAndPositionGetter,i=e.sectionSize,s=[],n=new ne(i),o=0,a=0,l=0;l<t;l++){var u=r({index:l});if(null==u.height||isNaN(u.height)||null==u.width||isNaN(u.width)||null==u.x||isNaN(u.x)||null==u.y||isNaN(u.y))throw Error("Invalid metadata returned for cell ".concat(l,":\n        x:").concat(u.x,", y:").concat(u.y,", width:").concat(u.width,", height:").concat(u.height));o=Math.max(o,u.y+u.height),a=Math.max(a,u.x+u.width),s[l]=u,n.registerCell({cellMetadatum:u,index:l})}return{cellMetadata:s,height:o,sectionManager:n,width:a}}({cellCount:e.cellCount,cellSizeAndPositionGetter:e.cellSizeAndPositionGetter,sectionSize:e.sectionSize});this._cellMetadata=t.cellMetadata,this._sectionManager=t.sectionManager,this._height=t.height,this._width=t.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(e){var t=e.align,r=e.cellIndex,i=e.height,s=e.scrollLeft,n=e.scrollTop,o=e.width,a=this.props.cellCount;if(r>=0&&r<a){var l=this._cellMetadata[r];s=oe({align:t,cellOffset:l.x,cellSize:l.width,containerSize:o,currentOffset:s,targetIndex:r}),n=oe({align:t,cellOffset:l.y,cellSize:l.height,containerSize:i,currentOffset:n,targetIndex:r})}return{scrollLeft:s,scrollTop:n}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(e){var t=this,r=e.height,i=e.isScrolling,s=e.width,n=e.x,o=e.y,a=this.props,l=a.cellGroupRenderer,u=a.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:r,width:s,x:n,y:o}),l({cellCache:this._cellCache,cellRenderer:u,cellSizeAndPositionGetter:function(e){var r=e.index;return t._sectionManager.getCellMetadata({index:r})},indices:this._lastRenderedCellIndices,isScrolling:i})}},{key:"_isScrollingChange",value:function(e){e||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(e){this._collectionView=e}}]),t}(d.PureComponent);(0,u.Z)(ae,"defaultProps",{"aria-label":"grid",cellGroupRenderer:function(e){var t=e.cellCache,r=e.cellRenderer,i=e.cellSizeAndPositionGetter,s=e.indices,n=e.isScrolling;return s.map((function(e){var s=i({index:e}),o={index:e,isScrolling:n,key:e,style:{height:s.height,left:s.x,position:"absolute",top:s.y,width:s.width}};return n?(e in t||(t[e]=r(o)),t[e]):r(o)})).filter((function(e){return!!e}))}}),ae.propTypes={};(function(e){function t(e,r){var s;return(0,i.Z)(this,t),(s=(0,n.Z)(this,(0,o.Z)(t).call(this,e,r)))._registerChild=s._registerChild.bind((0,a.Z)(s)),s}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.columnMaxWidth,i=t.columnMinWidth,s=t.columnCount,n=t.width;r===e.columnMaxWidth&&i===e.columnMinWidth&&s===e.columnCount&&n===e.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.columnMaxWidth,i=e.columnMinWidth,s=e.columnCount,n=e.width,o=i||1,a=r?Math.min(r,n):n,l=n/s;return l=Math.max(o,l),l=Math.min(a,l),l=Math.floor(l),t({adjustedWidth:Math.min(n,l*s),columnWidth:l,getColumnWidth:function(){return l},registerChild:this._registerChild})}},{key:"_registerChild",value:function(e){if(e&&"function"!=typeof e.recomputeGridSize)throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=e,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),t}(d.PureComponent)).propTypes={};var le=r(42982),ue=function(e){function t(e,r){var s;return(0,i.Z)(this,t),(s=(0,n.Z)(this,(0,o.Z)(t).call(this,e,r)))._loadMoreRowsMemoizer=b(),s._onRowsRendered=s._onRowsRendered.bind((0,a.Z)(s)),s._registerChild=s._registerChild.bind((0,a.Z)(s)),s}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"resetLoadMoreRowsCache",value:function(e){this._loadMoreRowsMemoizer=b(),e&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(e){var t=this,r=this.props.loadMoreRows;e.forEach((function(e){var i=r(e);i&&i.then((function(){var r,i,s,n,o;r={lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:e.startIndex,stopIndex:e.stopIndex},i=r.lastRenderedStartIndex,s=r.lastRenderedStopIndex,n=r.startIndex,o=r.stopIndex,n>s||o<i||t._registeredChild&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r="function"==typeof e.recomputeGridSize?e.recomputeGridSize:e.recomputeRowHeights;r?r.call(e,t):e.forceUpdate()}(t._registeredChild,t._lastRenderedStartIndex)}))}))}},{key:"_onRowsRendered",value:function(e){var t=e.startIndex,r=e.stopIndex;this._lastRenderedStartIndex=t,this._lastRenderedStopIndex=r,this._doStuff(t,r)}},{key:"_doStuff",value:function(e,t){var r,i=this,s=this.props,n=s.isRowLoaded,o=s.minimumBatchSize,a=s.rowCount,l=s.threshold,u=function(e){for(var t=e.isRowLoaded,r=e.minimumBatchSize,i=e.rowCount,s=e.startIndex,n=e.stopIndex,o=[],a=null,l=null,u=s;u<=n;u++){t({index:u})?null!==l&&(o.push({startIndex:a,stopIndex:l}),a=l=null):(l=u,null===a&&(a=u))}if(null!==l){for(var d=Math.min(Math.max(l,a+r-1),i-1),c=l+1;c<=d&&!t({index:c});c++)l=c;o.push({startIndex:a,stopIndex:l})}if(o.length)for(var h=o[0];h.stopIndex-h.startIndex+1<r&&h.startIndex>0;){var p=h.startIndex-1;if(t({index:p}))break;h.startIndex=p}return o}({isRowLoaded:n,minimumBatchSize:o,rowCount:a,startIndex:Math.max(0,e-l),stopIndex:Math.min(a-1,t+l)}),d=(r=[]).concat.apply(r,(0,le.Z)(u.map((function(e){return[e.startIndex,e.stopIndex]}))));this._loadMoreRowsMemoizer({callback:function(){i._loadUnloadedRanges(u)},indices:{squashedUnloadedRanges:d}})}},{key:"_registerChild",value:function(e){this._registeredChild=e}}]),t}(d.PureComponent);(0,u.Z)(ue,"defaultProps",{minimumBatchSize:10,rowCount:0,threshold:15}),ue.propTypes={};var de,ce,he=(ce=de=function(e){function t(){var e,r;(0,i.Z)(this,t);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return r=(0,n.Z)(this,(e=(0,o.Z)(t)).call.apply(e,[this].concat(l))),(0,u.Z)((0,a.Z)(r),"Grid",void 0),(0,u.Z)((0,a.Z)(r),"_cellRenderer",(function(e){var t=e.parent,i=e.rowIndex,s=e.style,n=e.isScrolling,o=e.isVisible,a=e.key,l=r.props.rowRenderer,u=Object.getOwnPropertyDescriptor(s,"width");return u&&u.writable&&(s.width="100%"),l({index:i,style:s,isScrolling:n,isVisible:o,key:a,parent:t})})),(0,u.Z)((0,a.Z)(r),"_setRef",(function(e){r.Grid=e})),(0,u.Z)((0,a.Z)(r),"_onScroll",(function(e){var t=e.clientHeight,i=e.scrollHeight,s=e.scrollTop;(0,r.props.onScroll)({clientHeight:t,scrollHeight:i,scrollTop:s})})),(0,u.Z)((0,a.Z)(r),"_onSectionRendered",(function(e){var t=e.rowOverscanStartIndex,i=e.rowOverscanStopIndex,s=e.rowStartIndex,n=e.rowStopIndex;(0,r.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:i,startIndex:s,stopIndex:n})})),r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,r=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:r,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,r=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:r,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,i=e.rowIndex,s=void 0===i?0:i;this.Grid&&this.Grid.recomputeGridSize({rowIndex:s,columnIndex:r})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.noRowsRenderer,i=e.scrollToIndex,s=e.width,n=(0,p.Z)("ReactVirtualized__List",t);return d.createElement(Z,(0,h.Z)({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:n,columnWidth:s,columnCount:1,noContentRenderer:r,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:i}))}}]),t}(d.PureComponent),(0,u.Z)(de,"propTypes",null),ce);(0,u.Z)(he,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:F,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var pe=r(70885);const ge={ge:function(e,t,r,i,s){return"function"==typeof r?function(e,t,r,i,s){for(var n=r+1;t<=r;){var o=t+r>>>1;s(e[o],i)>=0?(n=o,r=o-1):t=o+1}return n}(e,void 0===i?0:0|i,void 0===s?e.length-1:0|s,t,r):function(e,t,r,i){for(var s=r+1;t<=r;){var n=t+r>>>1;e[n]>=i?(s=n,r=n-1):t=n+1}return s}(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t)},gt:function(e,t,r,i,s){return"function"==typeof r?function(e,t,r,i,s){for(var n=r+1;t<=r;){var o=t+r>>>1;s(e[o],i)>0?(n=o,r=o-1):t=o+1}return n}(e,void 0===i?0:0|i,void 0===s?e.length-1:0|s,t,r):function(e,t,r,i){for(var s=r+1;t<=r;){var n=t+r>>>1;e[n]>i?(s=n,r=n-1):t=n+1}return s}(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t)},lt:function(e,t,r,i,s){return"function"==typeof r?function(e,t,r,i,s){for(var n=t-1;t<=r;){var o=t+r>>>1;s(e[o],i)<0?(n=o,t=o+1):r=o-1}return n}(e,void 0===i?0:0|i,void 0===s?e.length-1:0|s,t,r):function(e,t,r,i){for(var s=t-1;t<=r;){var n=t+r>>>1;e[n]<i?(s=n,t=n+1):r=n-1}return s}(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t)},le:function(e,t,r,i,s){return"function"==typeof r?function(e,t,r,i,s){for(var n=t-1;t<=r;){var o=t+r>>>1;s(e[o],i)<=0?(n=o,t=o+1):r=o-1}return n}(e,void 0===i?0:0|i,void 0===s?e.length-1:0|s,t,r):function(e,t,r,i){for(var s=t-1;t<=r;){var n=t+r>>>1;e[n]<=i?(s=n,t=n+1):r=n-1}return s}(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t)},eq:function(e,t,r,i,s){return"function"==typeof r?function(e,t,r,i,s){for(;t<=r;){var n=t+r>>>1,o=s(e[n],i);if(0===o)return n;o<=0?t=n+1:r=n-1}return-1}(e,void 0===i?0:0|i,void 0===s?e.length-1:0|s,t,r):function(e,t,r,i){for(;t<=r;){var s=t+r>>>1,n=e[s];if(n===i)return s;n<=i?t=s+1:r=s-1}return-1}(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t)}};function me(e,t,r,i,s){this.mid=e,this.left=t,this.right=r,this.leftPoints=i,this.rightPoints=s,this.count=(t?t.count:0)+(r?r.count:0)+i.length}var _e=me.prototype;function fe(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function ye(e,t){var r=we(t);e.mid=r.mid,e.left=r.left,e.right=r.right,e.leftPoints=r.leftPoints,e.rightPoints=r.rightPoints,e.count=r.count}function be(e,t){var r=e.intervals([]);r.push(t),ye(e,r)}function Ce(e,t){var r=e.intervals([]),i=r.indexOf(t);return i<0?0:(r.splice(i,1),ye(e,r),1)}function Ee(e,t,r){for(var i=0;i<e.length&&e[i][0]<=t;++i){var s=r(e[i]);if(s)return s}}function Se(e,t,r){for(var i=e.length-1;i>=0&&e[i][1]>=t;--i){var s=r(e[i]);if(s)return s}}function Te(e,t){for(var r=0;r<e.length;++r){var i=t(e[r]);if(i)return i}}function Ie(e,t){return e-t}function ve(e,t){var r=e[0]-t[0];return r||e[1]-t[1]}function Re(e,t){var r=e[1]-t[1];return r||e[0]-t[0]}function we(e){if(0===e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e[r][0],e[r][1]);t.sort(Ie);var i=t[t.length>>1],s=[],n=[],o=[];for(r=0;r<e.length;++r){var a=e[r];a[1]<i?s.push(a):i<a[0]?n.push(a):o.push(a)}var l=o,u=o.slice();return l.sort(ve),u.sort(Re),new me(i,we(s),we(n),l,u)}function Ae(e){this.root=e}_e.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},_e.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?be(this,e):this.left.insert(e):this.left=we([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?be(this,e):this.right.insert(e):this.right=we([e]);else{var r=ge.ge(this.leftPoints,e,ve),i=ge.ge(this.rightPoints,e,Re);this.leftPoints.splice(r,0,e),this.rightPoints.splice(i,0,e)}},_e.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(t-1)?Ce(this,e):2===(n=this.left.remove(e))?(this.left=null,this.count-=1,1):(1===n&&(this.count-=1),n):0;if(e[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(t-1)?Ce(this,e):2===(n=this.right.remove(e))?(this.right=null,this.count-=1,1):(1===n&&(this.count-=1),n):0;if(1===this.count)return this.leftPoints[0]===e?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var r=this,i=this.left;i.right;)r=i,i=i.right;if(r===this)i.right=this.right;else{var s=this.left,n=this.right;r.count-=i.count,r.right=i.left,i.left=s,i.right=n}fe(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?fe(this,this.left):fe(this,this.right);return 1}for(s=ge.ge(this.leftPoints,e,ve);s<this.leftPoints.length&&this.leftPoints[s][0]===e[0];++s)if(this.leftPoints[s]===e){this.count-=1,this.leftPoints.splice(s,1);for(n=ge.ge(this.rightPoints,e,Re);n<this.rightPoints.length&&this.rightPoints[n][1]===e[1];++n)if(this.rightPoints[n]===e)return this.rightPoints.splice(n,1),1}return 0},_e.queryPoint=function(e,t){if(e<this.mid){if(this.left)if(r=this.left.queryPoint(e,t))return r;return Ee(this.leftPoints,e,t)}if(e>this.mid){var r;if(this.right)if(r=this.right.queryPoint(e,t))return r;return Se(this.rightPoints,e,t)}return Te(this.leftPoints,t)},_e.queryInterval=function(e,t,r){var i;if(e<this.mid&&this.left&&(i=this.left.queryInterval(e,t,r)))return i;if(t>this.mid&&this.right&&(i=this.right.queryInterval(e,t,r)))return i;return t<this.mid?Ee(this.leftPoints,t,r):e>this.mid?Se(this.rightPoints,e,r):Te(this.leftPoints,r)};var De=Ae.prototype;De.insert=function(e){this.root?this.root.insert(e):this.root=new me(e[0],null,null,[e],[e])},De.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),0!==t}return!1},De.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},De.queryInterval=function(e,t,r){if(e<=t&&this.root)return this.root.queryInterval(e,t,r)},Object.defineProperty(De,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(De,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var Le,Me,Ne=function(){function e(){var t;(0,i.Z)(this,e),(0,u.Z)(this,"_columnSizeMap",{}),(0,u.Z)(this,"_intervalTree",t&&0!==t.length?new Ae(we(t)):new Ae(null)),(0,u.Z)(this,"_leftMap",{})}return(0,s.Z)(e,[{key:"estimateTotalHeight",value:function(e,t,r){var i=e-this.count;return this.tallestColumnSize+Math.ceil(i/t)*r}},{key:"range",value:function(e,t,r){var i=this;this._intervalTree.queryInterval(e,e+t,(function(e){var t=(0,pe.Z)(e,3),s=t[0],n=(t[1],t[2]);return r(n,i._leftMap[n],s)}))}},{key:"setPosition",value:function(e,t,r,i){this._intervalTree.insert([r,r+i,e]),this._leftMap[e]=t;var s=this._columnSizeMap,n=s[t];s[t]=void 0===n?r+i:Math.max(n,r+i)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var r in e){var i=e[r];t=0===t?i:Math.min(t,i)}return t}},{key:"tallestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var r in e){var i=e[r];t=Math.max(t,i)}return t}}]),e}();function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(r,!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var xe=(Me=Le=function(e){function t(){var e,r;(0,i.Z)(this,t);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return r=(0,n.Z)(this,(e=(0,o.Z)(t)).call.apply(e,[this].concat(l))),(0,u.Z)((0,a.Z)(r),"state",{isScrolling:!1,scrollTop:0}),(0,u.Z)((0,a.Z)(r),"_debounceResetIsScrollingId",void 0),(0,u.Z)((0,a.Z)(r),"_invalidateOnUpdateStartIndex",null),(0,u.Z)((0,a.Z)(r),"_invalidateOnUpdateStopIndex",null),(0,u.Z)((0,a.Z)(r),"_positionCache",new Ne),(0,u.Z)((0,a.Z)(r),"_startIndex",null),(0,u.Z)((0,a.Z)(r),"_startIndexMemoized",null),(0,u.Z)((0,a.Z)(r),"_stopIndex",null),(0,u.Z)((0,a.Z)(r),"_stopIndexMemoized",null),(0,u.Z)((0,a.Z)(r),"_debounceResetIsScrollingCallback",(function(){r.setState({isScrolling:!1})})),(0,u.Z)((0,a.Z)(r),"_setScrollingContainerRef",(function(e){r._scrollingContainer=e})),(0,u.Z)((0,a.Z)(r),"_onScroll",(function(e){var t=r.props.height,i=e.currentTarget.scrollTop,s=Math.min(Math.max(0,r._getEstimatedTotalHeight()-t),i);i===s&&(r._debounceResetIsScrolling(),r.state.scrollTop!==s&&r.setState({isScrolling:!0,scrollTop:s}))})),r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"clearCellPositions",value:function(){this._positionCache=new Ne,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.rowIndex;null===this._invalidateOnUpdateStartIndex?(this._invalidateOnUpdateStartIndex=t,this._invalidateOnUpdateStopIndex=t):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,t),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,t))}},{key:"recomputeCellPositions",value:function(){var e=this._positionCache.count-1;this._positionCache=new Ne,this._populatePositionCache(0,e),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(e,t){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback(),this.props.scrollTop!==e.scrollTop&&this._debounceResetIsScrolling()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&D(this._debounceResetIsScrollingId)}},{key:"render",value:function(){var e,t=this,r=this.props,i=r.autoHeight,s=r.cellCount,n=r.cellMeasurerCache,o=r.cellRenderer,a=r.className,l=r.height,c=r.id,h=r.keyMapper,g=r.overscanByPixels,m=r.role,_=r.style,f=r.tabIndex,y=r.width,b=r.rowDirection,C=this.state,E=C.isScrolling,S=C.scrollTop,T=[],I=this._getEstimatedTotalHeight(),v=this._positionCache.shortestColumnSize,R=this._positionCache.count,w=0;if(this._positionCache.range(Math.max(0,S-g),l+2*g,(function(r,i,s){var a;void 0===e?(w=r,e=r):(w=Math.min(w,r),e=Math.max(e,r)),T.push(o({index:r,isScrolling:E,key:h(r),parent:t,style:(a={height:n.getHeight(r)},(0,u.Z)(a,"ltr"===b?"left":"right",i),(0,u.Z)(a,"position","absolute"),(0,u.Z)(a,"top",s),(0,u.Z)(a,"width",n.getWidth(r)),a)}))})),v<S+l+g&&R<s)for(var A=Math.min(s-R,Math.ceil((S+l+g-v)/n.defaultHeight*y/n.defaultWidth)),D=R;D<R+A;D++)e=D,T.push(o({index:D,isScrolling:E,key:h(D),parent:this,style:{width:n.getWidth(D)}}));return this._startIndex=w,this._stopIndex=e,d.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:(0,p.Z)("ReactVirtualized__Masonry",a),id:c,onScroll:this._onScroll,role:m,style:Pe({boxSizing:"border-box",direction:"ltr",height:i?"auto":l,overflowX:"hidden",overflowY:I<l?"hidden":"auto",position:"relative",width:y,WebkitOverflowScrolling:"touch",willChange:"transform"},_),tabIndex:f},d.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:I,maxWidth:"100%",maxHeight:I,overflow:"hidden",pointerEvents:E?"none":"",position:"relative"}},T))}},{key:"_checkInvalidateOnUpdate",value:function(){if("number"==typeof this._invalidateOnUpdateStartIndex){var e=this._invalidateOnUpdateStartIndex,t=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(e,t),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var e=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&D(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=L(this._debounceResetIsScrollingCallback,e)}},{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,r=e.cellMeasurerCache,i=e.width,s=Math.max(1,Math.floor(i/r.defaultWidth));return this._positionCache.estimateTotalHeight(t,s,r.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var e=this.props,t=e.height,r=e.onScroll,i=this.state.scrollTop;this._onScrollMemoized!==i&&(r({clientHeight:t,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:i}),this._onScrollMemoized=i)}},{key:"_invokeOnCellsRenderedCallback",value:function(){this._startIndexMemoized===this._startIndex&&this._stopIndexMemoized===this._stopIndex||((0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex)}},{key:"_populatePositionCache",value:function(e,t){for(var r=this.props,i=r.cellMeasurerCache,s=r.cellPositioner,n=e;n<=t;n++){var o=s(n),a=o.left,l=o.top;this._positionCache.setPosition(n,a,l,i.getHeight(n))}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return void 0!==e.scrollTop&&t.scrollTop!==e.scrollTop?{isScrolling:!0,scrollTop:e.scrollTop}:null}}]),t}(d.PureComponent),(0,u.Z)(Le,"propTypes",null),Me);function Ze(){}(0,u.Z)(xe,"defaultProps",{autoHeight:!1,keyMapper:function(e){return e},onCellsRendered:Ze,onScroll:Ze,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:150,style:{},tabIndex:0,rowDirection:"ltr"});(0,c.polyfill)(xe);var Fe=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,e),(0,u.Z)(this,"_cellMeasurerCache",void 0),(0,u.Z)(this,"_columnIndexOffset",void 0),(0,u.Z)(this,"_rowIndexOffset",void 0),(0,u.Z)(this,"columnWidth",(function(e){var r=e.index;t._cellMeasurerCache.columnWidth({index:r+t._columnIndexOffset})})),(0,u.Z)(this,"rowHeight",(function(e){var r=e.index;t._cellMeasurerCache.rowHeight({index:r+t._rowIndexOffset})}));var s=r.cellMeasurerCache,n=r.columnIndexOffset,o=void 0===n?0:n,a=r.rowIndexOffset,l=void 0===a?0:a;this._cellMeasurerCache=s,this._columnIndexOffset=o,this._rowIndexOffset=l}return(0,s.Z)(e,[{key:"clear",value:function(e,t){this._cellMeasurerCache.clear(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getHeight(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getWidth(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.has(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"set",value:function(e,t,r,i){this._cellMeasurerCache.set(e+this._rowIndexOffset,t+this._columnIndexOffset,r,i)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),e}();function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(r,!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var We=function(e){function t(e,r){var s;(0,i.Z)(this,t),s=(0,n.Z)(this,(0,o.Z)(t).call(this,e,r)),(0,u.Z)((0,a.Z)(s),"state",{scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1}),(0,u.Z)((0,a.Z)(s),"_deferredInvalidateColumnIndex",null),(0,u.Z)((0,a.Z)(s),"_deferredInvalidateRowIndex",null),(0,u.Z)((0,a.Z)(s),"_bottomLeftGridRef",(function(e){s._bottomLeftGrid=e})),(0,u.Z)((0,a.Z)(s),"_bottomRightGridRef",(function(e){s._bottomRightGrid=e})),(0,u.Z)((0,a.Z)(s),"_cellRendererBottomLeftGrid",(function(e){var t=e.rowIndex,r=(0,m.Z)(e,["rowIndex"]),i=s.props,n=i.cellRenderer,o=i.fixedRowCount;return t===i.rowCount-o?d.createElement("div",{key:r.key,style:Be({},r.style,{height:20})}):n(Be({},r,{parent:(0,a.Z)(s),rowIndex:t+o}))})),(0,u.Z)((0,a.Z)(s),"_cellRendererBottomRightGrid",(function(e){var t=e.columnIndex,r=e.rowIndex,i=(0,m.Z)(e,["columnIndex","rowIndex"]),n=s.props,o=n.cellRenderer,l=n.fixedColumnCount,u=n.fixedRowCount;return o(Be({},i,{columnIndex:t+l,parent:(0,a.Z)(s),rowIndex:r+u}))})),(0,u.Z)((0,a.Z)(s),"_cellRendererTopRightGrid",(function(e){var t=e.columnIndex,r=(0,m.Z)(e,["columnIndex"]),i=s.props,n=i.cellRenderer,o=i.columnCount,l=i.fixedColumnCount;return t===o-l?d.createElement("div",{key:r.key,style:Be({},r.style,{width:20})}):n(Be({},r,{columnIndex:t+l,parent:(0,a.Z)(s)}))})),(0,u.Z)((0,a.Z)(s),"_columnWidthRightGrid",(function(e){var t=e.index,r=s.props,i=r.columnCount,n=r.fixedColumnCount,o=r.columnWidth,a=s.state,l=a.scrollbarSize;return a.showHorizontalScrollbar&&t===i-n?l:"function"==typeof o?o({index:t+n}):o})),(0,u.Z)((0,a.Z)(s),"_onScroll",(function(e){var t=e.scrollLeft,r=e.scrollTop;s.setState({scrollLeft:t,scrollTop:r});var i=s.props.onScroll;i&&i(e)})),(0,u.Z)((0,a.Z)(s),"_onScrollbarPresenceChange",(function(e){var t=e.horizontal,r=e.size,i=e.vertical,n=s.state,o=n.showHorizontalScrollbar,a=n.showVerticalScrollbar;if(t!==o||i!==a){s.setState({scrollbarSize:r,showHorizontalScrollbar:t,showVerticalScrollbar:i});var l=s.props.onScrollbarPresenceChange;"function"==typeof l&&l({horizontal:t,size:r,vertical:i})}})),(0,u.Z)((0,a.Z)(s),"_onScrollLeft",(function(e){var t=e.scrollLeft;s._onScroll({scrollLeft:t,scrollTop:s.state.scrollTop})})),(0,u.Z)((0,a.Z)(s),"_onScrollTop",(function(e){var t=e.scrollTop;s._onScroll({scrollTop:t,scrollLeft:s.state.scrollLeft})})),(0,u.Z)((0,a.Z)(s),"_rowHeightBottomGrid",(function(e){var t=e.index,r=s.props,i=r.fixedRowCount,n=r.rowCount,o=r.rowHeight,a=s.state,l=a.scrollbarSize;return a.showVerticalScrollbar&&t===n-i?l:"function"==typeof o?o({index:t+i}):o})),(0,u.Z)((0,a.Z)(s),"_topLeftGridRef",(function(e){s._topLeftGrid=e})),(0,u.Z)((0,a.Z)(s),"_topRightGridRef",(function(e){s._topRightGrid=e}));var l=e.deferredMeasurementCache,c=e.fixedColumnCount,h=e.fixedRowCount;return s._maybeCalculateCachedStyles(!0),l&&(s._deferredMeasurementCacheBottomLeftGrid=h>0?new Fe({cellMeasurerCache:l,columnIndexOffset:0,rowIndexOffset:h}):l,s._deferredMeasurementCacheBottomRightGrid=c>0||h>0?new Fe({cellMeasurerCache:l,columnIndexOffset:c,rowIndexOffset:h}):l,s._deferredMeasurementCacheTopRightGrid=c>0?new Fe({cellMeasurerCache:l,columnIndexOffset:c,rowIndexOffset:0}):l),s}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,i=e.rowIndex,s=void 0===i?0:i;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,r):r,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,s):s}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,i=e.rowIndex,s=void 0===i?0:i,n=this.props,o=n.fixedColumnCount,a=n.fixedRowCount,l=Math.max(0,r-o),u=Math.max(0,s-a);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:r,rowIndex:u}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:l,rowIndex:u}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:r,rowIndex:s}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:l,rowIndex:s}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(!0)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,r=e.scrollTop;if(t>0||r>0){var i={};t>0&&(i.scrollLeft=t),r>0&&(i.scrollTop=r),this.setState(i)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"render",value:function(){var e=this.props,t=e.onScroll,r=e.onSectionRendered,i=(e.onScrollbarPresenceChange,e.scrollLeft,e.scrollToColumn),s=(e.scrollTop,e.scrollToRow),n=(0,m.Z)(e,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(this._prepareForRender(),0===this.props.width||0===this.props.height)return null;var o=this.state,a=o.scrollLeft,l=o.scrollTop;return d.createElement("div",{style:this._containerOuterStyle},d.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(n),this._renderTopRightGrid(Be({},n,{onScroll:t,scrollLeft:a}))),d.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(Be({},n,{onScroll:t,scrollTop:l})),this._renderBottomRightGrid(Be({},n,{onScroll:t,onSectionRendered:r,scrollLeft:a,scrollToColumn:i,scrollToRow:s,scrollTop:l}))))}},{key:"_getBottomGridHeight",value:function(e){return e.height-this._getTopGridHeight(e)}},{key:"_getLeftGridWidth",value:function(e){var t=e.fixedColumnCount,r=e.columnWidth;if(null==this._leftGridWidth)if("function"==typeof r){for(var i=0,s=0;s<t;s++)i+=r({index:s});this._leftGridWidth=i}else this._leftGridWidth=r*t;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(e){return e.width-this._getLeftGridWidth(e)}},{key:"_getTopGridHeight",value:function(e){var t=e.fixedRowCount,r=e.rowHeight;if(null==this._topGridHeight)if("function"==typeof r){for(var i=0,s=0;s<t;s++)i+=r({index:s});this._topGridHeight=i}else this._topGridHeight=r*t;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(e){var t=this.props,r=t.columnWidth,i=t.enableFixedColumnScroll,s=t.enableFixedRowScroll,n=t.height,o=t.fixedColumnCount,a=t.fixedRowCount,l=t.rowHeight,u=t.style,d=t.styleBottomLeftGrid,c=t.styleBottomRightGrid,h=t.styleTopLeftGrid,p=t.styleTopRightGrid,g=t.width,m=e||n!==this._lastRenderedHeight||g!==this._lastRenderedWidth,_=e||r!==this._lastRenderedColumnWidth||o!==this._lastRenderedFixedColumnCount,f=e||a!==this._lastRenderedFixedRowCount||l!==this._lastRenderedRowHeight;(e||m||u!==this._lastRenderedStyle)&&(this._containerOuterStyle=Be({height:n,overflow:"visible",width:g},u)),(e||m||f)&&(this._containerTopStyle={height:this._getTopGridHeight(this.props),position:"relative",width:g},this._containerBottomStyle={height:n-this._getTopGridHeight(this.props),overflow:"visible",position:"relative",width:g}),(e||d!==this._lastRenderedStyleBottomLeftGrid)&&(this._bottomLeftGridStyle=Be({left:0,overflowX:"hidden",overflowY:i?"auto":"hidden",position:"absolute"},d)),(e||_||c!==this._lastRenderedStyleBottomRightGrid)&&(this._bottomRightGridStyle=Be({left:this._getLeftGridWidth(this.props),position:"absolute"},c)),(e||h!==this._lastRenderedStyleTopLeftGrid)&&(this._topLeftGridStyle=Be({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},h)),(e||_||p!==this._lastRenderedStyleTopRightGrid)&&(this._topRightGridStyle=Be({left:this._getLeftGridWidth(this.props),overflowX:s?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},p)),this._lastRenderedColumnWidth=r,this._lastRenderedFixedColumnCount=o,this._lastRenderedFixedRowCount=a,this._lastRenderedHeight=n,this._lastRenderedRowHeight=l,this._lastRenderedStyle=u,this._lastRenderedStyleBottomLeftGrid=d,this._lastRenderedStyleBottomRightGrid=c,this._lastRenderedStyleTopLeftGrid=h,this._lastRenderedStyleTopRightGrid=p,this._lastRenderedWidth=g}},{key:"_prepareForRender",value:function(){this._lastRenderedColumnWidth===this.props.columnWidth&&this._lastRenderedFixedColumnCount===this.props.fixedColumnCount||(this._leftGridWidth=null),this._lastRenderedFixedRowCount===this.props.fixedRowCount&&this._lastRenderedRowHeight===this.props.rowHeight||(this._topGridHeight=null),this._maybeCalculateCachedStyles(),this._lastRenderedColumnWidth=this.props.columnWidth,this._lastRenderedFixedColumnCount=this.props.fixedColumnCount,this._lastRenderedFixedRowCount=this.props.fixedRowCount,this._lastRenderedRowHeight=this.props.rowHeight}},{key:"_renderBottomLeftGrid",value:function(e){var t=e.enableFixedColumnScroll,r=e.fixedColumnCount,i=e.fixedRowCount,s=e.rowCount,n=e.hideBottomLeftGridScrollbar,o=this.state.showVerticalScrollbar;if(!r)return null;var a=o?1:0,l=this._getBottomGridHeight(e),u=this._getLeftGridWidth(e),c=this.state.showVerticalScrollbar?this.state.scrollbarSize:0,p=n?u+c:u,g=d.createElement(Z,(0,h.Z)({},e,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:r,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:l,onScroll:t?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,s-i)+a,rowHeight:this._rowHeightBottomGrid,style:this._bottomLeftGridStyle,tabIndex:null,width:p}));return n?d.createElement("div",{className:"BottomLeftGrid_ScrollWrapper",style:Be({},this._bottomLeftGridStyle,{height:l,width:u,overflowY:"hidden"})},g):g}},{key:"_renderBottomRightGrid",value:function(e){var t=e.columnCount,r=e.fixedColumnCount,i=e.fixedRowCount,s=e.rowCount,n=e.scrollToColumn,o=e.scrollToRow;return d.createElement(Z,(0,h.Z)({},e,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,t-r),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(e),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,s-i),rowHeight:this._rowHeightBottomGrid,scrollToColumn:n-r,scrollToRow:o-i,style:this._bottomRightGridStyle,width:this._getRightGridWidth(e)}))}},{key:"_renderTopLeftGrid",value:function(e){var t=e.fixedColumnCount,r=e.fixedRowCount;return t&&r?d.createElement(Z,(0,h.Z)({},e,{className:this.props.classNameTopLeftGrid,columnCount:t,height:this._getTopGridHeight(e),ref:this._topLeftGridRef,rowCount:r,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(e)})):null}},{key:"_renderTopRightGrid",value:function(e){var t=e.columnCount,r=e.enableFixedRowScroll,i=e.fixedColumnCount,s=e.fixedRowCount,n=e.scrollLeft,o=e.hideTopRightGridScrollbar,a=this.state,l=a.showHorizontalScrollbar,u=a.scrollbarSize;if(!s)return null;var c=l?1:0,p=this._getTopGridHeight(e),g=this._getRightGridWidth(e),m=l?u:0,_=p,f=this._topRightGridStyle;o&&(_=p+m,f=Be({},this._topRightGridStyle,{left:0}));var y=d.createElement(Z,(0,h.Z)({},e,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,t-i)+c,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:_,onScroll:r?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:s,scrollLeft:n,style:f,tabIndex:null,width:g}));return o?d.createElement("div",{className:"TopRightGrid_ScrollWrapper",style:Be({},this._topRightGridStyle,{height:p,width:g,overflowX:"hidden"})},y):y}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.scrollLeft!==t.scrollLeft||e.scrollTop!==t.scrollTop?{scrollLeft:null!=e.scrollLeft&&e.scrollLeft>=0?e.scrollLeft:t.scrollLeft,scrollTop:null!=e.scrollTop&&e.scrollTop>=0?e.scrollTop:t.scrollTop}:null}}]),t}(d.PureComponent);(0,u.Z)(We,"defaultProps",{classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{},hideTopRightGridScrollbar:!1,hideBottomLeftGridScrollbar:!1}),We.propTypes={},(0,c.polyfill)(We);(function(e){function t(e,r){var s;return(0,i.Z)(this,t),(s=(0,n.Z)(this,(0,o.Z)(t).call(this,e,r))).state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},s._onScroll=s._onScroll.bind((0,a.Z)(s)),s}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,r=t.clientHeight,i=t.clientWidth,s=t.scrollHeight,n=t.scrollLeft,o=t.scrollTop,a=t.scrollWidth;return e({clientHeight:r,clientWidth:i,onScroll:this._onScroll,scrollHeight:s,scrollLeft:n,scrollTop:o,scrollWidth:a})}},{key:"_onScroll",value:function(e){var t=e.clientHeight,r=e.clientWidth,i=e.scrollHeight,s=e.scrollLeft,n=e.scrollTop,o=e.scrollWidth;this.setState({clientHeight:t,clientWidth:r,scrollHeight:i,scrollLeft:s,scrollTop:n,scrollWidth:o})}}]),t}(d.PureComponent)).propTypes={};function Ge(e){var t=e.className,r=e.columns,i=e.style;return d.createElement("div",{className:t,role:"row",style:i},r)}Ge.propTypes=null;const Ue={ASC:"ASC",DESC:"DESC"};function He(e){var t=e.sortDirection,r=(0,p.Z)("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":t===Ue.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":t===Ue.DESC});return d.createElement("svg",{className:r,width:18,height:18,viewBox:"0 0 24 24"},t===Ue.ASC?d.createElement("path",{d:"M7 14l5-5 5 5z"}):d.createElement("path",{d:"M7 10l5 5 5-5z"}),d.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}function Ve(e){var t=e.dataKey,r=e.label,i=e.sortBy,s=e.sortDirection,n=i===t,o=[d.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:"string"==typeof r?r:null},r)];return n&&o.push(d.createElement(He,{key:"SortIndicator",sortDirection:s})),o}function je(e){var t=e.className,r=e.columns,i=e.index,s=e.key,n=e.onRowClick,o=e.onRowDoubleClick,a=e.onRowMouseOut,l=e.onRowMouseOver,u=e.onRowRightClick,c=e.rowData,p=e.style,g={"aria-rowindex":i+1};return(n||o||a||l||u)&&(g["aria-label"]="row",g.tabIndex=0,n&&(g.onClick=function(e){return n({event:e,index:i,rowData:c})}),o&&(g.onDoubleClick=function(e){return o({event:e,index:i,rowData:c})}),a&&(g.onMouseOut=function(e){return a({event:e,index:i,rowData:c})}),l&&(g.onMouseOver=function(e){return l({event:e,index:i,rowData:c})}),u&&(g.onContextMenu=function(e){return u({event:e,index:i,rowData:c})})),d.createElement("div",(0,h.Z)({},g,{className:t,key:s,role:"row",style:p}),r)}He.propTypes={},Ve.propTypes=null,je.propTypes=null;var qe=function(e){function t(){return(0,i.Z)(this,t),(0,n.Z)(this,(0,o.Z)(t).apply(this,arguments))}return(0,l.Z)(t,e),t}(d.Component);function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(r,!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(0,u.Z)(qe,"defaultProps",{cellDataGetter:function(e){var t=e.dataKey,r=e.rowData;return"function"==typeof r.get?r.get(t):r[t]},cellRenderer:function(e){var t=e.cellData;return null==t?"":String(t)},defaultSortDirection:Ue.ASC,flexGrow:0,flexShrink:1,headerRenderer:Ve,style:{}}),qe.propTypes={};var Qe=function(e){function t(e){var r;return(0,i.Z)(this,t),(r=(0,n.Z)(this,(0,o.Z)(t).call(this,e))).state={scrollbarWidth:0},r._createColumn=r._createColumn.bind((0,a.Z)(r)),r._createRow=r._createRow.bind((0,a.Z)(r)),r._onScroll=r._onScroll.bind((0,a.Z)(r)),r._onSectionRendered=r._onSectionRendered.bind((0,a.Z)(r)),r._setRef=r._setRef.bind((0,a.Z)(r)),r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,r=e.index;return this.Grid?this.Grid.getOffsetForCell({alignment:t,rowIndex:r}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,r=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:r,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,r=void 0===t?0:t,i=e.rowIndex,s=void 0===i?0:i;this.Grid&&this.Grid.recomputeGridSize({rowIndex:s,columnIndex:r})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"getScrollbarWidth",value:function(){if(this.Grid){var e=(0,Y.findDOMNode)(this.Grid),t=e.clientWidth||0;return(e.offsetWidth||0)-t}return 0}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,i=t.className,s=t.disableHeader,n=t.gridClassName,o=t.gridStyle,a=t.headerHeight,l=t.headerRowRenderer,u=t.height,c=t.id,g=t.noRowsRenderer,m=t.rowClassName,_=t.rowStyle,f=t.scrollToIndex,y=t.style,b=t.width,C=this.state.scrollbarWidth,E=s?u:u-a,S="function"==typeof m?m({index:-1}):m,T="function"==typeof _?_({index:-1}):_;return this._cachedColumnStyles=[],d.Children.toArray(r).forEach((function(t,r){var i=e._getFlexStyleForColumn(t,t.props.style);e._cachedColumnStyles[r]=$e({overflow:"hidden"},i)})),d.createElement("div",{"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-colcount":d.Children.toArray(r).length,"aria-rowcount":this.props.rowCount,className:(0,p.Z)("ReactVirtualized__Table",i),id:c,role:"grid",style:y},!s&&l({className:(0,p.Z)("ReactVirtualized__Table__headerRow",S),columns:this._getHeaderColumns(),style:$e({height:a,overflow:"hidden",paddingRight:C,width:b},T)}),d.createElement(Z,(0,h.Z)({},this.props,{"aria-readonly":null,autoContainerWidth:!0,className:(0,p.Z)("ReactVirtualized__Table__Grid",n),cellRenderer:this._createRow,columnWidth:b,columnCount:1,height:E,id:void 0,noContentRenderer:g,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:C,scrollToRow:f,style:$e({},o,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(e){var t=e.column,r=e.columnIndex,i=e.isScrolling,s=e.parent,n=e.rowData,o=e.rowIndex,a=this.props.onColumnClick,l=t.props,u=l.cellDataGetter,c=l.cellRenderer,h=l.className,g=l.columnData,m=l.dataKey,_=l.id,f=c({cellData:u({columnData:g,dataKey:m,rowData:n}),columnData:g,columnIndex:r,dataKey:m,isScrolling:i,parent:s,rowData:n,rowIndex:o}),y=this._cachedColumnStyles[r],b="string"==typeof f?f:null;return d.createElement("div",{"aria-colindex":r+1,"aria-describedby":_,className:(0,p.Z)("ReactVirtualized__Table__rowColumn",h),key:"Row"+o+"-Col"+r,onClick:function(e){a&&a({columnData:g,dataKey:m,event:e})},role:"gridcell",style:y,title:b},f)}},{key:"_createHeader",value:function(e){var t,r,i,s,n,o=e.column,a=e.index,l=this.props,u=l.headerClassName,c=l.headerStyle,h=l.onHeaderClick,g=l.sort,m=l.sortBy,_=l.sortDirection,f=o.props,y=f.columnData,b=f.dataKey,C=f.defaultSortDirection,E=f.disableSort,S=f.headerRenderer,T=f.id,I=f.label,v=!E&&g,R=(0,p.Z)("ReactVirtualized__Table__headerColumn",u,o.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:v}),w=this._getFlexStyleForColumn(o,$e({},c,{},o.props.headerStyle)),A=S({columnData:y,dataKey:b,disableSort:E,label:I,sortBy:m,sortDirection:_});if(v||h){var D=m!==b?C:_===Ue.DESC?Ue.ASC:Ue.DESC,L=function(e){v&&g({defaultSortDirection:C,event:e,sortBy:b,sortDirection:D}),h&&h({columnData:y,dataKey:b,event:e})};n=o.props["aria-label"]||I||b,s="none",i=0,t=L,r=function(e){"Enter"!==e.key&&" "!==e.key||L(e)}}return m===b&&(s=_===Ue.ASC?"ascending":"descending"),d.createElement("div",{"aria-label":n,"aria-sort":s,className:R,id:T,key:"Header-Col"+a,onClick:t,onKeyDown:r,role:"columnheader",style:w,tabIndex:i},A)}},{key:"_createRow",value:function(e){var t=this,r=e.rowIndex,i=e.isScrolling,s=e.key,n=e.parent,o=e.style,a=this.props,l=a.children,u=a.onRowClick,c=a.onRowDoubleClick,h=a.onRowRightClick,g=a.onRowMouseOver,m=a.onRowMouseOut,_=a.rowClassName,f=a.rowGetter,y=a.rowRenderer,b=a.rowStyle,C=this.state.scrollbarWidth,E="function"==typeof _?_({index:r}):_,S="function"==typeof b?b({index:r}):b,T=f({index:r}),I=d.Children.toArray(l).map((function(e,s){return t._createColumn({column:e,columnIndex:s,isScrolling:i,parent:n,rowData:T,rowIndex:r,scrollbarWidth:C})})),v=(0,p.Z)("ReactVirtualized__Table__row",E),R=$e({},o,{height:this._getRowHeight(r),overflow:"hidden",paddingRight:C},S);return y({className:v,columns:I,index:r,isScrolling:i,key:s,onRowClick:u,onRowDoubleClick:c,onRowRightClick:h,onRowMouseOver:g,onRowMouseOut:m,rowData:T,style:R})}},{key:"_getFlexStyleForColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(e.props.flexGrow," ").concat(e.props.flexShrink," ").concat(e.props.width,"px"),i=$e({},t,{flex:r,msFlex:r,WebkitFlex:r});return e.props.maxWidth&&(i.maxWidth=e.props.maxWidth),e.props.minWidth&&(i.minWidth=e.props.minWidth),i}},{key:"_getHeaderColumns",value:function(){var e=this,t=this.props,r=t.children;return(t.disableHeader?[]:d.Children.toArray(r)).map((function(t,r){return e._createHeader({column:t,index:r})}))}},{key:"_getRowHeight",value:function(e){var t=this.props.rowHeight;return"function"==typeof t?t({index:e}):t}},{key:"_onScroll",value:function(e){var t=e.clientHeight,r=e.scrollHeight,i=e.scrollTop;(0,this.props.onScroll)({clientHeight:t,scrollHeight:r,scrollTop:i})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,r=e.rowOverscanStopIndex,i=e.rowStartIndex,s=e.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:r,startIndex:i,stopIndex:s})}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_setScrollbarWidth",value:function(){var e=this.getScrollbarWidth();this.setState({scrollbarWidth:e})}}]),t}(d.PureComponent);(0,u.Z)(Qe,"defaultProps",{disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:F,overscanRowCount:10,rowRenderer:je,headerRowRenderer:Ge,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}}),Qe.propTypes={};var Ye=[],Ke=null,Je=null;function Xe(){Je&&(Je=null,document.body&&null!=Ke&&(document.body.style.pointerEvents=Ke),Ke=null)}function et(){Xe(),Ye.forEach((function(e){return e.__resetIsScrolling()}))}function tt(e){e.currentTarget===window&&null==Ke&&document.body&&(Ke=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),function(){Je&&D(Je);var e=0;Ye.forEach((function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)})),Je=L(et,e)}(),Ye.forEach((function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()}))}function rt(e,t){Ye.some((function(e){return e.props.scrollElement===t}))||t.addEventListener("scroll",tt),Ye.push(e)}function it(e,t){(Ye=Ye.filter((function(t){return t!==e}))).length||(t.removeEventListener("scroll",tt),Je&&(D(Je),Xe()))}var st,nt,ot=function(e){return e===window},at=function(e){return e.getBoundingClientRect()};function lt(e,t){if(e){if(ot(e)){var r=window,i=r.innerHeight,s=r.innerWidth;return{height:"number"==typeof i?i:0,width:"number"==typeof s?s:0}}return at(e)}return{height:t.serverHeight,width:t.serverWidth}}function ut(e){return ot(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}function dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}var ct=function(){return"undefined"!=typeof window?window:void 0},ht=(nt=st=function(e){function t(){var e,r;(0,i.Z)(this,t);for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];return r=(0,n.Z)(this,(e=(0,o.Z)(t)).call.apply(e,[this].concat(l))),(0,u.Z)((0,a.Z)(r),"_window",ct()),(0,u.Z)((0,a.Z)(r),"_isMounted",!1),(0,u.Z)((0,a.Z)(r),"_positionFromTop",0),(0,u.Z)((0,a.Z)(r),"_positionFromLeft",0),(0,u.Z)((0,a.Z)(r),"_detectElementResize",void 0),(0,u.Z)((0,a.Z)(r),"_child",void 0),(0,u.Z)((0,a.Z)(r),"state",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dt(r,!0).forEach((function(t){(0,u.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},lt(r.props.scrollElement,r.props),{isScrolling:!1,scrollLeft:0,scrollTop:0})),(0,u.Z)((0,a.Z)(r),"_registerChild",(function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null"),r._child=e,r.updatePosition()})),(0,u.Z)((0,a.Z)(r),"_onChildScroll",(function(e){var t=e.scrollTop;if(r.state.scrollTop!==t){var i=r.props.scrollElement;i&&("function"==typeof i.scrollTo?i.scrollTo(0,t+r._positionFromTop):i.scrollTop=t+r._positionFromTop)}})),(0,u.Z)((0,a.Z)(r),"_registerResizeListener",(function(e){e===window?window.addEventListener("resize",r._onResize,!1):r._detectElementResize.addResizeListener(e,r._onResize)})),(0,u.Z)((0,a.Z)(r),"_unregisterResizeListener",(function(e){e===window?window.removeEventListener("resize",r._onResize,!1):e&&r._detectElementResize.removeResizeListener(e,r._onResize)})),(0,u.Z)((0,a.Z)(r),"_onResize",(function(){r.updatePosition()})),(0,u.Z)((0,a.Z)(r),"__handleWindowScrollEvent",(function(){if(r._isMounted){var e=r.props.onScroll,t=r.props.scrollElement;if(t){var i=ut(t),s=Math.max(0,i.left-r._positionFromLeft),n=Math.max(0,i.top-r._positionFromTop);r.setState({isScrolling:!0,scrollLeft:s,scrollTop:n}),e({scrollLeft:s,scrollTop:n})}}})),(0,u.Z)((0,a.Z)(r),"__resetIsScrolling",(function(){r.setState({isScrolling:!1})})),r}return(0,l.Z)(t,e),(0,s.Z)(t,[{key:"updatePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollElement,t=this.props.onResize,r=this.state,i=r.height,s=r.width,n=this._child||Y.findDOMNode(this);if(n instanceof Element&&e){var o=function(e,t){if(ot(t)&&document.documentElement){var r=document.documentElement,i=at(e),s=at(r);return{top:i.top-s.top,left:i.left-s.left}}var n=ut(t),o=at(e),a=at(t);return{top:o.top+n.top-a.top,left:o.left+n.left-a.left}}(n,e);this._positionFromTop=o.top,this._positionFromLeft=o.left}var a=lt(e,this.props);i===a.height&&s===a.width||(this.setState({height:a.height,width:a.width}),t({height:a.height,width:a.width}))}},{key:"componentDidMount",value:function(){var e=this.props.scrollElement;this._detectElementResize=U(),this.updatePosition(e),e&&(rt(this,e),this._registerResizeListener(e)),this._isMounted=!0}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.scrollElement,i=e.scrollElement;i!==r&&null!=i&&null!=r&&(this.updatePosition(r),it(this,i),rt(this,r),this._unregisterResizeListener(i),this._registerResizeListener(r))}},{key:"componentWillUnmount",value:function(){var e=this.props.scrollElement;e&&(it(this,e),this._unregisterResizeListener(e)),this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state,r=t.isScrolling,i=t.scrollTop,s=t.scrollLeft,n=t.height,o=t.width;return e({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:n,isScrolling:r,scrollLeft:s,scrollTop:i,width:o})}}]),t}(d.PureComponent),(0,u.Z)(st,"propTypes",null),nt);(0,u.Z)(ht,"defaultProps",{onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:ct(),serverHeight:0,serverWidth:0})},44215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(76126),s=r(67294),n=r(35944);function o(e){const[t,r]=(0,s.useState)(!1),{children:o,...a}=e,l=()=>{r(!1)},u=()=>{r(!0)};return(0,n.tZ)(i.Z,{...a,isOpen:t,children:(0,n.tZ)("div",{children:(0,n.tZ)("div",{onKeyDown:e=>{"Escape"===e.key&&l()},onFocus:u,onBlur:l,onMouseEnter:u,onMouseLeave:l,role:"button",tabIndex:"-1",children:o})})})}},22787:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var i=r(67294),s=r(45697),n=r.n(s),o=r(96486),a=r(2931),l=r(61506),u=r(18111),d=r.n(u),c=r(57446),h=r(35944);const p=new c.Z;function g({children:e,context:t}){const r=JSON.stringify(Object.keys(t).sort()),s=p.getOrSet(r,(()=>class extends i.Component{static childContextTypes=(0,o.mapValues)(t,(()=>n().any));getChildContext(){return this.props.context}render(){const e=l.Z.get(d()).getSLDSIconsPath();return(0,h.tZ)(a.Z,{iconPath:e,children:this.props.children})}}));return(0,h.tZ)(s,{context:t,children:e})}},950:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(67294),s=r(79646);class n extends s.Z{constructor(e){super(),this._interpolate=e}interpolate(e,t,r){return this._interpolate(1-e,r,r-t)}}n.add("LINEAR",new n(((e,t,r)=>t-r*e))).add("EASE_OUT_QUAD",new n(((e,t,r)=>t-r*Math.pow(e,2)))).finish();var o=r(31399),a=r(69499);var l=r(35944);function u({value:e,duration:t,initialValue:r,easingEquation:s=n.EASE_OUT_QUAD,formatNumber:u,onDone:d,className:c}){const[h,p]=(0,i.useState)(r??e),g=(0,o.Z)(e),m=(0,i.useRef)(),_=(0,i.useCallback)((()=>{null!=m.current&&(cancelAnimationFrame(m.current),m.current=void 0)}),[]),f=(0,i.useCallback)((t=>{t&&(_(),p(e),d?.())}),[_,e,d]),y=function(e){const[t,r]=(0,i.useState)(document.hidden||!a.isVisible(document.body)),s=(0,i.useCallback)((t=>{r(!t),e(!t)}),[e]);return(0,i.useEffect)((()=>{const e=()=>{s(!document.hidden)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[s]),(0,i.useEffect)((()=>{const e=new IntersectionObserver((e=>{s(e.some((e=>e.isIntersecting)))}));return e.observe(document.body),()=>{e.disconnect()}}),[s]),t}(f),b=(0,i.useCallback)(((e,r)=>{if(_(),y)p(r),d?.();else{let i;const n=o=>{null==i&&(i=o),p(s.interpolate(Math.min((o-i)/t,1),e,r)),o-i<t?m.current=requestAnimationFrame(n):d?.()};m.current=requestAnimationFrame(n)}}),[_,t,s,y,d]);(0,i.useEffect)((()=>{e!==g&&b(h,e)}),[b,h,e,g]),(0,i.useEffect)((()=>()=>{_()}),[_]);const C=null!=u?u(h):h;return(0,l.tZ)("div",{className:c,children:C})}},58094:(e,t,r)=>{"use strict";r.d(t,{Z:()=>$});var i=r(67294),s=r(50130),n=r(35944);function o({children:e}){return(0,n.tZ)("span",{"aria-hidden":"true",className:"slds-avatar slds-chat-avatar",children:e})}var a=r(35390),l=r(84198),u=r(94184),d=r.n(u),c=r(49720),h=r(70917),p=r(97761);const g=(0,h.iv)("display:flex;border-top:1px solid ",p.paletteNeutral80,";padding:",p.spacingSmall,";.slds-form-element{margin-top:0;flex:1 1 auto;}.slds-textarea{border:1px solid ",p.paletteNeutral50,";border-right:0;width:100%;padding-right:0;border-radius:4px 0px 0px 4px;font-size:",p.fontSize3,";margin-left:",p.spacingXxSmall,";box-shadow:none;height:4rem;resize:none;line-height:",p.lineHeightText,";}.slds-textarea::-webkit-scrollbar{display:none;}input[type='text']:focus,input[type='text']:active{border-color:",p.paletteNeutral50,";box-shadow:none;}.slds-input::placeholder{font-size:",p.fontSize3,";}.slds-button{border-radius:0px 4px 4px 0px;border:1px solid ",p.paletteNeutral50,";border-left:0;padding-bottom:",p.spacingXSmall,";margin-right:",p.spacingXxSmall,";height:4rem;align-items:end;}.chat-input-button:hover{transition:all 0.2s ease-in-out;background-color:",p.brandDark,";.slds-button__icon{color:",p.paletteNeutral100,";}}.slds-button svg{color:",p.paletteNeutral50,";}",""),m=(0,h.iv)("background-color:white;display:flex;flex-direction:column;height:100%;line-height:",p.lineHeightText,";@keyframes typing{0%{width:0;}100%{width:100%;}}@keyframes twinkle{0%{scale:1;}100%{scale:0.6;}}@keyframes fadeIn{0%{opacity:0;}100%{opacity:1;}}.chat-contents{display:inline-flex;vertical-align:middle;overflow-y:auto;scrollbar-gutter:stable;padding-left:",p.spacingXxSmall,";font-size:",p.fontSize4,";.example-input-container{margin-top:",p.spacingXxSmall,";font-style:italic;}}.slds-chat{display:flex;max-height:100%;margin-bottom:0;}.slds-chat-list{margin-top:auto;padding-bottom:",p.spacingSmall,";}.einstein-icon{margin-top:",p.spacingXLarge,";margin-bottom:",p.spacingMedium,";fill:",p.paletteBlue40,";}.slds-chat-listitem_outbound{display:flex;justify-content:flex-start;.slds-chat-avatar{margin-right:",p.spacingSmall,";}.user-icon-avatar{width:2rem;height:2rem;border-radius:",p.spacingXxSmall,";}}.slds-chat-listitem_inbound{margin-top:",p.spacingSmall,";position:relative;display:inline-block;.slds-chat-message__text_inbound{background-color:",p.paletteNeutral90,";}.slds-chat-avatar{margin-right:",p.spacingSmall,";background-color:",p.paletteBlue90,";text-align:center;}.einstein-icon-avatar{fill:",p.brandAccessible,";margin-top:0.325rem;height:1.325rem;width:1.325rem;}}.slds-chat-message{.slds-chat-message__text{padding:0 ",p.spacingXxSmall,";font-size:",p.fontSize4,";}.slds-chat-error-message.slds-chat-message__text{display:flex;color:rgba(186, 5, 23, 1);background-color:rgba(254, 241, 238, 1);padding:",p.spacingXSmall,";border-radius:",p.spacingXxSmall,";.error-icon{width:",p.squareIconUtilityMedium,";height:",p.squareIconUtilityMedium,";margin-right:",p.spacingXSmall,";--slds-c-icon-color-foreground:rgba(186, 5, 23, 1);}}.slds-chat-message__body{.chat-avatar-text-container{display:flex;border-radius:",p.borderRadiusMedium,";padding:",p.spacingXxSmall,";}.highlight-feedback-content{background-color:",p.colorBackgroundBackdropTint,";.highlight-message-content{filter:brightness(0.9);}}}.highlight-message-content{background:",p.paletteNeutral95,";border-radius:",p.borderRadiusMedium,";padding:",p.spacingXSmall,";margin-top:",p.spacingXSmall,";}.action-button-container{display:flex;justify-content:flex-end;margin-right:",p.spacingXxSmall,";}.typing-indicator-message{display:flex;overflow:hidden;white-space:nowrap;animation:typing 0.75s steps(45, end);.sparkle-container{padding-left:",p.spacingXxSmall,";.sparkle-icon{opacity:0;animation:twinkle 0.4s infinite alternate,fadeIn 0.1s forwards;animation-timing-function:ease-out;animation-delay:0.4s;}.sparkle2{animation-delay:0.55s;}.sparkle3{animation-delay:0.7s;}}}.inbound-chat-msg-feedback-element{position:absolute;bottom:100%;right:0;margin-right:",p.spacingXSmall,";.chat-avatar-text-cotnainer{position:relative;}.feedback-button-group{position:relative;top:",p.spacingXxSmall,";}.slds-button_icon-container{width:1.65rem;height:1.65rem;}}.llm-feedback-container{.feedback-button-group{border:1.75px solid ",p.brandHeaderContrast,";border-radius:0.4rem;background-color:",p.colorBackgroundAlt,";overflow:hidden;.feedback-button:hover:not([disabled]){background-color:",p.brandDark,";.slds-icon-text-default{--slds-c-icon-color-foreground:white;}}.button-dropdown-open{background-color:",p.brandDark,";.slds-icon-text-default{--slds-c-icon-color-foreground:white;}}}}}","");function _({submit:e,placeholder:t,disabled:r}){const[s,o]=(0,i.useState)(""),u=(0,i.useCallback)((e=>{o(e.target.value)}),[]),h=(0,i.useCallback)((()=>{e(s),o("")}),[e,s]),p=(0,i.useCallback)((e=>{e.keyCode===c.KEY_CODE_ENTER&&(h(),e.preventDefault())}),[h]);return(0,n.BX)("div",{className:"chat-footer",css:g,children:[(0,n.tZ)(a.Z,{className:"chat-input",placeholder:t,onChange:u,value:s,onKeyDown:p,disabled:r,maxLength:"2000"}),(0,n.tZ)(l.Z,{className:d()("slds-global-actions__item",0!==s.length&&"chat-input-button"),iconCategory:"utility",iconName:"send",iconSize:"medium",variant:"icon",iconVariant:"border-filled",onClick:h,disabled:0===s.length})]})}function f({message:e,avatar:t}){return(0,n.tZ)("li",{className:"slds-chat-listitem slds-chat-listitem_outbound",children:(0,n.tZ)("div",{className:d()("slds-chat-message",null==t&&"slds-chat-message_faux-avatar"),children:(0,n.tZ)("div",{className:"slds-chat-message__body",children:(0,n.BX)("div",{className:"chat-avatar-text-container",tabIndex:0,children:[t,(0,n.tZ)("div",{className:"slds-chat-message__text",children:(0,n.tZ)("span",{children:e})})]})})})})}var y=r(41553),b=r(94036);const C={Good:"GOOD",Bad:"BAD"},E={Human:"HUMAN",App:"APP"},S={thumbsUp:"thumbs-up",thumbsDown:"thumbs-down"};var T=r(76126),I=r(64587),v=r(6503),R=r(21526),w=r(42951),A=r(6343),D=r(44709),L=r(8429),M=r(1026),N=r(17599),O=r(24765),P=r(51164),x=r(57132);const Z=(0,h.iv)("z-index:",p.zIndexOverlay,";.negative-feedback-dropdown-body{padding:",p.spacingMedium,";line-height:",p.lineHeightText,";.negative-feedback-header{display:flex;align-items:center;}.negative-feedback-header-text{font-weight:",p.fontWeightBold,";color:",p.colorGray10,";margin-right:",p.spacingXxxSmall,";}.negative-feedback-checkbox{margin-bottom:",p.spacingXxxSmall,";margin-left:",p.spacingXxxSmall,";}.negative-text-feedback-area{margin-top:",p.spacingSmall,";.slds-textarea{line-height:1.75;}}}","");function F({generationId:e,source:t,applicationName:r,className:o,isVisible:u,highlightCallback:c}){const[h,p]=(0,i.useState)(!1),[g,m]=(0,i.useState)(!1),_=(0,i.useMemo)((()=>[L.Z.getLabel("LLMFeedback","inaccurate"),L.Z.getLabel("LLMFeedback","incomplete"),L.Z.getLabel("LLMFeedback","biased"),L.Z.getLabel("LLMFeedback","inappropriate"),L.Z.getLabel("LLMFeedback","other")]),[]),[f,y]=(0,i.useState)([]),[E,F]=(0,i.useState)(!1),[k,B]=(0,i.useState)(""),[W,G]=(0,i.useState)(""),[U,H]=(0,i.useState)(!1),[V,j]=(0,i.useState)(!1),q=e=>{c&&c(e),p(e)},z=async i=>{m(!0);const s=h&&E?k:"",n=i===C.Good,o={valueMap:{feedback_detail:{value:{action:n?S.thumbsUp:S.thumbsDown,tags:n?void 0:[...f]}}}},a=(e=>{let t;switch(r){case P.C:case P.B:t=e?N.Z.SUBMIT_POSITIVE_FEEDBACK_EINSTEIN_REPORT_GENERATOR:N.Z.SUBMIT_NEGATIVE_FEEDBACK_EINSTEIN_REPORT_GENERATOR;break;case x.t:t=e?N.Z.SUBMIT_POSITIVE_FEEDBACK_EINSTEIN_FORMULA_GENERATOR:N.Z.SUBMIT_NEGATIVE_FEEDBACK_EINSTEIN_FORMULA_GENERATOR}return t})(n);try{a&&M.Z.transactionStart(a.getValue()),await O.Z.postLlmFeedback({id:(0,D.D)(),generationId:e,feedback:i,feedbackText:s,source:t,applicationName:r,appFeedback:o}),H(!0),G(i===C.Good?"up":"down")}catch{j(!0)}finally{a&&M.Z.transactionEnd(a.getValue()),m(!1),q(!1)}},$=e=>{e.stopPropagation()},Q=(e,t,r,i)=>(0,n.tZ)(v.Z,{children:(0,n.tZ)(R.Z,{labels:{heading:t},onRequestClose:()=>i(),variant:r,className:`${e}-toast`,duration:3e3})});return(0,n.BX)(n.HY,{children:[(0,n.BX)("div",{onMouseOver:$,onFocus:$,children:[U&&Q("feedback-success",L.Z.getLabel("LLMFeedback","toastSuccessMessage"),"success",(()=>H(!1))),V&&Q("feedback-error",L.Z.getLabel("LLMFeedback","toastErrorMessage"),"error",(()=>j(!1)))]}),void 0===u||u||h?(0,n.tZ)("div",{className:d()("llm-feedback-container",o),children:(0,n.BX)(b.Z,{className:"feedback-button-group",children:[(0,n.tZ)(w.Z,{className:"feedback-button",active:"up"===W,variant:"icon",icon:(0,n.tZ)(s.Z,{category:"utility",name:"like",size:"x-small",inverse:"up"===W}),iconVariant:"container",onClick:()=>z(C.Good),disabled:h,"aria-pressed":"up"===W,"aria-live":"assertive"}),(0,n.tZ)(A.Z,{isOpen:h,body:(0,n.BX)("div",{className:"negative-feedback-dropdown-body",children:[(0,n.BX)("div",{className:"negative-feedback-header",children:[(0,n.tZ)("abbr",{className:"slds-required",title:"required",children:"*"}),(0,n.tZ)("span",{className:"negative-feedback-header-text",children:L.Z.getLabel("LLMFeedback","negativeFeedbackHeading")}),(0,n.tZ)(T.Z,{id:"negative-feedback-tooltip",align:"bottom",variant:"learnMore",content:L.Z.getLabel("LLMFeedback","negativeFeedbackTooltip")})]}),_.map((e=>{const t=`checkbox-${e.trim().split(" ")[0]}`;return(0,n.tZ)(I.Z,{id:t,className:"negative-feedback-checkbox",labels:{label:e},assistiveText:{label:e},onChange:()=>(e=>{const t=f.includes(e);y(t?f.filter((t=>t!==e)):[...f,e]),e===L.Z.getLabel("LLMFeedback","other")&&F(!E)})(e),checked:f.includes(e)},t)})),E&&(0,n.tZ)(a.Z,{name:"text-feedback-area",id:"negative-text-feedback-area",classNameContainer:"negative-text-feedback-area",label:L.Z.getLabel("LLMFeedback","tellUsMore"),placeholder:L.Z.getLabel("LLMFeedback","feedbackTextPlaceholder"),value:k,onChange:e=>B(e.target.value)})]}),footer:(0,n.BX)("div",{className:"slds-grid slds-grid_vertical-align-center",children:[(0,n.tZ)(l.Z,{className:"slds-col_bump-right",label:L.Z.getLabel("GenerativeAiGeneral","cancel"),onClick:()=>q(!1),disabled:g}),(0,n.tZ)(l.Z,{variant:"brand",label:L.Z.getLabel("GenerativeAiGeneral","submit"),onClick:()=>z(C.Bad),disabled:g})]}),className:"negative-feedback-dropdown",css:Z,ariaLabelledby:"negative-feedback-dropdown",position:"overflowBoundaryElement",align:"bottom left",onClose:()=>q(!1),onRequestClose:()=>q(!1),children:(0,n.tZ)(w.Z,{className:d()("feedback-button",h&&"button-dropdown-open"),active:"down"===W,variant:"icon",icon:(0,n.tZ)(s.Z,{category:"utility",name:"dislike",size:"x-small",inverse:"down"===W}),iconVariant:"container",onClick:()=>q(!h),"aria-pressed":"down"===W,"aria-live":"assertive"})})]})}):""]})}function k({avatar:e,children:t,actionButtons:r,applicationName:s,generationIds:o}){const[a,l]=(0,i.useState)(!1),[u,c]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1);(0,i.useEffect)((()=>{s&&o&&o.length>0&&c(!0)}),[s,o]);return(0,n.tZ)("li",{className:"slds-chat-listitem slds-chat-listitem_inbound",children:(0,n.tZ)("div",{className:d()("slds-chat-message",null==e&&"slds-chat-message_faux-avatar"),children:(0,n.BX)("div",{className:"slds-chat-message__body",children:[(0,n.BX)("div",{className:d()("chat-avatar-text-container",(a||h)&&u&&"highlight-feedback-content"),tabIndex:"0",onMouseOver:()=>{l(!0)},onFocus:()=>{},onMouseLeave:()=>{l(!1)},children:[u&&(0,n.tZ)(F,{isVisible:a,applicationName:s,generationId:o[o.length-1],source:E.Human,className:"inbound-chat-msg-feedback-element",highlightCallback:e=>{p(e)}}),e,t]}),r]})})})}function B({message:e,avatar:t,actions:r,applicationName:s,generationIds:o}){const[a,u]=(0,i.useState)(!1),d=[];return r.forEach(((e,t)=>{e.dropDownItems&&e.dropDownItems.length>0?(d.push((0,n.tZ)(l.Z,{className:"chatActionButton",label:e.actionLabel},t)),d.push((0,n.tZ)(y.Z,{buttonVariant:"icon",iconCategory:"utility",iconName:"down",iconVariant:a?"brand":"border-filled",onOpen:()=>{u(!0)},onClose:()=>{u(!1)},onSelect:t=>{e.actionHandler(t.actionParam)},options:e.dropDownItems,width:"xx-small"},t))):d.push((0,n.tZ)(l.Z,{className:"chatActionButton",onClick:()=>{e.actionHandler()},label:e.actionLabel},t))})),(0,n.tZ)(k,{avatar:t,applicationName:s,generationIds:o,actionButtons:(0,n.tZ)("div",{className:"action-button-container",children:(0,n.tZ)(b.Z,{className:"carousel-scroll-controls",children:d})}),children:(0,n.tZ)("div",{className:"slds-chat-message__text",children:(0,n.tZ)("span",{children:e})})})}function W({message:e,avatar:t}){return(0,n.tZ)(k,{avatar:t,children:(0,n.BX)("div",{className:"slds-chat-error-message slds-chat-message__text",children:[(0,n.tZ)(s.Z,{category:"utility",name:"error",colorVariant:"error",className:"error-icon"}),(0,n.tZ)("span",{children:e})]})})}var G=r(16582);function U({avatar:e,message:t}){return(0,n.tZ)(k,{avatar:e,children:(0,n.BX)("div",{className:"typing-indicator-message",children:[t,(0,n.BX)("div",{className:"sparkle-container",children:[(0,n.tZ)(s.Z,{path:`${G}#sparkle_enabled`,size:"xx-small",className:"sparkle-icon sparkle1"}),(0,n.tZ)(s.Z,{path:`${G}#sparkle_enabled`,size:"xx-small",className:"sparkle-icon sparkle2"}),(0,n.tZ)(s.Z,{path:`${G}#sparkle_enabled`,size:"xx-small",className:"sparkle-icon sparkle3"})]})]})})}function H({children:e}){return(0,n.tZ)("section",{className:"slds-chat",children:(0,n.tZ)("ul",{className:"slds-chat-list",children:e})})}var V=r(37681),j=r(61506),q=r(18111),z=r.n(q);function $({initialMessages:e,headerBarContent:t,onSendRequest:r,suggestedRequests:a,incomingMessages:l=[],placeholder:u,newUserInput:d,pendingStatus:c}){const[h,p]=(0,i.useState)([]),[g,y]=(0,i.useState)(""),[b,C]=(0,i.useState)(!1),E=(0,i.useRef)(null),S=[],T=j.Z.get(z()).getAppUser(),I=(0,n.tZ)(o,{children:(0,n.tZ)(s.Z,{category:"utility",name:"einstein",size:"small",className:"einstein-icon-avatar"})}),v=(0,n.tZ)(o,{children:T?.getProfilePhotoUrl()?(0,n.tZ)("img",{src:T.getProfilePhotoUrl(),alt:"User profile avatar",className:"user-icon-avatar"}):(0,n.tZ)(s.Z,{category:"standard",name:"people",size:"medium",className:"user-icon-avatar"})});e?.forEach((e=>{const t=(0,n.tZ)(k,{avatar:I,children:(0,n.tZ)("div",{className:"slds-chat-message__text",children:e})},window.crypto.randomUUID());S.push(t)})),h.forEach((e=>{let t;t=e.role===V.Z.USER.name?(0,n.tZ)(f,{message:e.message||"",avatar:v},e.id):null!=e.errorMessage&&null==e.message?(0,n.tZ)(W,{message:e.errorMessage||"",avatar:I},e.id):(0,n.tZ)(B,{message:(0,n.BX)(n.HY,{children:[(0,n.tZ)("span",{children:e.message}),(0,n.tZ)("div",{className:"highlight-message-content",children:e.highlightContent})]}),avatar:I,actions:e.actions||[],applicationName:e.applicationName,generationIds:e.generationIds},e.id),S.push(t)}));const R=(0,i.useCallback)((e=>{e.length&&!b&&(p([...h,{id:window.crypto.randomUUID(),message:e,role:V.Z.USER.name}]),y(e))}),[y,b,h]),w=e=>{e.then((e=>{y(""),p((t=>[...t,null!=e.errorMessage?{id:window.crypto.randomUUID(),role:V.Z.BOT.name,errorMessage:e.errorMessage}:{id:window.crypto.randomUUID(),message:e.description,highlightContent:e.highlightContent,role:V.Z.BOT.name,actions:e.actions,applicationName:e.applicationName,generationIds:e.generationIds}])),C(!1),null!=e.followUpHandler&&w(e.followUpHandler())})).catch((e=>{p((t=>[...t,{id:window.crypto.randomUUID(),role:V.Z.BOT.name,errorMessage:e.message}]))}))};return(0,i.useEffect)((()=>{!b&&h?.length&&y(d)}),[d]),(0,i.useEffect)((()=>{1===l.length&&null!=l[0].message&&R(l[0].message)}),[]),(0,i.useEffect)((()=>{l.length>1&&h.every((e=>e.id!==l[0].id))?p([...h,...l]):0===g.length||b||(C(!0),w(r(g)))}),[g,h,l,r,b]),(g?.length>0||c)&&S.push((0,n.tZ)(U,{avatar:I,message:c},`typing-${V.Z.BOT.name}`)),(0,i.useEffect)((()=>{!function(){const e=E?.current;e&&(e.scrollTop=e.scrollHeight)}()}),[g,h,S]),(0,n.BX)("div",{css:m,className:"chat-container",children:[(0,n.tZ)("div",{className:"chat-header-bar-content",children:t}),(0,n.tZ)("div",{ref:E,className:"chat-contents",children:(0,n.tZ)(H,{children:S})}),(0,n.tZ)(_,{submit:R,placeholder:u,disabled:null!==c})]})}},6039:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(32574),s=r.n(i),n=(r(81156),r(35944));function o({message:e,title:t,illustrationPath:r,illustrationClass:i,size:o,messageClass:a,titleClass:l,className:u}){return(0,n.BX)("div",{className:s().buildClassName("illustrationWithInlineText",u),children:[null!=r?(0,n.tZ)("figure",{children:(0,n.tZ)("img",{className:s().buildClassName("small"===o?"illustrationImageSmall":"illustrationImage",i),src:r,alt:t??e})}):(0,n.tZ)("div",{className:s().buildClassName("illustration",i)}),null!=t&&(0,n.tZ)("h2",{className:s().buildClassName("illustrationTitle",l),children:t}),(0,n.tZ)("div",{className:s().buildClassName("illustrationMessage",a),children:e})]})}},83733:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(67294),s=r(96486),n=r(79091),o=r.n(n),a=r(32574),l=r.n(a),u=r(35944);const d=(0,i.forwardRef)((function({widget:e,delegate:t,layout:r,previewMode:n,isViewportRendering:a,extraWidgetClassName:d,isSelected:c,isKeyboardMoveInProgress:h,showProxy:p,showResizeComp:g,disallowButtonInteraction:m,isHovered:_,locationStyle:f,onClick:y,onDoubleClick:b,onMouseDown:C,onMouseOver:E,onMouseOut:S,onMouseEnter:T,onMouseLeave:I,onDragEnter:v,onDragLeave:R,onDragStart:w,onStartResize:A,onUpdateViewport:D,selectWidgetHandle:L},M){const[N,O]=(0,i.useState)(!1),P=e.getUID(),x=t.canMoveWidget(e),Z=t.canResizeWidget(e),F=!a||N,k=()=>L(P,void 0),B=(0,i.useRef)(null),W=(0,i.useRef)(null);let G,U,H,V;(0,i.useImperativeHandle)(M,(()=>({get widgetContainer(){return B.current},get proxy(){return W.current}}))),(0,i.useEffect)((()=>{const e=new IntersectionObserver((([e])=>{e?.isIntersecting&&a&&O(!0),D(P,e?.isIntersecting)}));return B?.current&&e.observe(B.current),()=>{e.disconnect()}}),[D,P,a]),n||(x&&(G=(0,u.tZ)("div",{className:"move-component-button",onFocus:k,tabIndex:0,role:"button",children:(0,u.tZ)("div",{className:"slds-assistive-text",children:e.getMoveWidgetAssistiveText()})})),Z&&(U=(0,u.tZ)(o(),{ref:W,onStartResize:(0,s.partial)(A,P),isEmbedded:!0,style:f,tabbableHandles:e.getTabbableHandles(),showResizeComp:g,showProxy:p,assistiveTextProvider:e.getTabbableHandleAssistiveText.bind(e),selectAssociatedWidget:L,disallowButtonInteraction:m}))),n||h?(H={},V={}):(H={onMouseOver:(0,s.partial)(E,P),onMouseOut:S,onMouseEnter:(0,s.partial)(T,P),onMouseLeave:(0,s.partial)(I,P),onDragEnter:(0,s.partial)(v,P),onDragLeave:(0,s.partial)(R,P)},V={onClick:(0,s.partial)(y,P),onDoubleClick:(0,s.partial)(b,P),onMouseDown:(0,s.partial)(C,P),onDragStart:(0,s.partial)(w,P)});const j=l().buildClassName("widget-container",`widget-container_${P}`,c&&"active-container",_&&!n&&"hover",h&&c&&"keyboard-active",t.getAdditionalWidgetContainerClassName(e)),q=l().buildClassName("widget",c&&"active-widget",d);return(0,u.tZ)("div",{ref:B,className:j,style:f,...H,children:F?(0,u.BX)(u.HY,{children:[(0,u.BX)("div",{draggable:!n,className:q,...V,children:[e.render(n,f,k),G,e.renderActions(n)]}),U]}):(0,u.tZ)(u.HY,{})})}))},70021:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(35944);function s({href:e,children:t,...r}){return(0,i.tZ)("a",{...r,href:e,target:"_blank",rel:"noopener noreferrer",children:t})}},35368:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(61506),s=r(18111),n=r.n(s),o=r(70021),a=r(35944);function l(e){const t=i.Z.get(n()).getHelpArticleUrl(e.article);return(0,a.tZ)(o.Z,{href:t,className:e.className,children:e.children})}},3423:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});const i=(0,r(67294).createContext)({notifications:[],addNotification(e){}})},83577:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var i=r(67294),s=r(96486),n=r(84198),o=r(50130),a=r(83993),l=r(30077),u=r(5893),d=r.n(u),c=r(68653),h=r.n(c),p=r(8429),g=r(32574),m=r.n(g),_=r(40651),f=r(86866),y=r(21891),b=r(79646);class C extends b.Z{constructor(e,t){super(),this._getWidgetId=e,this._getStepId=t}getWidgetId(e){return this._getWidgetId(e)}getStepId(e,t){return this._getStepId(e,t)}}C.add("WIDGET",new C((e=>e),(function(e,t){const r=t.getWidget(e);if(r.hasLens())return r.getLensId()}))).add("STEP",new C((()=>{}),(e=>e))).finish();var E=r(76126),S=r(12205),T=r(78199),I=r(43121),v=(r(8291),r(35944));const R=(0,S.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(713)]).then(r.bind(r,37979))));function w(e,t){return e?(0,v.tZ)(E.Z,{content:p.Z.getLabel("DashboardIdeLauncher","openIde"),children:(0,v.tZ)(n.Z,{variant:"icon",className:"ide-widget-action",onClick:t,children:(0,v.tZ)(o.Z,{category:"utility",name:"apex"})})}):(0,v.tZ)(E.Z,{id:"open-ide",align:"top",content:p.Z.getLabel("DashboardIdeLauncher","openIdeTooltip"),children:(0,v.tZ)(n.Z,{label:p.Z.getLabel("DashboardIdeLauncher","openIde"),onClick:t})})}function A({id:e,idType:t,dashboardMetadata:r,assetExtendedMetadata:s,messageProvider:n,executeMutators:o,getRuntimeLens:a,startLens:l,source:u,additionalClassName:d,asWidgetAction:c=!1}){const[h,p]=(0,i.useState)(!1),g=(0,i.useContext)(T.Z);let _;h&&(_=(0,v.tZ)(R,{id:e,idType:t,dashboardMetadata:r,assetExtendedMetadata:s,messageProvider:n,executeMutators:o,getRuntimeLens:a,startLens:l,onClose:()=>p(!1)}));const f=m().buildClassName("dashboard-ide-launcher",d);return(0,v.BX)("div",{className:f,children:[_,w(c,(()=>{(0,I.Z)({name:"Launch",deprecatedContext:u,appInstanceId:g.appInstanceId}),p(!0)}))]})}var D=r(1726),L=r.n(D),M=r(52042),N=r(76358),O=r(34767),P=r.n(O);r(87578);class x extends i.Component{state={showMenuAction:!1};render(){let e,t,r;const i=[],a=[];let l=null;if(this.props.hasSingleWidgetSelected){let e,s;const a=this.props.selectedGridLayoutWidgets[0].getWidget();({isEnabled:t,message:e}=N.Z.canPerform(a,this.props.dashboardDescribe.getBindingsTraverserProvider())),t&&(s=this._editWidget.bind(this,a)),r=m().classSet({actionIcon:!0,edit:!0,disabled:!t}),i.push((0,v.tZ)("div",{className:r,"data-tooltip":e,children:(0,v.tZ)(n.Z,{variant:"icon",className:"edit-action-button",onClick:s,children:(0,v.tZ)(o.Z,{category:"utility",name:"edit"})})},"editIcon"),(0,v.tZ)(A,{id:this.props.selectedGridLayoutWidgets[0].getWidget().getId(),idType:C.WIDGET,dashboardMetadata:this.props.dashboardDescribe.getMetadataHolder().getMetadata(),assetExtendedMetadata:this.props.dashboardDescribe.getMetadataHolder().getAssetExtendedMetadata(),messageProvider:this.props.messageProvider,executeMutators:this.props.executeMutators,getRuntimeLens:this.props.getLens,startLens:this.props.startLens,source:"widgetActions",additionalClassName:"actionIcon",asWidgetAction:!0},"ideIcon"))}const{isEnabled:u,message:c}=M.Z.canPerform(this.props.selectedGridLayoutWidgets.map((e=>e.getWidget())));if(r=m().classSet({actionIcon:!0,clone:!0,disabled:!u}),i.push(this._getCopyAction(this.props.hasSingleWidgetSelected),(0,v.tZ)("div",{className:"actionIcon delete","data-tooltip":p.Z.getLabel("DashboardWidgetDelete","deleteWidget"),children:(0,v.tZ)(n.Z,{variant:"icon",className:"delete-action-button",onClick:this.props.deleteWidgetAction,children:(0,v.tZ)(o.Z,{category:"utility",name:"delete"})})},"deleteIcon")),i.push(this._getMenuAction()),this.props.hasSingleWidgetSelected){const t=null!=this.props.selectedGridLayoutWidgets[0]?this.props.selectedGridLayoutWidgets[0].getWidget():void 0;if(this.state.showMenuAction&&(a.push(this._getDuplicateAction(u,c)),null!=t&&y.Z.fromCode(t.getType()).getDefinition().hasStep()&&t.hasLens())){e=t.getLens();const r=e.getId();if(!e.isGlobal()&&!this.props.getLens(r).hasError()){a.push(d().Item.newItem("properties",p.Z.getLabel("DashboardWidgetAction","stepProperties"),"settings"));f.Z.fromCode(e.getType()).getDefinition().canClone(e)&&a.push(d().Item.newItem("clone",p.Z.getLabel("DashboardWidgetAction","cloneStep"),"clone"))}this._areSelectedWidgetsDetachable()&&a.push(d().Item.newItem("detach",p.Z.getLabel("DashboardWidgetAction","detachStep"),"remove-step"))}}else this.state.showMenuAction&&(a.push(this._getDuplicateAction(u,c)),this._areSelectedWidgetsDetachable()&&a.push(d().Item.newItem("detach",p.Z.getLabel("DashboardWidgetAction","detachSteps"),"remove-step")));return(0,s.isEmpty)(a)||(l=(0,v.tZ)(h(),{onClick:this._onMenuItemClick.bind(this,e),onBlur:this._onMenuBlur.bind(this),items:a,getTargetEl:this._getActionMenuEl.bind(this),menuPosition:d().MenuPosition.ABOVE,additionalClassName:"menuActions"})),(0,v.BX)("div",{className:"widget-actions",children:[(0,v.tZ)(P(),{additionalClassName:"widget-actions-group",moveWidgetAction:this.props.moveWidgetAction,cloneWidgetAction:this.props.cloneWidgetAction,selectedGridLayoutWidgets:this.props.selectedGridLayoutWidgets,dashboardDescribe:this.props.dashboardDescribe}),(0,v.BX)("div",{className:"widget-actions-group",children:[i,l]})]})}_getMenuAction(){return(0,v.tZ)("div",{ref:this._setActionMenuEl,className:"actionIcon menuActions","data-tooltip":p.Z.getLabel("DashboardWidgetAction","menuActions"),children:(0,v.tZ)(n.Z,{variant:"icon",className:"menu-action-button",onClick:this._toggleMenuAction.bind(this),children:(0,v.tZ)(o.Z,{category:"utility",name:"threedots"})})},"menuActionsIcon")}_getCopyAction(e=!0){const t=e?"copySingleWidgetAction":"copyMultipleWidgetsAction";return(0,v.tZ)("div",{className:"actionIcon copyActions","data-tooltip":p.Z.getLabel("DashboardWidgetAction",t),children:(0,v.tZ)(n.Z,{className:"copy-action-button",onClick:this.props.copyWidgetAction,variant:"icon",children:(0,v.tZ)(o.Z,{category:"utility",name:"copy_to_clipboard"})})},"copyActionsIcon")}_getDuplicateAction(e,t){return d().Item.newItem("duplicate",p.Z.getLabel("DashboardWidgetAction","duplicateWidget"),"clone",t,!e)}_toggleMenuAction(){this.setState({showMenuAction:!this.state.showMenuAction})}_onMenuBlur(e){(0,l.isOrIn)(this._getActionMenuEl(),e.target)||this._toggleMenuAction()}_onMenuItemClick(e,t,r){switch(t.getId()){case"detach":this._onClickDetachStep();break;case"properties":this.props.showStepProperties(e.getId()),this.setState({showMenuAction:!1});break;case"clone":this.props.cloneStep(e);break;case"duplicate":this.props.duplicateWidgetAction(r),this.setState({showMenuAction:!1})}}_areSelectedWidgetsDetachable(){let e=!0;return this.props.selectedGridLayoutWidgets.forEach((t=>{const r=t.getWidget();e=e&&y.Z.fromCode(r.getType()).getDefinition().hasStep()&&r.hasLens()})),e}_onClickDetachStep(){this._onDetachStepFromWidget(this.props.selectedGridLayoutWidgets)}_onDetachStepFromWidget(e){const t=new(L())(this.props.executeMutators);this._widgetLensMap=new Map;for(const t of e)this._widgetLensMap.set(t.getUID(),this.props.getLens(t.getWidget().getLensId()));t.detach(e,this._widgetLensMap)}_editWidget(e){if(y.Z.fromCode(e.getType())===y.Z.COMPONENT){const t=e.getParameter("source");if(_.Z.fromCode(t.type)===_.Z.COMPONENT)return void this.props.editComponent((0,a.Oz)(t.name,t.namespace))}this.props.editStep(e,e.hasLens()?e.getLens():void 0)}_setActionMenuEl=e=>{this._actionMenuEl=e};_getActionMenuEl(){return this._actionMenuEl}}},20957:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var i=r(67294),s=r(6343),n=r(70982),o=r.n(n),a=r(49720),l=r(78199),u=r(80012),d=r(70917),c=r(97761);const h=(0,d.iv)("padding:",c.spacingSmall," ",c.spacingMedium,";",""),p={name:"14adpk5",styles:"width:100%;height:inherit;>div{width:100%;height:inherit;}"},g={name:"gth0vq",styles:"height:inherit"};var m=r(35944);const _=1e3,f=500,y="custom-tooltip",b=o().__getPrivateApi().getSdk().ThemeFactory.getInstance().getDefaultTheme();function C({getTooltipContent:e,children:t,heading:r,align:n="top",getTargetElement:o,onBlur:C,className:E,shouldDisableHover:S}){const T=(0,i.useContext)(l.Z),I=(0,i.useContext)(u.Z),[v,R]=(0,i.useState)(!1),w=(0,i.useRef)(!1),A=(0,i.useRef)(null),[D,L]=(0,i.useState)(!S),M=(0,i.useCallback)((()=>{v||(D?A.current=setTimeout((()=>{R(!0)}),_):R(!0))}),[v,D]),N=(0,i.useCallback)((()=>{v&&(w.current=!1,R(!1),L(!0))}),[v]),O=(0,i.useCallback)((e=>{e.relatedTarget instanceof HTMLElement&&"pagespinner"===e.relatedTarget.getAttribute("class")||(null!=A.current&&(clearTimeout(A.current),A.current=null),v&&setTimeout((()=>{w.current||R(!1)}),f))}),[v]),P=(0,i.useCallback)((e=>{e.target!==e.currentTarget&&e.currentTarget.contains(e.target)||N()}),[N]),x=(0,i.useCallback)(((e,t)=>{(e||"cancel"===t?.trigger)&&N()}),[N]),Z=(0,i.useCallback)((e=>{e.charCode!==a.KEY_CODE_ENTER&&e.charCode!==a.KEY_CODE_SPACE||M()}),[M]);(0,i.useEffect)((()=>()=>{null!=A.current&&clearTimeout(A.current)}),[]);const F={};F.onClick=M,F.onKeyPress=Z,D&&(F.onMouseOver=M,F.onMouseOut=O);const k={};D&&(k.onMouseEnter=()=>{w.current=!0},k.onMouseLeave=P);const B={};return null!=o&&(B.onRequestTargetElement=o),(0,m.tZ)("div",{id:"custom-tooltip",className:E,css:p,children:(0,m.tZ)(s.Z,{id:y,align:n,ariaLabelledby:y,css:(W=b.getToolTipBackgroundColor().toRGBAString(),(0,d.iv)("width:fit-content;background-color:",W,";button.slds-popover__close{color:",c.colorTextIconInverse,";:active{color:",c.colorTextIconInverseActive,";}:focus{outline:0;box-shadow:0 0 3px ",c.colorBorderButtonFocusInverse,";border:1px solid ",c.colorBorderButtonFocusInverse,";}}&.slds-popover{border:0;}.slds-popover__body{padding:0px;}","")),body:v&&(0,m.tZ)("div",{css:h,"data-custom-tooltip":!0,onBlur:e=>{C?.(e,v)},...k,children:(0,m.tZ)(l.Z.Provider,{value:T,children:(0,m.tZ)(u.Z.Provider,{value:I,children:e()})})}),isOpen:v,hasNoCloseButton:D,position:"overflowBoundaryElement",onRequestClose:x,heading:r,...B,children:(0,m.tZ)("div",{className:"custom-tooltip-trigger",css:g,...F,onBlur:e=>{C?.(e,v)},role:"button",tabIndex:0,onFocus:()=>{D&&!S&&(M(),L(!1))},children:t})})});var W}},10379:(e,t,r)=>{"use strict";r.d(t,{Z:()=>L});var i=r(67294),s=r(18111),n=r.n(s),o=r(60906),a=r.n(o),l=r(5893),u=r.n(l),d=r(8902),c=r.n(d),h=r(8429),p=r(6798),g=r.n(p),m=r(28388),_=r.n(m),f=r(40604),y=r.n(f),b=r(46747),C=r.n(b),E=r(61506),S=r(32574),T=r.n(S),I=r(11569),v=r.n(I),R=r(99709),w=r(15572),A=r.n(w),D=(r(82634),r(35944));class L extends i.Component{constructor(e){super(e),this.state={isNamingNewPage:!1,showActionMenu:!1}}render(){return(0,D.BX)("div",{className:"page-creator",children:[(0,D.tZ)(a(),{className:"add-button-group",canClickButton:this._canClickAddButton,children:this._getAddPageButton()}),(0,D.tZ)(R.Z,{pagesToDisplay:this.props.currentLayout.getPages(),currentLayout:this.props.currentLayout,currentPageIndex:this.props.currentPageIndex,onSelectPage:this.props.onSelectPage,getActionMenuItems:this._getMenuItems,onActionMenuItemClick:this._onMenuItemClick,styleProvider:(new(A())).setPageTabWidth(128),showHiddenPages:!0}),this._renderPageDeleteConfirmationModal(),this._renderPageNamingModal()]})}_renderPageDeleteConfirmationModal(){const{deletingPageIndex:e}=this.state;if(null!=e)return new(g())(this._closeDeleteConfirmationModal.bind(this)).makeConfirmationModal(h.Z.getLabel("InsightsConfirmDialog","warningTitle"),h.Z.getLabel("DashboardPageActions","deletePage",this._getPage(e).getLabel()),_().makeButton(this._continueDeletePage,h.Z.getLabel("InsightsConfirmDialog","continueButton"),1,y().Primary,"generic-btn",!1,"continue-btn"),"delete-page-warning")}_renderPageNamingModal(){if(null==this.state.renamingPageIndex&&!this.state.isNamingNewPage)return;const[e,t,r]=this.state.isNamingNewPage?["addName",this._getPageLabel(),"addPageButton"]:["renamePage",this._getPageLabel(this.state.renamingPageIndex),"renamePageButton"];return(0,D.tZ)(C(),{fullPage:!0,hasCancel:!0,onBlur:this._closeNamingModal,title:h.Z.getLabel("DashboardPage",e),className:"page-naming-modal",buttons:[_().makeButton(this._onNamingComplete,h.Z.getLabel("DashboardPage",r),2,y().Primary,"select-btn",!1,"select-button")],children:(0,D.BX)("div",{children:[(0,D.tZ)("label",{children:h.Z.getLabel("DashboardPage","name")}),(0,D.tZ)("input",{type:"text",onFocus:this._onFocusInput,onBlur:this._onBlur,autoFocus:!0,className:"page-rename-input",disabled:!1,defaultValue:t})]})})}_onFocusInput=e=>{T().selectEntireInputContents(e.target)};_getAddPageButton(){const e=T().classSet({"add-button":!0,disabled:!this._canClickAddButton()});let t;return this._canClickAddButton()||(t=h.Z.getLabel("DashboardPage","disabledTooltip",E.Z.get(n()).getMaxDashboardPages())),(0,D.tZ)("button",{className:e,onClick:this._onBeginAddNewPage,"data-tooltip":t,children:(0,D.tZ)("div",{className:"button-icon-wrapper",children:(0,D.tZ)(c(),{iconName:"plus"})})})}_getPageLabel(e){let t;return null!=e&&this.props.currentLayout.hasPage(e)&&(t=this._getPage(e).getLabel()),t||this._generateDefaultPageLabel()}_getMenuItems=e=>{const t=this.props.currentLayout.getPages().length,r=E.Z.get(n()).getMaxDashboardPages(),i=[];return 0!==e&&i.push(this._getDropDownMenuItem(v().MOVE_LEFT)),e!==t-1&&i.push(this._getDropDownMenuItem(v().MOVE_RIGHT)),i.push(this._getDropDownMenuItem(v().RENAME),this._getDropDownMenuItem(this.props.currentLayout.getPage(e).isNavigationHidden()?v().SHOW:v().HIDE)),t<r&&i.push(this._getDropDownMenuItem(v().CLONE)),t>1&&i.push(this._getDropDownMenuItem(v().DELETE)),i};_getDropDownMenuItem(e){return u().Item.newItem(e.getId(),e.getLabel(),e.getIconName())}_onMenuItemClick=(e,t)=>{switch(t.getId()){case v().DELETE.getId():this._beginDeletePage(e);break;case v().MOVE_LEFT.getId():this._movePage(e,e-1);break;case v().MOVE_RIGHT.getId():this._movePage(e,e+1);break;case v().RENAME.getId():this._showRenamingModal(e);break;case v().CLONE.getId():this._clonePage(e);break;case v().HIDE.getId():case v().SHOW.getId():this._togglePageVisiblity(e)}};_canClickAddButton=()=>this.props.currentLayout.getPages().length<E.Z.get(n()).getMaxDashboardPages();_onBeginAddNewPage=e=>{this.setState({isNamingNewPage:!0})};_deletePage(e){1!==this.props.currentLayout.getPages().length&&this.props.pageActions.deletePage(e)}_movePage(e,t){this.props.pageActions.movePage(e,t)}_clonePage(e){this.props.pageActions.clonePage(e)}_togglePageVisiblity(e){this.props.pageActions.togglePageVisiblity(e)}_generateDefaultPageLabel(){return this.props.metadataHolder.generateDefaultPageLabel()}_beginDeletePage(e){this._getPage(e).getWidgets().some((e=>!e.isOnMultiplePages()))?this.setState({deletingPageIndex:e}):this._deletePage(e)}_continueDeletePage=()=>{const{deletingPageIndex:e}=this.state;if(null==e)throw new Error("Delete index should not be set to null");this._deletePage(e),this.setState({deletingPageIndex:void 0})};_showRenamingModal(e){this.setState({renamingPageIndex:e})}_onNamingComplete=()=>{this.state.isNamingNewPage?this.props.pageActions.addPageAndUseMutators(this.state.pageRenameValue):this.props.pageActions.renamePage(this.state.renamingPageIndex,this.state.pageRenameValue),this._closeNamingModal()};_onBlur=e=>{this.setState({pageRenameValue:e.target.value})};_closeNamingModal=()=>{this.setState({renamingPageIndex:void 0,isNamingNewPage:!1})};_closeDeleteConfirmationModal(){this.setState({deletingPageIndex:void 0})}_getPage(e){return this.props.currentLayout.getPage(e)}}},99709:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var i=r(67294),s=r(96486),n=r.n(s),o=r(70351),a=r.n(o),l=r(60906),u=r.n(l),d=r(68653),c=r.n(d),h=r(5893),p=r.n(h),g=r(8902),m=r.n(g),_=r(8429),f=r(32574),y=r.n(f),b=r(30077),C=r(49720),E=r(69499),S=r(11569),T=r.n(S),I=r(15572),v=r.n(I),R=(r(22651),r(35944));class w extends i.Component{static defaultProps={styleProvider:new(v())};state={dropdownMenuId:void 0,numberOfPageTabs:null!=this.props.numberOfPageTabs?this.props.numberOfPageTabs:this.props.pagesToDisplay.length,showOverflowMenuItems:!1};_menuIcons=new Map;_pageButtons=new Map;UNSAFE_componentWillMount(){return window.addEventListener("resize",n().debounce(this._onWindowResize,300))}componentWillUnmount(){return window.removeEventListener("resize",this._onWindowResize)}componentDidMount(){this.setState({numberOfPageTabs:this._calculateNumberOfPages(this.props)})}componentDidUpdate(e){this.props.numberOfPageTabs===e.numberOfPageTabs&&this.props.currentPageIndex===e.currentPageIndex&&this.props.pagesToDisplay.length===e.pagesToDisplay.length||this.setState({numberOfPageTabs:this._calculateNumberOfPages(this.props)})}render(){const e=this._getPageButtonComps();return n().isEmpty(e)?(0,R.tZ)("div",{className:"no-pages",children:_.Z.getLabel("DashboardPage","allPagesHiddenMessage")}):(0,R.BX)("div",{className:"page-navigator",ref:this._setNavigatorRef,role:"tablist",children:[(0,R.tZ)(u(),{className:"page-buttons-group",defaultIndex:this._getActivePageIndex(),shouldReset:!0,canClickButton:this._canClickButton,children:e}),this._getOverflowMenuComp(),this._getPageDropdown(this.state.dropdownMenuId)]})}_getPageButtonComps(){const e=new Set,t=this.props.pagesToDisplay.slice(0,Math.min(this.props.pagesToDisplay.length,this.state.numberOfPageTabs)).map((t=>(e.add(t.getIndex()),this._getPageButton(t))));if(this.props.currentPageIndex>=this.state.numberOfPageTabs&&!e.has(this.props.currentPageIndex)){const e=this.props.currentLayout.getPage(this.props.currentPageIndex),r=this._getPageButton(e);r&&t.push(r)}return t}_getPageButton(e){const t=e.getIndex();if(this.props.currentLayout.getPage(t).isNavigationHidden()&&!this.props.showHiddenPages)return;const r=e.getLabel();return(0,R.tZ)("div",{ref:n().partial(this._setPageButtonRef,t),className:"page-button",style:this._getPageStyle(t),onClick:this._onSelectPage.bind(this,e.getName()),role:"tab",tabIndex:"0",onKeyDown:t=>{t.keyCode!==C.KEY_CODE_ENTER&&t.keyCode!==C.KEY_CODE_SPACE||this._onSelectPage(e.getName())},"aria-current":t===this._getActivePageIndex()?"page":void 0,"aria-selected":t===this._getActivePageIndex(),children:(0,R.BX)("div",{className:"page-button-content",children:[this._getHideComp(t),(0,R.tZ)("div",{className:"page-button-label",children:r}),this._getPageDropdownArrowComp(t)]})},`page_${t}`)}_getHideComp(e){if(this.props.currentLayout.getPage(e).isNavigationHidden())return(0,R.tZ)("div",{className:"button-icon-wrapper",children:(0,R.tZ)(m(),{iconName:"hide"})})}_getPageDropdownArrowComp(e){if(null!=this.props.getActionMenuItems)return(0,R.tZ)("div",{ref:n().partial(this._setMenuIconRef,e),className:"button-icon-wrapper",onClick:n().partial(this._onClickPageDropdownArrow,e),children:(0,R.tZ)(m(),{iconName:"chevrondown"})})}_onClickPageDropdownArrow=(e,t)=>{this._toggleDropDownMenu(e)};_toggleDropDownMenu(e){this.setState({dropdownMenuId:this.state.dropdownMenuId===e?void 0:e})}_getActivePageIndex(){const e=n().findIndex(this.props.pagesToDisplay,(e=>e.getIndex()===this.props.currentPageIndex));return e>-1&&e<this.state.numberOfPageTabs?e:this.state.numberOfPageTabs}_canClickButton(){return!0}_getOverflowMenuComp(){if(this.state.numberOfPageTabs>=this.props.pagesToDisplay.length)return;let e,t;this.state.showOverflowMenuItems&&(e=(0,R.tZ)(c(),{onClick:this._onOverflowMenuItemClick.bind(this),onBlur:this._onBlurOverflowMenu,items:this._getOverflowMenuItems(),getTargetEl:()=>a()(this._overflowButtonEl),anchorPosition:p().AnchorPosition.AUTOMATIC,additionalClassName:"overflow-menu"})),this.props.styleProvider&&(t=this.props.styleProvider.getPageTabStyles());return(0,R.tZ)(u(),{className:"page-buttons-group more",defaultIndex:-1,shouldReset:!0,canClickButton:this._canClickButton,children:(0,R.BX)("div",{ref:this._setOverflowButtonRef,style:t,className:y().buildClassName("page-button","more"),onClick:this._toggleOverflowMenu,role:"tab",onKeyDown:e=>{e.keyCode!==C.KEY_CODE_ENTER&&e.keyCode!==C.KEY_CODE_SPACE||this._toggleOverflowMenu()},tabIndex:"0",children:[(0,R.BX)("div",{className:"page-button-content",children:[(0,R.tZ)("div",{className:"page-button-label",children:_.Z.getLabel("DashboardPage","moreButton")}),(0,R.tZ)("div",{className:"button-icon-wrapper",children:(0,R.tZ)(m(),{iconName:"chevrondown"})})]}),e]})})}_onOverflowMenuItemClick(e){this._onSelectPage(e.getId())}_getPageDropdown(e){if(null==e)return;const{getActionMenuItems:t}=this.props;if(!t)throw new Error("Action menu items are not defined");return(0,R.tZ)(c(),{ref:`menu_${e}`,onClick:this._onDropDownMenuActionItemClick.bind(this,e),onBlur:this._onBlurMenu,items:t(e),getTargetEl:n().partial((e=>a()(this._menuIcons.get(e))),e),anchorPosition:p().AnchorPosition.AUTOMATIC,additionalClassName:"pages-drop-down-menu-container"})}_onDropDownMenuActionItemClick(e,t){void 0!==this.props.onActionMenuItemClick&&(this.props.onActionMenuItemClick(e,t),this._toggleDropDownMenu(void 0))}_onSelectPage(e){this.props.currentPageIndex!==this.props.currentLayout.getPageById(e).getIndex()&&this.props.onSelectPage(e)}_onBlurMenu=e=>{const{dropdownMenuId:t}=this.state;if(null==t)throw new Error("Cannot blur menu when dropdownMenuId is not defined");(0,b.isOrIn)(a()(this._pageButtons.get(t)),e.target)||this._toggleDropDownMenu(void 0)};_onBlurOverflowMenu=e=>{this._toggleOverflowMenu(),e?.stopPropagation()};_getOverflowMenuItems(){const e=[],t=this.props.pagesToDisplay.slice(this.state.numberOfPageTabs);for(let r=0;r<t.length;r++){const i=t[r];i.getIndex()!==this.props.currentPageIndex&&e.push(p().Item.newItem(i.getName(),i.getLabel(),i.isNavigationHidden()?T().HIDE.getIconName():void 0,i.getLabel()))}return e}_toggleOverflowMenu=()=>{this.setState({showOverflowMenuItems:!this.state.showOverflowMenuItems})};_getPageStyle(e){if(void 0!==this.props.styleProvider)return this.props.currentPageIndex===e?this.props.styleProvider.getSelectedTabStyles():this.props.styleProvider.getPageTabStyles()}_calculateNumberOfPages(e){let t;const r=e.numberOfPageTabs;if(null!=r)t=r;else{const r=this._navigatorEl;let i;if(null!=r){const e=E.getWidth(r);if(0!==e)i=e;else if(null!=r.offsetParent){const e=E.getWidth(r.offsetParent);0!==e&&(i=e)}}null==i&&(i=0);const s=this.props.styleProvider.getPageTabWidth();t=Math.floor(i/s),e.pagesToDisplay.length>t&&t--}const i=e.pagesToDisplay[t-1];return null!=i&&e.currentPageIndex>i.getIndex()&&!this.props.currentLayout.getPage(e.currentPageIndex).isNavigationHidden()&&t--,t}_onWindowResize=()=>{this.setState({numberOfPageTabs:this._calculateNumberOfPages(this.props)})};_setNavigatorRef=e=>{this._navigatorEl=e};_setPageButtonRef=(e,t)=>{this._pageButtons.set(e,t)};_setMenuIconRef=(e,t)=>{this._menuIcons.set(e,t)};_setOverflowButtonRef=e=>{this._overflowButtonEl=e}}},41989:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var i=r(67294),s=r(96486),n=r(67710),o=r(12205),a=r(63038),l=r.n(a),u=r(8429),d=r(35368),c=r(45772),h=r(39918),p=r(33854),g=r(85931),m=r(84198),_=r(35944);function f({title:e,body:t,modalType:r,cancelLabel:i,onCancel:s,confirmLabel:n,onConfirm:o}){return(0,_.tZ)(g.Z,{isOpen:!0,heading:e,footer:(0,_.BX)(_.HY,{children:[(0,_.tZ)(m.Z,{label:i??u.Z.getLabel("InsightsConfirmDialog","cancelButton"),onClick:s,className:"cancel-btn"}),(0,_.tZ)(m.Z,{label:n??u.Z.getLabel("InsightsConfirmDialog","continueButton"),onClick:o,className:"confirm-btn",variant:"brand"})]}),onRequestClose:s,prompt:r.code,containerClassName:"confirm-modal",children:(0,_.tZ)("div",{className:"slds-m-around_medium",children:t})})}var y=r(69370);class b extends y.Z{}b.add("SUCCESS","success",new b).add("WARNING","warning",new b).add("ERROR","error",new b).add("WRENCH","wrench",new b).add("OFFLINE","offine",new b).add("INFO","info",new b).finish();var C=r(90493),E=r(78199),S=r(86866),T=r(96487);r(24430);const I=(0,o.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(619)]).then(r.bind(r,33473)))),v=(0,o.Z)((()=>Promise.resolve().then((function(){var e=new Error("Cannot find module 'Dashboard/src/view/component/DashboardQueryBuilderRC.coffee'");throw e.code="MODULE_NOT_FOUND",e}))));function R({selectedLens:e,selectedWidget:t,lensActionsDelegate:r,dashboardLens:o,onCloseModal:a,getDashboardMetadata:g,dashboardRuntime:m}){const[y,R]=(0,i.useState)(!1),[w,A]=(0,i.useState)(!0),{router:D}=(0,i.useContext)(h.Z),L=(0,i.useContext)(E.Z),M=()=>R(!0),N=()=>A(!1);(0,i.useEffect)((()=>{w||A(!0)}),[e]);const O=e=>{let t;return t=null==e?"Warning":e,t},P=e=>{let t;t=null==e?[]:e;const r=t.join("\n");return w&&(0,_.tZ)(f,{title:O(),body:(0,_.BX)("span",{children:[(0,_.tZ)("div",{className:"warning-text",children:r}),(0,_.tZ)(d.Z,{article:c.Z.EDIT_STEPS,className:"learn-more-link",children:u.Z.getLabel("DashboardWidgetAction","learnMore")})]}),modalType:b.WARNING,onConfirm:M.bind(this),onCancel:N.bind(this)})},x=e.getAction(),Z=((e,t)=>{if(e!==T.Z.EDIT)return;const r=[];return t.shouldShowWarning(o)&&r.push(u.Z.getLabel("DashboardStepPanel","confirmEditingStep")),t.shouldShowSAQLUpgradeWarning(o)&&r.push(u.Z.getLabel("DashboardStepPanel","confirmSAQLUpgrade")),r})(x,r);let F;if(y||(0,s.isEmpty)(Z))if(x!==T.Z.EDIT&&x!==T.Z.EXPLORE||o.getLensMetadata().getType()!==S.Z.DIRECT_REPORT.getCode())F=o.getLensMetadata().getType()===S.Z.STATIC.getCode()?(0,_.tZ)(I,{addStep:r.clone.bind(r,o),updateStep:r.editStaticFlexStep.bind(r,o.getId()),onCloseModal:a,backButtonHandler:a,dashboardMetadata:g(),lensActionsDelegate:r,selectedLens:e,stepJson:o.getLensMetadata().getJson()}):(0,_.tZ)(v,{dashboardMetadata:g(),addStep:(0,s.bind)(r.clone,r,o),updateStep:(0,s.bind)(r.edit,r,o,t),onCloseModal:a,selectedLens:e,backButtonHandler:a,lensActionsDelegate:r,loggingCategories:["step",x.getName().toLowerCase()],dashboardRuntime:m,appContext:L});else{const e=x===T.Z.EDIT?"edit":"view";D.route(new p.Z({baseRoute:C.REPORT,instanceId:o.getReportId(),extendedHash:e})),a()}else F=P(Z);return(0,_.tZ)(l(),{name:`StepAction_${e.getAction().getName()}`,level:n.Z.FullWithPerf,children:(0,_.tZ)("div",{className:"lens-actions-modal",children:F})})}},9636:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(67294),s=r(96486),n=r(1611),o=r(75137);class a extends o.Z{constructor(e){super(),this._rows=e}_select(e,t,r){return this._rows}}var l=r(59816),u=r.n(l),d=r(69985);class c extends i.Component{state={widgetSelectedRows:[],stepSelectedRows:[]};componentDidMount(){this._removeSelectionHandler=this.props.runtimeSubscriber.addSelectionHandler(this._onSelection)}componentDidUpdate(e){e.runtimeSubscriber!==this.props.runtimeSubscriber&&(this._removeSelectionHandler?.(),this._removeSelectionHandler=this.props.runtimeSubscriber.addSelectionHandler(this._onSelection))}componentWillUnmount(){this._removeSelectionHandler?.()}render(){const{widgetComponentClass:e,...t}=this.props;return(0,i.createElement)(e,{...t,stepSelectedRows:this.state.stepSelectedRows,widgetSelectedRows:this.state.widgetSelectedRows,setSelection:this._setSelection.bind(this),updateStepSelection:this._updateStepSelection.bind(this),resetWidgetToStepSelection:this._resetWidgetToStepSelection.bind(this),isRowSelected:this._isRowSelected.bind(this)})}_onSelection=e=>{const t=this.props.widgetTypeDefinition.getNewWidgetSelectedRowsAfterSelection(this.props.originalWidget,e.getData());this.setState({stepSelectedRows:t,widgetSelectedRows:t})};_setSelection(e,t=this.props.resultMessage.getData()){const r=e.select(t,this.props.resultMessage.getMetadata(),this.props.widget.getLens()?.getSelectMode()),i={widgetSelectedRows:r};this.props.widgetTypeDefinition.shouldUpdateInstantly(this.props.originalWidget,this.props.viewMode)&&(this._publishSelectionMessage(e),i.stepSelectedRows=r),this.setState(i)}_updateStepSelection(){this._publishSelectionMessage(new a(this.state.widgetSelectedRows)),this.setState({stepSelectedRows:this.state.widgetSelectedRows})}_resetWidgetToStepSelection(){this.setState({widgetSelectedRows:this.state.stepSelectedRows})}_isRowSelected(e){return this.state.widgetSelectedRows.some((t=>this._doRowsMatch(t,e)))}_doRowsMatch(e,t){const r=this.props.resultMessage.getMetadata();if(null==r)throw new Error("Results metadata required.");const i=r.getGroupings();return((0,s.isEmpty)(i)?r.getColumns(n.Z.DIMENSION).slice(0,1):i).every((r=>(0,s.isEqual)(e[r.getName()],t[r.getName()])))}_publishSelectionMessage(e){this.props.runtimeSubscriber.getLensConnector().callCapabilityMethod(u().SELECTION,"onSelection",[e,d.Z.USER])}}},62627:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(67294),s=r(8902),n=r.n(s),o=r(32574),a=r.n(o),l=(r(21686),r(35944));function u(e){const{onLoaded:t}=e;(0,i.useEffect)((()=>{t?.()}),[t]);const r=a().classSet({"widget-placeholder":!0,small:e.widgetRowSpan<3,widgetReady:!0,finalState:!0}),s=e.widgetType.getDefinition(),o=(0,l.tZ)(n(),{iconName:s.getIconUrl()},"icon");let u;if(null!=e.children)u=e.children;else if(e.isViewMode)u=o;else{const t=[o];e.widgetColumnSpan>1&&(u=t.push((0,l.BX)("span",{className:"widget-type-label",children:[" ",e.widgetType.getLabel()," "]},"label"))),u=s.isPlaceholderClickable()?(0,l.tZ)("button",{type:"button",onClick:e.onClick,children:t}):t}return(0,l.tZ)("div",{className:r,children:u})}},177:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Es});var i=r(96486),s=r(67294),n=r(70982),o=r.n(n),a=r(61506),l=r(16045),u=r(69008),d=r(45131),c=r(84938),h=r(83993),p=r(32350),g=r.n(p),m=r(90424),_=r.n(m),f=r(40651),y=r(78199),b=r(56379),C=r(73896),E=r(21891),S=r(41992),T=r(59816),I=r.n(T),v=r(53581),R=r(67427),w=r(2355),A=r(69985),D=r(53941),L=r(47333);class M{constructor(e,t){this._lensIds=new Set(e),this._onReady=t}reset(){}pre(e){return!0}post(e){return e instanceof L.Z&&e.getNewStatus()===S.Z.IDLE&&this._lensIds.delete(e.getPublisherId()),e instanceof L.Z&&0===this._lensIds.size?(this._onReady(),D.Z.REMOVE_FILTER):D.Z.ALL_GOOD}}var N=r(90456),O=r(11040),P=r(93323),x=r(55647),Z=r(70917);function F(e,t){return(0,Z.iv)("width:",e,"px;height:",t,"px;margin:auto;display:grid;.dashboard-widget .component-widget{height:100%;width:100%;overflow-y:hidden;}","")}r(75505);var k=r(12205),B=r(50003),W=r(58692),G=r(72555),U=r.n(G),H=r(45697),V=r.n(H),j=r(6343),q=r(57715),z=r(97761),$=r(8429),Q=r(79167),Y=r(60626),K=r.n(Y),J=r(90554),X=r(32574),ee=r.n(X),te=r(85600),re=r.n(te),ie=r(31058),se=r(44709),ne=r(51548),oe=r(81693),ae=r(16011),le=r(42790),ue=r(95929),de=r(87418),ce=r(97108),he=r(41556),pe=r.n(he),ge=r(89769),me=r(95435),_e=r(99689),fe=r(44368),ye=r.n(fe),be=r(66043),Ce=r.n(be),Ee=r(2120),Se=r(37977),Te=r.n(Se),Ie=r(82957);class ve extends Ie.Z{constructor(e,t){super(),this._filterId=e,this._newJson=t}mutate(e){const t=new ne.Z(e.dashboardJson).getFilters().find((e=>e.getId()===this._filterId));let r={};t&&(r=t.getJson()),(0,J.deepExtend)(r,this._newJson)}}var Re=r(53862),we=r.n(Re),Ae=r(62627);const De=(0,Z.iv)("margin:0.5rem 0.25rem;min-height:5rem;.filter-widget{.multi-picklist-container{height:200px;}.picklist-container{.picklist-trigger{width:100%;.slds-button{width:100%;justify-content:left;border-color:",z.colorBackgroundInfo,";&:focus{box-shadow:0 0 5px ",z.paletteBlue60,";}}.slds-dropdown{border-color:",z.colorBackgroundInfo,";}}}.date-picker-container{display:flex;&.date-picker-whole-line{display:block;}.filter-date-picker{display:flex;width:100%;flex-grow:1;.date-picker-trigger{flex-grow:1;}}}.multi-picklist-container{height:200px;.slds-truncate{max-width:80%;}}.search-multi-select{.search-input-label{width:100%;display:block;line-height:1.5rem;.toggle-text{float:right;outline:0;text-decoration:none;}.slds-input{box-sizing:border-box;}}}.filter-button-group{.slds-button{font-size:",z.fontSizeTextXSmall,";}}footer{.filter-button-group{.filter-cancel{border-color:",z.colorBackgroundInfo,";&:focus{box-shadow:0 0 5px ",z.paletteBlue60,";}}}}}",""),Le=(0,Z.iv)("height:100%;padding:",z.spacingXSmall,";&.disable-mouse{pointer-events:auto!important;}.filter-panel-body{height:77%;overflow-y:auto;overflow-x:hidden;padding:6px 0;padding-bottom:0;box-sizing:border-box;&.single-mode{overflow-y:hidden;}.filter-items{.filter-item{display:inline-block;vertical-align:middle;padding:6px 0.5rem;padding-right:32px;margin-right:1%;margin-bottom:8px;cursor:pointer;box-sizing:border-box;position:relative;min-width:15.8%;max-width:15.8%;.locked-filter-item{position:absolute;top:",z.spacingSmall,";right:10px;}.filter-field{font-size:12px;line-height:1.25;display:block;color:#54698d;white-space:nowrap;overflow:hidden;flex-grow:1;flex-shrink:0;text-overflow:ellipsis;.icon{width:18px;height:17px;fill:#54698d;}}.filter-operator-value{font-size:12px;line-height:1.25;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:1px;}.edit-filter-item{margin-right:-1px;position:absolute;top:",z.spacingSmall,";right:",z.spacingXSmall,";.actionIcon{fill:#54698d;}.icon{width:18px;height:18px;}}}.last-column{margin-right:0;}.filter-item-trigger{display:contents;button{display:contents;}.filter-item{text-align:left;}}}}.title{padding:0 0 ",z.spacingXSmall," 0;border-bottom:1px solid;}","");r(14169);var Me=r(35944);const Ne=(0,k.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592)]).then(r.bind(r,34937)))),Oe=U()({displayName:"FilterPanelWidget",mixins:[Ce(),re()],_filterItemEls:new Map,_filterUpdateTopics:[new me.Z("__FilterManager__",_e.Z.RESULT)],propTypes:{widget:V().instanceOf(de.Z).isRequired,isViewMode:V().bool.isRequired,dashboardMetadata:V().instanceOf(ne.Z).isRequired,executeMutators:V().func.isRequired,metadataProvider:V().instanceOf(ue.ZP).isRequired,shouldExecuteMutators:V().bool,runtimeSubscriber:V().instanceOf(R.Z)},getInitialState:()=>({globalFilters:void 0,isEditFilterMenuOpen:!1,editFilterId:void 0,showFilterCreationWizard:!1,openFilterIndex:-1}),componentDidMount(){this.props.runtimeSubscriber.subscribe(this._filterUpdateTopics,this._onGlobalFilterUpdate),this._popoverBodyClassName="date-widget-popover-body_"+(0,se.D)()},componentWillUnmount(){this.props.runtimeSubscriber.unsubscribe(this._filterUpdateTopics)},_onGlobalFilterUpdate(e){this._setWidgetRendered();const t=e.getData().globalFilters;if(this._filterItemAdded&&t.length-this.state.globalFilters.length==1){const e=t[this.state.globalFilters.length];(0,i.isEmpty)(e.getFilterValues())&&this._createEditFilterWidget(t[this.state.globalFilters.length],this._isInSingleFilterMode()?0:this.state.globalFilters.length)}this._filterItemAdded=!1,this.setState({globalFilters:t,isEditFilterMenuOpen:!1})},_getAdditionalClassname(){if(this.props.isTooltipMode)return Ee.v},_render(){let e;if(this.props.isViewMode&&!this._shouldShowInViewMode())return(0,Me.tZ)("div",{});let t=(0,i.isEmpty)(this.state.globalFilters)?{}:(0,J.deepCopy)(this.props.resolvedWidgetInlineStyle);t={...t,...this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme)},this._getTitleOptions().visible||(e={padding:"0px 0px",height:"100%"},t.padding="0px 0px",t.overflow="hidden");const r=ee().classSet({"filter-panel-body":!0,"single-mode":this._isInSingleFilterMode()}),s=$.Z.getLabel("DashboardWidgetType","globalfilters");return(0,Me.tZ)(Me.HY,{children:(0,Me.BX)("div",{css:Le,className:"filter-panel-widget",style:t,onBlur:this.props.onWidgetBlur,"aria-label":$.Z.getLabel("DashboardWidgetType","ariaLabel",s),children:[this._renderTitle(),(0,Me.BX)("div",{className:r,style:e,children:[(0,Me.tZ)("div",{className:"filter-items",children:this._renderFilterItems()}),this._renderPlaceholder()]}),this._getEditFilterMenu(),this._renderFilterCreationWizard()]})})},_renderPlaceholder(){if((0,i.isEmpty)(this.state.globalFilters)||!this.props.widget.getParameter("showAllFilters")&&0===this.props.widget.getParameter("filters").length)return(0,Me.tZ)(Ae.Z,{widgetType:E.Z.fromCode(this.props.widget.getType()),onClick:(0,i.partial)(this._toggleFilterCreationWizard,!0),isViewMode:this.props.isViewMode,widgetRowSpan:1,widgetColumnSpan:2})},_renderFilterItems(){if((0,i.isEmpty)(this.state.globalFilters))return[];let e;const t=new Q.Z,r=new Q.Z,s=this._getFilterItemOptions(),n=this._getFilterItemsPerRow(),o=n?((100-n)/n).toFixed(1)+"%":"100%",a={minWidth:o,maxWidth:o,backgroundColor:void 0,borderRadius:void 0};this.props.widget.getParameter("showAllFilters")&&(a.backgroundColor=null!=s.backgroundColor?s.backgroundColor:void 0,a.borderRadius=null!=s.borderRadius?s.borderRadius:void 0,a[K().ALL_BORDERS.getStyleName("style")]="solid",s.borderColor&&(a[K().ALL_BORDERS.getStyleName("color")]=s.borderColor),s.borderWidth&&(a[K().ALL_BORDERS.getStyleName("width")]=s.borderWidth)),s.propertyColor&&(t.setColor(s.propertyColor),e={fill:this.props.themedStyle?.color??s.propertyColor}),s.valueColor&&r.setColor(s.valueColor),Object.assign(a,this.props.themedStyle);const l=Object.assign({},t.getStyle(),this.props.themedStyle),u=Object.assign({},r.getStyle(),this.props.themedStyle),d=Math.ceil(this.state.globalFilters.length/n),c=[],h=this._getDisplayedFilters();for(let t=0;t<h.length;t++){const r=h[t],i=(t+1)%n==0,s=1===d||t>=n&&Math.floor(t/n+1)===d;c.push((0,Me.tZ)(we(),{forwardRef:this._setFilterItemRef.bind(this,t),filterItem:r,canEdit:this.props.isViewMode,onEditClick:this._createEditFilterWidget,filterIndex:t,isFilterInLastRow:s,isFilterInLastColumn:i,filterItemStyle:a,filterItemFieldStyle:l,filterItemValueStyle:u,filterActionIconStyle:e,isViewMode:this.props.isViewMode,isTooltipMode:this.props.isTooltipMode,dashboardTheme:this.props.dashboardTheme,themedStyle:this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme)},t))}return c},_renderTitle(){const e=this._getTitleOptions(),t=this._getTitle();if(!e.visible||(0,i.isEmpty)(t))return;const r=new Q.Z(t).setFontSize(null!=e.text?e.text.fontSize:void 0).setColor(null!=e.text?e.text.color:void 0).setTextAlign(null!=e.text?e.text.align:void 0),s=r.getStyle();return e.separatorColor&&(s[K().BORDER_BOTTOM.getStyleName("color")]=e.separatorColor),(0,Me.tZ)("div",{className:"title","data-tooltip":t,style:s,children:r.getRenderable()})},async _createEditFilterWidget(e,t){this.setState({isEditFilterMenuOpen:this.props.isViewMode,openFilterIndex:t});const r=this._getDataSourceFilters([e.getDataSource()]);this._editFilterWidgetProvider=new(Te())(e.getFilterFields(),e.getExtendedMetadata(),e.getAssetMetadata(),this._onEditFilter,this._closeEditFilterMenu,this._onSelectOperator,this._onSearchInDimensionFilterPicklist,this._onToggleDependent,r,this._popoverBodyClassName);const i=e.getFilterOperator(),s=e.isDependent();try{this._editFilterMenu=await this._editFilterWidgetProvider.getWidget(i,e.getFilterValues(),!1,e.isLocked(),s)}catch(e){throw this._closeEditFilterMenu(),e}this.setState({editFilterId:e.getFilterMetadata().getId(),filterEdited:e,initialOperatorValue:i,initialDependentValue:s,assetMetadata:e.getAssetMetadata()})},_getDataSourceFilters(e){return this.props.runtimeSubscriber.getFilterConnector().getDataSourceFilters(e)},_onEditFilter(e){let t,r;const i=this.state.filterEdited.getExtendedMetadata(),s=this.state.filterEdited.getFilterFields();if(i.isMeasure(s)){t=e.operator.value,r=[[]];switch(oe.Z.fromCode(e.operator.value)){case oe.Z.BETWEEN:r[0][0]=this._parseToNumber(e.values),r[0][1]=this._parseToNumber(e.endValues);break;case oe.Z.IS_NULL:case oe.Z.IS_NOT_NULL:break;default:r[0][0]=this._parseToNumber(e.values)}}else i.isDateDimension(s)?(t=e.operator?oe.Z.fromName(e.operator.name).getCode():this._getDateRangeOperator(e.dateRange),r=null==e.dateRange?[]:ae.buildDateRangeArray(e.dateRange,this.props.dashboardMetadata.isNewDateTimeEnabled(),this.state.assetMetadata.getType()===f.Z.SOBJECT)):(t=e.operator.value,r=e.values.map((e=>e instanceof Object?e.value:e)));if(this.props.isViewMode&&!this.props.shouldExecuteMutators)this.props.runtimeSubscriber.getFilterConnector().updateFilter(this.state.filterEdited,t,r);else if(this.props.shouldExecuteMutators){const i=(new(pe().Filter)).setOperator(t).setValue(r).setLocked(e.isLocked).setDependent(e.isDependent).build();this.props.executeMutators([new ve(this.state.editFilterId,i)])}this._closeEditFilterMenu()},_parseToNumber:e=>(0,ie.NM)(100*parseFloat(e),0)/100,_getDateRangeOperator:e=>!e||null!=e.getFromDate()&&null!=e.getToDate()?oe.Z.BETWEEN.getCode():null==e.getFromDate()?oe.Z.LESS_OR_EQUALS.getCode():oe.Z.GREATER_OR_EQUALS.getCode(),async _onSelectOperator(e,t,r){this.state.initialOperatorValue!==e&&(this._editFilterMenu=await this._editFilterWidgetProvider.getWidget(e,[],!this.props.isViewMode,t,r),this.setState({isEditFilterMenuOpen:!0,initialOperatorValue:e}))},async _onToggleDependent(e){this.state.initialDependentValue!==e&&(this._editFilterMenu=await this._editFilterWidgetProvider.getWidget(this.state.initialOperatorValue,this.state.filterEdited.getFilterValues(),!this.props.isViewMode,this.state.filterEdited.isLocked(),e),this.setState({isEditFilterMenuOpen:!0,initialDependentValue:e}))},_onSearchInDimensionFilterPicklist(e,t){const r=t.map((e=>e.value));return this._editFilterWidgetProvider.getSelectionList(r,this.state.filterEdited.isDependent(),e)},_closeEditFilterMenu(){this.setState({isEditFilterMenuOpen:!1,editFilterId:void 0,filterEdited:void 0}),this._editFilterMenu=void 0},_getEditFilterMenu(){if(this.state.isEditFilterMenuOpen&&this.props.isViewMode){let e;if(this.state.filterEdited){const{filterEdited:t}=this.state,r=t.getFilterMetadata().getLabel()??ye().formatFilterField(t.getFilterFields(),t.getExtendedMetadata());e=(0,Me.tZ)("div",{id:"popover-message",className:"slds-assistive-text",children:$.Z.getLabel("GlobalFilterWidget","popoverDialogLabel",r)})}return(0,Me.tZ)(j.Z,{className:this._getAdditionalClassname(),style:{width:350,marginTop:12,marginBottom:12,border:`1px solid ${z.colorBackgroundInfo}`},body:(0,Me.BX)("div",{css:De,children:[e,this._editFilterMenu??(0,Me.tZ)(q.Z,{})]}),classNameBody:`filter-edit-menu ${this._popoverBodyClassName}`,position:"overflowBoundaryElement",align:"bottom left",isOpen:!0,hasNoCloseButton:!0,hasNoNubbin:!0,hasNoTriggerStyles:!0,triggerClassName:"filter-item-trigger",ariaLabelledby:"popover-message",heading:"",onRequestClose:this._closeEditFilterMenu,onRequestTargetElement:()=>this._filterItemEls.get(this.state.openFilterIndex),onClose:()=>this._filterItemEls.get(this.state.openFilterIndex)?.focus(),role:"dialog",children:(0,Me.tZ)("button",{})})}},_keyDownEventOnFilterMenu(e){e.stopPropagation(),"Escape"===e.key&&(this._closeEditFilterMenu(),this._filterItemEls.get(this.state.openFilterIndex)?.focus())},_mouseDownEventOnFilterMenu(e){e.stopPropagation()},_mouseDoubleClickEventOnFilterMenu(e){e.preventDefault()},_getTitleOptions(){return this.props.resolvedWidget.getParameter("title")||{}},_getTitle(){let e;const t=this._getTitleOptions();return t&&t.text&&(e=t.text.label),e},_shouldShowInViewMode(){return this.props.resolvedWidget.getParameter("showInViewMode")??!0},_getFilterItemsPerRow(){return this.props.resolvedWidget.getParameter("itemsPerRow")},_getFilterItemOptions(){return this.props.resolvedWidget.getParameter("filterItemOptions")},_renderFilterCreationWizard(){if(this.state.showFilterCreationWizard)return(0,Me.tZ)("div",{onKeyDown:this._keyDownEventOnFilterMenu,onMouseDown:this._mouseDownEventOnFilterMenu,onDoubleClick:this._mouseDoubleClickEventOnFilterMenu,children:(0,Me.tZ)(Ne,{onCloseModal:(0,i.partial)(this._toggleFilterCreationWizard,!1),metadataProvider:this.props.metadataProvider,dashboardMetadata:this.props.dashboardMetadata,onAddFilter:this._onAddFilter,widgetId:this.props.widget.getId(),datasetTypes:[ce.Z.DEFAULT,ce.Z.TRENDED,ce.Z.LIVE]})})},_toggleFilterCreationWizard(e){this.setState({showFilterCreationWizard:e})},_onAddFilter(e,t){this._isInSingleFilterMode()&&t.push(new ge.Z(this.props.widget.getId(),{filters:[e.getJson()]})),this.props.executeMutators(t),this._filterItemAdded=!0},_isInSingleFilterMode(){return!this.props.resolvedWidget.getParameter("showAllFilters")},_getDisplayedFilters(){let e;const t=this.state.globalFilters.filter((e=>this.props.dashboardMetadata.hasFilter(e.getFilterMetadata().getId())));if(this.props.resolvedWidget.getParameter("showAllFilters"))e=t;else{e=[];const r=this.props.resolvedWidget.getParameter("filters");for(let i=0;i<r.length;i++){const s=r[i];e=t.filter((e=>new le.Z(s,this.props.dashboardMetadata).getId()===e.getFilterMetadata().getId()))}}return e},_setFilterItemRef(e,t){this._filterItemEls.set(e,t)}});var Pe=r(5394),xe=r(62271),Ze=r(99709),Fe=r(15572),ke=r.n(Fe),Be=r(65757);r(98688);const We=U()({displayName:"NavigationWidget",mixins:[Ce()],propTypes:{widget:V().instanceOf(de.Z),getParameter:V().func,dashboardDescribe:V().instanceOf(Pe.Z),layoutSwitcher:V().instanceOf(xe.Z)},componentDidMount(){this._setWidgetRendered()},_render(){const e=this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme),t=(new(ke())).setPageTabStyle(Object.assign({},Be.Z.getItemStyle(this.props.widget).getStyle(),e)).setSelectedPageTabStyle(Object.assign({},Be.Z.getSelectedItemsStyle(this.props.widget).getStyle(),e)),r=Object.assign({},this.props.resolvedWidgetInlineStyle,this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme));return(0,Me.tZ)("div",{className:"navigation-widget",style:r,onBlur:this.props.onWidgetBlur,"aria-label":$.Z.getLabel("DashboardWidgetType","ariaLabel",$.Z.getLabel("DashboardWidgetType","navigation")),children:(0,Me.tZ)(Ze.Z,{pagesToDisplay:this._getPagesToDisplay(),currentLayout:this.props.dashboardDescribe.getCurrentLayout(),currentPageIndex:this.props.dashboardDescribe.getCurrentPageIndex(),onSelectPage:this._onSelectPage,numberOfPageTabs:this.props.widget.getParameter("tabCount"),styleProvider:t,showHiddenPages:!1})})},_getPagesToDisplay(){return this.props.dashboardDescribe.getCurrentLayout().getPages().filter((e=>!e.isNavigationHidden()))},_onSelectPage(e){this.props.layoutSwitcher.switchTo({pageIndex:this.props.dashboardDescribe.getCurrentLayout().getPageById(e).getIndex(),addToHistory:!1})}});var Ge=r(76126);function Ue({prettyRenderable:e,className:t,...r}){return(0,Me.tZ)("span",{...r,className:ee().buildClassName("gridLayoutWidget","text",t),style:e.getStyle(),children:e.getRenderable()})}var He=r(32898),Ve=r(6798),je=r.n(Ve),qe=r(49720),ze=r(57244),$e=r(5712);class Qe{constructor(e){null!=e&&(e.startsWith("view/annotation/")&&(this._annotationId=e.split("/")[2]),e.startsWith("notification/")&&(this._notificationId=e.split("/")[1]),e.startsWith("subscription/")&&(this._subscriptionId=e.split("/")[1])),this._validate()}setAnnotationId(e){return this._annotationId=e,this}setNotificationId(e){return this._notificationId=e,this}setSubscriptionId(e){return this._subscriptionId=e,this}getAnnotationId(){return this._annotationId}getNotificationId(){return this._notificationId}getSubscriptionId(){return this._subscriptionId}build(){return this._validate(),this._annotationId?`view/annotation/${this._annotationId}`:this._notificationId?`notification/${this._notificationId}`:this._subscriptionId?`subscription/${this._subscriptionId}`:""}_validate(){let e=!1;[this._notificationId,this._annotationId,this._subscriptionId].forEach((t=>{if(null!=t){if(e)throw new Error("Extended hash can contain only one of annotation, notification, and subscription IDs simultaneously.");e=!0}}))}}var Ye=r(24293),Ke=r(6190),Je=r.n(Ke),Xe=r(48556),et=r(88459),tt=r.n(et),rt=r(38906),it=r.n(rt);const st=(0,k.Z)((()=>Promise.all([r.e(592),r.e(502)]).then(r.bind(r,13944)))),nt=U()({displayName:"LinkWidget",mixins:[Ce(),tt()],contextTypes:{appContext:V().instanceOf(Ye.Z).isRequired},propTypes:{deepLinker:V().instanceOf(Je()).isRequired,widget:V().instanceOf(de.Z).isRequired,widgetLayout:V().instanceOf(O.Z).isRequired,layoutSwitcher:V().instanceOf(xe.Z).isRequired,isViewMode:V().bool.isRequired,metadataProvider:V().instanceOf(ue.ZP).isRequired,dashboardMetadata:V().instanceOf(ne.Z).isRequired,dashboardDescribe:V().instanceOf(Pe.Z).isRequired},UNSAFE_componentWillMount(){this._setWidgetRendered()},getInititalState:()=>({showPageNotFoundError:!1,showMassAction:!1}),_render(){const e=ee().buildClassName("linkWidget",this._getValidationClassName()),t=Object.assign({},this.props.resolvedWidgetInlineStyle,this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme)),{textColor:r}=this.props.widget.getParameters(),s=this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme),n=(0,i.isEmpty)(s)?r:s.titleColor;return(0,Me.tZ)("div",{style:t,className:e,css:(o={color:n},(0,Z.iv)("height:inherit;display:flex;padding:0 ",z.spacingXSmall,";flex-direction:column;justify-content:center;.link{display:flex;flex-direction:column;cursor:pointer;height:inherit;justify-content:center;}.link:focus{text-decoration:underline ",o.color,";}.link:hover{text-decoration:underline ",o.color,";}a{display:flex;flex-direction:column;text-decoration:none;background-color:transparent;overflow:hidden;height:inherit;justify-content:center;}.text{height:initial;overflow:hidden;line-height:",z.lineHeightText,";}","")),children:this._renderLink()});var o},_renderLink(){const{textAlignment:e,text:t}=this.props.resolvedWidget.getParameters();let{destinationType:r,fontSize:s,textColor:n,destinationLink:o}=this.props.widget.getParameters();const a=this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme),l=(0,i.isEmpty)(a)?n:a.titleColor,u=new Q.Z(t).setFontSize(s).setColor(l).setTextAlign(e),d=$e.Z.fromCode(r);let c=null;t||(c={"aria-label":$.Z.getLabel("DashboardWidgetType","untitled")});const h=d===$e.Z.MASS_ACTION?"button":"link";if(d!==$e.Z.URL||ze.Z.has(ze.Z.USER_HAS_EGPT_SERVICE_INTELLIGENCE_ENABLED)&&o?.url?.startsWith("/siDemoGptPanel"))return(0,Me.BX)("div",{className:"link",onClick:this._onClick,onKeyDown:this._onKeyDown,tabIndex:0,role:h,...c,children:[(0,Me.tZ)(Ue,{prettyRenderable:u}),this._renderPageNotFoundWarning(),this.state.showMassAction&&(0,Me.tZ)(st,{recordIdList:this._getMassActionRecordIds(),showMassAction:this.state.showMassAction,actionName:o.actionName,onCancel:()=>this.setState({showMassAction:!1}),onContinue:()=>this.setState({showMassAction:!1}),appContext:this.context.appContext})]});o=this.props.resolvedWidget.getParameter("destinationLink");const p=o?.url;let g=o?.tooltip;return p&&!g&&(g=`${$.Z.getLabel("InsightsRecordLink","external")} (${(0,He.getBaseUrl)(p)})`),p?(0,He.isUrlValid)(o.url,!0)?this._wrapInTooltip(g,(0,Me.BX)("a",{href:p,target:"_blank",rel:"noopener noreferrer",...c,css:(m={textAlignment:e,color:l},(0,Z.iv)("text-align:",m.textAlignment,";:focus{text-decoration:underline ",m.color,";}:hover{text-decoration:underline ",m.color,";}","")),tabIndex:0,children:[(0,Me.tZ)(Ue,{prettyRenderable:u}),this._renderPageNotFoundWarning()]})):(0,Me.BX)(Me.HY,{children:[this._wrapInTooltip(g,(0,Me.tZ)(Ue,{prettyRenderable:u,tabIndex:0})),(0,Me.tZ)(Xe.Z,{content:$.Z.getLabel("DashboardPropertiesPanel","invalidUrlMessage")})]}):this._wrapInTooltip(g,(0,Me.tZ)(Ue,{prettyRenderable:u,tabIndex:0}));var m},_wrapInTooltip:(e,t)=>(0,Me.tZ)(Ge.Z,{align:"bottom",content:e,triggerStyle:{display:"flex",flexDirection:"column",height:"inherit",justifyContent:"center"},children:t}),_renderPageNotFoundWarning(){if(this.state.showPageNotFoundError)return new(je())(this._togglePageWarningModal).makeWarningModal($.Z.getLabel("InsightsErrorDialog","status404_NotFound"),$.Z.getLabel("InsightsErrorDialog","layoutPageNotFound"),"confirmation-modal")},_getMassActionRecordIds(){const{step:e,field:t}=this.props.widget.getParameter("destinationLink"),r=this.props.dashboardDescribe.getLensLastResult(e),i=r.getData(),s=r.getFormatter().getRecordIdField(t);return i.map((e=>e[s]))},_togglePageWarningModal(){this.setState({showPageNotFoundError:!this.state.showPageNotFoundError})},_onKeyDown(e){"Enter"!==e.key&&e.keyCode!==qe.KEY_CODE_ENTER||this._onClick()},_onClick(){const e=this.props.widget.getParameters(),{includeState:t,destinationLink:r,destination:i}=e;let s=e.extendedHash;const n=$e.Z.fromCode(e.destinationType);if(ze.Z.has(ze.Z.USER_HAS_EGPT_SERVICE_INTELLIGENCE_ENABLED)&&r?.url?.startsWith("/siDemoGptPanel"))this.props.runtimeSubscriber.publishInteractionMessage(this.props.widget);else if(n===$e.Z.EXPLORE){const e=this.props.dashboardMetadata.getLens(r.name);this.props.deepLinker.goToExplorer(e,void 0,t,void 0,this.props.dashboardMetadata.getDateVersion())}else if(n===$e.Z.PAGE){const e=this.props.widget.getParameter("destinationLink").name;null!=this.props.widgetLayout.getGridLayout().getPageMap()[e]?this.props.layoutSwitcher.switchTo({pageIndex:this.props.widgetLayout.getGridLayout().getPageById(e).getIndex(),addToHistory:!1}):this._togglePageWarningModal()}else if(n===$e.Z.COMPONENT){const e=this.props.widget.getParameter("destinationLink")??{},{pageName:t,name:r,namespace:i}=e;t&&r&&this.props.componentWidgetDelegate.updateComponentPage((0,h.Oz)(r,i),t)}else if(n===$e.Z.MASS_ACTION)this.setState({showMassAction:!0});else if(r){if(null!=r.widgetId){const e=new Qe;s||e.setSubscriptionId(this.props.resolvedWidget.getId()),s=e.build()}this.props.deepLinker.goToAssetByName(n,r.name,r.namespace,t,s,{savedViewId:r.savedViewId,pageId:r.pageName})}else i&&this.props.deepLinker.goToAsset(n,i,t,s)},_shouldValidate(e){const t=e.widget.getParameter("destinationType");return t!==$e.Z.URL.getCode()&&(this.props.isViewMode!==e.isViewMode||(null!=e.widget.getParameter("destinationLink")?!(0,i.isEqual)(this.props.widget.getParameter("destinationLink"),e.widget.getParameter("destinationLink"))||t===$e.Z.COMPONENT.getCode()&&this.props.dashboardMetadata.getWidgets().filter((e=>e.getType()===E.Z.COMPONENT.getCode())).length>e.dashboardMetadata.getWidgets().filter((e=>e.getType()===E.Z.COMPONENT.getCode())).length:this.props.widget.getParameter("destination")!==e.widget.getParameter("destination")))},_shouldInitialValidate(e){return!e.isViewMode&&this.props.widget.getParameter("destinationType")!==$e.Z.URL.getCode()},_buildValidator:e=>it().new(e.widget,e.getCurrentLayout(),e.metadataProvider,e.dashboardMetadata)});var ot=r(44215),at=r(98410),lt=r.n(at),ut=r(56331),dt=r(69876);r(19321);const ct=U()({displayName:"ImageWidget",mixins:[Ce()],propTypes:{widget:V().instanceOf(de.Z).isRequired},async componentDidMount(){await this._fetchImageUrl()||this._setWidgetRendered()},componentDidUpdate(e,t){(0,i.isEqual)((0,i.pick)(e.widget.getParameters(),["image","documentId"]),(0,i.pick)(this.props.widget.getParameters(),["image","documentId"]))||this._fetchImageUrl(),this.props.imageUrl&&this._setWidgetRendered()},_render(){let e,t;if(this.props.isImageNotFound)e=(0,Me.tZ)(ut.Z,{});else if(this.props.imageUrl){const e=Object.assign({},new(lt())(this.props.widget.getParameters(),this.props.imageUrl).getInlineStyle(),this.props.resolvedWidgetInlineStyle,{height:this.props.height,width:this.props.width,display:"block"}),r=this.props.widget.getParameters();t=(0,Me.tZ)("span",{className:"image",role:"img",style:e,"aria-label":r.altText})}const r=(0,Me.BX)("div",{className:"image-content",children:[t,e]}),i=$.Z.getLabel("DashboardWidgetType","ariaLabel",$.Z.getLabel("DashboardWidgetType","image")),s=!this.props.widget.getParameters().altText,n=this.props.widget.getParameter("interactions")&&this.props.widget.getParameter("interactions").length>0,o=this.props.widget.getParameter("tooltip"),a=n?(0,Me.tZ)("div",{className:"imageWidget",role:"link",tabIndex:0,onBlur:this.props.onWidgetBlur,onClick:this._onClick,onKeyDown:this._onKeyDown,"aria-label":i,"aria-hidden":s,children:r}):(0,Me.tZ)("div",{className:"imageWidget",onBlur:this.props.onWidgetBlur,"aria-label":i,"aria-hidden":s,tabIndex:o?0:-1,children:r});return o?(0,Me.tZ)("div",{className:"image-container",children:(0,Me.tZ)(ot.Z,{id:"img-tooltip",align:"bottom",position:"overflowBoundaryElement",content:this.props.widget.getParameter("tooltip"),children:a},"img-tooltip")}):(0,Me.tZ)("div",{className:"image-container",children:a})},_onKeyDown(e){"Enter"===e.key&&this._onClick()},_onClick(){this.props.runtimeSubscriber.publishInteractionMessage(this.props.widget)},_fetchImageUrl(){const e=this.props.widget.getParameter("image");return this.props.fetchImageUrl({name:e?.name??this.props.widget.getParameter("documentId"),namespace:e?.namespace??""})}}),ht=(0,dt.V)(ct);var pt=r(950),gt=r(56191),mt=r.n(gt),_t=r(76438),ft=r.n(_t),yt=r(13822),bt=r(20957);function Ct({getTooltipContent:e,children:t}){return(0,Me.tZ)(bt.Z,{getTooltipContent:e,children:t})}var Et=r(81428);class St{static getDefaultTooltip(e,t,r=!1){if(!(0,i.isEmpty)(e?.getData())){return this.getFormattedNumber(!1,e,t,r,this.getNumber(e,t,r))??$.Z.getLabel("DashboardPropertiesPanel","noResultsTooltip")}return $.Z.getLabel("DashboardPropertiesPanel","noResultsTooltip")}static getCustomTooltip(e,t,r,i,s,n,o,a,l,u=!1){return(0,Me.tZ)(Es,{widgetId:e,content:t,metadataProvider:r,dashboardDescribe:i,executeMutators:s,isViewMode:n,layoutSwitcher:o,deepLinker:a,imageManagerDelegate:l,isPreview:u})}static getNumber(e,t,r=!1){const i=Et.getMeasureColumn(e.getMetadata(),t,r,!1);if(null==i)return;const s=e.getData()[0];return null!=s?s[i.getName()]:void 0}static getFormattedNumber(e,t,r,i=!1,s){const n=Et.getMeasureColumn(t.getMetadata(),r,i,!1);return null==n?"":t.getFormatter()?.formatMeasure(n,s,e)||""}}var Tt=r(34809),It=r.n(Tt),vt=r(37253),Rt=r(69370);class wt extends Rt.Z{constructor(e){super(),this._className=e}getClassName(){return this._className}}wt.add("SINGLE_LINE","singleMode",new wt("singleMode")).add("COMPACT","compactMode",new wt("compactMode")).add("FULL","fullMode",new wt("fullMode")).finish();r(50771);function At({inlineWidgetStyle:e,themedStyle:t,conditionalFormattingStyles:r,className:n,hasInteractions:o,onBlur:a,onClick:l,onKeyDown:u,defaultTooltip:d,renderInteractiveCustomTooltip:c=(e=>e),showWarning:h,numberRenderable:p,numberWidgetViewMode:g,titleDetails:m={},numberDetails:_={},customizeTooltip:f,additionalNumberStyles:y,onRender:b}){const C=(0,s.useRef)(null),E=(0,s.useRef)(null),S=m.title,T=m.size,I=m.alignment,v=_.size,R=_.alignment,w=ee().buildClassName("title",(0,i.isEmpty)(S)?"empty":void 0);let A;const D=r?.[vt.Z.TEXT_COLOR.code]??t?.titleColor??m.color,L=new Q.Z(S).setFontSize(T).setColor(D),M=new Q.Z(p);null!=v&&M.setFontSize(v);const N=r?.[vt.Z.NUMBER_COLOR.code]??r?.[vt.Z.TEXT_COLOR.code]??t?.numberColor??_.color;M.setColor(N),g===wt.SINGLE_LINE?(0,i.isEmpty)(S)?M.setTextAlign(R):M.setTextAlign(It().RIGHT.getCode()):(L.setTextAlign(I??It().RIGHT.getCode()),M.setTextAlign(R??It().RIGHT.getCode()));const O={...M.getStyle(),...y};if(f){const e=(0,Me.tZ)("div",{className:w,style:L.getStyle(),children:L.getRenderable()},"title"),t=(0,Me.tZ)("div",{className:"count",style:O,children:M.getRenderable()},"count");A=[c(g===wt.COMPACT?[t,e]:[e,t])]}else{const e={flexGrow:g===wt.SINGLE_LINE?1:0},t=g===wt.COMPACT?(0,Me.tZ)("dd",{className:w,style:L.getStyle(),ref:C,tabIndex:0,children:L.getRenderable()},"title"):(0,Me.tZ)("dt",{className:w,style:L.getStyle(),ref:C,tabIndex:0,children:L.getRenderable()},"title"),r=(0,Me.tZ)(ot.Z,{id:"title-tooltip",align:"bottom",position:"overflowBoundaryElement",content:S,triggerStyle:(0,i.isEmpty)(S)?{display:"none"}:e,onRequestTargetElement:()=>C.current,children:t},"title-tooltip"),s=g===wt.COMPACT?(0,Me.tZ)("dt",{className:"count",style:O,ref:E,tabIndex:0,children:M.getRenderable()},"count"):(0,Me.tZ)("dd",{className:"count",style:O,ref:E,tabIndex:0,children:M.getRenderable()},"count"),n=(0,Me.tZ)(ot.Z,{id:"count-tooltip",align:"bottom",position:"overflowBoundaryElement",content:d,triggerStyle:e,onRequestTargetElement:()=>E.current,children:s},"count-tooltip");A=g===wt.COMPACT?[n,r]:[r,n]}h&&A.push((0,Me.tZ)(Xe.Z,{content:$.Z.getLabel("NumberWidget","missingMeasure")},"warning"));const P=$.Z.getLabel("DashboardWidgetType","ariaLabel",$.Z.getLabel("DashboardWidgetType","number"));(0,s.useEffect)((()=>{"function"==typeof b&&b()}),[]);const x=Object.assign({},e,t,(0,i.omit)(r,[vt.Z.NUMBER_COLOR.code,vt.Z.TEXT_COLOR.code]));return g!==wt.SINGLE_LINE&&(A=[(0,Me.tZ)("div",{className:"contents",children:A},"contents")]),o?(x.cursor="pointer",(0,Me.tZ)("dl",{style:x,className:n,onBlur:a,onClick:l,onKeyDown:u,"aria-label":P,children:A})):(0,Me.tZ)("dl",{style:x,className:n,onBlur:a,"aria-label":P,children:A})}const Dt=U()({displayName:"NumberWidget",mixins:[Ce()],propTypes:{widgetDefinition:V().instanceOf(ft()).isRequired,viewMode:V().instanceOf(mt()).isRequired,isViewMode:V().bool.isRequired},_onResult(e){(null==St.getNumber(e,this.props.resolvedWidget,this.props.isViewMode)||window.testMode)&&this._setWidgetRendered(),this.setState({lastResult:e})},_render(){if(null==this.state.lastResult)return(0,Me.tZ)(Me.HY,{children:this._renderSpinner()});const e=!(0,i.isEmpty)(this.state.lastResult?.getData()),t=this.props.resolvedWidget.getParameter("compact"),r=St.getNumber(this.state.lastResult,this.props.resolvedWidget,this.props.isViewMode),s=Et.getMeasureColumn(this.state.lastResult.getMetadata(),this.props.resolvedWidget,this.props.isViewMode,!1),n=e?this.state.lastResult.getFormatter().getConditionalFormattingStyles(this.state.lastResult.getData()[0],s,this.props.widgetDefinition.getSupportedConditionalFormattingStyles()):{},{viewMode:o}=this.props;let a;switch(o){case mt().SINGLE_LINE:a=wt.SINGLE_LINE;break;case mt().COMPACT:a=wt.COMPACT;break;case mt().FULL:a=wt.FULL}const l=["numberWidget",a?.getClassName()];this.state.widgetStatus===yt.Z.QUERYING&&l.push("loading");const u=ee().buildClassName(...l),d=this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme),c=St.getDefaultTooltip(this.state.lastResult,this.props.widget,this.props.isViewMode),h=(0,i.partial)(St.getFormattedNumber,t,this.state.lastResult,this.props.resolvedWidget,this.props.isViewMode),p=this.props.resolvedWidget.getParameter("noResultsLabel"),g=e?null==r||window.testMode?h(r):(0,Me.tZ)(pt.Z,{value:r,duration:300,initialValue:0,formatNumber:h,onDone:this._onDoneTweening}):null==p?$.Z.getLabel("DashboardPropertiesPanel","noResultsDefault"):p,m={title:this.props.resolvedWidget.getParameter("title"),size:this.props.resolvedWidget.getParameter("titleSize"),color:this.props.resolvedWidget.getParameter("titleColor"),alignment:this.props.resolvedWidget.getParameter("textAlignment")},_={color:this.props.resolvedWidget.getParameter("numberColor"),size:e||null!=p?this.props.resolvedWidget.getParameter("numberSize"):null,alignment:this.props.resolvedWidget.getParameter("textAlignment")};return this.props.widget.getParameter("interactions")&&this.props.widget.getParameter("interactions").length>0?(0,Me.BX)(Me.HY,{children:[(0,Me.tZ)(At,{inlineWidgetStyle:this.props.resolvedWidgetInlineStyle,themedStyle:d,conditionalFormattingStyles:n,className:u,hasInteractions:!0,onBlur:this.props.onWidgetBlur,onClick:this._onClick,onKeyDown:this._onKeyDown,defaultTooltip:c,numberWidgetViewMode:a,renderInteractiveCustomTooltip:this._renderInteractiveCustomTooltip,showWarning:null==r&&null==s,numberRenderable:g,titleDetails:m,numberDetails:_,customizeTooltip:this.props.widget.getParameter("tooltip")?.customizeTooltip&&!this.props.isTooltipMode}),this._renderSpinner()]}):(0,Me.BX)(Me.HY,{children:[(0,Me.tZ)(At,{inlineWidgetStyle:this.props.resolvedWidgetInlineStyle,themedStyle:d,conditionalFormattingStyles:n,className:u,hasInteractions:!1,onBlur:this.props.onWidgetBlur,defaultTooltip:c,numberWidgetViewMode:a,renderInteractiveCustomTooltip:this._renderInteractiveCustomTooltip,showWarning:null==r&&null==s,numberRenderable:g,titleDetails:m,numberDetails:_,customizeTooltip:this.props.widget.getParameter("tooltip")?.customizeTooltip&&!this.props.isTooltipMode}),this._renderSpinner()]})},_renderInteractiveCustomTooltip(e){const t=St.getCustomTooltip.bind(null,this.props.resolvedWidget.getId(),this.props.resolvedWidget.getParameter("tooltip").content,this.props.metadataProvider,this.props.dashboardDescribe,this.props.executeMutators,this.props.isViewMode,this.props.layoutSwitcher,this.props.deepLinker,this.props.imageManagerDelegate);return(0,Me.tZ)(Ct,{getTooltipContent:t,children:e},"customTooltip")},_onDoneTweening(){this._setWidgetRendered(),this._appendWidgetRenderedClassName()},_onKeyDown(e){"Enter"===e.key&&this._onClick()},_onClick(){this.props.runtimeSubscriber.publishInteractionMessage(this.props.widget)}});var Lt=r(53499);class Mt extends Rt.Z{get label(){return $.Z.getLabel("ConditionalFormattingScope",this.code)}}Mt.add("FIELD","field",new Mt).add("WIDGET","widget",new Mt).finish();var Nt=r(31550),Ot=r.n(Nt),Pt=r(925);class xt extends Q.Z{constructor(e){super(e)}setFontWeight(e){return null==e||(this._fontWeight=e),this}getFontWeight(){return this._fontWeight}setFontStyle(e){return null==e||(this._fontStyle=e),this}getFontStyle(){return this._fontStyle}setTextDecorationLine(e){return null==e||(this._textDecorationLine=this._textDecorationLine?`${this._textDecorationLine} ${e}`:e),this}getTextDecorationLine(){return this._textDecorationLine}getStyle(){return Object.assign({},{fontSize:this._fontSize,textAlign:this._textAlign,color:this._color,fontWeight:this._fontWeight,fontStyle:this._fontStyle,textDecorationLine:this._textDecorationLine,backgroundColor:this._backgroundColor},this._border)}}const Zt=(0,k.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(661)]).then(r.bind(r,69723))));function Ft(e){const t=Ot().BLACK.getHexCode().toLowerCase(),r=String(e[0].insert),i=1===e.length&&r.endsWith("\n")?r.slice(0,-1):r,s=e[0].attributes??{},n=new xt(i).setFontStyle(!0===s.italic?"italic":null).setFontWeight(!0===s.bold?"bold":null).setTextDecorationLine(!0===s.underline?"underline":null).setTextDecorationLine(!0===s.strike?"line-through":null).setFontSize(isNaN(parseInt(s.size))?"16px":s.size).setColor(function(e=""){return(0,Lt.isHexFormat)(e)||(0,Lt.isRgbFormat)(e)||(0,Lt.isRgbaFormat)(e)}(s.color)?s.color:t).setBackgroundColor(s.background);return(0,Me.tZ)(Ue,{prettyRenderable:n})}function kt({richTextContent:e,onRender:t}){let r,n=(0,Z.iv)("","");if(function(e){for(const t of e.values())if(t.attributes&&t.attributes.link)return!1;return 1===e.length||2===e.length&&("\n"===e[1].insert||""===e[1].insert)&&((0,i.isEmpty)(e[1].attributes)||1===Object.keys(e[1].attributes).length&&"align"===Object.keys(e[1].attributes)[0])}(e)){r=Ft(e);const t=e[0].attributes;let i=t?.align;if(2===e.length&&"\n"===e[1].insert){const t=e[1].attributes;i=t?.align}o=i??"left",n=(0,Z.iv)("text-align:",o,";","")}else{const t=(0,Pt.pw)(e);r=(0,Me.tZ)(Zt,{value:t,fontSizes:Pt.X3})}var o;return(0,s.useEffect)((()=>{"function"==typeof t&&t()}),[]),(0,Me.tZ)("div",{className:"text-renderer",css:n,children:r})}r(15550);const Bt=U()({displayName:"TextWidget",mixins:[Ce()],UNSAFE_componentWillMount(){this._setWidgetRendered()},shouldComponentUpdate(e,t){return!!this._widgetStatusRequiresUpdate(e,t)||(!(0,i.isEqual)(this.props.resolvedWidget.getParameters(),e.resolvedWidget.getParameters())||this._perhapsShouldComponentUpdate(e,t))},_render(){const e=this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme),t=this.props.resolvedWidget.getParameter("conditionalFormattingSource"),r=t?.scope===Mt.WIDGET.code?t.styles:void 0,s=this.props.resolvedWidget.getParameter("content")?.richTextContent;let n,o=(0,Z.iv)("","");if(Array.isArray(s)&&s.length>0){const t=s.map((t=>{const s=r?.color??e?.titleColor;let n=t;if(s&&null==t.attributes?.link&&"\n"!==t.insert){const e=t.attributes??{};n=(0,i.cloneDeep)(t),n.attributes={...e,color:s}}return n}));n=(0,Me.tZ)(kt,{richTextContent:t})}else n=this.props.resolvedWidget.getParameter("content")?.displayTemplate?.map(((e,t)=>{const r=null==e?this._createPrettyRenderable(""):"string"==typeof e?this._createPrettyRenderable(e):this._createPrettyRenderable(e.value,e.color,e.backgroundColor);return(0,Me.tZ)(Ue,{prettyRenderable:r},t)})),o=(e=>(0,Z.iv)("text-align:",e,";",""))(this.props.resolvedWidget.getParameter("textAlignment"));const a=(0,Me.tZ)("div",{className:"content",css:o,tabIndex:this.props.resolvedWidget.getParameter("tooltip")?0:-1,children:n}),l=this.props.resolvedWidget.getParameter("tooltip")?(0,Me.tZ)(ot.Z,{id:"text-tooltip",align:"bottom",position:"overflowBoundaryElement",content:this.props.resolvedWidget.getParameter("tooltip"),children:a}):a,u=Object.assign({},this.props.resolvedWidgetInlineStyle,e,r);return this._handleInteraction(l,u)},_handleInteraction(e,t){const r=e=>(0,Z.iv)(e,";",""),i=(0,Me.BX)(Me.HY,{children:[(0,Me.tZ)("div",{className:"gutter"}),e,(0,Me.tZ)("div",{className:"gutter"})]});if(this.props.widget.getParameter("interactions")&&this.props.widget.getParameter("interactions").length>0){const e=this.props.widget.getParameters()?.interactions?.[0]?.actions?.[0]?.destinationLink?.url;return e?(0,Me.tZ)("div",{role:"link",tabIndex:0,style:{cursor:"pointer"},className:"text-container",css:r(t),onBlur:this.props.onWidgetBlur,onClick:this._onClick,onKeyDown:this._onKeyDown,"aria-label":$.Z.getLabel("TextWidgetDynamicWidgetLabels","urlNavigation")+e,children:i}):(0,Me.tZ)("div",{role:"link",tabIndex:0,style:{cursor:"pointer"},className:"text-container",css:r(t),onBlur:this.props.onWidgetBlur,onClick:this._onClick,onKeyDown:this._onKeyDown,children:i})}return(0,Me.tZ)("div",{className:"text-container",css:r(t),onBlur:this.props.onWidgetBlur,"aria-label":$.Z.getLabel("DashboardWidgetType","ariaLabel",$.Z.getLabel("DashboardWidgetType","text")),children:i})},_createPrettyRenderable(e,t,r){const i=new Q.Z(e).setColor(this._isValidateColor(t)?t:this.props.resolvedWidget.getParameter("textColor")).setFontSize(this.props.resolvedWidget.getParameter("fontSize"));return r&&this._isValidateColor(r)&&i.setBackgroundColor(r),i},_isValidateColor:e=>(0,Lt.isHexFormat)(e)||(0,Lt.isRgbFormat)(e)||(0,Lt.isRgbaFormat)(e),_onKeyDown(e){"Enter"===e.key&&this._onClick()},_onClick(){this.props.runtimeSubscriber.publishInteractionMessage(this.props.widget)}});var Wt=r(5332),Gt=r(73935),Ut=r(14234),Ht=r(22787),Vt=r(53811),jt=r.n(Vt),qt=r(80012),zt=r(93947),$t=r.n(zt),Qt=r(25884),Yt=r(21821);class Kt extends Yt.ZP{getColumnConditionalFormattingStyles(e,t){const r=this.getMetadata().getColumn(t);if(r){const t=this.getRow(e);return this.formatter.getConditionalFormattingStyles(t,r,this.options.supportedConditionalFormattingStyles)}}}var Jt=r(14562),Xt=r(14077),er=r.n(Xt),tr=r(1806),rr=r.n(tr),ir=r(37724),sr=r(99891),nr=r(70100),or=r(49171),ar=r(15648),lr=r(70210),ur=r(36263),dr=r(36563),cr=r(1611),hr=r(50130);const pr={name:"18dmfem",styles:"text-align:center;margin-top:-0.25rem"},gr=(0,Z.iv)("word-wrap:break-word;width:13rem;color:",z.colorTextModal,";text-align:left;line-height:1rem;margin-top:",z.spacingXSmall,";",""),mr={name:"ch2oyi",styles:"pointer-events:none;.filter-panel-body{.filter-items{.filter-item{pointer-events:none!important;}}}"},_r={name:"1s4runm",styles:"margin-top:1rem;margin-bottom:1rem;border-top-color:#334f87;height:1px"};function fr(e){const{widgetMetadata:t,...r}=e;return(0,Ee.b)(t.getParameter("tooltip")?.content)?(0,Me.BX)("div",{css:pr,children:[(0,Me.tZ)(hr.Z,{category:"utility",name:"warning",colorVariant:"base",size:"x-small",className:"titleIcon"}),(0,Me.tZ)("div",{className:"warningTitle",css:gr,children:$.Z.getLabel("DashboardPropertiesPanel","chartTooltipPreviewWarning")})]}):(0,Me.tZ)("div",{css:mr,children:(0,Me.tZ)(Es,{...r})})}const yr=(0,Z.iv)("font-size:",z.fontSizeSmall,";color:",z.colorTextModal,";",""),br=(0,Z.iv)("font-size:",z.fontSizeXSmall,";color:",z.colorTextModal,";opacity:0.6;",""),Cr=(0,Z.iv)("margin-top:",z.spacingXSmall,";border-top-color:",z.colorBorderPathDivider,";opacity:0.2;","");class Er{static getTooltipContent(e,t,r=!1,s,n){const o={legend:{},widget:(0,J.deepCopy)(e.widget)};let a;if(a=r?t?.getData()?.length>0?t.getData()[0]:void 0:s,!(0,Ee.b)(e)&&null!=a){const s=t.getMetadata(),l=t.getFormatter(),u=dr.formatTooltipDescription(e.description,a,s,l);(0,i.isEmpty)(u)||(o.description=[u]);const d=[],c=[];for(const t of Object.keys(a)){const i=s.getColumn(t);if(i&&e.legend&&Er.shouldAddLegendInfo(e.legend,t)&&(e.legend?.showNullValues||null!=a[t]))switch(i?.getType()){case cr.Z.MEASURE:{const s=l.formatMeasure(i,a[t])??"",o=n?.find((e=>e.value===s)),u=e.legend?.showPercentage?o?.percentData:void 0,c=e.legend?.showPercentage?{placeholderText:$.Z.getLabel("EclairNgChartOptions","tooltipPreviewPercentagePlaceholder")}:void 0;d.push({label:l.formatMeasureName(i),value:s,percentData:r?c:u,color:r?void 0:o?.color});break}case cr.Z.DIMENSION:c.push({label:l.getColumnLabel(i),value:l.formatDimension(i,a[t])??""})}}o.legend.measures=d,o.legend.dimensions=c}return o}static getTooltipPreviewContent(e){const t=Er.getTooltipContent(e.tooltipContent,e.lastResult,!0);return(0,Me.tZ)(fr,{widgetId:e.widgetId,content:t,metadataProvider:e.metadataProvider,dashboardDescribe:e.dashboardDescribe,executeMutators:e.executeMutators,isViewMode:!1,deepLinker:e.deepLinker,imageManagerDelegate:e.imageManagerDelegate,layoutSwitcher:e.layoutSwitcher,isPreview:!0,widgetMetadata:e.widgetMetadata})}static getTooltipPreviewHeading(e){return(0,Me.BX)("div",{children:[(0,Me.tZ)("div",{css:yr,children:$.Z.getLabel("DashboardPropertiesPanel","tooltipPreview")}),(0,Ee.b)(e)?null:(0,Me.tZ)("div",{css:br,children:$.Z.getLabel("DashboardPropertiesPanel","chartTooltipPreviewSubheading")}),(0,Me.tZ)("hr",{css:Cr})]})}static shouldAddLegendInfo(e,t){return!e.customizeLegend||e.showMeasures&&e.measures.includes(t)||e.showDimensions&&e.dimensions.includes(t)}}var Sr=r(16154),Tr=r(40604),Ir=r(90394);class vr extends Rt.Z{constructor(e,t){super(),this._label=e,this._tooltipInfo=t}getLabel(){return this._label}getTooltipInfo(){return this._tooltipInfo}}vr.add("DEFAULT","default",new vr($.Z.getLabel("DashboardPropertiesPanel","default"),void 0)).add("CUSTOM","custom",new vr($.Z.getLabel("DashboardPropertiesPanel","custom"),$.Z.getLabel("DashboardPropertiesPanel","customInfoTooltip"))).finish();var Rr=r(46144),wr=r(77955),Ar=r(95072),Dr=r(89176),Lr=r(63411),Mr=r(9673),Nr=r(13894);class Or extends Ie.Z{constructor(e,t,r){super(),this._repeaterWidgetId=e,this._cellWidgetId=t,this._value=r}mutate(e){const t=new ne.Z(e.dashboardJson).getWidget(this._repeaterWidgetId).getParameter("cellProperties")[this._cellWidgetId];if(!t)throw new Error(`Cell widget ${this._cellWidgetId} does not exist`);const r=this._getMutateJson(t);this._value.visualizationType&&r.visualizationType!==this._value.visualizationType?this._mutateAndTransitionChartType(r,t):this._mutateParamValue(r)}_mutateParamValue(e){const t=this._value&&Object.keys(this._value)[0],r=this._value[t];void 0===r?delete e[t]:e[t]=r}_mutateAndTransitionChartType(e,t){const r=ur.Z.fromCode(e.visualizationType),i=ur.Z.fromCode(this._value.visualizationType),s=this._getUpdatedParameters(r,i,e);t.parameters=s}_getUpdatedParameters(e,t,r){const i=e.getDefinition().getDefaultParameters();for(const e of Object.keys(i))null!=r[e]&&(i[e]=r[e]);const s=t.getDefinition().getDefaultParameters(!0),n=Nr.Z.transitionParameters(i,s);return n.visualizationType=t.getCode(),n.columnMap=r.columnMap,Nr.Z.removeNullsInSections(n),n}_getMutateJson(e){throw new Error("Not implemented.")}}class Pr extends Or{constructor(e,t,r){super(e,t,r)}_getMutateJson(e){return e.parameters}}var xr=r(40936),Zr=r(14833);class Fr extends Ie.Z{constructor(e,t,r){super(),this._widgetId=e,this._displayTemplate=t,this._cellWidgetId=r}mutate(e){const t=new ne.Z(e.dashboardJson),r=this.getWidgetMetadata(t).getParameters();r.tooltip.content||(r.tooltip.content={description:{displayTemplate:""}}),r.tooltip.content.description.displayTemplate=this._displayTemplate??""}getWidgetMetadata(e){let t=e.getWidget(this._widgetId);return t.getType()===E.Z.REPEATER.getCode()&&this._cellWidgetId&&(t=e.getRepeaterMetadata(this._widgetId).getWidget(this._cellWidgetId)),t}}class kr extends Ie.Z{constructor(e,t,r,i){super(),this._widgetId=e,this._keys=t,this._valueJson=r,this._cellWidgetId=i}mutate(e){const t=new ne.Z(e.dashboardJson),r=this.getWidgetMetadata(t).getParameters();r.tooltip.content?r.tooltip.content.description?r.tooltip.content.description.values||(r.tooltip.content.description.values={}):r.tooltip.content.description={values:{}}:r.tooltip.content={description:{displayTemplate:"",values:{}}},this._keys.forEach(((e,t)=>{r.tooltip.content.description.values[e]=this._valueJson[t]}))}getWidgetMetadata(e){let t=e.getWidget(this._widgetId);return t.getType()===E.Z.REPEATER.getCode()&&this._cellWidgetId&&(t=e.getRepeaterMetadata(this._widgetId).getWidget(this._cellWidgetId)),t}}class Br extends Ie.Z{constructor(e,t,r){super(),this._widgetId=e,this._keys=t,this._cellWidgetId=r}mutate(e){const t=new ne.Z(e.dashboardJson),r=this.getWidgetMetadata(t).getParameters();r.tooltip.content.description.values&&this._keys.forEach((e=>{r.tooltip.content.description.values[e]&&delete r.tooltip.content.description.values[e]})),(0,i.isEmpty)(r.tooltip.content.description.values)&&delete r.tooltip.content.description.values}getWidgetMetadata(e){let t=e.getWidget(this._widgetId);return t.getType()===E.Z.REPEATER.getCode()&&this._cellWidgetId&&(t=e.getRepeaterMetadata(this._widgetId).getWidget(this._cellWidgetId)),t}}var Wr=r(21568);class Gr extends Wr.Z{constructor({id:e,isWide:t=!1,valueKeys:r=[],labels:i,displayTemplate:s,onFieldSelected:n,onSourceTypeSelected:o,onShortenNumberChange:a,isShortenNumber:l,onDelete:u,richTextContent:d,showDisplayTemplate:c=!1,showConditionalFormattingPanel:h,widgetMetadata:p,valueField:g,disableDimensionColumn:m,onTextAreaChange:_,onNoResultsLabelChange:f,noResultsLabel:y,canSupportCustomFormatting:b=!1,stepId:C,allowStepSelection:E=!1}){super(e,t),this.valueKeys=r,this.labels=i,this.displayTemplate=s,this.richTextContent=d,this.showDisplayTemplate=c,this.onFieldSelected=n,this.onSourceTypeSelected=o,this.onShortenNumberChange=a,this.isShortenNumber=l,this.onDelete=u,this.showConditionalFormattingPanel=h,this.widgetMetadata=p,this.valueField=g,this.disableDimensionColumn=m,this.onTextAreaChange=_,this.onNoResultsLabelChange=f,this.noResultsLabel=y,this.canSupportCustomFormatting=b,this.stepId=C,this.allowStepSelection=E}setCursorPosition(e,t){this._cursorPosition={selectionStart:e,selectionEnd:t}}getCursorPosition(){return this._cursorPosition}setCurrentSelection(e){this._currentSelection=e}getCurrentSelection(){return this._currentSelection}}class Ur{static addTooltipItems({formDefinition:e,widgetMetadata:t,executeMutators:r,dashboardDescribe:i,componentWidgetDelegate:s,metadataProvider:n,showTooltipWidgetPropertiesPanel:o,updateRightPanel:a,labelSection:l,runtimeLens:u,layoutSwitcher:d,deepLinker:c,imageManagerDelegate:h,allowStepSelection:p}){const g=xr.addTooltipSection(e).options.items,m=t.getParameter("tooltip"),_=t.isRepeaterCellWidget()?t.getRepeaterId():t.getId(),f=t.isRepeaterCellWidget()?t.getId():void 0,y=Ur.getPreviewContent({widgetId:_,widgetMetadata:t,metadataProvider:n,dashboardDescribe:i,executeMutators:r,runtimeLens:u,layoutSwitcher:d,deepLinker:c,imageManagerDelegate:h,componentWidgetDelegate:s,showTooltipWidgetPropertiesPanel:o});if(t.getType()===Lr.Z.NUMBER.getCode()){const e=()=>{const e=new Ir;for(const t of vr.enums())e.add(t.code,t.getLabel(),t===vr.CUSTOM,void 0,!1,t.getTooltipInfo());return e.setDefaultById(vr.DEFAULT.code),e};g.push({type:Sr.RADIO_WITH_POPOVER_BUTTON,name:"customizeTooltip",className:"tooltip-mode-radio",options:{dataSource:e,optionButton:{label:$.Z.getLabel("DashboardPropertiesPanel","preview"),className:"preview-button",heading:$.Z.getLabel("DashboardPropertiesPanel","tooltipPreview"),content:y}}})}else g.push({type:Sr.CHECKBOX,name:"customizeTooltip",className:"sideBySide left",label:$.Z.getLabel("DashboardPropertiesPanel","custom"),options:{infoTooltip:$.Z.getLabel("DashboardPropertiesPanel","customInfoTooltip")}},{type:Sr.CUSTOM,customInputType:Zr.TOOLTIP_PREVIEW_BUTTON,name:"customizeTooltipPreview",className:"inputContainer sideBySide right slds-text-align_center",options:{getPopoverContent:()=>y,buttonLabel:$.Z.getLabel("DashboardPropertiesPanel","preview"),popoverHeading:Ur.getTooltipPreviewHeading(),disabled:!m?.customizeTooltip,variant:"base"}});const b=i.getRuntime();if(!m?.customizeTooltip){if(m?.content?.widget&&this.updateTooltipWidget(nr.Z.DELETE_TOOLTIP_WIDGET,_,b,f),m?.content){const e={customizeTooltip:!1};r(t.isRepeaterCellWidget()&&f?[new Pr(_,f,{tooltip:e})]:[new ge.Z(_,{tooltip:e})])}return}const C={widgetPanelHeader:$.Z.getLabel(l,"widgetPanelHeader"),fieldSectionTitle:$.Z.getLabel(l,"fieldSectionTitle"),fieldSectionSubtitle:$.Z.getLabel(l,"fieldSectionSubtitle")},S=new Gr({id:Mr.Z.DYNAMIC_WIDGET_PANEL.getValue(),isWide:!1,valueKeys:Object.keys(m.content?.description?.values||{}),labels:C,displayTemplate:m.content?.description?.displayTemplate,onFieldSelected:({key:e,step:t,field:i,sourceType:s,displayTemplate:n})=>{const o=[new kr(_,[e],[{step:t,field:i,sourceType:s}],f)];o.push(new Fr(_,n,f)),r(o)},onSourceTypeSelected:({key:e,step:t,field:i,sourceType:s,displayTemplate:n})=>{r([new kr(_,[e],[{step:t,field:i,sourceType:s}],f)])},onDelete:e=>{const t=[new Br(_,[e],f),new Fr(_,m?.content?.description?.displayTemplate.replace(e,""),f)];r(t)},widgetMetadata:t,canSupportCustomFormatting:!1,stepId:t.getLensId(),allowStepSelection:p}),T={type:Sr.NAMED_SECTION,name:"widget",key:"widget",className:"tooltip-visualization-section",options:{inline:!0,items:[]}},I=m?.content?.widget?.name,v=i.getMetadataHolder();if(I){const e=v.getMetadata().hasWidget(I)?v.getMetadata().getWidget(I):void 0,t=e?.getLens();let r,i=!0;t?e?.getType()!==E.Z.CHART.getCode()&&e?.getType()!==E.Z.TABLE.getCode()?(i=!1,r=$.Z.getLabel("DashboardPropertiesPanel","unSupportedWidget")):b.getLens(t.getId())?.getLastResult()instanceof wr.Z&&(i=!1,r=$.Z.getLabel("DashboardPropertiesPanel","widgetHasError")):(i=!1,r=$.Z.getLabel("DashboardPropertiesPanel","noStepInTooltip")),T.options.items.push({type:Sr.SECTION,options:{inline:!0,items:[{type:Sr.EDIT_DELETE_PILL,label:$.Z.getLabel("DashboardPropertiesPanel","visualization"),key:"visualization",options:{onEdit:()=>this.updateTooltipWidget(nr.Z.EDIT_TOOLTIP_WIDGET,_,b,f),onDelete:()=>this.updateTooltipWidget(nr.Z.DELETE_TOOLTIP_WIDGET,_,b,f),label:I,isEditButtonDisabled:!i,deleteAssistiveText:$.Z.getLabel("DashboardPropertiesPanel","deleteTooltip"),editAssistiveText:$.Z.getLabel("DashboardPropertiesPanel","editTooltip"),editTooltip:r,infoTooltip:$.Z.getLabel("DashboardPropertiesPanel","visualizationTooltip")}},{type:Sr.NUMBER,name:"width",className:"tooltipWidthInput sideBySide left",label:$.Z.getLabel("DashboardPropertiesPanel","tooltipWidth"),options:{max:1e4,default:300}},{type:Sr.NUMBER,name:"height",className:"tooltipHeightInput sideBySide right",label:$.Z.getLabel("DashboardPropertiesPanel","tooltipHeight"),options:{max:1e4,default:300}}]}})}else T.options.items.push({type:Sr.CUSTOM,customInputType:Zr.TOOLTIP_WIDGET_PICKER,name:"tooltipWidgetPicker",label:$.Z.getLabel("DashboardPropertiesPanel","createVisualization"),options:{dashboardDescribe:i,widgetId:_,componentWidgetDelegate:s,metadataProvider:n,showTooltipWidgetPropertiesPanel:o,updateRightPanel:a,cellWidgetId:f}});g.push({type:Sr.NAMED_SECTION,name:"content",key:"content",options:{inline:!0,items:[{type:Sr.NAMED_SECTION,name:"description",key:"description",className:"tooltip-section",options:{inline:!0,items:[{type:Sr.BUTTON,className:"values",name:"values",key:"values",label:$.Z.getLabel("DashboardPropertiesPanel","addDynamicValue"),options:{disabled:new Ar.Z(Dr.Z).containsBindings(m.content?.description),tooltip:"",buttonStyle:Tr.Secondary,onClick(){a(S,{shouldOverlap:!0})}}},{type:Sr.TEXT,name:"displayTemplate",key:"displayTemplate",options:{placeholder:$.Z.getLabel("DashboardPropertiesPanel","typeSomething"),textArea:!0,onBlur:e=>{S.setCursorPosition(e.target.selectionStart,e.target.selectionEnd)}}}]}},T]}})}static updateTooltipWidget(e,t,r,i){const s=r.getSubscriber(R.Z.getWidgetRuntimeId(t)).getLensConnector(),n=new Rr.Z;s.callCapabilityMethod(T.INTERACTION,"onInteraction",[new sr.C3(e,{extra:{widgetId:t,cellWidgetId:i}}),n])}static getCustomTooltip(e,t,r,i,s,n,o,a,l,u=!1,d){return(0,Me.tZ)(Es,{widgetId:e,content:t,metadataProvider:r,dashboardDescribe:i,executeMutators:s,isViewMode:n,layoutSwitcher:o,deepLinker:a,imageManagerDelegate:l,focusedRowValues:d,isPreview:u})}static getPreviewContent({widgetId:e,widgetMetadata:t,metadataProvider:r,dashboardDescribe:i,executeMutators:s,runtimeLens:n,layoutSwitcher:o,deepLinker:a,imageManagerDelegate:l,componentWidgetDelegate:u,showTooltipWidgetPropertiesPanel:d}){const c=t.getParameter("tooltip");if(c&&c.customizeTooltip){const n=i.getRuntime().getSubscriber(R.Z.getWidgetRuntimeId(e)).getWidget(t).getParameter("tooltip").content;return Ur.getCustomTooltip(e,n,r,i,s,!1,o,a,l,!0)}if(t.getType()===Lr.Z.NUMBER.getCode())return St.getDefaultTooltip(n.getLastResult(),t)}static getTooltipPreviewHeading(){return(0,Me.BX)("div",{children:[(0,Me.tZ)("div",{css:yr,children:$.Z.getLabel("DashboardPropertiesPanel","tooltipPreview")}),(0,Me.tZ)("hr",{css:Cr})]})}}var Hr=r(5945),Vr=r(20319),jr=r(59495),qr=r(47101),zr=r(29655),$r=r(37e3);class Qr{constructor(e,t,r){this._runtimeSubscriber=r,this._resultMessage=e,this._widgetParameters=t}_onTextClick(e,t){t.preventDefault();let r=t.target;if(r=r?.closest("a"),!r)return;const i=this._resultMessage.getMetadata(),s=this._resultMessage.getFormatter();if(!i||!s)return;const n=r?.getAttribute("href"),o=this._widgetParameters.content.values?this._widgetParameters.content.values[n]?.field:void 0;if(!o)return;const a=i.getColumn(o);if(!a)return;const l=s.getDefaultAction(a),u=this._resultMessage.getQueryInfo(),d=null!=u?.datasetMetadatas[0]?u?.datasetMetadatas[0].getId():void 0,c=this._resultMessage.getData()[e],h=new sr.C3(nr.Z.RECORD_ACTION,{interactionColumn:a,event:t,extra:{datasetId:d,defaultAction:l,clickedRows:[c],menuPosition:{left:t.pageX,top:t.pageY}}}),p=new or.Z;p.setGroupings({[a.getName()]:c[a.getName()]}),this._runtimeSubscriber?.getLensConnector()?.callCapabilityMethod(T.INTERACTION,"onInteraction",[h,p])}handle(e,t){this._onTextClick(e,t)}_onInteraction(e,t){const r=new sr.C3(e.type,{interactionColumn:e.column,event:t.nativeEvent});this._runtimeSubscriber?.getLensConnector().callCapabilityMethod(T.INTERACTION,"onInteraction",[r,e.selector])}}var Yr=r(32570),Kr=r(87945);function Jr({widgetParameters:e,resultMessage:t,namespace:r,rowIndex:n,widgetLayout:o,inlineWidgetStyle:a,themedStyle:l,conditionalFormattingStyles:u,repeaterInteractionHandler:d,onContentRender:c,renderInteractiveCustomTooltip:h=(e=>e)}){const p=(0,s.useMemo)((()=>function(e){const t=new Map,r=e.getMetadata(),i=e.getFormatter(),s=r?.getColumnNames();if(!r||!i||!s)return t;for(const e of s.values()){const s=r.getColumn(e);if(s){const r=void 0!==i.getDefaultAction(s);t.set(e,r)}}return t}(t)),[t]),g=(0,Kr.Z)(e.content??{},[t],r,p,n)??[],m={...o.getWidgetStyle().getInlineStyle(),...a,...l};e.conditionalFormattingSource?.scope===Mt.WIDGET.code&&Object.assign(m,u);const _=g.map((e=>{const t=m.color||m.fontColor;let r=e;if(t&&null==e.attributes?.link&&"\n"!==e.insert){const s=e.attributes??{};r=(0,i.cloneDeep)(e),r.attributes={...s,color:t}}return r})),f=e=>e.preventDefault();return h((0,Me.BX)("div",{className:"text-container",onClick:e=>d.handle(n,e),onAuxClick:f,onContextMenu:f,style:m,children:[(0,Me.tZ)("div",{className:"gutter"}),(0,Me.tZ)(kt,{richTextContent:_,onRender:c}),(0,Me.tZ)("div",{className:"gutter"})]}))}function Xr({widgetParameters:e,viewMode:t,widgetLayout:r,isAccessible:s,row:n,formattedValue:o,inlineWidgetStyle:a,themedStyle:l,conditionalFormattingStyles:u,onContentRender:d,resultMessage:c,contentNamespace:h,renderInteractiveCustomTooltip:p}){const g=function(e){switch(e){case mt().SINGLE_LINE:return wt.SINGLE_LINE;case mt().COMPACT:return wt.COMPACT;case mt().FULL:return wt.FULL}}(t),m=ee().buildClassName("numberWidget",g?.getClassName()),_={title:e.title,size:e.titleSize,color:e.titleColor,alignment:e.textAlignment},f={color:e.numberColor,size:e.numberSize,alignment:e.textAlignment},y={...r.getWidgetStyle().getInlineStyle(),...a},b=function(e,t,r){let s;if((0,i.isEmpty)(e))s=t.noResultsLabel??$.Z.getLabel("DashboardPropertiesPanel","noResultsDefault");else{const i=t.measureField;s=r??String(e[i])}return s}(n,e,o);return(0,Me.tZ)(At,{inlineWidgetStyle:y,themedStyle:l,conditionalFormattingStyles:u,className:m,numberWidgetViewMode:g,numberRenderable:b,titleDetails:_,numberDetails:f,customizeTooltip:e.tooltip?.customizeTooltip,defaultTooltip:b,onRender:d,renderInteractiveCustomTooltip:p})}var ei=r(50760),ti=r.n(ei),ri=r(38931),ii=r(74899),si=r(36949),ni=r(16582),oi=r(42064),ai=r(29682),li=r(56977);const ui={name:"i2mu6",styles:"display:flex;flex-direction:column;justify-content:space-evenly"};var di={name:"zjik7",styles:"display:flex"};function ci({imgUrl:e,inlineWidgetStyle:t,tooltip:r,altText:i,fit:n=li.Z.ORIGINAL.getCode(),alignmentX:o=oi.Z.LEFT.getCode(),alignmentY:a=ai.Z.TOP.getCode(),widgetHeight:l,widgetWidth:u,onRender:d,renderInteractiveCustomTooltip:c=(e=>e)}){const h=(0,Z.iv)("width:",li.Z.fromCode(n).getWidth(),";height:",li.Z.fromCode(n).getHeight(),";max-width:none;",""),[p,g]=(0,s.useState)(!1),m=(0,s.useRef)(),_=ti().getImageValidator()(e),f=(0,Me.tZ)("img",{src:_,css:h,alt:i}),[y,b]=(0,s.useState)(void 0),[C,E]=(0,s.useState)(void 0);if(async function(){await new Promise((()=>{const t=new Image;t.onload=()=>{b(t.naturalHeight),E(t.naturalWidth),g(!1)},t.onerror=()=>{g(!0)},t.src=e}))}(),(0,s.useEffect)((()=>{"function"==typeof d&&d()}),[]),!_||p)return(0,Me.BX)("div",{className:"image-notfound",css:ui,children:[(0,Me.tZ)(hr.Z,{category:"utility",name:"error",assistiveText:{label:$.Z.getLabel("Image","notFound")}}),(0,Me.tZ)("span",{className:"error-label",children:$.Z.getLabel("Image","notFound")})]});const S=(0,Z.iv)("overflow:hidden;display:flex;width:inherit;height:inherit;align-items:",ai.Z.fromCode(a).getStyle(),";justify-content:",oi.Z.fromCode(o).getStyle(),";flex-direction:",n===li.Z.TILE.getCode()?"column":"row",";",""),T=(0,Me.tZ)("div",{className:"dashboard-image-container",css:S,style:t,tabIndex:r?0:-1,ref:m,children:li.Z.fromCode(n)===li.Z.TILE?(()=>{if(void 0===C||void 0===y)return;const e=Math.ceil(u/C),t=Math.ceil(l/y),r=new Array(e).fill(f),i=(0,Me.tZ)("div",{css:di,children:r});return new Array(t).fill(i)})():f});return"string"==typeof r&&r?(0,Me.tZ)(Ge.Z,{triggerStyle:{display:"contents",height:"100%"},id:"img-tooltip",align:"bottom",position:"overflowBoundaryElement",content:r,onRequestTargetElement:()=>m.current,children:T},"img-tooltip"):c(T)}const hi=(0,Z.iv)("display:flex;background-color:",z.colorBackgroundAlt,";height:100%;justify-content:center;align-items:center;color:",z.colorTextBrand,";",""),pi={name:"1azakc",styles:"text-align:center"},gi=(0,Z.iv)("width:100%;height:100%;padding:",z.spacingXxSmall,";fill:",z.brandHeaderIcon,";","");function mi({widgetParameters:e,widgetLayout:t,width:r,height:i,imageManagerDelegate:n,url:o,setUrl:a,row:l,inlineWidgetStyle:u,themedStyle:d,conditionalFormattingStyles:c,onContentRender:p,resultMessage:g,contentNamespace:m,renderInteractiveCustomTooltip:_=(e=>e)}){const{source:f,tooltip:y,altText:b,fit:C,alignmentX:E,alignmentY:S}=e;if((0,s.useEffect)((()=>{(async()=>{let e;if(c?.symbol){const t=ri.Z.fromPrefixedValue(c.symbol);t instanceof si.Z&&(e=await n.getImageManager().getImageUrl(t.namespace,t.name))}if(!e){const t=l[f];if(e=ti().getImageValidator()(t),!e&&"string"==typeof t){const{namespace:r,devName:i}=(0,h.z6)(t);e=await n.getImageManager().getImageUrl(r,i)}}e&&a(e)})()}),[l,f,c,n,a]),"string"!=typeof f||"string"!=typeof o)return(0,Me.tZ)("div",{css:hi,children:(0,Me.tZ)("span",{css:pi,children:$.Z.getLabel("Image","emptyImage")})});const T={...t.getWidgetStyle().getInlineStyle(),...u,...d,...c};if(c?.symbol){const e=ri.Z.fromPrefixedValue(c.symbol);if(e instanceof ii.Z)return c.symbolColor&&(T[vt.Z.SYMBOL_COLOR.iconStyleProperty]=c.symbolColor),_((0,Me.tZ)(hr.Z,{path:`${ni}#${e.iconName}`,css:gi,style:T,containerStyle:{width:"100%",height:"100%"}},e.code))}return(0,Me.tZ)(ci,{imgUrl:o,inlineWidgetStyle:T,tooltip:y,altText:b,fit:C,alignmentX:E,alignmentY:S,widgetHeight:i,widgetWidth:r,onRender:p,renderInteractiveCustomTooltip:_})}var _i=r(92463),fi=r(52364),yi=r(74577),bi=r.n(yi),Ci=r(12678),Ei=r.n(Ci),Si=r(25778),Ti=r.n(Si),Ii=r(82409);function vi(e){const{theme:t}=e;if(null==t)return;return{base:t,properties:{BACKGROUND_OPACITY:0}}}function Ri({chartParameters:e,chartType:t,data:r,resultsMetadata:n,resultsFormatter:o,width:a,height:l,inlineWidgetStyle:u,isAccessible:d,dashboardTheme:c=lr.Z.ORIGINAL.getCode(),onRender:h,renderChartCustomTooltip:p}){const[g,m]=(0,s.useState)(!1),_=(0,s.useRef)((0,i.uniqueId)()),f=new Ii.Z(E.Z.CHART).setId(`chart-${_.current}`).setLensMetadata(new(rr())(`lens-${_.current}`,{selectMode:rr().SelectMode.NONE},{})).setParameters({visualizationType:e.visualizationType,title:e.title,theme:vi(e),min:e.min,max:e.max,columnMap:e.columnMap,valueType:e.valueType,showMax:e.showMax,icon:e.icon,numberOfIcons:e.numberOfIcons,valuesOnLeft:e.valuesOnLeft,iconRounding:e.iconRounding,showValue:e.showValue,showPercentage:e.showPercentage,showRange:e.showRange,showLabel:e.showLabel,angle:e.angle,rangeWeight:e.rangeWeight,barWeight:e.barWeight,barColor:e.barColor,inner:e.inner,referenceLines:e.referenceLines,applyConditionalFormatting:e.applyConditionalFormatting,compactDecimalDigits:e.compactDecimalDigits,high:e.high,medium:e.medium,subtitleLabel:e.subtitleLabel}).build(),y=t.getDefinition(),b=y.buildConfig(f,n,o),C=y.buildRowsMetadata(n,o,r,f);if(e.descriptionContext){const t=[],{row:r,metadata:i}=e.descriptionContext,s=y.buildRowsMetadata(i,o,r,f);Object.entries(e.descriptionContext.row).forEach((e=>{const r=s.find((t=>t.column===e[0]))?.label;t.push(`${r}: ${e[1]}.`)})),b.description=t.join(" ")}const S=new lr.Z(c);S.getDefaultChartThemeOverride()&&null!=b.theme?.base&&(b.theme.base=S.getDefaultChartThemeOverride()),Ti().get().ready().then((()=>m(!0)));const T={...u,...S.getDefaultStyle()};return a>0&&l>0&&g?(0,Me.tZ)("div",{className:"chart-renderer",style:T,children:(0,Me.tZ)(Ei(),{chartModule:y.getEclairNGModuleName(),config:b,rows:r,rowsMetadata:C,width:a,height:l,className:"chart",renderOnDemand:!1,isAccessible:d,dashboardTheme:c,onAfterRender:h,tooltipRenderer:p})}):null}function wi({widgetParameters:e,resultMessage:t,widgetLayout:r,width:i,height:s,row:n,rowIndex:o,namespace:a,isAccessible:l,inlineWidgetStyle:u,onContentRender:d,dashboardTheme:c,renderChartCustomTooltip:h}){let p=(0,J.deepCopy)(e);p=fi.Z.getResolvedWidgetParametersByIndex(p,[t],a,o),p.descriptionContext={row:n,metadata:t.getMetadata()};const g=ur.Z.fromCode(e.visualizationType),m=[],_=bi().getAllColumnNames(e.columnMap,t.getMetadata()),f=[];for(const e of _){m.push({[e]:n[e]});const r=t.getMetadata()?.getColumn(e);r&&f.push(r)}const y=new _i.Z(f,[]),b=Object.assign({},r.getWidgetStyle().getInlineStyle(),u);let C=s,E=i;return b.borderWidth?(E-=2*b.borderWidth,C-=2*b.borderWidth):(b.borderTopWidth&&(C-=b.borderTopWidth),b.borderBottomWidth&&(C-=b.borderBottomWidth),b.borderLeftWidth&&(E-=b.borderLeftWidth),b.borderRightWidth&&(E-=b.borderRightWidth)),(0,Me.tZ)(Ri,{data:m,chartType:g,resultsMetadata:y,resultsFormatter:t.getFormatter(),chartParameters:p,width:E,height:C,inlineWidgetStyle:b,isAccessible:l,onRender:d,dashboardTheme:c,renderChartCustomTooltip:h})}class Ai{#e;#t;#r;#i;#s;#n;#o;#a;#l;#u;#d;#c;#h;#p;constructor({widgetType:e,widgetParameters:t,row:r,rowIndex:i,resultMessage:s,namespace:n,inlineWidgetStyle:o,conditionalFormattingStyles:a,formattedValue:l,onContentRender:u,runtimeSubscriber:d,dashboardTheme:c,renderInteractiveCustomTooltip:h,renderChartCustomTooltip:p}){this.#e=e,this.#t=t,this.#r=r,this.#i=i,this.#s=s,this.#n=n,this.#o=o,this.#a=a,this.#l=l,this.#u=u,this.#d=new Qr(s,t,d),this.#c=c,this.#h=h,this.#p=p}getContent({viewMode:e,widgetLayout:t,width:r,height:i,imageManagerDelegate:s,url:n,setUrl:o,isAccessible:a,dashboardTheme:l,themedStyle:u,isViewMode:d}){const c=this.#e.getCode(),h=Lr.Z.fromCode(c).getDefinition(),p={width:r,height:i};if(h.isPlaceHolder?.(this.#t))return this.#g(this.#e,t,p,d);if(h.hasInvalidConfigurationState?.(this.#t,this.#s.getMetadata())){const e=c===Lr.Z.CHART.getCode()?`chart-thumb-${this.#t.visualizationType}`:`widget-${c}`,r=Object.assign({},t.getWidgetStyle().getInlineStyle(),this.#o,p),i=this.#t.columnMap?.plots[0]||this.#t.measureField||this.#t.source;return this.#m(e,r,d,i)}switch(this.#e){case Lr.Z.TEXT:return(0,Me.tZ)(Jr,{widgetParameters:this.#t,resultMessage:this.#s,namespace:this.#n,rowIndex:this.#i,widgetLayout:t,inlineWidgetStyle:this.#o,themedStyle:u,conditionalFormattingStyles:this.#a,repeaterInteractionHandler:this.#d,onContentRender:this.#u,renderInteractiveCustomTooltip:this.#h});case Lr.Z.NUMBER:return(0,Me.tZ)(Xr,{widgetParameters:this.#t,resultMessage:this.#s,contentNamespace:this.#n,viewMode:e,widgetLayout:t,isAccessible:a,row:this.#r,formattedValue:this.#l,inlineWidgetStyle:this.#o,themedStyle:u,conditionalFormattingStyles:this.#a,onContentRender:this.#u,renderInteractiveCustomTooltip:this.#h});case Lr.Z.IMAGE:return(0,Me.tZ)(mi,{widgetParameters:this.#t,widgetLayout:t,width:r,height:i,imageManagerDelegate:s,url:n,setUrl:o,row:this.#r,inlineWidgetStyle:this.#o,themedStyle:u,conditionalFormattingStyles:this.#a,onContentRender:this.#u,resultMessage:this.#s,contentNamespace:this.#n,renderInteractiveCustomTooltip:this.#h});case Lr.Z.CHART:return(0,Me.tZ)(wi,{widgetParameters:this.#t,resultMessage:this.#s,widgetLayout:t,width:r,height:i,row:this.#r,rowIndex:this.#i,namespace:this.#n,isAccessible:a,inlineWidgetStyle:this.#o,onContentRender:this.#u,dashboardTheme:this.#c,renderChartCustomTooltip:this.#p});default:throw new Error(`Widget type "${this.#e.getCode()}" is not yet supported by Repeater Widget.`)}}getCellWidgetType(){return this.#e}getCellWidgetParameters(){return this.#t}getCellWidgetStyle(){if(this.#o){const e=(0,J.deepCopy)(this.#o);for(const t of Object.keys(e))$r.DashboardWidgetStyleProperties.includes(t)||delete e[t];return e}}#m(e,t,r,i){const s=r?"invalidCellWidgetStateMsgViewMode":"invalidCellWidgetStateMsgEditMode";return(0,Me.tZ)("div",{className:"invalid-cell-widget-state",style:t,children:(0,Me.tZ)(Yr.Z,{iconName:e,content:$.Z.getLabel("RepeaterWidget",s,i)})})}#g(e,t,r,i){return(0,Me.tZ)("div",{className:"cell-widget-placeholder",style:r,children:(0,Me.tZ)(Ae.Z,{widgetType:e,isViewMode:i,onClick:()=>{},widgetRowSpan:t.getRowSpan(),widgetColumnSpan:t.getColumnSpan()})})}}var Di=r(39917);class Li{static makeGridLayout({cardProperties:e,widgets:t,delegate:r=new jr.Z,widgetSelector:i=new qr,isPreviewMode:s=!1,isSelected:n=!1,gridLayoutStyles:o,selectedWidgetId:a,themedStyle:l={},onUpdateSelectedWidget:u=(()=>{})}){const d=new Qt.Z(this.makeGridLayoutMetadata(e,n).build()),c=new zt(d),h=[];for(let e=0;e<d.getNumColumns();e++)h.push(1);return(0,Me.tZ)(Vr,{columns:h,rows:d.getRowHeight().getRowSpec(),delegate:r,widgetSelector:i,widgets:t,previewMode:s,useBodyTracking:!0,enableKeyboardEvents:!0,removeOuterSpacing:!1,cellSpacing:c.getGridCellSpacing(),style:o??c.getInlineStyle(),maxWidth:d.getMaxWidth(),mover:new Di,selectedWidgetUIDs:a?[a]:[],onUpdateSelectedWidgets:e=>u(e[0]),themedStyle:l})}static makeCellContentProvider({cellWidgetProperty:e,row:t,rowIndex:r,lastResult:i,namespace:s,conditionalFormattingStyles:n,formattedValue:o,onContentRender:a,runtimeSubscriber:l,dashboardTheme:u=lr.Z.ORIGINAL.getCode(),renderInteractiveCustomTooltip:d,renderChartCustomTooltip:c}){const{position:h}=e,{widgetStyle:p={}}=h;let g={backgroundColor:p.backgroundColor,borderRadius:p.borderRadius};return Array.isArray(p.borderEdges)&&p.borderEdges.length>0&&(g={...g,borderEdges:p.borderEdges,...Y.getBorderStyles(p.borderEdges,p.borderColor,p.borderWidth)}),new Ai({widgetType:Lr.Z.fromCode(e.type),widgetParameters:e.parameters,row:t,rowIndex:r,resultMessage:i,namespace:s,inlineWidgetStyle:g,conditionalFormattingStyles:n,formattedValue:o,onContentRender:a,runtimeSubscriber:l,dashboardTheme:u,renderInteractiveCustomTooltip:d,renderChartCustomTooltip:c})}static makeGridLayoutMetadata(e,t){const{cellSpacingX:r,cellSpacingY:i,numColumns:s,rowHeight:n}=e,o=(t?e.selectedStyles.backgroundColor:e.styles.backgroundColor)??Nt.WHITE.getHexCode(),a=zr.getEnumByCode(n);return(new he.GridLayout).setName("Default").setRowHeight(a).setNumColumns(s).setStyle("cellSpacingX",r).setStyle("cellSpacingY",i).setStyle("backgroundColor",o)}static getConditionalFormattingStyles(e,t,r=0){let i;switch(Lr.Z.fromCode(t.type)){case Lr.Z.NUMBER:i=t.parameters.measureField;break;case Lr.Z.TEXT:i=t.parameters.conditionalFormattingSource?.field;break;case Lr.Z.IMAGE:i=t.parameters.source}if(i)return e.getColumnConditionalFormattingStyles(r,i)}static getFormattedNumber(e,t,r,i=0){if(Lr.Z.fromCode(t.type)===Lr.Z.NUMBER){const s=t.parameters.measureField;if(s){const n=(e.getRow(i)??{})[s];if("number"==typeof n){const i=t.parameters.compact??!1,o=e.getMetadata().getColumn(s);return o&&r.getFormatter()?.formatMeasure(o,n,i)||String(n)}}}}}const Mi={name:"nn7pky",styles:"div{&.ReactVirtualized__Grid{outline:none;}}"},Ni=U()({displayName:"RepeaterWidget",mixins:[Ce()],contextTypes:{appContext:V().instanceOf(Ye.Z).isRequired,appServices:V().object.isRequired,addDashboardComponent:V().func.isRequired,removeDashboardComponent:V().func.isRequired,hotkeyManager:V().instanceOf(jt()).isRequired},getInitialState:()=>({repeaterDataSource:void 0,selectedRows:[],focusedCardIndexTuple:[0,0],isAccessible:!1,dashboardTheme:lr.Z.ORIGINAL.getCode()}),shouldComponentUpdate(e,t){return!!this._widgetStatusRequiresUpdate(e,t)||(!(0,i.isEqual)(e.themedStyle,this.props.themedStyle)||this._perhapsShouldComponentUpdate(e,t))},componentDidMount(){this.props.runtimeSubscriber.addSelectionHandler(this._onSelection)},componentDidUpdate(e,t){t.repeaterDataSource&&t.repeaterDataSource!==this.state.repeaterDataSource&&this._updateInitialVisibleCellWidgets()},_onResult(e){const t=e.getMetadata();if(t){return{repeaterDataSource:new Kt(e.getData(),t,e.getFormatter()??new Jt.Z(void 0,t),null,{},this.props.resolvedWidget.getParameter("cellProperties"))}}},_render(){const e={width:"inherit",height:"inherit",...{...this.props.resolvedWidgetInlineStyle,...this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme)}};if(!this.state.repeaterDataSource)return(0,Me.tZ)(Me.HY,{children:this._renderSpinner()});const t=$.Z.getLabel("DashboardWidgetType","ariaLabel",$.Z.getLabel("DashboardWidgetType","repeater")),r=this._makeMultiGridLayouts();return(0,Me.BX)("div",{style:e,className:"repeater-widget","aria-label":t,children:[(0,Me.tZ)("div",{style:{width:"100%",height:"inherit"},children:r}),this._renderSpinner()]})},_makeMultiGridLayouts(){if((0,i.isEmpty)(this.props.resolvedWidget.getParameter("cellProperties")))return null;const e=this.state.repeaterDataSource.getTotalRows(),t=Math.max(this.props.resolvedWidget.getParameter("itemsPerRow")??1,1),r=Math.ceil(e/t);this._cardRefs=new Array(r).fill(null).map((()=>new Array(t).fill(null)));const s=this._buildDashboardMetadata(),n="Default",o=s.getLayout(n).getPage(0).getLastRowUsed(),a=s.getLayout(n).getRowHeight().getRowSpec().getValue(),l=this.props.resolvedWidget.getParameter("cardProperties"),{cellSpacingY:u=1,styles:d}=l;let c=0;d.borderEdges.includes(K().ALL_BORDERS.getCode())?c=2*d.borderWidth:(d.borderEdges.includes(K().BORDER_TOP.getCode())&&(c=d.borderWidth),d.borderEdges.includes(K().BORDER_BOTTOM.getCode())&&(c+=d.borderWidth));const h=o*(a+u)+c,p=d.topPadding??0,g=d.bottomPadding??0,m=h+p+g,_=({index:i,key:n,style:o})=>{const a=[],l=i*t,u=i===r-1?e-i*t:t,d=l+u;for(let e=l,n=0;e<d;e++,n++)a.push(this._makeGridLayout({rowIndex:e,metadata:s,cardHeight:h,numberOfCardsPerRow:t,isSelected:this._isCardSelected(e),indexX:i,indexY:n,indexYMax:u,indexXMax:r}));return(0,Me.tZ)("div",{style:{...o,display:"flex"},children:a},n)};return(0,Me.tZ)(Ut.qj,{css:Mi,onResize:this._updateInitialVisibleCellWidgets.bind(this,m,t),children:({width:e,height:t})=>(0,Me.tZ)(Ut.aV,{height:t,rowCount:r,rowHeight:m,rowRenderer:_,overscanRowCount:2,width:e})})},_makeGridLayout({rowIndex:e,metadata:t,cardHeight:r,numberOfCardsPerRow:s,isSelected:n,indexX:o,indexY:a,indexYMax:l,indexXMax:u}){const d=this.props.resolvedWidget.getParameter("cardProperties"),c=[],h=Li.makeGridLayoutMetadata(d);for(const r of t.getLayout("Default").getPage(0).getWidgetLayouts())c.push(this._makeRepeaterGridLayoutWidget(r,t,e,h,o,a));let{styles:p,selectedStyles:g}=d;const m=this.props.themedStyle??{};let _={};n?(p=Object.assign({},p,g),_={backgroundColor:m.selectedStyles?.backgroundColor??p.backgroundColor,borderColor:m.selectedStyles?.borderColor??p.borderColor}):_={backgroundColor:m.cardStyles?.backgroundColor??p.backgroundColor,borderColor:m.cardStyles?.borderColor??p.borderColor};const f=p.borderEdges??[],y={width:"100%",height:`${r}px`,backgroundColor:_.backgroundColor??Ot().WHITE.getHexCode(),flex:"0 0 auto",borderTopStyle:f.includes("top")||f.includes("all")?"solid":"none",borderRightStyle:f.includes("right")||f.includes("all")?"solid":"none",borderBottomStyle:f.includes("bottom")||f.includes("all")?"solid":"none",borderLeftStyle:f.includes("left")||f.includes("all")?"solid":"none",borderColor:_.borderColor??p.borderColor,borderWidth:p.borderWidth,borderRadius:p.borderRadius};return(0,Me.tZ)("div",{style:{width:100/s+"%",padding:`${p.topPadding??0}px ${p.rightPadding??0}px ${p.bottomPadding??0}px ${p.leftPadding??0}px`},children:(0,Me.tZ)("div",{ref:this._setCardRef.bind(this,o,a),style:y,tabIndex:(0,i.isEqual)([o,a],this.state.focusedCardIndexTuple)?0:-1,onKeyDown:this._onCardKeyDown.bind(this,e,u,l),onClick:this._selectCard.bind(this,e),role:"gridcell",className:"repeater-card"+(n?" selected":""),children:Li.makeGridLayout({cardProperties:d,widgets:c,isPreviewMode:!0,isSelected:n,themedStyle:_})})},`${this.props.widget.getId()}_${e}`)},_setCardRef(e,t,r){r&&(this._cardRefs[e][t]=r)},_onCardKeyDown(e,t,r,i){let s=this.state.focusedCardIndexTuple[0],n=this.state.focusedCardIndexTuple[1];switch(i.key){case"ArrowRight":n<r-1&&n++,this.setState({focusedCardIndexTuple:[s,n]}),this._cardRefs[s][n]?.focus();break;case"ArrowLeft":n>0&&n--,this.setState({focusedCardIndexTuple:[s,n]}),this._cardRefs[s][n]?.focus();break;case"ArrowUp":s>0&&s--,this.setState({focusedCardIndexTuple:[s,n]}),this._cardRefs[s][n]?.focus();break;case"ArrowDown":s<t-1&&s++,this.setState({focusedCardIndexTuple:[s,n]}),this._cardRefs[s][n]?.focus();break;case"Enter":if(this._selectCard(e)," ng-button "===i.target.className)return;this.setState({isAccessible:!0});break;case"Escape":this.setState({isAccessible:!1}),this._cardRefs[s][n]?.focus()}},_makeRepeaterGridLayoutWidget(e,t,r,s,n,o){const a=this.props.resolvedWidget.getParameter("cellProperties"),l=e.getWidgetId(),u=a[l],{repeaterDataSource:d}=this.state,c=d.getRow(r)??{},{resultMessage:h}=this.state,p=Li.getFormattedNumber(d,u,h,r),g=Li.getConditionalFormattingStyles(d,u,r),m=Li.makeCellContentProvider({cellWidgetProperty:u,row:c,rowIndex:r,lastResult:this.state.resultMessage,namespace:this.props.dashboardDescribe.getRuntime().getNamespace(),formattedValue:p,conditionalFormattingStyles:g,onContentRender:this._onContentRender.bind(this,this._getCardCellWidgetID(r,l)),runtimeSubscriber:this.props.runtimeSubscriber,dashboardTheme:this.props.dashboardTheme,renderInteractiveCustomTooltip:this._renderInteractiveCustomTooltip.bind(this,u.parameters.tooltip,c,r),renderChartCustomTooltip:this._renderChartCustomTooltip.bind(this,l,r)}),_=new($t())(new Qt.Z(s.build()));return new Hr.Z({cellContentProvider:m,widgetLayout:e,widgetRCProvider:this.props.widgetProvider,dashboardPluginManager:this.props.pluginManager,runtimeSubscriber:this.props.runtimeSubscriber,viewportRendering:this.props.viewportRendering,gridCellSpacing:_.getGridCellSpacing(),isTooltipMode:!1,showWidgetActions:!1,deepLinker:this.props.deepLinker,renderOnWidgetError:()=>{},layoutSwitcher:void 0,imageManagerDelegate:{getImageManager:()=>new(er())(this.props.dashboardDescribe.getMetadataHolder()),onImageUpdate:()=>{}},viewConfig:{getChromeMode:()=>this.props.chromeMode},dashboardTheme:this.props.dashboardTheme,handlers:{getMetadataProvider:()=>this.props.metadataProvider,startStepCreation:()=>{},getMetadata:()=>t,getCurrentLayout:()=>t.getLayout("Default"),widgetActionDelegate:this.props.widgetActionDelegate,openStepAsLens:()=>{},openStepAsReport:()=>{},openStepInTableau:()=>{},componentWidgetDelegate:this.props.componentWidgetDelegate,closeModal:()=>{},sdk:this.props.sdk},isAccessible:!!(0,i.isEqual)([n,o],this.state.focusedCardIndexTuple)&&this.state.isAccessible})},_buildDashboardMetadata(){const e=(new(pe())).setId(this.props.widget.getId()),t=Li.makeGridLayoutMetadata(this.props.resolvedWidget.getParameter("cardProperties")),r=this.props.resolvedWidget.getParameter("cellProperties");for(const[i,s]of Object.entries(r)){const r=s.position,n=new(pe().Widget.ofType)(E.Z.CELL.getCode()).setId(i);e.addWidget(n),t.addWidget(n,r.row,r.column,r.rowspan,r.colspan)}return e.addGridLayout(t).build()},_onSelection(e){this.setState({selectedRows:e.getData()})},_isCardSelected(e){if((0,i.isEmpty)(this.state.selectedRows)||!this._isCardSelectable())return!1;const t=this.state.repeaterDataSource.getRow(e),r=this.state.resultMessage?.getMetadata()?.getGroupings();return this.state.selectedRows.some((e=>r.every((r=>t[r.getName()]===e[r.getName()]))))},_selectCard(e){if(!this._isCardSelectable())return;const t=this.state.repeaterDataSource.getRow(e),r=new sr.C3(nr.Z.VALUE,{widgetMetadata:this.props.widget});this.props.runtimeSubscriber.getLensConnector().callCapabilityMethod(I().INTERACTION,"onInteraction",[r,new or.Z]),this.props.runtimeSubscriber.getLensConnector().callCapabilityMethod(I().SELECTION,"onSelection",[new ar.Z(this.state.selectedRows,t),A.Z.USER])},_isCardSelectable(){return this.props.widget.getLens().getSelectMode()!==rr().SelectMode.NONE&&!(0,i.isEmpty)(this.state.resultMessage?.getMetadata()?.getGroupings())},_onContentRender(e){this._initialCellWidgetsToRender&&this._initialCellWidgetsToRender.size>0&&(this._initialCellWidgetsToRender.delete(e),0===this._initialCellWidgetsToRender.size&&this._setWidgetRendered())},_updateInitialVisibleCellWidgets(e,t,{height:r}={}){if(this._height=r||this._height,!this._height&&0===this._initialCellWidgetsToRender?.size)return;this._cardHeight=e||this._cardHeight,this._cardsPerRow=t||this._cardsPerRow;const i=this.state.repeaterDataSource.getTotalRows(),s=Math.min(Math.round(this._height/this._cardHeight)*this._cardsPerRow,i);if(this._totalVisibleCards!==s){this._totalVisibleCards=s;const e=new Set;for(let t=0;t<s;t++)Object.keys(this.props.widget.getParameter("cellProperties")).forEach((r=>{const i=this._getCardCellWidgetID(t,r);this._initialCellWidgetsToRender&&!this._initialCellWidgetsToRender.has(i)||e.add(i)}));this._initialCellWidgetsToRender=e,0===this._initialCellWidgetsToRender.size&&this._setWidgetRendered()}},_getCardCellWidgetID:(e,t)=>`${e}__${t}`,_renderInteractiveCustomTooltip(e,t,r,i){if(!e||!e.customizeTooltip||!e.content)return i;const s={description:void 0,widget:(0,J.deepCopy)(e.content.widget)};if(e?.customizeTooltip&&e?.content?.description?.displayTemplate){const t=ir.Z.getResolvedWidgetParams(e?.content?.description,[this.state.resultMessage],this.props.dashboardDescribe.getRuntime().getNamespace(),r);s.description=t}const n=Ur.getCustomTooltip.bind(null,this.props.resolvedWidget.getId(),s,this.props.metadataProvider,this.props.dashboardDescribe,this.props.executeMutators,this.props.isViewMode,this.props.layoutSwitcher,this.props.deepLinker,this.props.imageManagerDelegate,!1,this._getFocusedRowValues(this.state.resultMessage,t));return(0,Me.tZ)(Ct,{getTooltipContent:n,children:i},"customTooltip")},_renderChartCustomTooltip(e,t,r){const i=this.props.widget.getParameter("cellProperties")[e];if(!ur.Z.fromCode(i.parameters.visualizationType).getDefinition().supportsCustomTooltips())return null;const s=i.parameters.tooltip;if(!s?.content)return null;const n=this.state.resultMessage,o=this.state.repeaterDataSource.getRow(t)??{},a=Er.getTooltipContent(s.content,n,!1,o,r),l=this.context,u=Ur.getCustomTooltip.bind(null,this.props.resolvedWidget.getId(),a,this.props.metadataProvider,this.props.dashboardDescribe,this.props.executeMutators,this.props.isViewMode,this.props.layoutSwitcher,this.props.deepLinker,this.props.imageManagerDelegate,!1,this._getFocusedRowValues(this.state.resultMessage,o)),d=document.createElement("div");return d.setAttribute("id","interactive-custom-tooltip-container"),Gt.render((0,Me.tZ)(Ht.Z,{context:l,children:(0,Me.tZ)(y.Z.Provider,{value:l.appContext,children:(0,Me.tZ)(qt.Z.Provider,{value:l.appServices,children:u()})})}),d),d},_getFocusedRowValues(e,t){const r=e.getMetadata()?.getGroupingColumnNames(!0,{removeCompoundParts:!0});return r?.map((e=>t[e]))}});const Oi={name:"gth0vq",styles:"height:inherit"};function Pi({cellContentProvider:e,viewMode:t,widgetLayout:r,isViewMode:i,width:n,height:o,imageManagerDelegate:a,isAccessible:l,dashboardTheme:u,themedStyle:d}){const[c,h]=(0,s.useState)(void 0),p=ee().buildClassName("cell-widget-internal",i?"":"disable-mouse");return(0,Me.tZ)("div",{className:p,css:Oi,children:e.getContent({viewMode:t,widgetLayout:r,width:n,height:o,imageManagerDelegate:a,url:c,setUrl:h,dashboardTheme:u,isAccessible:l,isViewMode:i,themedStyle:d})})}var xi=r(58815),Zi=r(84198),Fi=r(41172),ki=r(57813);const Bi=Object.freeze({slider:"slider",typeIn:"typein"});Object.freeze({none:"none",percent:"percent",currency:"currency"});const Wi=/^-?\d+(\.\d+)?$/;var Gi={name:"1fttcpj",styles:"display:flex;flex-direction:column"};function Ui({inputType:e,titleFontSize:t,titleAlignment:r,startValue:i,increments:n,title:o,handleColor:a,trackColor:l,currentValueColor:u,titleColor:d,valuesRangeColor:c,inputBorderColor:h,inputBackgroundColor:p,onSelection:g,activeValueColor:m,showValuesRange:_,showCurrentValue:f,viewMode:y=mt().COMPACT,selectedValue:b,min:C,max:E,formatValue:S}){const[T,I]=(0,s.useState)(i),[v,R]=(0,s.useState)(!1),[w,A]=(0,s.useState)(!1),[D,L]=(0,s.useState)(T),[M,N]=(0,s.useState)(i),[O,P]=(0,s.useState)(!1),x=(0,s.useRef)(null),F="string"==typeof b?b:S(Number(b),"input");i!==M&&(I(i),N(i));const k=(0,Z.iv)("flex-grow:1;margin-left:",z.spacingXSmall,";margin-right:",z.spacingXSmall,";display:flex;flex-direction:column;","");let B,W=!!o,G=z.spacingXSmall;y===mt().SINGLE_LINE?(W=!1,G=z.spacingXxSmall,e===Bi.slider&&(B=z.spacingXxSmall)):B=z.spacingSmall;const U=(0,Z.iv)("font-size:",t,"px;color:",d,";margin-bottom:",z.spacingXxSmall,";",""),H=(0,Z.iv)("color:",c,";display:",!1===_?"none":void 0,";","");let V;switch(r){case"right":V="flex-end";break;case"center":V="center";break;default:V="flex-start"}const q=(0,Z.iv)("width:100%;.slds-form-element{&.input-widget-slider{display:flex;flex-direction:column;.slds-form-element__label{display:none;}.slds-form-element__control>.slds-slider{.slds-slider__value{display:none;}input[type='range']::-webkit-slider-thumb{background:",a,";&:hover{background-color:",z.brandAccessibleActive,";border:1px solid rgba(81, 203, 238, 1);}}input[type='range']:focus::-webkit-slider-thumb{border:1px solid rgba(81, 203, 238, 1);background-color:",z.brandAccessibleActive,";}input[type='range']::-webkit-slider-runnable-track{background:",l,";background-color:",z.paletteNeutral50,";}}}&.input-widget-typeIn{.slds-input{border-color:",h,";background:",p,";color:",m,";}}}",""),Q=(0,Z.iv)("display:flex;flex-direction:column;align-self:",V,";margin-bottom:",B,";",""),Y=Gi,K=(0,Z.iv)("display:flex;color:",u,";align-self:flex-end;margin-top:",G,";button{margin-right:",z.spacingXSmall,";&:focus{border:1px solid rgba(81, 203, 238, 1);}}",""),J=(0,Z.iv)("display:flex;justify-content:flex-start;.button{padding:0 ",z.spacingXSmall,";}",""),X=(e,{value:t})=>{if(I(t),function(e,t,r){if(Wi.test(e)){const i=Number(e);if(null!=t&&null!=r)return i>=t&&i<=r;if(null!=t)return i>=t;if(null!=r)return i<=r}return!0}(t,C,E)){v&&R(!1);const e=Wi.test(t)?Number(t):t;g(new xi.Z(e))}else R(!0)},ee=e=>{"Enter"===e.key&&(P(!1),x.current?.blur())};(0,s.useEffect)((()=>{O&&x.current?.select()}),[O]);const te=(0,Me.tZ)(Zi.Z,{label:$.Z.getLabel("InputWidget","cancelBtn"),onClick:()=>{I(D),A(!1),R(!1),null!=D&&g(new xi.Z(D))},className:"button cancel-btn"}),re=(0,Me.tZ)(Zi.Z,{label:$.Z.getLabel("InputWidget","doneBtn"),onClick:(e,{value:t})=>{A(!1)},variant:"brand",className:"button done-btn",disabled:v}),ie=(0,Me.BX)("div",{className:"button-bar",css:J,children:[re,te]}),se=e=>{let t={};e&&(t={marginTop:0,marginBottom:0,minHeight:"20px",height:"20px"});const r=e&&y===mt().SINGLE_LINE;return(0,Me.BX)("div",{css:(i=r,(0,Z.iv)(".slds-form-element__help{display:",i?"none":void 0,";}","")),children:[(0,Me.tZ)("h2",{id:"edit-input-popover",className:"slds-assistive-text",children:$.Z.getLabel("InputWidget","popoverHeader")}),(0,Me.tZ)(Fi.Z,{className:"input-widget-typeIn",onChange:X,onClick:()=>P(!0),onKeyDown:ee,onBlur:()=>P(!1),type:"text",value:v?T:O?b:F,variant:"base",errorText:v?$.Z.getLabel("InputWidget","outSideRangeErrorMsg"):void 0,styleInput:{...t},inputRef:e=>x.current=e})]});var i},ne=function(e,t){let r;null!=e&&null!=t?r=`${e} - ${t}`:null!=e?r=` ${e}`:null!=t&&(r=` ${t}`);return r}(null!=C?S(C,"min"):C,null!=E?S(E,"max"):E);return(0,Me.tZ)("div",{css:q,className:"input-renderer",children:(0,Me.BX)("div",{css:k,children:[(0,Me.BX)("div",{css:Q,id:"slider-label",children:[W?(0,Me.tZ)("div",{css:U,className:"input-title",children:o}):(0,Me.tZ)("span",{className:"slds-assistive-text",children:$.Z.getLabel("InputWidget","sliderLabel")}),_&&(0,Me.tZ)("span",{className:"slds-assistive-text",children:"input range"}),(0,Me.tZ)("div",{css:H,className:"type-in-range",children:ne})]}),e===Bi.typeIn?se(y===mt().SINGLE_LINE):(0,Me.BX)("div",{css:Y,children:[(0,Me.tZ)(ki.Z,{id:"free-form-input-box",classNameContainer:"input-widget-slider",min:C,max:E,onChange:(e,{value:t})=>{I(t),g(new xi.Z(t))},step:n,disabled:!1,value:b,"aria-describedby":"slider-label"}),f&&(0,Me.BX)("div",{css:K,className:"current-value",children:[(0,Me.tZ)(j.Z,{isOpen:w,className:"edit-input",body:se(!1),footer:ie,position:"overflowBoundaryElement",align:"bottom left",hasNoCloseButton:!0,ariaLabelledby:"edit-input-popover",footerStyle:{backgroundColor:"white"},hasNoTriggerStyles:!0,onRequestClose:()=>A(!1),children:(0,Me.tZ)(Zi.Z,{assistiveText:{icon:$.Z.getLabel("InputWidget","editButtonLabel")},"aria-haspopup":"true",iconCategory:"utility",iconName:"edit",iconSize:"small",variant:"icon",onClick:()=>{L(T),A(!0)},className:"edit-btn"})}),F]})]})]})})}const Hi=U()({displayName:"InputWidget",mixins:[Ce()],shouldComponentUpdate(e,t){return this._perhapsShouldComponentUpdate(e,t)},componentDidMount(){this._removeSelectionHandler=this.props.runtimeSubscriber.addSelectionHandler(this._onReceiveSelection)},componentDidUpdate(e,t){const r=t.resultMessage?.getData()?.[0]?.input,i=this.state.resultMessage?.getData()?.[0]?.input;this.props.isViewMode||null==r||r===i||null==i||this._onSelection(new xi.Z(i))},componentWillUnmount(){this._removeSelectionHandler?.()},_onResult(e){return this._setWidgetRendered(),{selectedValue:e.getData()?.[0]?.input}},_render(){if(null==this.state.resultMessage)return(0,Me.tZ)("div",{});const e={width:"inherit",height:"inherit",display:"flex",alignItems:"center",overflow:"hidden",...this.props.resolvedWidgetInlineStyle};let{inputType:t,titleFontSize:r,titleAlignment:i,increments:s,title:n,handleColor:o,trackColor:a,currentValueColor:l,titleColor:u,valuesRangeColor:d,inputBorderColor:c,inputBackgroundColor:h,activeValueColor:p,showValuesRange:g,showCurrentValue:m}=this.props.resolvedWidget.getParameters();const _={...e,...this.props.themedStyle};if(this.props.themedStyle?.color){const e=this.props.themedStyle.color;o=a=u=c=e,l=d=p=e,h=this.props.themedStyle.backgroundColor}const f=this.state.resultMessage.getData()?.[0]??{},{min:y,max:b,input:C}=f;return(0,Me.tZ)("div",{className:"input-widget",style:_,children:(0,Me.tZ)(Ui,{inputType:t,titleFontSize:r,titleAlignment:i,min:y,max:b,startValue:C,selectedValue:this.state.selectedValue,increments:s,showValuesRange:g,title:n,handleColor:o,trackColor:a,currentValueColor:l,titleColor:u,valuesRangeColor:d,inputBorderColor:c,inputBackgroundColor:h,onSelection:this._onSelection,activeValueColor:p,viewMode:this.props.viewMode,showCurrentValue:m,formatValue:this._formatValue})})},_onSelection(e){this.props.runtimeSubscriber.getLensConnector().callCapabilityMethod(I().SELECTION,"onSelection",[e,A.Z.USER])},_onReceiveSelection(e){const t=e.getData()?.[0]??{},{input:r}=t;this.setState({selectedValue:r})},_formatValue(e,t){const{resultMessage:r}=this.state,i=r.getMetadata()?.getColumn(t);return i?r.getFormatter()?.formatMeasure(i,e,!1):e}}),Vi=Hi,ji=(0,k.Z)((()=>Promise.resolve().then(r.t.bind(r,22422,19)))),qi=(0,k.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(276)]).then(r.bind(r,85334)))),zi=(0,k.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(288)]).then(r.t.bind(r,60176,19)))),$i=(0,k.Z)((()=>Promise.all([r.e(441),r.e(571)]).then(r.t.bind(r,550,19)))),Qi=(0,k.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(114)]).then(r.bind(r,49064)))),Yi=(0,k.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(42)]).then(r.bind(r,28936)))),Ki=(0,k.Z)((()=>Promise.all([r.e(441),r.e(592),r.e(798)]).then(r.bind(r,83153))));class Ji extends B.Z{constructor(){super([[E.Z.CHART,ji],[E.Z.TABLE,qi],[E.Z.CONTAINER,W],[E.Z.COMPONENT,Ki],[E.Z.DATE_SELECTOR,zi],[E.Z.GLOBAL_FILTER,$i],[E.Z.FILTER_PANEL,Oe],[E.Z.LINK,nt],[E.Z.IMAGE,ht],[E.Z.LIST,Qi],[E.Z.NUMBER,Dt],[E.Z.RANGE,Yi],[E.Z.TEXT,Bt],[E.Z.TOGGLE,Wt],[E.Z.NAVIGATION,We],[E.Z.REPEATER,Ni],[E.Z.INPUT,Vi],[E.Z.CELL,Pi]])}}const Xi=300,es="custom-tooltip-body";function ts({widget:e,width:t,height:r,metadataProvider:i,dashboardDescribe:n,executeMutators:o,isViewMode:a=!1,layoutSwitcher:l,deepLinker:u,imageManagerDelegate:d}){const c=n.getMetadataHolder().getMetadata(),h=n.getCurrentLayoutName(),p=n.getRuntime(),g=e.getId(),m=t??Xi,_=r??Xi,f=new Ji,y=E.Z.fromCode(e.getType()),b=R.Z.getWidgetRuntimeId(g),C=c.getLayout(h);let S;p.hasSubscriber(b)&&(S=p.getSubscriber(b));const T={key:g,width:m,height:_,widget:e,widgetLayout:new O.Z(h,0,0,{name:g,row:0,column:0,rowspan:1,colspan:1},c),viewMode:y.getDefinition().getViewMode(c.getLayout(h).getRowHeight(),c.getLayout(h).getNumColumns(),m,_),widgetType:y,runtimeSubscriber:S,isViewMode:a,dashboardMetadata:c,dashboardDescribe:n,widgetProvider:f,metadataProvider:i,executeMutators:o,getCurrentLayout:()=>C,layoutSwitcher:l,deepLinker:u,imageManagerDelegate:d,isTooltipMode:!0,cellContentProvider:void 0,chromeMode:void 0,showModal:void 0,closeModal:void 0,componentWidgetDelegate:void 0,contextualHelp:void 0,containedWidgets:[],dashboardTheme:void 0,themedStyle:void 0,delegate:void 0,getCurrentRightPanelMode:void 0,gridCellSpacing:void 0,isAccessible:void 0,pluginManager:new x.Z(void 0,(()=>({})),(()=>{})),renderOnWidgetError:void 0,sdk:void 0,showFilterCreationWizard:void 0,startStepCreation:void 0,toggleRightPanel:void 0,updateRightPanel:void 0,viewportRendering:!1};return(0,Me.tZ)("div",{css:F(m,_),className:es,children:(0,s.createElement)(P.Z,T)})}const rs=500,is="custom-tooltip-description";function ss(e){const t=e=>new Q.Z(e),r=e.description.map(((e,r)=>{const i=t(null==e?"":"string"==typeof e?e:e.value);return(0,Me.tZ)(Ue,{prettyRenderable:i},r)}));return(0,Me.tZ)("div",{css:(i=e.widgetWidth??0,s=rs,n=e.hasLegend,o=e.labelColor,(0,Z.iv)("max-width:",Math.max(i,s),"px;margin-bottom:",n?z.spacingSmall:0,";white-space:pre-wrap;color:",o,";","")),className:is,children:r});var i,s,n,o}const ns={name:"1hd7jna",styles:"line-height:20px;border-radius:3px;white-space:pre-line"};function os(e){return(0,Z.iv)("margin-top:",e?0:"0.25rem",";","")}function as(e){return(0,Z.iv)("display:flex;margin-top:",e?0:"0.75rem",";","")}function ls(e,t){return(0,Z.iv)("vertical-align:top;text-align:",t?"right":"left",";flex-grow:",e?1:void 0,";","")}function us(e,t){return(0,Z.iv)("color:",e,";padding-left:",t,"px;font-weight:normal;font-size:13px;margin-bottom:0px;display:block;","")}function ds(e,t){return(0,Z.iv)("background-color:",e,";height:",t,"px;width:4px;display:inline-block;border-radius:2px;position:absolute;","")}const cs=12,hs=0,ps=36,gs=18;function ms(e){const{dimensions:t,measures:r,themeColors:i}=e;if(!t?.length&&!r?.length)return null;const s=t?.map(((e,t)=>_s(e,t,i,!1))),n=r?.map(((e,t)=>_s(e,t,i,!0)));return(0,Me.BX)("div",{css:ns,children:[s,s&&s.length>0&&n&&n.length>0?(0,Me.tZ)("hr",{css:_r}):void 0,n?.length?(0,Me.tZ)("div",{children:n}):void 0]})}function _s(e,t,r,i){const{label:s,value:n,color:o,percentData:a}=e,{labelColor:l,valueColor:u}=r,d=o?cs:hs,c=(0,Me.tZ)("label",{css:us(l,d),children:s}),h=i?gs:ps,p=o?(0,Me.tZ)("span",{css:ds(o,h)}):void 0,g=(0,Me.tZ)("label",{css:us(u,d),children:n});let m;if(null!=a){const{percent:e,total:t,group:r,placeholderText:i}=a;m=(0,Me.tZ)("small",{css:(_=l,(0,Z.iv)("color:",_,";margin-top:0.375rem;","")),children:` (${i??$.Z.getLabel("CustomTooltip",r?"legendPercentTooltipWithGroup":"legendPercentTooltip",e??"",t??"",r??"")})`})}var _;const f=0===t;return i?(0,Me.BX)("div",{css:as(f),children:[(0,Me.tZ)("div",{css:ls(!1,!1),children:p}),(0,Me.tZ)("div",{css:ls(!1,!1),children:c}),(0,Me.BX)("div",{css:ls(!0,!0),children:[g,m]})]},`tooltip-legend-mea-item-${t}`):(0,Me.BX)("div",{css:os(f),children:[p,c,g]},`tooltip-legend-dim-item-${t}`)}const fs=(0,s.memo)(ms),ys=o().__getPrivateApi().getSdk().ThemeFactory.getInstance().getDefaultTheme(),bs="tooltipLensReadyFilter";function Cs({widgetId:e,content:t,metadataProvider:r,dashboardDescribe:n,executeMutators:o,isViewMode:p=!1,layoutSwitcher:m,deepLinker:T,imageManagerDelegate:D,focusedRowValues:L,isPreview:O=!1}){const P=n.getMetadataHolder(),x=(0,s.useContext)(y.Z),{description:Z,legend:F,widget:k}={...t},B=k?.name,W=k?.height,G=k?.width,U=B&&P?.getMetadata().hasWidget(B)?P?.getMetadata().getWidget(B):void 0,H=P.getMetadata().getWidget(e),V=n.getRuntime(),j=Array.from(P.getDependencyAnalyzer().getWidgetLazyLoadDependencies(e,null!=U).keys()),[q,z]=(0,s.useState)([]),[$,Q]=(0,s.useState)([]),[Y,K]=(0,s.useState)(!1),J=(0,s.useCallback)((()=>{const e=O?"killerTooltipPreviewRenderCount":"killerTooltipRenderCount",t=H.getType(),r=U?.getType();(O||!(0,i.isEmpty)(k?.name)||t===E.Z.NUMBER.getCode()&&!(0,i.isEmpty)(Z))&&a.Z.get(l.Z).trigger(new u.Z(d.Z.DASHBOARD,e,1,{type:c.Z.AGGREGATE,categories:[t,r],appInstanceId:x.appInstanceId}))}),[O,H,U,Z,k,x]),X=(0,s.useCallback)((t=>{if((0,i.isEmpty)(t)||(0,i.isEmpty)(L))return;const r=new v.Z;(0,i.isEmpty)(L)||r.addSelectedValue(L);V.getSubscriber(R.Z.getWidgetRuntimeId(e)).getLensConnector().onFocus(r,t)}),[e,V,L]),ee=(0,s.useCallback)((t=>{if((0,i.isEmpty)(t))return;V.getSubscriber(R.Z.getWidgetRuntimeId(e)).getLensConnector().onRemoveFocus(t)}),[e,V]),te=(0,s.useCallback)((()=>{j.forEach((e=>{const t=V.getLens(e);t&&!t.isStarted()?(V.startLens(t),q.push(e),z([...q])):t&&t.getStatus()===S.Z.PAUSED&&(t.resume(),q.push(e),z([...q]))}))}),[j,V,q]),re=(0,s.useCallback)(((e,t)=>{e.forEach((e=>{const r=t.getLens(e),s=r?.callCapabilityMethod(I().SELECTION,"getSelectedRows");r?.hasValidLastResult()&&!(0,i.isEmpty)(s)&&r?.callCapabilityMethod(I().SELECTION,"onSelection",[new w.Z,A.Z.USER]),r?.reset()}))}),[]),ie=(0,s.useCallback)((()=>{const e=P.getMetadata().getType()===f.Z.COMPONENT?j.map((e=>(0,N.$)(e,V.getNamespace()))):j;U&&U.hasLens()&&(K(!0),V.addFilter(bs,new M(P.getMetadata().getType()===f.Z.COMPONENT?[(0,N.$)(U.getLensId(),V.getNamespace())]:[U.getLensId()],(()=>{g().trigger("DEPRECATED:spinner:enable"),K(!1)})))),X(e),te()}),[U,V,P,j,X,te]),se=(0,s.useCallback)((()=>{V.getFilter(bs)&&V.removeFilter(bs),re(q,V),ee(j)}),[V,j,ee,re,q]),ne=(0,s.useCallback)((()=>{if(!U)return null;const e=U.getParameter("source"),t=(0,h.Oz)(e?.name,e?.namespace);let i;r.provide(f.Z.COMPONENT,[t],P.getMetadata().getDateVersion()).then((([e])=>{i=e[0];const r=U.getParameter("shareState"),s=U.getParameter("pageName"),o=new C.Z(i,P.getComponentAssetExtendedMetadata(t),new b.Z);$.push(...o.getDependencyAnalyzer().getLensIdsToStart(i.getLayout().getName(),i.getPageIndex(s))),Q([...$]);const a=n.getComponentRuntime(t),l=r?$.map((e=>(0,N.$)(e,t))):$;r&&(l.push(...j),X(l)),l.length>0&&a&&(K(!0),a?.addFilter(bs,new M([...l],(()=>{g().trigger("DEPRECATED:spinner:enable"),K(!1)})))),a?.setStartedLenses($),te()}))}),[U,n,r,P,j,X,te,$]),oe=(0,s.useCallback)((()=>{if(re(q,V),!U)return null;const e=U.getParameter("source"),t=(0,h.Oz)(e?.name,e?.namespace),r=n.getComponentRuntime(t),i=U.getParameter("shareState");if(r){if(i){re($,r);const e=$.map((e=>(0,N.$)(e,t)));e.push(...j),ee(e)}else re($,r),ee(j);r.getFilter(bs)&&r.removeFilter(bs)}}),[U,n,j,V,ee,re,q,$]);if((0,s.useEffect)((()=>{if(J(),p)return U&&g().trigger("DEPRECATED:spinner:disable"),U&&U.getType()===E.Z.COMPONENT.getCode()?ne():ie(),()=>{p&&(g().trigger("DEPRECATED:spinner:enable"),U&&U.getType()===E.Z.COMPONENT.getCode()?oe():se())}}),[]),!t)return null;const ae=!(0,i.isEmpty)(F?.dimensions)||!(0,i.isEmpty)(F?.measures);let le;return(Z||ae)&&U&&(le=(0,Me.tZ)("hr",{css:_r})),(0,Me.BX)("div",{className:"custom-tooltip-content",children:[Y&&(0,Me.tZ)(_(),{}),Z&&(0,Me.tZ)(ss,{hasLegend:ae,widgetWidth:G??0,description:Z,labelColor:ys.getToolTipLabelColor().toRGBAString()}),F&&(0,Me.tZ)(fs,{dimensions:F.dimensions,measures:F.measures,themeColors:{valueColor:ys.getToolTipValueColor().toRGBAString(),labelColor:ys.getToolTipLabelColor().toRGBAString()}}),le,U&&(0,Me.tZ)(ts,{widget:U,width:G,height:W,metadataProvider:r,dashboardDescribe:n,executeMutators:o,isViewMode:p,layoutSwitcher:m,deepLinker:T,imageManagerDelegate:D})]})}const Es=(0,s.memo)(Cs)},41200:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(32574),s=r.n(i),n=(r(55949),r(35944));function o({actions:e,isVertical:t=!0}){const r=s().classSet({"dashboard-button-bar":!0,"dashboard-button-bar-vertical":t});return(0,n.tZ)("div",{className:r,children:e.map((e=>e.render(e.isToggled(),e.onClick.bind(e),!0)))})}},9111:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(32574),s=r.n(i),n=(r(41600),r(34754)),o=r(35944);function a(e){const t=s().buildClassName(n.Py,e.isWide&&n.Ho);return(0,o.tZ)("div",{className:t,children:e.pluginManager.getLeftPanelRenderable()})}},14084:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(67294),s=r(8902),n=r.n(s),o=r(32574),a=r.n(o),l=(r(17399),r(34754)),u=r(35944);class d extends i.Component{render(){if(!this.props.isOpen&&!this.props.hasHandle)return null;const e=a().buildClassName(l.ij,this.props.isOpen&&l.L6,this.props.isWide&&l.Ho,this.props.hasHandle&&l.uy),t=this.props.isOpen?"chevronright":"chevronleft";return(0,u.BX)("div",{className:e,children:[this.props.pluginManager.getOverlappingPanelRenderable(),this.props.pluginManager.getRightPanelRenderable(),this.props.hasHandle&&(0,u.tZ)("div",{className:l.vc,onClick:this.props.toggleRightPanel,children:(0,u.tZ)("div",{className:"iconWrapper",children:(0,u.tZ)(n(),{iconName:t})})})]})}}},93323:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(67294);var s=r(35944);const n={name:"13udsys",styles:"height:100%"};function o({widget:e,widgetType:t,...r}){const{originalWidget:o,resolvedWidget:a,resolvedWidgetInlineStyle:l}=function({widget:e,widgetLayout:t,runtimeSubscriber:r}){const[s,n]=(0,i.useState)(e),[o,a]=(0,i.useState)(r.getWidget(e)),[l,u]=(0,i.useState)(r.getWidgetInlineStyle());return(0,i.useEffect)((()=>r.addWidgetBindingsHandler((()=>{n(e),a(r.getWidget(e)),u(r.getWidgetInlineStyle())}))),[r,e]),{originalWidget:s,resolvedWidget:o,resolvedWidgetInlineStyle:l}}({widget:e,widgetLayout:r.widgetLayout,runtimeSubscriber:r.runtimeSubscriber}),u=(0,i.useMemo)((()=>r.widgetProvider.getComponentClass(t)),[r.widgetProvider,t]),d=(0,i.createElement)(u,{key:"widget",...r,widgetDefinition:t.getDefinition(),widget:o,resolvedWidget:a,resolvedWidgetInlineStyle:l,...r.pluginManager.getInjectedWidgetProps(o)}),c=r.pluginManager.getWidgetDecorationRenderables(e.getId(),r.isViewMode,r.dashboardMetadata).concat([d]);return(0,s.tZ)("div",{className:"dashboard-widget",css:n,children:c})}},84956:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var i=r(67294),s=r(50130),n=r(97761),o=r(70917),a=r(32574),l=r.n(a),u=r(8429),d=r(16582),c=r(64031),h=r(61506),p=r(18111),g=r(57244),m=r(90493),_=r(35944);function f(e,t){if(e===c.Z.CONNECTOR_INVALID_TOKEN_ERROR){const e=h.Z.get(p).getAppRoot()+(g.Z.has(g.Z.ORG_HAS_LIGHTNING_EXPERIENCE_ENABLED)?m.PERSONAL_SETTING_PAGE:m.PERSONAL_SETTING_CLASSIC_PAGE);return(0,_.tZ)("span",{dangerouslySetInnerHTML:{__html:u.Z.getLabel("DashboardWidgetErrorMessage","snowFlakeConnectionUnauthorizedError",e)}})}return(0,_.tZ)("span",{children:t})}var y=r(85931),b=r(84198);const C=(0,o.iv)(".messageLabel{padding-top:",n.spacingSmall,";padding-bottom:",n.spacingSmall,";}.message{padding:",n.spacingSmall,";background-color:hsl(210, 44.4%, 96.5%);font-family:",n.fontFamilyMonospace,";line-height:",n.varLineHeightText,";white-space:pre-wrap;}","");function E({title:e=u.Z.getLabel("InsightsConfirmDialog","warningTitle"),messageLabel:t,message:r,prompt:i="warning",containerClassName:s="wave-modal",onRequestClose:n}){return(0,_.tZ)(y.Z,{heading:e,footer:(0,_.tZ)(b.Z,{label:u.Z.getLabel("InsightsConfirmDialog","okButton"),onClick:n}),onRequestClose:n,isOpen:!0,prompt:i,size:"medium",containerClassName:s,children:(0,_.BX)("div",{css:C,children:[(0,_.tZ)("div",{className:"messageLabel",children:t}),(0,_.tZ)("div",{className:"message",children:r})]})})}const S=(0,o.iv)("fill:",n.colorTextIconDefault,";","");function T({widget:e,isViewMode:t,errorCode:r,errorMessage:n}){const[o,a]=(0,i.useState)(!1),c=t?u.Z.getLabel("DashboardWidgetErrorMessage","cantDisplayMessage"):u.Z.getLabel("DashboardWidgetErrorMessage","resultErrorEditMode",e.getLensId(),"."),h=t?u.Z.getLabel("DashboardWidgetErrorMessage","resultErrorViewMode"):u.Z.getLabel("DashboardWidgetErrorMessage","resultErrorEditMode",e.getLensId(),":"),p=l().classSet({"widget-error":!0,widgetReady:!0,finalState:!0,"edit-mode":!t});return(0,_.BX)("div",{className:p,children:[(0,_.tZ)("div",{className:"error-message-container",children:(0,_.BX)("div",{className:"error-message","data-tooltip":c,children:[(0,_.tZ)(s.Z,{path:`${d}#error`,size:"medium",css:S}),(0,_.BX)("span",{children:[(0,_.tZ)("span",{children:c}),"",(0,_.tZ)("a",{className:"moreDetails",onClick:e=>{e.preventDefault(),a(!0)},children:u.Z.getLabel("DashboardWidgetErrorMessage","moreDetails")})]})]})}),o&&(0,_.tZ)(E,{message:f(r,n),messageLabel:h,containerClassName:"widget-error-modal",onRequestClose:()=>{a(!1)}})]})}},67932:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(57715),s=r(17900),n=r(56529),o=r(35944);function a({inlineEditState:e,width:t}){if(null==e)return null;const r=e.getInlineEditStatus()===n.Z.UPLOADING,a=e.getStatusMessage();return(0,o.BX)(o.HY,{children:[r&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(i.Z,{variant:"brand",className:"dashboard-widget-spinner"}),null!=a&&(0,o.tZ)("span",{className:"widget-spinner-text",children:a})]}),e.isInEditMode()&&(0,o.tZ)(s.Z,{width:t})]})}},32570:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(50130),s=r(16582),n=r(48556),o=r(35944);const a={name:"gth0vq",styles:"height:inherit"},l={name:"wizmhz",styles:"position:absolute;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);fill:#5c7a99"};function u({iconName:e,content:t}){return(0,o.BX)("div",{className:"invalid-widget-state",css:a,children:[(0,o.tZ)(i.Z,{variant:"icon",path:`${s}#${e}`,css:l,size:"small"}),(0,o.tZ)(n.Z,{content:t})]})}},56331:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(8902),s=r.n(i),n=r(8429),o=r(35944);function a(){return(0,o.tZ)("div",{className:"image-notfound",children:(0,o.BX)("div",{className:"error-elements",children:[(0,o.tZ)(s(),{iconName:"widget-image"}),(0,o.tZ)("span",{className:"error-label",children:n.Z.getLabel("Image","notFound")})]})})}},17900:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(35944);function s({width:e}){const t=null!=e?{width:`${e}px`}:{};return(0,i.tZ)("div",{className:"widget-overlay",style:t})}},48556:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(97761),s=r(76126),n=r(84198),o=r(70917),a=r(8429),l=r(35944);const u=(0,o.iv)("position:absolute;bottom:0;right:0;transform:translateX(-30%) translateY(-30%);z-index:2;svg{fill:",i.colorBackgroundWarning,";}.slds-popover__body{min-width:20rem;line-height:",i.lineHeightText,";}","");function d({content:e,onClick:t}){let r=e;const i={};return t&&(i.onClick=t,r=(0,l.BX)(l.HY,{children:[e,(0,l.tZ)("div",{className:"slds-m-top_x-small",children:a.Z.getLabel("WidgetWarning","learnMore")})]})),(0,l.tZ)("div",{className:"widget-warning",css:u,children:(0,l.tZ)(s.Z,{content:r,position:"overflowBoundaryElement",children:(0,l.tZ)(n.Z,{variant:"icon",iconCategory:"utility",iconName:"warning",iconSize:"medium",...i})})})}},46579:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t,r){super("SMART_DATA_DISCOVERY_COUNT_RIPPLE",e),this.countMap=new Map,this.action=t,this._message=r}incrementCount(e){const t=this.countMap.get(e)??0;this.countMap.set(e,t+1)}getCountMap(){return this.countMap}getMessage(){return JSON.stringify({...this._message,counts:{...Object.fromEntries(this.countMap)}})}}},57587:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t){super("SMART_DATA_DISCOVERY_LOG_COUNT_RIPPLE",e),this.ripple=t}getWrappedRipple(){return this.ripple}}},31574:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(67294),s=r(84198),n=r(8429),o=r(8666),a=r.n(o),l=r(35944);class u extends i.PureComponent{static defaultProps={isOpen:!1,error:"",onClose:()=>{},headerLabel:"",errorFoundLabel:"",errorDetailsLabel:"",prompt:"error"};render(){const e=this.props.headerLabel||n.Z.getLabel("reportBuilder","errorSomethingWrong"),t=this.props.errorFoundLabel||n.Z.getLabel("reportBuilder","errorFound"),r=this.props.errorDetailsLabel||n.Z.getLabel("reportBuilder","errorDetails"),i=(0,l.tZ)(s.Z,{label:n.Z.getLabel("reportBuilder","next"),onClick:this.props.onClose});return(0,l.BX)(a(),{id:"error-modal",containerClassName:"error-modal",isOpen:this.props.isOpen,heading:e,prompt:this.props.prompt,size:"medium",directional:!1,disableClose:!1,dismissOnClickOutside:!0,onRequestClose:this.props.onClose,footer:i,children:[(0,l.tZ)("p",{className:"error-modal-description",children:t}),(0,l.BX)("div",{className:"error-modal-error-container",children:[(0,l.tZ)("p",{className:"error-modal-details",children:r}),(0,l.tZ)("p",{className:"error-modal-error",children:this.props.error})]})]})}}u.displayName="ErrorModal"},76916:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(50130),s=r(51972),n=r(2931),o=r(61506),a=r(18111),l=r.n(a),u=r(35944);function d({dragDetails:e=[]}){const t=(e,t,r,i)=>(0,u.BX)("span",{className:e||!r?"drag-label-ok":"drag-label-error",children:[(0,u.tZ)("p",{children:t}),(0,u.tZ)("p",{children:i})]});return(0,u.tZ)(s.Z,{className:"report-drag-image",hasNoHeader:!0,children:(0,u.tZ)(n.Z,{iconPath:o.Z.get(l()).getSLDSIconsPath(),children:e.map((e=>(e=>{let r;var s;return e.displayIcon&&(r=(0,u.tZ)("div",{className:"slds-media__figure",children:(s=e.canAddField,s?(0,u.tZ)(i.Z,{name:"success",size:"small",category:"utility",className:"drag-image-ok"}):(0,u.tZ)(i.Z,{name:"ban",size:"small",category:"utility",className:"drag-image-error"}))})),(0,u.BX)("div",{className:"slds-media slds-media_small slds-media_center "+(e.displayIcon?"slds-p-around_x-small":"slds-p-horizontal_medium"),children:[r,(0,u.tZ)("div",{className:"slds-media__body",children:t(e.canAddField,e.label,e.displayIcon,e.additionalText)})]},e.label)})(e)))})})}},98584:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(67294),s=r(84198),n=r(6343),o=r(50130),a=r(50656),l=r(8429),u=r(70917),d=r(97761);const c=(0,u.iv)(".slds-popover__body{background:",d.colorBackgroundModalBrand,";color:",d.colorTextBrandPrimary,";font-size:",d.fontSizeTextSmall,";margin-left:",d.spacingXSmall,";margin-bottom:",d.spacingXSmall,";}&.slds-popover{background-color:",d.colorBackgroundModalBrand,";}.slds-button_icon{color:",d.colorTextBrandPrimary,";}.slds-popover__header{background:",d.colorBackgroundModalBrand,";}.slds-popover__footer{background:",d.colorStrokeBrandActive,";}&.slds-popover{.slds-popover__header h2{color:",d.colorTextBrandPrimary,";font-size:",d.fontSizeHeadingMedium,";margin-left:",d.spacingXSmall,";margin-top:",d.spacingXSmall,";margin-right:",d.spacingXSmall,";}.slds-popover__footer button:hover{background-color:",d.colorBorderBrandPrimaryFocus,";color:",d.colorTextBrandPrimary,";}}","");var h=r(35944);class p extends i.Component{state={showOnboardingPopover:!1};_setShowOnboardingPopover=e=>{this.setState({showOnboardingPopover:e})};async _onCloseOnboardingPopover(){this._setShowOnboardingPopover(!1);try{await a.Z.setReportOnboarding(this.props.experienceId)}catch{}}async componentDidMount(){try{(await a.Z.getReportOnboarding(this.props.experienceId)).hasSeenOnboarding||this._setShowOnboardingPopover(!0)}catch{this._setShowOnboardingPopover(!1)}}_getOnboardingFooterButton(){return(0,h.tZ)("div",{className:"slds-text-align_right",children:(0,h.tZ)(s.Z,{label:l.Z.getLabel("GenerativeAiGeneral","gotIt"),onClick:()=>this._onCloseOnboardingPopover()},"gotIt")})}render(){return(0,h.tZ)(h.HY,{children:(0,h.tZ)(n.Z,{isOpen:this.state.showOnboardingPopover,heading:this.props.headerText,body:this.props.bodyText,onRequestClose:()=>this._setShowOnboardingPopover(!1),triggerClassName:"experience-popover-trigger",classNameBody:"experience-popover-body",variant:"walkthrough",position:"overflowBoundaryElement",align:"left top",css:c,icon:(0,h.tZ)(o.Z,{category:"utility",name:"description",size:"small",inverse:!0}),footer:this._getOnboardingFooterButton(),children:this.props.children})})}}},95871:(e,t,r)=>{"use strict";r.d(t,{Z:()=>me});var i=r(67294),s=r(96486),n=r.n(s),o=r(8429),a=r(90554),l=r(74978),u=r(32574),d=r(3886),c=r(64933),h=r.n(c),p=r(31107),g=r(75782),m=r(35944);class _ extends d.Z{_blockTrees={};constructor(e=[],t={},r=!1,i,s){let n;for(super(),this._blocks=e,this._reportTypes=t,this._parsingUtil=c.get(),n=0;n<e.length;n++){const i=e[n];this._blockTrees[i.blockId]=new p.Z(this._buildBlockCategories(t[i.reportType.type].categories,i.blockId,r),{},s,!1,n)}i&&(this._groupingTree=new p.Z([i],{},s,!1,n)),this._init()}getClassName(){return u.buildClassName(super.getClassName(),"joinedReportFieldsTree","multiBlockFieldsTree")}_buildTreeBranches(e=[g.Z.ALL],t,r){const i=[];let s=0;if(!this._blocks||!this._reportTypes)return i;for(let n=0;n<this._blocks.length;n++){const o=this._blocks[n],a=this._blockTrees[o.blockId].getTreeNodes(e,t,r);if(a.length>0){const e=o.name;s=this._lookupBranchIndex(e,s),i.push({nodes:a,label:(0,m.tZ)("span",{className:"tree-block-label",children:e}),labelWithoutCount:e,reportType:o.reportType.type,type:"branch",id:"blockFolder"+o.blockId,expanded:!!t||this._isExpanded(s)})}s++}if(this._groupingTree){const n=this._groupingTree.getTreeNodes(e,t,r)[0];if(n){const e=n.labelWithoutCount;s=this._lookupBranchIndex(e,s),i.push({nodes:n.nodes,label:(0,m.tZ)("span",{className:"tree-grouping-label",children:e}),labelWithoutCount:e,type:"branch",id:"groupingFolder",expanded:!!t||this._isExpanded(s)})}s++}return i}_lookupBranchIndex(e,t){let r=t;if(this._allNodes&&this._allNodes.length>0)for(;e!==this._allNodes[r].labelWithoutCount;)r++;return r}_buildBlockCategories(e,t,r){const i=[];r&&i.push(this._buildRecordCountCategory(t));for(let r=0;r<e.length;r++){const s=e[r],n=(0,a.deepCopy)(s),o=s.columns;n.columns={};for(const e of Object.keys(o))n.columns[this._parsingUtil.addBlockPrefixToColumnName(e,t)]=o[e];i.push(n)}return i}_buildRecordCountCategory(e){const t={label:o.Z.getLabel("reportBuilder","count"),isAggregatable:!1,columns:{}};return t.columns[this._parsingUtil.getBlockRowCountName(e)]={dataType:"int",label:o.Z.getLabel("reportBuilder","recordCount")},t}}var f=r(53346),y=r(58081),b=r(74625),C=r(47134),E=r.n(C),S=r(45398),T=r(13250),I=r(42614);const v={name:"1qrp6da",styles:"margin:10px auto;img{width:100%;height:auto;}"},R={name:"1qvu63v",styles:"display:flex;margin-right:5px;align-items:center"},w={name:"1efi8gv",styles:"font-weight:bold"},A={name:"ho1qnd",styles:"display:flex;flex-direction:row"},D={name:"aeaamz",styles:"display:flex;flex-direction:row;width:100%;height:100%"},L={name:"zuseyl",styles:"width:70%;height:100%;margin-right:15px;margin-top:10px"},M={name:"1gammwy",styles:"margin-top:5px"},N={name:"18m1r1n",styles:"margin-top:10px;width:30%;display:flex;flex-flow:column"},O={name:"p75a3l",styles:"margin-top:5px;padding:10px;height:100%;flex:1 1 auto;background-color:var(--slds-g-color-neutral-base-95, #f3f3f3)"},P={name:"1dsiv4",styles:"width:100%;button{width:100%;}"},x="sumx",Z="matrix",F="custom",k="-",B=(e,t)=>{for(let r=0;r<e.length;r++)if(e[r].value===t)return r+1;return-1},W=(...e)=>e.join(""),G=({globalChecked:e,numberOfColumnGrouping:t,numberOfRowGrouping:r,rowDropdownSelect:i,columnDropdownSelect:s,columnGroupOptions:n,rowGroupOptions:a})=>{let l;return l=0===t||void 0===t?((e,t,r,i)=>{if(t!==F)return W(x,e,k,t);{const t=B(i,r);return W(x,e,k,"sub",-1===t?1:t)}})(r,e,i,a):((e,t,r,i,s,n,o)=>{if(r!==F)return W(Z,e,"x",t,k,r);{let r=W(Z,e,"x",t,k,"r");const a=B(n,i);r=W(r,-1===a?"GT":a),r=W(r,"c");const l=B(o,s);return r=W(r,-1===l?"GT":l),r}})(r,t,e,i,s,a,n),(0,m.tZ)(I.Z,{imgUrl:l,styling:v,altText:o.Z.getLabel("parentAndPrevGroupValFormulaManagement","previewImageAltText")})},U=["double","int","percent","currency","boolean"],H=[":SUM",":AVG",":MAX",":MIN",":MEDIAN"],V=["FieldSum","FieldAverage","FieldMaximum","FieldMinimum","FieldMedian"],{ALL:j,GRAND_TOTAL:q,CUSTOM:z}=S.Z,$="GT";let Q,Y,K=j.getCode(),J=$,X=$,ee=0,te=0;const re=(e,t)=>{class r extends i.Component{static defaultProps={blocks:null,fields:[],functions:[],groupingsAcross:[],groupingsDown:[]};constructor(e){super(e),ee=this.props.groupingsDown.length,te=this.props.groupingsAcross.length,Q=this.props.groupingsDown,Y=this.props.groupingsAcross}_isSummary=()=>this.props.groupingsDown.length>0&&0===this.props.groupingsAcross.length;_isMatrix=()=>this.props.groupingsDown.length>0&&this.props.groupingsAcross.length>0;_getDownGroupOptions=()=>{const e=n().clone(this.props.groupingsDown);return this._isMatrix()&&e.unshift({label:q.getLabel(),value:q.getCode()}),e};_handleDownGroupChange=e=>{const t=this.props.formulaMetadata.clone();e.value===q.getCode()?(t.setDownGroupType(e.value),t.setDownGroup(null),t.setDownGroupListType(null),t.setDownGroupList(q.getCode()),t.setPrevGroupVal(null)):(t.setDownGroupType(z.getCode()),t.setDownGroup(e.value),t.setDownGroupListType(null),t.setDownGroupList(q.getCode()),t.setPrevGroupVal(null)),J=e.value,this.props.onChange(t)};_handleAcrossGroupChange=e=>{const t=this.props.formulaMetadata.clone();e.value===q.getCode()?(t.setAcrossGroupType(e.value),t.setAcrossGroup(null),t.setAcrossGroupListType(null),t.setAcrossGroupList(q.getCode()),t.setPrevGroupVal(null)):(t.setAcrossGroupType(z.getCode()),t.setAcrossGroup(e.value),t.setAcrossGroupListType(null),t.setAcrossGroupList(q.getCode()),t.setPrevGroupVal(null)),X=e.value,this.props.onChange(t)};_handleGroupTypeChange=e=>{const t=this.props.formulaMetadata.clone(),r=S.Z.getEnumByCode(e.target.value);if(J=$,X=$,this._isSummary()){let e=this.props.formulaMetadata.getDownGroup();r===j||r===q?e=null:r!==z||e||(e=this._getDownGroupOptions()[0].value),t.setDownGroupType(r.getCode()),t.setDownGroup(e),t.setDownGroupList(void 0),t.setDownGroupListType(void 0),this.props.onChange(t)}else if(this._isMatrix()){let e=this.props.formulaMetadata.getDownGroupType(),i=this.props.formulaMetadata.getAcrossGroupType(),s=this.props.formulaMetadata.getDownGroup(),n=this.props.formulaMetadata.getAcrossGroup();r===j?(e=j.getCode(),i=j.getCode(),s=null,n=null):r===z&&(s&&s!==q||(e=q.getCode(),s=null),n&&n!==q||(i=q.getCode(),n=null)),t.setDownGroupType(e),t.setAcrossGroupType(i),t.setDownGroup(s),t.setAcrossGroup(n),t.setAcrossGroupList(i),t.setAcrossGroupListType(n),t.setDownGroupList(e),t.setDownGroupListType(s),this.props.onChange(t)}};_getAcrossGroup=()=>this._isMatrix()&&this.props.formulaMetadata.getAcrossGroupType()===q.getCode()?q.getCode():this.props.formulaMetadata.getAcrossGroup();_getAcrossGroupOptions=()=>{const e=n().clone(this.props.groupingsAcross);return e.unshift({label:q.getLabel(),value:q.getCode()}),e};getCompletionItem=(e,t,r)=>({label:t,kind:this.props.monacoLanguages.CompletionItemKind.Value,insertText:`${e}${r}`,insertTextRules:this.props.monacoLanguages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:`${e}${r}`});setGlobalChecked=e=>{K=e===j.getCode()?j.getCode():e===q.getCode()?"grand":z.getCode()};getCompletionItems=()=>{const e=this.props.formulaMetadata,r=this.props.functions.map((e=>({label:e.Label,kind:this.props.monacoLanguages.CompletionItemKind.Method,insertText:t._tokenizeExampleParameters(e.ExampleString),insertTextRules:this.props.monacoLanguages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:e.Description})));this.props.fields.forEach((e=>{U.indexOf(e.dataType)>-1&&H.forEach(((t,i)=>{r.push(this.getCompletionItem(e.name,o.Z.getLabel("reportBuilder",V[i],e.label),t))})),e.uniqueCountable&&r.push(this.getCompletionItem(e.name,o.Z.getLabel("reportBuilder","FieldUnique",e.label),":UNIQUE"))}));if(this.props.groupingsDown.concat(this.props.groupingsAcross).forEach((e=>{r.push({label:e.label,kind:t._dataTypeToKind(e.dataType,this.props.monacoLanguages),insertText:e.value,insertTextRules:this.props.monacoLanguages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:e.value})})),e.isCrossBlock()&&this.props.blocks)for(let e=0;e<this.props.blocks.length;e++){const t=this.props.blocks[e];r.push(this._getRowCountItem(t.getBlockId(),t.getName()))}else r.push(this._getRowCountItem());return r};_getDownGroup=()=>this._isMatrix()&&this.props.formulaMetadata.getDownGroupType()===q.getCode()?q.getCode():this.props.formulaMetadata.getDownGroup();_getFormulaTypes=()=>T.Z.enums().filter((e=>this.props.isDataCloud?e.isSupportedInCSF()&&e.isSupportedInDataCloud():e.isSupportedInCSF()));_getId=()=>this.props.id?this.props.id:"formulaInputCsf";_getRowCountItem=(e="",t="")=>{const r=h().get().getBlockRowCountName(e);let i=o.Z.getLabel("reportBuilder","recordCount");return t&&(i=o.Z.getLabel("reportBuilder","blockFieldLabel",t,i)),{label:i,kind:this.props.monacoLanguages.CompletionItemKind.Value,insertText:r,insertTextRules:this.props.monacoLanguages.CompletionItemInsertTextRule.InsertAsSnippet,documentation:r}};_renderGroupLevel=()=>{let e=[];this._isSummary()?e=S.Z.getSummaryOptions():this._isMatrix()&&(e=S.Z.getMatrixOptions());const t=e.map((e=>{let t=!1;return this._isSummary()?e.value===this.props.formulaMetadata.getDownGroupType()&&(t=!0,this.setGlobalChecked(e.value)):this._isMatrix()&&(e.value===j.getCode()&&this.props.formulaMetadata.getDownGroupType()===j.getCode()&&this.props.formulaMetadata.getAcrossGroupType()===j.getCode()||e.value===z.getCode()&&this.props.formulaMetadata.getDownGroupType()!==j.getCode()&&this.props.formulaMetadata.getAcrossGroupType()!==j.getCode())&&(t=!0,this.setGlobalChecked(e.value)),(0,m.tZ)(f.Z,{id:`${e.value}-group-level-options`,labels:{label:e.label},value:e.value,checked:t},e.value)})),r=(0,m.BX)("div",{className:"formulaEditor-level",children:[(0,m.tZ)("label",{htmlFor:`${this._getId()}-group-level-container`,css:w,children:o.Z.getLabel("reportBuilder","whereToApplyFormula")}),(0,m.tZ)(G,{globalChecked:K,numberOfColumnGrouping:te,numberOfRowGrouping:ee,rowDropdownSelect:J,columnDropdownSelect:X,columnGroupOptions:Y,rowGroupOptions:Q}),(0,m.tZ)(y.Z,{className:"group-level-options-container",id:`${this._getId()}-down-group-type`,name:`${this._getId()}-group-level-container`,onChange:this._handleGroupTypeChange,children:t})]},"downGroupType");let i=null,s=null,n=null,a=null;this.props.formulaMetadata.getDownGroupType()&&(a=S.Z.getEnumByCode(this.props.formulaMetadata.getDownGroupType())),this.props.formulaMetadata.getAcrossGroupType()&&(s=S.Z.getEnumByCode(this.props.formulaMetadata.getAcrossGroupType()));const l=this._isMatrix()&&(a===z||s===z||a===q||s===q);return(this._isSummary()&&a===z||l)&&(n=(0,m.BX)("div",{css:A,children:[(0,m.tZ)(I.Z,{imgUrl:"A",styling:R,altText:o.Z.getLabel("parentAndPrevGroupValFormulaManagement","optionAImageAltText")}),(0,m.tZ)(b.Z,{css:P,label:o.Z.getLabel("reportBuilder","rowGroup"),id:`${this._getId()}-row-group`,options:this._getDownGroupOptions(),value:this._getDownGroup(),onSelect:this._handleDownGroupChange,listItemRenderer:E()})]},"rowGroup")),l&&(i=(0,m.BX)("div",{css:A,children:[(0,m.tZ)(I.Z,{imgUrl:"B",styling:R,altText:o.Z.getLabel("parentAndPrevGroupValFormulaManagement","optionBImageAltText")}),(0,m.tZ)(b.Z,{css:P,label:o.Z.getLabel("reportBuilder","columnGroup"),id:`${this._getId()}-col-group`,options:this._getAcrossGroupOptions(),value:this._getAcrossGroup(),onSelect:this._handleAcrossGroupChange,listItemRenderer:E()})]},"columnGroup")),[r,n,i]};_renderFormatTab=()=>(0,m.tZ)("div",{className:"formulaEditor-tabContent",children:this._renderGroupLevel()});renderExtraMarkup=e=>(0,m.BX)("div",{className:"formula-and-display",css:D,children:[(0,m.BX)("div",{className:"formula-editor-tabs formula",id:`${this._getId()}-tabs`,css:L,children:[(0,m.tZ)("p",{children:"Formula"}),(0,m.tZ)("div",{label:"formula",className:"formula-filling",id:`${this._getId()}-general-tabpanel`,css:M,children:e})]}),!this.props.isDataCloud&&(0,m.BX)("div",{className:"formula-editor-tabs display",id:`${this._getId()}-tabs`,css:N,children:[(0,m.tZ)("p",{children:"Display"}),(0,m.tZ)("div",{label:"display-options",className:"display-options",id:`${this._getId()}-format-tabpanel`,css:O,children:this._renderFormatTab()})]})]});render(){const{onRef:t,...r}=this.props;return(0,m.tZ)(e,{...r,completionItems:this.getCompletionItems(),formulaTypes:this._getFormulaTypes(),helpLink:"https://help.salesforce.com/articleView?id=building_custom_summary_formulas.htm",showFormulaLabel:!1,ref:t,renderExtraMarkup:this.renderExtraMarkup})}}return r};var ie=r(91824),se=r(18916),ne=r(76775),oe=r(5673),ae=r(20048),le=r.n(ae),ue=r(723);class de extends ue{getCode(){return this._value.value}getLabel(){return o.Z.getLabel("reportBuilder",this._value.labelKey)}}de.build(de,{SUM:{labelKey:"aggregateOperations",value:"SUM"},AVG:{labelKey:"aggregateOperationa",value:"AVG"},MIN:{labelKey:"aggregateOperationm",value:"MIN"},MAX:{labelKey:"aggregateOperationmx",value:"MAX"},UNIQUE:{labelKey:"aggregateOperationu",value:"UNIQUE"},MEDIAN:{labelKey:"aggregateOperationme",value:"MEDIAN"}});class ce extends ue{getCode(){return this.getName()}getOptions(){return this.getValue().value.map(((e,t)=>({label:e.getLabel(),value:e.getValue().value,id:`${t}`})))}}ce.build(ce,{ALL:{value:[de.SUM,de.AVG,de.MIN,de.MAX,de.UNIQUE,de.MEDIAN]},AGGREGATES:{value:[de.SUM,de.AVG,de.MIN,de.MAX,de.MEDIAN]},UNIQUE:{value:[de.UNIQUE]}});const he=e=>{class t extends i.Component{constructor(e){super(e),this.state={selectedAggregate:""}}_onRequestInsertField=(e,t,r)=>()=>{const i=!1===r.isAggregatable?e:`${e}:${t}`;this.props.onInsertClick(i)};_handleAggregateChange=(e,{selection:t})=>{if(e&&e.stopPropagation(),t.length>0){const e=n().first(t);this.setState({selectedAggregate:e.value})}};_getAggregateOptions=(e,t)=>{const r=this.props.reportMetadata.isColumnUniqueCountable(t),i=U.indexOf(e.getColumnDataType(t))>-1;return r&&i?ce.ALL.getOptions():r&&!i?ce.UNIQUE.getOptions():i&&!r?ce.AGGREGATES.getOptions():ce.ALL.getOptions()};_renderAggregateOptions=(e,t,r,i)=>{if(r&&!1===r.isAggregatable)return;const s=this.props.reportMetadata.getReportTypeMetadata(),o=this._getAggregateOptions(s,t);let a;return i&&!n().isEmpty(o)&&this.setState({selectedAggregate:o[0].value}),e&&(a=n().find(o,(t=>t.value===e))),(0,m.tZ)(le(),{className:"formulaModal-sidebar-footer-dropdown",classNameMenu:"formulaModal-dropdown-menu",events:{onSelect:this._handleAggregateChange.bind(this)},options:o,selection:[a],value:e,variant:"readonly"})};render(){return(0,m.tZ)(e,{selectedAggregate:this.state.selectedAggregate,footerRenderer:this._renderAggregateOptions,onRequestInsertField:this._onRequestInsertField,...this.props})}}return t};var pe=r(94917);const ge=["MATH","LOGICAL","REPORT_SUMMARIES"],me=e=>{class t extends i.Component{constructor(e){super(e),this._reportFormulaMetadata=this._createFormulaMetadata(this.props.reportMetadata)}UNSAFE_componentWillReceiveProps=e=>{!this.props.isOpen&&e.isOpen&&(this._reportFormulaMetadata=this._createFormulaMetadata(e.reportMetadata))};_createFieldsTree=(e,t)=>{const r=this.props.reportMetadata,i=[{label:o.Z.getLabel("reportBuilder","count"),isAggregatable:!1,columns:{RowCount:{dataType:"int",label:o.Z.getLabel("reportBuilder","recordCount"),bucketable:!1,equivalentFields:null,filterValues:[],filterable:!1,isCommon:!1,maxLength:0,name:"",isCustom:!1,isLookup:!1,uniqueCountable:!1,reportTypeLabel:""}}}],s=this._filterFields((0,a.deepCopy)(r.getReportTypeMetadata().getCategories(e))),n={};for(const e of this._getGroupingsDown().concat(this._getGroupingsAcross()))n[e.value]={dataType:e.dataType,label:e.label};const l={label:o.Z.getLabel("reportBuilder","groupingFields"),isAggregatable:!1,columns:n};if(t){const e=(0,a.deepCopy)(r.getReportTypeMetadata().getCategoriesByReportType());for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t];r.categories=this._filterFields(r.categories)}return new _(r.getBlockQueryMetadata(),e,!0,l,r.isDataCloudReport())}return new p.Z(i.concat(s).concat([l]),{},r.isDataCloudReport())};_createFunctionsTree=(e,t)=>new oe.Z(e,t);_isValidColumn=e=>!!e&&(U.indexOf(e.dataType)>-1||e.uniqueCountable);_filterFields=e=>{const t=[];if(!e)return t;for(const r of e)r.columns=n().pickBy(r.columns,this._isValidColumn),n().isEmpty(r.columns)||t.push(r);return t};_getAggregateableDetailColumns=e=>{const t=this.props.reportMetadata.getReportTypeMetadata();return e.isCrossBlock()?t.getAggregateableDetailColumnsForAllBlocks(this.props.reportMetadata.getBlocks()):t.getAggregateableDetailColumns(e.getReportType())};_getGroupingsDown=()=>this.props.reportMetadata.getGroupingDownColumnNames().map((e=>({value:e,label:this.props.reportMetadata.getReportExtendedMetadata().getGroupingName(e),dataType:this.props.reportMetadata.getReportExtendedMetadata().getGroupingDataType(e)})));_getGroupingsAcross=()=>this.props.reportMetadata.getGroupingAcrossColumnNames().map((e=>({value:e,label:this.props.reportMetadata.getReportExtendedMetadata().getGroupingName(e),dataType:this.props.reportMetadata.getReportExtendedMetadata().getGroupingDataType(e)})));_validateFormulaName=(e,t,r)=>r.isCustomSummaryFormulaNameUnique(e,t)?(0,l.trim)(e)?{isValid:!0}:{isValid:!1,errorText:o.Z.getLabel("reportBuilder","formulaColumnNameMissingErrorMsg")}:{isValid:!1,errorText:o.Z.getLabel("reportBuilder","formulaColumnNameNotUniqueErrorMsg")};_createFormulaMetadata=e=>{const t=this.props.getReportFormulas(e);if(t[this.props.formulaKey])return new ne.Z(t[this.props.formulaKey]);{const e=new ne.Z(null,!0,!0);return this.props.isCrossBlock?e.setCrossBlock(this.props.isCrossBlock):this.props.reportType&&e.setReportType(this.props.reportType),e}};render(){return(0,m.tZ)(e,{...this.props,reportFormulaMetadata:this._reportFormulaMetadata,createFieldsTree:this._createFieldsTree,createFunctionsTree:this._createFunctionsTree,formulaInput:re(se.Z,ie.Z),functionCategories:ge,getFormulaInputFields:this._getAggregateableDetailColumns,groupingsAcross:this._getGroupingsAcross(),groupingsDown:this._getGroupingsDown(),validateFormulaName:this._validateFormulaName,modalTitle:o.Z.getLabel("reportBuilder","formulaCSFTitle"),sidebar:he(pe.Z)})}}return t}},94917:(e,t,r)=>{"use strict";r.d(t,{Z:()=>V});var i=r(67294),s=r(96486),n=r.n(s),o=r(74625),a=r(84198),l=r(6343),u=r(76126),d=r(57715),c=r(30820),h=r(59710),p=r(7997),g=r(41172),m=r(6627),_=r(70917),f=r(97761),y=r(8429),b=r(50656),C=r(32574),E=r.n(C),S=r(47134),T=r.n(S),I=r(57244),v=r(58094),R=r(37681),w=r(1026),A=r(17599),D=r(24765),L=r(57132),M=r(45398);const N=JSON.parse('{"sl":"PARENTGROUPVAL","lq":"PARENTGROUPVAL(summary_field, parent_row_grouping, parent_column_grouping)","g":"PREVGROUPVAL","HE":"GRAND_SUMMARY","VS":"ROW_GRAND_SUMMARY","l9":"COLUMN_GRAND_SUMMARY","aW":"grouping_level","Az":"parent_column_grouping","R5":"parent_row_grouping","ch":"grouping_level [, increment]"}');function O(e){let t;switch(e){case"picklist":case"date":case"datetime":case"percent":case"currency":case"phone":case"email":case"url":case"boolean":case"id":t=e;break;case"string":default:t="text";break;case"int":case"double":case"number":t="number"}return t}function P(e){return e.map((e=>{const t=Object.values(e.columns).map((e=>{const t=[];return e.filterValues?.forEach((e=>{t.push(e.apiName)})),{columnLabel:e.label,columnType:O(e.dataType),columnName:e.name,isCategoricalVals:"picklist"===e.dataType&&t?.length>0,categoricalVals:t}}));return{categoryLabel:e.label,isAggregatable:e.isAggregatable,columns:t}}))}var x=r(76775),Z=r(42614),F=r(35944);const{ALL:k,GRAND_TOTAL:B,CUSTOM:W}=M.Z,G={name:"1dsiv4",styles:"width:100%;button{width:100%;}"},U=(0,_.iv)("padding:0 ",f.spacingLarge," ",f.spacingMedium," ",f.spacingLarge,";width:60%;height:60%;margin:auto;",""),H="formula-generation-disclaimer-onboarding";class V extends i.Component{static defaultProps={functions:[],onInsertClick:()=>{},additionalItemsInFieldsTree:[],onChange:()=>{},footerRenderer:()=>null,selectedAggregate:""};state={nodes:{fieldsTree:this.props.fieldsTree.getNormalizedTreeNodes(),functionsTree:this.props.functionsTree.getNormalizedTreeNodes()},searchTerms:{fieldsTree:"",functionsTree:""},selected:{fieldsTree:null,functionsTree:null},selectedCategory:{fieldsTree:null,functionsTree:null},suggestedQuestions:{questions:[]},incomingMessages:[],isFieldTreeClicked:!1,chatPendingStatus:null,hasSeenFormulaGenDisclaimerPage:!1,isLoading:!1};shouldComponentUpdate(e,t){return!n().isEqual(this.state,t)||this.props.selectedAggregate!==e.selectedAggregate||this.props.formulaMetaData.getAcrossGroupType()!==e.formulaMetaData.getAcrossGroupType()||this.props.formulaMetaData.getDownGroupType()!==e.formulaMetaData.getDownGroupType()||this.props.formulaMetaData.getAcrossGroup()!==e.formulaMetaData.getAcrossGroup()||this.props.formulaMetaData.getDownGroup()!==e.formulaMetaData.getDownGroup()}_setHasSeenFormulaGenDisclaimerPage=e=>{this.setState({hasSeenFormulaGenDisclaimerPage:e})};_setIsLoading=e=>{this.setState({isLoading:e})};async componentDidMount(){if(I.Z.has(I.Z.USER_HAS_EGPT_FORMULA_GENERATION_ENABLED)){this._setIsLoading(!0);try{(await b.Z.getReportOnboarding(H)).hasSeenOnboarding&&this._setHasSeenFormulaGenDisclaimerPage(!0)}catch{this._setHasSeenFormulaGenDisclaimerPage(!1)}finally{this._setIsLoading(!1)}}}componentDidUpdate(){if(this._functionHelperRef){const e=this._formulaModalEl&&this._formulaModalEl.querySelector(".formulaTree"),t=379;e&&(e.style.height=`calc(100vh - ${t+this._functionHelperRef.clientHeight}px)`)}this.setState({isFieldTreeClicked:!1})}getIndex(e,t){for(let r=0;r<e.length;r++)if(e[r].value===t)return r+1;return-1}_handleTreeSearchTermChange(e,t){const r=n().clone(this.state.nodes),i=n().clone(this.state.searchTerms);r[e]=this.props[e].getNormalizedTreeNodes(void 0,t.target.value,this.state.selected[e]),i[e]=t.target.value,this.setState({nodes:r,searchTerms:i})}_updateNode(e,t,r,i){const s={};s[e.id]=Object.assign({},e,i),t[r]=Object.assign({},t[r],s)}_handleTreeExpandClick(e,t,r){const i=n().clone(this.state.nodes);this._updateNode(r.node,i,e,{expanded:r.expand}),this.setState({nodes:i})}_handleTreeClick(e,t,r){let i,s,o,a;const l=!0;if(["click","focus"].includes(t.type)){if("branch"!==r.node.type){s=n().clone(this.state.nodes),s[e]=Object.assign({},s[e]);for(const t of Object.keys(s[e]))if(i=s[e][t],i.selected){s[e][t]=Object.assign({},i,{selected:!1});break}o=n().clone(this.state.selected),o[e]=r.node.value,a=n().clone(this.state.selectedCategory),a[e]=r.node.categoryMetadata,this._updateNode(r.node,s,e,{selected:r.select}),this.setState({nodes:s,selected:o,selectedCategory:a,isFieldTreeClicked:l})}}else"keydown"===t.type&&"branch"!==r.node.type&&(s=n().clone(this.state.nodes),o=n().clone(this.state.selected),a=n().clone(this.state.selectedCategory),o[e]=r.node.value,a[e]=r.node.categoryMetadata,s[e]=Object.assign({},s[e]),this._updateNode(r.node,s,e,{selected:r.select}),this.setState({nodes:s,selected:o,selectedCategory:a,isFieldTreeClicked:l}))}_getNodes(e,t){return t.nodes?t.nodes.map((t=>this.state.nodes[e][t])):[]}_getSelectedFunction(){return n().find(this.props.functions,{Name:this.state.selected.functionsTree})}_getSummaryReportSummaryFunction(e){let t=this._getSelectedFunction().ExampleString;return e===N.sl&&void 0!==this.props.formulaMetaData.getDownGroupListType()?this.props.formulaMetaData.getDownGroupList()===B.getCode()?t=t.replace(N.aW,N.HE):this.props.formulaMetaData.getDownGroupList()===W.getCode()&&(t=t.replace(N.aW,this.props.formulaMetaData.getDownGroupListType())):e===N.g&&void 0!==this.props.formulaMetaData.getDownGroupListType()&&this.props.formulaMetaData.getDownGroupList()===W.getCode()&&(t=t.replace(N.ch,this.props.formulaMetaData.getDownGroupListType())),t}_getMatrixParentFunction(){let e=N.lq;return this.props.formulaMetaData.getAcrossGroupList()!==k.getCode()&&this.props.formulaMetaData.getAcrossGroupList()!==B.getCode()&&void 0!==this.props.formulaMetaData.getAcrossGroupListType()?e=e.replace(N.Az,this.props.formulaMetaData.getAcrossGroupListType()):this.props.formulaMetaData.getAcrossGroupList()===B.getCode()&&(e=e.replace(N.Az,N.l9)),this.props.formulaMetaData.getDownGroupList()!==k.getCode()&&this.props.formulaMetaData.getDownGroupList()!==B.getCode()&&void 0!==this.props.formulaMetaData.getDownGroupListType()?e=e.replace(N.R5,this.props.formulaMetaData.getDownGroupListType()):this.props.formulaMetaData.getDownGroupList()===B.getCode()&&(e=e.replace(N.R5,N.VS)),e}_getMatrixPreviousFunction(){let e=this._getSelectedFunction().ExampleString;return this.props.formulaMetaData.getDownGroupType()!==W.getCode()&&this.props.formulaMetaData.getAcrossGroupType()!==W.getCode()||null===this.props.formulaMetaData.getPrevGroupVal()||void 0===this.props.formulaMetaData.getPrevGroupVal()||(e=e.replace(N.ch,this.props.formulaMetaData.getPrevGroupVal())),e}_getMatrixReportSummaryFunction(e){return e===N.sl?this._getMatrixParentFunction():this._getMatrixPreviousFunction()}_insertHandler(){const e=this._getSelectedFunction();let t=e.ExampleString;const r=e.Label;return r!==N.sl&&r!==N.g||(this.props.groupingsAcross.length>0&&this.props.groupingsDown.length>0?t=this._getMatrixReportSummaryFunction(r):0===this.props.groupingsAcross.length&&this.props.groupingsDown.length>0&&(t=this._getSummaryReportSummaryFunction(r))),t}_handleInsertFunctionClick(){const e=this._insertHandler();this.props.onInsertClick(e)}_setFunctionHelperRef(e){this._functionHelperRef=e}_setFormulaModalRef(e){this._formulaModalEl=e}_renderFunctionHelper(){if(!this.state.selected.functionsTree)return;const e=this._getSelectedFunction();let t="";return t=e.Label===N.sl&&this._isMatrix()?N.lq:e.ExampleString,(0,F.BX)("div",{className:"formulaModal-sidebar-functionHelper",ref:this._setFunctionHelperRef.bind(this),children:[(0,F.tZ)("div",{className:"formulaModal-sidebar-functionHelper-title",children:t}),(0,F.tZ)("div",{className:"formulaModal-sidebar-functionHelper-help",children:(0,F.tZ)("a",{href:"https://help.salesforce.com/articleView?id=customize_functions.htm",target:"_blank",rel:"noreferrer noopener",children:y.Z.getLabel("reportBuilder","helpWithThisFunction")})})]})}_isSummary(){return this.props.groupingsDown.length>0&&0===this.props.groupingsAcross.length}_isMatrix(){return this.props.groupingsDown.length>0&&this.props.groupingsAcross.length>0}_isValidList(){return this._isMatrix()&&this.props.formulaMetaData.getDownGroupList()===B.getCode()}_getDownGroup(){return this._isValidList()||this._isSummary()&&this.props.formulaMetaData.getDownGroupList()===B.getCode()?B.getCode():this.props.formulaMetaData.getDownGroupListType()}_getPrevGroup(){return this._isValidList()?B.getCode():this.props.formulaMetaData.getPrevGroupVal()}_getDownGroupOptions(){this.props.groupingsDown;let e=[],t=[];if(this._getSelectedFunction().Label===N.sl&&e.unshift({label:B.getLabel(),value:B.getCode()}),t=e,this.props.formulaMetaData.getDownGroupType()!==B.getCode()){e=e.concat(n().clone(this.props.groupingsDown));const r=this.getIndex(this.props.groupingsDown,this.props.formulaMetaData.getDownGroup());t=this._isMatrix()?e.slice(0,r+1):e.slice(0,r)}return t}_getDownGroupMatrixOptions(){this.props.groupingsDown;let e=[];if(this.props.formulaMetaData.getDownGroupType()!==B.getCode()){const t=this.getIndex(this.props.groupingsDown,this.props.formulaMetaData.getDownGroup()),r=n().clone(this.props.groupingsDown).slice(0,t);e=e.concat(r)}if(this.props.formulaMetaData.getAcrossGroupType()!==B.getCode()){const t=this.getIndex(this.props.groupingsAcross,this.props.formulaMetaData.getAcrossGroup()),r=n().clone(this.props.groupingsAcross).slice(0,t+1);e=e.concat(r)}return e}_handleDownGroupChange(e){const t=this.props.formulaMetaData.clone();e.value===B.getCode()?(t.setDownGroupList(e.value),t.setDownGroupListType(null)):(t.setDownGroupList(W.getCode()),t.setDownGroupListType(e.value)),this.props.onChange(t)}_handleMatrixDownGroupChange(e){const t=this.props.formulaMetaData.clone();t.setPrevGroupVal(e.value),t.setDownGroupListType(this.props.formulaMetaData.getDownGroup()),t.setAcrossGroupListType(this.props.formulaMetaData.getAcrossGroup()),this.props.onChange(t)}_getAcrossGroup(){return this._isMatrix()&&this.props.formulaMetaData.getAcrossGroupList()===B.getCode()?B.getCode():this.props.formulaMetaData.getAcrossGroupListType()}_getAcrossGroupOptions(){this.props.groupingsDown;let e=[];e.unshift({label:B.getLabel(),value:B.getCode()});let t=e;if(this.props.formulaMetaData.getAcrossGroupType()!==B.getCode()){e=e.concat(n().clone(this.props.groupingsAcross));const r=this.getIndex(this.props.groupingsAcross,this.props.formulaMetaData.getAcrossGroup());t=this._isMatrix()?e.slice(0,r+1):e.slice(0,r)}return t}_handleAcrossGroupChange(e){const t=this.props.formulaMetaData.clone();e.value===B.getCode()?(t.setAcrossGroupList(e.value),t.setAcrossGroupListType(null)):(t.setAcrossGroupList(W.getCode()),t.setAcrossGroupListType(e.value)),this.props.onChange(t)}_renderGroupLevel(){if(this._getSelectedFunction()){let e=null,t=null,r=null,i=null;const s=this._getSelectedFunction().Label;this.props.formulaMetaData.getDownGroupType()&&(i=M.Z.getEnumByCode(this.props.formulaMetaData.getDownGroupType())),this.props.formulaMetaData.getAcrossGroupType()&&(t=M.Z.getEnumByCode(this.props.formulaMetaData.getAcrossGroupType()));const n=this._isMatrix()&&(i===W||t===W||i===B||t===B),a=this._isSummary()&&i===W||n;return a&&this._isMatrix()&&s===N.g?r=(0,F.tZ)("div",{children:(0,F.tZ)(o.Z,{css:G,label:y.Z.getLabel("reportBuilder","rowGroup"),placeholder:y.Z.getLabel("reportBuilder","selectOption"),options:this._getDownGroupMatrixOptions(),value:this._getPrevGroup(),onSelect:this._handleMatrixDownGroupChange.bind(this),listItemRenderer:T()})},"rowGroup"):!a||s!==N.g&&s!==N.sl||(r=(0,F.tZ)("div",{children:(0,F.tZ)(o.Z,{css:G,placeholder:y.Z.getLabel("reportBuilder","selectOption"),label:y.Z.getLabel("reportBuilder","rowGroup"),options:this._getDownGroupOptions(),value:this._getDownGroup(),onSelect:this._handleDownGroupChange.bind(this),listItemRenderer:T()})},"rowGroup")),n&&s===N.sl&&(e=(0,F.tZ)("div",{children:(0,F.tZ)(o.Z,{css:G,placeholder:y.Z.getLabel("reportBuilder","selectOption"),label:y.Z.getLabel("reportBuilder","columnGroup"),options:this._getAcrossGroupOptions(),value:this._getAcrossGroup(),onSelect:this._handleAcrossGroupChange.bind(this),listItemRenderer:T()})},"columnGroup")),[r,e]}}_renderFormatTab(){return(0,F.tZ)("div",{className:"formulaEditor-tabContent",children:this._renderGroupLevel()})}_getInitialChatMessages(){const e=[];return e.push((0,F.tZ)("div",{className:"initial-chat-msg-intro",children:y.Z.getLabel("FormulaGeneration","initialChatMessageIntro")})),e.push((0,F.BX)("div",{className:"initial-chat-msg-desc",children:[(0,F.tZ)("span",{children:y.Z.getLabel("FormulaGeneration","initialChatMessageDesc")}),(0,F.tZ)("ul",{className:"slds-list_dotted example-input-container",children:(0,F.tZ)("li",{children:this.props.formulaMetaData instanceof x.Z?y.Z.getLabel("FormulaGeneration","summaryLevelFormulaExampleInput"):y.Z.getLabel("FormulaGeneration","rowLevelFormulaExampleInput")})})]})),e}_renderEinsteinFormulaGenDisclaimerPage(){return(0,F.BX)("div",{className:"einstein-formula-gen-disclaimer-page",children:[(0,F.tZ)(Z.Z,{imgUrl:"copilot-onboarding",styling:U,altText:"Einstein Formula Generation Disclaimer"}),(0,F.BX)("div",{className:"einstein-disclaimer-text",children:[(0,F.tZ)("h1",{children:y.Z.getLabel("FormulaGeneration","disclaimerPageTitle")}),(0,F.tZ)("span",{children:y.Z.getLabel("FormulaGeneration","disclaimerPageMessage")}),(0,F.tZ)("span",{children:y.Z.getLabel("FormulaGeneration","disclaimerPageDeclaration")}),(0,F.tZ)(a.Z,{className:"disclaimer-got-it",label:y.Z.getLabel("GenerativeAiGeneral","gotIt"),onClick:()=>this._onDisclaimerGotItClicked()},"gotIt")]})]})}async _onDisclaimerGotItClicked(){this._setHasSeenFormulaGenDisclaimerPage(!0);try{await b.Z.setReportOnboarding(H)}catch{}}_getEinsteinTabLabel(){return(0,F.BX)("div",{className:"einstein-tab-label",children:[(0,F.tZ)("span",{className:"einstein-tab-text",children:y.Z.getLabel("GenerativeAiGeneral","einstein")}),(0,F.tZ)(l.Z,{className:"einstein-tab-info-popover",body:y.Z.getLabel("FormulaGeneration","headerDisclaimer"),id:"einstein-tab-button-popover",align:"bottom left",position:"overflowBoundaryElement",css:(0,_.iv)("margin-top:-",f.spacingXSmall,";margin-left:-0.05rem;z-index:",f.zIndexOverlay,";line-height:",f.lineHeightText,";",""),children:(0,F.tZ)(a.Z,{iconCategory:"utility",iconName:"info",variant:"icon",iconSize:"medium"})})]})}async _onGenerateFormula(e){try{w.Z.transactionStart(A.Z.ASK_EINSTEIN_FORMULA_GENERATOR.getValue()),this.setState({chatPendingStatus:y.Z.getLabel("FormulaGeneration","formulaGenerationPendingMessage")});const t=await D.Z.generateFormula(this.props.reportMetadata.getReportMetadata(),P(this.props.fieldsTree?.getCategories()),e,this.props.formulaMetaData instanceof x.Z);return null!=t.errorMessage&&null==t.body?{errorMessage:t.errorMessage}:{description:t.detailedDescription,highlightContent:t.body,actions:[{actionHandler:()=>this.props.onInsertFormula(t.name,t.shortDescription,t.body,t.type),actionLabel:y.Z.getLabel("FormulaGeneration","insertFormulaButton")}],applicationName:L.t,generationIds:t.generationIds}}catch(e){return{errorMessage:e.message}}finally{this.setState({chatPendingStatus:null}),w.Z.transactionEnd(A.Z.ASK_EINSTEIN_FORMULA_GENERATOR.getValue())}}_onClickRefresh(){this.setState({suggestedQuestions:{questions:[]}}),D.Z.suggestFormula(this.props.reportMetadata.getReportMetadata(),this.props.selectedAggregate.length>0,P(this.props.fieldsTree?.getCategories())).then((e=>{this.setState({suggestedQuestions:{questions:e.recommendedFormulaRepresentationList}})})).catch((e=>{this.setState({suggestedQuestions:{questions:[],errorMessage:e.message}})}))}_renderSuggestedQuestions(){const{questions:e,errorMessage:t}=this.state.suggestedQuestions;return null!=t?(0,F.tZ)("div",{className:"slds-chat-message__text slds-chat-message__text_unsupported-type",children:(0,F.tZ)("span",{children:t})}):e.length>0?e.map((e=>(0,F.tZ)(u.Z,{align:"bottom left",id:`tooltip-${e.name}`,content:e.question,children:(0,F.tZ)("div",{className:"suggested-question",children:(0,F.tZ)(a.Z,{onClick:()=>this._onClickSuggestedQuestion(e),children:(0,F.tZ)("span",{className:"suggested-question-text",children:e.question})})},`question-${e.name}`)},`tooltipkey-${e.name}`))):(0,F.tZ)("div",{className:"loading-recommendations",children:(0,F.tZ)(d.Z,{variant:"brand",isInline:!0,hasContainer:!1})})}_onClickSuggestedQuestion(e){this.setState({incomingMessages:[{id:window.crypto.randomUUID(),role:R.Z.USER.name,message:e.question},{id:window.crypto.randomUUID(),role:R.Z.BOT.name,message:e.detailedDescription,highlightContent:e.body,actions:[{actionHandler:()=>this.props.onInsertFormula(e.name,e.shortDescription,e.body,e.type),actionLabel:y.Z.getLabel("FormulaGeneration","insertFormulaButton")}]}]})}render(){const e=(0,F.tZ)(c.Z,{assistiveText:{icon:y.Z.getLabel("reportBuilder","fieldsTreeSearchPlaceHolder")},name:"search",category:"utility"});return(0,F.tZ)("div",{className:"slds-col formulaModal-sidebar",ref:this._setFormulaModalRef.bind(this),children:(0,F.BX)(h.Z,{children:[I.Z.has(I.Z.USER_HAS_EGPT_FORMULA_GENERATION_ENABLED)&&this.props.reportMetadata.isDataCloudReport()&&!this.props.reportMetadata.isMultiBlock()&&(0,F.tZ)(p.Z,{label:this._getEinsteinTabLabel(),children:this.state.isLoading?"":this.state.hasSeenFormulaGenDisclaimerPage?(0,F.tZ)(v.Z,{initialMessages:this._getInitialChatMessages(),onSendRequest:e=>this._onGenerateFormula(e),placeholder:y.Z.getLabel("FormulaGeneration","formulaGenerationInputPlaceHolder"),incomingMessages:this.state.incomingMessages,pendingStatus:this.state.chatPendingStatus}):this._renderEinsteinFormulaGenDisclaimerPage()}),(0,F.tZ)(p.Z,{label:y.Z.getLabel("reportBuilder","fields"),children:(0,F.BX)("div",{className:"formulaModal-sidebar-content",children:[(0,F.tZ)(g.Z,{placeholder:y.Z.getLabel("reportBuilder","fieldsTreeSearchPlaceHolder"),assistiveText:{label:y.Z.getLabel("reportBuilder","assistiveTextForFieldsTreeSearchPlaceHolder")},iconRight:e,onChange:this._handleTreeSearchTermChange.bind(this,"fieldsTree")}),(0,F.tZ)(m.Z,{assistiveText:{label:y.Z.getLabel("reportBuilder","fields")},nodes:this.state.nodes.fieldsTree.root.nodes,getNodes:this._getNodes.bind(this,"fieldsTree"),onExpandClick:this._handleTreeExpandClick.bind(this,"fieldsTree"),onClick:this._handleTreeClick.bind(this,"fieldsTree"),searchTerm:this.state.searchTerms.fieldsTree,id:"formulaFieldsTree",type:"branch",className:E().buildClassName("fieldsTree",this.props.fieldsTree.getClassName())}),(0,F.BX)("div",{className:"formulaModal-sidebar-footer",children:[this.props.footerRenderer(this.props.selectedAggregate,this.state.selected.fieldsTree,this.state.selectedCategory.fieldsTree,this.state.isFieldTreeClicked),(0,F.tZ)(a.Z,{label:y.Z.getLabel("reportBuilder","insert"),variant:"brand",iconCategory:"utility",iconName:"chevronright",iconPosition:"right",iconSize:"small",iconClassName:"slds-icon_flip",onClick:this.props.onRequestInsertField(this.state.selected.fieldsTree,this.props.selectedAggregate,this.state.selectedCategory.fieldsTree),disabled:!this.state.selected.fieldsTree})]})]})}),(0,F.tZ)(p.Z,{label:y.Z.getLabel("reportBuilder","functions"),children:(0,F.BX)("div",{className:"formulaModal-sidebar-content",children:[(0,F.tZ)(g.Z,{placeholder:y.Z.getLabel("reportBuilder","searchFunctions"),assistiveText:{label:y.Z.getLabel("reportBuilder","assistiveTextForSearchFunctions")},iconRight:e,onChange:this._handleTreeSearchTermChange.bind(this,"functionsTree")}),(0,F.tZ)(m.Z,{assistiveText:{label:y.Z.getLabel("reportBuilder","functions")},nodes:this.state.nodes.functionsTree.root.nodes,getNodes:this._getNodes.bind(this,"functionsTree"),onExpandClick:this._handleTreeExpandClick.bind(this,"functionsTree"),onClick:this._handleTreeClick.bind(this,"functionsTree"),searchTerm:this.state.searchTerms.functionsTree,id:"formulaFunctionsTree",type:"branch",className:"fieldsTree formulaTree"}),this._renderFunctionHelper(),(0,F.tZ)("div",{className:"formulaModal-sidebar-dropDown-Helper",children:this._renderGroupLevel()}),(0,F.tZ)("div",{className:"formulaModal-sidebar-footer",children:(0,F.tZ)(a.Z,{label:y.Z.getLabel("reportBuilder","insert"),variant:"brand",iconCategory:"utility",iconName:"chevronright",iconPosition:"right",iconSize:"small",iconClassName:"slds-icon_flip",onClick:this._handleInsertFunctionClick.bind(this),disabled:!this.state.selected.functionsTree})})]})})]})})}}},18916:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var i=r(96486),s=r.n(i),n=r(67294),o=r(50130),a=r(41172),l=r(84198),u=r(20048),d=r.n(u),c=r(12205),h=r(8429),p=r(32574),g=r.n(p),m=r(35944);const _=(0,c.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(946)]).then(r.bind(r,7702))),{addHackyComponentRef:!0}),f=new RegExp("<s*a[^>]*>(.*?)<s*/s*a>","g"),y={formInput:{name:"4dt8wk",styles:"width:55%"},editor:{name:"561ou7",styles:"height:70%"},textArea:{name:"n31mhe",styles:"width:100%;padding:0"}};class b extends n.Component{static displayName="FormulaInput";static defaultProps={blocks:null,onChange:()=>{},fields:[],functions:[],groupingsAcross:[],groupingsDown:[],onRequestValidateFormula:()=>{},isValidating:!1,options:{},placeholder:"",showDescription:!1,showToolbar:!1,toolbarItems:[],canChangeType:!0};constructor(e){super(e),this._editorRef=(0,n.createRef)(),this.state={focused:!1},this._columnNameInput=null}componentDidMount=()=>{this._columnNameInput.focus()};_changeValue=(e,t)=>{const r=this.props.formulaMetadata.clone();r.setIsValidated(!1),r[e](t),this.props.onChange(r)};_handleDecimalPlacesChange=(e,{selection:t})=>{if(t.length>0){const e=s().first(t);this._changeValue("setDecimalPlaces",parseInt(e.value))}};_handleDescriptionChange=e=>{this._changeValue("setDescription",e.target.value)};_handleEditorBlur=()=>{this.setState({focused:!1})};_handleEditorValueChange=e=>{this.props.formulaMetadata.getFormula()!==e&&this._changeValue("setFormula",e)};_handleEditorFocus=()=>{this.setState({focused:!0})};_handleLabelChange=e=>{this._changeValue("setLabel",e.target.value)};_handleOnBlur=()=>{this.props.onChange(this.props.formulaMetadata)};_handleFormulaTypeChange=(e,{selection:t})=>{if(t.length>0){const e=s().first(t);this._changeValue("setFormulaType",e.value)}};_getId=()=>this.props.id?this.props.id:"formula-input-id";_renderDecimalPlacesInput=()=>{if(!["number","percent","currency"].includes(this.props.formulaMetadata.getFormulaType()))return null;const e=[];for(let t=0;t<=18;t++)e.push({id:t.toString(),label:`${t}`,value:`${t}`});const t=this.props.formulaMetadata.getDecimalPlaces(),r=s().find(e,(e=>e.value===`${t}`));return(0,m.tZ)(d(),{labels:{label:h.Z.getLabel("reportBuilder","decimalPoints")},classNameContainer:"formulaEditor-formula-output",className:"formulaEditor-decimal-points",events:{onSelect:this._handleDecimalPlacesChange},id:`${this._getId()}-decimalPoints`,options:e,selection:[r],value:t,variant:"readonly"})};_renderErrorHyperlink=e=>{if(e){const t=e.indexOf("https://help.salesforce.com/");if(-1===t)return;const r=e.indexOf("'",t);if(-1===r)return;const i=decodeURIComponent(e.slice(t,r));return(0,m.tZ)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:h.Z.getLabel("reportBuilder","linkToDocumentation")})}};_renderErrorMessage=()=>{if(this.props.formulaMetadata.hasError()){const e=this.props.formulaMetadata.getErrorMessage(),t=e?e.replace(f,""):e,r=this._renderErrorHyperlink(e);return(0,m.BX)("div",{className:"formulaEditor-editor-error-label slds-form-element__label","aria-live":"polite",children:[(0,m.tZ)(o.Z,{className:"formulaEditor-editor-error-icon",assistiveText:{label:h.Z.getLabel("reportBuilder","warning")},category:"utility",name:"warning",size:"x-small"}),(0,m.BX)("div",{className:"formulaEditor-error",children:[t,r]})]})}};_renderFormInputs=()=>{const e=this.props.formulaMetadata,t=(0,m.tZ)(a.Z,{autoFocus:!0,className:"formulaEditor-name-input",errorText:this.props.formulaNameInputErrorText,id:`${this._getId()}-name`,inputRef:this.setColumnNameInputRef,label:h.Z.getLabel("CustomSummaryFormulas","csfLabel"),onChange:this._handleLabelChange,onBlur:this._handleOnBlur,maxLength:"40",required:!0,value:e.getLabel(),"aria-describedby":"slds-form-element__help"}),r=(0,m.tZ)(a.Z,{className:"formulaEditor-name-input",id:`${this._getId()}-description`,label:h.Z.getLabel("reportBuilder","description"),maxLength:"255",value:e.getDescription()||"",onChange:this._handleDescriptionChange});return(0,m.BX)("div",{className:"formulaEditor-form-inputs",css:y.formInput,children:[(0,m.tZ)("form",{autoComplete:"off",children:(0,m.BX)("div",{className:"formulaEditor-col-1",children:[t,r]})}),(0,m.BX)("div",{className:"formulaEditor-col-2",children:[this._renderFormulaTypeInput(),this._renderDecimalPlacesInput()]})]})};_renderGeneralTab=({withFormulaLabel:e}={withFormulaLabel:!1})=>{const t=g().classSet({"formulaEditor-editor-textarea":!0,"formulaEditor-editor-textarea--focus":this.state.focused}),r=g().classSet({"formulaEditor-editor-monaco":!0,"formulaEditor-editor-monaco--placeholder":!this.state.focused&&!this.props.formulaMetadata.getFormula()}),i=this.props.formulaMetadata,s=this.props.functions.map((e=>e.Name));return(0,m.BX)("div",{className:"formulaEditor-tabContent",children:[(0,m.BX)("div",{className:"formulaEditor-editor",css:y.editor,children:[e?(0,m.BX)("label",{className:"slds-form-element__label",children:[(0,m.tZ)("abbr",{className:"slds-required",title:h.Z.getLabel("reportBuilder","required"),children:"*"})," ",h.Z.getLabel("CustomSummaryFormulas","formulaHeader")]}):null,(0,m.tZ)("div",{className:t,css:y.textArea,children:(0,m.tZ)(_,{ref:this._editorRef,className:r,value:i.getFormula(),placeholderValue:this.props.placeholder,onValueChange:this._handleEditorValueChange,onFocus:this._handleEditorFocus,onBlur:this._handleEditorBlur,toolbarItems:this.props.toolbarItems,options:this.props.options,toolbarRightContent:this._renderHelpLink(),completionItemProvider:{provideCompletionItems:()=>({suggestions:this.props.completionItems})},functions:s,language:"csfLanguage"})})]}),this._renderErrorMessage()]})};_renderHelpLink=()=>(0,m.BX)("a",{className:"formulaEditor-editor-help",href:this.props.helpLink,target:"_blank",rel:"noreferrer noopener",children:[(0,m.tZ)(o.Z,{className:"formulaEditor-editor-help-icon",assistiveText:{label:h.Z.getLabel("reportBuilder","help")},category:"utility",name:"help",size:"x-small"}),h.Z.getLabel("reportBuilder","help")]});_renderFormulaTypeInput=()=>{const e=this.props.formulaTypes.map(((e,t)=>({id:t.toString(),...e.getFormattedValue()}))),t=this.props.formulaMetadata.getFormulaType(),r=s().find(e,(e=>e.value===t)),i=!this.props.canChangeType,n=i?h.Z.getLabel("reportBuilder","disabledChangeFormulaEditorOutputType"):"";return(0,m.tZ)("div",{className:"formulaEditor-output-type",title:n,children:(0,m.tZ)(d(),{id:`${this._getId()}-format-as`,labels:{label:h.Z.getLabel("reportBuilder","formatAs")},classNameContainer:"formulaEditor-formula-output",className:["number","percent","currency"].includes(t)?null:"formulaEditor-formula-type",events:{onSelect:this._handleFormulaTypeChange},options:e,selection:[r],value:t,variant:"readonly",singleInputDisabled:i})})};_renderValidateButton=()=>{if(this.props.formulaMetadata.isValidated()&&!this.props.formulaMetadata.hasError())return(0,m.BX)("div",{className:"formulaEditor-editor-valid-label slds-form-element__label","aria-live":"polite",children:[(0,m.tZ)(o.Z,{className:"formulaEditor-editor-valid-icon",assistiveText:{label:h.Z.getLabel("reportBuilder","valid")},category:"utility",name:"check",size:"x-small"}),(0,m.tZ)("div",{className:"formulaEditor-valid",children:h.Z.getLabel("reportBuilder","valid")})]});const e=this.props.formulaMetadata.getLabel()&&this.props.formulaMetadata.getFormula();return(0,m.tZ)("div",{className:"formulaEditor-editor-valid-label slds-form-element__label",children:(0,m.tZ)(l.Z,{className:"formulaEditor-editor-validate-button",label:this.props.isValidating?h.Z.getLabel("reportBuilder","checkingSyntax"):h.Z.getLabel("CustomSummaryFormulas","checkSyntax"),onClick:this.props.onRequestValidateFormula,disabled:this.props.isValidating||!e})})};insert=e=>{this._editorRef.current&&this._editorRef.current.__unsafeComponentRef.insert(e)};setColumnNameInputRef=e=>{this._columnNameInput=e};render(){return this.props.formulaMetadata?(0,m.BX)("div",{className:"formulaEditor",children:[(0,m.tZ)("div",{className:"form-input-container",children:this._renderFormInputs()}),this.props.renderExtraMarkup(this._renderGeneralTab({withFormulaLabel:this.props.showFormulaLabel})),(0,m.tZ)("div",{className:"formulaEditor-editor-valid",children:this._renderValidateButton()})]}):(0,m.tZ)("div",{})}}},42614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(35944);const s=({imgUrl:e,styling:t,altText:s})=>{const n=r(19366)(`./${e}.png`);return(0,i.tZ)("div",{css:t,children:(0,i.tZ)("img",{src:n,alt:s})})}},41094:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(35944);function s(){const e=e=>{const t=[];for(let r=0;r<e;r++)t.push((0,i.tZ)("div",{className:"input"},r));return(0,i.tZ)("div",{className:"column-section-wrapper",children:(0,i.BX)("div",{className:"column-section",children:[(0,i.tZ)("div",{className:"header text text-short"}),t]})})};return(0,i.BX)("div",{className:"query-builder-placeholder widget-loading-placeholder",children:[(0,i.BX)("ul",{className:"slds-tabs_default__nav",children:[(0,i.tZ)("li",{className:"slds-tabs_default__item outline isActive",children:(0,i.tZ)("a",{className:"slds-tabs_default__link",children:(0,i.tZ)("div",{className:"text text-long"})})}),(0,i.tZ)("li",{className:"slds-tabs_default__item outline",children:(0,i.tZ)("a",{className:"slds-tabs_default__link",children:(0,i.tZ)("div",{className:"text text-long"})})})]}),e(1),e(4)]})}},39583:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var i=r(67294),s=r(66768),n=r(84198),o=r(41172),a=r(83758),l=r(90516),u=r(96486),d=r(8429),c=r(61506),h=r(97589),p=r.n(h),g=r(35944);const m=1e13,_=e=>{const{children:t,...r}=e;return(0,g.tZ)(s.Z,{...r,title:d.Z.getLabel("ReportBucketFields","add"),children:t?(0,g.tZ)(n.Z,{label:d.Z.getLabel("ReportBucketFields","add"),className:"add-bucket-number-range",onClick:e.onAddRange(parseInt(e.item.id,10)),iconName:"right",iconSize:"small",iconPosition:"right",iconCategory:"utility"}):null})};_.displayName=s.Z.displayName;const f=e=>{const{children:t,...r}=e;return(0,g.tZ)(s.Z,{...r,title:d.Z.getLabel("ReportBucketFields","delete"),children:t?(0,g.tZ)(n.Z,{assistiveText:{icon:d.Z.getLabel("ReportBucketFields","delete")},className:"remove-bucket-number-range",iconName:"close",variant:"icon",onClick:e.onDeleteRange(parseInt(e.item.id,10)),iconCategory:"utility"}):null})};f.displayName=s.Z.displayName;const y=e=>{const t=e.item.lowerBound?c.Z.get(p()).formatNumber(e.item.lowerBound):"",r=e.item.higherBound||"",{isLowest:i,isHighest:n}=e.item,a=(0,u.omit)(e,"children");let l;return a.title=d.Z.getLabel("ReportBucketFields","enterNumber"),l=i?d.Z.getLabel("InsightsSelector","operator_less_equal_math"):n?d.Z.getLabel("InsightsSelector","operator_greater_math"):d.Z.getLabel("ReportBucketFields","rangeText",t),(0,g.BX)(s.Z,{...a,children:[(0,g.tZ)("span",{className:"bucket-number-range-operator slds-truncate",dangerouslySetInnerHTML:{__html:l}}),n?(0,g.tZ)("span",{className:"slds-truncate bucket-range-higherBound",children:t}):(0,g.tZ)(o.Z,{id:"edit-bucket-range"+l,className:"edit-bucket-range",placeholder:d.Z.getLabel("ReportBucketFields","enterNumber"),value:r,onChange:e.onInputChange(parseInt(e.item.id,10)),onBlur:e.onBlur,assistiveText:i?{label:d.Z.getLabel("reportBucketFields","highestValLowestRange")}:{label:d.Z.getLabel("reportBucketFields","highestValMiddleRange")},"aria-required":!0,"aria-describedby":"edit-bucket-range-error",errorText:e.item.boundError,maxValue:m,minValue:-1e13,type:"number"})]})};y.displayName=s.Z.displayName;class b extends i.Component{state={numberList:this.props.numberList};render(){let e,t;return this.state.numberList.isAnyRangeDeletable()&&(e=(0,g.tZ)(a.Z,{property:"isDeletable",children:(0,g.tZ)(f,{onDeleteRange:this._onDeleteRange})})),this.state.numberList.isAtMaxRangeCount()||(t=(0,g.tZ)(a.Z,{property:"canAddMore",width:"5rem",children:(0,g.tZ)(_,{onAddRange:this._onAddRange})})),(0,g.tZ)("div",{className:"bucket-number-table-container",children:(0,g.BX)(l.Z,{items:this.state.numberList.flatten().map((e=>(e.id=String(e.id),e))),id:"reportBucketNumberTable",className:"bucket-number-table",noRowHover:!0,columnBordered:!0,unbufferedCell:!0,children:[t,(0,g.tZ)(a.Z,{label:d.Z.getLabel("ReportBucketFields","range"),children:(0,g.tZ)(y,{onInputChange:this._onBoundChange})}),(0,g.tZ)(a.Z,{label:this.props.propertyLabel,property:this.props.propertyName,children:this.props.propertyRender(this._onPropertyChange)}),e]})})}_onPropertyChange=(e,t,r)=>{this.props.updatePropertyValue(this.state.numberList,e,r),this._updateRanges()};_onBoundChange=e=>t=>{const r=t.target.value?parseFloat(t.target.value):null;this.state.numberList.updateRangeBound(e,r),this._updateRanges()};_onAddRange=e=>()=>{this.state.numberList.addRange(e),this._updateRanges()};_onDeleteRange=e=>()=>{this.state.numberList.deleteRange(e),this._updateRanges()};_updateRanges=()=>{this.state.numberList.clearErrors(),this.props.onChange()}}},57182:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(6343),s=r(67294),n=r(61506),o=r(37129),a=r(52254),l=r(97957),u=r(91718),d=(r(55987),r(35944));class c extends s.Component{state={isOpenAndActive:!1,title:void 0,subtitle:void 0};async componentDidMount(){let e;this._experiencePromise=new o.Z(n.Z.get(l.Z).getExperience(this.props.experienceName));try{e=await this._experiencePromise.getPromise()}catch(e){if(e.isCanceled)return;throw e}const t=!e.hasBeenSeenOnce()&&e.isActive();this.setState({isOpenAndActive:t,title:e.definition.title,subtitle:e.definition.subtitle}),t&&u.ZP.logPopover(this.props.experienceName,a.Z.OPENED)}componentWillUnmount(){this._experiencePromise&&this._experiencePromise.cancel()}render(){if(!this.state.isOpenAndActive||!this.state.title||!this.state.subtitle)return this.props.children;const e=(0,d.tZ)("p",{children:this.state.subtitle}),t=null==this.props.footerWalkthroughActions?{footer:this.props.footer}:{footerWalkthroughActions:this.props.footerWalkthroughActions,stepText:this.props.stepText};return this.props.css&&(t.css=this.props.css),(0,d.tZ)(i.Z,{isOpen:this.state.isOpenAndActive,heading:this.state.title,body:e,onRequestClose:this._onRequestClose,triggerClassName:this.props.triggerClassName?`experience-popover-trigger ${this.props.triggerClassName}`:"experience-popover-trigger",classNameBody:"experience-popover-body",variant:this.props.variant||"feature",position:this.props.position,align:this.props.align,icon:this.props.icon,className:this.props.className,...t,children:this.props.children})}_onRequestClose=()=>{this.setState({isOpenAndActive:!1}),n.Z.get(l.Z).seeExperience(this.props.experienceName),u.ZP.logPopover(this.props.experienceName,a.Z.CLOSED)}}},39947:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m;m=r(96486),r(24426).Z,l=r(22784),o=r(52115),u=r(74107),n=r(1026).Z,g=r(17599).Z,a=r(8429).Z,i=r(52699).Z,d=r(81697).ZP,c=r(62547).Z,h=r(88730).Z,p=r(29882).Z,s=function(){function e(){}return e.prototype.initialize=function(e,t,r,i){return this._auraApp=e,this._parentAuraApp=t,this._$A=null!=r?r:window.parent.$A,this._innerAura=null!=i?i:window.$A,this._auraActionQueue={}},e.prototype.getReport=function(e){return this._runAuraAction("describeReport",{id:e})},e.prototype.getReportConfig=function(e){var t,r;return r=this.getReportActions(e),t=this.getInitialAppConfig(e),Promise.all([r,t])},e.prototype.getJavascriptCacheKey=function(){return this._runAuraAction("getJavascriptCacheKey",{})},e.prototype.getInitialReportMetadata=function(e){return this._runAuraAction("getInitialReportMetadata",{reportId:e})},e.prototype.getInitialAppConfig=function(e){return this._runAuraAction("getInitialAppConfig",{reportId:e})},e.prototype.describeReport=function(e,t){return null==t&&(t=!0),this._runAuraAction("describeReport",{reportId:e})},e.prototype.describeFolder=function(e){return this._runAuraAction("describeFolder",{folderId:e},!0)},e.prototype.getTrendedReportDetails=function(e,t){return this._runAuraAction("getTrendedReportDetails",{reportId:e,checkIfTabularWithHT:t})},e.prototype.getUserCanStillTrend=function(){return this._runAuraAction("hasTrendedMaxReportsAllowed",{})},e.prototype.updateReportTypeVisibility=function(e,t){return this._runAuraAction("updateReportTypeVisibility",{reportType:t,data:JSON.stringify({hidden:e})})},e.prototype.getRecentReportTypes=function(){return this._runAuraAction("getRecentReportTypes")},e.prototype.runReport=function(e,t,r,i,s,n,o,a,l,u){var d,c;return null==r&&(r=!1),null==i&&(i=!1),null==s&&(s=!1),null==a&&(a=!0),null==l&&(l=!1),c=i,d={reportId:e,reportMetadata:JSON.stringify({reportMetadata:t}),isPreview:r,createReportInstance:i,includeChartData:s,fastCsv:c,requestOrigin:n,skipReportResult:o,isDataCloud:l},this._runAuraAction("runReport",d,!1,u,!0,e,this._getActionName(r))},e.prototype.deleteReport=function(e){return this._runAuraAction("deleteReport",{reportId:e})},e.prototype.loadReportTypes=function(){return this._runAuraAction("loadReportTypes")},e.prototype.getRecentlyCreatedReportsUsingReportType=function(e,t,r,i){return this._runAuraAction("getRecentlyCreatedReportsUsingReportType",{reportTypeId:e,isCurrentUser:t,pageSize:r,offset:i})},e.prototype.getReportType=function(e){return this._runAuraAction("queryReportType",{reportType:e},!0)},e.prototype.getJoinedReportTypes=function(e,t){return t=m.map(m.without(t,e),(function(e){return{type:e}})),this._runAuraAction("queryJoinedReportTypes",{principalReportType:e,reportTypes:JSON.stringify({reportTypes:t})},!0)},e.prototype.getCommonObjects=function(e,t){return t=m.map(m.without(t,e),(function(e){return{type:e}})),this._runAuraAction("queryCommonObjects",{principalReportType:e,reportTypes:JSON.stringify({reportTypes:t})},!0)},e.prototype.getCrossFilterRelatedObjectFields=function(e,t){return this._runAuraAction("queryCrossFilterRelatedObjectFields",{reportType:e,relatedObject:t},!0)},e.prototype.queryReport=function(e,t,r,i,s,n){return null==t&&(t=!1),null==r&&(r=!1),null==i&&(i="rpgd"),this._runAuraAction("queryReport",{reportMetadata:JSON.stringify({reportMetadata:e}),isPreview:t,includeChartData:r,requestOrigin:i,skipReportResult:s},!1,n,!0,e.id,this._getActionName(t))},e.prototype.saveReport=function(e,t){return this._runAuraAction("saveReport",{reportMetadata:JSON.stringify({reportMetadata:t}),reportId:e})},e.prototype.selectFolder=function(e,t,r){return this._runAuraClientAction("selectFolder",{folderId:e,reportName:t,isCreatingReport:r})},e.prototype.getPlatformActions=function(e,t){return this._runAuraAction("retrieveActions",{reportId:e},t)},e.prototype.getReportActions=function(e,t){return null==t&&(t=!0),e?this.getPlatformActions(e,t):Promise.resolve([{ApiName:"ReportSaveAction"},{ApiName:"ReportExportAction"},{ApiName:"LightningReportEditAction"}])},e.prototype.describeSObject=function(e){return this._runAuraAction("describeSObject",{entityName:e},!0)},e.prototype.describeSObjectLayout=function(e,t){return this._runAuraAction("describeSObjectLayout",{entityName:e,recordTypeId:t},!0)},e.prototype.getSObject=function(e,t,r){return this._runAuraAction("getSObjectInfo",{entityName:e,recordId:t},r)},e.prototype.updateSObject=function(e,t,r){return this._runAuraAction("updateSObject",{entityName:e,recordId:t,data:JSON.stringify(r)})},e.prototype.updateSObjectCollection=function(e,t){return null==t&&(t=!1),this._runAuraAction("updateSObjectCollection",{data:JSON.stringify({compositeRequest:e,allOrNone:t})})},e.prototype.getAggregates=function(e,t,r){return this._runAuraAction("getAggregates",{reportId:e,data:JSON.stringify({aggregateKey:t,limit:r})})},e.prototype.getActiveCurrencies=function(){return this._runAuraAction("getActiveCurrencies",null,!0)},e.prototype.getOrgEdition=function(){return this._runAuraAction("getOrgEdition",null,!0)},e.prototype.getReportTypePermissions=function(){return this._runAuraAction("getReportTypePermissions")},e.prototype.getReportOnboarding=function(e){return this._runAuraAction("getReportOnboarding",{experienceId:e})},e.prototype.setReportOnboarding=function(e){return this._runAuraAction("setReportOnboarding",{experienceId:e})},e.prototype.getAllSobjects=function(){return this._runAuraAction("getAllSobjects")},e.prototype.getSObjectFields=function(e){return this._runAuraAction("getSObjectFields",{sObject:e})},e.prototype.getReportTypesbySObject=function(e,t){return this._runAuraAction("getReportTypesbySObject",{sObjects:e,pageNumber:t})},e.prototype.getReportTypesbyFields=function(e,t){return this._runAuraAction("getReportTypesbyFields",{sObjectFields:e,pageNumber:t})},e.prototype.searchColumnTextValue=function(e,t,r,i){return null==r&&(r=""),this._runAuraAction("searchColumnTextValue",{reportType:e,column:t,searchTerm:r,reportMetadata:JSON.stringify({reportMetadata:i})},!0)},e.prototype.getFormulaFunctions=function(){return this._runAuraAction("retrieveFormulaFunctions",null,!0)},e.prototype.getFormulaFunctionCategories=function(){return this._runAuraAction("retrieveFormulaFunctionCategories",null,!0)},e.prototype.getAnalyses=function(e){return this._runAuraAction("getAnalyses",{containerId:e,sourceType:i.REPORT.code})},e.prototype.getAnalysis=function(e){return this._runAuraAction("getAnalysis",{analysisId:e})},e.prototype.getInputProfile=function(e){return this._runAuraAction("getInputProfile",{storyHistoryId:e})},e.prototype.createAnalysis=function(e){return this._runAuraAction("createAnalysis",{setup:e})},e.prototype.deleteAnalysis=function(e){return this._runAuraAction("deleteAnalysis",{analysisId:e})},e.prototype.patchAnalysis=function(e,t){return this._runAuraAction("updateAnalysis",{analysisId:e,analysisUpdate:t})},e.prototype.getStories=function(e){var t;return t=i.REPORT.code,Object.prototype.hasOwnProperty.call(e,"sourceTypes")&&e.sourceTypes&&(t=e.sourceTypes.map((function(e){return e.code})).join(",")),this._runAuraAction("getStories",{folderId:e.folderId,inputId:e.inputId,sourceTypes:t,scope:e.scope,page:e.page,pageSize:e.pageSize,filterGroup:e.filterGroup}).then((function(e){return new c(e)})).catch((function(e){throw e}))},e.prototype.getStoryHistory=function(e,t){return this._runAuraAction("getStoryHistory",{storyId:e,storyVersionId:t}).then((function(e){return new d(e)})).catch((function(e){if(e.id&&m.startsWith(e.id,"9B4"))return new d(e);throw e}))},e.prototype.getStoryHistories=function(e){return this._runAuraAction("getStoryHistories",{storyId:e}).then((function(e){return new p(e)})).catch((function(e){throw e}))},e.prototype.postStory=function(e){return this._runAuraAction("postStory",{storyInput:e}).then((function(e){return new h(e)})).catch((function(e){throw e}))},e.prototype.patchStory=function(e,t){return this._runAuraAction("patchStory",{storyId:e,storyUpdateInput:t}).then((function(e){return new h(e)})).catch((function(e){throw e}))},e.prototype.deleteStory=function(e){return this._runAuraAction("deleteStory",{storyId:e})},e.prototype.deleteStoryHistory=function(e,t){return this._runAuraAction("deleteStoryHistory",{storyId:e,storyHistoryId:t})},e.prototype.compareStoryVersions=function(e,t){return this._runAuraAction("compareStoryVersions",{storyId:e,comparisonInput:t}).then((function(e){return e.Body}))},e.prototype.sendPayloadToProxy=function(e){return this._runAuraAction("sendPayloadToProxy",{payload:e}).then((function(e){return e})).catch((function(e){throw e}))},e.prototype.postPowerInsightsLogs=function(e){return this._runAuraAction("postPowerInsightsLogs",{input:{logLines:e}})},e.prototype.getTrendingMetadata=function(){return this._runAuraClientAction("getTrendingMetadata",{})},e.prototype.trendReport=function(e,t){return this._runAuraClientAction("launchTrendDialog",{reportId:e,reportMetadata:t})},e.prototype.viewTrend=function(e,t){return this._runAuraClientAction("launchViewTrendOverlay",{reportId:e,reportMetadata:t})},e.prototype.viewTrendingDetails=function(e,t){return this._runAuraClientAction("launchTrendingDetailsDialog",{reportId:e,reportMetadata:t})},e.prototype.stopTrending=function(e,t){return this._runAuraClientAction("launchStopTrendingConfirmationDialog",{reportId:e,reportMetadata:t})},e.prototype.querySObjectData=function(e,t,r,i){return this._runAuraAction("querySObjectData",{entityName:e,nameField:t,searchTerm:r,limit:i},!0)},e.prototype._crudTransactionHelper=function(e,t,r){return"runReport"===e?this._crudTransaction(r,u.RUN):"saveReport"===e?null!=t?this._crudTransaction(t,u.SAVE):this._crudTransaction(r,u.SAVENEW):void 0},e.prototype.runGenericAuraAction=function(e,t,r,i,s,n,o){return this._runAuraAction(e,t,r,i,s,n,o)},e.prototype._runAuraAction=function(e,t,r,i,s,n,l){var u,d,c,h;return c=null!=t?t.reportId:void 0,h=new o,u=this._parentAuraApp,d=function(){var n;return(n=u.get("c."+e)).setAbortable(),t&&n.setParams(t),this._processAuraActionQueue(e,n,h,i),n.setCallback(this,(function(r){var i,n,o,u,d;if("SUCCESS"===(u=r.getState())?(i=null!=(d=(o=r.getReturnValue()||[]).attributes)?d.reportId:void 0,this._crudTransactionHelper(e,c,i),o.length>0&&o[0].errorCode?(n=o[0],h.reject(n)):o.errorCode?h.reject(o):(Array.isArray(o)&&(o=Array.from(o)),h.resolve(o))):"ERROR"!==u&&"INCOMPLETE"!==u||((n=r.getError()).length>0&&(n=n[0]),"INCOMPLETE"===u&&(n.message=a.getLabel("CommonErrorMsg","offline")),h.reject(n)),s)return this._transactionEnd(e,m.extend({},t,l),t.isPreview)})),r?n.setStorable():n.setStorable({ignoreExisting:!0}),this._$A.enqueueAction(n)},s&&this._transactionStart(e,null,n,t.isPreview),this._$A.getCallback(d.bind(this))(),h.promise()},e.prototype._runAuraClientAction=function(e,t){var r,i,s,n;return r=this._auraApp,n=new o,s={getPromise:function(){return n},getParams:function(){return t},getParam:function(e){return t[e]}},i=function(){return r.get("c."+e).run(s)},this._innerAura.getCallback(i.bind(this))(),n.promise()},e.prototype._processAuraActionQueue=function(e,t,r,i){return e=this._getModifiedActionName(e,i),this._searchAndAbort(e,i),this._auraActionQueue[e]={auraAction:t,promise:r}},e.prototype._getModifiedActionName=function(e,t){return null!=t?t+":"+e:e},e.prototype._searchAndAbort=function(e,t){var r,i;if(null!=(r=this._auraActionQueue[e]))return"NEW"===(i=r.auraAction.getState())||"RUNNING"===i?r.auraAction.abort():void 0},e.prototype._transactionStart=function(e,t,r,i){return n.transactionStart(l.getEnumByCode(e).getTraceName(i),t,r)},e.prototype._transactionEnd=function(e,t,r){return n.transactionEnd(l.getEnumByCode(e).getTraceName(r),t)},e.prototype._crudTransaction=function(e,t){return n.crudTransaction(e,t.name(),t.locator())},e.prototype._getActionName=function(e){return{action:e?g.EDIT_REPORT.getValue():g.RUN_REPORT.getValue()}},e}(),e.exports=new s,e.exports.AuraLightningDataService=s},9502:(e,t,r)=>{var i,s,n;n=r(67266),s=r(51841).Z,r(3479).Z,i=r(40167).Z,r(7931),e.exports=function(){function e(e,t){this._delegate=e,this._cachingStrategy=t}return e.prototype.getReport=function(e){return this._delegate.getReport(e)},e.prototype.getReportConfig=function(e){return this._delegate.getReportConfig(e)},e.prototype.getJavascriptCacheKey=function(){return this._delegate.getJavascriptCacheKey()},e.prototype.getInitialReportMetadata=function(e){return this._delegate.getInitialReportMetadata(e)},e.prototype.getInitialAppConfig=function(e){return this._delegate.getInitialAppConfig(e)},e.prototype.describeReport=function(e,t){return null==t&&(t=!0),this._delegate.describeReport(e,t)},e.prototype.getReportOnboarding=function(e){return this._delegate.getReportOnboarding(e)},e.prototype.setReportOnboarding=function(e){return this._delegate.setReportOnboarding(e)},e.prototype.describeFolder=function(e){return this._delegate.describeFolder(e)},e.prototype.getTrendedReportDetails=function(e,t){return this._delegate.getTrendedReportDetails(e,t)},e.prototype.getUserCanStillTrend=function(){return this._delegate.getUserCanStillTrend()},e.prototype.updateReportTypeVisibility=function(e,t){return this._delegate.updateReportTypeVisibility(e,t)},e.prototype.getAllSobjects=function(){return this._delegate.getAllSobjects()},e.prototype.getSObjectFields=function(e){return this._delegate.getSObjectFields(e)},e.prototype.getReportTypesbySObject=function(e,t){return this._delegate.getReportTypesbySObject(e,t)},e.prototype.getReportTypesbyFields=function(e,t){return this._delegate.getReportTypesbyFields(e,t)},e.prototype.getRecentReportTypes=function(){return this._delegate.getRecentReportTypes()},e.prototype.runReport=function(e,t,r,s,o,a,l,u,d,c,h){var p,g,m;return null==r&&(r=!1),null==s&&(s=!1),null==o&&(o=!1),null==u&&(u=!0),null==d&&(d=!1),g=function(){return this._delegate.runReport(e,t,r,s,o,a,l,u,d,c)}.bind(this),m=new i(t),p=n({reportMetadata:t,isPreview:r,includeChartData:o,skipReportResult:l},{replacer:m.scrape.bind(m)}),h||this._cachingStrategy.clearCacheForKey(p),r?this._cachingStrategy.getOrPutSerializedResultWithCacheHitCallback(p,g,m.patch.bind(m)):this._cachingStrategy.getOrPutPromiseObjectWithCacheHitCallback(p,g,m.patch.bind(m))},e.prototype.deleteReport=function(e){return this._delegate.deleteReport(e)},e.prototype.loadReportTypes=function(){var e;if(e=function(){return this._delegate.loadReportTypes()}.bind(this),this._cachingStrategy)return this._cachingStrategy.getOrPutPromiseObject("loadReportTypes",e)},e.prototype.getReportType=function(e){return this._delegate.getReportType(e)},e.prototype.getJoinedReportTypes=function(e,t){return this._delegate.getJoinedReportTypes(e,t)},e.prototype.getCommonObjects=function(e,t){return this._delegate.getCommonObjects(e,t)},e.prototype.getCrossFilterRelatedObjectFields=function(e,t,r){var i,s;return null==r&&(r=!0),s=function(){return this._delegate.getCrossFilterRelatedObjectFields(e,t)}.bind(this),r?(i=n({reportType:e,relatedObject:t}),this._cachingStrategy.getOrPutPromiseObject(i,s)):s()},e.prototype.getRecentlyCreatedReportsUsingReportType=function(e,t,r,i){return this._delegate.getRecentlyCreatedReportsUsingReportType(e,t,r,i)},e.prototype.queryReport=function(e,t,r,s,o,a,l){var u,d,c;return null==t&&(t=!1),null==r&&(r=!1),null==s&&(s="rpgd"),d=function(){return this._delegate.queryReport(e,t,r,s,o,a)}.bind(this),c=new i(e),u=n({reportMetadata:e,isPreview:t,includeChartData:r,skipReportResult:o},{replacer:c.scrape.bind(c)}),l||this._cachingStrategy.clearCacheForKey(u),t?this._cachingStrategy.getOrPutSerializedResultWithCacheHitCallback(u,d,c.patch.bind(c)):this._cachingStrategy.getOrPutPromiseObjectWithCacheHitCallback(u,d,c.patch.bind(c))},e.prototype.saveReport=function(e,t){return this._delegate.saveReport(e,t)},e.prototype.selectFolder=function(e,t,r,i,s,n){return this._delegate.selectFolder(e,t,r,i,s,n)},e.prototype.subscribeReport=function(e,t,r,i,s,n){return this._delegate.subscribeReport(e,t,r,i,s,n)},e.prototype.exportReport=function(e,t,r,i,s,n){return this._delegate.exportReport(e,t,r,i,s,n)},e.prototype.getPlatformActions=function(e,t){return this._delegate.getPlatformActions(e,t)},e.prototype.getReportActions=function(e,t){return null==t&&(t=!0),this.getPlatformActions(e)},e.prototype.describeSObject=function(e,t){var r,i;return null==t&&(t=!0),i=function(){return this._delegate.describeSObject(e)}.bind(this),t?(r=n({apiName:"describeSObject",sObjectName:e}),this._cachingStrategy.getOrPutPromiseObject(r,i)):i()},e.prototype.describeSObjectLayout=function(e,t,r){var i,s;return null==r&&(r=!0),s=function(){return this._delegate.describeSObjectLayout(e,t)}.bind(this),r?(i=n({apiName:"describeSObjectLayout",sObjectName:e,recordTypeId:t}),this._cachingStrategy.getOrPutPromiseObject(i,s)):s()},e.prototype.getSObject=function(e,t,r){var i,s;return null==r&&(r=!0),s=function(){return this._delegate.getSObject(e,t,r)}.bind(this),r?(i=n({apiName:"getSObject",sObjectName:e,sObjectId:t}),this._cachingStrategy.getOrPutPromiseObject(i,s)):s()},e.prototype.updateSObject=function(e,t,r){return this._delegate.updateSObject(e,t,r)},e.prototype.updateSObjectCollection=function(e,t,r){return null==t&&(t=!1),null==r&&(r=!1),this._delegate.updateSObjectCollection(e,t,r)},e.prototype.getAggregates=function(e,t,r,i){var s,o;return null==i&&(i=!0),o=function(){return this._delegate.getAggregates(e,t,r)}.bind(this),i?(s=n({apiName:"getAggregates",reportId:e,aggregateKeys:t,limit:r}),this._cachingStrategy.getOrPutPromiseObject(s,o)):o()},e.prototype.getActiveCurrencies=function(){var e;return e=function(){return this._delegate.getActiveCurrencies()}.bind(this),this._cachingStrategy.getOrPutPromiseObject("currenciesPromise",e)},e.prototype.getOrgEdition=function(){var e;return e=function(){return this._delegate.getOrgEdition()}.bind(this),this._cachingStrategy.getOrPutResultObject("orgEdition",e).then((function(e){return s.getEnumByCode(e[0].OrganizationType)}))},e.prototype.getReportTypePermissions=function(){return this._delegate.getReportTypePermissions()},e.prototype.searchColumnTextValue=function(e,t,r,i){return null==r&&(r=""),this._delegate.searchColumnTextValue(e,t,r,i)},e.prototype.getFormulaFunctions=function(e){var t;return null==e&&(e=!0),t=function(){return this._delegate.getFormulaFunctions()}.bind(this),e?this._cachingStrategy.getOrPutPromiseObjectWithNoEviction("formulaFunctions",t):t()},e.prototype.getFormulaFunctionCategories=function(e){var t;return null==e&&(e=!0),t=function(){return this._delegate.getFormulaFunctionCategories()}.bind(this),e?this._cachingStrategy.getOrPutPromiseObjectWithNoEviction("FormulaFunctionCategories",t):t()},e.prototype.getAnalyses=function(e){return this._delegate.getAnalyses(e)},e.prototype.getAnalysis=function(e){return this._delegate.getAnalysis(e)},e.prototype.createAnalysis=function(e){return this._delegate.createAnalysis(e)},e.prototype.deleteAnalysis=function(e){return this._delegate.deleteAnalysis(e)},e.prototype.patchAnalysis=function(e,t){return this._delegate.patchAnalysis(e,t)},e.prototype.getStories=function(e){return this._delegate.getStories(e)},e.prototype.getStoryHistory=function(e,t){return this._delegate.getStoryHistory(e,t)},e.prototype.getStoryHistories=function(e){return this._delegate.getStoryHistories(e)},e.prototype.postStory=function(e){return this._delegate.postStory(e)},e.prototype.patchStory=function(e,t){return this._delegate.patchStory(e,t)},e.prototype.deleteStory=function(e){return this._delegate.deleteStory(e)},e.prototype.deleteStoryHistory=function(e,t){return this._delegate.deleteStoryHistory(e,t)},e.prototype.compareStoryVersions=function(e,t){return this._delegate.compareStoryVersions(e,t)},e.prototype.getInputProfile=function(e){return this._delegate.getInputProfile(e)},e.prototype.sendPayloadToProxy=function(e){return this._delegate.sendPayloadToProxy(e)},e.prototype.postPowerInsightsLogs=function(e){return this._delegate.postPowerInsightsLogs(e)},e.prototype.getTrendingMetadata=function(){return this._delegate.getTrendingMetadata()},e.prototype.trendReport=function(e,t){return this._delegate.trendReport(e,t)},e.prototype.viewTrend=function(e,t){return this._delegate.viewTrend(e,t)},e.prototype.viewTrendingDetails=function(e,t){return this._delegate.viewTrendingDetails(e,t)},e.prototype.stopTrending=function(e,t){return this._delegate.stopTrending(e,t)},e.prototype.querySObjectData=function(e,t,r,i){return function(){return this._delegate.querySObjectData(e,t,r,i)}.bind(this)()},e}()},22784:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this.getValue().name},t.prototype.getTraceName=function(e){var t;return t=this.getValue().traceName,e?"Preview-"+t:t},t}(i),s.build(s,{RUN_REPORT:{name:"runReport",traceName:"Run-Report"},QUERY_REPORT:{name:"queryReport",traceName:"Query-Report"}})},96588:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(90554).toSet,s=r(78978),e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getMethodNames=function(){if(null==this._value.methodNames)throw new Error("ENUM needs method names to be defined with the capability");return n(this._value.methodNames,!0)},t}(s),i.build(i)},54953:(e,t,r)=>{r(27223),e.exports={hasCapability:function(e){if(null==this._capabilities)throw new Error("Capabilities are not registered yet");return null!=this._capabilities[e.getName()]},callCapabilityMethod:function(e,t,r){if(null==r&&(r=[]),this.hasCapability(e)){if(null==e.getMethodNames()[t])throw new Error(t+" not defined on "+e.getName());return this[t].apply(this,r)}},_registerCapabilities:function(e){var t,r,i,s,n;for(this._capabilities={},n=[],i=0,s=e.length;i<s;i++)t=e[i],this._capabilities[t.getName()]=t,n.push(function(){var e,i;for(r in i=[],e=t.getMethodNames()){if(e[r],null==this[r])throw new Error("Method "+r+" required by "+t.getName()+" not implemented");i.push(void 0)}return i}.call(this));return n}}},90424:(e,t,r)=>{var i,s,n,o,a;a=r(72555),n=r(67294),s=r(45697),i=r(23084),o=r(32574),r(62117),e.exports=a({displayName:"LoadingRC",propTypes:{type:s.instanceOf(i),size:s.oneOf(["x-small","small","medium"]),fullPage:s.bool,className:s.string},getDefaultProps:function(){return{type:i.DEFAULT}},render:function(){var e,t,r,s;switch(this.props.type){case i.INLINE:t="inline";break;case i.BUTTON:t="button";break;case i.ROW:t="row";break;default:t=""}return e=o.buildClassName("loading-analytics-container",t,this.props.size),s=o.buildClassName("loading-analytics",t,this.props.className),r=n.createElement("div",{className:e},n.createElement("svg",{className:s,xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100"},n.createElement("g",{transform:"scale(1,-1) translate(0,-100)"},n.createElement("line",{x1:"77.7",y1:"23.5",x2:"22.3",y2:"23.5"}),n.createElement("rect",{className:"outer-bar",x:"29.3",y:"23.5",width:"13.8",height:"18.4"},n.createElement("animate",{attributeType:"XML",attributeName:"height",from:"18.4",to:"18.4",begin:"0s",dur:"1000ms",values:"18.4;8;8;18.4;18.4;18.4",keySplines:"0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1",keyTimes:"0;0.25;0.5;0.75;1;1",calcMode:"spline",repeatCount:"indefinite"})),n.createElement("rect",{className:"inner-bar",x:"43.1",y:"23.5",width:"13.8",height:"35.7"},n.createElement("animate",{attributeType:"XML",attributeName:"height",from:"35.7",to:"35.7",begin:"150ms",dur:"1000ms",values:"35.7;8;8;35.7;35.7;35.7",keySplines:"0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1",keyTimes:"0;0.25;0.5;0.75;1;1",calcMode:"spline",repeatCount:"indefinite"})),n.createElement("rect",{className:"outer-bar",x:"56.9",y:"23.5",width:"13.8",height:"53"},n.createElement("animate",{attributeType:"XML",attributeName:"height",from:"53",to:"53",begin:"300ms",dur:"1000ms",values:"53;8;8;53;53;53",keySplines:"0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1;0.5 0 0.5 1",keyTimes:"0;0.25;0.5;0.75;1;1",calcMode:"spline",repeatCount:"indefinite"}))))),this.props.fullPage?n.createElement("div",{className:"pagespinner"},r):r}})},23084:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(78978),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.build(t,["INLINE","BUTTON","ROW","DEFAULT"]),t}(i)},22949:(e,t,r)=>{var i,s,n;n=r(72555),s=r(67294),i=r(45697),e.exports=n({displayName:"AriaLiveRegionRC",propTypes:{politeText:i.string,assertiveText:i.string},render:function(){return s.createElement("div",{className:"slds-assistive-text"},s.createElement("div",{"aria-live":"polite"},this.props.politeText),s.createElement("div",{"aria-live":"assertive"},this.props.assertiveText))}})},65408:(e,t,r)=>{var i;i=r(96486),e.exports=function(){function e(e){this._round=null==e||e}return e.from=function(t,r){var s,n,o,a,l,u,d,c;if(i.isEmpty(t))return(new e).setTopLeft(0,0).setWidth(0).setHeight(0);for(d=0,c=t.length;d<c;d++)o=t[d],(null==a||o.getLeft()<a)&&(a=o.getLeft()),(null==l||o.getRight()>l)&&(l=o.getRight()),(null==u||o.getTop()<u)&&(u=o.getTop()),(null==s||o.getBottom()>s)&&(s=o.getBottom());return(n=new e(r)).setTopLeft(u,a),n.setWidth(l-a),n.setHeight(s-u)},e.prototype.setTopLeft=function(e,t){return this._round?(this._top=Math.round(e),this._left=Math.round(t)):(this._top=e,this._left=t),this},e.prototype.setMiddleLeft=function(e,t){return this.setTopLeft(e-this._height/2,t)},e.prototype.getTop=function(){return this._top},e.prototype.getMiddle=function(){return this._top+this._height/2},e.prototype.getBottom=function(){return this._top+this._height},e.prototype.getLeft=function(){return this._left},e.prototype.getCenter=function(){return this._left+this._width/2},e.prototype.getRight=function(){return this._right=this._left+this._width},e.prototype.setHeight=function(e){return this._height=this._round?Math.round(e):e,this},e.prototype.getHeight=function(){return this._height},e.prototype.setWidth=function(e){return this._width=this._round?Math.round(e):e,this},e.prototype.getWidth=function(){return this._width},e.prototype.add=function(e){var t,r,i,s;return s=Math.min(e.getTop(),this.getTop()),i=Math.min(e.getLeft(),this.getLeft()),t=Math.max(e.getBottom(),this.getBottom()),r=Math.max(e.getRight(),this.getRight()),this.setTopLeft(s,i),this.setHeight(t-s),this.setWidth(r-i),this},e.prototype.hitTest=function(e,t){var r;return null==t&&(t=!1),r=t?0:-1,!(e.getRight()+r<this.getLeft())&&(!(e.getLeft()>this.getRight()+r)&&(!(e.getBottom()+r<this.getTop())&&!(e.getTop()>this.getBottom()+r)))},e}()},85600:(e,t,r)=>{var i,s,n,o,a,l=[].slice;i=r(70351),o=r(96486),a=r(30077),s=a.get$,n=a.to$,e.exports={UNSAFE_componentWillMount:function(){return this._$eventsAttachedTo=[],this._$eventNS="event_"+o.uniqueId()},componentWillUnmount:function(){return this.offAll$()},getRef$:function(e){return s(this,e)},on$:function(){var e,t,r,i,s,a,u,d,c;for(i=arguments[0],s=arguments[1],e=arguments[2],r=arguments[3],t=5<=arguments.length?l.call(arguments,4):[],i=n(i),a=!1,u=0,d=(c=this._$eventsAttachedTo).length;u<d;u++)if(c[u]===i[0]){a=!0;break}return a||this._$eventsAttachedTo.push(i[0]),null!=r&&(e=o.isEmpty(t)?o.bind(e,r):o.bind.apply(o,[e,r].concat(t))),i.on(this._makeNameSpacedEvent(s),e),e},onThis$:function(){var e,t,r,i;return r=arguments[0],i=arguments[1],e=arguments[2],t=4<=arguments.length?l.call(arguments,3):[],this.on$.apply(this,[r,i,e,this].concat(t))},off$:function(e,t,r){return n(e).off(this._makeNameSpacedEvent(t),r)},offAll$:function(){var e,t,r,s,n;for(n=[],t=0,r=(s=this._$eventsAttachedTo).length;t<r;t++)e=s[t],n.push(i(e).off("."+this._$eventNS));return n},preventPropagation:function(e){"function"==typeof e.stopPropagation&&e.stopPropagation(),"function"==typeof e.preventDefault&&e.preventDefault()},_makeNameSpacedEvent:function(e){return e+"."+this._$eventNS}}},98287:(e,t,r)=>{var i,s,n,o,a,l;l=r(96486),r(52115),s=r(27223),i=r(18111),a=r(61506).Z,o=r(1149),e.exports=function(){function e(e){this._getCurrentFolderId=e,this._imageCache=new n,this._appConfigService=a.get(i)}return e.IMAGE_PAGE_SIZE=20,e.prototype.getCurrentFolderId=function(){return this._getCurrentFolderId()},e.prototype.loadAppDetails=function(){return s.checkImplemented()},e.prototype.getAppIconUrl=function(e){return s.checkImplemented()},e.prototype.fetchImageInfo=function(e,t){return null==t&&(t=!1),null==e||l.isEmpty(e.name)?Promise.resolve({label:void 0,url:void 0}):e.name.match(/^015/)&&15===e.name.length?Promise.resolve({label:e.name,url:this._appConfigService.getDocumentIdUrl()+l.escape(e.name)}):t?this.getImageUrl(e.namespace,e.name).then((function(e){return{label:"",url:e}})):this.getImageMetadata(e.namespace,e.name).then((function(e){return{label:null!=e?e.getLabel():void 0,url:null!=e?e.getUrl():void 0}}))},e.prototype.getImageUrl=function(e,t){return s.checkImplemented()},e.prototype.getImageMetadata=function(e,t){return s.checkImplemented()},e.prototype.getGalleryImages=function(e,t){return null==t&&(t=!1),s.checkImplemented()},e.prototype.handleImageDelete=function(e,t,r,i){return s.checkImplemented()},e.prototype.handleImageUpload=function(e,t,r){return s.checkImplemented()},e.prototype.handleMultipleImageUpload=function(e,t){return s.checkImplemented()},e.prototype.getImageCache=function(){return this._imageCache},e.prototype.isImageCached=function(e){return null!=e&&this._imageCache.isImageCached(e)},e}(),n=function(){function e(){this._cache={},this._cacheById={}}return e.prototype.add=function(e){var t;return t=new o(e),this._cache[e.fileAsset.name]=t,this._cacheById[e.id]=t},e.prototype.remove=function(e){var t;return t=this.getImage(e),delete this._cache[e],delete this._cacheById[t.getId()]},e.prototype.getImage=function(e){return this._cache[e]},e.prototype.getAllImages=function(){return l.values(this._cache)},e.prototype.getImageId=function(e){var t;return null!=(t=this._cache[e])?t.getId():void 0},e.prototype.getImageAssetId=function(e){var t;return null!=(t=this._cache[e])?t.getAssetizedId():void 0},e.prototype.isImageCached=function(e){return null!=this._cache[e.name]},e.prototype.isImageByIdCached=function(e){return null!=this._cacheById[e]},e}()},1149:e=>{e.exports=function(){function e(e){this._imageFileJson=e}return e.prototype.getUrl=function(e,t){return this._imageFileJson.fileAsset.baseAssetUrl},e.prototype.getName=function(){return this._imageFileJson.fileAsset.name},e.prototype.getNamespace=function(){return this._imageFileJson.fileAsset.namespacePrefix},e.prototype.getLabel=function(){return this._imageFileJson.name},e.prototype.getLinks=function(){},e.prototype.getCreationDate=function(){return this._imageFileJson.createdDate},e.prototype.getJson=function(){return this._imageFileJson},e.prototype.getAssetizedId=function(){return this._imageFileJson.fileAsset.id},e.prototype.getId=function(){return this._imageFileJson.id},e}()},57300:(e,t,r)=>{var i,s,n,o,a,l,u;u=r(96486),l=r(72555),n=r(67294),s=r(45697),i=r(91054),o=r(86194),a=r(9526),e.exports=l({displayName:"LongTableRC",propTypes:{ariaLabel:s.string,rowHeight:s.number.isRequired,pageSize:s.number.isRequired,viewportHeight:s.number.isRequired,viewportOffset:s.number,viewportScrolltop:s.number,maxRows:s.number,dataSource:s.instanceOf(a).isRequired,cellProvider:s.instanceOf(o).isRequired,onSelect:s.func,hasVisibleHeader:s.bool,loadingIndicator:s.element,isSortingEnabled:s.bool,onSort:s.func,selectedIndex:s.number,rowClassName:s.string,enableKeyboardNavigation:s.bool,onKeyDownfunc:s.func,setFocus:s.func},MIN_INVISIBLE_ROWS:5,getDefaultProps:function(){return{viewportOffset:0,viewportScrolltop:0,hasVisibleHeader:!0,isSortingEnabled:!1,enableKeyboardNavigation:!1}},getInitialState:function(){return{cachedRows:[],visibleStart:0,visibleEnd:0,displayStart:0,displayEnd:0,invisibleRowBufferSize:this.MIN_INVISIBLE_ROWS}},componentDidMount:function(){return this._isMounted=!0,this._recalculateVisibleRows(this.props)},UNSAFE_componentWillReceiveProps:function(e){return this._recalculateVisibleRows(e)},componentWillUnmount:function(){return this._isMounted=!1},_recalculateVisibleRows:function(e){var t,r,i,s,n,o,a,l,u,d,c,h,p,g;if(this._isMounted)return c=e.viewportScrolltop,a=e.hasVisibleHeader?e.rowHeight:0,d=e.viewportOffset+a,t=e.viewportHeight-Math.max(0,d-c),p=Math.ceil(t/e.rowHeight),l=this._getTotalRowCount(e),g=Math.max(0,Math.floor(Math.max(0,c-d)/e.rowHeight)),h=(g=Math.max(0,Math.min(l-1-p,g)))+p,n=Math.max(this.MIN_INVISIBLE_ROWS,Math.round(.5*p)),s=Math.max(0,g-n),i=Math.max(0,Math.min(this.state.cachedRows.length-1,h+n)),r=this.props.dataSource!==e.dataSource,o=h+n>=this.state.cachedRows.length&&this.state.cachedRows.length<l,u=r||o&&!this.state.loading,this.setState({visibleStart:g,visibleEnd:h,displayStart:s,displayEnd:i,invisibleRowBufferSize:n,totalRowCount:l,loading:!0===u?u:this.state.loading}),u?this._triggerLoad(r,h,e):void 0},_triggerLoad:function(e,t,r){var i,s;return e&&this.setState({cachedRows:[]}),i=e?0:this.state.cachedRows.length,r.dataSource.getRows(i,r.pageSize).then((s=this,function(t){return s._handleDataLoad(e,i,t)}))},_handleDataLoad:function(e,t,r){var i,s,n,o,a,l,d;if(this._isMounted){for(s=e?[]:u.clone(this.state.cachedRows),o=(new Date).getTime(),i=a=0,l=r.length;a<l;i=++a)n=r[i],s[t+i]={data:n,ts:o};return this.setState({cachedRows:s,loading:!1},(d=this,function(){return d._recalculateVisibleRows(d.props)}))}},_getTotalRowCount:function(e){var t;return t=e.dataSource.getTotalCount(),e.maxRows&&(t=Math.min(t,e.maxRows)),t},_onSortChange:function(e,t){var r,i;return this.props.dataSource.getSortedRows(0,this.props.pageSize,e,t).then((i=this,function(e){return i._handleDataLoad(!0,0,e)})),"function"==typeof(r=this.props).onSort?r.onSort(e,t):void 0},render:function(){return n.createElement(i,{ariaLabel:this.props.ariaLabel,rows:this.state.cachedRows,visibleStart:this.state.visibleStart,visibleEnd:this.state.visibleEnd,displayStart:this.state.displayStart,displayEnd:this.state.displayEnd,rowHeight:this.props.rowHeight,totalRowCount:this.state.totalRowCount||0,columns:this.props.dataSource.getColumns(),cellProvider:this.props.cellProvider,onSelect:this.props.onSelect,loadingIndicator:this.props.loadingIndicator,onSortChange:this._onSortChange,isSortingEnabled:this.props.isSortingEnabled,selectedIndex:this.props.selectedIndex,rowClassName:this.props.rowClassName,enableKeyboardNavigation:this.props.enableKeyboardNavigation,onKeyDownfunc:this.props.onKeyDownfunc,setFocus:this.props.setFocus})}})},46604:(e,t,r)=>{var i,s,n,o,a,l;l=r(96486),a=r(72555),s=r(67294),i=r(45697),o=r(32574),n=r(86194),r(79529).f,e.exports=a({displayName:"LongTableRowRC",propTypes:{row:i.object.isRequired,columns:i.array.isRequired,cellProvider:i.instanceOf(n).isRequired,onSelect:i.func,className:i.string,rowIndex:i.number,totalRowCount:i.number,enableKeyboardNavigation:i.bool,onKeyDownfunc:i.func,supportBulkActions:i.bool,isCheckboxSelected:i.bool,totalSelectedRows:i.number,maxRowsSelectable:i.number},shouldComponentUpdate:function(e,t){return e.className!==this.props.className||e.totalSelectedRows!==this.props.totalSelectedRows},_onCellClick:function(e,t,r){var i;return"function"==typeof(i=this.props).onSelect?i.onSelect(e,t,r):void 0},_onKeyDown:function(e,t,r,i){var s;if(this.props.enableKeyboardNavigation)return"function"==typeof(s=this.props).onKeyDownfunc?s.onKeyDownfunc(e,t,r,this.props.columns.length,i):void 0},_getColumnIndex:function(e){var t;return null!=(t=e.columnIndex)?t:e.getIndex()},render:function(){var e,t,r,i,n,a,u,d,c,h,p,g;if(u=[],this.props.supportBulkActions&&(a=this.props.totalSelectedRows>=this.props.maxRowsSelectable&&!this.props.isCheckboxSelected,e="function"==typeof(d=this.props.cellProvider).provideCheckBoxCell?d.provideCheckBoxCell(this.props.row.data,this.props.isCheckboxSelected,a):void 0,r="datacell",u.push(s.createElement("td",{key:"checkbox",className:r,role:"gridcell",onKeyDown:void 0},e))),null!=(null!=(p=this.props.row)?p.data:void 0))for(c=0,h=(g=this.props.columns).length;c<h;c++)n=g[c],e=this.props.cellProvider.provideDataCell(this,n,this.props.row.data),i=this._getColumnIndex(n),r="datacell ",null!=this.props.cellProvider.provideDataCellClasses&&(r+=this.props.cellProvider.provideDataCellClasses(n)),r+=" colRef"+(this.props.rowIndex.toString()+"_"+i.toString()),u.push(s.createElement("td",{key:i,className:r,onClick:l.bind(this._onCellClick,this,this.props.row.data,n),role:"gridcell",onKeyDown:l.bind(this._onKeyDown,this,this.props.rowIndex,i,this.props.totalRowCount)},e));else u.push(s.createElement("td",{key:"loadingCell",className:"loadingCell",colSpan:this.props.columns.length}));return t=o.buildClassName("datarow",this.props.className),s.createElement("tr",{className:t},u)}})},91054:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g;g=r(72555),d=r(67294),u=r(45697),c=r(64587).Z,n=r(8429).Z,p=r(32574),h=r(86194),l=r(46604),o=r(90424),a=r(23084),i=r(58890).Z,s=r(30393).Z,e.exports=g({displayName:"LongTableScrollableRC",propTypes:{ariaLabel:u.string,rowHeight:u.number.isRequired,displayStart:u.number.isRequired,displayEnd:u.number.isRequired,visibleStart:u.number.isRequired,visibleEnd:u.number.isRequired,columns:u.array.isRequired,cellProvider:u.instanceOf(h).isRequired,rows:u.array.isRequired,onSelect:u.func,totalRowCount:u.number.isRequired,showFullTableHeight:u.bool,loadingIndicator:u.element,isSortingEnabled:u.bool,onSortChange:u.func,selectedIndex:u.number,rowClassName:u.string,enableKeyboardNavigation:u.bool,onKeyDownfunc:u.func,setFocus:u.func,sortOrder:u.instanceOf(s),sortDirection:u.instanceOf(i),sortColumnIndex:u.number,supportBulkActions:u.bool,maxRowsSelectable:u.number,selectedRowIds:u.arrayOf(u.string)},getDefaultProps:function(){return{sortOrder:s.MRU,sortDirection:i.ASC,loadingIndicator:d.createElement(o,{type:a.ROW}),rowClassName:"",supportBulkActions:!1}},getInitialState:function(){return{selectedRowIndex:null}},componentDidMount:function(){if(void 0!==this.props.selectedIndex)return this.setState({selectedRowIndex:this.props.selectedIndex})},componentDidUpdate:function(e){var t;return void 0!==this.props.selectedIndex&&e.selectedIndex!==this.props.selectedIndex&&this.setState({selectedRowIndex:this.props.selectedIndex}),"function"==typeof(t=this.props).setFocus?t.setFocus():void 0},_onRowClick:function(e,t,r,i){var s;return this.setState({selectedRowIndex:e}),"function"==typeof(s=this.props).onSelect?s.onSelect(t,r,i,e):void 0},_getColumnIndex:function(e){var t;return null!=(t=e.columnIndex)?t:e.getIndex()},_getLabel:function(e){var t;return null!=(t=e.label)?t:e.getLabel()},_getSortOrder:function(e){if(e.sort)return e.sort.order},_getSortDirection:function(e){if(e.sort)return e.sort.direction},_onSortChange:function(e,t,r){var s;if(this.props.isSortingEnabled)return s=r,void 0===this.props.sortColumnIndex||null===this.props.sortColumnIndex?s=i.ASC:this.props.sortDirection===i.ASC?s=i.DESC:this.props.sortDirection===i.DESC&&(s=i.ASC),this.props.onSortChange(e,t,s)},_renderHeader:function(){var e,t,r,s,o,a,l,u,h,p,g,m,_,f,y,b;for(p=[],!0===this.props.supportBulkActions&&(l=0!==(null!=(_=this.props.rows)?_.length:void 0)&&(null!=(f=this.props.rows)?f.length:void 0)===(null!=(y=this.props.selectedRowIds)?y.length:void 0),o=d.createElement(c,{checked:l,onChange:this.handleSelectAll,assistiveText:{label:n.getLabel("AssetCheckBoxCell","selectAsset")},className:"assets"}),p.push(d.createElement("th",{tabIndex:0,key:"th-select",className:"headercell checkbox"},o))),g=0,m=(b=this.props.columns).length;g<m;g++)h=void 0!==(r=b[g]).sort,s=this._getColumnIndex(r),t="headercell ",this.props.isSortingEnabled&&h&&(t+="sortable ",a="",u=this.props.sortDirection===i.ASC?"":this.props.sortDirection===i.DESC?"":void 0,e=this.props.sortDirection===i.ASC?n.getLabel("LongTableScrollableRC","sortDescending"):this.props.sortDirection===i.DESC?n.getLabel("LongTableScrollableRC","sortAscending"):void 0),null!=this.props.cellProvider.provideDataCellClasses&&(t+=this.props.cellProvider.provideDataCellClasses(r)),o=s===this.props.sortColumnIndex?d.createElement("span",null,this._getLabel(r),d.createElement("span",{className:"icon",tabIndex:0},u)):d.createElement("span",null,this._getLabel(r),h&&d.createElement("span",{className:"hintIcon"},a)),h?p.push(d.createElement("th",{title:e,tabIndex:0,key:"th"+s,className:t,onKeyPress:this._onKeyPress.bind(this,s,this._getSortOrder(r),this._getSortDirection(r)),onClick:this._onSortChange.bind(this,s,this._getSortOrder(r),this._getSortDirection(r))},o)):p.push(d.createElement("th",{tabIndex:0,key:"th"+s,className:t},o));return d.createElement("thead",null,d.createElement("tr",{key:"headerrow"},p))},handleSelectAll:function(e,t){var r;return(r=t.checked)?this.props.cellProvider.onSelectAll(this.props.rows.map((function(e){return e.data})),r):this.props.cellProvider.onSelectAll([],r)},_onKeyPress:function(e,t,r){if("Enter"===window.event.code)return this._onSortChange(e,t,r)},_renderDataRow:function(e,t,r,i){var s,n,o,a;return n=this._onRowClick.bind(this,r),s=!1,this.props.selectedRowIds&&(s=null!=(o=this.props.selectedRowIds)?o.includes(null!=(a=e.data)&&"function"==typeof a.getId?a.getId():void 0):void 0),d.createElement(l,{row:e,className:i,columns:this.props.columns,cellProvider:this.props.cellProvider,onSelect:n,key:t,rowIndex:r,totalRowCount:this.props.totalRowCount,enableKeyboardNavigation:this.props.enableKeyboardNavigation,onKeyDownfunc:this.props.onKeyDownfunc,supportBulkActions:this.props.supportBulkActions,isCheckboxSelected:s,totalSelectedRows:this.props.selectedRowIds?.length,maxRowsSelectable:this.props.maxRowsSelectable})},render:function(){var e,t,r,i,s,n,o,a,l,u,c,h;for((n=[]).push(d.createElement("tr",{key:"top",style:{height:this.props.displayStart*this.props.rowHeight},"aria-hidden":!0},d.createElement("td",{key:"topBufferCell",colSpan:this.props.columns.length}))),s=this.props.totalRowCount<this.props.rows.length,r=Math.min(this.props.totalRowCount-1,Math.min(this.props.rows.length-1,this.props.displayEnd)),i=0,u=c=this.props.displayStart;c<=r?u<=r:u>=r;c<=r?u++:u--)a=i+this.props.displayStart,(o=this.props.rows[a])&&(l=[a,null!=(h=o.data)&&"function"==typeof h.getId?h.getId():void 0,o.ts].join("_"),t=this.state.selectedRowIndex===a?"selected":"",t=p.buildClassName(t,this.props.rowClassName),n.push(this._renderDataRow(o,l,a,t)),i++);return e=!0===s?0:(this.props.rows.length-r-1)*this.props.rowHeight,this.props.totalRowCount>r+1&&(n.push(d.createElement("tr",{key:"loading",className:"loadingRow",style:{height:this.props.rowHeight}},d.createElement("td",{key:"loadingCell",colSpan:this.props.columns.length},this.props.loadingIndicator))),e-=this.props.rowHeight),n.push(d.createElement("tr",{key:"bottom",style:{height:e},"aria-hidden":!0},d.createElement("td",{key:"bottomBufferCell",colSpan:this.props.columns.length}))),d.createElement("div",{className:"long-table-scrollable"},d.createElement("table",{"aria-label":this.props.ariaLabel,className:"longTable slds-table slds-table_bordered slds-table_cell-buffer slds-table_fixed-layout",role:"grid"},this._renderHeader(),d.createElement("tbody",null,n)))}})},86194:(e,t,r)=>{var i,s,n,o,a,l,u;o=r(67294),a=r(76126).Z,s=r(8429).Z,u=r(96469).Z,n=r(8644),i=r(8644).DATE_MED,e.exports=l=function(){function e(){}return e.prototype.provideHeaderCell=function(t,r,i){var s,n;return this._makeCellComp(r,r.isCustomHeaderAction()?this.getCustomHeaderCellContent(t,r,i):r.isSortable()?(s=(null!=(n=t.getSort())?n.column:void 0)===r?[o.createElement("div",{key:"sort",className:"sort fa "+n.direction.getValue().icon}),this._getHeaderCellLabelComp(r)]:this._getHeaderCellLabelComp(r),new e.CellContent(s,r.getTooltip())):new e.CellContent(this._getHeaderCellLabelComp(r),r.getTooltip()))},e.prototype._getHeaderCellLabelComp=function(e){return o.createElement("div",{key:"label",className:"label"},e.getLabel())},e.prototype.getCustomHeaderCellContent=function(t,r,i){return new e.CellContent(this._getHeaderCellLabelComp(r))},e.prototype.provideDataCell=function(e,t,r){return this._makeCellComp(t,this._getDataCellContent(t,r[t.getDataIndex()],r))},e.prototype.provideRowDividerContent=function(e,t,r){return this._makeRowDividerComp(this.getRowDividerContent(t),r)},e.prototype.getRowClassNames=function(e){},e.prototype._getDataCellContent=function(t,r,i){if(null==r)return e.CellContent.EMPTY;switch(t.getDataType()){case u.BOOLEAN:return new e.CellContent(o.createElement("div",{className:"fa fa-check"}),s.getLabel("Data",r?"true":"false"),r?"true":void 0);case u.PERCENT:return e.CellContent.makeString(Math.round(100*r)+"%");case u.CUSTOM:return this.getCustomDataCellContent(t,r,i);default:return e.CellContent.makeString(r.toString())}},e.prototype.getCustomDataCellContent=function(t,r){return e.CellContent.makeString(r.toString())},e.prototype._makeCellComp=function(e,t){var r;return r=t.addAdditionalClassNames("content "+e.getDataType().getClassName()),t.hasTooltip()?o.createElement(a,{align:"bottom",variant:"list-item",dialogClassName:"slds-truncate",theme:"info",content:o.createElement("div",{style:{whiteSpace:"normal"}},t.getTooltip()),triggerStyle:{display:"inline"}},o.createElement("div",{className:r},t.getComponent())):o.createElement("div",{className:r},t.getComponent())},e.prototype._makeRowDividerComp=function(e,t){return o.createElement("div",{key:"divider"+t,className:"row-divider"},e)},e.prototype.getAssetType=function(){return this._assetType},e.prototype.getDateWithOffset=function(e){return n.getDurationOffset(new Date(this._localizeDate(Date.now())),new Date(this._localizeDate(e,!0)),"minutes")>1440?this._localizeDate(e,!0,i):n.getDurationOffsetWithUnit(new Date(this._localizeDate(e,!0)),new Date(this._localizeDate(Date.now())),!0)},e.prototype._localizeDate=function(e,t,r){return null==r&&(r=n.DATETIME_SHORT),null==e||t&&0===e?null:n.formatDateInZone(new Date(e),r)},e}(),l.CellContent=function(){function e(e,t,r){this._component=e,this._tooltip=t,this._additionalClassNames=r}return e.makeString=function(e){return new l.CellContent(e,e)},e.prototype.getComponent=function(){return this._component},e.prototype.hasTooltip=function(){return null!=this._tooltip},e.prototype.getTooltip=function(){return this._tooltip},e.prototype.getAdditionalClassNames=function(){return this._additionalClassNames},e.prototype.addAdditionalClassNames=function(e){return null!=this._additionalClassNames?e+" "+this._additionalClassNames:e},e}(),l.CellContent.EMPTY=new l.CellContent("",null)},9526:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;o=r(96486),s=r(27223),i=r(78978),e.exports=n=function(){function e(){this._id=o.uniqueId()}return e.prototype.getId=function(){return this._id},e.prototype.getSourceType=function(){throw s.notImplemented()},e.prototype.ofSourceType=function(e){return this.getSourceType()===e},e.prototype.getPlaceholder=function(){return""},e.prototype.getDefaultSort=function(){},e.prototype.getColumns=function(){throw s.notImplemented()},e.prototype.getRows=function(e){throw s.notImplemented()},e.prototype.getValue=function(e){throw s.notImplemented()},e.prototype.getRowDividers=function(e){},e.prototype.resetOnUpdate=function(){return!0},e.prototype.sort=function(e,t,r){return o.sortBy(e,(function(e){return e[t.getDataIndex()]}))},e.prototype.match=function(e,t,r){return e[t.getDataIndex()].toString()===r},e.prototype.finalizeRows=function(e){return e},e.prototype.preMountHook=function(){},e.prototype.getFooter=function(){return null},e.prototype.getTotalCount=function(){throw s.notImplemented()},e.prototype.getSortedRows=function(e,t,r,i){throw s.notImplemented()},e.prototype.getSortOrderForResultSet=function(){throw s.notImplemented()},e.prototype.getSortDirectionForResultSet=function(){throw s.notImplemented()},e.prototype.withSortInfo=function(e,t){throw s.notImplemented()},e.prototype.setSelectedAssetsIds=function(e){throw s.notImplemented()},e.prototype.getSelectedAssetIds=function(){throw s.notImplemented()},e.prototype.canUseColumnContentForAssistiveText=function(e){return!1},e}(),n.SourceType=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.isAsync=function(){return this.getValue().isAsync},t.prototype.isLocallySearchable=function(){return this.getValue().isLocallySearchable},t}(i),n.SourceType.build(n.SourceType,{STATIC:{isAsync:!1,isLocallySearchable:!0},ASYNC_STATIC:{isAsync:!0,isLocallySearchable:!0},ASYNC_DYNAMIC:{isAsync:!0,isLocallySearchable:!1}})},99322:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;o=r(96486),i=r(13728).Z,s=r(78978),r(8429).Z,e.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getEnumByDateTimeGrain=function(e){var t;if(t=e.name,!o.has(this._enumsByGrainName,t))throw new Error("No tab for DateTimeGrain '"+t+"'.");return this._enumsByGrainName[t]},t.prototype.hasExtraTodayTick=function(){return this._value.hasExtraTodayTick},t.prototype.getDateTimeGrain=function(){return this._value.dateTimeGrain},t._registerMore=function(e){var t;if(null==this._enumsByGrainName&&(this._enumsByGrainName={}),t=e.getDateTimeGrain().name,o.has(this._enumsByGrainName,t))throw new Error("DateTimeGrain '"+t+"' used by multiple tabs.");return this._enumsByGrainName[t]=e},t}(s),n.build(n,{YEAR:{dateTimeGrain:i.YEAR,hasExtraTodayTick:!0},QUARTER:{dateTimeGrain:i.QUARTER,hasExtraTodayTick:!0},MONTH:{dateTimeGrain:i.MONTH,hasExtraTodayTick:!0},WEEK:{dateTimeGrain:i.WEEK,hasExtraTodayTick:!0},DAY:{dateTimeGrain:i.DAY,hasExtraTodayTick:!1}})},20048:(e,t,r)=>{var i,s,n,o,a,l;o=r(53227).Z,l=r(96486),a=r(72555),n=r(67294),s=r(45697),i=r(49720).KEY_CODE_BACKSPACE,e.exports=a({displayName:"ComboboxRC",propTypes:{inputValue:s.string,inputHasFocus:s.bool},getInitialState:function(){return{inputValue:null}},getDefaultProps:function(){return{events:{}}},componentDidMount:function(){var e,t;if(this.props.inputHasFocus)return null!=(e=this._combobox.instanceRef)&&null!=(t=e.inputRef)?t.focus():void 0},render:function(){var e,t;return(e=l.omit(this.props,["inputValue","inputHasFocus"])).events=l.extend({},e.events),e.events.onChange=this._onChange,e.events.onSelect&&(e.events.onSelect=this._onSelect),e.value=this.state.inputValue||this.props.inputValue||"",null==e.options&&(e.options=[]),e.options=this._filterEmptyHeaders(e.options.filter(this._filterOptionFromSearch)),e.ref=(t=this,function(e){return t._combobox=e}),n.createElement("div",{onKeyDown:this._onComboBoxKeyDown,role:"presentation"},n.createElement(o,e))},_filterOptionFromSearch:function(e){var t,r,i,s;return t=(this.state.inputValue||this.props.inputValue||"").trim(),r=null!=(s=e.label)?s.match(new RegExp(l.escapeRegExp(t),"ig")):void 0,i="separator"===e.type,l.isEmpty(t)||r||i},_filterEmptyHeaders:function(e){return(e=e.filter((function(t,r,i){return r===e.length-1||!("separator"===t.type&&"separator"===i[r+1].type)}))).length>0&&"separator"===e[e.length-1].type?e.slice(0,-1):e},_onSelect:function(e,t){var r;return r=t.selection,this._setInputValueState(""),this.props.events.onSelect(e,{selection:r})},_onChange:function(e,t){var r;if(r=t.value,this._setInputValueState(r),this.props.events.onChange)return this.props.events.onChange(e,{value:r})},_onComboBoxKeyDown:function(e){var t;if(e.keyCode===i&&("readonly"===this.props.variant||"inline-listbox"===this.props.variant&&(null!=(t=this.props.selection)?t.length:void 0)))return e.stopPropagation(),e.preventDefault()},_setInputValueState:function(e){return this.setState({inputValue:e},(t=this,function(){return t.forceUpdate()}));var t}})},16154:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.isNamed=function(){return this._value.named},t.prototype.hasNamedItems=function(){return this._value.hasNamedItems},t.prototype.isCustom=function(){return this===t.CUSTOM},t.prototype.hasSubsection=function(){var e;return null!=(e=this._value.hasSubsection)&&e},t}(i),s.build(s,{NAMED_SECTION:{named:!0,hasSubsection:!0},SECTION:{named:!1,hasNamedItems:!0},MULTI_VALUE:{named:!0,hasNamedItems:!0},SECTION_HEADER:{named:!1},INPUT_GROUP_HEADER:{named:!1},VIDEO_HEADER:{named:!1},TEXT:{named:!0},PASSWORD:{named:!0},FILE:{named:!0},SELECT:{named:!0},CHECKBOX:{named:!0},NUMBER:{named:!0},INCREMENTAL_NUMBER:{named:!0},COLOR:{named:!0},CUSTOM_COLOR:{named:!0},TOGGLE_BORDER:{named:!0},CHART_TYPE:{named:!0},TOGGLE_BUTTON:{named:!0},TOGGLE_TEXT:{named:!0},READONLY:{named:!0},RADIO:{named:!0},RADIO_WITH_POPOVER_BUTTON:{named:!0},TIME:{named:!0},DATETIME:{named:!0},IMAGE:{named:!0},TABLE:{named:!0},BUTTON:{named:!1},GENERIC:{name:!1},CUSTOM:{named:!0},EDIT_DELETE_PILL:{named:!1},RICH_TEXT:{named:!0}})},90394:(e,t,r)=>{var i,s,n;n=r(96486),s=r(23561).Z,i=r(8429).Z,e.exports=function(){function e(e){this._labelSection=e,this._options=new s(!0),this._defaultIds=[]}return e.prototype.add=function(e,t,r,s,n,o){return null==n&&(n=!1),this._options.put(String(e),{id:e,label:this._labelSection?i.getLabel(this._labelSection,t):t,value:r,icon:s,disabled:n,infoTooltip:o}),this},e.prototype.addAll=function(e){var t,r,i;for(r=0,i=e.length;r<i;r++)t=e[r],this.add(t,t);return this},e.prototype.getOptions=function(){return this._options.getValues()},e.prototype.getOption=function(e){return this._options.get(String(e))},e.prototype.setDefaultByIndex=function(e){if(e<0||e>=this._options.size())throw new Error("Index out of bounds.");return this._defaultIds=[this._options.getKeyAt(e)],this},e.prototype.setDefaultById=function(e){if(!this._hasOption(e))throw new Error("No option for id.");return this._defaultIds=[e],this},e.prototype.setDefaultsById=function(e){if(this._defaultIds=e,n.some(this._defaultIds,(t=this,function(e){return!t._hasOption(e)})))throw new Error("No option for id.");var t;return this},e.prototype.getDefaults=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this._defaultIds).length;t<r;t++)e=i[t],s.push(this.getOption(e));return s},e.prototype.getDefault=function(){if(1!==this._defaultIds.length)throw new Error(this._defaultIds.length+" defaults specified when one is expected.");return this.getOption(this._defaultIds[0])},e.prototype.hasDefault=function(){return!n.isEmpty(this._defaultIds)},e.prototype._hasOption=function(e){return this._options.containsKey(String(e))},e}()},32479:(e,t,r)=>{var i;i=r(90554).isSubset,e.exports=function(){function e(){this._options={},this._hiddenLabelCategoryIndices=new Set}return e.prototype.setValueTransform=function(e){return this._valueTransform=e,this},e.prototype.addOptionsToCategory=function(e,t){var r,i,s,n;for(null==(i=this._options)[e]&&(i[e]=[]),this._options[e].push(t),null==this._optionValues&&(this._optionValues={}),s=0,n=t.length;s<n;s++)r=t[s],this._optionValues[this.getOptionValue(r)]=!0;return this},e.prototype.getCategories=function(){return Object.keys(this._options)},e.prototype.getItemsByCategory=function(e){return this._options[e]},e.prototype.setValidOptions=function(e){var t,r,s;if(!i(e,this._getAllOptions()))throw new Error("Valid options not subset of items.");for(this._validOptions={},r=0,s=e.length;r<s;r++)t=e[r],this._validOptions[this.getOptionValue(t)]=!0;return this},e.prototype.isValidOption=function(e){return null==this._validOptions?!0===this._optionValues[this.getOptionValue(e)]:!0===this._validOptions[this.getOptionValue(e)]},e.prototype.setDefault=function(e){return this._defaultOption=e,this},e.prototype.hasDefault=function(){return null!=this._defaultOption},e.prototype.getDefault=function(e){return null==e&&(e=!1),e?this.getOptionValue(this._defaultOption):this._defaultOption},e.prototype.getOptionValue=function(e){return null!=this._valueTransform?this._valueTransform(e):e},e.prototype.hideCategoryLabel=function(e){return this._hiddenLabelCategoryIndices.add(e)},e.prototype.isCategoryLabelHidden=function(e){return this._hiddenLabelCategoryIndices.has(e)},e.prototype._getAllOptions=function(){var e,t,r,i,s,n,o;for(e in i=[],o=this._options)for(s=0,n=(r=o[e]).length;s<n;s++)t=r[s],i=i.concat(t);return i},e}()},18075:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(723),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.apiCode},t.prototype.getClassName=function(){return this._value.className},t}(i)},60626:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;s=r(723),n=r(74978).capitalizeFirst,e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.apiCode},t.prototype.getStyleName=function(e){return null!=e?this._value.styleName+n(e):this._value.styleName},t.getBorderStyles=function(e,r,i){var s,n,o,a,l;for(o={},a=0,l=e.length;a<l;a++)n=e[a],o[(s=t.getEnumByCode(n)).getStyleName("style")]="solid",o[s.getStyleName("color")]=r,o[s.getStyleName("width")]=i;return o},t}(s),i.build(i,{BORDER_LEFT:{apiCode:"left",styleName:"borderLeft"},BORDER_RIGHT:{apiCode:"right",styleName:"borderRight"},BORDER_TOP:{apiCode:"top",styleName:"borderTop"},BORDER_BOTTOM:{apiCode:"bottom",styleName:"borderBottom"},ALL_BORDERS:{apiCode:"all",styleName:"border"}})},31550:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty,u=function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};s=r(78978),a=r(53499).hexToRgb,o=r(32479),n=r(8429).Z,e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t.getColorOptions=function(e){var r,i,s;return null==e&&(e=!1),s=[],e&&s.push(t.NO_COLOR),s.push(t.WHITE,t.GRAY,t.GRAY2,t.GRAY3,t.GRAY4,t.GRAY5),r="Default",(i=new o).addOptionsToCategory(r,s).addOptionsToCategory(r,[t.RED_BRIGHT,t.ORANGE_BRIGHT,t.YELLOW_BRIGHT,t.GREEN_BRIGHT,t.TEAL_BRIGHT,t.BLUE_BRIGHT,t.PURPLE_BRIGHT]).addOptionsToCategory(r,[t.RED,t.ORANGE,t.YELLOW,t.GREEN,t.TEAL,t.BLUE,t.PURPLE]).addOptionsToCategory(r,[t.RED1,t.ORANGE1,t.YELLOW1,t.GREEN1,t.TEAL1,t.BLUE1,t.PURPLE1]).addOptionsToCategory(r,[t.RED2,t.ORANGE2,t.YELLOW2,t.GREEN2,t.TEAL2,t.BLUE2,t.PURPLE2]).addOptionsToCategory(n.getLabel("ColorPicker","customColor"),[null]),i.hideCategoryLabel(r),i},t.prototype.getHexCode=function(){return this._value.hexCode},t.prototype.getRgbCode=function(){return a(this.getHexCode())},t.prototype.getLevel=function(){return this._value.level},t}(s),i.Level=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return u(t,e),t}(s),i.Level.build(i.Level,["BRIGHT","DARK"]),i.build(i,{WHITE:{hexCode:"#FFFFFF",level:i.Level.BRIGHT},GRAY:{hexCode:"#E6ECF2",level:i.Level.BRIGHT},GRAY2:{hexCode:"#C6D3E1",level:i.Level.BRIGHT},GRAY3:{hexCode:"#7D98B3",level:i.Level.DARK},GRAY4:{hexCode:"#335779",level:i.Level.DARK},GRAY5:{hexCode:"#091A3E",level:i.Level.DARK},GRAY6:{hexCode:"#514F4D",level:i.Level.DARK},GRAY7:{hexCode:"#747474",level:i.Level.DARK},RED_BRIGHT:{hexCode:"#FF9897",level:i.Level.BRIGHT},ORANGE_BRIGHT:{hexCode:"#FFCD95",level:i.Level.BRIGHT},YELLOW_BRIGHT:{hexCode:"#FFFF93",level:i.Level.BRIGHT},GREEN_BRIGHT:{hexCode:"#95FFB0",level:i.Level.BRIGHT},TEAL_BRIGHT:{hexCode:"#95FFFF",level:i.Level.BRIGHT},BLUE_BRIGHT:{hexCode:"#98B1FF",level:i.Level.DARK},PURPLE_BRIGHT:{hexCode:"#CD96FF",level:i.Level.DARK},RED:{hexCode:"#E84340",level:i.Level.DARK},ORANGE:{hexCode:"#E8963B",level:i.Level.DARK},YELLOW:{hexCode:"#E6E830",level:i.Level.DARK},GREEN:{hexCode:"#3AE867",level:i.Level.DARK},TEAL:{hexCode:"#38E6E7",level:i.Level.DARK},BLUE:{hexCode:"#4269E9",level:i.Level.DARK},PURPLE:{hexCode:"#963CE9",level:i.Level.DARK},RED1:{hexCode:"#B50E03",level:i.Level.DARK},ORANGE1:{hexCode:"#B56200",level:i.Level.DARK},YELLOW1:{hexCode:"#B3B400",level:i.Level.DARK},GREEN1:{hexCode:"#00B531",level:i.Level.DARK},TEAL1:{hexCode:"#00B3B4",level:i.Level.DARK},BLUE1:{hexCode:"#0D34B6",level:i.Level.DARK},PURPLE1:{hexCode:"#6300B6",level:i.Level.DARK},RED2:{hexCode:"#670000",level:i.Level.DARK},ORANGE2:{hexCode:"#673300",level:i.Level.DARK},YELLOW2:{hexCode:"#666700",level:i.Level.DARK},GREEN2:{hexCode:"#006714",level:i.Level.DARK},TEAL2:{hexCode:"#006667",level:i.Level.DARK},BLUE2:{hexCode:"#001668",level:i.Level.DARK},PURPLE2:{hexCode:"#330068",level:i.Level.DARK},BLACK:{hexCode:"#091A3E",level:i.Level.DARK},BLACK1:{hexCode:"#F2F6FA",level:i.Level.BRIGHT},BLACK2:{hexCode:"#E6ECF2",level:i.Level.BRIGHT},BLACK3:{hexCode:"#C5D3E0",level:i.Level.BRIGHT},BLACK7:{hexCode:"#335779",level:i.Level.DARK},SEA:{hexCode:"#2EC2BA",level:i.Level.DARK},SEA1:{hexCode:"#EEF9F9",level:i.Level.BRIGHT},SKY:{hexCode:"#0070D2",level:i.Level.DARK},RAIN:{hexCode:"#9271E8",level:i.Level.DARK},BLUE3:{hexCode:"#16325C",level:i.Level.DARK},BLUE4:{hexCode:"#54698D",level:i.Level.DARK},BLUE5:{hexCode:"#17324D",level:i.Level.DARK},BLUE6:{hexCode:"#0D70A5",level:i.Level.DARK},SCIENCE_BLUE:{hexCode:"#0070D2",level:i.Level.DARK},NO_COLOR:{hexCode:void 0,level:i.Level.BRIGHT}})},74179:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(78978),e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(s),i.build(i,["Inline","Dropdown","DropdownRight"])},34809:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(18075),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,{LEFT:{apiCode:"left",className:"align-h-left"},CENTER:{apiCode:"center",className:"align-h-center"},RIGHT:{apiCode:"right",className:"align-h-right"}})},16730:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,["Float","Int"])},55637:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(18075),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,{TOP:{apiCode:"top",className:"align-v-top"},MIDDLE:{apiCode:"center",className:"align-v-middle"},BOTTOM:{apiCode:"bottom",className:"align-v-bottom"}})},71007:e=>{e.exports=function(){function e(e,t,r,i,s,n){var o,a,l,u;for(this._width=e,this._height=t,this._rowHeight=r,this._paddingX=s.x,this._paddingY=s.y,this._removeOuterSpacing=n,a=this._width,this._removeOuterSpacing&&(a+=2*this._paddingX),this._columns=this._calculateColumns(a,i),this._hasUniformColumns=!0,o=i[0],l=0,u=i.length;l<u;l++)if(i[l]!==o){this._hasUniformColumns=!1;break}}return e.prototype._calculateColumns=function(e,t){var r,i,s,n,o,a,l,u,d,c,h,p,g,m;for(u=0,c=0,g=t.length;c<g;c++)u+=s=t[c];if(l=(e-=this._paddingX)-(d=Math.floor(e/u))*u,r=function(){var e,r,i;for(i=[],e=0,r=t.length;e<r;e++)s=t[e],i.push(d*s);return i}(),l>0)for(a=h=0;0<=l?h<l:h>l;a=0<=l?++h:--h)r[a%t.length]++;for(o=0,i=[],p=0,m=r.length;p<m;p++)n=r[p],i.push({startX:o,width:n}),o+=n;return i},e.prototype.getNumColumns=function(){return this._columns.length},e.prototype.getColumnStartX=function(e){return e>=0?this._columns[e].startX:0},e.prototype.getColumnWidth=function(e){return e>=0?this._columns[e].width:0},e.prototype.getRowHeight=function(){return this._rowHeight},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.toGridDimensions=function(e,t,r){var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f;for(u=e.left,d=e.top,c=e.width,o=e.height,null==r&&(r=!1),i=0,p=0,m=(_=this._columns).length;p<m&&!((s=_[p]).startX+s.width>u);p++)i++;for(h=0,n=0,l=g=i=Math.min(this._columns.length-1,i),f=this._columns.length;(i<=f?g<f:g>f)&&(h++,!((n+=this._columns[l].width)>=c));l=i<=f?++g:--g);return r&&n>c&&h>1&&h--,this.hasUniformColumns()&&null!=t&&i+(h=t)>this.getNumColumns()&&(i=this.getNumColumns()-h),a=o/(this._rowHeight+this._paddingY),a=r?Math.max(1,Math.floor(a)):Math.ceil(a),{column:i,row:Math.max(0,Math.floor(d/(this._rowHeight+this._paddingY))),width:h,height:a}},e.prototype.toPixelDimensions=function(e){var t,r,i,s;return t=e.column,i=e.row,s=e.width,r=e.height,t=Math.min(this._columns.length-1,t),this._columns.length-t<s&&(t=this._columns.length-s),{top:this._calculatePixelTop(i),left:this._calculatePixelLeft(t),height:this._calculatePixelHeight(r),width:this._calculatePixelWidth(t,s)}},e.prototype.hasUniformColumns=function(){return this._hasUniformColumns},e.prototype._calculatePixelWidth=function(e,t){var r,i,s,n;return e<0&&(e=0),e>=this.getNumColumns()&&(e=this.getNumColumns()-1),t<1&&(t=1),(s=e+t-1)>=this.getNumColumns()&&(s=this.getNumColumns()-1),i=function(){n=[];for(var t=e;e<=s?t<=s:t>=s;e<=s?t++:t--)n.push(t);return n}.apply(this),function(){var e,t,s;for(s=[],e=0,t=i.length;e<t;e++)r=i[e],s.push(this.getColumnWidth(r));return s}.call(this).reduce((function(e,t){return e+t}),0)-this._paddingX},e.prototype._calculatePixelHeight=function(e){return e<1&&(e=1),e*(this._rowHeight+this._paddingY)-this._paddingY},e.prototype._calculatePixelTop=function(e){var t;return e<0&&(e=0),t=this._removeOuterSpacing?0:this._paddingY,e*(this._rowHeight+this._paddingY)+t},e.prototype._calculatePixelLeft=function(e){var t;return e<0&&(e=0),e>=this.getNumColumns()&&(e=this.getNumColumns()-1),t=this._removeOuterSpacing?0:this._paddingX,this.getColumnStartX(e)+t},e.prototype.getMinPixelSize=function(e){var t,r,i;return r=e.getMinWidth(),t=e.getMinHeight(),i=e.getColumn(),(r<1||!isFinite(r))&&(r=1),(t<1||!isFinite(t))&&(t=1),{width:this._calculatePixelWidth(i,r),height:this._calculatePixelHeight(t)}},e.prototype.getMaxPixelSize=function(e){var t,r,i;return r=e.getMaxWidth(),t=e.getMaxHeight(),i=e.getColumn(),(r<1||isNaN(r))&&(r=1/0),(t<1||isNaN(t))&&(t=1/0),{width:this._calculatePixelWidth(i,r),height:this._calculatePixelHeight(t)}},e}()},56399:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.isMove=function(){return this._value.isMove},t.prototype.isKeyboardAction=function(){return this._value.isKeyboardMove},t}(i),s.build(s,{DRAG_MOVE:{isMove:!0,isKeyboardMove:!1},KEYBOARD_MOVE:{isMove:!0,isKeyboardMove:!0},RESIZE:{isMove:!1,isKeyboardMove:!1},KEYBOARD_RESIZE:{isMove:!1,isKeyboardMove:!0},ADD:{isMove:!1,isKeyboardMove:!1}})},21943:e=>{e.exports=function(){function e(e,t){this._message=e,this._iconName=t}return e.prototype.getMessage=function(){return this._message},e.prototype.getIconName=function(){return this._iconName},e}()},87518:e=>{e.exports=function(){function e(e){this._shiftKey=e.shiftKey}return e.prototype.isShiftKeyPressed=function(){return this._shiftKey},e.prototype.equals=function(e){return(null!=e?e.isShiftKeyPressed():void 0)===this.isShiftKeyPressed()},e}()},22158:(e,t,r)=>{var i,s,n;n=r(96486),e.exports=function(){function e(e,t){this._validOperation=null==e||e,this._renderProxy=null!=t&&t,this._proxyPositions={},this._positionOverrides={},this._containerChanges={},this._gridContainerChange=void 0,this._feedback=void 0}return e.prototype.setProxyPosition=function(e,t,r){return this._proxyPositions[r]=new s(e,t),this},e.prototype.clearProxyPosition=function(){return this._proxyPositions={},this},e.prototype.clearPositionOverrides=function(){return this._positionOverrides={}},e.prototype.setWidgetPosition=function(e,t,r){return this._positionOverrides[e.getUID()]=new s(t,r),this},e.prototype.unsetWidgetPosition=function(e){return delete this._positionOverrides[e.getUID()],this},e.prototype.clearContainerChanges=function(){return this._containerChanges={},this._gridContainerChange=void 0},e.prototype.setWidgetContainer=function(e,t){var r,i,s;if((i=null!=(s=e.getContainer())?s.getUID():void 0)!==(r=null!=t?t.getUID():void 0))return this._createContainerChange(i)._removeWidget(e),this._createContainerChange(r)._addWidget(e)},e.prototype._createContainerChange=function(e){return null!=e?(null==this._containerChanges[e]&&(this._containerChanges[e]=new i),this._containerChanges[e]):(null==this._gridContainerChange&&(this._gridContainerChange=new i),this._gridContainerChange)},e.prototype.invalidate=function(){return this._validOperation=!1,this},e.prototype.isValidOperation=function(){return this._validOperation},e.prototype.getProxyPositions=function(){return this._proxyPositions},e.prototype.getPositionOverrides=function(){return this._positionOverrides},e.prototype.getContainerChange=function(e){return null!=e?this._containerChanges[e]:this._gridContainerChange},e.prototype.shouldRenderProxy=function(){return this._renderProxy},e.prototype.getFeedback=function(){return this._feedback},e.prototype.setFeedback=function(e){return this._feedback=e},e}(),s=function(){function e(e,t){this._position=e,this._gridBasis=t}return e.prototype.getPixelDimensions=function(e){return this._gridBasis?e.toPixelDimensions(this._position):this._position},e.prototype.getGridDimensions=function(e){return this._gridBasis?this._position:e.toGridDimensions(this._position)},e}(),i=function(){function e(){this._removedWidgets=[],this._addedWidgets=[]}return e.prototype.getWidgetChanges=function(e){return(e=n.difference(e,this._removedWidgets)).push.apply(e,this._addedWidgets),e},e.prototype._addWidget=function(e){return this._addedWidgets.push(e)},e.prototype._removeWidget=function(e){return this._removedWidgets.push(e)},e}()},86897:(e,t,r)=>{var i,s,n,o,a;a=r(96486),i=r(22158),o=r(50765),s=r(22393),n=r(11422).Z,e.exports=function(){function e(){}return e.prototype.onStartMoveWidgets=function(e,t){var r,s,n,o;for(r=new i(!0,!0),n=0,o=t.length;n<o;n++)s=t[n],r.setProxyPosition(s.getPosition(),!0,s.getUID());return r},e.prototype.onMoveWidgets=function(e,t,r,s,n){var o,l,u,d,c,h,p,g,m,_;for(_ in l=s.deltaX,u=s.deltaY,d=s.deltasGridBased,m={},o=this._getSafeDelta(r,{deltaX:l,deltaY:u,deltasGridBased:d},n),r)g=r[_],(p=d||null==n?a.clone(g.getStartGridDimensions()):n.toGridDimensions(g.getStartPixelDimensions(),g.getStartGridDimensions().width)).row+=o.x,p.column+=o.y,m[_]=p;for(_ in h=new i(this._checkForOverlap(e,t,m),!0),m)c=m[_],h.setProxyPosition(c,!0,_);return h},e.prototype.didMoveWidgets=function(){},e.prototype.onStartResizeWidget=function(e,t){return new i(!0,!0).setProxyPosition(t.getPosition(),!0,t.getUID())},e.prototype.onResizeWidget=function(e,t,r,s,n,o){var l,u,d,c,h,p,g,m,_;return u=n.deltaX,d=n.deltaY,c=n.deltasGridBased,l=s.getDelta(u,d),c||null==o?h={row:(m=r.getStartGridDimensions()).row+l.y,column:m.column+l.x,width:m.width+l.w,height:m.height+l.h}:(_=r.getStartPixelDimensions(),h=o.toGridDimensions({top:Math.max(0,_.top+l.y),left:Math.max(0,_.left+l.x),width:a.isNumber(_.width)?_.width+l.w:_.width,height:a.isNumber(_.height)?_.height+l.h:_.height})),(g=this._getSafeWidgetDimensions(t,h,s)).row<0&&(g.height+=g.row,g.row=0),(p={})[t.getUID()]=g,new i(this._checkForOverlap(e,[t],p,!0),!0).setProxyPosition(g,!0,t.getUID())},e.prototype.didResizeWidget=function(){},e.prototype.didDropWidgetInvalid=function(){},e.prototype.onMouseEnterWidget=function(e,t){},e.prototype.onMouseLeaveWidget=function(e,t){},e.prototype.onModifier=function(e){},e.prototype._checkForOverlap=function(e,t,r){var i,n,o,l,u,d;for(n=[],u=0,d=t.length;u<d;u++)l=t[u],(o=e.indexOf(l))>-1&&n.push(e.splice(o,1));return i=a.every(t,(function(t){return s.specifiedDoesntOverlap(e,new s.PlaceholderItem(r[t.getUID()]))}),this),e.concat(n),i},e.prototype._getSafeWidgetDimensions=function(e,t,r){var i,s,a,l,u;for(t.width=new n(e.getMinWidth(),e.getMaxWidth()).toValueInBounds(t.width),t.height=new n(e.getMinHeight(),e.getMaxHeight()).toValueInBounds(t.height),a=0,l=(u=r.getValue()).length;a<l;a++)switch(u[a]){case o.Direction.TOP:i=e.getRow()+e.getHeight(),t.row+t.height>i&&(t.row=i-t.height);break;case o.Direction.RIGHT:t.column<e.getColumn()&&(t.column=e.getColumn());break;case o.Direction.BOTTOM:t.row<e.getRow()&&(t.row=e.getRow());break;case o.Direction.LEFT:s=e.getColumn()+e.getWidth(),t.column+t.width>s&&(t.column=s-t.width)}return t},e.prototype._getSafeDelta=function(e,t,r){var i,s,n,o,l,u,d,c,h,p,g,m,_;if(s=t.deltaX,n=t.deltaY,t.deltasGridBased||null==r){for(_ in e)p=e[_].getStartGridDimensions(),(null==m||p.row<m)&&(m=p.row),(null==o||p.column<o)&&(o=p.column),(null==h||p.column+p.width>h)&&(h=p.column+p.width);d=Math.max(0,m+n),l=Math.min(a.first(a.values(e)).getLayout().getNumColumns()-(h-o),Math.max(0,o+s))}else{for(_ in e)g=e[_].getStartPixelDimensions(),(null==m||g.top<m)&&(m=g.top),(null==o||g.left<o)&&(o=g.left),(null==h||g.left+g.width>h)&&(h=g.left+g.width),(null==i||g.top+g.height>i)&&(i=g.top+g.height);c=r.toGridDimensions({left:o,top:m,width:h-o,height:i-m}),u=r.toGridDimensions({left:o+s,top:m+n,width:h-o,height:i-m},c.width),m=c.row,o=c.column,d=u.row,l=u.column}return{x:d-m,y:l-o}},e}()},53177:(e,t,r)=>{var i,s,n=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};s=r(96486),i=r(65408),e.exports=function(){function e(e,t,r,i){var s,o,a,l,u,d,c,h,p,g,m,_;for(this._triggeringWidgets=e,this._changedWidgets=[],this._newPositions={},o={},u=0,h=r.length;u<h;u++)if(l=r[u],n.call(this._triggeringWidgets,l)>=0&&(o[l.getUID()]=!0),this._processWidget(l,t,i),l.isContainer())for(d=0,p=(m=l.getContainedWidgets()).length;d<p;d++)s=m[d],n.call(this._triggeringWidgets,s)>=0&&(o[s.getUID()]=!0),this._processWidget(s,t,i);for(c=0,g=(_=this._triggeringWidgets).length;c<g;c++)null==o[(a=_[c]).getUID()]&&(this._changedWidgets.push(a),this._newPositions[a.getUID()]=t[a.getUID()].getGridDimensions(i))}return e.prototype.hasChanges=function(){return!s.isEmpty(this._changedWidgets)},e.prototype.getWidgets=function(){return this._changedWidgets},e.prototype.getNewPosition=function(e){return this._newPositions[e.getUID()]},e.prototype.getTriggeringWidgets=function(){return this._triggeringWidgets},e.prototype.getResultingBoundingBox=function(e){var t;return null!=(t=this.getNewPosition(e))?(new i).setTopLeft(t.row,t.column).setWidth(t.width).setHeight(t.height):e.getBoundingBox()},e.prototype._processWidget=function(e,t,r){var i;if((i=t[e.getUID()])&&!s.isEqual(i.getGridDimensions(r),e.getPosition()))return this._changedWidgets.push(e),this._newPositions[e.getUID()]=i.getGridDimensions(r)},e}()},20319:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L,M,N,O,P,x,Z,F,k;i=r(70351),k=r(96486),x=r(72555),N=r(67294),M=r(45697),L=r(32350),A=r(85600),w=r(8902),n=r(31550),s=r(22949),Z=r(53499).getComplementaryColor,P=r(32574),o=r(69499),D=r(22393),F=r(30077).isOrIn,a=r(71007),f=r(53177),E=r(2541),S=r(83733).Z,d=r(59495).Z,c=r(56399),_=r(86897),g=r(87518),m=r(22158),y=r(52222).Z,I=r(47101),T=r(96887),b=r(2391),p=r(53811),C=r(84347),u=r(59407).Z,l=r(34409),h=r(76446).Z,r(59614),v=r(96952),R=r(79091),O=r(50765),e.exports=x({displayName:"GridLayoutRC",mixins:[A],propTypes:{header:M.shape({render:M.func}),columns:M.arrayOf(M.number).isRequired,rows:M.instanceOf(b).isRequired,minColumnWidth:M.number,minRowHeight:M.number,widgets:M.arrayOf(M.instanceOf(E)).isRequired,delegate:M.instanceOf(d).isRequired,mover:M.instanceOf(_),widgetSelector:M.instanceOf(T),selectedWidgetUIDs:M.arrayOf(M.string),onUpdateSelectedWidgets:M.func,onUpdateViewport:M.func,isViewportRendering:M.bool,previewMode:M.bool.isRequired,cellSpacing:M.shape({x:M.number,y:M.number}),style:M.shape({backgroundColor:M.string,backgroundImage:M.string,backgroundPositionX:M.string,backgroundPositionY:M.string,backgroundRepeat:M.string,backgroundSize:M.string}),maxWidth:M.number,useBodyTracking:M.bool,getScrollTrackingElement$:M.func,testCanvasWidth:M.number,testCanvasHeight:M.number,enableKeyboardEvents:M.bool,focusable:M.bool,tabbable:M.bool,widgetSortFunction:M.func,hotkeyManagerType:M.func,actionLabelProvider:M.instanceOf(l),widgetGridDirection:M.oneOf(["ltr","rtl"]),removeOuterSpacing:M.bool,onComputeLayout:M.func},getDefaultProps:function(){return{useBodyTracking:!1,mover:new _,widgetSelector:new I,widgetSortFunction:D.sortLayout,cellSpacing:{x:0,y:0},style:{backgroundColor:n.BLACK1.getHexCode()},focusable:!0,tabbable:!1,minRowHeight:1,hotkeyManagerType:u,actionLabelProvider:new h}},childContextTypes:{delegate:M.instanceOf(d),widgetSelector:M.instanceOf(T),hasProxy:M.bool,previewMode:M.bool,isViewportRendering:M.bool,onMouseDown:M.func,onClick:M.func,onDoubleClick:M.func,onDragStart:M.func,onStartResize:M.func,onKeyDownWidget:M.func,getWidgetPositionOverride:M.func,getWidgetLocationStyle:M.func,getContainerChange:M.func,isMouseMoveInProgress:M.bool,isKeyboardMoveInProgress:M.bool,selectWidget:M.func,hotkeyManager:M.instanceOf(p),hasSingleWidgetSelected:M.func,isWidgetSelected:M.func,onUpdateViewport:M.func},getChildContext:function(){return{delegate:this.props.delegate,widgetSelector:this.props.widgetSelector,hasProxy:null!=this.state.proxyMap,previewMode:this.props.previewMode,isViewportRendering:this.props.isViewportRendering,onDragStart:this._onDragStartWidgets,onMouseDown:this._onMouseDownWidget,onClick:this._onClickWidget,onDoubleClick:this._onDoubleClickWidget,onStartResize:this._onStartResizeWidget,getWidgetPositionOverride:this._getWidgetPositionOverride,getWidgetLocationStyle:this._getWidgetLocationStyle,getContainerChange:this._getContainerChange,isMouseMoveInProgress:this.state.isMouseMoveInProgress,isKeyboardMoveInProgress:this.state.isKeyboardMoveInProgress,selectWidget:this._selectSingleWidgetAndHandle,hotkeyManager:this._hotkeyManager,hasSingleWidgetSelected:this._hasSingleWidgetSelected,isWidgetSelected:this._isWidgetSelected,onUpdateViewport:this._onUpdateViewport}},getInitialState:function(){return this._selectedHandle=void 0,{layout:void 0,moveResults:new m(!0,!0),selectedWidgetUIDs:[],hoveredWidgetUID:void 0,moveFeedbackCoordinates:void 0,proxyMap:void 0,isKeyboardMoveInProgress:!1,isMouseMoveInProgress:!1,assertiveText:"",politeText:"",focusedWidgetId:void 0}},UNSAFE_componentWillMount:function(){var e;return this._patternId=k.uniqueId("pattern"),this._buildWidgetMap(this.props.widgets),this._isNewWidgetBeingDragged=!1,(e={})[p.Actions.START_MOVE.getName()]=this._onKeyboardMoveStart,e[p.Actions.MOVE.getName()]=this._onKeyboardMove,e[p.Actions.END_MOVE.getName()]=this._onKeyboardMoveEnd,e[p.Actions.SELECT_ALL.getName()]=this._selectAllWidgets,e[p.Actions.DELETE.getName()]=this._deleteSelectedWidgets,e[p.Actions.DUPLICATE.getName()]=this._duplicateSelectedWidgets,e[p.Actions.COPY.getName()]=this._copySelectedWidgets,e[p.Actions.MODIFIER_DOWN.getName()]=this._onMoveModifier,e[p.Actions.BLOCKED_TAB.getName()]=this._onTabBlock,this._hotkeyManager=new this.props.hotkeyManagerType,this._hotkeyManager.initialize(this._getInfoForAction,e),this._tabBlockHotkeyManager=new C,this._tabBlockHotkeyManager.initialize(this._getInfoForAction,e)},_buildWidgetMap:function(e){var t,r,i,s,n;for(this._widgetMap={},n=[],i=0,s=e.length;i<s;i++)r=e[i],this._widgetMap[r.getUID()]=r,r.isContainer()?n.push(function(){var e,i,s,n;for(n=[],e=0,i=(s=r.getContainedWidgets()).length;e<i;e++)t=s[e],n.push(this._widgetMap[t.getUID()]=t);return n}.call(this)):n.push(void 0);return n},componentDidMount:function(){var e;return this._isMounted=!0,this._viewportWidgetIds=new Set,this._computeGridLayout(this.props),this._resizeObserver=new y([this._widgetGridEl,this._getScrollTrackingElement$()[0]],(e=this,function(){return e._computeGridLayout(e.props)})),this._resizeObserver.observe()},UNSAFE_componentWillReceiveProps:function(e){if(!this._isNewWidgetBeingDragged)return this._buildWidgetMap(e.widgets)},componentDidUpdate:function(e){if(this._isNewWidgetBeingDragged||this._buildWidgetMap(this.props.widgets),o.isVisible(this._widgetGridEl)&&(e.previewMode!==this.props.previewMode||e.removeOuterSpacing!==this.props.removeOuterSpacing||e.minColumnWidth!==this.props.minColumnWidth||e.testCanvasWidth!==this.props.testCanvasWidth||e.testCanvasHeight!==this.props.testCanvasHeight||!e.rows.isEqual(this.props.rows)||!k.isEqual(e.cellSpacing,this.props.cellSpacing)||!k.isEqual(e.columns,this.props.columns)||!this._areWidgetsSame(e.widgets,this.props.widgets)))return this._computeGridLayout(this.props)},componentWillUnmount:function(){return this._assistiveTextCallback&&clearTimeout(this._assistiveTextCallback),this._resizeObserver.unobserve(),this._isMounted=!1},render:function(){var e,t,r,i,n,o,a,l,u,d,c,h,p,g,m;return null!=this.props.header&&(i=N.createElement("div",{ref:"header",className:"grid-layout-header"},this.props.header.render())),null!=this.props.widgets&&null!=this.state.layout&&(m=this._renderWidgets(this.props.widgets)),null!=this.state.proxyMap&&this.state.moveResults.shouldRenderProxy()&&(g=this._renderProxy()),r=this._renderGrid(),e=P.classSet({"grid-layout-container":!0,dragging:null!=this.state.proxyMap,"keyboard-active":this.state.isKeyboardMoveInProgress}),t={maxWidth:this.props.maxWidth,minWidth:this._containerMinWidth,height:this._containerHeight},this.props.previewMode||(h=this._onMouseUp,this._onMouseUp,d=this._onMouseDown,c=this._onMouseLeave,n=this._onDragEnter,o=this._onDragLeave,a=this._onDragOver,p=this._onScroll,this.props.enableKeyboardEvents&&(this.state.isMouseMoveInProgress?(l=this._tabBlockHotkeyManager.getKeyDownHandler(),u=this._tabBlockHotkeyManager.getKeyUpHandler()):(l=this._hotkeyManager.getKeyDownHandler(),u=this._hotkeyManager.getKeyUpHandler()))),N.createElement("div",{className:e,style:t},N.createElement("div",{ref:"grid",className:"grid-layout",style:{...this.props.style,...this.props.themedStyle},onMouseUp:h,onMouseDown:d,onDrop:h,onMouseLeave:c,onDragEnter:n,onDragLeave:o,onDragOver:a,onScroll:p,onKeyDown:l,onKeyUp:u,tabIndex:!1===this.props.focusable?void 0:this.props.tabbable?0:-1},i,N.createElement("div",{ref:this._setWidgetGridRef,className:"widget-grid",dir:this.props.widgetGridDirection},r,N.createElement("div",{ref:"widgets",className:"widgets"},m,g))),this._renderMoveFeedback(),N.createElement(s,{politeText:this.state.politeText,assertiveText:this.state.assertiveText}))},_renderWidgets:function(e){var t,r,i,s,n,o,a,l,u,d,c;for(null!=(t=null!=(d=this.state.moveResults)?d.getContainerChange():void 0)&&(e=t.getWidgetChanges(e)),c=[],s=l=0,u=(a=this.props.widgetSortFunction(e)).length;l<u;s=++l)i=(r=a[s]).getUID(),n=this._isWidgetSelected(i),o=!this.props.previewMode&&this.props.delegate.canResizeWidget(r)&&null==this.state.proxyMap&&n,c.push(N.createElement(S,{ref:k.partial(this._setWidgetRef,i),key:i,widget:r,delegate:this.props.delegate,layout:this.state.layout,previewMode:this.props.previewMode,isViewportRendering:this.props.isViewportRendering,isSelected:n,isHovered:this.state.hoveredWidgetUID==i,isKeyboardMoveInProgress:this.state.isKeyboardMoveInProgress,showProxy:o,showResizeComp:this._hasSingleWidgetSelected(),disallowButtonInteraction:this._hotkeyManager.disallowButtonInteraction(),locationStyle:this._getWidgetLocationStyle(r,this.state.layout),onClick:this._onClickWidget,onDoubleClick:this._onDoubleClickWidget,onMouseDown:this._onMouseDownWidget,onMouseOver:this._onMouseOverWidget,onMouseOut:this._onMouseOutWidget,onMouseEnter:this._onMouseEnterWidget,onMouseLeave:this._onMouseLeaveWidget,onDragEnter:this._onDragEnterWidget,onDragLeave:this._onDragLeaveWidget,onDragStart:this._onDragStartWidgets,onStartResize:this._onStartResizeWidget,onUpdateViewport:this._onUpdateViewport,selectWidgetHandle:this._selectSingleWidgetAndHandle}));return c},_onUpdateViewport:function(e,t){var r;return t?this._viewportWidgetIds.add(e):this._viewportWidgetIds.delete(e),"function"==typeof(r=this.props).onUpdateViewport?r.onUpdateViewport(Array.from(this._viewportWidgetIds)):void 0},_renderProxy:function(){var e,t,r,i,s,n;for(i in n=[],s=this.state.moveResults.getProxyPositions())r=s[i].getPixelDimensions(this.state.layout),t=P.classSet({invalid:!this.state.moveResults.isValidOperation()}),this.state.proxyMap[i].dragType===c.RESIZE&&this._hasSingleWidgetSelected()&&(e=this._onStartResizeWidget.bind(this,i)),n.push(N.createElement(R,{ref:"resize",key:i,onStartResize:e,style:r,additionalClassName:t,showProxy:!0,disallowButtonInteraction:this._hotkeyManager.disallowButtonInteraction()}));return n},_renderGrid:function(){var e,t,r,i,s,n,o;if(0!==this.props.cellSpacing.x||0!==this.props.cellSpacing.y)return t=this.props.previewMode||null==this._gridHeight?void 0:(r=this.state.layout.getWidth()-this.props.cellSpacing.x,o=0,n=function(){var t,r,i;for(i=[],e=t=0,r=this.state.layout.getNumColumns();0<=r?t<r:t>r;e=0<=r?++t:--t)s=N.createElement("rect",{x:o+this.props.cellSpacing.x,y:this.props.cellSpacing.y,width:this.state.layout.getColumnWidth(e)-this.props.cellSpacing.x,height:this._rowHeight,fill:this._getGridCellFillColor(),key:"rect"+e}),o+=this.state.layout.getColumnWidth(e),i.push(s);return i}.call(this),i=(this._rowHeight+this.props.cellSpacing.y)/this._gridHeight,N.createElement("svg",{width:r,height:this._gridHeight,xmlns:"http://www.w3.org/2000/svg",version:"1.1"},N.createElement("defs",null,N.createElement("pattern",{id:this._patternId,x:"0",y:"0",width:"1",height:i},n)),N.createElement("rect",{fill:"url(#"+this._patternId+")",x:"0",y:"0",width:r,height:this._gridHeight}))),N.createElement("div",{className:"grid"},t)},_renderMoveFeedback:function(){var e,t;if(null!=this.state.moveFeedbackCoordinates&&null!=(null!=(t=this.state.moveResults)?t.getFeedback():void 0))return e={top:this.state.moveFeedbackCoordinates.y+50+"px",left:this.state.moveFeedbackCoordinates.x+25+"px"},N.createElement("div",{className:"move-feedback",style:e},this._renderFeedbackIcon(this.state.moveResults.getFeedback().getIconName()),this.state.moveResults.getFeedback().getMessage())},_renderFeedbackIcon:function(e){if(null!=e)return N.createElement(w,{iconName:e,additionalClassName:e})},_calculateGridDimensions:function(e){var t,r,i,s,n,a,l,u,d,c,h,p,g,m,_;for(u=this._getScrollTrackingElement$(),c=Math.max(0,this._headerHeight-u.scrollTop()),d=(null!=(m=e.testCanvasHeight)?m:o.getClientHeight(u[0]))-c,this._rowHeight=e.rows.getType()===b.Type.PIXELS?e.rows.getValue():(a=e.rows.getValue(),l=(d-e.cellSpacing.y*a)/a,e.rows.allowSubpixelHeight()||(l=Math.floor(l)),Math.max(l,e.minRowHeight)),i=e.previewMode?0:4*(this._rowHeight+e.cellSpacing.y),n=0,p=0,g=(_=e.widgets).length;p<g;p++)(t=(r=_[p]).getRow()+r.getHeight())>n&&(n=t);return h=n*(this._rowHeight+e.cellSpacing.y)+i,s=u.scrollTop()+d-this._headerHeight+i,this._gridHeight=Math.max(d,h,s),this._gridWidth=this._calculateGridWidth(e),this._viewportTop=u.offset().top+this._headerHeight,this._containerHeight=null!=e.getScrollTrackingElement$?e.removeOuterSpacing?this._gridHeight-e.cellSpacing.y:e.previewMode?Math.max(h+2*e.cellSpacing.y,d):this._gridHeight+e.cellSpacing.y:void 0,this._containerMinWidth=null!=e.minColumnWidth?k.reduce(e.columns,(function(t,r){return t+r*e.minColumnWidth+e.cellSpacing.x}),e.cellSpacing.x):void 0,{viewportHeight:d,rowHeight:this._rowHeight}},_calculateGridWidth:function(e){var t;return null==e&&(e=this.props),null!=(t=e.testCanvasWidth)?t:this._widgetGridEl.clientWidth},_calculateGridLayout:function(e){var t;null==e&&(e=this.props),t=new a(this._gridWidth,this._gridHeight,this._rowHeight,e.columns,e.cellSpacing,this.props.removeOuterSpacing),this._buildWidgetPixelDimMap(t,e.widgets),this.setState({layout:t})},_getGridCellFillColor:function(){return null!=this.props.style.backgroundImage?"rgba(255, 255, 255, 0.25)":Z(this.props.style.backgroundColor)},_toCanvasPixel:function(e,t){return t?e-this._viewportTop+this._getScrollTrackingElement$().scrollTop():e-this.getRef$("grid").offset().left},_initializeProxies:function(e,t,r){var i,s,n,o,a;for(i={},o=0,a=e.length;o<a;o++)n=e[o],s=new v(n,t,r.clientX,this._toCanvasPixel(r.clientY,!0),this.state.layout),i[n.getUID()]=s;return this.setState({proxyMap:i}),i},_computeGridLayout:function(e){var t,r,i,s,n,o;if(this._headerHeight=(null!=(n=this.getRef$("header"))?n.height():void 0)||0,r=(o=this._calculateGridDimensions(e)).viewportHeight,t=o.rowHeight,this._calculateGridLayout(e),"function"==typeof(i=this.props).onComputeLayout&&i.onComputeLayout({numVisibleRows:Math.ceil(r/t)}),k.isEmpty(this.props.widgets))return"function"==typeof(s=this.props).onUpdateViewport?s.onUpdateViewport([]):void 0},_getScrollTrackingElement$:function(){var e,t;return null!=(t="function"==typeof(e=this.props).getScrollTrackingElement$?e.getScrollTrackingElement$():void 0)?t:this.getRef$("grid")},_getMouseTrackingElement:function(){return this.props.useBodyTracking?i("body"):this.getRef$("grid")},_cleanMouseTracking:function(){var e,t;if(this.off$(this,"mousemove"),t=this._getMouseTrackingElement(),this.off$(t,"mousemove"),this.off$(t,"mouseup"),delete this._lastMousePositionY,this._dragPageX=void 0,this._dragPageY=void 0,null!=this.state.proxyMap)return e=this.state.proxyMap,this.setState({proxyMap:void 0}),e},_canInteract:function(e){return!this.props.previewMode&&0===e.button},_onStartResizeWidget:function(e,t,r){var i,s;this._canInteract(r)&&(s=this._widgetMap[e],this.props.delegate.canResizeWidget(s)&&(this.preventPropagation(r),this._initializeProxies([s],c.RESIZE,r),this._updateMoveResultsOnMove(this.props.mover.onStartResizeWidget(this.props.widgets,s),r),this.setState({isMouseMoveInProgress:!0}),i=this._getMouseTrackingElement(),this.onThis$(this,"mousemove",this._onResizeWidget,t),this.onThis$(i,"mouseup",this._onBodyMouseUp)))},_onMouseOverWidget:function(e,t){if(!this.props.previewMode&&!t.isDefaultPrevented())return this.setState({hoveredWidgetUID:e}),t.preventDefault()},_onMouseOutWidget:function(e){if(!this.props.previewMode&&!e.isDefaultPrevented())return this.setState({hoveredWidgetUID:void 0}),e.preventDefault()},_onResizeWidget:function(e,t){var r,i,s;s=this._getSelectedWidgetUIDs()[0],i=this.state.proxyMap[s],r={deltaX:t.pageX-i.getStartMouseX(),deltaY:this._toCanvasPixel(t.pageY,!0)-i.getStartMouseY()},this._updateMoveResultsOnMove(this.props.mover.onResizeWidget(this.props.widgets,this._widgetMap[s],i,e,r,this.state.layout),t)},_onDragStartWidgets:function(e,t){var r,i,s,n,o,a;if(this._canInteract(t)&&!F(this.getRef$("resize"),t.target)){for(this._isWidgetSelected(e)||(r=this._selectWidget(e,t)),o=0,a=(i=this._getSelectedWidgets(r)).length;o<a;o++){if(n=i[o],!this.props.delegate.canMoveWidget(n))return;this.props.delegate.didStartMoveWidget(n)}this._initializeProxies(i,c.DRAG_MOVE,t),this.preventPropagation(t),this._updateMoveResultsOnMove(this.props.mover.onStartMoveWidgets(this.props.widgets,i),t),this.setState({isMouseMoveInProgress:!0}),s=this._getMouseTrackingElement(),this.onThis$(s,"mousemove",this._onMoveWidgets,e),this.onThis$(s,"mouseup",this._onBodyMouseUp)}},_onMoveWidgets:function(e,t){var r,i,s,n,o,a,l;null!=this.state.proxyMap&&(null!=this.state.proxyMap[e]&&(i=this.state.proxyMap[e],r={deltaX:t.pageX-i.getStartMouseX(),deltaY:this._toCanvasPixel(t.pageY,!0)-i.getStartMouseY()},o=i.transformByMove(r.deltaX,r.deltaY),a=o.top+o.height,this._checkForMouseMoveOverWidget(t),n=this.props.mover.onMoveWidgets(this.props.widgets,this._getSelectedWidgets(),this.state.proxyMap,r,this.state.layout),this._updateMoveResultsOnMove(n,t),null!=this._lastMousePositionY?(s=t.pageY-this._lastMousePositionY,this._lastMousePositionY=t.pageY,k.defer((l=this,function(){var e,t;if(l._isMounted)return e=(t=l._getScrollTrackingElement$()).scrollTop()-l._headerHeight,a>e+t.height()&&s>0?(t.scrollTop(t.scrollTop()+20),l._calculateGridDimensions(l.props)):o.top<e&&s<0?t.scrollTop(t.scrollTop()-20):void 0}))):this._lastMousePositionY=t.pageY))},_onBodyMouseUp:function(e){F(this.getRef$("grid"),e.target)||this._onMouseUp(e)},_onMouseUp:function(e){var t,r,i,s,n,o,a,l,u;if(this.setState({moveFeedbackCoordinates:void 0}),null!=(i=this._cleanMouseTracking())){for(a in r=k.first(k.keys(i)),this._isNewWidgetBeingDragged=!1,o=null!=(l=this.state.moveResults)?l.getProxyPositions():void 0)n=o[a],this.state.moveResults.setWidgetPosition(this._getWidgetByUID(a),n.getPixelDimensions(this.state.layout),!1);if(s=(null!=(u=this.state.moveResults)?u.getPositionOverrides():void 0)||{},this.state.moveResults.clearPositionOverrides(),this.state.moveResults.clearProxyPosition(),this.state.moveResults.clearContainerChanges(),t=new f(this._getSelectedWidgets(),s,this.props.widgets,this.state.layout),this.state.moveResults.isValidOperation())if(i[r].getDragType().isMove())this.props.delegate.didMoveWidgets(t,this.props.widgets),this.props.mover.didMoveWidgets();else switch(i[r].getDragType()){case c.RESIZE:this.props.delegate.didResizeWidget(t,this.props.widgets),this.props.mover.didResizeWidget();break;case c.ADD:this.props.delegate.didAddWidget(t,this.props.widgets),this.props.mover.didMoveWidgets(),this._didAddWidget(r)}else this.props.delegate.didDropWidgetInvalid(t),this.props.mover.didDropWidgetInvalid();this.setState({isMouseMoveInProgress:!1}),this.preventPropagation(e)}},_onMouseDown:function(e){if(this.state.isKeyboardMoveInProgress)return this.setState({isKeyboardMoveInProgress:!1}),this._hotkeyManager.resetState(),this.state.moveResults.invalidate(),this.state.moveResults.clearPositionOverrides(),this.state.moveResults.clearProxyPosition(),this.state.moveResults.clearContainerChanges(),this.props.delegate.didDropWidgetInvalid({}),this.props.mover.didDropWidgetInvalid()},_onScroll:function(){var e;return(e=document.getElementsByClassName("slds-popover__close")).length>0&&e[0].click(),L.trigger("chrome:hide_global_menus")},_onMouseLeave:function(e){var t,r,i;if(null!=this.state.proxyMap){for(r in this.setState({isMouseMoveInProgress:!1}),i=this.state.proxyMap)if(t=i[r],this.props.delegate.didDragOutside(this._widgetMap[r],t.getDragType())){this._cleanMouseTracking(e);break}this.state.moveResults.clearPositionOverrides(),this.state.moveResults.clearProxyPosition()}},_onDragEnter:function(e){var t;e.preventDefault(),null==this.state.proxyMap&&(t=this.props.delegate.didDragEnter(this._toCanvasPixel(e.pageX,!1),this._toCanvasPixel(e.pageY,!0),this.props.cellSpacing.y,this.state.layout),this._isNewWidgetBeingDragged=null!=t,null!=t&&(this._widgetMap[t.getUID()]=t,this._didDragEnterWidget(t.getUID()),this.props.delegate.didStartMoveWidget(t),this._updateMoveResultsOnMove(this.props.mover.onStartMoveWidgets(this.props.widgets,[t]),e),this.setState({isMouseMoveInProgress:!0}),this._initializeProxies([t],c.ADD,e)))},_onDragOver:function(e){var t,r;e.preventDefault(),this._onMoveModifier(new g(e)),(t=Date.now())-(null!=(r=this._lastDragOverExecution)?r:0)<50||(this._lastDragOverExecution=t,this._dragPageX===e.pageX&&this._dragPageY===e.pageY||null!=this.state.proxyMap&&(this._dragPageX=e.pageX,this._dragPageY=e.pageY,this._onMoveWidgets(this._getSelectedWidgetUIDs()[0],e)))},_onDragLeave:function(e){if(e.preventDefault(),null!=this.state.proxyMap&&this._didDragActuallyLeave(e))return this.props.delegate.didDragLeave(this._getSelectedWidgets()),this._updateMoveResultsOnMove(this.state.moveResults.invalidate(),e),this._onMouseUp(e)},_didDragActuallyLeave:function(e,t){return!!P.isMousePositionValid(e)&&!P.isMouseInElement(e,this.getRef$(t))},clearSelectedWidget:function(){return this._selectedHandle=void 0,this._updateSelectedWidgets([])},_didAddWidget:function(e){var t;return t=this.props.widgetSelector.didAddWidget(e,this._getSelectedWidgetUIDs()),this._selectedHandle=void 0,this._updateSelectedWidgets(t)},_didDragEnterWidget:function(e){var t;return t=this.props.widgetSelector.didDragEnterWidget(e,this._getSelectedWidgetUIDs()),this._selectedHandle=void 0,this._updateSelectedWidgets(t)},_selectWidget:function(e,t){var r;return r=this.props.widgetSelector.selectWidget(e,t,this._getSelectedWidgetUIDs()),this._updateSelectedWidgets(r),r},_selectSingleWidgetAndHandle:function(e,t){var r;return r=this.props.widgetSelector.selectWidget(e,{},[]),this._selectedHandle=t,this._updateSelectedWidgets(r)},_hasSelectedWidget:function(){return this._getSelectedWidgetUIDs().length>0},_getSelectedWidgetUIDs:function(){return this.props.selectedWidgetUIDs||this.state.selectedWidgetUIDs},_updateSelectedWidgets:function(e){return null!=this.props.selectedWidgetUIDs?this.props.onUpdateSelectedWidgets(e):this.setState({selectedWidgetUIDs:e})},_isWidgetSelected:function(e){return this._getSelectedWidgetUIDs().includes(e)},_hasSingleWidgetSelected:function(){return 1===this._getSelectedWidgetUIDs().length},_buildWidgetPixelDimMap:function(e,t){var r,i,s,n,o,a,l,u;for(this._widgetPixelDims={},u=[],s=0,o=t.length;s<o;s++){if((i=t[s]).isContainer())for(n=0,a=(l=i.getContainedWidgets()).length;n<a;n++)r=l[n],this._widgetPixelDims[r.getUID()]=e.toPixelDimensions(r.getPosition());u.push(this._widgetPixelDims[i.getUID()]=e.toPixelDimensions(i.getPosition()))}return u},_findMousedOverWidget:function(e){var t,r,i,s,n;for(s in r=this._toCanvasPixel(e.pageY,!0),t=this._toCanvasPixel(e.clientX,!1),n=this._widgetPixelDims)if(i=n[s],P.isPositionInCoords(t,r,i))return s},_checkForMouseMoveOverWidget:function(e){var t;return null!=(t=this._findMousedOverWidget(e))&&t!==this._dragTargetWidgetUID?this._onMouseEnterWidget(t,e):null==t&&this._dragTargetWidgetUID?this._onMouseLeaveWidget(t,e):void 0},_onDragEnterWidget:function(e,t){if(null==this._dragTargetWidgetUID||this._dragTargetWidgetUID!==e)return this._onMouseEnterWidget(e,t)},_onDragLeaveWidget:function(e,t){if(t.stopPropagation(),null!=this._dragTargetWidgetUID&&this._didDragActuallyLeave(t,e))return this._onMouseLeaveWidget(e,t)},_onMouseDownWidget:function(e,t){var r;this.props.previewMode||(t.stopPropagation(),r=[],this.props.widgetSelector.willResetSelection(e,t)||(r=this._getSelectedWidgets()),this.props.widgetSelector.willSelectWidget(e,t,this._getSelectedWidgetUIDs())&&r.push(this._getWidgetByUID(e)),this._initializeProxies(r,c.DRAG_MOVE,t),this._updateMoveResultsOnMove(this.props.mover.onStartMoveWidgets(this.props.widgets,r),t),this.setState({isMouseMoveInProgress:!0}),this._selectedHandle=void 0)},_onClickWidget:function(e,t){this.props.previewMode||(this._isWidgetSelected(e)&&this._hasSingleWidgetSelected()||this._selectWidget(e,t),t.stopPropagation())},_onDoubleClickWidget:function(e,t){this.props.previewMode||t.isDefaultPrevented()||this.props.delegate.didDoubleClickWidget(this._getWidgetByUID(e))},_onMouseEnterWidget:function(e,t){return null==this.state.proxyMap||null!=this.state.proxyMap[e]||(this._dragTargetWidgetUID=e,this._didMouseEnterWidget(this._getWidgetsForMouseEnterLeave())),!0},_onMouseLeaveWidget:function(e,t){return null==this.state.proxyMap||null!=this.state.proxyMap[e]||(this._didMouseLeaveWidget(this._getWidgetsForMouseEnterLeave()),this._dragTargetWidgetUID=void 0),!0},_didMouseEnterWidget:function(e){var t,r;if(r=e.existingWidget,t=e.draggingWidgets,this.props.delegate.didMouseEnterWidget(t,r),this.props.mover.onMouseEnterWidget(t,r),null!=r&&!r.isContainer())return this.props.widgetSelector.didMouseEnterWidget(r.getUID())},_didMouseLeaveWidget:function(e){var t,r;if(r=e.existingWidget,t=e.draggingWidgets,this.props.delegate.didMouseLeaveWidget(t,r),this.props.mover.onMouseLeaveWidget(t,r),null!=r&&!r.isContainer())return this.props.widgetSelector.didMouseLeaveWidget(r.getUID())},_getWidgetsForMouseEnterLeave:function(){return{existingWidget:this._widgetMap[this._dragTargetWidgetUID],draggingWidgets:this._getSelectedWidgets()}},_getSelectedWidgets:function(e){var t,r,i,s;for(null==e&&(e=this._getSelectedWidgetUIDs()),s=[],r=0,i=e.length;r<i;r++)t=e[r],this._hasWidgetByUID(t)&&s.push(this._getWidgetByUID(t));return s},_getWidgetByUID:function(e){var t;return null!=(t=this._widgetMap)?t[e]:void 0},_hasWidgetByUID:function(e){var t;return null!=(null!=(t=this._widgetMap)?t[e]:void 0)},_getUIDsByWidgets:function(e){return k.map(e,(function(e){return e.getUID()}))},_getWidgetPositionOverride:function(e){var t;return null!=(t=this.state.moveResults)?t.getPositionOverrides()[e]:void 0},_getWidgetLocationStyle:function(e,t){var r,i;return r=e.getDimensionOverride(),i=this._getWidgetPositionOverride(e.getUID()),null!=r?r:null!=i?i.getPixelDimensions(t):null!=t?t.toPixelDimensions({row:e.getRow(),column:e.getColumn(),width:e.getWidth(),height:e.getHeight()}):void 0},_getContainerChange:function(e){var t;return null!=(t=this.state.moveResults)?t.getContainerChange(e):void 0},_updateMoveResultsOnMove:function(e,t){return this.setState({moveResults:e,moveFeedbackCoordinates:{x:t.clientX,y:t.clientY}})},_scrollBoundingBoxIntoView:function(e,t,r){var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T;if(this._isMounted&&(C=r===O.Direction.TOP,u=r===O.Direction.BOTTOM,C||u)){if(t){for(E=0,S=(T=t.getValue()).length;E<S;E++){if((b=T[E])===O.Direction.BOTTOM){i=!0;break}if(b===O.Direction.TOP){_=!0;break}}if(!_&&!i)return}return o=(a=(m=this._getScrollTrackingElement$()).scrollTop()-this._headerHeight)+m.height()-this.props.cellSpacing.y,f=(h=(d=this.state.layout.toPixelDimensions(e)).top)<=a,n=(c=d.top+d.height)>=o,s=c<=a,y=h>=o,l=this._rowHeight+this.props.cellSpacing.y,null==t&&C||_?f?(g=!0,l+=a-h):y&&(p=!0,l+=h-o):(null==t&&u||i)&&(s?(g=!0,l+=a-c):n&&(p=!0,l+=c-o)),p?m.scrollTop(m.scrollTop()+l):g?m.scrollTop(m.scrollTop()-l):void 0}},_setAssertiveText:function(e,t){return null==t&&(t=!1),t&&this.state.assertiveText===e?this.setState({assertiveText:""},(function(){return this._assistiveTextCallback=setTimeout((t=this,function(){return t.setState({assertiveText:e})}),200);var t})):this.setState({assertiveText:e})},_getInfoForAction:function(e){return e===p.Actions.START_MOVE?{numColumns:this.state.layout.getNumColumns(),isResize:!!this._selectedHandle,selectedWidgets:this._getSelectedWidgets()}:{}},_onKeyboardMoveStart:function(){var e,t,r,i,s,n;return t=!!this._selectedHandle,n=this._getSelectedWidgets(),t?(e=c.KEYBOARD_RESIZE,s=this.props.mover.onStartResizeWidget(this.props.widgets,n[0])):(e=c.KEYBOARD_MOVE,s=this.props.mover.onStartMoveWidgets(this.props.widgets,n)),i=this._initializeProxies(n,e,{}),this.setState({isKeyboardMoveInProgress:!0}),this.props.delegate.didStartMoveWidget(),this._updateMoveResultsOnMove(s,{}),r=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.START_MOVE,{isResize:t,selectedWidgets:n,invalid:!1}),this._setAssertiveText(r),i},_onKeyboardMove:function(e,t,r,i){var s,n,o,a,l,u,d,c,h;n=!!this._selectedHandle,d=this._getSelectedWidgets(),n?(c=d[0],l=(null!=(h=this.state.proxyMap)?h[c.getUID()]:void 0)||i[c.getUID()],u=this.props.mover.onResizeWidget(this.props.widgets,c,l,this._selectedHandle,e,this.state.layout)):u=this.props.mover.onMoveWidgets(this.props.widgets,d,this.state.proxyMap||i,e,this.state.layout),this._updateMoveResultsOnMove(u,{}),this._calculateGridDimensions(this.props),a=n?this._selectedHandle.getDelta(e.deltaX,e.deltaY):{h:0,w:0,x:e.deltaX,y:e.deltaY},s={column:t.getColumn()+a.x,row:t.getRow()+a.y,width:t.getWidth()+a.w,height:t.getHeight()+a.h},this._scrollBoundingBoxIntoView(s,this._selectedHandle,r),o=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.MOVE,{isResize:n,deltas:e,selectedWidgets:d,invalid:!u.isValidOperation()}),this._setAssertiveText(o)},_onKeyboardMoveEnd:function(e,t,r){var i,s,n,o,a,l,u,d,h,g,m,_,y,b,C,E,S;if(null==r&&(r=!1),this.setState({isKeyboardMoveInProgress:!1}),d=this.state.proxyMap){for(y in this.setState({moveFeedbackCoordinates:void 0,proxyMap:void 0}),o=!(null!=(b=this.state.moveResults)?b.isValidOperation():void 0),r&&(null!=(C=this.state.moveResults)&&C.invalidate(),n=this._selectedHandle||t.deltaY<0&&O.BOTTOM_CENTER||O.TOP_CENTER,s=t.deltaY<0?O.Direction.BOTTOM:O.Direction.TOP,this._scrollBoundingBoxIntoView(e,n,s)),a=r||o,m=null!=(E=this.state.moveResults)?E.getProxyPositions():void 0,l=d[k.first(k.keys(d))].getDragType(),m)g=m[y],this.state.moveResults.setWidgetPosition(this._getWidgetByUID(y),g.getPixelDimensions(this.state.layout),!1);if(h=(null!=(S=this.state.moveResults)?S.getPositionOverrides():void 0)||{},this.state.moveResults.clearPositionOverrides(),this.state.moveResults.clearProxyPosition(),this.state.moveResults.clearContainerChanges(),this._calculateGridDimensions(this.props),_=this._getSelectedWidgets(),i=new f(_,h,this.props.widgets,this.state.layout),a)this.props.delegate.didDropWidgetInvalid(i),this.props.mover.didDropWidgetInvalid(),t.deltaX=t.deltaY=0;else switch(l){case c.MOVE:case c.KEYBOARD_MOVE:this.props.delegate.didMoveWidgets(i,this.props.widgets),this.props.mover.didMoveWidgets();break;case c.RESIZE:case c.KEYBOARD_RESIZE:this.props.delegate.didResizeWidget(i),this.props.mover.didResizeWidget();break;case c.ADD:this.props.delegate.didAddWidget(i,this.props.widgets),this.props.mover.didMoveWidget()}u=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.END_MOVE,{isResize:null!=this._selectedHandle,deltas:t,selectedWidgets:_,canceled:r,invalid:o}),this._setAssertiveText(u)}},_selectAllWidgets:function(e){var t,r;return r=this.props.widgetSelector.selectAllWidgets(k.keys(this._widgetMap),e),this._selectedHandle=void 0,this._updateSelectedWidgets(r),this.getRef$("grid").focus(),t=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.SELECT_ALL,{selectedWidgets:this._getSelectedWidgets()}),this._setAssertiveText(t,!0)},_deleteSelectedWidgets:function(e){var t,r;return e.preventDefault(),r=this._getSelectedWidgets(),this.props.delegate.didPressDeleteWidget(r)&&this.clearSelectedWidget(),t=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.DELETE,{selectedWidgets:r}),this._setAssertiveText(t,!0)},_duplicateSelectedWidgets:function(e){var t,r;if(e.preventDefault(),(r=this._getSelectedWidgets()).length>0)return this.props.delegate.didPressDuplicateWidget(e),t=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.DUPLICATE,{selectedWidgets:r}),this._setAssertiveText(t,!0)},_copySelectedWidgets:function(e){var t,r;if(e.preventDefault(),(r=this._getSelectedWidgets()).length>0)return this.props.delegate.didPressCopyWidget(e),t=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.COPY,{selectedWidgets:r}),this._setAssertiveText(t,!0)},_onMoveModifier:function(e,t){var r,i,s,n,o;if(!e.equals(this._lastModifier))return this._lastModifier=e,null!=(n=this.props.mover.onModifier(e))&&this.setState({moveResults:n}),i=this.state.isKeyboardMoveInProgress||this.state.isMouseMoveInProgress,r=!(n||this.state.moveResults).isValidOperation(),t&&1===this._getSelectedWidgets().length&&i&&(s=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.MODIFIER_DOWN,{activated:"function"==typeof(o=this.props.mover).isReflowEnabled?o.isReflowEnabled():void 0,invalid:r,isResize:!!this._selectedHandle}),this._setAssertiveText(s),null!=this._getSelectedWidgets()[0].getContainer())?this.getRef$("grid").focus():void 0},_onTabBlock:function(){var e;return e=this.props.actionLabelProvider.getAssistiveTextFor(p.Actions.BLOCKED_TAB,{}),this._setAssertiveText(e,!0)},_setWidgetGridRef:function(e){this._widgetGridEl=e},_setWidgetRef:function(e,t){return this.refs[e]=null!=t?t.widgetContainer:void 0,this.refs.resize=null!=t?t.proxy:void 0},_areWidgetsSame:function(e,t){return e.length===t.length&&t.every((r=this,function(t,i){var s,n;return t.getUID()===e[i].getUID()&&k.isEqual(t.getPosition(),e[i].getPosition())&&r._areWidgetsSame(null!=(s=t.getContainedWidgets())?s:[],null!=(n=e[i].getContainedWidgets())?n:[])}));var r}})},89543:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;a=r(96486),s=r(86897),i=r(22158),n=r(22393),o=r(50765),e.exports=function(e){function t(){this._layoutUtil=new n}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._doReflow=function(e,t,r,s,n){var o,a,l,u,d,c,h;for(null==n&&(n=!1),o=(h=this._layoutUtil.moveAndGetProxyLocation(e,t,r)).changedLayout,a=h.proxyPosition,l=new i(!0,!0),d=0,c=o.length;d<c;d++)u=o[d],l.setWidgetPosition(u,u.getPosition(),!0);return l.setWidgetPosition(t,s,n),l.setProxyPosition(a,!0,t.getUID()),l},t.prototype._resetWidgets=function(){var e,t,r,i,s;if(!a.isEmpty(this._savedWidgetsRef)){for(s=[],t=0,r=(i=this._savedWidgetsRef).length;t<r;t++)e=i[t],s.push("function"==typeof e.updateWidget?e.updateWidget(this._savedLayoutWidgets[e.getUID()]):void 0);return s}},t.prototype._startModifying=function(e){var t,r,i,s,n;for(this._savedWidgetsRef=e,this._savedLayoutWidgets={},n=[],r=0,i=(s=this._savedWidgetsRef).length;r<i;r++)t=s[r],n.push(this._savedLayoutWidgets[t.getUID()]={column:t.getColumn(),row:t.getRow(),height:t.getHeight(),width:t.getWidth()});return n},t.prototype._cleanup=function(){return delete this._savedLayoutWidgets,delete this._savedWidgetsRef},t.prototype.onStartMoveWidgets=function(e,r){return this._startModifying(e),t.__super__.onStartMoveWidgets.call(this,e,r)},t.prototype.onMoveWidgets=function(e,t,r,s,n){var l,u,d,c,h,p,g,m;return l=s.deltaX,u=s.deltaY,d=s.deltasGridBased,1!==a.size(t)?new i(!1,!1):(p=a.first(a.values(r)),d||null==n?(!0,h=c={column:(g=p.getStartGridDimensions()).column+l,row:g.row+u,width:g.width,height:g.height}):(!1,c={left:(m=p.getStartPixelDimensions()).left+l,top:m.top+u,width:m.width,height:m.height},h=this._getSafeWidgetDimensions(t[0],n.toGridDimensions(c),o.Direction.LEFT)),this._resetWidgets(),this._doReflow(e,t[0],h,c,d))},t.prototype.didMoveWidgets=function(){return this._cleanup()},t.prototype.onStartResizeWidget=function(e,r){return this._startModifying(e),t.__super__.onStartResizeWidget.call(this,e,r)},t.prototype.onResizeWidget=function(e,t,r,i,s,n){var o,a,l,u,d,c,h,p;return a=s.deltaX,l=s.deltaY,u=s.deltasGridBased,o=i.getDelta(a,l),u||null==n?c=d={row:(h=r.getStartGridDimensions()).row+o.y,column:h.column+o.x,width:h.width+o.w,height:h.height+o.h}:(d={top:(p=r.getStartPixelDimensions()).top+o.y,left:p.left+o.x,width:p.width+o.w,height:p.height+o.h},c=this._getSafeWidgetDimensions(t,n.toGridDimensions(d),i)),c.row<0&&(c.height+=c.row,c.row=0),this._resetWidgets(),this._doReflow(e,t,c,d,u)},t.prototype.didResizeWidget=function(){return this._cleanup()},t.prototype.didDropWidgetInvalid=function(e,t){return this._resetWidgets(),this._cleanup()},t.prototype.didDragOutside=function(e,t){return this._resetWidgets(),this._cleanup()},t}(s)},2391:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(){function e(e,t,r){this._type=e,this._value=t,this._allowSubpixelHeight=null!=r&&r}return e.prototype.getType=function(){return this._type},e.prototype.getValue=function(){return this._value},e.prototype.allowSubpixelHeight=function(){return this._allowSubpixelHeight},e.prototype.isEqual=function(e){return this.getType()===e.getType()&&this.getValue()===e.getValue()&&this.allowSubpixelHeight()===e.allowSubpixelHeight()},e}(),s.Type=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.rowsOfSubpixelHeight=function(e){return new s(s.Type.ROWS,e,!0)},t.prototype.of=function(e){return new s(this,e)},t}(i),s.Type.build(s.Type,["PIXELS","ROWS"])},2541:(e,t,r)=>{var i,s,n,o,a;a=r(96486),s=r(27223),i=r(65408),o=r(50765),n=r(8429).Z,e.exports=function(){function e(e){this._uid=null!=e?e:a.uniqueId()}return e.prototype.getUID=function(){return this._uid},e.prototype.getRow=function(){return s.checkImplemented()},e.prototype.getColumn=function(){return s.checkImplemented()},e.prototype.getWidth=function(){return s.checkImplemented()},e.prototype.getHeight=function(){return s.checkImplemented()},e.prototype.getPosition=function(){return{column:this.getColumn(),row:this.getRow(),height:this.getHeight(),width:this.getWidth()}},e.prototype.getBoundingBox=function(){return(new i).setTopLeft(this.getRow(),this.getColumn()).setWidth(this.getWidth()).setHeight(this.getHeight())},e.prototype.getMinWidth=function(){return 1},e.prototype.getMaxWidth=function(){return 1/0},e.prototype.getMinHeight=function(){return 1},e.prototype.getMaxHeight=function(){return 1/0},e.prototype.render=function(e,t,r){return s.checkImplemented()},e.prototype.renderActions=function(e,t){},e.prototype.isContainer=function(){return!1},e.prototype.getContainedWidgets=function(){return[]},e.prototype.getContainer=function(){},e.prototype.getTabbableHandles=function(){return[o.BOTTOM_RIGHT]},e.prototype.getTabbableHandleAssistiveText=function(e){return n.getLabel("GridLayoutAssistiveText","resizeWidget",this.getDescription())},e.prototype.getMoveWidgetAssistiveText=function(){return n.getLabel("GridLayoutAssistiveText","moveWidget",this.getDescription())},e.prototype.getDescription=function(){return n.getLabel("GridLayoutAssistiveText","defaultWidgetDescriptor")},e.prototype.getDimensionOverride=function(){},e}()},10967:(e,t,r)=>{var i,s,n={}.hasOwnProperty;r(96486),i=r(96887),(s=r(90554)).toKeyValuePair,s.toSet,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.willSelectWidget=function(e,t,r){return!r.includes(e)||!(t.metaKey||t.ctrlKey)},t.prototype.willResetSelection=function(e,t){return!(t.metaKey||t.ctrlKey)},t.prototype.selectWidget=function(e,t,r){var i;return i=new Set(r),t.metaKey||t.ctrlKey?(i.has(e)?i.delete(e):i.add(e),Array.from(i)):this._updateSelectedWidget(e,r)},t.prototype.selectAllWidgets=function(e,t){return t.preventDefault(),e},t.prototype.didAddWidget=function(e,t){return this._updateSelectedWidget(e,t)},t.prototype.didDragEnterWidget=function(e,t){return this._updateSelectedWidget(e,t)},t.prototype._hasMultipleWidgetsSelected=function(e){return e.length>1},t.prototype._updateSelectedWidget=function(e,t){return!t.includes(e)||this._hasMultipleWidgetsSelected(t)?[e]:t},t}(i)},96887:(e,t,r)=>{var i;i=r(27223),e.exports=function(){function e(){}return e.prototype.willSelectWidget=function(e,t,r){return i.checkImplemented()},e.prototype.willResetSelection=function(e,t){return i.checkImplemented()},e.prototype.selectWidget=function(e,t){return i.checkImplemented()},e.prototype.selectAllWidgets=function(e,t,r){return i.checkImplemented()},e.prototype.didAddWidget=function(e,t){return i.checkImplemented()},e.prototype.didDragEnterWidget=function(e,t){return i.checkImplemented()},e.prototype.didMouseEnterWidget=function(e){},e.prototype.didMouseLeaveWidget=function(e){},e}()},47101:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(96887),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.willSelectWidget=function(e,t){return!0},t.prototype.willResetSelection=function(e,t){return!0},t.prototype.didDragEnterWidget=function(e){return[e]},t.prototype.selectWidget=function(e){return[e]},t.prototype.didAddWidget=function(e){return[e]},t.prototype.selectAllWidgets=function(e,t){return[]},t}(i)},96952:e=>{e.exports=function(){function e(e,t,r,i,s){this._dragType=t,this._startMouseX=r,this._startMouseY=i,this._layout=s,this._widgetUID=e.getUID(),this._startGridDimensions={row:e.getRow(),column:e.getColumn(),width:e.getWidth(),height:e.getHeight()},this._startPixelDimensions=this._layout.toPixelDimensions(this._startGridDimensions)}return e.prototype.getWidgetUID=function(){return this._widgetUID},e.prototype.getDragType=function(){return this._dragType},e.prototype.getStartMouseX=function(){return this._startMouseX},e.prototype.getStartMouseY=function(){return this._startMouseY},e.prototype.getLayout=function(){return this._layout},e.prototype.getStartGridDimensions=function(){return this._startGridDimensions},e.prototype.getStartPixelDimensions=function(){return this._startPixelDimensions},e.prototype.getGridDimensions=function(){return null!=this._gridDimensions?this._gridDimensions:this._startGridDimensions},e.prototype.transformByMove=function(e,t){return{left:this._startPixelDimensions.left+e,top:this._startPixelDimensions.top+t,width:this._startPixelDimensions.width,height:this._startPixelDimensions.height}},e.prototype.transformGridDimensionsByMove=function(e,t){return null==e&&(e=0),null==t&&(t=0),{row:Math.max(0,this._startGridDimensions.row+e),column:Math.min(this._layout.getNumColumns()-this._startGridDimensions.width,Math.max(0,this._startGridDimensions.column+t)),width:this._startGridDimensions.width,height:this._startGridDimensions.height}},e}()},79091:(e,t,r)=>{var i,s,n,o,a,l,u,d=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};u=r(96486),a=r(72555),s=r(67294),i=r(45697),n=r(50765),o=r(32574),l=function(e,t,r){var i;if((null!=(i=e.tabbableHandles)?i.length:void 0)>0){if(!e[t])return new Error(t+" not passed into "+r+" even though it is required. Either pass in a callback or remove the tabbable handles.");if("function"!=typeof e[t])return new Error(t+" in "+r+" is not of type function.")}},e.exports=a({displayName:"GridProxyRC",propTypes:{onStartResize:i.func,additionalClassName:i.string,style:i.object,isEmbedded:i.bool,tabbableHandles:i.arrayOf(i.instanceOf(n)).isRequired,showProxy:i.bool,showResizeComp:i.bool,assistiveTextProvider:l,selectAssociatedWidget:l,disallowButtonInteraction:i.bool},getDefaultProps:function(){return{tabbableHandles:[],isEmbedded:!1,disallowButtonInteraction:!1}},render:function(){var e,t,r,i,a,l,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L;if(t=o.buildClassName("proxy",this.props.showProxy&&!this.props.showResizeComp&&this.props.isEmbedded?"proxyMultiSelect":void 0,this.props.isEmbedded?"embedded":void 0,this.props.showProxy?void 0:"slds-assistive-text",this.props.additionalClassName),_=.5,null!=this.props.onStartResize)for(l=[],e=[],C=0,E=(S=n.enums()).length;C<E;C++)a=S[C],i=u.bind(this._onMouseDown,this,a),r=o.buildClassName("draggable","draghandle",this.props.showResizeComp?void 0:"slds-assistive-text",a.getClassName()),y=a.getX(null!=(T=null!=(I=this.props.style)?I.width:void 0)?T:0)+1,b=a.getY(null!=(v=null!=(R=this.props.style)?R.height:void 0)?v:0)+1,d.call(this.props.tabbableHandles,a)>=0?e.push(this._makeTabbableButtonForHandle(a,r,i,y,b)):(h=s.createElement("rect",{key:a.getName(),className:r,x:y,y:b,width:8,height:8,onMouseDown:i}),l.push(h));return m=this.props.isEmbedded?{height:null!=(w=this.props.style)?w.height:void 0,width:null!=(A=this.props.style)?A.width:void 0}:this.props.style,g=(null!=(D=this.props.style)?D.width:void 0)-1,p=(null!=(L=this.props.style)?L.height:void 0)-1,f=isNaN(g)||g<0?void 0:g,c=isNaN(p)||p<0?void 0:p,s.createElement("div",{style:m,className:t},s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},s.createElement("rect",{className:"rect",x:_,y:.5,width:f,height:c}),l),e)},_makeTabbableButtonForHandle:function(e,t,r,i,n){var a;return a=u.partial(this._onHandleFocus,e),s.createElement("button",{key:e.getName(),onFocus:a,style:{left:i-1,top:n-1},className:o.buildClassName(t,this.props.additionalClassName),onMouseDown:r,onKeyDown:this._preventKeyDown},s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1"},s.createElement("rect",{key:e.getName(),className:"draghandle draggable",x:".5",y:".5",width:"8",height:"8"})),s.createElement("div",{className:"slds-assistive-text"},this.props.assistiveTextProvider(e)))},_preventKeyDown:function(e){if(this.props.disallowButtonInteraction&&(32===e.keyCode||13===e.keyCode))return e.stopPropagation(),e.preventDefault(),!1},_onMouseDown:function(e,t){this.props.onStartResize(e,t)},_onHandleFocus:function(e,t){this.props.selectAssociatedWidget(e,t)}})},50765:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty,l=function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};s=r(78978),o=r(74978).capitalizeFirst,e.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.getClassName=function(){var e;return null!=this._className||(e=this.getValue()[0],this._className=e.getClassName(),2===this.getValue().length?this._className+=this.getValue()[1].getClassName(!0):this._className+=e.isVertical()?"Center":"Middle"),this._className},t.prototype.getDelta=function(e,t){var r,i,s,n;for(r={x:0,y:0,w:0,h:0},i=0,s=(n=this.getValue()).length;i<s;i++)n[i].delta(r,e,t);return r},t.prototype.getX=function(e){var t;return t=this.getValue(),this._getPosWithBounds(e,t,i.LEFT,i.RIGHT)},t.prototype.getY=function(e){var t;return t=this.getValue(),this._getPosWithBounds(e,t,i.TOP,i.BOTTOM)},t.prototype._getPosWithBounds=function(e,t,r,i){var s,n,o,a,l;for(o={},a=0,l=t.length;a<l;a++)o[(n=t[a]).getClassName()]=n;return s=e-10,.5,null!=o[r.getClassName()]?.5:null!=o[i.getClassName()]?s-.5:Math.floor(s/2)+.5},t}(s),n.Direction=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.prototype.getClassName=function(e){return null==e&&(e=!1),e?o(this.getValue().className):this.getValue().className},t.prototype.isVertical=function(){return this.getValue().isVertical},t.prototype.delta=function(e,t,r){return this.getValue().delta(e,t,r)},t}(s),i.build(i,{TOP:{className:"top",isVertical:!0,delta:function(e,t,r){return e.h=-r,e.y=r}},BOTTOM:{className:"bottom",isVertical:!0,delta:function(e,t,r){return e.h=r}},LEFT:{className:"left",isVertical:!1,delta:function(e,t,r){return e.w=-t,e.x=t}},RIGHT:{className:"right",isVertical:!1,delta:function(e,t,r){return e.w=t}}}),n.build(n,{TOP_LEFT:[i.TOP,i.LEFT],TOP_CENTER:[i.TOP],TOP_RIGHT:[i.TOP,i.RIGHT],RIGHT_MIDDLE:[i.RIGHT],BOTTOM_RIGHT:[i.BOTTOM,i.RIGHT],BOTTOM_CENTER:[i.BOTTOM],BOTTOM_LEFT:[i.BOTTOM,i.LEFT],LEFT_MIDDLE:[i.LEFT]})},34409:(e,t,r)=>{var i,s;s=r(8429).Z,i=r(53811),e.exports=function(){function e(){}return e.prototype.getAssistiveTextFor=function(e,t){switch(e){case i.Actions.START_MOVE:return this._getAssistiveTextForMoveStart(t);case i.Actions.END_MOVE:return this._getAssistiveTextForMoveEnd(t);case i.Actions.MOVE:return this._getAssistiveTextForMove(t);case i.Actions.BLOCKED_TAB:return this._getAssistiveTextForBlockedTab();case i.Actions.COPY:return this._getAssistiveTextForCopy(t);case i.Actions.SELECT_ALL:return this._getAssistiveTextForSelectAll();case i.Actions.DELETE:return this._getAssistiveTextForDelete(t);case i.Actions.MODIFIER_DOWN:return this._getAssistiveTextForModifierDown(t);default:throw new Error("Hey there buddy, you aren't handling the "+(null!=e&&"function"==typeof e.getValue?e.getValue():void 0)+" action. You probably should.\nIn case it helps, the received params for the action are "+JSON.stringify(t))}},e.prototype._getExtraInfo=function(e,t,r,i){var n,o,a,l,u,d,c;return e?(u=r?"Resize":"Move",s.getLabel("GridLayoutAssistiveText","invalid"+u)):r?(c=t[0],s.getLabel("GridLayoutAssistiveText","size",c.getWidth()+i.deltaX,c.getHeight()+i.deltaY)):1===t.length?(c=t[0],s.getLabel("GridLayoutAssistiveText","position",c.getColumn()+i.deltaX,c.getRow()+i.deltaY)):(n=[],l=i.deltaX>0,a=i.deltaX<0,o=i.deltaY>0,d=i.deltaY<0,l?n.push(s.getLabel("GridLayoutAssistiveText","deltaRight",i.deltaX)):a&&n.push(s.getLabel("GridLayoutAssistiveText","deltaLeft",-i.deltaX)),o?n.push(s.getLabel("GridLayoutAssistiveText","deltaDown",i.deltaY)):d&&n.push(s.getLabel("GridLayoutAssistiveText","deltaUp",-i.deltaY)),n.length<1?s.getLabel("GridLayoutAssistiveText","noDelta"):n.length<2?n[0]:s.getLabel("GridLayoutAssistiveText","deltaContainer",n[0],n[1]))},e.prototype._getSelectionDescriptor=function(e){return s.getLabel("GridLayoutAssistiveText","defaultSelectionDescriptor",e.length)},e.prototype._getAssistiveTextForMoveStart=function(e){var t,r,i,n,o,a;return n=e.invalid,o=e.isResize,t=1===(a=e.selectedWidgets).length?a[0].getDescription():this._getSelectionDescriptor(a),r=this._getExtraInfo(n,a,o,{deltaX:0,deltaY:0}),o?(i=s.getLabel("GridLayoutAssistiveText","currentSize",r),s.getLabel("GridLayoutAssistiveText","beganResize",t,i)):(i=1===a.length?s.getLabel("GridLayoutAssistiveText","currentPosition",r):s.getLabel("GridLayoutAssistiveText","currentDelta",r),s.getLabel("GridLayoutAssistiveText","beganMove",t,i))},e.prototype._getAssistiveTextForMoveCanceled=function(e,t,r,i){var n,o,a;return 1===r.length?(n=r[0].getDescription(),o=this._getExtraInfo(e,r,t,i)):n=this._getSelectionDescriptor(r),t?(a=s.getLabel("GridLayoutAssistiveText","returnedToSize",o),s.getLabel("GridLayoutAssistiveText","canceledResize",n,a)):(a=1===r.length?s.getLabel("GridLayoutAssistiveText","returnedToPosition",o):s.getLabel("GridLayoutAssistiveText","returnedDelta"),s.getLabel("GridLayoutAssistiveText","canceledMove",n,a))},e.prototype._getAssistiveTextForMoveFinished=function(e,t,r,i){var n,o,a,l;return n=1===r.length?r[0].getDescription():this._getSelectionDescriptor(r),o=this._getExtraInfo(e,r,t,i),e&&(l=t?"Resize":"Move",a=s.getLabel("GridLayoutAssistiveText","invalid"+l)),t?(e||(a=s.getLabel("GridLayoutAssistiveText","finalSize",o)),s.getLabel("GridLayoutAssistiveText","endedResize",n,a)):(e||(a=1===r.length?s.getLabel("GridLayoutAssistiveText","finalPosition",o):s.getLabel("GridLayoutAssistiveText","finalDelta",o)),s.getLabel("GridLayoutAssistiveText","endedMove",n,a))},e.prototype._getAssistiveTextForMoveEnd=function(e){var t,r,i,s;return r=e.invalid,i=e.isResize,s=e.selectedWidgets,t=e.deltas,e.canceled?this._getAssistiveTextForMoveCanceled(r,i,s,t):this._getAssistiveTextForMoveFinished(r,i,s,t)},e.prototype._getAssistiveTextForMove=function(e){var t,r,i,n,o,a;return n=e.isResize,o=e.selectedWidgets,t=e.deltas,i=e.invalid,1===o.length?o[0].getDescription():this._getSelectionDescriptor(o),r=this._getExtraInfo(i,o,n,t),i?(a=n?"Resize":"Move",s.getLabel("GridLayoutAssistiveText","invalid"+a)):n?s.getLabel("GridLayoutAssistiveText","currentSize",r):1===o.length?s.getLabel("GridLayoutAssistiveText","currentPosition",r):s.getLabel("GridLayoutAssistiveText","currentDelta",r)},e.prototype._getAssistiveTextForBlockedTab=function(){return s.getLabel("GridLayoutAssistiveText","blockedTab")},e.prototype._getAssistiveTextForCopy=function(e){var t,r,i;return(i=e.selectedWidgets)||(i=[]),(r=i.length)<1?"":(t=r<2?i[0].getDescription():this._getSelectionDescriptor(i),s.getLabel("GridLayoutAssistiveText","copiedWidget",t))},e.prototype._getAssistiveTextForSelectAll=function(){return s.getLabel("GridLayoutAssistiveText","selectAllWidgets")},e.prototype._getAssistiveTextForDelete=function(e){var t,r,i;return(r=(i=e.selectedWidgets).length)<1?"":(t=r<2?i[0].getDescription():this._getSelectionDescriptor(i),s.getLabel("GridLayoutAssistiveText","deletedWidget",t))},e.prototype._getAssistiveTextForModifierDown=function(e){var t,r,i,n,o;return t=e.activated,i=e.invalid,n=e.isResize,i?(o=n?"Resize":"Move",r=s.getLabel("GridLayoutAssistiveText","invalid"+o)):r="",t?s.getLabel("GridLayoutAssistiveText","activatedReflow",r):s.getLabel("GridLayoutAssistiveText","deactivatedReflow",r)},e}()},53811:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;s=r(78978),o=r(53373),e.exports=n=function(){function e(){this._keyDownHotkeyManager=new o,this._keyUpHotkeyManager=new o}return e.prototype.initialize=function(e,t){return this.getInfoCallback=e,this.callbackMap=t},e.prototype.addKeyDownHandlers=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],this._keyDownHotkeyManager.unregisterKey(t),s.push(this._keyDownHotkeyManager.registerKey(t));return s},e.prototype.addKeyUpHandlers=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],this._keyUpHotkeyManager.unregisterKey(t),s.push(this._keyUpHotkeyManager.registerKey(t));return s},e.prototype.getKeyDownHandler=function(){return this._keyDownHotkeyManager.fire.bind(this._keyDownHotkeyManager)},e.prototype.getKeyUpHandler=function(){return this._keyUpHotkeyManager.fire.bind(this._keyUpHotkeyManager)},e.prototype.startHandling=function(){return this._keyDownHotkeyManager.setEnabled(!0),this._keyUpHotkeyManager.setEnabled(!0)},e.prototype.stopHandling=function(){return this._keyDownHotkeyManager.setEnabled(!1),this._keyUpHotkeyManager.setEnabled(!1),this.resetState()},e.prototype.disallowButtonInteraction=function(){return!1},e.prototype.resetState=function(){},e}(),n.Actions=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(s),i.build(i,["START_MOVE","MOVE","END_MOVE","SELECT_ALL","DELETE","DUPLICATE","COPY","MODIFIER_DOWN","BLOCKED_TAB"])},84347:(e,t,r)=>{var i,s,n,o,a=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty;o=r(49720),n=r(53373),i=r(53811),s=r(87518),e.exports=function(e){function t(){this._modifierPressWork=a(this._modifierPressWork,this),this._blockPressWork=a(this._blockPressWork,this),t.__super__.constructor.call(this),this.addKeyDownHandlers([{keyCode:o.KEY_CODE_TAB,callback:this._blockPressWork},{keyCode:o.KEY_CODE_TAB,modifier:n.MODIFIER_SHIFT,callback:this._blockPressWork},{keyCode:o.KEY_CODE_SHIFT,modifier:n.MODIFIER_SHIFT,callback:this._modifierPressWork},{keyCode:o.KEY_CODE_ALT,modifier:n.MODIFIER_ALT,callback:this._modifierPressWork}]),this.addKeyUpHandlers([{keyCode:o.KEY_CODE_SHIFT,callback:this._modifierPressWork},{keyCode:o.KEY_CODE_ALT,callback:this._modifierPressWork}])}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._blockPressWork=function(e){return this.callbackMap[i.Actions.BLOCKED_TAB.getName()](),e.preventDefault(),!1},t.prototype._modifierPressWork=function(e){return this.callbackMap[i.Actions.MODIFIER_DOWN.getName()](new s(e))},t}(i)},38750:(e,t,r)=>{var i,s,n,o,a,l,u,d,c;d=r(72555),o=r(67294),n=r(45697),c=r(96486),l=r(18205),s=r(32350),i=r(57361),u=r(32574),e.exports=a=d({displayName:"TooltipContainerRC",propTypes:{additionalClassName:n.string,additionalContainerClassName:n.string,rootElement:n.object},_SHOW_TIMEOUT_ID:null,_REMOVE_TIMEOUT_ID:null,statics:{TIMEOUT_DURATION:500,defaultProps:{rootElement:document.body}},getInitialState:function(){return{text:null}},componentDidMount:function(){return this.props.rootElement.addEventListener("mouseover",this._addTooltip),this.props.rootElement.addEventListener("mouseout",this._onTargetMouseOut),this.props.rootElement.addEventListener("click",this._onBodyClick),s.on("chrome:hide_popups",this._removeTooltip),s.on("chrome:hide_tooltip",this._removeTooltip),s.on("chrome:show_tooltip",this._showTooltip)},componentWillUnmount:function(){return this.props.rootElement.removeEventListener("mouseover",this._addTooltip),this.props.rootElement.removeEventListener("mouseout",this._onTargetMouseOut),this.props.rootElement.removeEventListener("click",this._onBodyClick),s.off("chrome:hide_popups",this._removeTooltip),s.off("chrome:hide_tooltip",this._removeTooltip),s.off("chrome:show_tooltip",this._showTooltip)},render:function(){var e,t,r,i,s,n;return c.isEmpty(this.state.text)?o.createElement("div",null):((s=this._isMultiline())?n=function(){var e,n,a,l;for(a=this.state.text,l=[],i=e=0,n=a.length;e<n;i=++e)t=a[i],r=u.classSet({"tooltip-line":!0,"tooltip-line-header":s&&i%2==0}),l.push(o.createElement("p",{key:"text"+i,className:r},t));return l}.call(this):(t=this.state.text,r=u.classSet({"tooltip-line":!0}),n=o.createElement("p",{className:r},t)),e=u.buildClassName(s?"tooltip-lines-multiline":void 0,this.props.additionalClassName),o.createElement("div",{id:"tooltip"},o.createElement(l,{targetInfo:this.targetInfo,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,additionalClassName:e,additionalContainerClassName:this.props.additionalContainerClassName,rootElement:this.props.rootElement},n)))},_isMultiline:function(){return null!=this.state.text&&Array.isArray(this.state.text)&&this.state.text.length>1},_showTooltip:function(e,t){return this.targetInfo=t,this._removeTooltip(),this._SHOW_TIMEOUT_ID=setTimeout((r=this,function(){return r.setState({text:[e]})}),a.TIMEOUT_DURATION);var r},_addTooltip:function(e){var t,r,s,n,o,l;if(null!=(n=e.target.closest("[data-tooltip]"))&&(this.targetInfo=this._makeTargetInfo(n),this._removeTooltip(),"boolean"==typeof(o=n.getAttribute("data-tooltip")?i.parseJSON(n.getAttribute("data-tooltip")):void 0)||o)){if(Array.isArray(o)||(o=String(o)),l=this,s=function(){return l._SHOW_TIMEOUT_ID=setTimeout((function(){if(n.offsetWidth>0||n.offsetHeight>0)return l.setState({text:o})}),a.TIMEOUT_DURATION)},!(null!=n.getAttribute("data-tooltip-on-truncation")))return s();if((r=n.offsetWidth<n.scrollWidth||n.offsetHeight<n.scrollHeight)||1===n.childNodes.length&&n.childNodes[0].nodeType===Node.TEXT_NODE&&((t=document.createRange()).selectNode(n.childNodes[0]),r=n.getBoundingClientRect().width<t.getBoundingClientRect().width),r)return s()}},_removeTooltip:function(e){return null==e&&(e=!1),clearTimeout(this._SHOW_TIMEOUT_ID),clearTimeout(this._REMOVE_TIMEOUT_ID),e?this._REMOVE_TIMEOUT_ID=setTimeout((t=this,function(){return t.setState({text:null})}),a.TIMEOUT_DURATION):this.setState({text:null});var t},_makeTargetInfo:function(e){var t;return t=e.getBoundingClientRect(),{outerWidth:e.offsetWidth,outerHeight:e.offsetHeight,top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}},_onTargetMouseOut:function(e){if(null!=e.target.closest("[data-tooltip]"))return this._removeTooltip(this._isMultiline())},_onMouseEnter:function(){return clearTimeout(this._REMOVE_TIMEOUT_ID)},_onMouseLeave:function(){return this._removeTooltip()},_onBodyClick:function(e){if(e.currentTarget.matches("[data-tooltip]"))return this._removeTooltip()}})},18205:(e,t,r)=>{var i,s,n,o;o=r(72555),i=r(45697),s=r(67294),n=r(32574),e.exports=o({displayName:"TooltipRC",propTypes:{targetInfo:i.shape({outerWidth:i.number.isRequired,outerHeight:i.number.isRequired,top:i.number.isRequired,left:i.number.isRequired}).isRequired,children:i.node.isRequired,onMouseEnter:i.func,onMouseLeave:i.func,additionalClassName:i.string,additionalContainerClassName:i.string,rootElement:i.object},getInitialState:function(){return{top:0,left:0,arrowLeft:0,isOverflowingBottom:!1}},componentDidMount:function(){var e,t,r,i,s,n,o,a,l,u,d,c,h,p;return n=this.refs.container,e=this.refs.arrow,s=(u=this.props.rootElement).offsetWidth,h=n.offsetWidth,c=n.offsetHeight,t=e.offsetHeight+7,r=(d=u.getBoundingClientRect()).left+u.scrollLeft,i=d.top+u.scrollTop,a=(l=this.props.targetInfo.left-r+this.props.targetInfo.outerWidth/2-h/2)<0?0:l>s-h-20?s-h-10:l,(o=(p=this.props.targetInfo.top-i+this.props.targetInfo.outerHeight+t/2)>u.offsetHeight-c-t)&&(p=this.props.targetInfo.top-c-t/2-d.top),this.setState({top:p,left:a,arrowLeft:h/2,isOverflowingBottom:o})},render:function(){var e,t,r,i,o;return t={left:this.state.arrowLeft},o={left:this.state.left,top:this.state.top},r=n.buildClassName("tooltip-lines",this.state.isOverflowingBottom?"tooltip-bottom":void 0,this.props.additionalClassName),e=n.buildClassName(this.state.isOverflowingBottom?"tooltip-arrow-down":"tooltip-arrow"),i=n.buildClassName("tooltip-container",this.props.additionalContainerClassName),s.createElement("div",{ref:"container",role:"tooltip",className:i,style:o,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave},s.createElement("i",{ref:"arrow",className:e,style:t}),s.createElement("div",{className:r},this.props.children))}})},8902:(e,t,r)=>{var i,s,n,o,a;a=r(72555),s=r(45697),n=r(67294),o=r(32574),i=r(16582),e.exports=a({displayName:"IconRC",propTypes:{iconName:s.string.isRequired,iconHref:s.string,additionalClassName:s.string,viewBox:s.string,style:s.object,tooltip:s.oneOfType([s.string,s.array]),onclick:s.func,focusable:s.bool},getDefaultProps:function(){return{iconHref:i,tooltip:""}},render:function(){var e,t;return this.props.iconName&&""!==this.props.iconName.trim()?(t=this.props.iconHref+"#"+this.props.iconName,this.props.onclick||this.props.tooltip?(e=o.buildClassName("svgwrapper",this.props.additionalClassName),n.createElement("div",{className:e,style:this.props.style,onClick:this.props.onclick,"data-tooltip":JSON.stringify(this.props.tooltip)},n.createElement("svg",{className:"icon",name:this.props.iconName,key:this.props.iconName,viewBox:this.props.viewBox,focusable:this.props.focusable},n.createElement("use",{"data-href":t})))):(e=o.buildClassName("icon",this.props.additionalClassName),n.createElement("svg",{className:e,name:this.props.iconName,key:this.props.iconName,viewBox:this.props.viewBox,style:this.props.style,focusable:this.props.focusable},n.createElement("use",{"data-href":t})))):n.createElement("svg",null)}})},53373:(e,t,r)=>{var i,s;i=r(49720),s=r(8429).Z,e.exports=function(){function e(){this.hotkeyMap={},this.initializeHotkeyMap()}return e.MODIFIER_NONE="none",e.MODIFIER_ALT="alt",e.MODIFIER_CTRL="ctrl",e.MODIFIER_SHIFT="shift",e.MODIFIER_META="meta",e.prototype._enabled=!0,e.prototype.initializeHotkeyMap=function(){return this.hotkeyMap[e.MODIFIER_NONE]={},this.hotkeyMap[e.MODIFIER_ALT]={},this.hotkeyMap[e.MODIFIER_CTRL]={},this.hotkeyMap[e.MODIFIER_SHIFT]={},this.hotkeyMap[e.MODIFIER_META]={}},e.prototype.registerKey=function(t){var r,s,n,o;if(s=t.charKey,o=t.modifier,r=t.callback,n=t.keyCode,o||(o=e.MODIFIER_NONE),!s&&!n||!r)throw Error("empty function params, can't register key");if(s&&n)throw Error("can only support one of charKey and keyCode");if(n||(n=i.toKeyCode(s)),this.hotkeyMap[o][n])throw Error("keyCode "+n+" with modifier "+o+" already registered to this view");return this.hotkeyMap[o][n]=r},e.prototype.unregisterKey=function(t){var r,s,n;if(r=t.charKey,n=t.modifier,s=t.keyCode,!r&&!s)throw Error("empty function param, can't unregister key");if(r&&s)throw Error("can only support one of charKey and keyCode");if(n||(n=e.MODIFIER_NONE),s||(s=i.toKeyCode(r)),this.hotkeyMap[n][s])return delete this.hotkeyMap[n][s]},e.prototype.unregisterAll=function(){return this.hotkeyMap={},this.initializeHotkeyMap()},e.prototype.fire=function(e){var t;if(t=this._getModifierKey(e),this._enabled&&this.hotkeyMap[t][e.keyCode])return this.hotkeyMap[t][e.keyCode](e)},e.prototype._getModifierKey=function(t){return t.altKey?e.MODIFIER_ALT:t.ctrlKey?e.MODIFIER_CTRL:t.shiftKey?e.MODIFIER_SHIFT:t.metaKey?e.MODIFIER_META:e.MODIFIER_NONE},e.prototype.setEnabled=function(e){this._enabled=e},e.getHotkeyLabel=function(e){return s.getLabel("HotkeyManager","hotkeyLabel",e)},e}()},70211:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b;c=r(94036).Z,h=r(41553).Z,m=r(72555),u=r(45697),d=r(67294),b=r(96486),g=b.bind,_=b.indexOf,f=b.isEmpty,a=r(85600),n=r(68653),r(5893),i=r(26374).Z,s=r(96619).Z,o=r(53373),p=r(32574),l=r(8429).Z,y=r(30077).isOrIn,r(16279),e.exports=m({displayName:"ActionBarRC",mixins:[a],propTypes:{actions:u.oneOfType([u.arrayOf(u.instanceOf(i)),u.arrayOf(u.arrayOf(u.instanceOf(i)))]).isRequired,toggledActionIds:u.arrayOf(u.string),onClick:u.func.isRequired,hotkeyManager:u.instanceOf(o),additionalClassName:u.string,shouldRenderSLDSActionBar:u.bool,alignOfSLDSDropdown:u.oneOf(["left","right"])},getInitialState:function(){return{actionMenu:void 0}},UNSAFE_componentWillMount:function(){return this._actionsMap=this._mapActions(),this._mapHotKeys()},getDefaultProps:function(){return{renderSLDSActionBar:!1}},UNSAFE_componentWillReceiveProps:function(e){return this._actionsMap=this._mapActions(e),this._remapHotKeys(e)},componentWillUnmount:function(){return this._unmapHotKeys()},render:function(){var e,t,r,s,o,a;return e=function(){var e,t,r,n;if(this.props.actions[0]instanceof i)return this._renderActionBar(this.props.actions,0);for(r=this.props.actions,n=[],o=e=0,t=r.length;e<t;o=++e)s=r[o],n.push(this._renderActionBar(s,o));return n}.call(this),t=null!=this.state.actionMenu?(a=function(){var e,t,i,s;for(s=[],e=0,t=(i=this.state.actionMenu.getActions()).length;e<t;e++)r=i[e],s.push(r.makeMenuItem());return s}.call(this),d.createElement(n,{onClick:this._onMenuClick,onBlur:this._onMenuBlur,items:a,getTargetEl:this._getActionMenuEl,anchorPosition:this.state.actionMenu.getMenuAnchorPosition(),additionalClassName:this.state.actionMenu.getId()+"Dropdown"})):void 0,d.createElement("div",{className:"action-bars"},e,t)},_renderActionBar:function(e,t){var r,i,n,o,a,l,u,h,m,f;for(r=[],u=[],m=0,f=e.length;m<f;m++)o=e[m],this.props.shouldRenderSLDSActionBar&&o.useSLDS()?u.push(this._renderSLDSAction(o)):(l=o instanceof s?this._toggleMenu:this.props.onClick,a=o.render(-1!==_(this.props.toggledActionIds,o.getId())||o===this.state.actionMenu,g(l,this,o,!1)),r.push(a));return n=p.buildClassName("action-bar",this.props.additionalClassName),r.length>0&&(i=d.createElement("div",{className:n},r)),u.length>0&&(h=d.createElement(c,{className:"actionBarButtonGroup"},u)),d.createElement("div",{key:t,className:"slds-m-left--xx-small"},i,h)},_getActionMenuEl:function(){return this.getRef$(this.state.actionMenu.getId())},_mapActions:function(e){var t,r,i,s,n,o,a,l;for(null==e&&(e=this.props),t={},i=0,n=(a=this._flattenActions(e.actions)).length;i<n;i++)for(s=0,o=(l=a[i].getActions()).length;s<o;s++){if(null!=t[(r=l[s]).getId()])throw new Error("Action with duplicate id '"+r.getId()+"'.");t[r.getId()]=r}return t},_mapHotKeys:function(e){var t,r,i,s,n,o,a;if(null==e&&(e=this.props),e.hotkeyManager){for(this._registeredKeys=[],this._hotkeyManager=e.hotkeyManager,a=[],s=0,n=(o=this._flattenActions(e.actions)).length;s<n;s++)t=o[s],a.push(function(){var s,n,o,a;for(a=[],s=0,n=(o=t.getActions()).length;s<n;s++)r=o[s],f(r.getHotkeys())||a.push(function(){var t,s,n,o;for(o=[],t=0,s=(n=r.getHotkeys()).length;t<s;t++)i=n[t],e.hotkeyManager.registerKey({charKey:i.charKey,modifier:i.modifier,callback:g(this._onKeyDown,this,r)}),o.push(this._registeredKeys.push({charKey:i.charKey,modifier:i.modifier}));return o}.call(this));return a}.call(this));return a}},_unmapHotKeys:function(e){var t,r,i,s;if(null==e&&(e=this.props),null!=this._registeredKeys)for(r=0,i=(s=this._registeredKeys).length;r<i;r++)t=s[r],this._hotkeyManager.unregisterKey({charKey:t.charKey,modifier:t.modifier});return this._registeredKeys=void 0,this._hotkeyManager=void 0},_flattenActions:function(e){return e[0]instanceof i?e:Array.prototype.concat.apply([],e)},_remapHotKeys:function(e){return this._unmapHotKeys(e),this._mapHotKeys(e)},_onKeyDown:function(e,t){null!=e&&(e instanceof s?this._toggleMenu(e):(this.props.onClick(e,!0),e.preventDefaultForHotkey()&&t.preventDefault()))},_onMenuClick:function(e){return this.props.onClick(this._actionsMap[e.getId()],!1),this.setState({actionMenu:void 0})},_onMenuBlur:function(e){y(this._getActionMenuEl(),e.target)||this.setState({actionMenu:void 0})},_toggleMenu:function(e){return e===this.state.actionMenu&&(e=void 0),this.setState({actionMenu:e})},_renderSLDSAction:function(e){var t,r,i,n,o;return e instanceof s?(n=function(){var r,i,s,n;for(n=[],r=0,i=(s=e.getActions()).length;r<i;r++)t=s[r],n.push({label:t.getLabel(),value:t,disabled:"function"==typeof t.getDisabled?t.getDisabled():void 0,className:p.buildClassName("actionBarButtonGroup-action-item item","report-action-"+t.getId(),("function"==typeof t.getDisabled?t.getDisabled():void 0)?"disabled":void 0)});return n}(),r=function(e){var t;return e.data,t=e.label,d.createElement("span",null,t)},o=this,i=function(e){if(!e.disabled)return o.props.onClick(e.value)},d.createElement(h,{key:e.getId(),options:n,buttonVariant:"icon",iconCategory:"utility",iconName:"down",iconVariant:"border",listItemRenderer:r,openOn:"click",onSelect:i,align:this.props.alignOfSLDSDropdown,width:"xx-small",assistiveText:{icon:l.getLabel("ActionBarAssistiveText","moreActions")},length:"10",className:"more-dropdown",buttonClassName:"more-actions-button",disabled:e.getDisabled()})):e.render(-1!==_(this.props.toggledActionIds,e.getId()),g(this.props.onClick,this,e),!0)}})},60906:(e,t,r)=>{var i,s,n,o;o=r(72555),i=r(45697),s=r(67294),n=r(32574),e.exports=o({displayName:"ButtonGroupRC",propTypes:{className:i.string,canClickButton:i.func,shouldReset:i.bool,defaultIndex:i.number},getDefaultProps:function(){return{defaultIndex:0,shouldReset:!0}},getInitialState:function(){return{selectedIndex:this.props.defaultIndex}},componentDidUpdate:function(){if(this.props.shouldReset&&this.state.selectedIndex!==this.props.defaultIndex)return this.setState({selectedIndex:this.props.defaultIndex})},render:function(){var e,t,r,i,o,a,l;return t=function(){var t,r,u,d;for(u=s.Children.toArray(this.props.children),d=[],a=t=0,r=u.length;t<r;a=++t)o=u[a],l=this._onClick.bind(this,a,o),e={active:this.state.selectedIndex===a,"style-guide":!0},i=n.buildClassName(n.classSet(e),o.props.className),d.push(s.cloneElement(o,{onClick:l,className:i}));return d}.call(this),r={"button-group":!0,"style-guide":!0},i=n.buildClassName(n.classSet(r),this.props.className),s.createElement("div",{className:i},t)},_onClick:function(e,t,r){var i;if("function"==typeof(i=this.props).canClickButton?i.canClickButton(e):void 0)return t.props.onClick(e,r),this.setState({selectedIndex:e})}})},5893:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty,d=function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};o=r(67294),l=r(96486),a=r(50130).Z,s=r(78978),n=r(8902),e.exports=i={},i.Item=function(){function e(e,t,r,i,s,n,o,a,l){this._type=e,this._id=t,this._label=r,this._iconName=i,this._tooltip=s,this._isDisabled=null!=n&&n,this._subMenuItems=null!=o?o:[],this._subLabel=a,this._additionalClassName=(null!=l?l:{}).additionalClassName}return e.newItem=function(e,t,r,s,n,o,a,l){return null==l&&(l={}),new i.Item(i.ItemType.ITEM,e,t,r,s,n,o,a,l)},e.newSeparator=function(e){return new i.Item(i.ItemType.SEPARATOR,e)},e.prototype.getType=function(){return this._type},e.prototype.getSubMenuItems=function(){return this._subMenuItems},e.prototype.getId=function(){return this._id},e.prototype.getLabel=function(){return this._label},e.prototype.getTooltip=function(){return this._tooltip},e.prototype.getIconName=function(){return this._iconName},e.prototype.isDisabled=function(){return this._isDisabled},e.prototype.getAdditionalClassName=function(){return this._additionalClassName},e.prototype.getIconComp=function(e){var t;return t=null!=this.getIconName()?e?o.createElement(a,{category:"utility",assistiveText:{icon:this.getIconName()},size:"xx-small",name:this.getIconName(),style:{height:"1rem",width:"1rem"}}):o.createElement(n,{iconName:this.getIconName()}):void 0,o.createElement("div",{key:"icon",className:"iconWrapper mainIcon"},t)},e.prototype.getLabelComp=function(){var e,t;return t=null!=this._subLabel?o.createElement("div",{key:"sub-label",className:"sub-label"},this._subLabel):void 0,e=o.createElement("div",{key:"label",className:"label-container"},o.createElement("div",{key:"label",className:"label"},this.getLabel()),t),l.isEmpty(this.getSubMenuItems())?e:[e,o.createElement("div",{key:"righticon",className:"rightIconWrapper"},o.createElement(n,{iconName:"right"}))]},e.prototype.render=function(){return this.getType().render(this)},e.prototype.canClick=function(){return this.getType().canClick(this)},e}(),i.ItemType=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.render=function(e){return this._value.render(e)},t.prototype.canClick=function(e){return this._value.canClick(e)},t}(s),i.ItemType.build(i.ItemType,{ITEM:{render:function(e){return[e.getIconComp(),e.getLabelComp()]},canClick:function(e){return!e.isDisabled()}},SEPARATOR:{render:function(){return o.createElement("div",{className:"separator"})},canClick:function(e){return!1}}}),i.AnchorPosition=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.getClassName=function(){return this.getValue()},t}(s),i.AnchorPosition.build(i.AnchorPosition,{AUTOMATIC:void 0,LEFT:"anchor-left",CENTER:"anchor-center",RIGHT:"anchor-right"}),i.MenuPosition=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return d(t,e),t.prototype.isVertical=function(){return this._value.isVertical},t.prototype.getClassName=function(){return this._value.className},t}(s),i.MenuPosition.build(i.MenuPosition,{ABOVE:{isVertical:!1,className:"menu-above"},BELOW:{isVertical:!1,className:"menu-below"},LEFT:{isVertical:!0,className:"menu-left"},RIGHT:{isVertical:!0,className:"menu-right"}})},68653:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b;y=r(96486),_=y.isEmpty,f=y.partial,g=y.bind,m=r(72555),h=r(67294),c=r(45697),p=r(32574),o=r(85600),n=r(62490),i=r(5893),b=r(49720),d=b.KEY_CODE_UP,a=b.KEY_CODE_DOWN,l=b.KEY_CODE_ENTER,u=b.KEY_CODE_TAB,r(29122),e.exports=s=m({displayName:"DropDownMenuRC",mixins:[o],propTypes:{onClick:c.func,onDragStart:c.func,onBlur:c.func.isRequired,blurOnScroll:c.bool,items:c.arrayOf(c.instanceOf(i.Item)).isRequired,additionalClassName:c.string,getTargetEl:c.func.isRequired,menuPosition:c.instanceOf(i.MenuPosition),anchorPosition:c.instanceOf(i.AnchorPosition),additionalContainerClassName:c.string,additionalMenuHeaderComp:c.node,additionalMenuFooterComp:c.node,showArrow:c.bool,allowAnchorCenter:c.bool},getDefaultProps:function(){return{menuPosition:i.MenuPosition.BELOW,anchorPosition:i.AnchorPosition.AUTOMATIC,blurOnScroll:!1,showArrow:!0,allowAnchorCenter:!0}},getInitialState:function(){return{hoveredItemId:void 0,dropdownItemsRef:h.createRef(),focusedItemIndex:0}},componentDidMount:function(){var e;if(this.state.dropdownItemsRef.current)return null!=(e=this.state.dropdownItemsRef.current.querySelector(".item"))?e.focus():void 0},render:function(){var e,t,r,s,o,c,m,_,y,b,C,E;return _=function(){var n,a,d,_;for(d=this.props.items,_=[],m=n=0,a=d.length;n<a;m=++n)t=d[m],r=null!=this.props.onClick&&t.canClick()?g(this.props.onClick,this,t):void 0,E=this,b=function(e,t,r){if(r.keyCode===l&&null!=E.props.onClick&&t.canClick()&&E.props.onClick(t),r.keyCode===u&&e===E.props.items.length-1)return E.props.onBlur()},(o=null!=this.props.onDragStart)&&(s=this.props.onDragStart.bind(this,t)),y={item:!0,disabled:t.isDisabled(),hover:t.getId()===this.state.hoveredItemId&&t.getType()!==i.ItemType.SEPARATOR},e=p.buildClassName(p.classSet(y),t.getId(),t.getAdditionalClassName()),c=this._getDropdownSubmenu(t),_.push(h.createElement("div",{name:t.getId(),key:t.getId(),ref:t.getId(),className:"item-container",onMouseEnter:f(this._onMouseOverItem,t.getId()),onMouseLeave:this._onMouseLeaveItem},h.createElement("div",{className:e,"data-tooltip":t.getTooltip(),onClick:r,draggable:o,onDragStart:s,tabIndex:"0",onKeyDown:f(b,m,t)},t.render()),c));return _}.call(this),E=this,C=function(e){var t,r,i,s;if(E.state.dropdownItemsRef.current)switch(s=(t=E.state.dropdownItemsRef.current.querySelectorAll(".item")).length,r=E.state.focusedItemIndex,e.keyCode){case a:return i=r>=s-1?0:r+1,E.setState({focusedItemIndex:i}),t[i].focus();case d:return i=0===r?s-1:r-1,E.setState({focusedItemIndex:i}),t[i].focus()}},h.createElement(n,{onBlur:this.props.onBlur,blurOnScroll:this.props.blurOnScroll,additionalClassName:p.buildClassName("drop-down-menu",this.props.additionalClassName),additionalContainerClassName:p.buildClassName("drop-down-menu-container",this.props.additionalContainerClassName),menuPosition:this.props.menuPosition,anchorPosition:this.props.anchorPosition,getTargetEl:this.props.getTargetEl,showArrow:this.props.showArrow,allowAnchorCenter:this.props.allowAnchorCenter},this.props.additionalMenuHeaderComp,h.createElement("div",{ref:this.state.dropdownItemsRef,className:"drop-down-items-container",onKeyDown:C},_),this.props.additionalMenuFooterComp)},_getDropdownSubmenu:function(e){if(!_(e.getSubMenuItems())&&this.state.hoveredItemId===e.getId()&&!e.isDisabled())return h.createElement(s,{key:"subMenu",items:e.getSubMenuItems(),onClick:this.props.onClick,onBlur:this.props.onBlur,menuPosition:i.MenuPosition.RIGHT,getTargetEl:f(this._getListElem$,e.getId()),additionalClassName:"sub-menu",additionalContainerClassName:"sub-menu-container",showArrow:this.props.showArrow,allowAnchorCenter:!1})},_onMouseOverItem:function(e){return this.setState({hoveredItemId:e})},_onMouseLeaveItem:function(){return this.setState({hoveredItemId:void 0})},_getListElem$:function(e){return this.getRef$(e)}})},62490:(e,t,r)=>{var i,s,n,o,a,l,u,d,c;i=r(70351),d=r(72555),a=r(67294),o=r(45697),l=r(73935),n=r(85600),u=r(32574),s=r(5893),c=r(30077).isOrIn,r(68746),e.exports=d({displayName:"DropDownRC",mixins:[n],propTypes:{onBlur:o.func.isRequired,getTargetEl:o.func.isRequired,menuPosition:o.instanceOf(s.MenuPosition),anchorPosition:o.instanceOf(s.AnchorPosition),blurOnScroll:o.bool,blurOnResize:o.bool,additionalContainerClassName:o.string,additionalClassName:o.string,showArrow:o.bool,allowAnchorCenter:o.bool},getDefaultProps:function(){return{menuPosition:s.MenuPosition.BELOW,anchorPosition:s.AnchorPosition.CENTER,blurOnScroll:!1,blurOnResize:!1,additionalContainerClassName:null,additionalClassName:null,showArrow:!0,allowAnchorCenter:!0}},getInitialState:function(){return{anchorClassName:null,position:null}},componentDidMount:function(){return document.body.addEventListener("click",this._onBodyClick,!0),window.addEventListener("scroll",this._onScroll,!0),window.addEventListener("resize",this._onResize,!0),this._anchor()},componentWillUnmount:function(){return document.body.removeEventListener("click",this._onBodyClick,!0),window.removeEventListener("scroll",this._onScroll,!0),window.removeEventListener("resize",this._onResize,!0)},render:function(){var e,t,r;return t=u.buildClassName("drop-down-outer",this.props.menuPosition.getClassName(),this.props.additionalContainerClassName),e=this.props.showArrow?"drop-down-inner-arrow":void 0,r=u.buildClassName("drop-down-inner",this.props.additionalClassName,this.state.anchorClassName,e),a.createElement("div",{className:t},a.createElement("div",{ref:"inner",className:r,style:this.state.position},this.props.children))},_onBodyClick:function(e){var t;t=null!=e.composedPath?e.composedPath()[0]:e.target,c(l.findDOMNode(this),t)||this.props.onBlur(e)},_onScroll:function(e){this.props.blurOnScroll&&!c(l.findDOMNode(this),e.target)&&this.props.onBlur(e)},_onResize:function(e){this.props.blurOnResize&&this.props.onBlur(e)},_anchor:function(){var e,t,r,n,o,a,l,u,d,c,h,p,g;if(r=i(window),c=(l=this.props.getTargetEl()).jquery?l:i(l),h=c.offset(),p={width:c.outerWidth(),height:c.outerHeight()},n={height:r.height(),width:r.width()},this.props.menuPosition.isVertical()?(t=n.height,d=h.top+Math.round(p.height/2)):(t=n.width,d=h.left+Math.round(p.width/2)),e=this.props.anchorPosition===s.AnchorPosition.AUTOMATIC?d>2*(o=t/3)?s.AnchorPosition.RIGHT:d<o||!this.props.allowAnchorCenter?s.AnchorPosition.LEFT:s.AnchorPosition.CENTER:this.props.anchorPosition,u=function(){switch(this.props.menuPosition){case s.MenuPosition.ABOVE:return{top:h.top-this.getRef$("inner").outerHeight(!0)};case s.MenuPosition.BELOW:return g=h.top+p.height,(a=g+this.getRef$("inner").outerHeight(!0))>n.height&&(g-=a-n.height),{top:g};case s.MenuPosition.LEFT:return{right:n.width-h.left};case s.MenuPosition.RIGHT:return{left:h.left+p.width}}}.call(this),this.props.menuPosition.isVertical())switch(e){case s.AnchorPosition.LEFT:u.top=h.top;break;case s.AnchorPosition.CENTER:u.top=d;break;case s.AnchorPosition.RIGHT:u.bottom=n.height-h.top-p.height}else switch(e){case s.AnchorPosition.LEFT:u.left=h.left;break;case s.AnchorPosition.CENTER:u.left=d;break;case s.AnchorPosition.RIGHT:u.right=n.width-h.left-p.width}return this.setState({position:u,anchorClassName:e.getClassName()})}})},28388:(e,t,r)=>{var i,s,n,o,a;o=r(67294),i=r(8429).Z,a=r(32574),n=r(40604),s=r(76997),e.exports={makeOk:function(e,t,r,a){return null==t&&(t=1),null==r&&(r=n.Primary),o.createElement(s,{key:"ok-btn",ref:a,className:"ok-btn",title:i.getLabel("InsightsConfirmDialog","okButton"),onClick:e,tabIndex:t,buttonStyle:r})},makeCreate:function(e,t,r,a,l){return null==t&&(t=1),null==r&&(r=!1),null==a&&(a=n.Primary),o.createElement(s,{key:"create-btn",ref:l,className:"ok-btn",title:i.getLabel("InsightsConfirmDialog","createButton"),onClick:e,disabled:r,tabIndex:t,buttonStyle:n.Primary})},makeDelete:function(e,t,r,a){return null==t&&(t=1),null==r&&(r=n.Primary),o.createElement(s,{key:"delete-btn",ref:a,className:"ok-btn",title:i.getLabel("InsightsConfirmDialog","deleteButton"),onClick:e,tabIndex:t,buttonStyle:n.Primary})},makeCancel:function(e,t,r,a){return null==t&&(t=1),null==r&&(r=n.Secondary),o.createElement(s,{key:"cancel-btn",ref:a,className:"cancel-btn",title:i.getLabel("InsightsConfirmDialog","cancelButton"),onClick:e,tabIndex:t,buttonStyle:r})},makeDone:function(e,t,r,l,u,d,c){var h;return null==t&&(t=1),null==r&&(r=!1),null==l&&(l=n.Primary),null==c&&(c=!1),h=a.buildClassName("done-btn",u),o.createElement(s,{key:"done-btn",ref:d,className:h,title:i.getLabel("InsightsConfirmDialog","doneButton"),onClick:e,disabled:r,tabIndex:t,buttonStyle:l,showSpinner:c})},makeSave:function(e,t,r,l,u,d,c){var h;return null==t&&(t=1),null==r&&(r=!1),null==l&&(l=!1),null==u&&(u=n.Primary),h=a.buildClassName("ok-btn",d),o.createElement(s,{key:"save-btn",ref:c,className:h,title:i.getLabel("InsightsConfirmDialog","saveButton"),onClick:e,disabled:r,tabIndex:t,buttonStyle:u,showSpinner:l})},makeClose:function(e,t,r,l,u){var d;return null==t&&(t=1),null==r&&(r=n.Primary),d=a.buildClassName("cancel-btn",l),o.createElement(s,{key:"close-btn",ref:u,className:d,title:i.getLabel("InsightsConfirmDialog","closeButton"),onClick:e,tabIndex:t,buttonStyle:r})},makeButton:function(e,t,r,i,l,u,d,c,h){var p;return null==r&&(r=1),null==i&&(i=n.Primary),null==l&&(l="generic-btn"),null==u&&(u=!1),p=a.buildClassName("generic-btn",d),o.createElement(s,{key:l,ref:h,className:p,title:t,onClick:e,disabled:u,tabIndex:r,buttonStyle:i,tooltip:c})}}},76997:(e,t,r)=>{var i,s,n,o,a,l,u,d;d=r(72555),a=r(67294),o=r(45697),n=r(40604),l=r(50130).Z,u=r(32574),i=r(90424),s=r(23084),e.exports=d({displayName:"ModalButtonRC",propTypes:{className:o.string,title:o.string,icon:o.string,assistiveText:o.string,onClick:o.func,disabled:o.bool,tabIndex:o.number,buttonStyle:o.instanceOf(n),showSpinner:o.bool,children:o.node},getDefaultProps:function(){return{disabled:!1,buttonStyle:n.Primary,tabIndex:0}},onClick:function(e){return e.stopPropagation(),e.preventDefault(),this.props.onClick(e)},render:function(){var e,t,r,n,o;return t=u.buildClassName("style-guide",this.props.disabled?"disabled":void 0,this.props.buttonStyle.getValue(),this.props.className),r=null!=this.props.icon?a.createElement("div",{className:"svgwrapper"},a.createElement(l,{category:"utility",name:this.props.icon,size:"xx-small",assistiveText:{label:this.props.assistiveText}})):void 0,this.props.showSpinner&&(n=a.createElement(i,{type:s.BUTTON})),o=this.props.icon?a.createElement("span",null,this.props.title):this.props.title,e=a.createElement("button",{className:t,tabIndex:this.props.tabIndex,disabled:this.props.disabled,onClick:this.onClick,"data-tooltip":this.props.tooltip},r,n||o,this.props.children),this.props.disabled?a.createElement("div",{className:"buttonContainer disabled","data-tooltip":this.props.tooltip},e):a.createElement("div",null,e)}})},40604:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,{Primary:"primary",Secondary:"secondary",Error:"error",Square:"square"})},112:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(78978),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.build(t,["INSIDE","OUTSIDE","NONE"]),t}(i)},6798:(e,t,r)=>{var i,s,n,o,a,l,u;a=r(50130).Z,o=r(67294),u=r(96486),i=r(8429).Z,l=r(32574),s=r(28388),n=r(46747),e.exports=function(){function e(e){this._onBlur=e}return e.prototype.makeConfirmationModal=function(e,t,r,i){return o.createElement(n,{fullPage:!0,hasCancel:!0,onBlur:this._onBlur,buttons:r,title:this._makeWarningTitle(e),className:l.buildClassName("confirmationModal",i)},o.createElement("div",{className:"warning-text"},t))},e.prototype.makeOneButtonModal=function(e,t,r,i){return o.createElement(n,{fullPage:!0,hasCancel:!1,onBlur:this._onBlur,buttons:r,title:this._makeWarningTitle(e),className:l.buildClassName("confirmationModal",i)},o.createElement("div",{className:"warning-text"},t))},e.prototype.makeTwoButtonModal=function(e,t,r,i,s){return o.createElement(n,{fullPage:!0,hasCancel:!1,onBlur:this._onBlur,buttons:[i,r],title:this._makeWarningTitle(e),className:l.buildClassName("confirmationModal",s)},o.createElement("div",{className:"warning-text"},t))},e.prototype.makeWarningModal=function(e,t,r){return null==e&&(e=i.getLabel("InsightsConfirmDialog","warningTitle")),o.createElement(n,{fullPage:!0,buttons:s.makeOk(u.bind(this._onBlur,this)),title:this._makeWarningTitle(e),className:l.buildClassName("warningModal",r)},o.createElement("div",{className:"warning-text"},t))},e.prototype._makeWarningTitle=function(e){return o.createElement("span",{className:"modal-warning-title"},o.createElement(a,{category:"utility",name:"warning",size:"x-small",className:"titleIcon"}),o.createElement("span",{className:"warningTitle"},e))},e}()},46747:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h;c=r(72555),u=r(67294),l=r(45697),d=r(32574),s=r(85600),r(76997),o=r(28388),a=r(112),i=r(8902),h=r(30077).isOrIn,n=r(8429).Z,e.exports=c({displayName:"ModalRC",mixins:[s],propTypes:{fullPage:l.bool,onBlur:l.func,closeOnBlur:l.bool,title:l.node,buttons:l.node,includeBorder:l.bool,className:l.string,hasCancel:l.bool,closeButtonPosition:l.instanceOf(a),showHeader:l.bool,helpUrl:l.string},getDefaultProps:function(){return{fullPage:!1,includeBorder:!1,closeOnBlur:!0,showHeader:!0}},render:function(){var e,t,r,s,l,c,h,p;switch(c=d.classSet({sg:!0,"modal-lightbox":!0,"full-page":this.props.fullPage}),h=d.buildClassName("modal","fade-modal-ani",this.props.className),e=d.classSet({"modal-body":!0,multiple:this.props.includeBorder}),this.props.hasCancel&&(t=o.makeCancel(this.props.onBlur)),this.props.closeButtonPosition){case a.OUTSIDE:p=u.createElement("div",{className:"modal-button-container"},u.createElement("button",{className:"modal-close",onClick:this.props.onBlur,tabIndex:"0"},u.createElement(i,{iconName:"close",tooltip:n.getLabel("Modal","closeTooltip")})));break;case a.INSIDE:l=u.createElement("button",{className:"modal-close",onClick:this.props.onBlur,tabIndex:"0"},u.createElement(i,{iconName:"close",tooltip:n.getLabel("Modal","closeTooltip")}))}return s=null!=this.props.helpUrl?u.createElement("a",{href:this.props.helpUrl,target:"_blank",className:"modal-help"},u.createElement(i,{iconName:"help",tooltip:n.getLabel("Modal","helpTooltip")})):void 0,r=this.props.showHeader?u.createElement("div",{className:"modal-header"},u.createElement("div",{className:"modal-title"},this.props.title),s,l):void 0,u.createElement("div",{className:c},u.createElement("div",{className:h,ref:"modal"},p,r,u.createElement("div",{className:e},this.props.children),u.createElement("div",{className:"modal-footer"},t,this.props.buttons)))},componentDidMount:function(){return document.body.addEventListener("click",this._onBodyClick,!0)},componentWillUnmount:function(){return document.body.removeEventListener("click",this._onBodyClick,!0)},_onBodyClick:function(e){if(this.props.closeOnBlur&&null!=this.props.onBlur&&!h(this.getRef$("modal"),e.target))return this.props.onBlur()}})},15422:e=>{e.exports=function(e){var t,r,i,s,n,o,a,l;i=e.icon,l=e.title,t=e.className,n=e.link,o=e.linkType,s=e.id,a=e.showExperiencePopover,r=e.hasDropdown,this.icon=i,this.title=l,this.className=t,this.link=n,this.linkType=o,this.id=s,this.showExperiencePopover=a,this.hasDropdown=r}},8666:(e,t,r)=>{var i,s,n,o,a,l;o=r(85931).Z,l=r(72555),s=r(45697),n=r(67294),r(96486),a=r(61506).Z,i=r(27994),e.exports=l({displayName:"LightningModalRC",propTypes:{maskHeader:s.bool},getDefaultProps:function(){return{maskHeader:!0}},UNSAFE_componentWillReceiveProps:function(e){if(e.isOpen!==this.props.isOpen)return this._maskHeader(e.isOpen)},componentDidMount:function(){return this._maskHeader(this.props.isOpen)},componentWillUnmount:function(){return this._maskHeader(!1)},render:function(){return n.createElement(o,this.props)},_maskHeader:function(e){if(this.props.maskHeader&&!window.testMode)return a.get(i).maskHeader(e)}})},47134:(e,t,r)=>{var i,s,n,o;n=r(50130).Z,o=r(72555),s=r(67294),i=r(45697),e.exports=o({displayName:"PicklistItemRendererRC",propTypes:{isSelected:i.bool,label:i.string},getDefaultProps:function(){return{isSelected:!1,label:""}},render:function(){return this.props.isSelected?s.createElement("span",{className:"slds-truncate"},s.createElement(n,{className:"slds-icon-text-default slds-icon_selected slds-m-right_x-small",size:"x-small",category:"utility",name:"check"}),s.createElement("span",{className:"picklistLabel"},this.props.label)):s.createElement("span",{className:"slds-truncate slds-p-left_large picklistLabel"},this.props.label)}})},18111:(e,t,r)=>{var i;i=r(27223),e.exports=function(){function e(){}return e.prototype.isCmsMode=function(){return!0},e.prototype.getAppUser=function(){return i.checkImplemented()},e.prototype.getBrowserName=function(){return i.checkImplemented()},e.prototype.getBrowserVersion=function(){return i.checkImplemented()},e.prototype.isMobileBrowser=function(){return i.checkImplemented()},e.prototype.getCommunityId=function(){return i.checkImplemented()},e.prototype.hasPermission=function(e){return i.checkImplemented()},e.prototype.getDatasetDefaultGroupQueryLimit=function(){return i.checkImplemented()},e.prototype.getDatasetDefaultValuesQueryLimit=function(){return i.checkImplemented()},e.prototype.getSelectorQueryLimit=function(){return i.checkImplemented()},e.prototype.getExternalLinkQueryLimit=function(){return i.checkImplemented()},e.prototype.getDirectQueryLimit=function(){return i.checkImplemented()},e.prototype.getDatasetDefaultMaxQueryLimit=function(){return i.checkImplemented()},e.prototype.getCrossOrigins=function(){return i.checkImplemented()},e.prototype.getDocumentIdUrl=function(){return i.checkImplemented()},e.prototype.getRoutingRootPath=function(){return i.checkImplemented()},e.prototype.getSanitizedInitialRoute=function(){return i.checkImplemented()},e.prototype.getInitialRouteError=function(){return i.checkImplemented()},e.prototype.getImageUrl=function(){return i.checkImplemented()},e.prototype.getValidImageUrlDomains=function(){return i.checkImplemented()},e.prototype.getSLDSIconsPath=function(){return i.checkImplemented()},e.prototype.getEclairNGIconsPath=function(){return i.checkImplemented()},e.prototype.getAppRoot=function(){return i.checkImplemented()},e.prototype.getResourcePath=function(e){return i.checkImplemented()},e.prototype.getWaveChartsResourcesPath=function(){return i.checkImplemented()},e.prototype.getFinderLeftNavLinks=function(){return i.checkImplemented()},e.prototype.getSystemMessages=function(){return i.checkImplemented()},e.prototype.getHelpArticleUrl=function(e){return i.checkImplemented()},e.prototype.getDeveloperGuideTopicUrl=function(e,t){return i.checkImplemented()},e.prototype.getSessionId=function(){return i.checkImplemented()},e.prototype.getCsrfToken=function(){return i.checkImplemented()},e.prototype.getCryptoKey=function(){return i.checkImplemented()},e.prototype.getMaxParallelRequests=function(){return i.checkImplemented()},e.prototype.getMaxParallelRequestsForHighConcurrency=function(){return i.checkImplemented()},e.prototype.getTrialDaysLeft=function(){return i.checkImplemented()},e.prototype.getTrialUrl=function(){return i.checkImplemented()},e.prototype.isInCommunityContext=function(){return!1},e.prototype.isOnConsole=function(){return i.checkImplemented()},e.prototype.getGates=function(){return{}},e.prototype.isAnalyticsStudioAvailable=function(){return i.checkImplemented()},e.prototype.isCdnEnabled=function(){return i.checkImplemented()},e.prototype.isPerfMode=function(){return i.checkImplemented()},e.prototype.getMaxLogLineBatchSize=function(){return i.checkImplemented()},e.prototype.getLogLineFlushTimeout=function(){return i.checkImplemented()},e.prototype.getReleaseNotes=function(){return i.checkImplemented()},e.prototype.getContinueLearning=function(){return i.checkImplemented()},e.prototype.getGettingStarted=function(){return i.checkImplemented()},e.prototype.getFormattedQueryServletUrl=function(){return i.checkImplemented()},e.prototype.getUserMenuItems=function(){return i.checkImplemented()},e.prototype.getSecondaryLinks=function(){return i.checkImplemented()},e.prototype.getSecondaryMenuItems=function(){return i.checkImplemented()},e.prototype.getHelpMenuItems=function(){return i.checkImplemented()},e.prototype.getMaxEdiRows=function(){return i.checkImplemented()},e.prototype.getMinEdiRows=function(){return i.checkImplemented()},e.prototype.getMaxEdiColumns=function(){return i.checkImplemented()},e.prototype.getMinEdiColumns=function(){return i.checkImplemented()},e.prototype.getRowLevelFormulaLimit=function(){return i.checkImplemented()},e.prototype.isStoriesDirectEnabled=function(){return i.checkImplemented()},e.prototype.getOptMaxDecisionValues=function(){return i.checkImplemented()},e.prototype.getOrgNamespace=function(){return i.checkImplemented()},e.prototype.getOrgId=function(){return i.checkImplemented()},e.prototype.getStaticResourcesPath=function(){return i.checkImplemented()({getSlowNetworkThreshold:function(){}}),i.checkImplemented()},e.prototype.getSlowQueryThreshold=function(){return i.checkImplemented()},e.prototype.getNetworkSpeedAssetSize=function(){return i.checkImplemented()},e.prototype.getLightningDashboardsAssetsPath=function(){return i.checkImplemented()},e.prototype.getDefaultQueryCacheTTLInSeconds=function(){return i.checkImplemented()},e.prototype.getExcelDownloadCellLimit=function(){return i.checkImplemented()},e}()},32350:(e,t,r)=>{var i,s;i=r(45810).Z,s=function(){Object.assign(this,i)},e.exports=new s},63038:(e,t,r)=>{var i,s,n,o,a,l,u,d,c;d=r(72555),r(67294),a=r(45697),l=r(73935),c=r(96486),u=r(61506).Z,i=r(16045).Z,s=r(53524).Z,n=r(67710).Z,o=r(54772).Z,e.exports=d({displayName:"BuoyRC",propTypes:{name:a.string.isRequired,children:a.element.isRequired,level:a.instanceOf(n),isRendered:a.bool},getDefaultProps:function(){return{level:n.Simple}},UNSAFE_componentWillMount:function(){if(this._instanceId=c.uniqueId("buoyComponent"),this.props.level===n.FullWithPerf)return this._triggerComponentRipple(o.StartRender)},componentDidMount:function(){if(this._triggerComponentRipple(o.Mount),this.props.level!==n.Simple&&l.findDOMNode(this).addEventListener("click",this._onClickForBuoy),this.props.level===n.FullWithPerf&&!1!==this.props.isRendered)return c.defer(this._triggerComponentRipple.bind(this,o.FinishRender))},UNSAFE_componentWillUpdate:function(){if(this.props.level===n.FullWithPerf&&null==this.props.isRendered)return this._triggerComponentRipple(o.StartRender)},componentDidUpdate:function(e){if(this.props.level===n.FullWithPerf)return null==this.props.isRendered||this.props.isRendered&&!e.isRendered?c.defer(this._triggerComponentRipple.bind(this,o.FinishRender)):!this.props.isRendered&&e.isRendered?this._triggerComponentRipple(o.StartRender):void 0},componentWillUnmount:function(){if(this.props.level!==n.Simple&&l.findDOMNode(this).removeEventListener("click",this._onClickForBuoy),this.props.level!==n.Simple)return this._triggerComponentRipple(o.Unmount)},render:function(){return this.props.children},_onClickForBuoy:function(){this._triggerComponentRipple(o.Click)},_triggerComponentRipple:function(e){return u.get(i).trigger(new s(void 0,this.props.name,this._instanceId,this.props.level,e))}})},60745:(e,t,r)=>{var i,s;s=r(96486),i=r(10683),e.exports=function(){function e(e,t){var r,s;this._metadata=e,this._api=t,this._metadata.fields&&(r=this._metadata.fields.map((s=this,function(e){return new i(e,s._api)})),this._fields=Promise.resolve(r))}return e.prototype.getName=function(){return this._metadata.name},e.prototype.getNamespace=function(){return this._metadata.namespace},e.prototype.getLabel=function(e){return e&&s.isEmpty(this._metadata.label)?"("+this._metadata.name+")":this._metadata.label},e.prototype.getNormalizedLabel=function(){return null!=this._normalizedLabel?this._normalizedLabel:this._normalizedLabel=this.getLabel().toLocaleLowerCase()},e.prototype.getLabelPlural=function(){return this._metadata.labelPlural},e.prototype.isCustom=function(){return this._metadata.custom},e.prototype.isQueryable=function(){return this._metadata.queryable},e.prototype.getMetadata=function(){return this._metadata},e.prototype.getField=function(e){return this.getFields().then((t=this,function(r){var i,s,n;if(null==t._fieldsMap)for(t._fieldsMap={},s=0,n=r.length;s<n;s++)i=r[s],t._fieldsMap[i.getName()]=i;return t._fieldsMap[e]}));var t},e.prototype.getFields=function(){return null==this._fields&&(this._fields=this._api.getFields(this)),this._fields},e}()},10683:(e,t,r)=>{var i;i=r(13132),e.exports=function(){function e(e,t,r){this._metadata=e,this._api=t,this._referenceIndex=r}return e.prototype.getName=function(){return this._metadata.name},e.prototype.getUniqueName=function(){return null!=this._uniqueName?this._uniqueName:this._uniqueName=null!=this._referenceIndex?this._metadata.name+"_"+this._referenceIndex:this._metadata.name},e.prototype.getRelationshipName=function(){return this._metadata.relationshipName},e.prototype.getLabel=function(){return this._metadata.label},e.prototype.isCustom=function(){return this._metadata.custom},e.prototype.isMultiValue=function(){return this._metadata.type===i.MULTI_PICKLIST.getCode().toLowerCase()},e.prototype.getMultiValueSeparator=function(){return this._metadata.multiValueSeparator},e.prototype.getNormalizedLabel=function(){return null!=this._normalizedLabel?this._normalizedLabel:this._normalizedLabel=this.getLabel().toLocaleLowerCase()},e.prototype.getType=function(){return null!=this._type?this._type:this._type=i.getEnumByCode(this._metadata.type)},e.prototype.getSoapType=function(){return this._metadata.soapType},e.prototype.isGroupable=function(){return this._metadata.groupable},e.prototype.isPolymorphic=function(){return null!==this._metadata.relationshipName&&this._metadata.referenceTo.length>1&&this._metadata.namePointing&&this._metadata.polymorphicForeignKey},e.prototype.isReference=function(){return this.getType()===i.REFERENCE},e.prototype.getReferenceNames=function(){return null!=this._referenceIndex?[this._metadata.referenceTo[this._referenceIndex]]:this._metadata.referenceTo},e.prototype.getReferenceName=function(e){return null!=this._referenceIndex?this._metadata.referenceTo[this._referenceIndex]:this._metadata.referenceTo[e]},e.prototype.copyForReferenceIndex=function(t){if(!this.isReference())throw new Error("Field is not a reference.");if(t<0||t>=this.getReferenceNames().length)throw new Error("Reference index is invalid.");return new e(this._metadata,this._api,t)},e.prototype.getReferenceIndex=function(){return this._referenceIndex},e.prototype.getReferences=function(){var e,t;return t=function(){var t,r,i,s;for(s=[],t=0,r=(i=this.getReferenceNames()).length;t<r;t++)e=i[t],s.push(this._api.getSObject(e));return s}.call(this),Promise.all(t).then((function(){return arguments}))},e}()},13132:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t._isCaseSensitive=!1,t.prototype.getCode=function(){return this._value.code},t.prototype.isNumeric=function(){return!0===this._value.isNumeric},t.prototype.isDateOrTime=function(){return!0===this._value.isDateOrTime},t.prototype.isSupportedInExtract=function(){return!1!==this._value.isSupportedInExtract},t}(i),s.build(s,{ANYTYPE:{code:"anytype"},ADDRESS:{code:"Address",isSupportedInExtract:!1},BASE64:{code:"Base64",isSupportedInExtract:!1},BOOLEAN:{code:"Boolean",isNumeric:!0},COMBOBOX:{code:"Combobox"},CURRENCY:{code:"Currency",isNumeric:!0},DATA_CATEGORY_GROUP_REFERENCE:{code:"DataCategoryGroupReference",isSupportedInExtract:!1},DATE:{code:"Date",isNumeric:!0,isDateOrTime:!0},DATE_TIME:{code:"DateTime",isNumeric:!0,isDateOrTime:!0},DOUBLE:{code:"Double",isNumeric:!0},EMAIL:{code:"Email"},ENCRYPTED_STRING:{code:"EncryptedString",isSupportedInExtract:!1},ID:{code:"ID"},INTEGER:{code:"Int",isNumeric:!0},LOCATION:{code:"location",isSupportedInExtract:!1},MULTI_PICKLIST:{code:"MultiPicklist"},PERCENT:{code:"Percent",isNumeric:!0},PHONE:{code:"Phone"},PICKLIST:{code:"Picklist"},REFERENCE:{code:"Reference"},STRING:{code:"String"},TEXT_AREA:{code:"TextArea"},TIME:{code:"Time",isNumeric:!0,isDateOrTime:!0},URL:{code:"URL"}})},74107:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(78978),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.locator=function(){return this._value.locator},t.prototype.name=function(){return this._value.name},t.build(t,{SAVENEW:{locator:"ModalSaveNew",name:"create"},SAVE:{locator:"ActionBarSave",name:"update"},RUN:{locator:"ActionBarRun",name:"read"}}),t}(i)},62517:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(78978),e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getPlaceHolderIndex=function(e){return this._value.getPlaceHolderIndex(e)},t}(s),i.build(i,{BEFORE:{getPlaceHolderIndex:function(e){return e}},ON:{getPlaceHolderIndex:function(e){return-1}},AFTER:{getPlaceHolderIndex:function(e){return e+1}}})},723:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(96486),s=r(27223),i=r(78978),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t._isCaseSensitive=!0,t.getDefaultValue=function(e){throw new Error("Cannot find enum for code '"+e+"'.")},t.getEnumByCode=function(e){var t;return null==e||this._isCaseSensitive||(e=e.toLowerCase()),null!=(t=this._enumsByCode[e])?t:this.getDefaultValue(e)},t.getAllCodes=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.enums()).length;t<r;t++)e=i[t],s.push(e.getCode());return s},t.hasCode=function(e){return this._isCaseSensitive||(e=null!=e?e.toLowerCase():void 0),n.has(this._enumsByCode,e)},t._registerMore=function(e){var t;if(null==this._enumsByCode&&(this._enumsByCode={}),t=e.getCode(),this.hasCode(t))throw new Error("Duplicate code '"+t+"'.");return this._isCaseSensitive||(t=null!=t?t.toLowerCase():void 0),this._enumsByCode[t]=e},t.prototype.getCode=function(){return s.checkImplemented()},t}(i)},78978:(e,t,r)=>{var i;i=r(96486),e.exports=function(){function e(e,t,r){this._ordinal=e,this._name=t,this._value=r}return e.build=function(e,t){var r,s,n,o,a,l,u,d,c;for(null==t&&(t={}),n=0,i.isArray(t)?this._ENUMS=function(){var r,i,o;for(o=[],r=0,i=t.length;r<i;r++)s=t[r],o.push(new e(n++,s));return o}():i.isPlainObject(t)?this._ENUMS=function(){var r;for(s in r=[],t)o=t[s],r.push(new e(n++,s,o));return r}():(this._ENUMS=[],t.forEach((c=this,function(t,r){return c._ENUMS.push(new e(n++,r,t))}))),this._size=n,this._ENUMS_BY_NORMALIZED_NAME={},l=0,u=(d=this._ENUMS).length;l<u;l++){if(a=(r=d[l]).getName().toLowerCase(),null!=this._ENUMS_BY_NORMALIZED_NAME[a])throw new Error;e[r.getName()]=r,this._ENUMS_BY_NORMALIZED_NAME[a]=r,"function"==typeof e._registerMore&&e._registerMore(r)}return e},e.enums=function(){return this._ENUMS},e.getEnumByName=function(e,t){return t?this[e]:this._ENUMS_BY_NORMALIZED_NAME[e.toLowerCase()]},e.getEnumByValue=function(e,t){var r,i,s,n,o;for(s=0,n=(o=this._ENUMS).length;s<n;s++)if(i=(r=o[s])._value,this._normalizeValue(e,t)===this._normalizeValue(i,t))return r},e.getEnumByOrdinal=function(e){return this._ENUMS[e]},e.hasEnumWithName=function(e,t){return null!=this.getEnumByName(e,t)},e.hasEnumWithValue=function(e,t){return null!=this.getEnumByValue(name,t)},e.size=function(){return this._size},e.prototype.getOrdinal=function(){return this._ordinal},e.prototype.isFirst=function(){return 0===this._ordinal},e.prototype.isLast=function(){return this._ordinal===this.constructor.size()-1},e.prototype.getPrevious=function(){if(!this.isFirst())return this.constructor.getEnumByOrdinal(this.getOrdinal()-1)},e.prototype.getNext=function(){if(!this.isLast())return this.constructor.getEnumByOrdinal(this.getOrdinal()+1)},e.prototype.getName=function(){return this._name},e.prototype.getValue=function(){return this._value},e._normalizeValue=function(e,t){return t||"string"!=typeof e?e:e.toLowerCase()},e}()},99522:(e,t,r)=>{var i,s;s=r(96486),i=r(90554).toSet,e.exports={mix:function(e,t,r){var n,o,a,l,u,d,c,h,p,g,m,_,f,y;for(null==(n=(y=null!=r?r:{}).allowClobbering)&&(n=!1),null==(h=y.lifecycleMethods)&&(h=[]),p=i(h,!0),o={},g=0,_=t.length;g<_;g++)for(c in u=t[g])if(d=u[c],!0===p[c]){if(!s.isFunction(d))throw new Error("Lifecycle '"+c+"' must be a function.");null==o[c]&&(o[c]=[]),o[c].push(d)}else{if(null!=e.prototype[c]&&!n)throw new Error("Collision in lifecycle method '"+c+"'.");e.prototype[c]=d}for(m=0,f=h.length;m<f;m++)l=o[a=h[m]],null!=e.prototype[a]&&l.push(e.prototype[a]),e.prototype[a]=null!=l?function(e){return function(){var t,r,i;for(r=0,i=e.length;r<i;r++)t=e[r].apply(this,arguments);return t}}(l):function(){}}}},66018:(e,t,r)=>{var i,s,n,o,a,l;l=r(96486),a=r(72555),o=r(67294),n=r(45697),i=r(74364).Z,r(8429).Z,s=/{(\d+)}/g,e.exports=a({displayName:"LabelRC",propTypes:{section:n.string.isRequired,name:n.string.isRequired,params:n.arrayOf(n.any),isStrict:n.bool},getDefaultProps:function(){return{params:[],isStrict:!0}},render:function(){var e,t,r,n,a,u,d;return u=i.getRawLabel(this.props.section,this.props.name).split(s),e=function(){var e,i,s;for(s=[],a=e=0,i=u.length;e<i;a=++e)if(t=u[a],a%2==0){if(l.isEmpty(t))continue;s.push(o.createElement("span",{key:a},t))}else{if(d=Number(t),r=this.props.params[d],this.props.isStrict&&null==r)throw new Error("Parameter "+t+' undefined for label "'+this.props.name+'".');n="function"==typeof r.render?r.render():r,s.push(o.createElement("span",{key:a,className:"param-"+d},n))}return s}.call(this),o.createElement("span",{className:"label",name:this.props.name},e)}})},97589:(e,t,r)=>{var i,s,n;n=r(96486),i=r(31058).He,s=r(74978).trim,e.exports=function(){function e(e,t){this._$A=null!=e?e:window.$A,t&&this._$A.localizationService.init()}return e.prototype._getLocalizationService=function(){return this._$A.localizationService},e.prototype.getLocale=function(){return this._$A.get("$Locale")},e.prototype.getDateFormat=function(){return this._$A.get("$Locale.dateFormat")},e.prototype.getShortDateFormat=function(){return this._$A.get("$Locale.shortDateFormat")},e.prototype.getDateTimeFormat=function(){return this._$A.get("$Locale.datetimeFormat")},e.prototype.getTimeFormat=function(e){var t;return null==e&&(e=!1),t=this._$A.get("$Locale.timeFormat"),e?t.replace(":ss",""):t},e.prototype.getGrouping=function(){return this._$A.get("$Locale.grouping")},e.prototype.getDecimal=function(){return this._$A.get("$Locale.decimal")},e.prototype.getPercent=function(){var e;return(null!=(e=this.getDefaultPercentFormat())?e.$suffix$:void 0)||"%"},e.prototype.getCurrency=function(){return this._$A.get("$Locale.currency")},e.prototype.getCurrencyCode=function(){return this._$A.get("$Locale.currencyCode")},e.prototype.getNormalizedFormat=function(e){return this._getLocalizationService().getNormalizedFormat(e)},e.prototype.getDefaultPercentFormat=function(){return this._getLocalizationService().getDefaultPercentFormat()},e.prototype.parseDateTime=function(e,t,r,i){return this._getLocalizationService().parseDateTime(e,t,r,i)},e.prototype.formatDate=function(e,t,r){return this._getLocalizationService().formatDate(e,t,r)},e.prototype.formatDateTime=function(e,t,r){return this._getLocalizationService().formatDateTime(e,t,r)},e.prototype.formatTime=function(e,t,r){return this._getLocalizationService().formatTime(e,t,r)},e.prototype._getNumberFormat=function(e){var t,r,s;return s=this._getLocalizationService().getDefaultNumberFormat(),n.floor(e)!==i(e)&&(r=e.toString().split(".")[1].length||0,t="#,###."+n.repeat("#",r),s=this._getLocalizationService().getNumberFormat(t)),s},e.prototype.parseNumber=function(e){var t,r;if(null!=e&&""!==e){if(n.isString(e)){if((t=n.indexOf(e,this.getDecimal()))>-1&&n.lastIndexOf(e,this.getGrouping())>t)return;r=new RegExp("\\"+this.getGrouping(),"g"),e=e.replace(/\"/g,"").replace(r,"").replace(this.getDecimal(),".").replace(this.getPercent(),"").replace(this.getCurrency(),"").replace(this.getCurrencyCode(),""),e=i(s(e))}return n.isNaN(e)?void 0:e}},e.prototype.formatNumber=function(e){var t;return null!=(t=this.parseNumber(e))?this._getNumberFormat(t).format(t):(null!=e?e.toString():void 0)||""},e.prototype.formatPercent=function(e){var t;return null!=(t=this.parseNumber(e))?this._getLocalizationService().formatPercent(t/100):(null!=e?e.toString():void 0)||""},e.prototype.formatCurrency=function(e){var t;return null!=(t=this.parseNumber(e))?this._getLocalizationService().formatCurrency(t):(null!=e?e.toString():void 0)||""},e.prototype.displayDateTime=function(e,t,r){return this._getLocalizationService().displayDateTime(e,t,r)},e.prototype.UTCToWallTime=function(e,t,r){return this._getLocalizationService().UTCToWallTime(e,t,r)},e.prototype.WallTimeToUTC=function(e,t,r){return this._getLocalizationService().WallTimeToUTC(e,t,r)},e.prototype.parseDateTimeUTC=function(e,t,r,i){return this._getLocalizationService().parseDateTimeUTC(e,t,r,i)},e.prototype.formatDateTimeUTC=function(e,t,r){return this._getLocalizationService().formatDateTimeUTC(e,t,r)},e.prototype.formatDateUTC=function(e,t,r){return this._getLocalizationService().formatDateUTC(e,t,r)},e.prototype.translateToOtherCalendar=function(e){return this._getLocalizationService().translateToOtherCalendar(e)},e.prototype.translateFromOtherCalendar=function(e){return this._getLocalizationService().translateFromOtherCalendar(e)},e.prototype.parseDateTimeISO8601=function(e){return this._getLocalizationService().parseDateTimeISO8601(e)},e.prototype.translateToLocalizedDigits=function(e){return this._getLocalizationService().translateToLocalizedDigits(e)},e.prototype.translateFromLocalizedDigits=function(e){return this._getLocalizationService().translateFromLocalizedDigits(e)},e.prototype.getCalendarYearOffset=function(){return this._isBuddhistCalendar()?543:0},e.prototype.isBefore=function(e,t,r){return this._getLocalizationService().isBefore(e,t,r)},e.prototype.isAfter=function(e,t,r){return this._getLocalizationService().isAfter(e,t,r)},e.prototype.isSame=function(e,t,r){return this._getLocalizationService().isSame(e,t,r)},e.prototype.isBetween=function(e,t,r,i){return this._getLocalizationService().isBetween(e,t,r,i)},e.prototype.isValidDateObject=function(e){return e instanceof Date&&!isNaN(e.getTime())},e.prototype._isBuddhistCalendar=function(){var e,t;return t=this._$A.get("$Locale.userLocaleLang"),e=this._$A.get("$Locale.userLocaleCountry"),"th"===t&&"TH"===e},e.prototype.getNumberFormatter=function(e){var t,r,i,s,o,a,l;for(n.isNumber(e)&&(e=e.toString()),s="",t=!1,o=this._$A.get("$Locale.grouping")||",",i=this._$A.get("$Locale.decimal")||".",a=0,l=e.length;a<l;a++)(r=e[a])>="0"&&r<="9"?s+=t?"0":"#":r===o?s+=",":r===i?(s+=".",t=!0):"-"!==r&&(s+=r);"#"===(s=s.replace("#.","0.")).charAt(s.length-1)&&(s=s.substring(0,s.length-1)+"0");try{return this._getLocalizationService().getNumberFormat(s)}catch(e){return this._getLocalizationService().getDefaultNumberFormat()}},e}()},27994:(e,t,r)=>{var i,s;s=r(96486),i=r(32350),e.exports=function(){function e(e,t,r){this._parentOrigin=e,this._parentAuraApp=t,this._appContext=r,this._beforeUnloadHandlers={},this._messageHandlers={}}return e.prototype.getAppContext=function(){return this._appContext},e.prototype.isInAuraContext=function(){return null!=this._parentAuraApp},e.prototype.shouldUseNewRunPage=function(){return $A.get("$Browser.S1Features.isReportEnhancedRunPageEnabled")},e.prototype.shouldEnableCopyToClipboardAction=function(){return $A.get("$Browser.S1Features.isReportEnhancedRunPageCopyToClipboardActionEnabled")},e.prototype.navigateToComponent=function(e,t){return this._postMessageToParent("force:navigateToComponent",{componentDef:e,componentAttributes:t})},e.prototype.navigateToSObject=function(e){return this._postMessageToParent("force:navigateToSObject",{recordId:e})},e.prototype.navigateToReportRun=function(e,t,r){return this._postMessageToParent("reports:runReportEvent",{iframeName:window.name,reportId:e,reportDescribe:t,isView:r})},e.prototype.navigateToObjectHome=function(e){return null==e&&(e="Report"),this._postMessageToParent("force:navigateToObjectHome",{scope:e})},e.prototype.updateRecordId=function(e){return this.postReportBuilderAppMessage({updateRecordId:!0,reportId:e}),i.trigger("reports:updateReportId",e)},e.prototype.clickToDial=function(e){return this._postMessageToParent("opencti:clickToDial",{number:e})},e.prototype.navigateToReport=function(e,t){var r,i;return s.isEmpty(t)?this.navigateToSObject(e):(r=JSON.stringify(t),i="#/sObject/"+encodeURIComponent(e)+"/view?reportFilters="+encodeURIComponent(r),this._postMessageToParent("force:navigateToURL",{url:i}))},e.prototype.navigateBack=function(e){return this.postReportBuilderAppMessage({navigateBack:{useHandler:e}})},e.prototype.navigateToRecord=function(e,t){return this.postReportBuilderAppMessage({navigateToRecord:{recordId:e,isCtrlKey:t}})},e.prototype.showRecordPreview=function(e,t,r){return this.postReportBuilderAppMessage({showRecordPreview:{recordId:e,reportId:t,recordName:r,showRecordPreview:!0}})},e.prototype.showToastMessageWithAttributes=function(e){return this._postMessageToParent("force:showToast",e)},e.prototype.showToastMessage=function(e,t,r,i,s,n){return null==t&&(t="info"),null==r&&(r="info"),this.showToastMessageWithAttributes({message:e,type:t,key:r,isClosable:i,isSticky:s})},e.prototype.maskHeader=function(e){return this._postMessageToParent("one:maskHeader",{masked:e}),this.postReportBuilderAppMessage({maskHeader:!0,isMasked:e})},e.prototype._postMessageToParent=function(e,t){var r;return r={event:e,arguments:t},window.parent.postMessage(JSON.stringify(r),this._getOrigin())},e.prototype.postReportBuilderAppMessage=function(e){return e.iframeName=window.name,e.srcApp="reportBuilderApp",window.parent.postMessage(JSON.stringify(e),this._getOrigin())},e.prototype.showSpinner=function(e){return this.postReportBuilderAppMessage({showSpinner:!0,hideLoadingDot:e})},e.prototype.hideSpinner=function(){return this.postReportBuilderAppMessage({hideSpinner:!0})},e.prototype.setWindowTitle=function(e){return this.postReportBuilderAppMessage({windowTitle:e})},e.prototype._getOrigin=function(){return this._parentOrigin||window.location.origin},e.prototype.queryDataProvider=function(e,t,r,i,s){return null==t&&(t="Report"),null==r&&(r="Folder"),null==i&&(i=void 0),null==s&&(s=null),this._postMessageToParent("reports:queryDataProviderEvent",{reportId:s,queryString:e,scope:t,entity:r,queryScope:i})},e.prototype.beforeUnload=function(e,t){return t&&(this._beforeUnloadHandlers[t]=e),window.addEventListener("beforeunload",e)},e.prototype.removeBeforeUnload=function(e,t){return t&&(e=this._beforeUnloadHandlers[t]),window.removeEventListener("beforeunload",e)},e.prototype.registerBeforeFunctions=function(){return this.postReportBuilderAppMessage({registerBeforeFunctions:!0})},e.prototype.unregisterBeforeFunctions=function(){return this.postReportBuilderAppMessage({unregisterBeforeFunctions:!0})},e.prototype.clearStoredDescribe=function(e){if(e)return this.clearCachedAuraActionResult("getInitialReportMetadata",{reportId:e}),this.clearCachedAuraActionResult("describeReport",{reportId:e})},e.prototype.clearCachedAuraActionResult=function(e,t){var r;return r="serviceComponent://ui.analytics.reporting.runpage.ReportPageController/ACTION$"+e,window.parent.$A.clientService.invalidateAction(r,t)},e.prototype.setCallback=function(e,t){return t&&(this._messageHandlers[t]=e),window.addEventListener("message",e,!1)},e.prototype.removeCallback=function(e,t){return t&&(e=this._messageHandlers[t]),window.removeEventListener("message",e,!1)},e}()},70873:e=>{var t,r;r=["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.exports=t={isDate:function(e,t){return 0!==this.getDateFromFormat(e,t)},getDateFromFormat:function(e,t,i){var s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L;for(null==i&&(i=!1),null==e&&(e=""),t+="",c=0,h=0,R=(f=new Date).getFullYear(),m=f.getMonth()+1,a=1,u=0,g=0,C=0,p=0,n="";h<t.length;){for(o=t.charAt(h),T="";t.charAt(h)===o&&h<t.length;)T+=t.charAt(h++);if("yyyy"===T||"yy"===T||"y"===T){if("yyyy"===T&&(I=4,v=4),"yy"===T&&(I=2,v=2),"y"===T&&(I=2,v=4),null===(R=this._getInt(e,c,I,v)))return 0;c+=R.length,2===R.length&&(R=R>70?R-0+1900:R-0+2e3)}else if("MMM"===T||"NNN"===T){for(m=0,d=w=0,D=r.length-1;0<=D?w<=D:w>=D;d=0<=D?++w:--w)if(_=r[d],e.substring(c,c+_.length).toLowerCase()===_.toLowerCase()&&("MMM"===T||"NNN"===T&&d>11)){(m=d+1)>12&&(m-=12),c+=_.length;break}if(m<1||m>12)return 0}else if("EE"===T||"E"===T){for(d=A=0,L=this._DAY_NAMES.length-1;0<=L?A<=L:A>=L;d=0<=L?++A:--A)if(l=this._DAY_NAMES[d],e.substring(c,c+l.length).toLowerCase()===l.toLowerCase()){c+=l.length;break}}else if("MM"===T||"M"===T){if(null===(m=this._getInt(e,c,T.length,2))||m<1||m>12)return 0;c+=m.length}else if("dd"===T||"d"===T){if(null===(a=this._getInt(e,c,T.length,2))||a<1||a>31)return 0;c+=a.length}else if("hh"===T||"h"===T){if(null===(u=this._getInt(e,c,T.length,2))||u<1||u>12)return 0;c+=u.length}else if("HH"===T||"H"===T){if(null===(u=this._getInt(e,c,T.length,2))||u<0||u>23)return 0;c+=u.length}else if("KK"===T||"K"===T){if(null===(u=this._getInt(e,c,T.length,2))||u<0||u>11)return 0;c+=u.length}else if("kk"===T||"k"===T){if(null===(u=this._getInt(e,c,T.length,2))||u<1||u>24)return 0;c+=u.length,u--}else if("mm"===T||"m"===T){if(null===(g=this._getInt(e,c,T.length,2))||g<0||g>59)return 0;c+=g.length}else if("ss"===T||"s"===T){if(null===(C=this._getInt(e,c,T.length,2))||C<0||C>59)return 0;c+=C.length}else if("SSS"===T){if(null===(p=this._getInt(e,c,T.length,3))||g<0||g>999)return 0;c+=p.length}else if("a"===T){if(s="AM",b="PM",E=e.substring(c,c+2),S=e.substring(c,c+2),E===s||E.toUpperCase()===s)n=s;else{if(S!==b&&S.toUpperCase()!==b)return 0;n=b}c+=n.length}else{if(e.substring(c,c+T.length)!==T)return 0;c+=T.length}}if(c!==e.length)return 0;if(2===(y=Number(m)))if(R%4==0&&R%100!=0||R%400==0){if(a>29)return 0}else if(a>28)return 0;return(4===y||6===y||9===y||11===y)&&a>30?0:(u<12&&"PM"===n?u=u-0+12:u>11&&"AM"===n&&(u-=12),(i?new Date(Date.UTC(R,m-1,a,u,g,C)):new Date(R,m-1,a,u,g,C)).getTime())},_getInt:function(e,t,r,i){var s,n,o;for(n=o=i;i<=r?o<=r:o>=r;n=i<=r?++o:--o){if((s=e.substring(t,t+n)).length<r)return null;if(this._isInteger(s))return s}return null},_isInteger:function(e){var t,r,i;for("1234567890",t=r=0,i=e.length-1;0<=i?r<=i:r>=i;t=0<=i?++r:--r)if(-1==="1234567890".indexOf(e.charAt(t)))return!1;return!0},getDate:function(e){switch(e){case"year":case"years":return t.yearRelative;case"fiscal_year":case"fiscal_years":return t.fiscalYearRelative;case"quarter":case"quarters":return t.quarterRelative;case"fiscal_quarter":case"fiscal_quarters":return t.fiscalQuarterRelative;case"month":case"months":return t.monthRelative;case"week":case"weeks":return t.weekRelative;case"day":case"days":return t.dayRelative}},yearRelative:function(e,r,i){return t.fiscalYearRelative(e,r,i,0)},quarterRelative:function(e,r,i){return t.fiscalQuarterRelative(e,r,i,0)},fiscalYearRelative:function(e,r,i,s){var n,o,a,l;return a=(l=t.datePieces(e)).year,a+=r,(o=(s%12+12)%12)>l.month&&(a-=1),i?n=1:(a+=1,n=0),new Date(a,o,n)},fiscalQuarterRelative:function(e,r,i,s){var n,o,a,l,u;return l=(u=t.datePieces(e)).year,(o=((a=u.month)-s)%3)<0&&(o+=3),i?n=1:(a+=3,n=0),new Date(l,a-o+3*r,n)},monthRelative:function(e,r,i){var s,n,o,a;return o=(a=t.datePieces(e)).year,n=a.month,s=new Date(o,n+r,1),i||(s=t.endMonthDate(s)),s},weekRelative:function(e,r,i){var s,n,o,a;return o=(a=t.datePieces(e)).year,n=a.month,s=e.getDate()-e.getDay(),i||(s+=6),new Date(o,n,s+7*r)},dayRelative:function(e,r,i){var s,n,o,a;return o=(a=t.datePieces(e)).year,n=a.month,s=a.day,new Date(o,n,s+r)},datePieces:function(e){return{year:e.getFullYear(),month:e.getMonth(),day:e.getDate()}},endMonthDate:function(e){var r,i,s;return i=(s=t.datePieces(e)).year,r=s.month,new Date(i,r+1,0)},past_verb:"ago",future_verb:"ahead",current_verb:"current",tense_verb_offsets:{ago:-1,current:!1,ahead:1},relativeDateArrayToStr:function(e){var r,i,s,n;return i=e[0],(s=e[1])>0?n=t.future_verb:s<0?(n=t.past_verb,s=Math.abs(s)):s="current",(s>1||s<-1)&&(i+="s"),r=s+" "+i,n&&(r+=" "+n),'"'+r+'"'}}},52115:e=>{var t=function(e,t){return function(){return e.apply(t,arguments)}};e.exports=function(){function e(){var e;this.finally=t(this.finally,this),this.then=t(this.then,this),this.reject=t(this.reject,this),this.resolve=t(this.resolve,this),this._promise=new Promise((e=this,function(t,r){e._resolve=t,e._reject=r}))}return e.prototype.resolve=function(){return this._resolve.apply(this,arguments),this},e.prototype.reject=function(){return this._reject.apply(this,arguments),this},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this._promise.catch(e)},e.prototype.finally=function(e){return this.then((function(t){return e(t),t}),(function(t){throw e(t),t}))},e.prototype.promise=function(){return this._promise},e}()},27223:(e,t,r)=>{r(96486),e.exports={notImplemented:function(){return new Error("Not implemented.")},checkImplemented:function(){throw this.notImplemented()},checkRequired:function(e,t,r){},checkOfType:function(e,t,r,i){}}},51141:e=>{e.exports={_trapEvent:function(e){var t,r;if(e)return e.preventDefault(),e.stopPropagation(),null!=(t=e.nativeEvent)&&"function"==typeof t.preventDefault&&t.preventDefault(),null!=(r=e.nativeEvent)&&"function"==typeof r.stopPropagation?r.stopPropagation():void 0},trap:function(e){return this._trapEvent(e)},trapImmediate:function(e){var t;return"function"==typeof e.stopImmediatePropagation&&e.stopImmediatePropagation(),null!=(t=e.nativeEvent)&&"function"==typeof t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.trap(e)}}},50760:(e,t,r)=>{var i,s,n,o,a=[].slice;i=r(18111),s=r(61506).Z,n=r(39803).Z,o=["https://*.salesforce.com","https://*.force.com","https://*.visualforce.com","https://*.documentforce.com"],e.exports={getImageValidatorRemote:function(){var e;return e=this.getValidOrigins(),function(t){if((new n).validateUrl(t,e))return t}},getValidOrigins:function(){var e;return(e=s.get(i).getValidImageUrlDomains())&&0!==e.length||(e=o),a.call(e).concat([window.location.origin])},getImageValidatorLocal:function(){return function(e){if(e)return"chart_icons/"+e}},getImageValidatorCommunity:function(){var e,t;return t=this.getValidOrigins(),e=s.get(i).getSitePrefix(),function(r){if(r.startsWith(e)||(new n).validateUrl(r,t))return r}},getImageValidator:function(){return s.get(i).isInCommunityContext()?this.getImageValidatorCommunity():s.get(i).isCmsMode()?this.getImageValidatorRemote():this.getImageValidatorLocal()}}},57361:e=>{e.exports={parseJSON:function(e){if(e)try{return JSON.parse(e)}catch(t){return e}return null}}},22393:(e,t,r)=>{var i,s;s=r(96486),e.exports=i=function(){function e(e){this._flowUp=null==e||e}return e.sortLayout=function(e){return e.sort((function(e,t){return e.getRow()===t.getRow()?e.getColumn()-t.getColumn():e.getRow()-t.getRow()}))},e.createBoundingBox=function(t){var r,i,s,n,o,a,l;if(!(t.length<1)){for(n=o=1/0,i=s=-1/0,a=0,l=t.length;a<l;a++)r=t[a],o=Math.min(r.getRow(),o),n=Math.min(r.getColumn(),n),s=Math.max(r.getRow()+r.getHeight(),s),i=Math.max(r.getColumn()+r.getWidth(),i);return new e.PlaceholderItem({column:n,row:o,width:i-n,height:s-o})}},e.overlap=function(e,t){return this.overlapHorizontally(e,t)&&this.overlapVertically(e,t)},e.inside=function(e,t){return"function"==typeof t.getPosition&&(t=t.getPosition()),e.getRow()<=t.row&&e.getRow()+e.getHeight()>=t.row+t.height&&e.getColumn()<=t.column&&e.getColumn()+e.getWidth()>=t.column+t.width},e.allInside=function(e,t){var r,i,s;for(i=0,s=t.length;i<s;i++)if(r=t[i],!this.inside(e,r))return!1;return!0},e.getContainedItems=function(t,r){var i,s,n,o,a,l,u,d;if(null==t.getContainedWidgets())return[];for(s={row:(n=t.getPosition()).row-r.row,column:n.column-r.column},o=[],l=0,u=(d=t.getContainedWidgets()).length;l<u;l++)a=(i=d[l]).getPosition(),o.push(new e.PlaceholderItem({row:a.row-s.row,column:a.column-s.column,width:a.width,height:a.height},i.getUID()));return o},e.overlapHorizontally=function(e,t){return!(e.getColumn()+e.getWidth()<=t.getColumn()||e.getColumn()>=t.getColumn()+t.getWidth())},e.overlapVertically=function(e,t){return!(e.getRow()+e.getHeight()<=t.getRow()||e.getRow()>=t.getRow()+t.getHeight())},e.specifiedDoesntOverlap=function(e,t){return!s.some(e,(r=this,function(e){return r.overlap(e,t)}));var r},e.rtlFlipLayout=function(t,r){var i,s,n,o;for(s=[],n=0,o=t.length;n<o;n++)i=t[n],s.push(new e.PlaceholderItem({column:r-i.getColumn()-i.getWidth(),row:i.getRow(),width:i.getWidth(),height:i.getHeight()},i.getUID()));return s},e.prototype.moveAndGetProxyLocation=function(e,t,r,i,s){var n,o,a,l,u,d;for(null==i&&(i=!1),null==s&&(s=!1),(n=e.indexOf(t))>-1&&e.splice(n,1),a=i?this.compactedLayout(e):e,a=this._injectItem(a,t,r,s),n>-1&&e.push(t),u=0,d=a.length;u<d;u++)if((o=a[u]).getUID()===t.getUID()){l=o.getPosition(),a.splice(a.indexOf(o),1);break}return{changedLayout:a,proxyPosition:l}},e.prototype._injectItem=function(t,r,i,s){var n,o,a,l,u,d,c,h,p,g,m;if(null==s&&(s=!1),a=i.row,d=e.sortLayout(t),u=[],o=-1,s)o=0;else for(n=c=0,p=d.length;c<p;n=++c){if(!((l=d[n]).getRow()<i.row)){o=n;break}this._addToPartial(u,l),e.overlapHorizontally(l,r)&&(a=Math.max(a,l.getRow()+l.getHeight()))}if(this._addToPartial(u,new e.PlaceholderItem({column:i.column,row:a,height:i.height,width:i.width},r.getUID())),-1!==o)for(n=h=0,g=(m=d.slice(o)).length;h<g;n=++h)l=m[n],this._addToPartial(u,l);return u},e.prototype.compactedLayout=function(t){var r,i,s,n,o;for(i=[],n=0,o=(s=e.sortLayout(t)).length;n<o;n++)r=s[n],this._addToPartial(i,r);return i},e.prototype._addToPartial=function(t,r){var i;return i=this.getFirstAvailableRow(t,r),t.push(new e.PlaceholderItem({column:r.getColumn(),row:i,width:r.getWidth(),height:r.getHeight()},r.getUID()))},e.prototype.getFirstAvailableRow=function(t,r){var i,s,n,o,a,l;for(s=new e.PlaceholderItem({column:r.getColumn(),width:r.getWidth()}),n=0,i=!1,a=0,l=t.length;a<l;a++)o=t[a],i=i||e.overlap(r,o),e.overlapHorizontally(s,o)&&(n=Math.max(n,o.getRow()+o.getHeight()));return this._flowUp||i||(n=r.getRow()),n},e}(),i.PlaceholderItem=function(){function e(e,t){this.column=e.column,this.row=e.row,this.width=e.width,this.height=e.height,this.id=null!=t?t:""}return e.prototype.getColumn=function(){return this.column},e.prototype.getRow=function(){return this.row},e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.getUID=function(){return this.id},e.prototype.getPosition=function(){return{column:this.column,row:this.row,width:this.width,height:this.height}},e}()},7931:(e,t,r)=>{var i;i=r(96486),e.exports=function(){function e(e){this._maxQueries=e,this.reset()}return e.prototype.reset=function(e){return null==e&&(e=!0),this._cachedResults={},this._resultQueue=[],e&&(this._cachedBooleanFilter={}),this._cachedNoEvictionResults={}},e.prototype.getResult=function(e){var t;return"string"==typeof e&&null!=(t=this._cachedResults[e])&&(i.pull(this._resultQueue,e),this._resultQueue.push(e)),t},e.prototype.addResult=function(e,t){var r;if("string"==typeof e&&(this._cachedResults[e]=t,this._resultQueue.push(e),null!=this._maxQueries&&this._resultQueue.length>this._maxQueries))return r=this._resultQueue.shift(),delete this._cachedResults[r]},e.prototype.clearResult=function(e){if(e)return this._cachedResults[e]&&delete this._cachedResults[e],i.pull(this._resultQueue,e)},e.prototype.addNoEvictionResult=function(e,t){if("string"==typeof e)return this._cachedNoEvictionResults[e]=t},e.prototype.getNoEvictionResult=function(e){var t;return"string"==typeof e&&(t=this._cachedNoEvictionResults[e]),t},e.prototype.getBooleanFilter=function(e){return null==e&&(e="default"),this._cachedBooleanFilter[e]||null},e.prototype.setBooleanFilter=function(e,t){return null==t&&(t="default"),this._cachedBooleanFilter[t]=e},e}()},32574:(e,t,r)=>{var i,s,n,o=[].slice;n=r(96486),i=r(11422).Z,e.exports=s={selectEntireInputContents:function(e){return e.setSelectionRange(0,e.value.length)},isMouseInElement:function(e,t){var r,i,s;return t.jquery&&(t=t[0]),i=(s=t.getBoundingClientRect()).top,r=s.left,this.isPositionInCoords(e.clientX,e.clientY,{top:i,left:r,height:t.clientHeight,width:t.clientWidth},!1)},isPositionInCoords:function(e,t,r,s){var n,o,a,l;return a=r.top,o=r.left,n=r.height,l=r.width,null==s&&(s=!0),new i(o,o+l,s).inBounds(e)&&new i(a,a+n,s).inBounds(t)},isMousePositionValid:function(e){return e.clientX>0&&e.clientY>0&&e.pageX>0&&e.pageY>0&&e.screenX>0&&e.screenY>0},distributeFullPixels:function(e,t){var r,i,s,n,o,a,l;for(s=e/t,r=Math.floor(s),o=[],a=1;1<=t?a<=t:a>=t;1<=t?a++:a--)o.push(r);if(s!==r)for(n=e-s*t,i=l=1;1<=n?l<=n:l>=n;i=1<=n?++l:--l)o[i]++;return o},getScrollParent:function(e){return null==e?null:e.scrollHeight>e.clientHeight?e:s.getScrollParent(e.parentNode)},scrollIntoView:function(e,t){return"function"==typeof(null!=e?e.scrollIntoViewIfNeeded:void 0)?e.scrollIntoViewIfNeeded(t):null!=e&&"function"==typeof e.scrollIntoView?e.scrollIntoView(t):void 0},scrollToElement:function(e){var t,r,i,s,n;if(null!=e)return i=e.parentElement,t=(r=e.offsetTop)+e.offsetHeight,s=i.offsetHeight,t>(n=i.scrollTop)+s?i.scrollTop=Math.max(0,t-s):r<n?i.scrollTop=r:void 0},buildClassName:function(){var e,t,r,i,s;for(i=0,s=(t=1<=arguments.length?o.call(arguments,0):[]).length;i<s;i++)r=t[i],n.isEmpty(r)||(null!=e?e+=" "+r:e=r);return e},classSet:function(e){var t,r;for(t in r=[],e)e[t]&&r.push(t);return this.buildClassName.apply(this,r)},wheelEventToPixelOffset:function(e){var t,r;return null!=e.deltaMode?(t=function(){switch(e.deltaMode){case 0:return 1;case 1:return 40;case 2:return 800}}(),{x:e.deltaX*t,y:e.deltaY*t}):(r={x:0,y:0},null!=e.detail&&(r.y=e.detail),null!=e.wheelDelta&&(r.y=-e.wheelDelta/120),null!=e.wheelDeltaY&&(r.y=-e.wheelDeltaY/120),null!=e.wheelDeltaX&&(r.x=-e.wheelDeltaX/120),null!=e.axis&&e.axis===e.HORIZONTAL_AXIS&&(r={x:r.y,y:0}),{x:10*r.x,y:10*r.y})},getScrollbarWidth:function(){var e,t,r,i;return(t=document.createElement("div")).style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t),r=t.offsetWidth,t.style.overflow="scroll",(e=document.createElement("div")).style.width="100%",t.appendChild(e),i=e.offsetWidth,t.parentNode.removeChild(t),this.getScrollbarWidth=function(){return r-i},this.getScrollbarWidth()},getOffset:function(e){var t;return{top:(t=e.getBoundingClientRect()).top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}}},52885:e=>{e.exports=function(){function e(e){this._getCurrentLayoutName=e.getCurrentLayoutName,this._hasResultError=e.hasResultError,this._dashboardDescribe=e.dashboardDescribe}return e.prototype.getLensQueryInfo=function(e){var t;return"function"==typeof(t=this._dashboardDescribe.getLensLastResult(e)).getQueryInfo?t.getQueryInfo():void 0},e.prototype.getCurrentLayoutName=function(){return this._getCurrentLayoutName()},e.prototype.hasResultError=function(){return this._hasResultError()},e}()},48169:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h;h=r(96486),d=r(21891).Z,l=r(41556),c=r(24556),i=r(35241).Z,u=r(82409).Z,o=r(3185).Z,s=r(56279).Z,n=r(45771).Z,a=r(5945).Z,e.exports={getMutatorsForConvertingLegacyFiltersToNewFilters:function(e,t,r,i,n){var o,a,l,u,p,g,m,_,f,y,b,C,E,S,T,I,v,R;for(f=[],_={},o={},y=0,E=(I=this._getLegacyFilterGridLayoutWidgets(e)).length;y<E;y++)a=I[y],f.push(this._getDeleteLegacyFilterGridLayoutWidgetMutator(a));for(b=0,S=(v=e.getMetadata().getWidgets()).length;b<S;b++)if(p=v[b],d.fromCode(p.getType())===d.GLOBAL_FILTER&&(f.push(this._getDeleteLegacyFilterWidgetMutator(p)),p.hasLens()&&(u=(l=p.getLens()).getId(),null==n[p.getId()]&&null==_[u])))for(_[u]=l,C=0,T=(R=c.getQueryFilters(l.getQuery())).length;C<T;C++)g=R[C],o[m=[l.getDataset(0).getFullyQualifiedName()].concat(h.isArray(g[0])?g[0]:[g[0]]).join("~~~")]||(o[m]=!0,f.push(this._getCreateNewFilterMutator(g,l.getDataset(0).getJson())));return h.isEmpty(_)||f.push(new s(!1,h.values(_),e)),Array.prototype.push.apply(f,this._getCreateNewFilterPanelWidgetMutator(e,t,r,i)),f},_getLegacyFilterGridLayoutWidgets:function(e){var t,r,i,s,n,o,l,u,c,h,p;for(r=[],i=0,o=(c=e.getMetadata().getLayouts()).length;i<o;i++)for(s=0,l=(h=c[i].getPages()).length;s<l;s++)for(n=0,u=(p=h[s].getWidgetLayouts()).length;n<u;n++)t=p[n],d.fromCode(t.getWidget().getType())===d.GLOBAL_FILTER&&r.push(new a({widgetLayout:t}));return r},_getDeleteLegacyFilterGridLayoutWidgetMutator:function(e){return new n(!1,e.getLayoutName(),e.getLayoutPageIndex(),e.getWidget().getId(),e.getPosition())},_getDeleteLegacyFilterWidgetMutator:function(e){return new o(!1,e)},_getCreateNewFilterPanelWidgetMutator:function(e,t,r,i){var s,a;return s=e.generateWidgetId(d.FILTER_PANEL),a=new u(d.FILTER_PANEL).setId(s).setDashboardMetadata(e.getMetadata()).build(),[new o(!0,a),new n(!0,t,r,s,i)]},_getCreateNewFilterMutator:function(e,t){var r,s;return r=h.isArray(e[0])?e[0]:[e[0]],t=(new l.Dataset).setId(t.id).setName(t.name).setUrl(t.url).setNamespace(t.namespace),s=(new l.Filter).setLabel(r[0]).setFields(r).setOperator(e[2]).setValue(e[1]).setLocked(!1).setDependent(!0).setDataset(t),new i(!0,s)}}},11569:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;i=r(723),s=r(8429).Z,e.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.code},t.prototype.getId=function(){return this._value.id},t.prototype.getLabel=function(){return s.getLabel("DashboardPageActions",this.getCode())},t.prototype.getIconName=function(){return this._value.iconName},t}(i),n.build(n,{ADD:{code:"add",id:"add_page",iconName:"plus"},DELETE:{code:"delete",id:"delete_page",iconName:"trash"},RENAME:{code:"rename",id:"rename_page",iconName:"edit"},CLONE:{code:"clone",id:"clone_page",iconName:"clone"},MOVE_LEFT:{code:"move_left",id:"move_page_left",iconName:"chevronleft"},MOVE_RIGHT:{code:"move_right",id:"move_page_right",iconName:"chevronright"},HIDE:{code:"hide",id:"hide_page",iconName:"hide"},SHOW:{code:"show",id:"show_page",iconName:"show"}})},17182:(e,t,r)=>{var i,s,n,o,a,l,u;r(96486),r(78978),r(8902),o=r(8429).Z,s=r(34050).Z,n=r(3185).Z,a=r(53069).Z,l=r(87085).Z,i=r(8158).Z,u=r(70527).Z,r(11569),e.exports=function(){function e(e){this._metadataHolder=e.metadataHolder,this._layoutSwitcher=e.layoutSwitcher,this._getCurrentLayout=e.getCurrentLayout,this._getCurrentPageIndex=e.getCurrentPageIndex,this._executeMutators=e.executeMutators}return e.prototype.addPageAndUseMutators=function(e,t){var r;return null==t&&(t=[]),r=this._getCurrentLayout(),t.unshift(this._getAddPageMutator(e)),this._layoutSwitcher.switchAndUseMutators(r.getName(),r.getPages().length,t)},e.prototype.deletePage=function(e){var t;return t=Math.max(e-1,0),this._layoutSwitcher.switchAndUseMutators(this._getCurrentLayout().getName(),t,this._getDeletePageMutators(e,t))},e.prototype.renamePage=function(e,t){return this._executeMutators([new l(this._getCurrentLayout().getName(),e,t)])},e.prototype.clonePage=function(e){var t,r;return r=this._getCurrentLayout(),t=o.getLabel("DashboardPage","cloneMenuHeader",r.getPage(e).getLabel()),this.addPageAndUseMutators(t,[new i(r.getName(),t,e,r.getPages().length)])},e.prototype.movePage=function(e,t){var r;return r=[new a(this._getCurrentLayout().getName(),e,t)],this._layoutSwitcher.switchAndUseMutators(this._getCurrentLayout().getName(),t,r)},e.prototype.togglePageVisiblity=function(e){return this._executeMutators([new u(this._getCurrentLayout().getName(),e,!this._getCurrentLayout().getPage(e).isNavigationHidden())])},e.prototype._getAddPageMutator=function(e){return null==e&&(e=this._getDefaultPageLabel()),new s(!0,this._getCurrentLayout().getName(),void 0,e)},e.prototype._getDeletePageMutators=function(e,t){var r,i,o,a,l;for(i=[new s(!1,this._getCurrentLayout().getName(),e)],o=0,a=(l=this._getCurrentLayout().getPage(e).getWidgets()).length;o<a;o++)(r=l[o]).isOnMultiplePages()||i.push(new n(!1,r));return i},e.prototype._getDefaultPageLabel=function(){return this._metadataHolder.generateDefaultPageLabel(this._getCurrentLayout())},e}()},46874:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m;p=r(72555),h=r(67294),c=r(45697),m=r(96486),n=r(8429).Z,d=r(6798),l=r(28388),u=r(40604),a=r(95929).ZP,g=r(72713),s=r(21891).Z,i=r(73896).Z,o=r(48169),r(69617),e.exports=p({displayName:"ConvertLegacyGlobalFiltersManagerModalRC",propTypes:{newFilterPanelPosition:c.object.isRequired,newFilterPanelWidgetLayoutName:c.string.isRequired,newFilterPanelWidgetLayoutPageIndex:c.number.isRequired,onCloseModal:c.func.isRequired,executeMutators:c.func.isRequired,metadataHolder:c.instanceOf(i).isRequired,metadataProvider:c.instanceOf(a).isRequired},getInitialState:function(){return{compoundGlobalFilterMap:[]}},render:function(){return m.isEmpty(this.state.compoundGlobalFilterMap)?new d(this.props.onCloseModal).makeConfirmationModal(n.getLabel("DashboardFilterPanel","convertModalTitle"),n.getLabel("DashboardFilterPanel","convertModalBody"),l.makeButton(this._hasCompoundLegacyFilter,n.getLabel("DashboardFilterPanel","convertModalButton"),2,u.Primary,"convert-btn",!1,"convert-btn"),"convertLegacyFiltersModal"):this._renderCompoundWarning()},_renderCompoundWarning:function(){return new d(this.props.onCloseModal).makeConfirmationModal(n.getLabel("DashboardFilterPanel","compoundWarningModalTitle"),this._buildWarningmessage(n.getLabel("DashboardFilterPanel","compoundFiltersWarning"),m.keys(this.state.compoundGlobalFilterMap).join(", ")),l.makeButton(this._convertLegacyFiltersToNewFilters,n.getLabel("InsightsConfirmDialog","continueButton"),2,u.Primary,"continue-btn",!1,"continue-btn"),"compoundWarningLegacyFiltersModal")},_buildWarningmessage:function(e,t){return h.createElement("div",{className:"warningMessage"},h.createElement("p",null,e),h.createElement("ul",{className:"warningWidgets"},t))},_hasCompoundLegacyFilter:function(){var e,t,r,i,n,o,a,l,u,d,c;for(r={},i=0,o=(l=this.props.metadataHolder.getMetadata().getWidgets()).length;i<o;i++)if(e=l[i],s.fromCode(e.getType())===s.GLOBAL_FILTER)for(n=0,a=(c=null!=(u=null!=(d=e.getLens())?d.getQuery().filters:void 0)?u:[]).length;n<a;n++)t=c[n],g.isCompoundFilters(t)&&g.isCompoundDim(t[0])&&(r[e.getId()]=!0);return m.isEmpty(r)&&this._convertLegacyFiltersToNewFilters(),this.setState({compoundGlobalFilterMap:r})},_convertLegacyFiltersToNewFilters:function(){return this.props.executeMutators(o.getMutatorsForConvertingLegacyFiltersToNewFilters(this.props.metadataHolder,this.props.newFilterPanelWidgetLayoutName,this.props.newFilterPanelWidgetLayoutPageIndex,this.props.newFilterPanelPosition,this.state.compoundGlobalFilterMap)),this.props.onCloseModal()}})},84458:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C;y=r(72555),m=r(67294),g=r(45697),C=r(96486),_=r(50130).Z,p=r(8429).Z,f=r(32574),c=r(8902),h=r(85600),o=r(68653),n=r(5893),l=r(59495).Z,b=r(30077).isOrIn,i=r(40651).Z,u=r(35368).Z,s=r(21891).Z,a=r(57182).Z,r(72039),d="iconImage",e.exports=y({displayName:"DashboardToolbarRC",mixins:[h],propTypes:{delegate:g.instanceOf(l).isRequired,maxHeight:g.number,onItemClick:g.func,isExpanded:g.bool,assetType:g.instanceOf(i)},getDefaultProps:function(){return{isExpanded:!1}},getInitialState:function(){return{showMoreMenu:!1}},UNSAFE_componentWillMount:function(){return this._placeItems(this.props.maxHeight),this._ref=m.createRef()},componentDidMount:function(){if(null==this.props.maxHeight&&("undefined"==typeof QUnit||null===QUnit))return this._updateHeight(),this.on$(window,"resize",this._updateHeight,this)},componentDidUpdate:function(){if(null==this.props.maxHeight)return this._updateHeight()},render:function(){var e,t,r,i,s,l,u,h,g,y;return h=function(){var e,n,o,h;for(h=[],e=0,n=(o=this.state.toolbarItems).length;e<n;e++)s=o[e],i=this.props.isExpanded?void 0:s.getLabel(),l=m.createElement(c,{iconName:s.getDefinition().getIconUrl()}),u=s.getExperiencePopoverName()?m.createElement(a,{experienceName:s.getExperiencePopoverName(),align:"right top",position:"overflowBoundaryElement",className:"onboarding-edit-relationship-popover",footer:this._getExperienceHelpLink(s),icon:m.createElement(_,{category:"utility",name:"description",size:"small",inverse:!0})},l):l,l=m.createElement("div",{key:"icon",className:d,"data-tooltip":i},u),g=this.props.isExpanded?[m.createElement("div",{key:"hotKey",className:"hotKey"},s.getHotKey()),l,m.createElement("div",{key:"label",className:"label"},s.getLabel())]:l,t="item "+s.getCode(),r=C.bind(this._onItemDragStart,this,s),h.push(m.createElement("div",{key:s.getCode(),className:t,"data-item-name":s.getCode(),onClick:C.bind(this._onItemClick,this,s),draggable:!0,onDragStart:r},g));return h}.call(this),C.isEmpty(this.state.moreItems)||(h.push(m.createElement("div",{ref:"more",key:"moreButton",className:"item more","data-item-name":"more",onClick:this._toggleMoreMenu},m.createElement("div",{key:"icon",className:"iconImage","data-tooltip":p.getLabel("DashboardToolbar","more")},m.createElement(c,{iconName:"dots"})))),this.state.showMoreMenu&&(y=function(){var e,t,r,i;for(i=[],e=0,t=(r=this.state.moreItems).length;e<t;e++)s=r[e],i.push(n.Item.newItem(s.getCode(),s.getLabel(),s.getDefinition().getIconUrl(),s.getLabel()));return i}.call(this),h.push(m.createElement(o,{key:"moreMenu",onDragStart:this._onMoreDragStart,onBlur:this._onBlurMoreMenu,items:y,menuPosition:n.MenuPosition.RIGHT,getTargetEl:this._getMoreMenuEl})))),e=f.classSet({"dashboard-toolbar":!0,expanded:this.props.isExpanded}),m.createElement("div",{ref:this._ref,className:e},h)},_getExperienceHelpLink:function(e){if(e.getExperiencePopoverHelpArticle())return m.createElement(u,{article:e.getExperiencePopoverHelpArticle()},p.getLabel("LearnSection","learnMore"))},_updateHeight:function(){var e;if(null==this.props.maxHeight&&(e=this._ref.current.offsetHeight)!==this._lastHeight)return this._placeItems(e),this._lastHeight=e},_placeItems:function(e){var t,r,i,n;return null==e&&(e=Number.POSITIVE_INFINITY),(r=Math.floor(e/44))>=(t=s.getEnabledTypes(this.props.assetType))?(n=t,i=[]):(n=t.slice(0,r),i=t.slice(r)),this.setState({toolbarItems:n,moreItems:i})},_toggleMoreMenu:function(){return this.setState({showMoreMenu:!this.state.showMoreMenu})},_onBlurMoreMenu:function(e){if(!b(this._getMoreMenuEl(),e.target))return this._toggleMoreMenu()},_getMoreMenuEl:function(){return this.getRef$("more")},_onItemClick:function(e){var t;return"function"==typeof(t=this.props).onItemClick?t.onItemClick(e):void 0},_onItemDragStart:function(e,t){var r,i;return r=null!=(i=t.currentTarget.getElementsByClassName(d))?i[0]:void 0,this.props.delegate.setDraggingWidgetType(e,t,r)},_onMoreDragStart:function(e,t){return this._onItemDragStart(s.fromCode(e.getId()),t)}})},15572:(e,t,r)=>{var i;i=r(96486),e.exports=function(){function e(){}return e.prototype.setPageTabWidth=function(e){return this._pageTabWidth=e,this},e.prototype.setPageTabStyle=function(e){return this._pageTabStyle=e,this},e.prototype.setSelectedPageTabStyle=function(e){return this._selectedPageTabStyle=e,this},e.prototype.getPageTabWidth=function(){var e;return null!=(e=this._pageTabWidth)?e:128},e.prototype.getPageTabStyles=function(){return null!=this._pageTabWidth?i.extend(this._pageTabStyle,{width:this._pageTabWidth}):this._pageTabStyle},e.prototype.getSelectedTabStyles=function(){return null!=this._pageTabWidth?i.extend(this._selectedPageTabStyle,{width:this._pageTabWidth}):this._selectedPageTabStyle},e}()},34767:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y;m=r(72555),p=r(67294),h=r(45697),y=r(96486),l=r(85600),a=r(8902),u=r(8429).Z,o=r(68653),n=r(5893),g=r(32574),d=r(28388),c=r(40604),_=r(90554).deepCopy,f=r(30077).isOrIn,i=r(5394).Z,s=r(5945).Z,r(81233),e.exports=m({displayName:"WidgetRepositionActionsRC",mixins:[l],propTypes:{selectedGridLayoutWidgets:h.arrayOf(h.instanceOf(s)).isRequired,cloneWidgetAction:h.func.isRequired,moveWidgetAction:h.func.isRequired,additionalClassName:h.string.isRequired,dashboardDescribe:h.instanceOf(i).isRequired},getInitialState:function(){return{showRepositionOptions:!1,showMoveOptions:!1,showCloneOptions:!1,cloneWidgetPageMap:{}}},render:function(){var e,t,r,i,s;return i=[],this.props.dashboardDescribe.getCurrentLayout().getPages().length>1&&(i.push(this._getRepositionAction()),this.state.showRepositionOptions&&(s=this._getMenuComp("reposition")),this.state.showMoveOptions&&(r=this._getMenuComp("move")),this.state.showCloneOptions&&(t=this._getMenuComp("clone"))),e=g.buildClassName("widget-move-actions-container",this.props.additionalClassName),p.createElement("div",{className:e},i,s,r,t)},_getMenuComp:function(e){var t,r,i,s,a;switch(s=[],t="",a=null,e){case"reposition":a=y.bind(this._onRepositionMenuItemClick,this),t="reposition-menu-items",s=[n.Item.newItem("move",u.getLabel("DashboardWidgetAction","moveWidgetPage"),"transform"),n.Item.newItem("clone",u.getLabel("DashboardWidgetAction","cloneWidgetPage"),"clone")];break;case"move":a=y.bind(this._onMoveMenuItemClick,this),t="move-menu-items",s=this._getMoveMenuPageOptions(),i=this._getMenuHeaderComp(e),r=this._getMoveMenuFooterComp();break;case"clone":a=y.bind(this._onCloneMenuItemClick,this),t="clone-menu-items",s=this._getCloneMenuPageOptions(),i=this._getMenuHeaderComp(e),r=this._getCloneMenuFooterComp()}return p.createElement(o,{onClick:a,onBlur:this._onMenuBlur,items:s,getTargetEl:this._getActionMenuEl,menuPosition:n.MenuPosition.ABOVE,anchorPosition:n.AnchorPosition.RIGHT,additionalClassName:t,additionalMenuHeaderComp:i,additionalMenuFooterComp:r})},_getMenuHeaderComp:function(e){var t;return t=function(){switch(e){case"move":return u.getLabel("DashboardWidgetAction","moveMenuHeader");case"clone":return u.getLabel("DashboardWidgetAction","cloneMenuHeader")}}(),p.createElement("div",{className:"dropdown-additional-header-comp"},t)},_getCloneMenuFooterComp:function(){var e;return e=d.makeButton(y.bind(this._onCloneApplyClick,this),u.getLabel("ExplorerCompareTableColumnPropertiesPanel","buttonApply"),1,c.Primary,"generic-btn",this._shouldDisableApplyButton()),p.createElement("div",{className:"dropdown-additional-footer-comp"},d.makeCancel(y.bind(this._onMenuBlur,this)),e)},_getMoveMenuFooterComp:function(){return p.createElement("div",{className:"dropdown-additional-footer-comp add-new-page",onClick:y.bind(this._onMoveMenuNewPageClick,this)},u.getLabel("DashboardWidgetAction","moveAddPage"))},_getRepositionAction:function(){var e;return e=this.state.showRepositionOptions||this.state.showMoveOptions||this.state.showCloneOptions?"up":"down",p.createElement("div",{key:"repositionActionsIcon",ref:"repositionActions",className:"actionIcon repositionActions",onClick:this._toggleRepositionActionMenu,"data-tooltip":u.getLabel("DashboardWidgetAction","repositionActions")},p.createElement(a,{iconName:"transform"}),p.createElement("div",{className:"widget-move-actions"},u.getLabel("DashboardWidgetAction","repositionWidget")),p.createElement(a,{iconName:e}))},_shouldDisableApplyButton:function(){var e;return this.props.dashboardDescribe.getCurrentPageIndex(),!y.some(this.props.dashboardDescribe.getCurrentLayout().getPages(),(e=this,function(t,r){return!e._shouldDisableCloneMenuItem(t,r)&&e._shouldSelectCloneMenuItem(t)}))},_toggleRepositionActionMenu:function(){return this.setState({showRepositionOptions:!this.state.showRepositionOptions,showMoveOptions:!1,showCloneOptions:!1})},_getActionMenuEl:function(){return this.getRef$("repositionActions")},_onMenuBlur:function(e){return f(this._getActionMenuEl(),e.target)||this._toggleRepositionActionMenu(),this.setState({cloneWidgetPageMap:{}})},_onRepositionMenuItemClick:function(e){switch(e.getId()){case"move":this.setState({showMoveOptions:!this.state.showMoveOptions});break;case"clone":this.setState({showCloneOptions:!this.state.showCloneOptions})}return this.setState({showRepositionOptions:!this.state.showRepositionOptions})},_getMoveMenuPageOptions:function(){var e,t,r,i,s,o,a,l;for(s=this.props.dashboardDescribe.getCurrentLayout().getPages(),t=this.props.dashboardDescribe.getCurrentPageIndex(),l=[],r=o=0,a=s.length;o<a;r=++o)i=(e=s[r]).getLabel(),t===r&&(i+=" "+u.getLabel("DashboardWidgetAction","currentPage")),l.push(n.Item.newItem(e.getName(),i,void 0,"",r===t));return l},_getCloneMenuPageOptions:function(){var e,t,r,i,s,o,a,l,d;for(o=this.props.dashboardDescribe.getCurrentLayout().getPages(),t=this.props.dashboardDescribe.getCurrentPageIndex(),d=[],i=a=0,l=o.length;a<l;i=++a)s=(e=o[i]).getLabel(),t===i&&(s+=" "+u.getLabel("DashboardWidgetAction","currentPage")),r=this._shouldSelectCloneMenuItem(e)?"check":"checkx",d.push(n.Item.newItem(e.getName(),s,r,"",this._shouldDisableCloneMenuItem(e,i)));return d},_shouldSelectCloneMenuItem:function(e){return y.every(this.props.selectedGridLayoutWidgets,(t=this,function(r){return e.hasWidgetLayout(r.getWidgetLayout().getWidgetId())||t.state.cloneWidgetPageMap[e.getName()]}));var t},_shouldDisableCloneMenuItem:function(e,t){return t===this.props.dashboardDescribe.getCurrentPageIndex()||!y.some(this.props.selectedGridLayoutWidgets,(function(t){return!e.hasWidgetLayout(t.getWidgetLayout().getWidgetId())}))},_onMoveMenuItemClick:function(e,t){return this.props.moveWidgetAction([this.props.dashboardDescribe.getCurrentLayout().getPageById(e.getId()).getIndex()],t),this._closeAllMenus()},_onMoveMenuNewPageClick:function(e){return this.props.moveWidgetAction([this.props.dashboardDescribe.getCurrentLayout().getPages().length],e),this._closeAllMenus()},_onCloneMenuItemClick:function(e){var t;return(t=_(this.state.cloneWidgetPageMap))[e.getId()]?delete t[e.getId()]:t[e.getId()]=!0,this.setState({cloneWidgetPageMap:t})},_onCloneApplyClick:function(e){var t,r;return t=function(){var e,t,i,s;for(s=[],e=0,t=(i=y.keys(this.state.cloneWidgetPageMap)).length;e<t;e++)r=i[e],this.state.cloneWidgetPageMap[r]&&s.push(this.props.dashboardDescribe.getCurrentLayout().getPageById(r).getIndex());return s}.call(this),this.props.cloneWidgetAction(t,e),this._closeAllMenus()},_closeAllMenus:function(){return this.setState({showRepositionOptions:!1,showMoveOptions:!1,showCloneOptions:!1})}})},53862:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p;i=r(70351),p=r(72555),l=r(67294),a=r(45697),r(96486),c=r(76126).Z,d=r(50130).Z,u=r(84198).Z,o=r(8429).Z,h=r(32574),r(8902),r(52570),n=r(44368),s=r(68181),r(2120).v,r(60056),e.exports=p({displayName:"FilterItemRC",propTypes:{filterItem:a.instanceOf(s).isRequired,canEdit:a.bool,onRemoveClick:a.func,onEditClick:a.func,filterIndex:a.number,filterItemStyle:a.object,filterItemFieldStyle:a.object,filterItemValueStyle:a.object,filterActionIconStyle:a.object,isFilterInLastRow:a.bool,isFilterInLastColumn:a.bool,forwardRef:a.func,isViewMode:a.bool,isTooltipMode:a.bool,dashboardTheme:a.string,themedStyle:a.object},getDefaultProps:function(){return{canEdit:!1,isViewMode:!0}},render:function(){var e,t,r,i,s,o,a,u,d,p,g,m,_,f;return o=this.props.filterItem.getFilterFields(),e=this.props.filterItem.getExtendedMetadata(),u=this.props.filterItem.getFilterMetadata(),this.props.filterItem.getAssetMetadata(),s=null!=(_=null!=u?u.getLabel():void 0)?_:n.formatFilterField(o,e),1===o.length&&(o=o[0]),1===o.length?o[0]:o,a=n.formatOperatorAndValue([o,this.props.filterItem.getFilterValues(),this.props.filterItem.getFilterOperator()],e),i=h.buildClassName("filter-item","filter-item-"+this.props.filterIndex,this.props.isFilterInLastColumn?"last-column":void 0,this.props.isFilterInLastRow?"last-row":void 0,this.props.canEdit?"is-view-mode":void 0,this.props.filterItem.isLocked()?"locked-filter-item":void 0),d=s+" "+a,p=this.props.canEdit&&this.props.filterItem.isLocked()?void 0:this.onEditClick,g=function(e){if("Enter"===e.key||" "===e.key)return p(e),e.stopPropagation()},f=this,m=function(){return f._triggerRef},t=l.createElement("div",{className:"filter-data",tabIndex:0,ref:this._setTriggerRef},l.createElement("div",{className:"filter-field",style:this.props.filterItemFieldStyle},s),l.createElement("div",{className:"filter-operator-value",style:this.props.filterItemValueStyle},a)),r=this.props.isViewMode?l.createElement(c,{id:"filter-data-tooltip",align:"bottom",position:"overflowBoundaryElement",content:d,triggerStyle:{display:"contents"},onRequestTargetElement:m},t):t,l.createElement("div",{className:i,style:this.props.filterItemStyle,onClick:p,ref:this.props.forwardRef,tabIndex:"0","aria-label":d,onKeyDown:g,role:"button","aria-haspopup":"true"},r,this._getFilterActionIcon())},_getFilterActionIcon:function(){return this.props.filterItem.isLocked()?l.createElement(c,{id:"locked-filter-icon-tooltip",align:"bottom",triggerClassName:"locked-filter-item",position:"overflowBoundaryElement",content:o.getLabel("DashboardFilterPanel","lockedFilterItem")},l.createElement(u,{iconName:"lock",iconClassName:"actionIcon",size:"xx-small",iconCategory:"utility",style:this.props.filterActionIconStyle,assistiveText:{label:o.getLabel("DashboardFilterPanel","lockedFilterItem")},variant:"icon"})):this.props.canEdit?l.createElement(c,{id:"edit-filter-icon-tooltip",align:"bottom right",triggerClassName:"edit-filter-item",position:"overflowBoundaryElement",content:o.getLabel("DashboardFilterPanel","editFilterItem")},l.createElement(d,{name:"chevrondown",className:"actionIcon",size:"xx-small",category:"utility",tabIndex:0,style:this.props.filterActionIconStyle,assistiveText:{label:o.getLabel("DashboardFilterPanel","editFilterItem")}})):null!=this.props.onRemoveClick?l.createElement(c,{id:"remove-filter-icon-tooltip",align:"bottom",triggerClassName:"remove-filter-item",position:"overflowBoundaryElement",content:o.getLabel("DashboardFilterPanel","removeFilterItem")},l.createElement(u,{iconName:"close",iconClassName:"actionIcon",size:"xx-small",iconCategory:"utility",style:this.props.filterActionIconStyle,onClick:this.props.onRemoveClick,assistiveText:{label:o.getLabel("DashboardFilterPanel","removeFilterItem")},variant:"icon"})):void 0},onEditClick:function(e){var t;return this.props.canEdit&&i(e.currentTarget).data("clicked",!0),"function"==typeof(t=this.props).onEditClick?t.onEditClick(this.props.filterItem,this.props.filterIndex,e):void 0},_setTriggerRef:function(e){return this._triggerRef=e}})},58692:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T;y=r(72555),m=r(67294),g=r(45697),T=r(96486),E=T.pick,b=T.isEqual,C=T.partial,u=r(53811),d=r(83733).Z,r(79091),p=r(85600),_=r(32574),h=r(98410),c=r(43677).B,l=r(66043),a=r(6137).Z,f=r(56331).Z,S=r(69876).V,s=r(40406),o=r(5945).Z,n=r(17369).Z,r(87522),i=y({displayName:"ContainerWidgetRC",mixins:[p,l],propTypes:{containedWidgets:g.arrayOf(g.instanceOf(o)).isRequired,gridCellSpacing:g.shape({x:g.number,y:g.number})},contextTypes:{delegate:g.instanceOf(n).isRequired,widgetSelector:g.instanceOf(a).isRequired,hasProxy:g.bool.isRequired,previewMode:g.bool.isRequired,isViewportRendering:g.bool,onMouseDown:g.func.isRequired,onClick:g.func.isRequired,onDoubleClick:g.func.isRequired,onDragStart:g.func.isRequired,onStartResize:g.func.isRequired,getWidgetPositionOverride:g.func.isRequired,getWidgetLocationStyle:g.func.isRequired,getContainerChange:g.func.isRequired,isKeyboardMoveInProgress:g.bool.isRequired,selectWidget:g.func.isRequired,hotkeyManager:g.instanceOf(u).isRequired,hasSingleWidgetSelected:g.func.isRequired,isWidgetSelected:g.func.isRequired,onUpdateViewport:g.func.isRequired},getInitialState:function(){return{activeWidgetId:void 0,hoveredWidgetUID:void 0,layout:void 0}},UNSAFE_componentWillMount:function(){return this._buildContainedWidgetsMap(this.props)},componentDidMount:function(){return this._mountAndUpdate(),this._fetchImageUrl().then((e=this,function(t){if(!t)return e._setWidgetRendered()}));var e},UNSAFE_componentWillReceiveProps:function(e){return this._buildContainedWidgetsMap(e)},componentDidUpdate:function(e){if(this._mountAndUpdate(),b(E(e.widget.getParameters(),"image","documentId"),E(this.props.widget.getParameters(),"image","documentId"))||this._fetchImageUrl(),this.props.imageUrl)return this._setWidgetRendered()},_render:function(){var e,t,r,i,s;return i=this.props.widget.getParameters(),r=Object.assign({},new h(i,this.props.imageUrl).getInlineStyle(),this.props.resolvedWidgetInlineStyle,this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme)),this.props.imageNotFound&&(t=m.createElement(f,null)),e=(null!=(s=i.image)?s.name:void 0)||"",this.props.widget.getParameter("interactions")&&this.props.widget.getParameter("interactions").length>0?(r.cursor="pointer",m.createElement("div",{className:"containerWidget container-widget background-image",style:r,role:"link",tabIndex:0,onClick:this._onClick,onKeyDown:this._onKeyDown},m.createElement("span",{className:"image",role:"img",style:{display:"block",height:this.props.height,width:this.props.width},"aria-label":e}),t,m.createElement("div",{className:"widgets"},this._renderWidgets()))):m.createElement("div",{className:"containerWidget container-widget background-image",style:r},m.createElement("span",{className:"image",role:"img",style:{display:"block",height:this.props.height,width:this.props.width},"aria-label":e}),t,m.createElement("div",{className:"widgets"},this._renderWidgets()))},_renderWidgets:function(){var e,t,r,i,s,n,o,a,l;for(l=[],n=0,o=(a=this._getContainedWidgets(this.props)).length;n<o;n++)t=(e=a[n]).getUID(),i=this.context.isWidgetSelected(t),r=_.classSet({"contained-widget":!0,"contained-widget-allow-overlay":!0===e.getWidget().getParameter(c)}),s=!this.context.previewMode&&this.context.delegate.canResizeWidget(e)&&i,l.push(m.createElement(d,{ref:C(this._setWidgetRef,t),key:t,widget:e,delegate:this.context.delegate,layout:this.state.layout,previewMode:this.context.previewMode,isViewportRendering:this.context.isViewportRendering,extraWidgetClassName:r,isSelected:i,isHovered:this.state.hoveredWidgetUID==t,isKeyboardMoveInProgress:this.context.isKeyboardMoveInProgress,showProxy:s,showResizeComp:this.context.hasSingleWidgetSelected(),disallowButtonInteraction:this.context.hotkeyManager.disallowButtonInteraction(),isVisible:this.state.focusedWidgetId===t&&this.state.showWidgetActionTrigger,locationStyle:this.context.getWidgetLocationStyle(e,this.state.layout),onClick:this._onClickWidget,onDoubleClick:this._onDoubleClickWidget,onMouseDown:this._onMouseDownWidget,onMouseOver:this._onMouseOverWidget,onMouseOut:this._onMouseOutWidget,onMouseEnter:this._onMouseEnterWidget,onMouseLeave:this._onMouseLeaveWidget,onDragEnter:this._onDragEnterWidget,onDragLeave:this._onDragLeaveWidget,onDragStart:this._onDragStartWidgets,onStartResize:this._onStartResizeWidget,onUpdateViewport:this.context.onUpdateViewport,selectWidgetHandle:this.context.selectWidget}));return l},_mountAndUpdate:function(){var e,t,r,i,n,o;if(i=null!=(n=this.context.getWidgetPositionOverride(this.props.widget.getId()))?{row:n.row,column:n.column,columnSpan:n.width,rowSpan:n.height}:{row:this.props.widgetLayout.getRow(),column:this.props.widgetLayout.getColumn(),columnSpan:this.props.widgetLayout.getColumnSpan(),rowSpan:this.props.widgetLayout.getRowSpan()},o=0===(r=this._getInnerDimensions()).width||0===r.height||b(this._lastContainerDimensions,r),!b(this._gridPosition,i)||!o)return this._gridPosition=i,this._lastContainerDimensions=r,t=function(){var e,t,r;for(r=[],e=0,t=this._gridPosition.columnSpan;0<=t?e<t:e>t;0<=t?e++:e--)r.push(1);return r}.call(this),e=(r.height-this.props.gridCellSpacing.y*(this._gridPosition.rowSpan+1))/this._gridPosition.rowSpan,this.setState({layout:new s(r.width,r.height,e,t,this.props.gridCellSpacing,this._gridPosition.row,this._gridPosition.column)})},_getContainedWidgets:function(e){var t,r,i,s;return t=null!=(s=e.containedWidgets)?s:[],null!=(r="function"==typeof(i=this.context).getContainerChange?i.getContainerChange(this.props.widget.getId()):void 0)&&(t=r.getWidgetChanges(t)),t},_onMouseDownWidget:function(e,t){return this.context.onMouseDown(e,t)},_onClickWidget:function(e,t){return this.context.onClick(e,t)},_onDoubleClickWidget:function(e,t){return this.context.onDoubleClick(e,t),t.preventDefault()},_onDragStartWidgets:function(e,t){return this.context.onDragStart(e,t)},_onDragEnterWidget:function(e){return this.context.widgetSelector.didMouseEnterWidget(e)},_onDragLeaveWidget:function(e){return this.context.widgetSelector.didMouseLeaveWidget(e)},_onMouseEnterWidget:function(e){return this.setState({activeWidgetId:e})},_onMouseLeaveWidget:function(){return this.setState({activeWidgetId:void 0})},_onStartResizeWidget:function(e,t,r){return this.context.onStartResize(e,t,r)},_onMouseOverWidget:function(e,t){if(!this.context.previewMode&&!t.isDefaultPrevented())return this.setState({hoveredWidgetUID:e}),t.preventDefault()},_onMouseOutWidget:function(e){if(!this.context.previewMode&&!e.isDefaultPrevented())return this.setState({hoveredWidgetUID:void 0}),e.preventDefault()},_showResize:function(e){var t;return(null!=(t=this.context.widgetSelector)?t.isSelected(e):void 0)&&!this.context.previewMode},_buildContainedWidgetsMap:function(e){var t,r,i,s;for(this._containedWidgetsMap={},r=0,i=(s=this._getContainedWidgets(e)).length;r<i;r++)t=s[r],this._containedWidgetsMap[t.getWidget().getId()]=!0},_setWidgetRef:function(e,t){return this.refs[e]=null!=t?t.widgetContainer:void 0,this.refs.resize=null!=t?t.proxy:void 0},_onKeyDown:function(e){if("Enter"===e.key)return this._onClick()},_onClick:function(){return this.props.runtimeSubscriber.publishInteractionMessage(this.props.widget)},_fetchImageUrl:function(){var e,t,r;return e=this.props.widget.getParameter("image"),this.props.fetchImageUrl({name:null!=(t=null!=e?e.name:void 0)?t:this.props.widget.getParameter("documentId"),namespace:null!=(r=null!=e?e.namespace:void 0)?r:""})}}),e.exports=S(i)},22422:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L,M,N,O,P,x,Z,F,k,B,W,G,U,H,V,j,q,z,$,Q,Y,K,J,X,ee,te,re,ie,se,ne,oe,ae,le,ue,de,ce,he,pe,ge,me,_e;z=r(57715).Z,J=r(12678),r(2931).Z,oe=r(72555),W=r(45697),U=r(67294),H=r(73935),_e=r(96486),ue=_e.isEmpty,le=_e.isArray,de=_e.isEqual,pe=_e.size,he=_e.keys,ge=_e.union,se=_e.assign,ne=_e.cloneDeep,V=r(8160).Z,S=r(37469).Z,$=r(61506).Z,T=r(45131).Z,I=r(69008).Z,r(8902),M=r(85600),Z=r(32350),o=r(16045).Z,N=r(8429).Z,B=r(57244).Z,y=r(69499),R=r(53811),O=r(22787).Z,ae=r(90554).deepCopy,$=r(61506).Z,r(18111),ee=r(24293).Z,l=r(16898).Z,p=r(1806),x=r(90877).Z,q=r(1611).Z,b=r(36563),u=r(93330).Z,Y=r(6597).ZP,f=r(66537),k=r(21821).Js,i=r(78199).Z,s=r(80012).Z,n=r(40651).Z,X=r(25778),r(59017).Z,a=r(74577),h=r(19422),E=r(2355).Z,G=r(86170).Z,w=r(53581).Z,g=r(59816),te=r(99891).C3,re=r(44458).Z,F=r(46144).Z,K=r(49171).Z,D=r(70100).Z,P=r(69985).Z,r(11624),r(13822).Z,d=r(98891).Z,r(67427).Z,m=r(70210).Z,_=r(66043),L=r(32570).Z,ie=r(48556).Z,c=r(177).Z,ce=r(2120).b,Q=r(2120).v,A=r(67932).Z,me=r(27911).X,j=r(94035).Z,v=q.DIMENSION,C=oe({displayName:"EclairNgWidgetRC",mixins:[M,_],propTypes:{invalidChartRenderer:W.func,hasRecordActions:W.bool,hasSelections:W.bool,hasInteractions:W.bool,interactionType:W.instanceOf(D),selectMode:W.string,dataCursor:W.string,showConditionalFormattingWarning:W.bool},contextTypes:{appContext:W.instanceOf(ee).isRequired,appServices:W.object.isRequired,addDashboardComponent:W.func.isRequired,removeDashboardComponent:W.func.isRequired,hotkeyManager:W.instanceOf(R).isRequired},getDefaultProps:function(){return{hasRecordActions:!0,hasSelections:!0,hasInteractions:!0,interactionType:D.VALUE,showConditionalFormattingWarning:!1}},getInitialState:function(){return{data:null,selection:[],isChartLoaderReady:!1,areMapsLoaded:!1,fiscalGranularity:null,shouldWaitForFiscalGranularity:!1}},UNSAFE_componentWillMount:function(){return this._chartSize=null,this._chart=null},_hasColumnsChanged:function(e){var t,r;return r=this.props.resolvedWidget.getParameter("columns"),t=e.resolvedWidget.getParameter("columns"),!de(r,t)},_hasColumnMapChanged:function(e){var t,r;return r=this.props.resolvedWidget.getParameter("columnMap"),t=e.resolvedWidget.getParameter("columnMap"),!de(r,t)},shouldComponentUpdate:function(e,t){var r;return r=this._getInnerDimensions(e,t),de(r,this._chartSize)?!!this._widgetStatusRequiresUpdate(e,t)||(this.props.dashboardTheme!==e.dashboardTheme||this._hasAllUpdates()&&(this._perhapsShouldComponentUpdate(e,t)||e.hasRecordActions!==this.props.hasRecordActions||e.hasSelections!==this.props.hasSelections||e.hasInteractions!==this.props.hasInteractions)):(this._chartSize=r,!0)},componentDidMount:function(){return this._initializeChartLoader(),null!=this._removeSelectionHandler?this._removeSelectionHandler:this._removeSelectionHandler=this.props.runtimeSubscriber.addSelectionHandler(this._onSelection)},componentDidUpdate:function(){return(null==this.state.resultMessage||!this.state.resultMessage.isError()&&0!==this.state.resultMessage.getData().length)&&this._isValidChartType()&&this._isValidSize()&&!this._showConditionalFormattingWarning()||this._markRenderEnd(),this._loadMapsIfNeeded()},componentWillUnmount:function(){return"function"==typeof this._removeSelectionHandler?this._removeSelectionHandler():void 0},_render:function(){var e,t;return this._isLoadingMapsNeeded()&&(e=U.createElement(z,{variant:"brand"})),t=ne(this.props.resolvedWidgetInlineStyle),ue(this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme))||se(t,this.props.widgetDefinition.getThemedStyle(this.props.dashboardTheme)),U.createElement("div",{onContextMenu:this._onRightClick,style:t,className:"chart-widget-container",dir:"ltr","aria-label":N.getLabel("DashboardWidgetType","ariaLabel",N.getLabel("DashboardWidgetType","chart"))},this._renderChart(),this._renderSpinner(),this._renderOverlayWhenPaused(),U.createElement(A,{inlineEditState:this.props.inlineEditState}),e)},_renderInvalidChart:function(){var e,t,r,i;if(e=this._getChartType().getCode(),null!=(t=(i=this._isValidColumnMap())?this._isValidChartType()?void 0:N.getLabel("InvalidChartTypeErrorMessages",e):N.getLabel("InvalidChartTypeErrorMessages","invalidColumnMap"))){if(null!=this.props.invalidChartRenderer){if(!i)return;return this.props.invalidChartRenderer(e)}return r="chart-thumb-"+e,U.createElement(L,{iconName:r,content:t})}},_renderChart:function(){var e,t,r,i,s,n,o,a,l,u,d,c,h,p,g,_,f,b;return!this.state.isChartLoaderReady||null!=this.state.resultMessage&&this.state.resultMessage.isError()||null==this.state.data||this._isLoadingMapsNeeded()||this.state.shouldWaitForFiscalGranularity?U.createElement("div",null):null!=(n=this._renderInvalidChart())?n:(d=this._getResultsMetadata(!0),e=this._getChartType().getDefinition(),t=this._buildConfig(e,d),(r=new m(this.props.dashboardTheme)).getDefaultChartThemeOverride()&&null!==(null!=(g=t.theme)?g.base:void 0)&&(t.theme.base=r.getDefaultChartThemeOverride()),l=this.props.resolvedWidget.getParameter("padding"),c=e.buildRowsMetadata(d,this._resultFormatter,this.state.data,this.props.resolvedWidget,this._isCustomFiscalEnabled()&&null!=this.state.fiscalGranularity,this.state.fiscalGranularity),a=this.props.resolvedWidget.getParameter("markers"),h=null!=(_=null!=(f=this.props.resolvedWidget.getParameter("_selection"))?f:this.props.chartSelection)?_:this.state.selection,p=(b=this._getChartSize())[0],s=b[1],u=this.props.viewportRendering&&!window.testMode,o=this._showConditionalFormattingWarning()?U.createElement(ie,{content:N.getLabel("ConditionalFormatting","inValidChartError")}):void 0,i=document.hidden||!y.isVisible(document.body)||this.context.appContext.referrer===V.HEADLESS_RENDERER,U.createElement("div",{className:"chart-rendering"},U.createElement(J,{renderOnDemand:u,force:!u,width:p,height:s,chartModule:e.getEclairNGModuleName(),config:t,rows:this.state.data,rowsMetadata:c,selection:h,annotations:this._getChartMarkers(a),durations:{default:this.props.isViewMode?800:400,firstRender:i?0:this.props.isViewMode?800:400,resize:i?0:300},onAfterRender:this._onAfterRender,onClickChart:this._onMouseClick,onClickLegend:this._onLegendMouseClick,onEnterChartHotSpot:this._onMouseEnterHotSpot,onEnterLegendHotSpot:this._onMouseEnterHotSpot,onLeaveChartHotSpot:this._onMouseLeaveHotSpot,onLeaveLegendHotSpot:this._onMouseLeaveHotSpot,onSelectionChange:this._guardForUncaughtException(this._onChartSelection),onSort:this._onSort,onPerfReady:this._onPerfReady,setChartInstance:this._setChartInstance,padding:l,tooltipRenderer:this._renderTooltip,removeTooltip:this._removeTooltip,canRemoveTooltip:this._canRemoveTooltip,legendSorter:this.getLegendSorter()}),o))},_buildConfig:function(e,t){var r,i,s;return r=e.buildConfig(this.props.resolvedWidget,t,this._resultFormatter,void 0),null!=this.props.selectMode&&(r.selectMode=this.props.selectMode),null!=this.props.dataCursor&&(r.dataCursor=this.props.dataCursor),r.sorting.enabled=this._isSortEnabled(r),r.tooltip&&(r.tooltip.isInteractiveTooltip=!ue(null!=(i=this._getTooltipContentParameter())&&null!=(s=i.widget)?s.name:void 0)&&!this.props.isTooltipMode),r},_canCustomizeTooltip:function(){return this._getChartType().getDefinition().supportsCustomTooltips()},_getTooltipContentParameter:function(){var e;return null!=(e=this.props.resolvedWidget.getParameter("tooltip"))?e.content:void 0},_renderTooltip:function(e,t){var r,n;if(!this._canCustomizeTooltip()||!ce(this._getTooltipContentParameter()))return r=this._resultMetadata.getGroupingColumnNames({includeAllGroupings:!0,removeCompoundParts:!0}).map((function(e){return t.data.row[e]})),(n=document.createElement("div")).setAttribute("id",this._getTooltipElId()),H.render(U.createElement(O,{context:this.context},U.createElement(i.Provider,{value:this.context.appContext},U.createElement(s.Provider,{value:this.context.appServices},U.createElement(c,{widgetId:this.props.resolvedWidget.getId(),content:this._getTooltipContent(e,t),metadataProvider:this.props.metadataProvider,dashboardDescribe:this.props.dashboardDescribe,executeMutators:this.props.executeMutators,isViewMode:this.props.isViewMode,layoutSwitcher:this.props.layoutSwitcher,deepLinker:this.props.deepLinker,imageManagerDelegate:this.props.imageManagerDelegate,focusedRowValues:r,isPreview:!1})))),n),n},_canRemoveTooltip:function(){return!this._getTooltipWidgetPopoverEl()},_removeTooltip:function(){var e;if(e=document.getElementById(this._getTooltipElId()))return this._getTooltipWidgetPopoverEl()&&Z.trigger("tooltip:hide_popovers"),H.unmountComponentAtNode(e),e.remove()},_getTooltipElId:function(){var e,t;return!this.props.isTooltipMode&&(null!=(e=this._getTooltipContentParameter())&&null!=(t=e.widget)?t.name:void 0)?"interactive-custom-tooltip-container":"custom-tooltip-container"},_getTooltipWidgetPopoverEl:function(){return document.getElementsByClassName(Q)[0]},_getTooltipContent:function(e,t){var r,i,s,n;return(r={}).legend={},this.props.isTooltipMode||!this._canCustomizeTooltip()||ue(t.data.row)||(n=this._getTooltipContentParameter(),r.widget=ae(n.widget)),s=[],i=[],e.forEach((function(e){var t;switch(e.type){case"text":if(t=e.label,!ue(t))return r.description=[t];break;case"measure":return s.push(e);default:return i.push(e)}})),r.legend.measures=s,r.legend.dimensions=i,r},_setChartInstance:function(e){this._chart=e},_getChartSize:function(){var e;return[(e=this._getInnerDimensions()).width,e.height]},_getTitle:function(){var e;return null!=(e=this.props.resolvedWidget.getParameter("title"))?e.label:void 0},_isValidChartType:function(){return null==this.state.data||this._getChartType().getDefinition().isValidForLens(this.props.widget.getLens(),this._resultMetadata,this._resultFormatter,this.props.resolvedWidget,this.props.dashboardMetadata.getDateVersion(),this._isCustomFiscalEnabled())},_isValidColumnMap:function(){var e;return!(e=this.props.resolvedWidget.getParameter("columnMap"))||a.isValid(e,this._resultMetadata)},_isValidSize:function(){var e,t,r;return t=(r=this._getInnerDimensions()).width,e=r.height,t>0&&e>0},_showConditionalFormattingWarning:function(){return!(null==this._lastResultMessage||this._getChartType().getDefinition().isCurrentRuleEmpty(this.props.resolvedWidget,this._fullResultsMetadata,this._resultFormatter)||this.props.isViewMode&&!this.props.showConditionalFormattingWarning)&&!this._getChartType().getDefinition().isCurrentRuleValid(this.props.resolvedWidget,this._fullResultsMetadata,this._resultFormatter)},_onResult:function(e){var t,r,i,s,n,o;return this._hasNewResultMessage=!0,this._lastResultMessage=e,this._resultFormatter=e.getFormatter(),this._fullResultsMetadata=this._lastResultMessage.getMetadata(),this._resultMetadata=this._getResultsMetadata(!1),this._lastResultMessage.isError()?r=null:(n=this._getWidgetMeasures(this.props.resolvedWidget,this._fullResultsMetadata),i=this._getWidgetDimensions(this.props.resolvedWidget,this._fullResultsMetadata),r=b.processDataRows(this._lastResultMessage.getData(),n,i),null!=(o=this.props.resolvedWidget.getParameter("rows"))&&(r=function(){var e,t,i;for(i=[],s=e=0,t=Math.min(o,pe(r));0<=t?e<t:e>t;s=0<=t?++e:--e)i.push(r[s]);return i}()),null!=(t=this.props.resolvedWidget.getParameter("columnMap"))&&(r=new d(this._resultMetadata,t,r).getDataForCompoundDates()),this._buildFiscalGranularity(Array.from(this._resultMetadata.getTimeColumnNames()))),{data:r}},_getResultsMetadata:function(e,t){var r,i,s,n,o;return null==e&&(e=!1),n=t||this._lastResultMessage.getMetadata(),i=this.props.resolvedWidget.getParameter("columns"),r=this.props.resolvedWidget.getParameter("columnMap"),ue(i)?null!=r&&(o=a.getAllColumnNames(r)):o=i,ue(o)?n:(e&&(s=ge(o,n.getColumnNames())),new x(n,null!=s?s:o))},_markRenderEnd:function(){return this._setWidgetRendered(),this._appendWidgetRenderedClassName()},_onAfterRender:function(e){if("update"===e.type)return this._markRenderEnd()},_onPerfReady:function(e){var t;if("ok"===(null!=e&&null!=(t=e.info)?t.renderStatus:void 0))return $.get(o).trigger(new S(void 0,"waveChartRender",e.duration,Object.assign({},e.info,{syncDuration:e.syncDuration})))},_onBeginInteraction:function(){var e,t;return null!=(e=this._chart)&&e.hideTooltip(),null!=(t=this._chart)?t.stopMouseInteraction():void 0},_onEndInteraction:function(){if(this._chart&&!this._chart.isRemoved())return this._chart.startMouseInteraction(),this._getSceneProcessors().main.onMouseLeave(),this._getSceneProcessors().legend.onMouseLeave()},_onMouseEnterHotSpot:function(e){var t,r,i,s,n,o,a,l;return n=(a=e.hotSpot.box).x,o=a.y,s=a.w,t=a.h,i=(l=this._getSceneProcessors().main.getChartOffsetXY())[0],r={top:o+l[1],left:n+i,outerHeight:t,outerWidth:s},Z.trigger("callout:hide"),Z.trigger("chrome:show_tooltip",N.getLabel("InsightsRecordActions","menuIconTooltip"),r)},_onMouseLeaveHotSpot:function(){return Z.trigger("chrome:hide_tooltip")},_onLegendMouseClick:function(e){var t,r;if(t=e.hotSpot,r=e.shape,t&&r)return this._showRecordActions(t,r,e.nativeEvent)},_onMouseClick:function(e){var t,r;return t=e.hotSpot,r=e.shape,t&&r&&this._showRecordActions(t,r,e.nativeEvent),this._buildAndPublishInteraction(e)},_onRightClick:function(e){var t;return t={nativeEvent:e.nativeEvent},this._buildAndPublishInteraction(t)},_onSelection:function(e){var t;return t=this._getResultsMetadata(!0,e.getMetadata()),this.setState({selection:new d(t,null!=t?t.getColumns():void 0,e.getData()).getDataForCompoundDates()})},_onChartSelection:function(e){var t,r;if(this.props.hasSelections)return r=ue(e)?new E:this.props.widget.getLens().getSelectMode()===p.SelectMode.RANGE?new G([e]):(r=new w,t=this._resultMetadata.getGroupingColumnNames({removeCompoundParts:!0}),e.forEach((function(e){return r.addSelectedValue(t.map((function(t){return e[t]})))})),r),this.props.runtimeSubscriber.getLensConnector().callCapabilityMethod(g.SELECTION,"onSelection",[r,P.USER])},_onSort:function(e){var t,r,i,s,n,o,a,d,c;if(t=e.column,n=e.order,r=t[0],null!=(a=this.props.runtimeSubscriber.getLensConnector())?a.callCapabilityMethod(g.SORT,"isQuickSortEnabled"):void 0)return o=null!=(d=this.props.runtimeSubscriber.getLensConnector())?d.callCapabilityMethod(g.SORT,"getOriginalColumnSortInfos"):void 0,i=u.getColumnSortCycle(o,this._resultMetadata,r),s="asc"===n?l.Ascending:"desc"===n?l.Descending:i.getDefaultColumnSort(),null!=(c=this.props.runtimeSubscriber.getLensConnector())&&c.callCapabilityMethod(g.SORT,"onSort",[this._resultMetadata.getColumn(r),s]),this._logSort()},_logSort:function(){return $.get(o).trigger(new I(T.DASHBOARD,"quickSortOnChart",1,{categories:["WIDGET","QUICK_SORT"],deprecatedContext:this.props.widget.getLens().getType()}))},_getWidgetMeasures:function(e,t){var r,i,s,n,o;if(null!=e.getMeasures())return e.getMeasures();for(o=[],s=0,n=(i=t.getColumns(q.MEASURE)).length;s<n;s++)r=i[s],o.push(r.getName());return o},_getWidgetDimensions:function(e,t){var r,i,s,n,o;if(null!=e.getDimensions())return e.getDimensions();for(o=[],s=0,n=(i=t.getColumns(q.DIMENSION)).length;s<n;s++)r=i[s],o.push(r.getName());return o},_getChartType:function(){return h.getEnumByCode(this.props.resolvedWidget.getParameter("visualizationType"))},_isWidgetMapType:function(){var e;return(e=this._getChartType())===h.CHOROPLETH||e===h.BUBBLEMAP||e===h.GEOMAP},_getChartMarkers:function(e){var t,r,i;return null==e&&(e=[]),pe(e)?(r=[],t=this._resultMetadata.getGroupings(),e.forEach((i=this,function(e){var s,n,o,a,l,u,d,c,h,p,g,m,_,f;if(g=e.row,c=e.measure,p=e.properties,le(g)||(g=[g]),t.length===g.length)return m=p.showDimensions,_=p.showMeasures,u=p.dimensions,h=p.measures,s=p.backgroundColor,n=p.borderColor,l=p.defaultShow,d=p.isBlinking,a=p.customText,null==m&&(m=!0),null==_&&(_=!0),o=[],m&&u.length&&(o=o.concat(u)),_&&h.length&&(o=o.concat(h)),a&&!le(a)&&(f={template:a}),r.push({row:b.getRowDataFromValues(g,i._resultMetadata),measure:c,properties:{column:o,backgroundColor:s,borderColor:n,defaultShow:l,isBlinking:d,text:f}})})),r):[]},_showRecordActions:function(e,t,r){var i,s,o,a,l,u,d,c,h,p,m,_,f,y,b,C,E;if(this.props.hasRecordActions&&(o=t.data))return h=o.row,o.column,y=(C=e.box).x,b=C.y,f=C.w,d=C.h,m=(E=this._getSceneProcessors().main.getChartOffsetXY())[0],_=E[1],a=this._lastResultMessage.getQueryInfo().datasetMetadatas[0].getId(),this._chart.stopMouseInteraction(),i=this.props.dashboardMetadata.getType()===n.COMPONENT?this.props.dashboardMetadata.getFullyQualifiedName():void 0,l={defaultAction:k,clickedRows:[h],datasetId:a,menuPosition:{left:m+y+f/2,top:_+b+d/2},invokingComponent:this,onMenuClose:this._onEndInteraction,isTooltipMode:this.props.isTooltipMode,componentFqn:i},c=this._resultMetadata.getColumn(o.column),s=new te(D.RECORD_ACTION,{widgetMetadata:this.props.widget,interactionColumn:c,event:r,extra:l}),u=new re(this._cleanseInteractionData(o.row),this._resultMetadata).getFilteredData(v),(p=new K).setGroupings(u),this.props.runtimeSubscriber.getLensConnector().callCapabilityMethod(g.INTERACTION,"onInteraction",[s,p])},_buildAndPublishInteraction:function(e){var t,r,i;if(this.props.hasInteractions)return t=(i=this._buildInteraction(e)).ctx,r=i.selector,this.props.runtimeSubscriber.getLensConnector().callCapabilityMethod(g.INTERACTION,"onInteraction",[t,r])},_buildInteraction:function(e){var t,r,i,s,n,o,a,l,u,d,c,h;return n=e.hotSpot,d=e.shape,r=this._cleanseInteractionData(null!=d&&null!=(c=d.data)?c.row:void 0),i=e.nativeEvent,a=D.OTHER,t=null,u=new F,null==n&&null!=d&&null!=r&&(s=(o=new re(r,this._resultMetadata)).getFilteredData(v),l=he(s).length,o.hasColumn(v)&&!o.hasColumn(q.MEASURE)?(a=D.VALUE,u=new K,t=this._resultMetadata.getGroupings()[l-1],u.setGroupings(s)):o.hasColumn(q.MEASURE)&&(a=this.props.interactionType,u=new K,t=o.getColumns(q.MEASURE)[0],u.setMeasureName(t.getName()),u.setGroupings(s))),{ctx:new te(a,{widgetMetadata:this.props.widget,interactionColumn:t,event:i,extra:{measure:null!=d&&null!=(h=d.data)?h.column:void 0},handlers:{onBeginInteraction:this._onBeginInteraction,onEndInteraction:this._onEndInteraction}}),selector:u}},_cleanseInteractionData:function(e){var t;if(null!=e){for(t in e)e[t],null==this._resultMetadata.getColumn(t)&&delete e[t];return e}},_getSceneProcessors:function(){return this._chart.__getPrivateApi().getSceneProcessors()},_isSortEnabled:function(e){var t,r,i;return!this.props.widget.getParameter("isQuickSortDisabled")&&(!!(null!=(r=this.props.runtimeSubscriber.getLensConnector())?r.callCapabilityMethod(g.SORT,"isQuickSortEnabled"):void 0)&&(!(t=null!=(i=this.props.runtimeSubscriber.getLensConnector())?i.callCapabilityMethod(g.SORT,"getOriginalColumnSortInfos"):void 0)||Object.values(t).every((function(e){return e.getColumnSort()!==l.InnerAscending&&e.getColumnSort()!==l.InnerDescending}))&&!!e.sorting.enabled))},_loadMapsIfNeeded:function(){if(this._isLoadingMapsNeeded())return X.get().loadMaps().then((e=this,function(){return e.setState({areMapsLoaded:!0})}));var e},_isLoadingMapsNeeded:function(){return this._isWidgetMapType()&&!this.state.areMapsLoaded},_initializeChartLoader:function(){return X.get().ready().then((e=this,function(){return e.setState({isChartLoaderReady:!0}),e._loadMapsIfNeeded()}));var e},_buildFiscalGranularity:function(e){var t,r;if(this._isCustomFiscalEnabled())return(t=new Y(this._fullResultsMetadata).buildCombinedDateGrainColumn(e)||this._fullResultsMetadata.getColumn(e[0]))&&f.getEnumByCode(this._resultFormatter.getDateGrain(t)).isFiscal()?(this.setState({shouldWaitForFiscalGranularity:!0}),X.get().getFiscalGranularity().then((r=this,function(e){return r.setState({fiscalGranularity:e,shouldWaitForFiscalGranularity:!1})}))):this.setState({fiscalGranularity:null})},_isCustomFiscalEnabled:function(){return B.has(B.ORG_HAS_WAVE_CUSTOM_FISCAL_ENABLED)},_legendSorter:function(e){var t,r,i,s,n,o,a;return i=e.slice(),(r=this._getWidgetDimensions(this.props.resolvedWidget,this._resultMetadata)).length>0?(o=2===r.length?r[1]:r[0],(null!=(t=this._getResultsMetadata().getReportExtendedMetadata().getGroupingColumnInfo(o))?t.isLookup:void 0)?(a=b.getValueLabels(q.DIMENSION.of(o),this._resultFormatter,this.state.data),b.sortByValueLabelsForLookup(i,a)):("picklist"===(n=this._getResultsMetadata().getReportExtendedMetadata().getGroupingDataType(o))&&(s=null!=t?t.filterValues.concat(null!=t?t.inactiveFilterValues:void 0):void 0),1===r.length&&"currency"===n?e:b.sortLegends(i,n,s))):e},getLegendSorter:function(){return this._resultMetadata instanceof j?this._legendSorter:null}}),e.exports=me(C)},5332:(e,t,r)=>{var i,s,n,o,a,l,u;u=r(72555),n=r(67294),s=r(8429).Z,l=r(32574),i=r(66043),o=r(9636).Z,a=r(1817),r(55442),e.exports=u({displayName:"ToggleWidgetRC",mixins:[i],shouldComponentUpdate:function(e,t){return this._perhapsShouldComponentUpdate(e,t)},_onResult:function(e){return this._setWidgetRendered()},_render:function(){var e;return null==this.state.resultMessage?n.createElement("div",null):(e=l.buildClassName("toggleWidget",this.props.viewMode.getClassName()),n.createElement("div",{style:this.props.resolvedWidgetInlineStyle,className:e,"aria-label":s.getLabel("DashboardWidgetType","ariaLabel",s.getLabel("DashboardWidgetType","pillbox"))},n.createElement(o,{isViewMode:this.props.isViewMode,widget:this.props.resolvedWidget,originalWidget:this.props.widget,viewMode:this.props.viewMode,widgetTypeDefinition:this.props.widgetDefinition,runtimeSubscriber:this.props.runtimeSubscriber,widgetComponentClass:a,resultMessage:this.state.resultMessage,dashboardMetadata:this.props.dashboardMetadata,themedStyle:this.props.themedStyle})))},_getNoResultsText:function(){return s.getLabel("NoResultsPlaceHolder","noResultsForFilters")}})},37977:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D;S=r(67294),D=r(96486),v=D.clone,R=D.find,w=D.includes,A=D.isEmpty,C=r(8429).Z,E=r(12205).Z,g=E((function(){return Promise.all([r.e(441),r.e(425),r.e(592),r.e(486)]).then(r.t.bind(r,24194,23))})),b=E((function(){return Promise.all([r.e(441),r.e(425),r.e(592),r.e(486)]).then(r.t.bind(r,73259,23))})),_=E((function(){return Promise.all([r.e(441),r.e(425),r.e(592),r.e(486)]).then(r.t.bind(r,18187,23))})),y=E((function(){return Promise.all([r.e(441),r.e(425),r.e(592),r.e(486)]).then(r.t.bind(r,65791,23))})),m=E((function(){return Promise.all([r.e(441),r.e(425),r.e(592),r.e(486)]).then(r.bind(r,92935))})),u=r(33044).Z,d=r(20635).Z,l=r(28537).Z,I=r(61506).Z,i=r(18111),s=r(40651).Z,T=r(72713),f=r(81693).Z,p=r(62133),c=r(16011),h=r(45080).Z,r(84985),a=r(31835).Z,o=r(78190),r(10894).Z,n=r(85434).Z,e.exports=function(){function e(e,t,r,i,s,n,o,l,u,d){this._filterField=e,this._extendedMetadata=t,this._datasetMetadata=r,this._onApply=i,this._onCancel=s,this._onSelectOperator=n,this._onSearchInDimensionFilterPicklist=o,this._onToggleDependent=l,this._dataSourceFilters=u,this._popoverBodyClassName=d,this._lockFilterTooltip={section:"DashboardFilterPanel",name:"lockedInfoTooltip"},this._dependentFilterTooltip={section:"DashboardFilterPanel",name:"dependentInfoTooltip"},this._dataSourceTypeDelegate=a.getDelegateFromAssetMetadata(this._datasetMetadata)}return e.prototype.getWidget=function(e,t,r,i,s,n){var o;if(o=f.fromCode(e),this._extendedMetadata.isDimension(this._filterField[0]))switch(o){case f.IN:case f.NOT_IN:return this._getFilterMultiSelectPicklistWidgetRC(e,t,r,i,s,n);case f.MATCHES:case f.IS_NULL:case f.IS_NOT_NULL:case f.STARTS_WITH:return this._getFilterStringWidgetRC(e,t,r,i,s)}else{if(this._extendedMetadata.isMeasure(this._filterField[0]))return this._getFilterNumberWidgetRC(e,t,r,i,s);if(this._extendedMetadata.isDateDimension(this._filterField[0]))return this._getFilterDateWidgetRC(e,t,r,i,s)}},e.prototype._getFilterStringWidgetRC=function(e,t,r,i,s){return S.createElement(b,{minLength:"2",operators:this._getOperators(),initialValue:t[0],initialOperatorValue:e,canBeLocked:r,canBeDependent:r,isDependent:s,isInitiallyLocked:i,lockFilterTooltip:this._lockFilterTooltip,dependentFilterTooltip:this._dependentFilterTooltip,onApply:this._onApply,onCancel:this._onCancel,onSelectOperator:this._onSelectOperator,onToggleDependent:this._onToggleDependent})},e.prototype._getFilterMultiSelectPicklistWidgetRC=function(e,t,r,i,s,n){return this.getSelectionList(t,s,n).then((o=this,function(t){var n;return n=o._getOperators(),S.createElement(g,{key:o._filterField[0]+e,selectionList:t,operators:n,initialOperatorValue:e,canBeLocked:r,canBeDependent:r,isDependent:s,isInitiallyLocked:i,lockFilterTooltip:o._lockFilterTooltip,dependentFilterTooltip:o._dependentFilterTooltip,shouldShowStringInputForMultiPickList:!1,onApply:o._onApply,onCancel:o._onCancel,onSelectOperator:o._onSelectOperator,onToggleDependent:o._onToggleDependent,onSearch:o._onSearchInDimensionFilterPicklist})}));var o},e.prototype._getFilterNumberWidgetRC=function(e,t,r,i,s){return this._queryMinMaxForMeasure(s).then((n=this,function(a){var l,u,d,c,h,p,g,m,y;if(A(a))return n._getFilterNoResults(r,i,s);if(h=n._getOperators(),A(t[0]))switch(u=f.fromCode(e),null!=a[0]?(c=null!=(m=a[0][o.MIN_ALIAS])?m.toString():void 0,d=null!=(y=a[0][o.MAX_ALIAS])?y.toString():void 0):(c=0,d=0),u){case f.BETWEEN:p=c,l=d;break;case f.LESS:case f.LESS_OR_EQUALS:p=d;break;default:p=c}else p=t[0][0].toString(),n._isRange(e)&&(l=null!=(g=t[0][1])?g.toString():void 0);return S.createElement(_,{operators:h,initialValue:p,initialEndValue:l,initialOperatorValue:e,canBeLocked:r,canBeDependent:r,isDependent:s,isInitiallyLocked:i,lockFilterTooltip:n._lockFilterTooltip,dependentFilterTooltip:n._dependentFilterTooltip,onApply:n._onApply,onCancel:n._onCancel,onSelectOperator:n._onSelectOperator,onToggleDependent:n._onToggleDependent})}));var n},e.prototype._getFilterDateWidgetRC=function(e,t,r,i,s){return this._queryMinMaxForDate(s).then((n=this,function(o){var a,h,p,g,m,_,b,E,T;return A(o)?n._getFilterNoResults(r,i,s):(p=new l(o[0]),h=new l(o[1]),a=new u(p,h),b=A(t[0])?a:c.convertToDateRange(t),_=n._dataSourceTypeDelegate.getDateRangePresetCategories(),g=function(e,t){return c.getDefaultRelativeRange(e,t)},m=e?d.fromName(f.fromCode(e).name):void 0,E=n._dataSourceTypeDelegate.getSupportedCalendarDateTimeGrains(),n._dataSourceTypeDelegate.supportsFiscal()&&(T=n._dataSourceTypeDelegate.getSupportedFiscalDateTimeGrains()),S.createElement(y,{key:b?.getHash(),minEpochMilli:o[0],maxEpochMilli:o[1],initiallySelectedRange:b,initiallySelectedOperator:m,defaultAbsoluteRange:a,getDefaultRelativeRange:g,absoluteModeEnabled:!0,relativeModeEnabled:!0,calendarTypeSwitchingAllowed:!0,showAllPreset:!0,presetCategories:_,canBeLocked:r,canBeDependent:r,isDependent:s,lockFilterTooltip:C.getLabel("DashboardFilterPanel","lockedInfoTooltip"),dependentFilterTooltip:C.getLabel("DashboardFilterPanel","dependentInfoTooltip"),isInitiallyLocked:i,onToggleDependent:n._onToggleDependent,onApply:n._onApply,onCancel:n._onCancel,supportedCalendarDateTimeGrains:E,supportedFiscalDateTimeGrains:T,popoverBodyClassName:n._popoverBodyClassName}))}));var n},e.prototype._getFilterNoResults=function(e,t,r){return S.createElement(m,{canBeLocked:e,canBeDependent:e,isDependent:r,isInitiallyLocked:t,lockFilterTooltip:this._lockFilterTooltip,dependentFilterTooltip:this._dependentFilterTooltip,onApply:this._onApply,onCancel:this._onCancel,onToggleDependent:this._onToggleDependent})},e.prototype.getSelectionList=function(e,t,r){return null==r&&(r=""),this._queryValuesForDimensionWithSearch(e,t,r).then((i=this,function(t){var s,n,o,a,l,u,d,c,h,g,m,_,f,y;for(o=A(r)?v(e):[],a=!1,c=[],l=m=0,f=t.length;m<f;l=++m)h=t[l][i._filterField[0]]||null,(u=w(e,h))&&o.splice(o.indexOf(h),1),h?(g=T.isCompoundStr(h)?T.compoundStrToCompoundDim(h):h,n=p.fullKeyText(i._extendedMetadata,i._filterField[0],g),c.push({label:n,value:h,isSelected:u})):a=!0;for(_=0,y=o.length;_<y;_++)d=(s=o[_])?p.fullKeyText(i._extendedMetadata,i._filterField[0],s):C.getLabel("InsightsSelector","null_dimension_value"),c.push({label:d,value:s,isSelected:!0});return A(r)&&a&&c.unshift({label:C.getLabel("InsightsSelector","null_dimension_value"),value:null,isSelected:w(e,null)}),c}));var i},e.prototype._queryMinMaxForMeasure=function(e){var t,r,i;return(t=new Map).set(this._datasetMetadata.getFullyQualifiedName(),this._extendedMetadata),i=e?(new n).getCompactFormSourceFilters(this._getDatasourceFilterInEffect(),[],t):void 0,r=o.buildMinMaxQuery({field:this._filterField[0],assetMetadata:this._datasetMetadata,sourceFilterMap:i}),this._dataSourceTypeDelegate.executeQuery(r,[this._datasetMetadata],[this._extendedMetadata],{timezone:void 0}).then((function(e){return e.getData()}))},e.prototype._queryMinMaxForDate=function(e){var t,r;return(t=new Map).set(this._datasetMetadata.getFullyQualifiedName(),this._extendedMetadata),r=e?(new n).getCompactFormSourceFilters(this._getDatasourceFilterInEffect(),[],t):void 0,this._dataSourceTypeDelegate.getMinMaxDateRangeQueryResult(this._filterField[0],this._datasetMetadata,this._extendedMetadata,r)},e.prototype._queryValuesForDimensionWithSearch=function(e,t,r){var s,a,l,u;return null==r&&(r=""),(s=new Map).set(this._datasetMetadata.getFullyQualifiedName(),this._extendedMetadata),l=t?(new n).getCompactFormSourceFilters(this._getDatasourceFilterInEffect(),[],s):void 0,a=o.buildDimValuesQuery({dimension:this._filterField[0],searchTerm:r.length<2?"":r,extMeta:this._extendedMetadata,sourceName:this._datasetMetadata.getFullyQualifiedName(),limit:this._dataSourceTypeDelegate.getDefaultGroupQueryLimit(),sourceFilterMap:l}),u=this._extendedMetadata.getDateVersion()===h.NEW?I.get(i).getDefaultTimezone():void 0,this._dataSourceTypeDelegate.executeQuery(a,[this._datasetMetadata],[this._extendedMetadata],{timezone:u}).then((function(e){return e.getData()}))},e.prototype._getDatasourceFilterInEffect=function(){var e;return e=this._filterField[0],A(this._dataSourceFilters)?[]:this._dataSourceFilters.filter((function(t){return!A(t.getValues())&&t.getColumns()[0].getName()!==e}))},e.prototype._isRange=function(e){return R(this._getOperators(),(function(t){return t.value===e})).isRange},e.prototype._getOperators=function(){var e,t;return e=[f.IN,f.NOT_IN,f.MATCHES,f.IS_NULL,f.IS_NOT_NULL],this._datasetMetadata.getType()===s.DATASET&&null==this._datasetMetadata.getLiveConnection()&&e.push(f.STARTS_WITH),t=[f.BETWEEN,f.GREATER,f.GREATER_OR_EQUALS,f.LESS,f.LESS_OR_EQUALS,f.EQUALS,f.NOT_EQUALS,f.IS_NULL,f.IS_NOT_NULL],this._extendedMetadata.isDimension(this._filterField[0])?this._getOperatorOptions(e):this._getOperatorOptions(t)},e.prototype._getOperatorOptions=function(e){return e.map((function(e){return{label:e.getDisplayText(),value:e.code,isInputNeeded:e.arity()>0,isRange:e===f.BETWEEN}}))},e}()},1817:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_;m=r(72555),c=r(67294),d=r(45697),_=r(96486),p=r(84198).Z,g=r(32574),r(8429).Z,r(79167).Z,s=r(87418).Z,r(37e3),h=r(591).Z,o=r(67427).Z,r(59816),i=r(15648).Z,n=r(76950),l=r(56191),r(15572),a=r(65757).Z,u=r(81428),e.exports=m({displayName:"ToggleWidgetInternalRC",propTypes:{widget:d.instanceOf(s).isRequired,originalWidget:d.instanceOf(s).isRequired,viewMode:d.instanceOf(l).isRequired,isViewMode:d.bool.isRequired,runtimeSubscriber:d.instanceOf(o),resultMessage:d.instanceOf(h).isRequired,stepSelectedRows:d.arrayOf(d.object).isRequired,widgetSelectedRows:d.arrayOf(d.object).isRequired,setSelection:d.func.isRequired,updateStepSelection:d.func.isRequired,resetWidgetToStepSelection:d.func.isRequired,isRowSelected:d.func.isRequired,themedStyle:d.object},render:function(){var e,t,r,i,s,o,u,d,h;return o=this._getMeasureColumn(),i=function(){var i,m,f,y;for(f=this.props.resultMessage.getData(),y=[],r=i=0,m=f.length;i<m;r=++i)t=f[r],s=n.getDisplayLabel(t,this.props.originalWidget.getParameter("displayTemplate"),this.props.resultMessage.getMetadata(),this.props.resultMessage.getFormatter()),u=this.props.viewMode===l.FULL?(h=this._getMeasureLabel(o,t),_.isObject(h)?void 0:c.createElement("div",{className:"toggleContent toggleMeasure"},h)):void 0,e=g.classSet({toggleItem:!0,selected:this.props.isRowSelected(t)}),d=this.props.isRowSelected(t)?this.props.themedStyle&&this.props.themedStyle.selectedColor?{color:this.props.themedStyle.selectedColor,backgroundColor:this.props.themedStyle.selectedBackground}:a.getSelectedItemsStyle(this.props.widget).getStyle():Object.assign({},a.getItemStyle(this.props.widget).getStyle(),{backgroundColor:"inherit"},this.props.themedStyle),y.push(c.createElement(p,{key:r,className:e,"aria-pressed":this.props.isRowSelected(t),onClick:_.partial(this._onClickRow,t),style:d},c.createElement("div",{className:"content-container"},c.createElement("div",{className:"toggleContent toggleLabel"},s),u)));return y}.call(this),c.createElement("div",{className:"toggle-widget-internal"},i)},_onClickRow:function(e){return this.props.setSelection(new i(this.props.widgetSelectedRows,e))},_getMeasureColumn:function(){return u.getMeasureColumn(this.props.resultMessage.getMetadata(),this.props.widget,this.props.isViewMode,!0)},_getMeasureLabel:function(e,t){return null==e?"":this.props.resultMessage.getFormatter().formatMeasure(e,t[e.getName()],this.props.widget.getParameter("compact"))}})},38906:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T={}.hasOwnProperty,I=function(e,t){for(var r in t)T.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};r(96486).includes,b=r(83993).Oz,S=r(90554),E=S.toSet,C=S.toMap,d=r(27223),p=r(8429).Z,s=r(40651).Z,g=r(5712).Z,c=r(23296),m=r(62652).LoadState,l=r(21891).Z,o=r(86866).Z,y=r(34068),e.exports=u=function(e){function t(e,t,r,i){this._widget=e,this._currentLayout=t,this._metadataProvider=r,this._dashboardMetadata=i}return I(t,e),t.new=function(e,t,r,s){return new(function(){var t;switch(g.fromCode(e.getParameter("destinationType"))){case g.EXPLORE:return h;case g.PAGE:return f;case g.COMPONENT:return n;case g.MASS_ACTION:return _;default:return null!=(null!=(t=e.getParameter("destinationLink"))?t.pageName:void 0)?a:i}}())(e,t,r,s)},t.prototype.pre=function(){return d.checkImplemented()},t.prototype.validate=function(e,t){var r,i,s;return i=this._widget.getParameter("destinationLink"),r=function(){switch(g.fromCode(this._widget.getParameter("destinationType"))){case g.PAGE:return null!=i?i.name:void 0;case g.COMPONENT:return null!=i?i.pageName:void 0;default:return null!=(null!=i?i.pageName:void 0)?i.pageName:null!=i?this._getFullyQualifiedName(i):this._widget.getParameter("destination")}}.call(this),t.then((s=this,function(t){return null==t&&(t={}),e.resolve(null==r?y.ValidationStatus.WARNING.makeResult(p.getLabel("DashboardLinkWidget","noDestinationWarning",s._widget.getId())):t[r]?y.ValidationStatus.VALID.makeResult():y.ValidationStatus.ERROR.makeResult(p.getLabel("DashboardLinkWidget","invalidDestinationErrorToaster",s._widget.getId())))}))},t.prototype._getFullyQualifiedName=function(e){return b(e.name,e.namespace)},t}(y),i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.getType=function(){return"assetDestinationValidator"},t.prototype.pre=function(){var e,t,r,i,s;return r=(s=this._widget.getParameters()).destinationType,e=s.destination,null==(t=s.destinationLink)&&null==e?Promise.resolve({}):(i=null!=t?this._getFullyQualifiedName(t):e,c.loadAsset(c.getAssetById(r,i,m.SHALLOW)).then((function(){return E([i])}),(function(){return{}})))},t}(u),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.getType=function(){return"dashboardPageDestinationValidator"},t.prototype.pre=function(){var e,t,r,i;return t=(r=this._widget.getParameters()).destinationType,e=r.destinationLink,this._metadataProvider.getAsset(s.fromCode(t),this._getFullyQualifiedName(e)).then((i=this,function(t){if(i._hasPage(t,e.pageName))return E([e.pageName])}),(function(){return{}}))},t.prototype._hasPage=function(e,t){return e.getLayouts().some((function(e){return e.hasPageWithId(t)}))},t}(u),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.getType=function(){return"exploreDestinationValidator"},t.prototype.pre=function(){var e;return e={},this._dashboardMetadata.getLenses().forEach((function(t){if(o.fromCode(t.getType()).getDefinition().canExplore())return e[t.getId()]=t})),Promise.resolve(e)},t}(u),f=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.getType=function(){return"pageDestinationValidator"},t.prototype.pre=function(){return Promise.resolve(this._currentLayout.getPageMap())},t}(u),_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.getType=function(){return"massActionDestinationValidator"},t.prototype.pre=function(){return Promise.resolve(C(this._dashboardMetadata.getLenses(),(function(e){return e.getId()})))},t}(u),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return I(t,e),t.prototype.getType=function(){return"componentDestinationValidator"},t.prototype.pre=function(){var e,t,r,i,n;return r=this._widget.getParameters().destinationLink,n=null!=r?r.pageName:void 0,t=null!=r?r.name:void 0,i=null!=r?r.namespace:void 0,null!=n&&null!=t&&this._isComponentUsedInCurrentLayout(t,i)?(e=b(t,i),this._metadataProvider.getAsset(s.COMPONENT,e).then((function(e){if(e.getLayouts().some((function(e){return e.hasPageWithId(n)})))return E([n])}),(function(){return{}}))):Promise.resolve({})},t.prototype._isComponentUsedInCurrentLayout=function(e,t){var r,i,s;for(r=0,i=(s=this._currentLayout.getPages()).length;r<i;r++)if(s[r].getWidgets().some((function(r){var i,s;return l.COMPONENT.getCode()===r.getType()&&e===(null!=(i=r.getParameter("source"))?i.name:void 0)&&t===(null!=(s=r.getParameter("source"))?s.namespace:void 0)})))return!0;return!1},t.prototype._isPageExistInComponent=function(e,t,r){if(e)return this._metadataProvider.getAsset(s.COMPONENT,b(e,r)).then((function(e){return e.getLayouts().some((function(e){return e.hasPageWithId(r)}))}),(function(){return{}}))},t}(u)},88459:(e,t,r)=>{var i,s,n,o,a,l;o=r(45697),n=r(32350),s=r(27223),i=r(87418).Z,l=r(34068),a=r(94559),e.exports={propTypes:{widget:o.instanceOf(i).isRequired,isViewMode:o.bool.isRequired},getInitialState:function(){return{validationStatus:l.ValidationStatus.VALID,validationMessage:void 0}},UNSAFE_componentWillMount:function(){return null==this._shouldInitialValidate||this._shouldInitialValidate(this.props)?this._validate(this.props):void 0},UNSAFE_componentWillReceiveProps:function(e){if(this._shouldValidate(e))return this._validate(e)},_validate:function(e){var t,r;return t=this._buildValidator(e),s.checkOfType("validator",t,l,!0),(new a).addValidator(t).run().then((r=this,function(t){var i;return i=t[0],r.setState({validationStatus:i.getStatus(),validationMessage:i.getMessage()}),i.getStatus()!==l.ValidationStatus.ERROR||e.isViewMode?n.trigger("DEPRECATED:notification:clearMsg",e.widget.getId()):n.trigger("DEPRECATED:notification:error",i.getMessage(),e.widget.getId())}))},_isValid:function(){return this.state.validationStatus===l.ValidationStatus.VALID},_getValidationClassName:function(){if(!this.props.isViewMode)return this.state.validationStatus.getClassName()}}},94559:(e,t,r)=>{var i;i=r(52115),e.exports=function(){function e(){this.validatorsByType={}}return e.prototype.addValidator=function(e){var t;return null==(t=this.validatorsByType[e.getType()])&&(t=[],this.validatorsByType[e.getType()]=t),t.push(e),this},e.prototype.run=function(){var e,t,r,s,n,o,a,l,u;for(t in s=[],u=this.validatorsByType)for(e=null,a=0,l=(o=u[t]).length;a<l;a++)n=o[a],null!==e&&n.shouldGroupPre()||(e=n.pre()),r=new i,s.push(r),n.validate(r,e);return Promise.all(s)},e}()},34068:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;s=r(27223),i=r(78978),e.exports=n=function(){function e(){}return e.prototype.getType=function(){return s.checkImplemented()},e.prototype.shouldGroupPre=function(){return!1},e.prototype.pre=function(){},e.prototype.validate=function(e,t){return s.checkImplemented()},e}(),n.ValidationResult=function(){function e(e,t){this._status=e,this._message=t}return e.prototype.getStatus=function(){return this._status},e.prototype.getMessage=function(){return this._message},e}(),n.ValidationStatus=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.makeResult=function(e){return new n.ValidationResult(this,e)},t.prototype.getClassName=function(){return this._value},t}(i),n.ValidationStatus.build(n.ValidationStatus,{VALID:void 0,WARNING:void 0,ERROR:"error"})},14833:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(78978),e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(s),i.build(i,["MINI_FINDER","STEP_PICKER","START_VALUE","ITEM_LIST","CUSTOMIZE_TEXT_TEMPLATE","TABLE_THEME_PICKER","MAP_LIST","MAP_MANAGER","SERIES","PAGE_PICKER","FILTER_CREATOR","REF_LINE_INPUT","STEP_BUCKET","COMPONENT_PICKER","COMPONENT_CONTENT","MASS_ACTION","TOOLTIP_WIDGET_PICKER","TOOLTIP_PREVIEW_BUTTON","CELL_CHART_VISUALIZATION_TYPE_OPTION","EMBEDDED_STEP_PROPERTY","COLUMN_PICKER"])},40406:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(71007),e.exports=function(e){function t(e,r,i,s,n,o,a){this._row=o,this._column=a,t.__super__.constructor.call(this,e,r,i,s,n)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.toPixelDimensions=function(e){var r,i,s,n;return r=e.column,s=e.row,n=e.width,i=e.height,r-=this._column,s-=this._row,t.__super__.toPixelDimensions.call(this,{column:r,row:s,width:n,height:i})},t}(i)},57668:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(96486),i=r(86897),s=r(22393),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.onMoveWidgets=function(e,r,i,s,n){var o;return s.deltaX,s.deltaY,s.mouseX,s.mouseY,o=t.__super__.onMoveWidgets.apply(this,arguments),null!=this._draggingWidgets&&1===this._draggingWidgets.length&&null!=this._existingWidget&&this._draggingWidgets[0].shouldProxyFitToTarget(this._existingWidget)&&o.setProxyPosition(this._existingWidget.getPosition(),!0,this._draggingWidgets[0].getUID()),o},t.prototype.onMouseEnterWidget=function(e,t){return this._draggingWidgets=e,this._existingWidget=t},t.prototype.onMouseLeaveWidget=function(e,t){return this._clearDraggingWidget()},t.prototype._checkForOverlap=function(e,t,r,i){var o,a,l,u,d,c,h,p,g,m,_,f,y,b,C;if(null!=this._draggingWidgets&&1===this._draggingWidgets.length&&null!=this._existingWidget&&this._draggingWidgets[0].canDropOnWidget(this._existingWidget))return!0;for(c=0,m=(b=n.difference(e,t)).length;c<m;c++)for(l=b[c],h=0,_=t.length;h<_;h++)if(d=t[h],u=new s.PlaceholderItem(r[d.getUID()]),l.isContainer()&&!d.isContainer()){if(s.overlap(l,u)&&!s.inside(l,u))return!1;for(p=0,f=(C=n.difference(l.getContainedWidgets(),n.intersection(l.getContainedWidgets(),t))).length;p<f;p++)if(o=C[p],s.overlap(o,u))return!1}else if(s.overlap(l,u))return!1;if(i)for(g=0,y=t.length;g<y;g++)if((d=t[g]).isContainer()&&(a=new s.PlaceholderItem(r[d.getUID()]),!s.allInside(a,s.getContainedItems(d,a))))return!1;return!0},t.prototype.didMoveWidgets=function(){return this._clearDraggingWidget()},t.prototype.didDropWidgetInvalid=function(){return this._clearDraggingWidget()},t.prototype._clearDraggingWidget=function(){return this._draggingWidgets=void 0,this._existingWidget=void 0},t}(i)},42502:(e,t,r)=>{var i,s,n,o,a,l,u,d,c={}.hasOwnProperty;d=r(96486),i=r(21943),s=r(22158),n=r(89543),a=r(22393),o=r(8429).Z,l="MOVE",u="RESIZE",e.exports=function(e){function t(){t.__super__.constructor.call(this),this._layoutUtil=new a(!1),this._isReflowInitiatedInsideMap={}}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.onMoveWidgets=function(e,r,i,s,n){return this._mode=l,t.__super__.onMoveWidgets.call(this,e,r,i,s,n)},t.prototype.onResizeWidget=function(e,r,i,s,n,o){return this._mode=u,t.__super__.onResizeWidget.call(this,e,r,i,s,n,o)},t.prototype._doReflow=function(e,t,r,i){var s,n,o,a,l,u,d;if(e=this._getWidgets(e,t,r),s=(d=this._layoutUtil.moveAndGetProxyLocation(e,t,r,!1,!0)).changedLayout,n=d.proxyPosition,(o=this._getMoveResult(t,s,r)).isValidOperation()){for(l=0,u=s.length;l<u;l++)a=s[l],o.setWidgetPosition(a,a.getPosition(),!0);o.setWidgetPosition(t,n,!0),t.isNewWidget()||o.setWidgetContainer(t,this._containerWidget)}return o.setProxyPosition(n,!0,t.getUID()),o},t.prototype._getWidgets=function(e,t,r){var i,s,n,o;if(delete this._containerWidget,t.isContainer())return e;for(s=0,n=(o=d.without(e,t)).length;s<n;s++)if((i=o[s]).isContainer()&&this._isReflowWithinContainer(t,i,r)){this._containerWidget=i,e=this._containerWidget.getContainedWidgets();break}return e},t.prototype._isReflowWithinContainer=function(e,t,r){var i,s,n,o,d,c,h;return s=a.inside(t,e),i=a.overlap(t,new a.PlaceholderItem(r)),null==(c=this._isReflowInitiatedInsideMap)[h=t.getUID()]&&(c[h]=a.inside(t,r)),d=this._mode===u&&s,o=this._mode===l&&s&&i,n=this._mode===l&&this._isReflowInitiatedInsideMap[t.getUID()]&&!s&&i,d||(o||n)},t.prototype._getMoveResult=function(e,t,r){var i,n,o,d,c;if(null!=this._containerWidget){if(this._mode===u&&!a.inside(this._containerWidget,r))return this._createErrorResult("containerOverlap");if(this._mode===l&&a.overlap(this._containerWidget,new a.PlaceholderItem(r))&&!a.inside(this._containerWidget,r))return this._createErrorResult("containerOverlap");for(d=0,c=t.length;d<c;d++)if(i=t[d],!a.inside(this._containerWidget,i.getPosition()))return this._createErrorResult("containerFull")}if(e.isContainer()){if(o=new a.PlaceholderItem(r),n=a.getContainedItems(e,o),this._mode===u&&!a.allInside(o,n))return this._createErrorResult("containerSize");t.push.apply(t,n)}return new s(!0,!0)},t.prototype._createErrorResult=function(e){var t;return(t=new s(!1,!0)).setFeedback(new i(o.getLabel("DashboardMoveFeedback",e),"error")),t},t.prototype._cleanup=function(){return this._isReflowInitiatedInsideMap={},delete this._mode,t.__super__._cleanup.call(this)},t}(n)},39917:(e,t,r)=>{var i,s,n,o,a,l,u,d,c={}.hasOwnProperty;d=r(96486),o=r(86897),n=r(21943),r(49720),a=r(8429).Z,i=r(57668),s=r(42502),l="MOVE",u="RESIZE",e.exports=function(e){function t(){this._activeMover=this._mover=new i,this._reflowMover=new s,this._activeShiftState=!1,this._preventReflow=!1}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.onStartMoveWidgets=function(e,t){return this._mode=l,this._preventReflow=d.size(t)>1,this._onStartArguments=[e,t],this._addFeedback(this._activeMover.onStartMoveWidgets(e,t))},t.prototype.onMoveWidgets=function(e,t,r,i,s){return this._onActionArguments=[e,t,r,i,s],this._addFeedback(this._activeMover.onMoveWidgets(e,t,r,i,s))},t.prototype.didMoveWidgets=function(){return this._activeMover.didMoveWidgets(),this._cleanUp()},t.prototype.onStartResizeWidget=function(e,t){return this._mode=u,this._onStartArguments=[e,t],this._addFeedback(this._activeMover.onStartResizeWidget(e,t))},t.prototype.onResizeWidget=function(e,t,r,i,s,n){return this._onActionArguments=[e,t,r,i,s,n],this._addFeedback(this._activeMover.onResizeWidget(e,t,r,i,s,n))},t.prototype.didResizeWidget=function(){return this._activeMover.didResizeWidget(),this._cleanUp()},t.prototype.didDropWidgetInvalid=function(){return this._activeMover.didDropWidgetInvalid(),this._cleanUp()},t.prototype.onMouseEnterWidget=function(e,t){return this._activeMover.onMouseEnterWidget(e,t)},t.prototype.onMouseLeaveWidget=function(e,t){return this._activeMover.onMouseLeaveWidget(e,t)},t.prototype.onModifier=function(e){var t,r;if(!this._preventReflow&&(t=this._activeMover,null!=this._onStartArguments&&this._checkShiftToggled(e))){switch(this._toggleActiveMover(),this._mode){case l:t.didMoveWidgets(),r=this._activeMover.onStartMoveWidgets.apply(this._activeMover,this._onStartArguments),null!=this._onActionArguments&&(r=this._activeMover.onMoveWidgets.apply(this._activeMover,this._onActionArguments));break;case u:t.didResizeWidget(),r=this._activeMover.onStartResizeWidget.apply(this._activeMover,this._onStartArguments),null!=this._onActionArguments&&(r=this._activeMover.onResizeWidget.apply(this._activeMover,this._onActionArguments))}return this._addFeedback(r)}},t.prototype._cleanUp=function(){return delete this._mode,delete this._onStartArguments,delete this._onActionArguments,this._preventReflow=!1,this._activeShiftState=!1,this._activeMover=this._mover},t.prototype._checkShiftToggled=function(e){var t;return t=this._activeShiftState,this._activeShiftState=e.isShiftKeyPressed(),!1===t&&!0===this._activeShiftState},t.prototype._isReflowEnabled=function(){return this._activeMover===this._reflowMover},t.prototype._toggleActiveMover=function(){return this._isReflowEnabled()?this._activeMover=this._mover:this._activeMover=this._reflowMover},t.prototype._addFeedback=function(e){var t,r,i,s;return this._preventReflow||this._isReflowEnabled()&&null!=e.getFeedback()||(this._isReflowEnabled()?(s="reflowOn",r="check"):e.isValidOperation()||(s="turnReflowOn",r="info"),null!=s&&(i=a.getLabel("DashboardMoveFeedback",s)),null==i&&null==r||(t=new n(i,r)),e.setFeedback(t)),e},t}(o)},3863:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(11040).Z,e.exports=function(e){function t(e,t,r,i){this._widget=e,this._layoutName=t,this._pageIndex=r,this._column=i.column,this._row=i.row,this._columnSpan=i.columnSpan,this._rowSpan=i.rowSpan}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getWidgetId=function(){return this._widget.getId()},t.prototype.getWidget=function(){return this._widget},t.prototype.getPageIndex=function(){return this._pageIndex},t.prototype.getLayoutName=function(){return this._layoutName},t.prototype.getColumn=function(){return this._column},t.prototype.getRow=function(){return this._row},t.prototype.getColumnSpan=function(){return this._columnSpan},t.prototype.getRowSpan=function(){return this._rowSpan},t}(i)},1726:(e,t,r)=>{var i,s,n,o,a;a=r(96486),o=r(21891).Z,r(65016),i=r(59816),n=r(89769).Z,s=r(42737).Z,e.exports=function(){function e(e,t){this._executeMutators=e,this._currentLayoutName=t}return e.prototype.detach=function(e,t){var r,l,u,d,c,h;for(l=[],c=0,h=e.length;c<h;c++)r=e[c],(d=o.fromCode(r.getWidget().getType())).getDefinition().hasStep()&&r.getWidget().hasLens()&&((u=t.get(r.getUID())).hasValidLastResult()&&1===u.getLensMetadata().getAttachedWidgets().length&&u.callCapabilityMethod(i.SELECTION,"removeAllSelections"),l.push(new n(r.getUID(),{},!0)),d===o.GLOBAL_FILTER&&l.push(new s(r.getWidget().getLensId(),{isGlobal:!1})));return a.isEmpty(l)||this._executeMutators(l),a.size(l)},e}()},40936:(e,t,r)=>{var i,s,n;s=r(16154),n=r(8429).Z,e.exports=i={ID_INPUT_NAME:"id",addGeneralSection:function(e,t){var r,o;return o={type:s.SECTION,key:"general",label:n.getLabel("DashboardPropertiesPanel","general"),options:{open:!0,items:[]}},null!=t&&(r={type:s.TEXT,name:i.ID_INPUT_NAME,label:n.getLabel("DashboardPropertiesPanel","id"),options:{readOnly:!0,disabled:!0}},o.options.items.push(r)),e.push(o),o},addTextStyleSection:function(e){var t;return t={type:s.SECTION,key:"textStyle",label:n.getLabel("DashboardPropertiesPanel","textStyle"),options:{items:[]}},e.push(t),t},addBackgroundImageSection:function(e){var t;return t={type:s.SECTION,key:"backgroundImage",label:n.getLabel("DashboardPropertiesPanel","backgroundImage"),options:{items:[]}},e.push(t),t},addTooltipSection:function(e){var t;return t={type:s.NAMED_SECTION,name:"tooltip",label:n.getLabel("DashboardPropertiesPanel","tooltipSetting"),options:{items:[]}},e.push(t),t}}},19280:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(96486),s=r(78978),e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.NO_DATA_SENTINEL=Symbol("NO_DATA"),t.from=function(e,t,r){var i,s,n,o;for(s=0,n=(o=this.enums()).length;s<n;s++)if((i=o[s]).isOf(e))return i;return r.throwWithLabel(t,"unexpectedDataShape")},t.prototype.isOf=function(e,t,r){var i;return i=this._value.isOf(e),null==r||i||r.throwWithLabel(t,this._getExpectedLabelName()),i},t.prototype.isNotOf=function(e,t,r){var i;return i=this._value.isOf(e),null!=r&&i&&r.throwWithLabel(t,this._getExpectedNotLabelName()),!i},t.prototype._getExpectedLabelName=function(){return this._value.expectedLabelName},t.prototype._getExpectedNotLabelName=function(){return this._value.expectedNotLabelName},t}(s),i.build(i,{SCALAR:{isOf:function(e){return null==e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e},expectedLabelName:"expectedScalar",expectedNotLabelName:"expectedNotScalar"},ONE_DIM:{isOf:function(e){return Array.isArray(e)&&(n.isEmpty(e)||i.SCALAR.isOf(e[0]))},expectedLabelName:"expected1DArray",expectedNotLabelName:"expectedNot1DArray"},TWO_DIM:{isOf:function(e){return Array.isArray(e)&&(n.isEmpty(e)||Array.isArray(e[0])&&i.SCALAR.isOf(e[0][0]))},expectedLabelName:"expected2DArray",expectedNotLabelName:"expectedNot2DArray"},NO_DATA:{isOf:function(e){return e===i.NO_DATA_SENTINEL},expectedLabelName:"expectedNoData",expectedNotLabelName:"expectedNotEmptyDataShape"}})},13065:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_={}.hasOwnProperty;m=r(96486),p=r(8429).Z,r(1611).Z,r(42333),o=r(34659).Z,n=r(99934).Z,i=r(34073),u=r(67527),d=r(32029),g=r(26417),c=r(50566),h=r(56386),a=r(84137).Z,s=r(52364).Z,l=r(32238).Z,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._referenceLineConfigOption=["measureAxis1","measureAxis2"],t.prototype._constraintsInfoForIcons={maxGroupings:1,minGroupings:1},t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new o([{name:u.PLOTS,type:n.MEASURE,isArray:!0,label:p.getLabel("EclairNgChartSections","xAxis"),minItems:1,maxItems:1/0},{name:u.DIMENSION_AXIS,type:n.DIMENSION,label:p.getLabel("EclairNgChartSections","yAxis"),minItems:0,maxItems:1/0},g.getSectionDefinition()])},t.prototype.getCategory=function(){return a.BAR},t.prototype.getDefaultChartProperties=function(){var e;return(e=new c([d.GENERAL.buildProperty(),h.SECTION.of("chart").setItems([d.VALUE_TYPE.buildProperty(),d.COMPACT_DECIMAL_DIGITS.buildProperty(),d.AXIS_MODE.buildProperty(),d.AUTO_FIT_MODE.buildProperty(),d.BIN_VALUES.buildProperty(),d.BINS.buildProperty()]),d.DIMENSION_AXIS.buildProperty().addItem(d.CUSTOM_SIZE.buildProperty()).addItem(d.ICONS.buildProperty()),d.MEASURE_AXIS.buildProperty().setName("measureAxis1"),d.MEASURE_AXIS.buildProperty().setName("measureAxis2"),d.LEGEND.buildProperty(),d.TOOLTIP.buildProperty(),d.TRELLIS.buildProperty(this._getPreferredTrellisSize()),d.MARKERS.buildProperty()])).getProperty("measureAxis1").getItem("showZero").setHidden(!0),e.getProperty("measureAxis2").getItem("showZero").setHidden(!0),e},t.prototype.resolveParams=function(e,t,r){return s.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},t.prototype.constructFromResolvedParams=function(e){return s.constructFromResolvedParams(e,this._referenceLineConfigOption)},t.prototype._buildColorConfig=function(e,t){var r,i,s,n,o,a;return i=(o=t.getParameters()).bins,r=o.binValues,a=o._sortColor,null!=(s=null!=(n=o._color)?n:r?this._getBinColorConfig(e.plots[0],i):e.plots.length<2&&e.dimensionAxis.length>1?this._getCategoricalColorConfig(m.last(e.dimensionAxis)):null)&&(s.sortColor=a),s},t.prototype._updateProperties=function(e,r,i,s,n,o,a){return t.__super__._updateProperties.call(this,e,r,i),l.updateRefLineInputProperties(this._referenceLineConfigOption,e,n,r,o,a)},t}(i)},2754:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m={}.hasOwnProperty;g=r(96486),o=r(34659).Z,n=r(99934).Z,i=r(34073),u=r(67527),d=r(32029),p=r(26417),c=r(50566),h=r(56386),a=r(84137).Z,s=r(52364).Z,l=r(32238).Z,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._constraintsInfoForIcons={maxGroupings:2,minGroupings:1},t.prototype._referenceLineConfigOption=["measureAxis1"],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new o([{name:u.PLOTS,type:n.MEASURE,isArray:!0,minItems:1,maxItems:1},{name:u.RADIUS,type:n.MEASURE,minItems:0,maxItems:1},{name:u.DIMENSION_AXIS,type:n.DIMENSION,minItems:0,maxItems:1/0},{name:u.SPLIT,type:n.DIMENSION,minItems:0,maxItems:1},p.getSectionDefinition()])},t.prototype.getCategory=function(){return a.DOT},t.prototype.getDefaultChartProperties=function(){var e;return(e=new c([d.GENERAL.buildProperty(),h.SECTION.of("chart").setItems([d.AUTO_FIT_MODE.buildProperty(),h.BOOLEAN.of("showZero",!0)]),d.DIMENSION_AXIS.buildProperty().addItem(d.CUSTOM_SIZE.buildProperty()).addItem(d.ICONS.buildProperty()),d.MEASURE_AXIS.buildProperty().setName("measureAxis1"),d.LEGEND.buildProperty(),d.TOOLTIP.buildProperty(),d.TRELLIS.buildProperty(this._getPreferredTrellisSize()),d.MARKERS.buildProperty()])).getProperty("measureAxis1").getItem("showZero").setHidden(!0),e},t.prototype.resolveParams=function(e,t,r){return s.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},t.prototype.constructFromResolvedParams=function(e){return s.constructFromResolvedParams(e,this._referenceLineConfigOption)},t.prototype._buildColumnMap=function(e,r,i,s){var n,o,a;return a=(n=t.__super__._buildColumnMap.apply(this,arguments)).plots,o=n.dimensionAxis,a.length>1?(n.r=[a[1]],a.pop()):n.r=[],o.length>1?(n.split=[g.last(o)],o.pop()):n.split=[],n},t.prototype._buildColorConfig=function(e,t){return this._getCategoricalColorConfig(e.split.length?e.split[0]:null)},t.prototype._updateProperties=function(e,r,i,s,n,o,a){return t.__super__._updateProperties.call(this,e,r,i),l.updateRefLineInputProperties(this._referenceLineConfigOption,e,n,r,o,a)},t}(i)},68253:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p={}.hasOwnProperty;c=r(8429).Z,n=r(42333),s=r(34659).Z,i=r(99934).Z,a=r(67527),l=r(32029),h=r(26417),u=r(50566),d=r(56386),o=r(84137).Z,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)p.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new s([{name:a.PLOTS,type:i.MEASURE,label:c.getLabel("EclairNgChartSections","size"),isArray:!0,minItems:1,maxItems:1},{name:a.DIMENSION,type:i.DIMENSION,label:c.getLabel("EclairNgChartSections","segmentBy"),minItems:0,maxItems:1},h.getSectionDefinition()])},t.prototype._validConditionalFormattingTypes=[n.CATEGORIES,n.GRADIENT,n.MULTI],t.prototype.getCategory=function(){return o.PIPELINE},t.prototype.getDefaultChartProperties=function(){return new u([l.GENERAL.buildProperty(),d.SECTION.of("chart").setLabel(this._getChartTypeLongNameLabel()).setItems(this._getItems()),l.LEGEND.buildProperty(),l.TOOLTIP.buildProperty(),l.TRELLIS.buildProperty(this._getPreferredTrellisSize()),l.MARKERS.buildProperty()])},t.prototype._getChartTypeLongNameLabel=function(){},t.prototype._getItems=function(){return[this.getValueTypeItem(),this.getCompactDecimalDigitsItem(),this.getShowMeasureTitleItem(),this.getShowTotalItem()]},t.prototype.getValueTypeItem=function(){return l.VALUE_TYPE.buildProperty()},t.prototype.getCompactDecimalDigitsItem=function(){return l.COMPACT_DECIMAL_DIGITS.buildProperty()},t.prototype.getShowMeasureTitleItem=function(){return d.BOOLEAN.of("showMeasureTitle",!0)},t.prototype.getShowTotalItem=function(){return d.BOOLEAN.of("showTotal",!0,c.getLabel("EclairNgChartOptions","showTotalInTitle"))},t.prototype._updateProperties=function(e,r,i){var s;if(t.__super__._updateProperties.apply(this,arguments),null!=r)return s=r.getParameter("showMeasureTitle"),e.getProperty("chart").getItem("showTotal").setHidden(!s)},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._measures,n.dimension=n._dimensions,n},t.prototype._buildColorConfig=function(e,t){return this._getCategoricalColorConfig(e.dimension.length?e.dimension[0]:null)},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l;return a=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,(r=t.__super__._buildConfig.apply(this,arguments))._measures,r._dimensions,o=(l=a.getParameters()).valueType,n=l.showTotal,i=l.showMeasureTitle,s=l.showPercentage,r.valueType=o,r.showPercentage=s,r.showTotal=n,r.showMeasureTitle=i,r},t}(h)},25174:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g={}.hasOwnProperty;h=r(8429).Z,n=r(42333),c=r(36563),d=r(74393),s=r(34659).Z,i=r(99934).Z,a=r(67527),l=r(32029),p=r(26417),u=r(50566),o=r(84137).Z,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new s([{name:a.PLOTS,type:i.MEASURE,label:h.getLabel("EclairNgChartSections","value"),isArray:!0,minItems:1,maxItems:1},p.getSectionDefinition()])},t.prototype._validConditionalFormattingTypes=[n.MULTI],t.prototype.getCategory=function(){return o.GAUGE},t.prototype.getDefaultChartProperties=function(){return new u([l.GENERAL.buildProperty(),l.BREAKPOINTS.buildProperty(),l.BANDS.buildProperty(),l.TOOLTIP.buildProperty(),l.TRELLIS.buildProperty(this._getPreferredTrellisSize())])},t.prototype.getChartProperties=function(e,r,i,s){var n;return n=t.__super__.getChartProperties.apply(this,arguments),this._hideGaugeColorProperties(n)},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._measures,n},t.prototype._buildColorFromOldSchema=function(e,t){var r,i,s,n,o,a,l,u,h,p;if((p=e.getParameters()).min,l=p.medium,i=p.high,p.max,null!=(r=p.colors))return o=r.lowColor1,a=r.lowColor2,u=r.mediumColor1,h=r.mediumColor2,s=r.highColor1,n=r.highColor2,{type:d.BINS.getCode(),column:t.plots[0].column,breakpoints:[this._convertStringToNumber(l),this._convertStringToNumber(i)],bands:[{color:c.makeLinearGradient(o,a)},{color:c.makeLinearGradient(u,h)},{color:c.makeLinearGradient(s,n)}]}},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l;return o=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),s=(a=o.getParameters()).min,a.medium,a.high,i=a.max,a.colors,n=a.valueType,a.applyConditionalFormatting||(r.color=null!=(l=this._buildColorFromOldSchema(o,r))?l:null),r.valueType=n,r.domain=[this._convertStringToNumber(s),this._convertStringToNumber(i)].sort((function(e,t){return e-t})),r},t}(p)},26079:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};o=r(96486),n=r(1611).Z,i=r(34073),s=r(84137).Z,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCategory=function(){return s.LINE},t.prototype._buildConfig=function(e){var r,i,s,n,o;return n=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),s=(o=n.getParameters()).drawArea,i=o.dashLine,r.drawArea=s,r.dashLine=i,this._updateDrawAreaConfig(r),this._updateDashLineConfig(r),r},t.prototype._updateProperties=function(e,r,i,s){var n;t.__super__._updateProperties.apply(this,arguments),null!=r&&(n=e.getProperty("chart"),this._updateAreaSectionProperties(n,r,i,s),this._updateDashLinesSectionProperties(n,r,i,s))},t.prototype._updateAreaSectionProperties=function(e,t,r,i){var s,o,a,l,u,d,c,h,p,g,m;if(a=e.getItem("drawArea")){if(m=a.getItem("showDrawArea"),p=a.getItem("measure"),s=a.getItem("bounding1"),o=a.getItem("bounding2"),u=a.getItem("lineHeader"),(h=r.getColumns(n.MEASURE)).length<2)return m.setHidden(!0),p.setHidden(!0),s.setHidden(!0),o.setHidden(!0),void u.setHidden(!0);t.getParameter("drawArea").showDrawArea?(d=function(){var e,t,r;for(r=[],e=0,t=h.length;e<t;e++)c=h[e],g=c.getName(),l=(null!=i?i.formatMeasureName(c):void 0)||g,r.push({value:g,label:l});return r}(),s.setChoices(d).setDefaultValue(d[0].value),o.setChoices(d).setDefaultValue(d[0].value),p.setChoices(d).setDefaultValue(d[0].value)):(p.setHidden(!0),s.setHidden(!0),o.setHidden(!0),u.setHidden(!0))}},t.prototype._updateDashLinesSectionProperties=function(e,t,r,i){var s,a,l,u,d,c,h,p,g;d=e.getItem("dashLine").getItem("measures"),(l=t.getParameter("dashLine"))&&(p=l.showDashLine),(u=t.getParameter("drawArea"))&&(s=u.bounding1,a=u.bounding2,h=u.measure,g=u.showDrawArea),d.setHidden(!p),c=r.getColumns(n.MEASURE),g&&p&&s!==a&&o.remove(c,(function(e){var t;return(t=e.getName())!==h&&(t===s||t===a)})),this._getColumnDropDownProperty(d,c,i,!1)},t.prototype._updateDrawAreaConfig=function(e){var t,r,i,s,n,a,l,u;if(!e.drawArea)return e;if(n=e.plots,u=e.drawArea,t=u.bounding1,r=u.bounding2,i=u.measure,!u.showDrawArea||t===r)return e;for(o.remove(n,(function(e){var s;return((s=e.column[0])===t||s===r)&&s!==i})),a=0,l=n.length;a<l;a++)(s=n[a]).column[0]===i&&(s.area=[t,r]);return e},t.prototype._updateDashLineConfig=function(e){var t,r,i,s,n,o,a;if(!e.dashLine)return e;if(i=e.plots,t=(o=e.dashLine).measures,!o.showDashLine)return e;for(s=0,n=i.length;s<n;s++)a=(r=i[s]).column[0],l.call(t,a)>=0?r.lineStyle="dashed":delete r.lineStyle;return e},t}(i)},27489:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p=function(e,t){return function(){return e.apply(t,arguments)}},g={}.hasOwnProperty;h=r(96486),u=r(8429).Z,l=r(74179),i=r(42333),n=r(32029),c=r(26417),o=r(50566),a=r(56386),s=r(84137).Z,d=r(39713).Z,e.exports=function(e){function t(){return this._getDefaultProjection=p(this._getDefaultProjection,this),this.onPropertiesChange=p(this.onPropertiesChange,this),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._isMeasureBasedChart=!1,t.prototype._validConditionalFormattingTypes=[i.CATEGORIES,i.MULTI,i.GRADIENT],t.boundingBoxFromPersistedValue=function(e){return null===e&&(e=""),e},t.boundingBoxToPersistedValue=function(e){return null===e&&(e=""),e},t.prototype.getCategory=function(){return s.MAP},t.prototype.getDefaultChartProperties=function(e,t){return new o([n.GENERAL.buildProperty(),a.SECTION.of("chart").setItems([a.MAP_LIST.of("map","World Countries").setEditLabel(u.getLabel("EclairNgChartOptions","editSelectedMap")),a.MAP_MANAGER.of("boundingBox",void 0,""),a.BOOLEAN.of("autoZoom",!1,u.getLabel("EclairNgChartOptions","autoZoom")),a.HEADER.of("projection",!1,u.getLabel("EclairNgChartOptions","projection")),a.DROPDOWN.of("projectionType","Mercator","").setChoices(this._getMapProjection()),a.HEADER.of("colors"),a.COLOR.of("lowColor","#C5DBF7").setClassName("sideBySide left"),a.COLOR.of("highColor","#1674D9").setClassName("sideBySide right").setDropdownType(l.DropdownRight)]),n.LEGEND.buildProperty(),n.TOOLTIP.buildProperty(),n.TRELLIS.buildProperty(this._getPreferredTrellisSize()),n.MARKERS.buildProperty()])},t.prototype.onPropertiesChange=function(e){return null!=e.map?h.extend({},e,{projectionType:this._getDefaultProjection(e.map),boundingBox:void 0}):e},t.prototype._updateProperties=function(e,t,r,i){var s,n;return s={notify:function(e){return this._listener(e)},setListener:function(e){this._listener=e}},d.canManageMaps()&&(n=function(e){return s.notify(null)}),e.getProperty("chart").getItem("boundingBox").setTrigger(s),e.getProperty("chart").getItem("map").setOnEditCallback((function(e){return s.notify(e)})).setOnAddCallback(n)},t.prototype._buildColorConfig=function(e,t){},t.prototype._buildConfig=function(e){var r,i,s,n,o,a;return o=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,s=t.__super__._buildConfig.apply(this,arguments),r=(a=o.getParameters()).autoZoom,n=a.projectionType,i=a.boundingBox,s.autoZoom=r,s.projection=n,void 0!==i&&(i=t.boundingBoxFromPersistedValue(i),s.boundingBox=i),s},t.prototype._getDefaultProjection=function(e){return"US States"===e?"AlbersUSA":"Mercator"},t.prototype._getMapProjection=function(){return null!=this._mapProjection?this._mapProjection:this._mapProjection=[{label:u.getLabel("EclairNgMapLabels","mercator"),value:"Mercator"},{label:u.getLabel("EclairNgMapLabels","equirectangular"),value:"Equirectangular"},{label:u.getLabel("EclairNgMapLabels","miller"),value:"Miller"},{label:u.getLabel("EclairNgMapLabels","albersusa"),value:"AlbersUSA"}]},t}(c)},46626:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m={}.hasOwnProperty;g=r(96486),h=r(74179),p=r(8429).Z,o=r(42333),n=r(34659).Z,s=r(99934).Z,i=r(30334),l=r(67527),u=r(32029),d=r(50566),c=r(56386),a=r(84137).Z,e.exports=function(e){function t(e,r){this._chartTypeLongName=r,t.__super__.constructor.call(this,e)}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._validConditionalFormattingTypes=[o.CATEGORIES,o.MULTI,o.GRADIENT],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:l.X,type:s.DIMENSION,minItems:0,maxItems:1/0},{name:l.Y,type:s.DIMENSION,minItems:0,maxItems:1/0}])},t.prototype.getCategory=function(){return a.GRID},t.prototype.getPlotColumns=function(e){return e.color},t.prototype.getDefaultChartProperties=function(){return new d([u.GENERAL.buildProperty(),c.SECTION.of("chart").setLabel(p.getLabel("ChartTypeLongName",this._chartTypeLongName)).setItems([u.AUTO_FIT_MODE.buildProperty().setDefaultValue("keepLabels"),c.HEADER.of("colors"),c.COLOR.of("lowColor","#E2F4FC").setClassName("sideBySide left"),c.COLOR.of("highColor","#009DDF").setClassName("sideBySide right").setDropdownType(h.DropdownRight)]),u.DIMENSION_AXIS.buildProperty().setName("x").setLabel(p.getLabel("EclairNgChartOptions","xAxis")),u.DIMENSION_AXIS.buildProperty().setName("y").setLabel(p.getLabel("EclairNgChartOptions","yAxis")),u.LEGEND.buildProperty(),u.TOOLTIP.buildProperty(),u.MARKERS.buildProperty()])},t.prototype._updateProperties=function(e,t,r){var i,s,n;if(null!=t)return i=(n=t.getParameters()).x,s=n.y,this._updateAxisTitleProperty(e.getProperty("x"),i),this._updateAxisTitleProperty(e.getProperty("y"),s)},t.prototype._buildColumnMap=function(e,r,i,s){var n,o;return o=(n=t.__super__._buildColumnMap.apply(this,arguments))._dimensions,n.x=o.slice(-1),n.y=o.slice(0,-1),n},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l,u,d;return o=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,(i=t.__super__._buildConfig.apply(this,arguments))._dimensions,i._measures,a=(u=o.getParameters()).x,l=u.y,n=u.lowColor,s=u.highColor,r=u.autoFitMode,u.applyConditionalFormatting,null==a&&(a={}),null==l&&(l={}),g.extend(i.x,a),g.extend(i.y,l),i.autoFitMode=r,null==(null!=(d=i.color)?d.type:void 0)&&(n=n||"#E2F4FC",s=s||"#009DDF",i.color=this._getGradientColorConfig(i.color[0],[n,s])),i},t.prototype._buildColorConfig=function(e,t){var r,i,s;return i=(s=t.getParameters()).lowColor,r=s.highColor,this._getGradientColorConfig(e.color[0],[i,r])},t}(i)},65546:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p={}.hasOwnProperty;c=r(8429).Z,n=r(42333),s=r(34659).Z,i=r(99934).Z,a=r(67527),l=r(32029),h=r(26417),u=r(50566),d=r(56386),o=r(84137).Z,e.exports=function(e){function t(e,r){this._chartTypeLongName=r,t.__super__.constructor.call(this,e)}return function(e,t){for(var r in t)p.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._isMeasureBasedChart=!1,t.prototype._validConditionalFormattingTypes=[n.CATEGORIES],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new s([{name:a.MEASURE_AXES,type:i.MEASURE,isArray:!0,minItems:3,maxItems:1/0},{name:a.DIMENSION,type:i.DIMENSION,minItems:1,maxItems:1},h.getSectionDefinition()])},t.prototype.getCategory=function(){return o.LINE},t.prototype.getPlotColumns=function(e){return e.dimension},t.prototype.getDefaultChartProperties=function(){return new u([l.GENERAL.buildProperty(),d.SECTION.of("chart").setLabel(c.getLabel("ChartTypeLongName",this._chartTypeLongName)).setItems([d.BOOLEAN.of("showMeasureTitle",!0),d.BOOLEAN.of("showPoints",!0)]),l.LEGEND.buildProperty(),l.TOOLTIP.buildProperty(),l.TRELLIS.buildProperty(this._getPreferredTrellisSize()),l.MARKERS.buildProperty()])},t.prototype._buildColumnMap=function(e,r,i,s){var n,o,a;return o=(n=t.__super__._buildColumnMap.apply(this,arguments))._dimensions,a=n._measures,n.dimension=o,n.measureAxes=a,n},t.prototype._buildColorConfig=function(e,t){return this._getCategoricalColorConfig(e.dimension.length?e.dimension[0]:null)},t.prototype._buildConfig=function(e){var r,i,s,n,o;return n=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),i=(o=n.getParameters()).showMeasureTitle,s=o.showPoints,r.showPoints=s,r.showMeasureTitle=i,r},t}(h)},54251:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_={}.hasOwnProperty;m=r(96486),p=r(8429).Z,o=r(34659).Z,n=r(99934).Z,i=r(34073),u=r(67527),d=r(32029),g=r(26417),c=r(50566),h=r(56386),a=r(84137).Z,s=r(52364).Z,l=r(32238).Z,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._constraintsInfoForIcons={maxGroupings:2,minGroupings:2},t.prototype._referenceLineConfigOption=["measureAxis1"],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new o([{name:u.PLOTS,type:n.MEASURE,isArray:!0,label:p.getLabel("EclairNgChartSections","xAxis"),minItems:1,maxItems:1/0},{name:u.DIMENSION_AXIS,type:n.DIMENSION,label:p.getLabel("EclairNgChartSections","yAxis"),minItems:0,maxItems:1/0},{name:u.SPLIT,type:n.DIMENSION,label:p.getLabel("EclairNgChartSections","stackBy"),minItems:0,maxItems:1},g.getSectionDefinition()])},t.prototype.getCategory=function(){return a.BAR},t.prototype.getDefaultChartProperties=function(){var e;return(e=new c([d.GENERAL.buildProperty(),h.SECTION.of("chart").setItems([d.VALUE_TYPE.buildProperty(),d.COMPACT_DECIMAL_DIGITS.buildProperty(),h.BOOLEAN.of("normalize",!1).setTooltip(p.getLabel("EclairNgChartOptions","normalizeTooltip")),h.DROPDOWN.of("totalSumMode","none",p.getLabel("EclairNgChartOptions","totalSumMode")).setTooltip(p.getLabel("EclairNgChartOptions","totalSumModeTooltip")).setChoices([{value:"none",label:p.getLabel("EclairNgChartOptions","totalSumModeNone")},{value:"absolute",label:p.getLabel("EclairNgChartOptions","totalSumModeAbsolute")},{value:"net",label:p.getLabel("EclairNgChartOptions","totalSumModeNet")}]),d.AXIS_MODE.buildProperty(),d.AUTO_FIT_MODE.buildProperty()]),d.MEASURE_AXIS.buildProperty().setName("measureAxis1"),d.MEASURE_AXIS.buildProperty().setName("measureAxis2"),d.DIMENSION_AXIS.buildProperty().addItem(d.CUSTOM_SIZE.buildProperty()).addItem(d.ICONS.buildProperty()),d.LEGEND.buildProperty(),d.TOOLTIP.buildProperty(),d.TRELLIS.buildProperty(this._getPreferredTrellisSize()),d.MARKERS.buildProperty()])).getProperty("measureAxis1").getItem("showZero").setHidden(!0),e.getProperty("measureAxis2").getItem("showZero").setHidden(!0),e},t.prototype.mergeWithLegacyOptions=function(e,r){if(null==e&&(e={}),null==r&&(r={}),t.__super__.mergeWithLegacyOptions.apply(this,arguments),null!=e.normalize)return r.normalize=e.normalize},t.prototype._buildColumnMap=function(e,r,i,s){var n,o;return o=(n=t.__super__._buildColumnMap.apply(this,arguments)).dimensionAxis,n.split=o.length>0?[o.pop()]:[],n},t.prototype._buildColorConfig=function(e){return this._getCategoricalColorConfig(e.split.length?m.last(e.split):null)},t.prototype.buildConfig=function(e,r,i){var s;return(s=t.__super__.buildConfig.apply(this,arguments)).sorting.internal=!0,m.extend(s.split,{totalSumMode:e.getParameter("totalSumMode")}),s},t.prototype._updateProperties=function(e,r,i,s,n,o,a){return t.__super__._updateProperties.call(this,e,r,i),l.updateRefLineInputProperties(this._referenceLineConfigOption,e,n,r,o,a)},t.prototype.resolveParams=function(e,t,r){return s.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},t.prototype.constructFromResolvedParams=function(e){return s.constructFromResolvedParams(e,this._referenceLineConfigOption)},t}(i)},69307:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(8429).Z,i=r(34073),s=r(84137).Z,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCategory=function(){return s.PIPELINE},t.prototype._buildConfig=function(e){var r,i,s,n,o;return n=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),i=(o=n.getParameters()).totalLabel,s=o.totalValue,r.totalLabel=i,r.totalValue=s,r},t.prototype._updateProperties=function(e,r,i,s,o,a,l){var u,d;t.__super__._updateProperties.apply(this,arguments),null!=r&&(d=r.getParameter("totalValue"),(u=e.getProperty("chart").getItem("totalLabel")).setHidden("computeTotal"!==d),"computeTotal"===d&&u.setPlaceholder(n.getLabel("EclairNgChartOptions","totalLabelPlaceholder")))},t}(i)},92554:(e,t,r)=>{var i,s,n,o,a,l,u,d,c={}.hasOwnProperty;d=r(96486),l=r(8429).Z,n=r(34659).Z,s=r(99934).Z,o=r(67527),a=r(32029),i=r(27489),u=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-bubbleMap-chart")}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.PLOTS,type:s.DIMENSION,label:l.getLabel("EclairNgChartSections","location"),isArray:!0,minItems:1,maxItems:1},{name:o.RADIUS,type:s.MEASURE,label:l.getLabel("EclairNgChartSections","radius"),allowsDuplicate:!0,minItems:0,maxItems:1},{name:o.COLOR,type:s.MEASURE,label:l.getLabel("EclairNgChartSections","bubbleColor"),allowsDuplicate:!0,minItems:1,maxItems:1},u.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setLabel(l.getLabel("ChartTypeLongName","bubblemap")).addItem(a.RADIUS_RATIO.buildProperty().setName("radiusRatio")),e},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._dimensions,n.r=[n._measures[0]],n.color=[d.last(n._measures)],n},t.prototype._buildColorConfig=function(e,t){var r,i,s;return i=(s=t.getParameters()).lowColor,r=s.highColor,this._getGradientColorConfig(e.color[0],[i,r])},t.prototype._buildConfig=function(e){var r,i,s,n,o;return n=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,(r=t.__super__._buildConfig.apply(this,arguments))._measures,r._dimensions,i=(o=n.getParameters()).map,s=o.radiusRatio,r.map=i,r.r.radiusRatio=s,r},t}(i)},22441:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b={}.hasOwnProperty;y=r(96486),_=y.extend,f=y.last,p=r(74179),g=r(8429).Z,o=r(42333),m=r(6597).ZP,r(45080).Z,h=r(66537),n=r(34659).Z,s=r(99934).Z,i=r(30334),l=r(67527),u=r(32029),d=r(50566),c=r(56386),a=r(84137).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-calheatmap-chart")}return function(e,t){for(var r in t)b.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._validConditionalFormattingTypes=[o.GRADIENT,o.MULTI],t.prototype.getColumnMapDefinition=function(e){return null==e&&(e=!0),this._columnMapDefinition=new n([{name:l.TIME,type:s.TIME,label:g.getLabel("EclairNgChartSections","time"),minItems:1,maxItems:e?1/0:1},{name:l.COLOR,type:s.MEASURE,label:g.getLabel("EclairNgChartSections","color"),minItems:1,maxItems:1}])},t.prototype.getCategory=function(){return a.TIME},t.prototype.getDefaultChartProperties=function(){return new d([u.GENERAL.buildProperty(),c.SECTION.of("chart").setLabel(g.getLabel("ChartTypeLongName","calheatmap")).setItems([u.AUTO_FIT_MODE.buildProperty().setDefaultValue("keepLabels"),c.COLOR.of("lowColor","#E2F4FC").setClassName("sideBySide left"),c.COLOR.of("highColor","#009DDF").setClassName("sideBySide right").setDropdownType(p.DropdownRight)]),u.DIMENSION_AXIS.buildProperty().setName("axis"),u.LEGEND.buildProperty(),u.TOOLTIP.buildProperty(),u.MARKERS.buildProperty()])},t.prototype.requiresTimeColumn=function(){return!0},t.prototype.getPlotColumns=function(e){return e.color},t.prototype.isValidForLens=function(e,r,i,s,n,o){var a,l;return!(o&&null!=(a=null!=s?s.getParameter("columnMap"):void 0)&&(l=r.getColumn(f(a.timeAxis||a.time)))&&h.getEnumByCode(i.getDateGrain(l)).isFiscal())&&t.__super__.isValidForLens.call(this,e,r,i,s)},t.prototype._buildColumnMap=function(e,r,i,s){var n,o,a;return a=(n=t.__super__._buildColumnMap.apply(this,arguments))._time,o=n._measures,n.time=null!=a?[a]:[],n.color=o,n},t.prototype._buildColorConfig=function(e,t){var r,i,s;return i=(s=t.getParameters()).lowColor,r=s.highColor,this._getGradientColorConfig(e.color[0],[i,r])},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l,u,d,c;return d=e.widgetMetadata,n=e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,(s=t.__super__._buildConfig.apply(this,arguments))._measures,r=(c=d.getParameters()).autoFitMode,(i=c.axis)&&(o=i.showAxis,a=i.showTitle,u=i.title),_(s.time,{showAxis:o,showTitle:a,title:u}),null!=(l=new m(n).buildCombinedDateGrainColumn(s.time.column))&&(s.time.column=[l.getName()]),s.autoFitMode=r,s},t}(i)},34073:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty;u=r(96486),a=r(1611).Z,n=r(34659).Z,s=r(99934).Z,o=r(67527),l=r(26417),r(74577),i=["dimensionAxis","timeAxis","measureAxis1","measureAxis2"],e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._constraintsInfoForIcons={maxGroupings:-1/0,minGroupings:1/0},t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.PLOTS,type:s.MEASURE,isArray:!0,minItems:1,maxItems:1/0},{name:o.DIMENSION_AXIS,type:s.DIMENSION,minItems:0,maxItems:1/0},l.getSectionDefinition()])},t.prototype.getConditionalFormattingColumnName=function(e,t,r){var i;return null!=(null!=(i=this.getColumnMap(e,t,r))?i.plots:void 0)?i.plots[0]:t.getColumnNames(a.MEASURE)[0]},t.prototype._updateProperties=function(e,r,i){t.__super__._updateProperties.apply(this,arguments),null!=r&&(this._updateValueTypeProperties(e,r),this._updateAxisProperties(e,r,i),this._updateUseIconProperties(e.getProperty("dimensionAxis"),r.getParameter("dimensionAxis"),r,i))},t.prototype._updateAxisProperties=function(e,t,r){var s,n,o,a,l,u,d,c,h;for(s=t.getParameter("axisMode"),d=0,c=i.length;d<c;d++)n=i[d],null!=(u=e.getProperty(n))&&(o=t.getParameter(n),this._updateAxisTitleProperty(u,o),this._updateCustomDomainProperty(u,o));null!=s&&(l=this._getPlotCount(t,r)>1,null!=(h=e.getProperty("measureAxis2"))&&h.setHidden(!(l&&"dual"===s)),l&&"multi"===s&&null!=(a=e.getProperty("measureAxis1"))&&(a.getItem("referenceLines").setHidden(!0),a.getItem("title").setHidden(!0),a.getItem("customDomain").setHidden(!0)))},t.prototype._getPlotCount=function(e,t,r){var i;return null!=(null!=(i=this.getColumnMap(e,t,r))?i.plots:void 0)?i.plots.length:t.getUngroupedColumns(a.MEASURE).length},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._measures,n.dimensionAxis=n._dimensions,n},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l,d,c,h,p,g,m,_;return m=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,n=t.__super__._buildConfig.apply(this,arguments),i=(_=m.getParameters()).axisMode,s=_.barSize,g=_.valueType,p=_.showZero,h=_.showPoints,d=_.missingValue,c=_.normalize,r=_.autoFitMode,o=_.dimensionAxis,a=_.measureAxis1,l=_.measureAxis2,null==n.measureAxis1&&(n.measureAxis1={}),null==n.measureAxis2&&(n.measureAxis2={}),null==n.dimensionAxis&&(n.dimensionAxis={}),u.extend(n.dimensionAxis,o),u.extend(n.measureAxis1,a),u.extend(n.measureAxis2,l),n.axisMode=i,n.barSize=s,n.valueType=g,n.showZero=p,n.normalize=c,n.autoFitMode=r,n.missingValue=d,n.showPoints=h,n},t}(l)},11624:(e,t,r)=>{var i,s,n,o,a,l,u,d;d=r(96486),l=r(36563),o=r(42333),n=r(37253).Z,u=r(56861),i=r(54180).Z,a=r(74393),e.exports=s={CONDITIONAL_FORMATTING_COLUMN_NAME:"ALL",getRulesFromAssetExtendedMetadata:function(e,t){return new i(e).getConditionalFormattingRulesForStep(t).getRulesForProperty(n.CHART_COLOR)},getRulesFromFormatter:function(e){var t;return null!=(t=e.getConditionalFormattingRulesForProperty(n.CHART_COLOR))?t:{}},getColorConfigs:function(e,t,r,i){var s,n,a,l,u;if(!(l=(u=this.getRulesFromFormatter(t))[r]))return[];if(l.getType()!==o.STATIC)return[this._getColorConfigForChartColorRule(l,i)];for(n in s=[],u)a=u[n],null!=e.getColumn(n)&&s.push(this._getColorConfigForChartColorRule(a,i));return s},getConfigFromConditionalFormatting:function(e,t,r,i){var n;return n=s.getColorConfigs(e,t,r,i),d.filter(n,(function(t){var r;return null!=(null!=(r="function"==typeof e.getOriginalMetadata?e.getOriginalMetadata():void 0)?r:e).getColumn(t.column[0])}))},getXMDFieldSection:function(e,t){return e===s.CONDITIONAL_FORMATTING_COLUMN_NAME?u.DIMENSION:null!=t.getColumn(e)?u.getByColumnType(t.getColumn(e).getType()):u.MEASURE},_getColorConfigForChartColorRule:function(e,t){var r,i;switch(i=e.getType(),r=e.getReferenceField(),i){case o.MULTI:return this._getBinColorConfig(e.getBins(),r,t);case o.CATEGORIES:return this._getCategoricalColorConfig(r,e.getValues());case o.GRADIENT:return this._getGradientColorConfig(r,e.getBins());case o.STATIC:return this._getStaticColorConfig(e.getField(),e.getFormatValue())}},_filterMeasureColorConfigs:function(e){var t,r,i,s;for(r=[],i=0,s=e.length;i<s;i++){if((t=e[i]).type!==a.STATIC.getCode())return[t];r.push(t)}return r},_getBinColorConfig:function(e,t,r){var i,s,n,o;return i=function(){var t,i,n,o;for(o=[],t=0,i=e.length;t<i;t++)s=e[t],o.push({label:null!=(n=s.label)?n:"",color:r?s.formatValue:l.parseLinearGradient(s.formatValue)[0]});return o}(),n=function(){var t,r,i;for(i=[],o=t=0,r=e.length;t<r;o=++t)s=e[o],o>0&&i.push(parseFloat(s.bin));return i}(),{type:a.BINS.getCode(),column:[t],bands:i,breakpoints:n}},_getCategoricalColorConfig:function(e,t){var r;return r={},t.map((function(e){return r[e.value]=e.formatValue})),{type:a.CATEGORICAL.getCode(),column:[e],valueColors:r}},_getGradientColorConfig:function(e,t){var r;return r=t.map((function(e){return e.formatValue})),{type:a.GRADIENT.getCode(),column:[e],range:r}},_getStaticColorConfig:function(e,t){return{type:a.STATIC.getCode(),value:t,column:[e]}}}},30334:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};T=r(96486),b=T.extend,C=T.find,E=T.isEmpty,S=T.isEqual,c=r(27223),g=r(1611).Z,a=r(1806),d=r(36563),o=r(42333),p=r(90877).Z,_=r(6597).ZP,r(50566),u=r(74393),s=r(11624),n=r(74577),h=r(18948),m=r(58417),i=r(3979).Z,f=r(84103).Z,l=r(21568).Z,y=r(9673).Z,e.exports=function(){function e(e){this._eclairNGModuleName=e}return e.prototype._isMeasureBasedChart=!0,e.prototype._supportsConditionalFormatting=!0,e.prototype._validConditionalFormattingTypes=[o.STATIC,o.CATEGORIES,o.MULTI,o.GRADIENT],e.prototype.getEclairNGModuleName=function(){return this._eclairNGModuleName},e.prototype.supportsTrellis=function(){return!1},e.prototype.supportsGradientBin=function(){return!1},e.prototype.supportsLabelInBin=function(){return!0},e.prototype.supportsCustomTooltips=function(){return!0},e.prototype.getColumnMapDefinition=function(){},e.prototype.hasColumnMap=function(e){return null!=e.getParameter("columnMap")},e.prototype.isMeasureBasedChart=function(){return this._isMeasureBasedChart},e.prototype.requiresTimeColumn=function(){return!1},e.prototype.buildConfig=function(e,t,r,i){return b(this._getBaseConfig(e,t),this._buildConfig({widgetMetadata:e,resultsMetadata:t,resultsFormatter:r,forceDefaultColoring:i}))},e.prototype.buildRowsMetadata=function(e,t,r,i,s,n){var o,a,l;return i.getParameter("applyConditionalFormatting")&&(a=this.getConditionalFormattingColumnName(i,e,t)),null!=i.getParameter("compactDecimalDigits")&&(o=i.getParameter("compactDecimalDigits")),null!=i.getParameter("columnMap")&&(l=Array.from(e.getTimeColumnNames())),d.buildRowsMetadata({resultsMetadata:e,resultsFormatter:t,data:r,fieldName:a,timeColumns:l,isCustomFiscal:s,fiscalGranularity:n,compactDecimalDigits:o})},e.prototype.getDefaultParameters=function(e){var t;return t=this.getDefaultChartProperties().getDefault(e),this.supportsConditionalFormatting()&&(t.applyConditionalFormatting=!0),t},e.prototype.getChartProperties=function(e,t,r,i,s,n){var o,a,l,u;return l=this.getDefaultChartProperties(e,t),this._hideColorProperties(l),null!=e&&(null!=(a=l.getProperty("markersbutton"))&&this._updateMarkerProperty(a,i),null!=(o=l.getProperty("legend"))&&this._updateLegendProperty(o,e,t),null!=(u=l.getProperty("tooltip"))&&this._updateTooltipProperties(u,e,t,r)),this._updateProperties(l,e,t,r,i,s,n),l},e.prototype.getDefaultChartProperties=function(){return c.checkImplemented()},e.prototype.getCategory=function(){return c.checkImplemented()},e.prototype.getPlotColumns=function(e){if(null!=e.plots)return e.plots},e.prototype.mergeWithLegacyOptions=function(e,t){var r,i;if(null==e&&(e={}),null==t&&(t={}),null!=e.sqrt)return null!=(r=t.measureAxis1)&&(r.sqrtScale=e.sqrt),null!=(i=t.measureAxis2)?i.sqrtScale=e.sqrt:void 0},e.prototype.getLensConstraint=function(e,t){return this._getLensConstraint(this.getColumnMapDefinition(t).getSections())},e.prototype.isValidForLens=function(e,t,r,i,s){var o,a,l;return null!=(o=null!=i?i.getParameter("columnMap"):void 0)?(a=o.timeAxis||o.time,n.isValidForColumnMap(this.getColumnMapDefinition(s).getSections(),o,this.getWidgetColumnsByType(t),t)&&(E(a)||new _(t).isValidTimeColumn(a))):(l=b({},t,{getGroupings:function(){return d.getGroupingColumns(t)},getColumns:function(e){return t.getColumns(e)},isDateTimeColumn:function(e){return t.isDateTimeColumn(e)}}),this.getLensConstraint(i,s).isValidForLens(e,l,r,void 0,s))},e.prototype.getDefaultSelectMode=function(){return a.SelectMode.SINGLE},e.prototype.getValidSelectModes=function(){return[a.SelectMode.NONE,a.SelectMode.SINGLE,a.SelectMode.SINGLE_REQUIRED,a.SelectMode.MULTI,a.SelectMode.MULTI_REQUIRED]},e.prototype.supportsConditionalFormatting=function(){return this._supportsConditionalFormatting},e.prototype.isValidConditionalFormattingType=function(e){return I.call(this._validConditionalFormattingTypes,e)>=0},e.prototype.getValidConditionalFormattingTypes=function(){return this._validConditionalFormattingTypes},e.prototype.isConditionalFormattingColumnValid=function(e,t,r){var s;if(e===i.NONE.code)return!0;if(e===i.MEASURE_NAME.code)return this.isValidConditionalFormattingType(o.STATIC);if(null==t.getColumn(e))return!1;if(t.getColumn(e).getType()===g.DIMENSION){if(!this.isValidConditionalFormattingType(o.CATEGORIES)||(null!=(s=r.trellis)?s.length:void 0)>0&&I.call(r.trellis,e)>=0)return!1}else if(!this.isValidConditionalFormattingType(o.MULTI)&&!this.isValidConditionalFormattingType(o.GRADIENT))return!1;return this._isConditionalFormattingColumnValid(e,r)},e.prototype.isCurrentRuleEmpty=function(e,t,r,i){var n;return null==i&&(i=s.getRulesFromFormatter(r)),n=this.getConditionalFormattingColumnName(e,t,r),E(i)||null==i[n]},e.prototype.isCurrentRuleValid=function(e,t,r,i){var n;return null==i&&(i=s.getRulesFromFormatter(r)),n=this.getConditionalFormattingColumnName(e,t,r),!!this.isValidConditionalFormattingType(i[n].getType())&&(i[n].getType()===o.STATIC||this.isConditionalFormattingColumnValid(i[n].getReferenceField(),t,this.getColumnMap(e,t,r)))},e.prototype.getConditionalFormattingColumnName=function(e,t,r){return s.CONDITIONAL_FORMATTING_COLUMN_NAME},e.prototype.buildColumnMap=function(e,t,r,i){var s;return delete(s=this._buildColumnMap(e,t,r,i))._dimensions,delete s._measures,delete s._time,s},e.prototype.getColumnMap=function(e,t,r){return this.hasColumnMap(e)?n.cleanse(e.getParameter("columnMap"),t):(E(e.getParameter("columns"))||(t=new p(t,e.getParameter("columns"))),this.buildColumnMap(e,t,r))},e.prototype.getWidgetColumnsByType=function(e,t){var r,i,s,n,o,a,l;for(o=[],n=a=0,l=(s=d.getDimensionColumns(e,t)).length;a<l;n=++a)i=(r=s[n]).getName(),e.isDateTimeColumn(i)&&o.push(r.getName());return{dimensions:s.map((function(e){return e.getName()})),measures:this._getWidgetMeasures(e),times:o}},e.prototype._getLensConstraint=function(e){var t,r,i,s,o;return i=(o=n.getConstraints(e)).measure,r=o.dimension,s=o.time,r[0]+=s[0],r[1]+=s[1],(t=S(s,[0,0])?new h:(new m).setMinTimes(s[0])).setMinGroupings(r[0]).setMaxGroupings(r[1]).setMinMeasures(i[0]).setMaxMeasures(i[1]),t},e.prototype._updateProperties=function(){},e.prototype._updateValueTypeProperties=function(e,t){var r,i,s;if(null!=(i=t.getParameter("valueType")))return r=i===f.COMPACT_NUMBER.code,null!=(s=e.getProperty("chart").getItem("compactDecimalDigits"))?s.setHidden(!r):void 0},e.prototype._updateAxisTitleProperty=function(e,t){var r,i;return null==t&&(t={}),null!=(r=e.getItem("title"))&&r.setHidden(!t.showTitle),null!=(i=e.getItem("customSize"))?i.setHidden(!t.showAxis):void 0},e.prototype._updateUseIconProperties=function(e,t,r,i){var s,n,o,a,l,u,c,h,p,m;if(null!=r&&null!=e&&null!=t&&e.getItem("icons")){if(p=i.getUngroupedColumns(g.DIMENSION),c=d.getGroupingColumns(i).length,null!=(h=r.getParameter("trellis"))?h.enable:void 0)switch(h.type){case"x":case"y":case"wrap":c--;break;case"xy":c-=2}l=this._constraintsInfoForIcons&&this._constraintsInfoForIcons.minGroupings<=c&&c<=this._constraintsInfoForIcons.maxGroupings&&p.length>0,e.getItem("icons").setHidden(!l),l?(m=t.icons.useIcons,(u=e.getItem("icons").getItem("iconProps")).setHidden(!m),m&&(a=u.getItem("column"),n=function(){var e,t,r;for(r=[],e=0,t=p.length;e<t;e++)s=p[e],o=s.getName(),r.push({value:o,label:o});return r}(),a.setChoices(n),a.setDefaultValue(n[0].value))):(null==t.icons&&(t.icons={}),t.icons.useIcons=!1)}},e.prototype._updateCustomDomainProperty=function(e,t){var r,i;if(null==t&&(t={}),null!=(r=e.getItem("customDomain"))&&null!=t.customDomain)return i=t.customDomain.showDomain,r.getItem("low").setHidden(!i),r.getItem("high").setHidden(!i)},e.prototype._updateMarkerProperty=function(e,t){return e.getItem("chartMarkerButton").setOnClickCallback((function(){return t(new l(y.MARKER.getValue()),!1)}))},e.prototype._updateLegendProperty=function(e,t){var r,i;if(null!=(i=t.getParameter("legend")))return r=!i.show,e.getItem("showHeader").setHidden(r),e.getItem("inside").setHidden(r),e.getItem("position").setHidden(r),e.getItem("customSize").setHidden(r),e.getItem("descOrder").setHidden(r)},e.prototype._updateTooltipProperties=function(e,t,r,i){var s,n,o,a,l,u,d,c,h,p,m,_,f,y;if(null!=(y=t.getParameter("tooltip")))return d=r.getColumns(g.DIMENSION),m=r.getColumns(g.MEASURE),o=y.content,(a=e.getItem("content")).getItem("description").setColumns(d.concat(m).map((function(e){return{name:e.getName(),displayLabel:(null!=i?i.getColumnLabel(e):void 0)||e.getName()}}))),l=(c=o.legend).customizeLegend,h=a.getItem("legend"),s=l&&d.length,h.getItem("showDimensions").setHidden(!s),_=s&&c.showDimensions,u=h.getItem("dimensions").setHidden(!_),n=l&&m.length,h.getItem("showMeasures").setHidden(!n),f=n&&c.showMeasures,p=h.getItem("measures").setHidden(!f),l&&(this._getColumnDropDownProperty(u,d,i),this._getColumnDropDownProperty(p,m,i)),h.getItem("showPercentage").setHidden(!f),h.getItem("showNullValues").setHidden(!_&&!f),h.getItem("showBinLabel").setHidden(!0)},e.prototype._getColumnDropDownProperty=function(e,t,r,i){return null==i&&(i=!0),e.setChoices(this._getColumnOptions(t,r)),i?e.setDefaultValues(t.map((function(e){return e.getName()}))):e.setDefaultValues([t[0].getName()])},e.prototype._getColumnOptions=function(e,t){return e.map((function(e){return{value:e.getName(),label:(null!=t?t.getColumnLabel(e):void 0)||e.getName()}}))},e.prototype._isConditionalFormattingColumnValid=function(e,t){return!0},e.prototype._buildColorConfig=function(e,t){},e.prototype._buildConfig=function(e){var t,r,i,n,o,a,l,u,d;return d=e.widgetMetadata,u=e.resultsMetadata,l=e.resultsFormatter,o=e.forceDefaultColoring,i=this.getColumnMap(d,u,l),n=this.getColumnMapDefinition().columnMapToConfig(i),a=!1,d.getParameters().applyConditionalFormatting&&this.supportsConditionalFormatting()&&null!=l&&!o&&!this.isCurrentRuleEmpty(d,u,l)&&this.isCurrentRuleValid(d,u,l)&&(d.getParameters().step,(null!=(r=s.getConfigFromConditionalFormatting(u,l,this.getConditionalFormattingColumnName(d,u,l),this.supportsGradientBin()))?r.length:void 0)>0&&(b(n,this._applyColorConfigs(r,i)),a=!0)),d.getParameters().hasCustomPlots&&(n.plots=d.getParameters().plots),a||null!=(t="function"==typeof this._buildColorConfig?this._buildColorConfig(i,d):void 0)&&(n.color=t),n},e.prototype.resolveParams=function(e,t){return e},e.prototype.constructFromResolvedParams=function(e){},e.prototype._getBaseConfig=function(e,t){var r,i;return i={selectMode:e.getLens().getSelectMode().getCode(),legend:this._buildLegendConfig(e),title:e.getParameter("title"),theme:this._buildThemeConfig(e),tooltip:this._buildTooltipConfig(e),sorting:this._buildSortingConfig(t)},null!=(r=e.getParameter("applyConditionalFormatting"))&&(i.applyConditionalFormatting=r),i},e.prototype._buildSortingConfig=function(e){var t,r,i,s,n,o;for(s=0,n=(o=e.getColumns(g.MEASURE)).length;s<n;s++)if(null!=(t=o[s]).getSort()){r=t;break}return i={enabled:!0,columnTypes:["measure"]},null!=r&&b(i,{column:[r.getName()],order:r.getSort().getValue()}),i},e.prototype._buildColumnMap=function(e,t,r){return this._buildBaseColumnMap(t,r)},e.prototype._buildBaseColumnMap=function(e,t){var r,i,s,n,o;return r=(o=this.getWidgetColumnsByType(e,!0)).dimensions,i=o.measures,n=o.times,this.requiresTimeColumn()&&n.length&&(s=n[0],r.splice(r.indexOf(s),1)),{_dimensions:r,_measures:i,_time:s}},e.prototype._buildThemeConfig=function(e){var t,r,i;if(null!=(r=e.getParameter("theme")))return i={base:r,properties:{BACKGROUND_OPACITY:0}},(t=e.getParameter("_overridePalette"))&&(i.properties.PALETTE=t),i},e.prototype._buildTooltipConfig=function(e){var t,r,i,s,n,o,a,l,u,d,c,h,p;if(null!=(c=e.getParameter("tooltip")))return r=(p=c.content).description,s=p.legend,h={},E(r)||(h.text={template:r}),(null!=s?s.customizeLegend:void 0)&&(a=s.showDimensions,i=s.dimensions,l=s.showMeasures,n=s.measures,d=s.showPercentage,o=s.showBinLabel,u=s.showNullValues,t=[],a&&i.length&&(t=t.concat(i)),l&&n.length&&(t=t.concat(n)),h=b({column:t,showPercentage:l&&d,showBinLabel:l&&o,showNullValues:(a||l)&&u},h)),h},e.prototype._buildLegendConfig=function(e){var t;if(null!=(t=e.getParameter("legend"))&&this.getDefaultChartProperties().getProperty("legend"))return delete(t=b({sorting:{order:t.descOrder?"desc":"asc"}},t)).descOrder,t},e.prototype._getBinGradientColorConfig=function(e,t){var r,i,s,n,o;return i=(o=t.getParameters()).bins,r=o.binValues,n=o.lowColor,s=o.highColor,r?this._getBinColorConfig(e,i):this._getGradientColorConfig(e,[n,s])},e.prototype._getGradientColorConfig=function(e,t){return{column:null!=e?[e]:[],type:u.GRADIENT.getCode(),range:t}},e.prototype._getCategoricalColorConfig=function(e){return{column:null!=e?[e]:[],type:u.CATEGORICAL.getCode()}},e.prototype._getBinColorConfig=function(e,t){var r,i,s,n,o;return i=t.breakpoints,n=(r=t.bands).low,o=r.medium,s=r.high,{column:null!=e?[e]:[],type:u.BINS.getCode(),breakpoints:[i.low,i.high],bands:[n,o,s]}},e.prototype._getWidgetMeasures=function(e){var t,r,i,s,n;for(n=[],i=0,s=(r=e.getUngroupedColumns(g.MEASURE)).length;i<s;i++)t=r[i],n.push(t.getName());return n},e.prototype._getWidgetDimensions=function(e){return d.getGroupingColumns(e)},e.prototype._hideColorProperties=function(e){var t,r,i,s,n,o,a;for(t=e.getProperty("chart"),a=[],i=0,s=(n=["binValues","bins","colors","lowColor","highColor","leftColor","rightColor"]).length;i<s;i++)r=n[i],a.push(null!=t&&null!=(o=t.getItem(r))?o.setHidden(!0):void 0);return a},e.prototype._applyColorConfigs=function(e,t){var r,i,s;return e.length>1||(null!=(s=e[0])?s.type:void 0)===o.STATIC.getCode()?{plots:function(){var s,n,o,a;for(a=[],s=0,n=(o=this.getPlotColumns(t)).length;s<n;s++)i=o[s],null!=(r=C(e,(function(e){return e.column[0]===i})))?a.push({column:[i],color:r.value}):a.push({column:[i]});return a}.call(this)}:{color:e[0]}},e.prototype._hideGaugeColorProperties=function(e){var t,r,i,s,n;return null!=(r=e.getProperty("colors"))&&r.setHidden(!0),null!=(i=e.getProperty("bands"))&&i.setHidden(!0),null!=(s=(t=e.getProperty("breakpoints")).getItem("medium"))&&s.setHidden(!0),null!=(n=t.getItem("high"))&&n.setHidden(!0),e},e.prototype._convertStringToNumber=function(e){return 1*e},e}()},51133:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty;r(96486),r(74179),l=r(8429).Z,n=r(34659).Z,s=r(99934).Z,o=r(67527),a=r(32029),i=r(27489),u=r(26417),r(50566),r(56386),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-choropleth-chart")}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.PLOTS,type:s.DIMENSION,label:l.getLabel("EclairNgChartSections","location"),isArray:!0,minItems:1,maxItems:1},{name:o.COLOR,type:s.MEASURE,label:l.getLabel("EclairNgChartSections","color"),minItems:1,maxItems:1},u.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(e,r){var i,s;return(i=(s=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart")).setLabel(l.getLabel("ChartTypeLongName","choropleth")),i.addItem(a.BIN_VALUES.buildProperty()),i.addItem(a.BINS.buildProperty()),s},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._dimensions,n.color=n._measures,n},t.prototype._buildColorConfig=function(e,t){return this._getBinGradientColorConfig(e.color[0],t)},t.prototype._buildConfig=function(e){var r,i,s,n,o,a;return o=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,i=t.__super__._buildConfig.apply(this,arguments),s=(a=o.getParameters()).map,r=a.autoZoom,n=a.projectionType,i.autoZoom=r,i.map=s,i.projection=n,i},t}(i)},74187:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E={}.hasOwnProperty;C=r(96486),m=r(8429).Z,a=r(42333),g=r(36563),o=r(34659).Z,n=r(99934).Z,i=r(34073),d=r(67527),c=r(32029),y=r(26417),h=r(50566),p=r(56386),l=r(84137).Z,u=r(32238).Z,s=r(52364).Z,b=r(84103).Z,f=d.PLOTS,_={BAR:"bar",LINE:"line",DOT:"dot"},e.exports=function(e){function t(){var e,r;this.onPropertiesChange=(e=this.onPropertiesChange,r=this,function(){return e.apply(r,arguments)}),t.__super__.constructor.call(this,"wave-combo-chart")}return function(e,t){for(var r in t)E.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._constraintsInfoForIcons={maxGroupings:1,minGroupings:1},t.prototype._validConditionalFormattingTypes=[a.STATIC],t.prototype._referenceLineConfigOption=["measureAxis1","measureAxis2"],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new o([{name:d.DIMENSION_AXIS,type:n.DIMENSION,label:m.getLabel("EclairNgChartSections","xAxis"),minItems:0,maxItems:1/0},{name:f,type:n.MEASURE,label:m.getLabel("EclairNgChartSections","yAxis"),isArray:!0,minItems:2,maxItems:1/0},y.getSectionDefinition()])},t.prototype.buildRowsMetadata=function(e,t,r,i,s,n){var o,a,l,u;return i.getParameter("applyConditionalFormatting")&&(l=this.getConditionalFormattingColumnName(i,e,t)),null!=i.getParameter("compactDecimalDigits")&&(o=i.getParameter("compactDecimalDigits")),null!=i.getParameter("compactDecimalDigitsOnLine")&&(a=i.getParameter("compactDecimalDigitsOnLine")),null!=i.getParameter("columnMap")&&(u=Array.from(e.getTimeColumnNames())),g.buildRowsMetadata({resultsMetadata:e,resultsFormatter:t,data:r,fieldName:l,timeColumns:u,isCustomFiscal:s,fiscalGranularity:n,compactDecimalDigits:o,compactDecimalDigitsOnLine:a})},t.prototype.getCategory=function(){return l.LINE},t.prototype.getDefaultChartProperties=function(){var e;return(e=new h([c.GENERAL.buildProperty(),p.SECTION.of("chart").setLabel(m.getLabel("ChartTypeLongName","combo")).setItems([p.BOOLEAN.of("stack",!1,m.getLabel("EclairNgChartOptions","stackAllBars")),c.VALUE_TYPE.buildProperty(),c.COMPACT_DECIMAL_DIGITS.buildProperty(),c.VALUE_TYPE_LINE.buildProperty(),c.COMPACT_DECIMAL_DIGITS_LINE.buildProperty(),p.BOOLEAN.of("showPoints",!0,m.getLabel("EclairNgChartOptions","showPoints")),c.AXIS_MODE.buildProperty().setDefaultValue("dual"),c.MISSING_VALUE.buildProperty(),c.AUTO_FIT_MODE.buildProperty()]),p.SERIES.of("plots",void 0,"Series").setMarkTypes([{value:_.BAR,label:m.getLabel("EclairNgChartOptions","markTypeBar")},{value:_.LINE,label:m.getLabel("EclairNgChartOptions","markTypeLine")},{value:_.DOT,label:m.getLabel("EclairNgChartOptions","markTypeDot")}]),c.DIMENSION_AXIS.buildProperty().addItem(c.CUSTOM_SIZE.buildProperty()).addItem(c.ICONS.buildProperty()).setLabel(m.getLabel("EclairNgChartOptions","xAxis")),c.MEASURE_AXIS.buildProperty().setName("measureAxis1").setLabel(m.getLabel("EclairNgChartOptions","yAxisLeft")),c.MEASURE_AXIS.buildProperty().setName("measureAxis2").setLabel(m.getLabel("EclairNgChartOptions","yAxisRight")),c.LEGEND.buildProperty(),c.TOOLTIP.buildProperty(),c.TRELLIS.buildProperty(this._getPreferredTrellisSize()),c.MARKERS.buildProperty()])).getProperty("measureAxis1").getItem("showZero").setHidden(!0),e.getProperty("measureAxis2").getItem("showZero").setHidden(!0),e},t.prototype.onPropertiesChange=function(e,t){return"multi"===e.axisMode&&t.stack?C.extend({},e,{stack:!1}):e},t.prototype.constructFromResolvedParams=function(e){return s.constructFromResolvedParams(e,this._referenceLineConfigOption)},t.prototype.resolveParams=function(e,t,r){return s.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},t.prototype._updateStackProperty=function(e,t,r,i){var s;if(s=e.getProperty("chart").getItem("stack"))return s.setDisabled("multi"===t.getParameter("axisMode"))},t.prototype._updatePlotsProperties=function(e,t,r,i){var s,n,o,a,l;return a=e.getProperty(f),n=(s=this.getColumnMap(t,r,i))[f].map((function(e){return r.getColumn(e)})),o=t.getParameter(f),l=C.isEmpty(o)?[]:C.difference(Object.keys(o),n.map((function(e){return e.getName()}))),a.setColumns(this._getColumnOptions(n,i).concat(l.map((function(e){return{value:e,label:e}})))).setDefaultValue(s[f][0])},t.prototype._updateProperties=function(e,r,i,s,n,o,a){return t.__super__._updateProperties.call(this,e,r,i),null!=r&&(this._updateStackProperty(e,r,i,s),this._updatePlotsProperties(e,r,i,s)),u.updateRefLineInputProperties(this._referenceLineConfigOption,e,n,r,o,a)},t.prototype._updateValueTypeProperties=function(e,r){var i,s,n;if(t.__super__._updateValueTypeProperties.call(this,e,r),null!=(s=r.getParameter("valueTypeOnLine")))return i=s&&s===b.COMPACT_NUMBER.code,null!=(n=e.getProperty("chart").getItem("compactDecimalDigitsOnLine"))?n.setHidden(!i):void 0},t.prototype._buildConfig=function(e){var r,i,s,n,o,a;return o=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),n=(a=o.getParameters()).valueTypeOnLine,i=a.plots,s=a.stack,u.mergePlots(r.plots,i),r.valueTypeOnLine=n,r.stack=s,r},t}(i)},48678:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;i=r(723),n=r(8429).Z,e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getDefaultValue=function(){return t.CIRCLE},t.prototype.getCode=function(){return this._value.code},t.prototype.getIcon=function(){return this._value.icon},t.prototype.getLabel=function(){var e;return e=(e=this.getCode())[0].toUpperCase()+e.slice(1),n.getLabel("EclairNgChartOptions","icon"+e)},t}(i),s.build(s,{CIRCLE:{code:"circle",icon:""},START:{code:"star",icon:""},HEART:{code:"heart",icon:""},SQUARE:{code:"square",icon:""},CHECK:{code:"check",icon:""},CLOUD:{code:"cloud",icon:""}})},67527:e=>{e.exports={PLOTS:"plots",DIMENSION_AXIS:"dimensionAxis",TIME_AXIS:"timeAxis",MEASURE_AXES:"measureAxes",MEASURE_AXIS1:"measureAxis1",MEASURE_AXIS2:"measureAxis2",COLOR:"color",SPLIT:"split",TRELLIS:"trellis",DIMENSION:"dimension",RADIUS:"r",LOCATION:"location",TIME:"time",X:"x",Y:"y"}},19422:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L,M,N,O,P,x,Z,F,k,B,W,G={}.hasOwnProperty;o=r(723),C=r(8429).Z,g=r(63594),i=r(92554),s=r(22441),n=r(51133),a=r(74187),l=r(62230).Z,d=r(71961).Z,c=r(65113).Z,h=r(56504).Z,p=r(16479).Z,m=r(59427),_=r(76778),f=r(75381),y=r(7318),b=r(65845),E=r(77192),S=r(24100),T=r(75288),I=r(94793),v=r(41005),R=r(14845),w=r(14760),A=r(73631),D=r(60938),L=r(78390),M=r(78633),N=r(26545),O=r(60915),x=r(27997),P=r(44125),Z=r(74391),F=r(2859),k=r(72012),B=r(97621),W=r(20441),e.exports=u=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)G.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t._isCaseSensitive=!1,t.getDefaultValue=function(){return t.HBAR},t.getValidTypesForLens=function(e,t,r){var i,s,n,o,a;for(a=[],s=0,n=(o=this.enums()).length;s<n;s++)(i=o[s]).getDefinition().isValidForLens(e,t,r)&&a.push(i);return a},t.getChartTypesForCategory=function(e){var t,r,i,s,n;for(n=[],r=0,i=(s=this.enums()).length;r<i;r++)(t=s[r]).getDefinition().getCategory()===e&&n.push(t);return n},t.prototype.getCode=function(){return this._value.code},t.prototype.getDefinition=function(){return this._value.definition},t.prototype.getLabel=function(){return C.getLabel("ChartType",this.getCode())},t.prototype.isAvailableInExplorer=function(){return g.hasCode(this.getCode())},t.prototype.getIconName=function(){return"chart-thumb-"+this.getCode()},t}(o),u.build(u,{HBAR:{code:"hbar",definition:new f},VBAR:{code:"vbar",definition:new k},STACKHBAR:{code:"stackhbar",definition:new L},STACKVBAR:{code:"stackvbar",definition:new N},PIE:{code:"pie",definition:new R},SCATTER:{code:"scatter",definition:new D},HEATMAP:{code:"heatmap",definition:new b},LINE:{code:"line",definition:new E},HDOT:{code:"hdot",definition:new y},VDOT:{code:"vdot",definition:new B},TIMELINE:{code:"time",definition:new Z},TIMECOMBO:{code:"time-combo",definition:new P},TIMEBAR:{code:"time-bar",definition:new x},WATERFALL:{code:"waterfall",definition:new W},STACK_WATERFALL:{code:"stackwaterfall",definition:new O},COMBO:{code:"combo",definition:new a},FUNNEL:{code:"funnel",definition:new m},ORIGAMI:{code:"origami",definition:new I},SANKEY:{code:"sankey",definition:new A},PARALLELCOORDS:{code:"parallelcoords",definition:new v},METRICS_RADAR:{code:"metricsradar",definition:new T},CHOROPLETH:{code:"choropleth",definition:new n},BUBBLEMAP:{code:"bubblemap",definition:new i},GEOMAP:{code:"geomap",definition:new _},PYRAMID:{code:"pyramid",definition:new w},STACKPYRAMID:{code:"stackpyramid",definition:new M},GAUGE:{code:"gauge",definition:new c},POLAR_GAUGE:{code:"polargauge",definition:new h},FLAT_GAUGE:{code:"flatgauge",definition:new d},BULLET:{code:"bullet",definition:new l},RATING:{code:"rating",definition:new p},MATRIX:{code:"matrix",definition:new S},TREEMAP:{code:"treemap",definition:new F},CALHEATMAP:{code:"calheatmap",definition:new s}})},32029:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_={}.hasOwnProperty,f=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};g=r(96486).filter,o=r(74179),a=r(78978),l=r(8429).Z,d=r(16730),u=r(40604),i=r(42333),h=r(53164).Z,p=r(69133).Z,c=r(84103).Z,n=r(56386),m=function(e,t,r,i,s){return n.NAMED_SECTION.of(e).setLabel("").setInline(!0).setClassName("offset-left flexbox").setItems([n.TEXT.of("label","",l.getLabel("EclairNgChartOptions",t)).setTooltip(l.getLabel("EclairNgChartOptions",i)).setPlaceholder(l.getLabel("EclairNgChartOptions",r)),n.COLOR.of("color",s).setDropdownType(o.DropdownRight)])},e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.buildProperty=function(e){return this.getValue().buildProperty(e)},t}(a),s.build(s,{GENERAL:{buildProperty:function(){return n.SECTION.of("general").setLabel(l.getLabel("EclairNgChartOptions","general")).setItems([s.TITLE.buildProperty(),s.THEME.buildProperty()])}},THEME:{buildProperty:function(){return n.DROPDOWN.of("theme","wave",l.getLabel("EclairNgChartOptions","theme")).setTooltip(l.getLabel("EclairNgChartOptions","themeTooltip")).setChoices([{value:"wave",label:l.getLabel("EclairNgChartOptions","themeDefault")},{value:"light",label:l.getLabel("EclairNgChartOptions","themeLight")},{value:"dark",label:l.getLabel("EclairNgChartOptions","themeDark")},{value:"colorblind",label:l.getLabel("EclairNgChartOptions","themeColorBlind")},{value:"colorblindEnhanced",label:l.getLabel("EclairNgChartOptions","themeColorBlindEnhanced")},{value:"bluegrassLight",label:l.getLabel("EclairNgChartOptions","themeBluegrassLight")},{value:"bluegrassDark",label:l.getLabel("EclairNgChartOptions","themeBluegrassDark")},{value:"sunriseLight",label:l.getLabel("EclairNgChartOptions","themeSunriseLight")},{value:"sunriseDark",label:l.getLabel("EclairNgChartOptions","themeSunriseDark")},{value:"waterLight",label:l.getLabel("EclairNgChartOptions","themeWaterLight")},{value:"waterDark",label:l.getLabel("EclairNgChartOptions","themeWaterDark")},{value:"watermelonLight",label:l.getLabel("EclairNgChartOptions","themeWatermelonLight")},{value:"watermelonDark",label:l.getLabel("EclairNgChartOptions","themeWatermelonDark")}])}},TOOLTIP:{buildProperty:function(){return n.NAMED_SECTION.of("tooltip").setItems([n.ONBOARDING_VIDEO.of("tooltipOnboardingVideo",void 0,l.getLabel("OnboardingVideo","customTooltipDescription")).setVideo(new h("W8cB6j45PHjcU7W6jb51aJ",l.getLabel("OnboardingVideo","customTooltipTitle"),p.VIDYARD)),n.SECTION.of("tooltipPreviewSection").setLabel("").setInline(!0).setClassName("tooltipPreviewSection").setItems([n.HEADER.of("tooltipPreview").setLabel(l.getLabel("EclairNgChartOptions","tooltipPreviewHeader")),n.PREVIEW_BUTTON.of("tooltipPreviewButton",!1,l.getLabel("EclairNgChartOptions","tooltipButtonPreview")).setButtonLabel(l.getLabel("EclairNgChartOptions","tooltipButtonPreview"))]),n.NAMED_SECTION.of("content").setLabel("").setInline(!0).setItems([n.CUSTOM_TEXT.of("description",null,"").setCustomizeTemplateLabel(l.getLabel("EclairNgChartOptions","customizeTemplateLabel")).setClassName("customizeTextTemplate"),n.NAMED_SECTION.of("legend").setLabel("").setInline(!0).setItems([n.BOOLEAN.of("customizeLegend",!1,l.getLabel("EclairNgChartOptions","customizeTooltipDataPoint")).setTooltip(l.getLabel("EclairNgChartOptions","customizeTooltipDataPointInfo")),n.BOOLEAN.of("showDimensions",!0,l.getLabel("EclairNgChartOptions","showDimensions")).setClassName("left-indent"),n.DROPDOWN.of("dimensions",[],l.getLabel("EclairNgChartOptions","dimensions")).setMultiSelect(!0).setShouldRefresh(!0).setRequired(!0).setLabel("").setChoices([]).setClassName("left-indent"),n.BOOLEAN.of("showMeasures",!0,l.getLabel("EclairNgChartOptions","showMeasures")).setClassName("left-indent"),n.DROPDOWN.of("measures",[],l.getLabel("EclairNgChartOptions","measures")).setMultiSelect(!0).setShouldRefresh(!0).setRequired(!0).setLabel("").setChoices([]).setClassName("left-indent"),n.BOOLEAN.of("showPercentage",!0,l.getLabel("EclairNgChartOptions","showPercentage")).setClassName("left-indent"),n.BOOLEAN.of("showNullValues",!0,l.getLabel("EclairNgChartOptions","showNullValues")).setClassName("left-indent"),n.BOOLEAN.of("showBinLabel",!0,l.getLabel("EclairNgChartOptions","showBinLabel")).setClassName("left-indent")]),n.WIDGET_PICKER.of("widget",null,"")])])}},TITLE:{buildProperty:function(){return n.NAMED_SECTION.of("title").setInline(!0).setItems([n.TEXT.of("label","",l.getLabel("EclairNgChartOptions","title")).setPlaceholder(l.getLabel("EclairNgChartOptions","titlePlaceholder")),n.DROPDOWN.of("fontSize",14).setLabel(l.getLabel("EclairNgChartOptions","titleFontSize")).setChoices([10,11,12,14,16,18,20,24,32,48,64].map((function(e){return{value:e,label:e}}))),n.TEXT.of("subtitleLabel","",l.getLabel("EclairNgChartOptions","subTitle")).setPlaceholder(l.getLabel("EclairNgChartOptions","subTitlePlaceholder")),n.DROPDOWN.of("subtitleFontSize",11).setLabel(l.getLabel("EclairNgChartOptions","subtitleFontSize")).setChoices([10,11,12,14,16,18,20,24,32,48,64].map((function(e){return{value:e,label:e}}))),n.DROPDOWN.of("align","center",l.getLabel("EclairNgChartOptions","titleAlign")).setChoices([{value:"left",label:l.getLabel("EclairNgChartOptions","titleAlignLeft")},{value:"center",label:l.getLabel("EclairNgChartOptions","titleAlignCenter")},{value:"right",label:l.getLabel("EclairNgChartOptions","titleAlignRight")}])])}},VALUE_TYPE:{buildProperty:function(){return n.DROPDOWN.of("valueType","compactNumber").setTooltip(l.getLabel("EclairNgChartOptions","valueTypeTooltip")).setChoices(c.enums().map((function(e){return{value:e.code,label:e.label}})))}},VALUE_TYPE_LINE:{buildProperty:function(){return n.DROPDOWN.of("valueTypeOnLine","none").setLabel(l.getLabel("EclairNgChartOptions","valueTypeOnLine")).setTooltip(l.getLabel("EclairNgChartOptions","valueTypeOnLineTooltip")).setChoices(c.enums().map((function(e){return{value:e.code,label:e.label}})))}},COMPACT_DECIMAL_DIGITS:{buildProperty:function(){return n.DROPDOWN.of("compactDecimalDigits",-1).setLabel(l.getLabel("EclairNgChartOptions","compactDecimalDigits")).setTooltip(l.getLabel("EclairNgChartOptions","compactDecimalDigitsTooltip")).setChoices([{value:-1,label:l.getLabel("EclairNgChartOptions","compactDecimalDigitsDefault")},{value:0,label:0},{value:1,label:1},{value:2,label:2},{value:3,label:3},{value:4,label:4}])}},COMPACT_DECIMAL_DIGITS_LINE:{buildProperty:function(){return n.DROPDOWN.of("compactDecimalDigitsOnLine",-1).setLabel(l.getLabel("EclairNgChartOptions","compactDecimalDigits")).setTooltip(l.getLabel("EclairNgChartOptions","compactDecimalDigitsTooltip")).setChoices([{value:-1,label:l.getLabel("EclairNgChartOptions","compactDecimalDigitsDefault")},{value:0,label:0},{value:1,label:1},{value:2,label:2},{value:3,label:3},{value:4,label:4}]).setHidden(!0)}},RADIUS_RATIO:{buildProperty:function(){return n.DROPDOWN.of("radiusRatio",5).setLabel(l.getLabel("EclairNgChartOptions","bubbleMaxRadiusRatio")).setChoices([.5,1,2,3,4,5,6,7,8,9,10].map((function(e){return{value:e,label:e+"%"}})))}},AUTO_FIT_MODE:{buildProperty:function(){return n.DROPDOWN.of("autoFitMode","keepLabels",l.getLabel("EclairNgChartOptions","autoFitMode")).setTooltip(l.getLabel("EclairNgChartOptions","autoFitModeTooltip")).setChoices([{value:"none",label:l.getLabel("EclairNgChartOptions","autoFitModeNone")},{value:"fit",label:l.getLabel("EclairNgChartOptions","autoFitModeFit")},{value:"keepLabels",label:l.getLabel("EclairNgChartOptions","autoFitModeKeepLabels")}])}},AXIS_MODE:{buildProperty:function(){return n.DROPDOWN.of("axisMode","sync",l.getLabel("EclairNgChartOptions","axisMode")).setTooltip(l.getLabel("EclairNgChartOptions","axisModeTooltip")).setChoices([{value:"sync",label:l.getLabel("EclairNgChartOptions","axisModeSync")},{value:"dual",label:l.getLabel("EclairNgChartOptions","axisModeDual")},{value:"multi",label:l.getLabel("EclairNgChartOptions","axisModeMulti")}])}},MISSING_VALUE:{buildProperty:function(){return n.DROPDOWN.of("missingValue","connect").setTooltip(l.getLabel("EclairNgChartOptions","missingValueTooltip")).setChoices([{value:"connect",label:l.getLabel("EclairNgChartOptions","connect")},{value:"disconnect",label:l.getLabel("EclairNgChartOptions","disconnect")},{value:"cumulative",label:l.getLabel("EclairNgChartOptions","cumulative")},{value:"cumulativeUntilLastData",label:l.getLabel("EclairNgChartOptions","cumulativeUntilLastData")}])}},LEGEND:{buildProperty:function(){return n.NAMED_SECTION.of("legend").setLabel(l.getLabel("EclairNgChartOptions","legend")).setClassName("legend-section").setItems([n.BOOLEAN.of("show",!0,l.getLabel("EclairNgChartOptions","legendShow")),n.BOOLEAN.of("showHeader",!0,l.getLabel("EclairNgChartOptions","legendShowHeader")),n.BOOLEAN.of("inside",!1,l.getLabel("EclairNgChartOptions","legendInside")).setTooltip(l.getLabel("EclairNgChartOptions","legendInsideTooltip")),n.BOOLEAN.of("descOrder",!1,l.getLabel("EclairNgChartOptions","legendSortingOrder")),n.DROPDOWN.of("position","right-top",l.getLabel("EclairNgChartOptions","legendPosition")).setChoices([{value:"top-center",label:l.getLabel("EclairNgChartOptions","positionTopCenter")},{value:"right-top",label:l.getLabel("EclairNgChartOptions","positionRightTop")},{value:"bottom-center",label:l.getLabel("EclairNgChartOptions","positionBottomCenter")},{value:"left-top",label:l.getLabel("EclairNgChartOptions","positionLeftTop")}]),s.CUSTOM_SIZE.buildProperty()])}},TRELLIS:{buildProperty:function(e){return null==e&&(e=[100,100]),n.NAMED_SECTION.of("trellis").setLabel(l.getLabel("EclairNgChartOptions","trellis")).setItems([n.BOOLEAN.of("enable",!1).setLabel(l.getLabel("EclairNgChartOptions","trellisEnable")),n.BOOLEAN.of("showGridLines",!0).setLabel(l.getLabel("EclairNgChartOptions","trellisShowGridLines")),n.BOOLEAN.of("flipLabels",!1).setLabel(l.getLabel("EclairNgChartOptions","trellisFlipLabels")),n.DROPDOWN.of("type","x",l.getLabel("EclairNgChartOptions","trellisType")).setTooltip(l.getLabel("EclairNgChartOptions","trellisTypeTooltip")).setChoices([{value:"x",label:l.getLabel("EclairNgChartOptions","trellisTypeX")},{value:"y",label:l.getLabel("EclairNgChartOptions","trellisTypeY")},{value:"xy",label:l.getLabel("EclairNgChartOptions","trellisTypeXY")},{value:"wrap",label:l.getLabel("EclairNgChartOptions","trellisTypeWrap")}]),n.DROPDOWN.of("chartsPerLine",4,l.getLabel("EclairNgChartOptions","trellisChartPerLine")).setClassName("short").setChoices([1,2,3,4,5,6,7,8].map((function(e){return{value:e,label:e+""}}))),n.DROPDOWN.of("size",e,l.getLabel("EclairNgChartOptions","trellisSize")).setTooltip(l.getLabel("EclairNgChartOptions","trellisSizeTooltip")).setChoices([{value:[50,50],label:l.getLabel("EclairNgChartOptions","trellisSizeSmallSquare")},{value:[100,100],label:l.getLabel("EclairNgChartOptions","trellisSizeSquare")},{value:[150,150],label:l.getLabel("EclairNgChartOptions","trellisSizeBigSquare")},{value:[100,20],label:l.getLabel("EclairNgChartOptions","trellisSizeUltraFlat")},{value:[150,80],label:l.getLabel("EclairNgChartOptions","trellisSizeFlat")}])])}},MEASURE_AXIS:{buildProperty:function(){return n.NAMED_SECTION.of("measureAxis").setItems([n.BOOLEAN.of("sqrtScale",!1,l.getLabel("EclairNgChartOptions","sqrtScale")),n.BOOLEAN.of("showZero",!0),n.BOOLEAN.of("showAxis",!0,l.getLabel("EclairNgChartOptions","showAxis")),s.CUSTOM_DOMAIN.buildProperty(),n.BOOLEAN.of("showTitle",!0,l.getLabel("EclairNgChartOptions","showTitle")),n.TEXT.of("title","",l.getLabel("EclairNgChartOptions","title")).setPlaceholder(l.getLabel("EclairNgChartOptions","defaultTitle")),s.REFERENCE_LINES.buildProperty()])}},DIMENSION_AXIS:{buildProperty:function(){return n.NAMED_SECTION.of("dimensionAxis").setItems([n.BOOLEAN.of("showAxis",!0,l.getLabel("EclairNgChartOptions","showAxis")),n.BOOLEAN.of("showTitle",!0,l.getLabel("EclairNgChartOptions","showTitle")),n.TEXT.of("title","",l.getLabel("EclairNgChartOptions","title")).setPlaceholder(l.getLabel("EclairNgChartOptions","defaultTitle"))])}},REFERENCE_LINES:{buildProperty:function(e){var t,r;return r=(null!=e?e.isTime:void 0)?"time":"value",t=(null!=e?e.isTime:void 0)?{type:"static",data:""}:{type:"static",data:"0"},n.MULTI_VALUE.of("referenceLines").setLabel(l.getLabel("EclairNgChartOptions","referenceLines")).setAddLabel(l.getLabel("EclairNgChartOptions","addReferenceLine")).setCanCollapseItem(!0).setItems([n.REF_LINE_INPUT.of(r,t).setInputType(r)])}},PREDICTIVE_LINE:{buildProperty:function(){return n.MULTI_VALUE.of("predictiveLine").setLabel(l.getLabel("EclairNgChartOptions","predictiveLine")).setAddLabel(l.getLabel("EclairNgChartOptions","predictiveLine")).setMaxInstances(1).setItems([n.TEXT.of("time").setPlaceholder(l.getLabel("EclairNgChartOptions","defaultReferenceTime")),n.TEXT.of("label","TODAY"),n.COLOR.of("color","#8932ED").setDropdownType(o.DropdownRight)])}},CUSTOM_DOMAIN:{buildProperty:function(){return n.NAMED_SECTION.of("customDomain").setLabel("").setInline(!0).setItems([n.BOOLEAN.of("showDomain",!1,l.getLabel("EclairNgChartOptions","showDomain")).setTooltip(l.getLabel("EclairNgChartOptions","customDomainTooltip")),n.NUMBER.of("low",null,"").setNumberType(d.Float).setPlaceholder(l.getLabel("EclairNgChartOptions","lowValuePlaceHolder")).setClassName("offset-left sideBySide left"),n.NUMBER.of("high",null,"").setNumberType(d.Float).setPlaceholder(l.getLabel("EclairNgChartOptions","highValue")).setClassName("offset-left sideBySide right")])}},CUSTOM_SIZE:{buildProperty:function(){return n.DROPDOWN.of("customSize","auto",l.getLabel("EclairNgChartOptions","customSize")).setChoices([{value:"auto",label:l.getLabel("EclairNgChartOptions","customSizeAuto")},{value:10,label:"10%"},{value:20,label:"20%"},{value:30,label:"30%"},{value:40,label:"40%"},{value:50,label:"50%"}])}},FILL_AREA:{buildProperty:function(){return n.BOOLEAN.of("fillArea",!0).setTooltip(l.getLabel("EclairNgChartOptions","fillAreaTooltip"))}},DRAW_AREA:{buildProperty:function(){return n.NAMED_SECTION.of("drawArea").setLabel("").setInline(!0).setItems([n.BOOLEAN.of("showDrawArea",!1,l.getLabel("EclairNgChartOptions","showDrawArea")).setTooltip(l.getLabel("EclairNgChartOptions","drawAreaTooltip")),n.DROPDOWN.of("bounding1","",l.getLabel("EclairNgChartOptions","bounding1")).setClassName("offset-left").setShouldRefresh(!0).setChoices([{value:"",label:""}]),n.DROPDOWN.of("bounding2","",l.getLabel("EclairNgChartOptions","bounding2")).setClassName("offset-left").setShouldRefresh(!0).setChoices([{value:"",label:""}]),n.HEADER.of("lineHeader").setLabel(l.getLabel("EclairNgChartOptions","line")),n.DROPDOWN.of("measure","",l.getLabel("EclairNgChartOptions","measure")).setClassName("offset-left").setShouldRefresh(!0).setLabel("").setChoices([{value:"",label:""}])])}},DASH_LINES:{buildProperty:function(){return n.NAMED_SECTION.of("dashLine").setLabel("").setInline(!0).setItems([n.BOOLEAN.of("showDashLine",!1,l.getLabel("EclairNgChartOptions","showDashLine")),n.DROPDOWN.of("measures","",l.getLabel("EclairNgChartOptions","measures")).setMultiSelect(!0).setShouldRefresh(!0).setLabel("").setClassName("offset-left").setChoices([{value:"",label:""}])])}},BIN_VALUES:{buildProperty:function(){return n.BOOLEAN.of("binValues",!1,l.getLabel("EclairNgChartOptions","binValues"))}},BINS:{buildProperty:function(){return n.NAMED_SECTION.of("bins").setLabel("").setInline(!0).setItems([n.NAMED_SECTION.of("breakpoints").setLabel("").setInline(!0).setItems([n.HEADER.of("breakpoints").setLabel(l.getLabel("EclairNgChartOptions","bandBreakPoints")),n.NUMBER.of("low",0,l.getLabel("EclairNgChartOptions","lowValue")).setNumberType(d.Float).setRequired(!0).setClassName("offset-left sideBySide left"),n.NUMBER.of("high",100,l.getLabel("EclairNgChartOptions","highValue")).setNumberType(d.Float).setClassName("offset-left sideBySide right")]),s.BANDS_WITH_LABELS.buildProperty()])}},BANDS_WITH_LABELS:{buildProperty:function(){return n.NAMED_SECTION.of("bands").setLabel("").setInline(!0).setItems([n.HEADER.of("binRanges"),m("low","binLowLabel","binLow","binLowTooltip","#B22222"),m("medium","binMediumLabel","binMedium","binMediumTooltip","#ffa500"),m("high","binHighLabel","binHigh","binHighTooltip","#008000")])}},BREAKPOINTS:{buildProperty:function(){return n.SECTION.of("breakpoints").setLabel(l.getLabel("EclairNgChartOptions","bandBreakPoints")).setItems([n.NUMBER.of("min",0).setNumberType(d.Float).setRequired(!0).setTooltip(l.getLabel("EclairNgChartOptions","minTooltip")),n.NUMBER.of("medium",33).setNumberType(d.Float).setRequired(!0).setTooltip(l.getLabel("EclairNgChartOptions","mediumTooltip")),n.NUMBER.of("high",66).setNumberType(d.Float).setRequired(!0).setTooltip(l.getLabel("EclairNgChartOptions","highTooltip")),n.NUMBER.of("max",100).setNumberType(d.Float).setRequired(!0).setTooltip(l.getLabel("EclairNgChartOptions","maxTooltip"))])}},BANDS:{buildProperty:function(){return n.NAMED_SECTION.of("colors").setLabel(l.getLabel("EclairNgChartOptions","bandColors")).setItems([n.COLOR.of("lowColor1","#F71979").setLabel(l.getLabel("EclairNgChartOptions","lowBand")).setClassName("sideBySide left").setTooltip(l.getLabel("EclairNgChartOptions","lowBandTooltip")),n.COLOR.of("lowColor2","#CC203D").setLabel("").setClassName("sideBySide right").setDropdownType(o.DropdownRight),n.COLOR.of("mediumColor1","#FED444").setLabel(l.getLabel("EclairNgChartOptions","mediumBand")).setClassName("sideBySide left").setTooltip(l.getLabel("EclairNgChartOptions","mediumBandTooltip")),n.COLOR.of("mediumColor2","#F29946").setLabel("").setClassName("sideBySide right").setDropdownType(o.DropdownRight),n.COLOR.of("highColor1","#7BDE4E").setLabel(l.getLabel("EclairNgChartOptions","highBand")).setClassName("sideBySide left").setTooltip(l.getLabel("EclairNgChartOptions","highBandTooltip")),n.COLOR.of("highColor2","#169913").setLabel("").setClassName("sideBySide right").setDropdownType(o.DropdownRight)])}},ICONS:{buildProperty:function(){return n.NAMED_SECTION.of("icons").setLabel("").setInline(!0).setItems([n.BOOLEAN.of("useIcons",!1,l.getLabel("EclairNgChartOptions","useIcons")).setTooltip(l.getLabel("EclairNgChartOptions","useIconsTooltip")),n.NAMED_SECTION.of("iconProps").setLabel("").setInline(!0).setItems([n.DROPDOWN.of("column","",l.getLabel("EclairNgChartOptions","iconColumn")).setClassName("offset-left").setShouldRefresh(!0).setChoices([{value:"",label:""}]),n.DROPDOWN.of("fit","cover",l.getLabel("EclairNgChartOptions","iconFit")).setClassName("offset-left").setChoices([{value:"cover",label:l.getLabel("EclairNgChartOptions","iconFitCover")},{value:"contain",label:l.getLabel("EclairNgChartOptions","iconFitContain")},{value:"fill",label:l.getLabel("EclairNgChartOptions","iconFitFill")}]),n.DROPDOWN.of("type","round",l.getLabel("EclairNgChartOptions","iconType")).setClassName("offset-left").setChoices([{value:"round",label:l.getLabel("EclairNgChartOptions","iconTypeRound")},{value:"square",label:l.getLabel("EclairNgChartOptions","iconTypeSquare")}])])])}},MARKERS:{buildProperty:function(){return n.NAMED_SECTION.of("markersbutton").setLabel(l.getLabel("EclairNgChartOptions","chartMarker")).setItems([n.BUTTON.of("chartMarkerButton",!1,l.getLabel("EclairNgChartOptions","chartMarkerButton")).setButtonStyle(u.Secondary)])}},MARKER_PROPERTIES:{buildProperty:function(){return n.NAMED_SECTION.of("markers").setLabel(l.getLabel("EclairNgChartOptions","chartMarker")).setInline(!0).setItems([n.HEADER.of("markerHeader").setLabel("").setClassName("header sideBySide markerHeader left "),n.BUTTON.of("deleteButton",!1,"").setIconName("delete").setClassName("deleteButton").setButtonStyle(u.Secondary),n.HEADER.of("markerContent").setClassName("markerSectionHeader").setLabel(l.getLabel("EclairNgChartOptions","markerContent")),n.BOOLEAN.of("showDimensions",!0,l.getLabel("EclairNgChartOptions","showDimensions")),n.DROPDOWN.of("dimensions","",l.getLabel("EclairNgChartOptions","dimensions")).setMultiSelect(!0).setRequired(!0).setLabel("").setChoices([{value:"",label:""}]),n.BOOLEAN.of("showMeasures",!0,l.getLabel("EclairNgChartOptions","showMeasures")),n.DROPDOWN.of("measures","",l.getLabel("EclairNgChartOptions","measures")).setMultiSelect(!0).setLabel("").setRequired(!0).setChoices([{value:"",label:""}]),n.CUSTOM_TEXT.of("customText",null,"").setCustomizeTemplateLabel(l.getLabel("EclairNgChartOptions","customizeTemplateLabel")).setClassName("customizeTextTemplate"),n.HEADER.of("markerDisplay").setClassName("markerSectionHeader").setLabel(l.getLabel("EclairNgChartOptions","markerDisplay")),n.BOOLEAN.of("defaultShow",!0,l.getLabel("EclairNgChartOptions","defaultShow")),n.BOOLEAN.of("isBlinking",!1,l.getLabel("EclairNgChartOptions","isBlinking")),n.HEADER.of("markerStyling").setLabel(l.getLabel("EclairNgChartOptions","markerStyling")),n.COLOR.of("backgroundColor","#CC203D").setLabel(l.getLabel("EclairNgChartOptions","background")).setClassName("sideBySide left"),n.COLOR.of("borderColor","#CC203D").setLabel(l.getLabel("EclairNgChartOptions","border")).setClassName("sideBySide right").setDropdownType(o.DropdownRight)])}},FORMAT_MODE:{buildProperty:function(e){var t,r,s;return s=e.validTypes,t=function(){var e,t,n,o;for(o=[],e=0,t=(n=[i.GRADIENT,i.MULTI]).length;e<t;e++)if(r=n[e],f.call(s,r)>=0)switch(r){case i.MULTI:o.push({value:i.MULTI.getCode(),label:l.getLabel("ConditionalFormatting","bin")});break;case i.GRADIENT:o.push({value:i.GRADIENT.getCode(),label:l.getLabel("ConditionalFormatting","gradient")});break;default:o.push(void 0)}else o.push(void 0);return o}(),t=g(t),n.RADIO.of("formatType",t[0].value,l.getLabel("ConditionalFormatting","formatType")).setChoices(t)}}})},74393:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.code},t}(i),s.build(s,{BINS:{code:"bins"},CATEGORICAL:{code:"categorical"},GRADIENT:{code:"gradient"},STATIC:{code:"static"}})},83114:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty;u=r(8429).Z,i=r(25174),o=r(32029),a=r(50566),l=r(56386),s=r(52364).Z,n=r(32238).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-flatGauge-chart")}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.supportsGradientBin=function(){return!0},t.prototype.supportsLabelInBin=function(){return!1},t.prototype.getDefaultChartProperties=function(){return new a([o.GENERAL.buildProperty(),l.SECTION.of("chart").setLabel(u.getLabel("ChartTypeLongName","flatgauge")).setItems([o.VALUE_TYPE.buildProperty(),o.COMPACT_DECIMAL_DIGITS.buildProperty(),o.REFERENCE_LINES.buildProperty()]),o.BREAKPOINTS.buildProperty(),o.TOOLTIP.buildProperty()])},t.prototype._getPreferredTrellisSize=function(){return[150,80]},t.prototype._buildConfig=function(e){var r,i,s;return s=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),i=s.getParameters().referenceLines,r.referenceLines=i,r},t.prototype._updateProperties=function(e,r,i,s,o,a,l){return t.__super__._updateProperties.call(this,e,r,i),n.updateRefLineInputProperties(["chart"],e,o,r,a,l)},t.prototype.resolveParams=function(e,t,r){return s.getResolvedWidgetParams(e,[],t,r)},t.prototype.constructFromResolvedParams=function(e){return s.constructFromResolvedParams(e,[])},t}(i)},59427:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;r(96486),n=r(8429).Z,i=r(68253),r(32029),r(50566),s=r(56386),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-funnel-chart")}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getChartTypeLongNameLabel=function(){return n.getLabel("ChartTypeLongName","funnel")},t.prototype._getItems=function(){var e;return(e=t.__super__._getItems.apply(this,arguments)).splice(0,0,this._getStemSegmentsItem()),e},t.prototype._getStemSegmentsItem=function(){return s.NUMBER.of("stemSegments",3).setMin(0).setMax(20)},t.prototype._buildConfig=function(e){var r,i,s;return s=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),i=s.getParameters().stemSegments,r.stemSegments=i,r},t}(i)},43759:(e,t,r)=>{var i,s,n,o,a,l,u,d,c={}.hasOwnProperty;u=r(8429).Z,s=r(42333),d=r(84103).Z,l=r(74393),i=r(25174),n=r(32029),o=r(50566),a=r(56386),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-gauge-chart")}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._validConditionalFormattingTypes=[s.MULTI],t.prototype.getDefaultChartProperties=function(){var e;return e=new o([n.GENERAL.buildProperty(),a.SECTION.of("chart").setLabel(u.getLabel("ChartTypeLongName","gauge")).setItems([a.DROPDOWN.of("valueType","compactNumber").setTooltip(u.getLabel("EclairNgChartOptions","valueTypeTooltip")).setChoices([{value:d.NONE.code,label:d.NONE.label},{value:d.COMPACT_NUMBER.code,label:d.COMPACT_NUMBER.label},{value:d.NUMBER.code,label:d.NUMBER.label}]),n.COMPACT_DECIMAL_DIGITS.buildProperty(),a.BOOLEAN.of("showPercentage",!0,u.getLabel("EclairNgChartOptions","showBandPercentage")),a.BOOLEAN.of("showRange",!0,u.getLabel("EclairNgChartOptions","showBandRange")),a.BOOLEAN.of("showLabel",!0,u.getLabel("EclairNgChartOptions","showBandLabel")),a.DROPDOWN.of("angle",240).setChoices([90,120,180,240,270].map((function(e){return{value:e,label:e+""}})))]),n.BREAKPOINTS.buildProperty()]),this.supportsCustomTooltips()&&e.addProperty(n.TOOLTIP.buildProperty()),e},t.prototype._buildColorFromOldSchema=function(e,t){var r,i,s,n;return r=(n=e.getParameters()).bands,s=n.medium,i=n.high,null!=r?{type:l.BINS.getCode(),column:t.plots[0].column,breakpoints:[this._convertStringToNumber(s),this._convertStringToNumber(i)].sort((function(e,t){return e-t})),bands:[{color:r.low.color,label:r.low.label},{color:r.medium.color,label:r.medium.label},{color:r.high.color,label:r.high.label}]}:null},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l;return a=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,i=t.__super__._buildConfig.apply(this,arguments),n=(l=a.getParameters()).showPercentage,o=l.showRange,s=l.showLabel,r=l.angle,i.showPercentage=n,i.showRange=o,i.showLabel=s,i.angle=r,i},t}(i)},76778:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty;l=r(8429).Z,n=r(34659).Z,s=r(99934).Z,o=r(67527),a=r(32029),i=r(27489),u=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-latlngMap-chart")}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.PLOTS,type:s.DIMENSION,label:l.getLabel("EclairNgChartSections","location"),isArray:!0,minItems:1,maxItems:1},{name:o.LOCATION,type:s.MEASURE,label:l.getLabel("EclairNgChartSections","latLng"),tooltip:l.getLabel("EclairNgChartSections","latLngTooltip"),minItems:2,maxItems:2},{name:o.RADIUS,type:s.MEASURE,label:l.getLabel("EclairNgChartSections","radius"),allowsDuplicate:!0,minItems:0,maxItems:1},{name:o.COLOR,type:s.MEASURE,label:l.getLabel("EclairNgChartSections","bubbleColor"),allowsDuplicate:!0,minItems:1,maxItems:1},u.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setLabel(l.getLabel("ChartTypeLongName","geomap")).addItem(a.RADIUS_RATIO.buildProperty().setName("radiusRatio")),e},t.prototype._buildColumnMap=function(e,r,i,s){var n,o;return o=(n=t.__super__._buildColumnMap.apply(this,arguments))._measures,n.plots=n._dimensions,n.location=o.slice(0,2),n.r=o.length>2?o.slice(2,3):[],n.color=o.length>2?o.slice(-1):[],n},t.prototype._buildColorConfig=function(e,t){var r,i,s;return i=(s=t.getParameters()).lowColor,r=s.highColor,this._getGradientColorConfig(e.color[0],[i,r])},t.prototype._buildConfig=function(e){var r,i,s,n,o;return n=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,(r=t.__super__._buildConfig.apply(this,arguments))._measures,r._dimensions,i=(o=n.getParameters()).map,s=o.radiusRatio,r.map=i,r.r.radiusRatio=s,r},t}(i)},75381:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;a=r(8429).Z,n=r(34659).Z,s=r(99934).Z,i=r(13065),o=r(67527),l=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-hbar-chart")}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.PLOTS,type:s.MEASURE,isArray:!0,label:a.getLabel("EclairNgChartSections","axisBarLength"),minItems:1,maxItems:1/0},{name:o.DIMENSION_AXIS,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","axisBars"),minItems:0,maxItems:1/0},l.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setLabel(a.getLabel("ChartTypeLongName","hbar")),e.getProperty("dimensionAxis").setLabel(a.getLabel("EclairNgChartOptions","yAxis")),e.getProperty("measureAxis1").setLabel(a.getLabel("EclairNgChartOptions","xAxisTop")),e.getProperty("measureAxis2").setLabel(a.getLabel("EclairNgChartOptions","xAxisBottom")),e},t}(i)},7318:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;a=r(8429).Z,n=r(34659).Z,s=r(99934).Z,o=r(67527),i=r(2754),l=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-hdot-chart")}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.PLOTS,type:s.MEASURE,label:a.getLabel("EclairNgChartSections","xAxis"),isArray:!0,minItems:1,maxItems:1},{name:o.DIMENSION_AXIS,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","yAxis"),minItems:0,maxItems:1/0},{name:o.RADIUS,type:s.MEASURE,label:a.getLabel("EclairNgChartSections","radius"),minItems:0,maxItems:1},{name:o.SPLIT,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","bubbles"),minItems:0,maxItems:1},l.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setLabel(a.getLabel("ChartTypeLongName","hdot")),e.getProperty("dimensionAxis").setLabel(a.getLabel("EclairNgChartOptions","yAxis")),e.getProperty("measureAxis1").setLabel(a.getLabel("EclairNgChartOptions","xAxis")),e},t}(i)},65845:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h={}.hasOwnProperty;c=r(8429).Z,d=r(74179),r(1611).Z,o=r(42333),n=r(34659).Z,s=r(99934).Z,i=r(46626),a=r(67527),l=r(32029),r(50566),u=r(56386),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-heatMap-chart","heatmap")}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._validConditionalFormattingTypes=[o.CATEGORIES,o.MULTI,o.GRADIENT],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:a.X,type:s.DIMENSION,label:c.getLabel("EclairNgChartSections","xAxis"),minItems:0,maxItems:1/0},{name:a.Y,type:s.DIMENSION,label:c.getLabel("EclairNgChartSections","yAxis"),minItems:0,maxItems:1/0},{name:a.COLOR,type:s.MEASURE,label:c.getLabel("EclairNgChartSections","color"),minItems:1,maxItems:1}])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setItems([l.AUTO_FIT_MODE.buildProperty().setDefaultValue("keepLabels"),l.BIN_VALUES.buildProperty(),u.HEADER.of("colors"),u.COLOR.of("lowColor","#E2F4FC").setClassName("sideBySide left"),u.COLOR.of("highColor","#009DDF").setClassName("sideBySide right").setDropdownType(d.DropdownRight),l.BINS.buildProperty()]),e},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).color=n._measures,n},t.prototype._buildColorConfig=function(e,t){return this._getBinGradientColorConfig(e.color[0],t)},t}(i)},77192:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_={}.hasOwnProperty;m=r(96486),p=r(8429).Z,a=r(42333),o=r(34659).Z,n=r(99934).Z,i=r(26079),u=r(67527),d=r(32029),g=r(26417),c=r(50566),h=r(56386),s=r(52364).Z,l=r(32238).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-line-chart")}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._constraintsInfoForIcons={maxGroupings:2,minGroupings:1},t.prototype._validConditionalFormattingTypes=[a.STATIC,a.CATEGORIES],t.prototype._referenceLineConfigOption=["measureAxis1","measureAxis2"],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new o([{name:u.DIMENSION_AXIS,type:n.DIMENSION,label:p.getLabel("EclairNgChartSections","xAxis"),minItems:0,maxItems:1/0},{name:u.PLOTS,type:n.MEASURE,label:p.getLabel("EclairNgChartSections","yAxis"),isArray:!0,minItems:1,maxItems:1/0},{name:u.SPLIT,type:n.DIMENSION,label:p.getLabel("EclairNgChartSections","lines"),minItems:0,maxItems:1},g.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=new c([d.GENERAL.buildProperty(),h.SECTION.of("chart").setLabel(p.getLabel("ChartTypeLongName","line")).setItems([d.AXIS_MODE.buildProperty(),d.AUTO_FIT_MODE.buildProperty(),d.FILL_AREA.buildProperty(),d.VALUE_TYPE.buildProperty().setDefaultValue("none"),d.COMPACT_DECIMAL_DIGITS.buildProperty().setHidden(!0),h.BOOLEAN.of("showPoints",!1),h.BOOLEAN.of("showZero",!0),d.DRAW_AREA.buildProperty(),d.DASH_LINES.buildProperty()]),d.DIMENSION_AXIS.buildProperty().setLabel(p.getLabel("EclairNgChartOptions","xAxis")).addItem(d.CUSTOM_SIZE.buildProperty()).addItem(d.ICONS.buildProperty()),d.MEASURE_AXIS.buildProperty().setName("measureAxis1").setLabel(p.getLabel("EclairNgChartOptions","yAxisLeft")),d.MEASURE_AXIS.buildProperty().setName("measureAxis2").setLabel(p.getLabel("EclairNgChartOptions","yAxisRight")),d.LEGEND.buildProperty(),d.TOOLTIP.buildProperty(),d.TRELLIS.buildProperty(this._getPreferredTrellisSize()),d.MARKERS.buildProperty()])).getProperty("measureAxis1").getItem("showZero").setHidden(!0),e.getProperty("measureAxis2").getItem("showZero").setHidden(!0),e},t.prototype.resolveParams=function(e,t,r){return s.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},t.prototype.constructFromResolvedParams=function(e){return s.constructFromResolvedParams(e,this._referenceLineConfigOption)},t.prototype._buildColumnMap=function(e,r,i,s){var n,o,a;return o=(n=t.__super__._buildColumnMap.apply(this,arguments)).dimensionAxis,a=n.plots,n.split=a.length<2&&o.length>1?[o.pop()]:[],n},t.prototype._isConditionalFormattingColumnValid=function(e,t){return!(e!==m.last(t.split)&&t.plots.indexOf(e)<0)},t.prototype._buildColorConfig=function(e,t){return this._getCategoricalColorConfig(e.split.length?m.last(e.split):null)},t.prototype._buildConfig=function(e){var r,i,s,n,o;return n=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,(r=t.__super__._buildConfig.apply(this,arguments))._measures,r._dimensions,i=(o=n.getParameters()).fillArea,s=o.showPoints,m.extend(r,{fillArea:i,showPoints:s})},t.prototype._updateProperties=function(e,r,i,s,n,o,a){return t.__super__._updateProperties.call(this,e,r,i,s),l.updateRefLineInputProperties(this._referenceLineConfigOption,e,n,r,o,a)},t}(i)},24100:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;a=r(8429).Z,r(1611).Z,r(42333),n=r(34659).Z,s=r(99934).Z,i=r(46626),o=r(67527),r(18948),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-matrix-chart","matrix")}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.X,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","xAxis"),minItems:0,maxItems:1/0},{name:o.Y,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","yAxis"),minItems:0,maxItems:1/0},{name:o.RADIUS,type:s.MEASURE,label:a.getLabel("EclairNgChartSections","radius"),allowsDuplicate:!0,minItems:0,maxItems:1},{name:o.COLOR,type:s.MEASURE,label:a.getLabel("EclairNgChartSections","bubbleColor"),allowsDuplicate:!0,minItems:1,maxItems:1}])},t.prototype._buildColumnMap=function(e,r,i,s){var n,o;return o=(n=t.__super__._buildColumnMap.apply(this,arguments))._measures,n.color=[o[0]],n.r=o.length>1?[o[1]]:[o[0]],n},t.prototype._buildColorConfig=function(e,t){var r,i,s;return i=(s=t.getParameters()).lowColor,r=s.highColor,this._getGradientColorConfig(e.color[0],[i,r])},t}(i)},75288:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;a=r(8429).Z,n=r(34659).Z,s=r(99934).Z,i=r(65546),o=r(67527),l=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-metricsRadar-chart","metricsradar")}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.MEASURE_AXES,type:s.MEASURE,label:a.getLabel("EclairNgChartSections","axesMeasures"),isArray:!0,minItems:3,maxItems:1/0},{name:o.DIMENSION,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","compareBy"),minItems:1,maxItems:1},l.getSectionDefinition()])},t}(i)},94793:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(8429).Z,i=r(68253),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-origami-chart")}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getChartTypeLongNameLabel=function(){return s.getLabel("ChartTypeLongName","origami")},t}(i)},41005:(e,t,r)=>{var i,s,n,o,a,l,u,d,c={}.hasOwnProperty;r(96486),u=r(8429).Z,n=r(34659).Z,s=r(99934).Z,i=r(65546),a=r(67527),d=r(26417),l=r(56386),o=r(84137).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-parallelCoordinates-chart","parallelcoords")}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:a.MEASURE_AXES,type:s.MEASURE,label:u.getLabel("EclairNgChartSections","nodeMeasures"),isArray:!0,minItems:1,maxItems:1/0},{name:a.DIMENSION,type:s.DIMENSION,label:u.getLabel("EclairNgChartSections","lines"),minItems:0,maxItems:1},d.getSectionDefinition()])},t.prototype.getCategory=function(){return o.LINE},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").addItems([l.BOOLEAN.of("showZero",!0),l.BOOLEAN.of("sqrtScale",!1)]),e},t.prototype._buildConfig=function(e){var r,i,s,n,o;return n=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),i=(o=n.getParameters()).showZero,s=o.sqrtScale,r.showZero=i,r.sqrtScale=s,r},t}(i)},14845:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g={}.hasOwnProperty;p=r(96486),c=r(8429).Z,n=r(42333),s=r(34659).Z,i=r(99934).Z,a=r(67527),l=r(32029),h=r(26417),u=r(50566),d=r(56386),o=r(84137).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-pie-chart")}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._validConditionalFormattingTypes=[n.CATEGORIES,n.MULTI,n.GRADIENT],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new s([{name:a.PLOTS,type:i.MEASURE,isArray:!0,label:c.getLabel("EclairNgChartSections","size"),minItems:1,maxItems:1},{name:a.DIMENSION,type:i.DIMENSION,label:c.getLabel("EclairNgChartSections","segmentBy"),minItems:0,maxItems:1},h.getSectionDefinition()])},t.prototype.getCategory=function(){return o.DOT},t.prototype.getDefaultChartProperties=function(e,t){return new u([l.GENERAL.buildProperty(),d.SECTION.of("chart").setLabel(c.getLabel("ChartTypeLongName","pie")).setItems([l.VALUE_TYPE.buildProperty(),l.COMPACT_DECIMAL_DIGITS.buildProperty(),d.BOOLEAN.of("showMeasureTitle",!0),d.DROPDOWN.of("centerValueType","number",c.getLabel("EclairNgChartOptions","centerType")).setChoices([{value:"none",label:c.getLabel("EclairNgChartOptions","centerValueTypeNone")},{value:"number",label:c.getLabel("EclairNgChartOptions","centerValueTypeNumber")},{value:"text",label:c.getLabel("EclairNgChartOptions","centerValueTypeText")}]),d.TEXT.of("centerText","",c.getLabel("EclairNgChartOptions","centerText")).setPlaceholder(c.getLabel("EclairNgChartOptions","centerTextPlaceholder")).setClassName("offset-left"),d.DROPDOWN.of("inner",60).setChoices([0,10,20,30,40,50,60,70,80,90,100].map((function(e){return{value:e,label:e+"%"}})))]),l.LEGEND.buildProperty(),l.TOOLTIP.buildProperty(),l.TRELLIS.buildProperty(this._getPreferredTrellisSize()),l.MARKERS.buildProperty()])},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._measures,n.dimension=n._dimensions,n},t.prototype._buildColorConfig=function(e){return this._getCategoricalColorConfig(e.dimension.length?p.last(e.dimension):null)},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l,u,d,c;return d=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,s=t.__super__._buildConfig.apply(this,arguments),n=(c=d.getParameters()).inner,o=c.showMeasureTitle,u=c.valueType,i=c.centerValueType,r=c.centerText,l=c.total,a=c.showPercentage,s.valueType=u,s.inner=n,s.centerValueType=i,s.centerText=r,s.total=l,s.showMeasureTitle=o,s.showPercentage=a,s},t.prototype._updateProperties=function(e,r,i){t.__super__._updateProperties.apply(this,arguments),null!=r&&this._updateCenterTextProperties(e,r,i)},t.prototype._updateCenterTextProperties=function(e,t,r){var i,s;i=t.getParameter("centerValueType"),null!=(s=e.getProperty("chart").getItem("centerText"))&&s.setHidden("text"!==i)},t}(h)},52285:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;a=r(8429).Z,i=r(25174),s=r(32029),n=r(50566),o=r(56386),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-polarGauge-chart")}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._constraintsInfoForIcons={maxGroupings:0,minGroupings:0},t.prototype.supportsGradientBin=function(){return!0},t.prototype.supportsLabelInBin=function(){return!1},t.prototype.getDefaultChartProperties=function(){var e;return(e=new n([s.GENERAL.buildProperty(),o.SECTION.of("chart").setLabel(a.getLabel("ChartTypeLongName","polargauge")).setItems([o.DROPDOWN.of("inner",80).setChoices([50,60,70,80,90,100].map((function(e){return{value:e,label:e+"%"}}))),s.VALUE_TYPE.buildProperty(),s.COMPACT_DECIMAL_DIGITS.buildProperty(),s.ICONS.buildProperty()]),s.BREAKPOINTS.buildProperty(),s.TOOLTIP.buildProperty()])).getProperty("chart").getItem("icons").getItem("iconProps").getItem("type").setHidden(!0),e},t.prototype._updateProperties=function(e,r,i){t.__super__._updateProperties.apply(this,arguments),null!=r&&this._updateUseIconProperties(e.getProperty("chart"),r.getParameters(),r,i)},t.prototype._getPreferredTrellisSize=function(){return[50,50]},t.prototype._buildConfig=function(e){var r,i,s,n,o;return n=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),s=(o=n.getParameters()).inner,i=o.icons,r.inner=s,r.icons=i,r},t}(i)},14760:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_={}.hasOwnProperty;r(96486),p=r(74179),g=r(8429).Z,r(42333),o=r(34659).Z,n=r(99934).Z,i=r(34073),u=r(67527),d=r(32029),m=r(26417),c=r(50566),h=r(56386),a=r(84137).Z,s=r(52364).Z,l=r(32238).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-pyramid-chart")}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._referenceLineConfigOption=["measureAxis1","measureAxis2"],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new o([{name:u.MEASURE_AXIS1,type:n.MEASURE,label:g.getLabel("EclairNgChartSections","leftAxis"),minItems:1,maxItems:1},{name:u.MEASURE_AXIS2,type:n.MEASURE,label:g.getLabel("EclairNgChartSections","rightAxis"),minItems:1,maxItems:1},{name:u.DIMENSION_AXIS,type:n.DIMENSION,label:g.getLabel("EclairNgChartSections","axisBars"),minItems:0,maxItems:1},m.getSectionDefinition()])},t.prototype.getCategory=function(){return a.BAR},t.prototype.getDefaultChartProperties=function(){return new c([d.GENERAL.buildProperty(),h.SECTION.of("chart").setLabel(g.getLabel("ChartTypeLongName","pyramid")).setItems([d.VALUE_TYPE.buildProperty(),d.COMPACT_DECIMAL_DIGITS.buildProperty(),h.BOOLEAN.of("showMeasure",!0),h.BOOLEAN.of("showMeasureTitle",!0),d.AUTO_FIT_MODE.buildProperty(),h.HEADER.of("colors"),h.COLOR.of("leftColor","#52b7d8").setClassName("sideBySide left"),h.COLOR.of("rightColor","#e16032").setClassName("sideBySide right").setDropdownType(p.DropdownRight)]),h.NAMED_SECTION.of("measureAxis1").setLabel(g.getLabel("EclairNgChartOptions","leftAxis")).setItems([h.BOOLEAN.of("sqrtScale",!1),d.CUSTOM_DOMAIN.buildProperty(),h.TEXT.of("title","").setPlaceholder(g.getLabel("EclairNgChartOptions","defaultTitle")),d.REFERENCE_LINES.buildProperty()]),h.NAMED_SECTION.of("measureAxis2").setLabel(g.getLabel("EclairNgChartOptions","rightAxis")).setItems([h.BOOLEAN.of("sqrtScale",!1),d.CUSTOM_DOMAIN.buildProperty(),h.TEXT.of("title","").setPlaceholder(g.getLabel("EclairNgChartOptions","defaultTitle")),d.REFERENCE_LINES.buildProperty()]),h.NAMED_SECTION.of("dimensionAxis").setLabel(g.getLabel("EclairNgChartOptions","centerAxis")).setItems([h.BOOLEAN.of("showAxis",!0),d.CUSTOM_SIZE.buildProperty()]),d.LEGEND.buildProperty(),d.TOOLTIP.buildProperty(),d.TRELLIS.buildProperty(this._getPreferredTrellisSize()),d.MARKERS.buildProperty()])},t.prototype._updateProperties=function(e,r,i,s,n,o,a){var u;return t.__super__._updateProperties.call(this,e,r,i),null!=r&&(u=r.getParameter("showMeasureTitle"),e.getProperty("measureAxis1").getItem("title").setHidden(!u),e.getProperty("measureAxis2").getItem("title").setHidden(!u)),l.updateRefLineInputProperties(this._referenceLineConfigOption,e,n,r,o,a)},t.prototype._buildColumnMap=function(e,r,i,s){var n,o;return o=(n=t.__super__._buildColumnMap.apply(this,arguments)).plots,n.measureAxis1=o.slice(0,1),n.measureAxis2=o.length>1?[o[1]]:[],n},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l;return a=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),i=(l=a.getParameters()).leftColor,s=l.rightColor,n=l.showMeasure,o=l.showMeasureTitle,l.applyConditionalFormatting||(null==r.plots&&(r.plots=[{},{}]),r.plots[0].color=i,r.plots[1].color=s),r.showMeasure=n,r.showMeasureTitle=o,r},t.prototype.getPlotColumns=function(e){return e.measureAxis1.concat(e.measureAxis2)},t.prototype.resolveParams=function(e,t,r){return s.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},t.prototype.constructFromResolvedParams=function(e){return s.constructFromResolvedParams(e,this._referenceLineConfigOption)},t}(i)},21456:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_={}.hasOwnProperty;p=r(8429).Z,g=r(16730),r(74179),n=r(42333),h=r(74393),s=r(34659).Z,i=r(99934).Z,a=r(48678),l=r(67527),u=r(32029),m=r(26417),d=r(50566),c=r(56386),o=r(84137).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-rating-chart")}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new s([{name:l.PLOTS,type:i.MEASURE,label:p.getLabel("EclairNgChartSections","value"),isArray:!0,minItems:1,maxItems:1},m.getSectionDefinition()])},t.prototype._validConditionalFormattingTypes=[n.STATIC,n.MULTI],t.prototype.supportsLabelInBin=function(){return!1},t.prototype.supportsCustomTooltips=function(){return!1},t.prototype.getCategory=function(){return o.GAUGE},t.prototype.getChartProperties=function(e,r,i,s){var n;return n=t.__super__.getChartProperties.apply(this,arguments),this._hideGaugeColorProperties(n)},t.prototype.getDefaultChartProperties=function(){return new d([u.GENERAL.buildProperty(),c.SECTION.of("chart").setLabel(p.getLabel("ChartTypeLongName","rating")).setItems([c.DROPDOWN.of("icon",a.getDefaultValue().getCode()).setChoices(a.enums().map((function(e){return{value:e.getCode(),label:e.getLabel()}}))),c.NUMBER.of("numberOfIcons",10).setMin(2).setMax(100),u.VALUE_TYPE.buildProperty(),u.COMPACT_DECIMAL_DIGITS.buildProperty(),c.DROPDOWN.of("iconRounding","none").setChoices([{value:"none",label:p.getLabel("EclairNgChartOptions","iconRoundingNone")},{value:"half",label:p.getLabel("EclairNgChartOptions","iconRoundingHalf")},{value:"full",label:p.getLabel("EclairNgChartOptions","iconRoundingFull")}]),c.BOOLEAN.of("showMax",!1),c.BOOLEAN.of("valuesOnLeft",!1)]),c.SECTION.of("breakpoints").setLabel(p.getLabel("EclairNgChartOptions","bandBreakPoints")).setItems([c.NUMBER.of("min",0).setNumberType(g.Float).setRequired(!0).setTooltip(p.getLabel("EclairNgChartOptions","minTooltip")),c.NUMBER.of("high",50).setNumberType(g.Float).setRequired(!0).setTooltip(p.getLabel("EclairNgChartOptions","ratingHighTooltip")),c.NUMBER.of("max",100).setNumberType(g.Float).setRequired(!0).setTooltip(p.getLabel("EclairNgChartOptions","maxTooltip"))])])},t.prototype._updateProperties=function(e,r,i){var s,n;if(t.__super__._updateProperties.apply(this,arguments),null!=r)return n=r.getParameter("valueType"),(s=e.getProperty("chart")).getItem("showMax").setHidden("none"===n||"percent"===n),s.getItem("valuesOnLeft").setHidden("none"===n),this._updateValueTypeProperties(e,r)},t.prototype._getPreferredTrellisSize=function(){return[100,20]},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._measures,n},t.prototype._buildColorFromOldSchema=function(e,t){var r,i,s,n,o;if(r=(o=e.getParameters()).colors,i=o.high,null!=r)return n=r.lowColor1,s=r.highColor1,{type:h.BINS.getCode(),column:t.plots[0].column,breakpoints:[i],bands:[{color:n},{color:s}]}},t.prototype._buildConfig=function(e){var r,i,s,n,o,l,u,d,c,h,p,g,m;return p=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,i=t.__super__._buildConfig.apply(this,arguments),l=(g=p.getParameters()).min,o=g.max,d=g.showMax,s=g.icon,u=g.numberOfIcons,h=g.valuesOnLeft,r=g.applyConditionalFormatting,c=g.valueType,n=g.iconRounding,r||(i.color=null!=(m=this._buildColorFromOldSchema(p,i))?m:null),i.icon=a.getEnumByCode(s).getIcon(),i.showMax=d,i.iconRounding=n,i.numberOfIcons=u,i.valuesOnLeft=h,i.valueType=c,i.domain=[l,o],i},t}(m)},73631:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h={}.hasOwnProperty;c=r(8429).Z,n=r(34659).Z,s=r(99934).Z,i=r(30334),a=r(67527),l=r(32029),u=r(50566),d=r(56386),o=r(84137).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-sankey-chart")}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._supportsConditionalFormatting=!1,t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:a.PLOTS,type:s.MEASURE,label:c.getLabel("EclairNgChartSections","flow"),isArray:!0,minItems:1,maxItems:1},{name:a.DIMENSION_AXIS,type:s.DIMENSION,label:c.getLabel("EclairNgChartSections","nodes"),minItems:2,maxItems:2}])},t.prototype.getCategory=function(){return o.PIPELINE},t.prototype._getChartTypeLongNameLabel=function(){return c.getLabel("ChartTypeLongName","sankey")},t.prototype.getDefaultChartProperties=function(){return new u([l.GENERAL.buildProperty(),d.SECTION.of("chart").setLabel(this._getChartTypeLongNameLabel()).setItems(this._getItems()),l.TOOLTIP.buildProperty()])},t.prototype._getItems=function(){return[this.getValueTypeItem(),this.getCompactDecimalDigitsItem(),this.getShowDimensionLabels(),this.getShowTotalItem(),this.getShowAbsoluteValuesItem()]},t.prototype.getValueTypeItem=function(){return l.VALUE_TYPE.buildProperty()},t.prototype.getCompactDecimalDigitsItem=function(){return l.COMPACT_DECIMAL_DIGITS.buildProperty()},t.prototype.getShowTotalItem=function(){return d.BOOLEAN.of("showTotal",!0,c.getLabel("EclairNgChartOptions","showTotal"))},t.prototype.getShowAbsoluteValuesItem=function(){return d.BOOLEAN.of("showAbsoluteValues",!0,c.getLabel("EclairNgChartOptions","showAbsoluteValues"))},t.prototype.getShowDimensionLabels=function(){return d.BOOLEAN.of("showDimensionTitle",!0,c.getLabel("EclairNgChartOptions","showDimensionTitle"))},t.prototype._updateProperties=function(e,r,i){if(t.__super__._updateProperties.apply(this,arguments),(null!=r?r.getParameter("valueType"):void 0)&&this._updateValueTypeProperties(e,r),null!=r)return e.getProperty("tooltip").getItem("content").getItem("legend").getItem("showPercentage").setHidden(!0)},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._measures,n.dimensionAxis=n._dimensions,n},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l;return a=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),n=(l=a.getParameters()).showTotal,l.showMeasureTitle,s=l.showDimensionTitle,i=l.showAbsoluteValues,o=l.valueType,r.showTotals=n,r.showDimensionTitle=s,r.showAbsoluteValues=i,r.valueType=o,r},t}(i)},60938:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_={}.hasOwnProperty;m=r(96486),p=r(8429).Z,o=r(42333),n=r(34659).Z,s=r(99934).Z,u=r(67527),d=r(32029),g=r(26417),c=r(50566),h=r(56386),a=r(84137).Z,i=r(52364).Z,l=r(32238).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-scatter-chart")}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._validConditionalFormattingTypes=[o.CATEGORIES,o.MULTI,o.GRADIENT],t.prototype._isMeasureBasedChart=!1,t.prototype._referenceLineConfigOption=["x","y"],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:u.X,type:s.MEASURE,label:p.getLabel("EclairNgChartSections","xAxis"),allowsDuplicate:!0,minItems:1,maxItems:1},{name:u.Y,type:s.MEASURE,label:p.getLabel("EclairNgChartSections","yAxis"),allowsDuplicate:!0,minItems:1,maxItems:1},{name:u.RADIUS,type:s.MEASURE,label:p.getLabel("EclairNgChartSections","radius"),allowsDuplicate:!0,minItems:0,maxItems:1},{name:u.PLOTS,type:s.DIMENSION,label:p.getLabel("EclairNgChartSections","bubbles"),minItems:0,maxItems:1/0},g.getSectionDefinition()])},t.prototype.getCategory=function(){return a.DOT},t.prototype.getDefaultChartProperties=function(){return new c([d.GENERAL.buildProperty(),h.SECTION.of("chart").setLabel(p.getLabel("ChartTypeLongName","scatter")).setItems([d.RADIUS_RATIO.buildProperty()]),d.MEASURE_AXIS.buildProperty().setName("x").setLabel(p.getLabel("EclairNgChartOptions","xAxis")),d.MEASURE_AXIS.buildProperty().setName("y").setLabel(p.getLabel("EclairNgChartOptions","yAxis")),d.LEGEND.buildProperty(),d.TOOLTIP.buildProperty(),d.TRELLIS.buildProperty(this._getPreferredTrellisSize()),d.MARKERS.buildProperty()])},t.prototype.mergeWithLegacyOptions=function(e,t){var r,i;if(null==e&&(e={}),null==t&&(t={}),null!=e.sqrt)return null!=(r=t.x)&&(r.sqrtScale=e.sqrt),null!=(i=t.y)?i.sqrtScale=e.sqrt:void 0},t.prototype._updateProperties=function(e,r,i,s,n,o,a){var u,d,c;return t.__super__._updateProperties.call(this,e,r,i),null!=r&&(u=(c=r.getParameters()).x,d=c.y,this._updateAxisTitleProperty(e.getProperty("x"),u),this._updateCustomDomainProperty(e.getProperty("x"),u),this._updateAxisTitleProperty(e.getProperty("y"),d),this._updateCustomDomainProperty(e.getProperty("y"),d)),l.updateRefLineInputProperties(this._referenceLineConfigOption,e,n,r,o,a)},t.prototype._buildColumnMap=function(e,r,i,s){var n,o,a;return o=(n=t.__super__._buildColumnMap.apply(this,arguments))._dimensions,a=n._measures,n.plots=o,n.x=[a[0]],n.y=a.length>1?[a[1]]:[a[0]],n.r=3===a.length?[a[2]]:[],n},t.prototype._buildColorConfig=function(e,t){return this._getCategoricalColorConfig(e.plots.length?m.last(e.plots):null)},t.prototype._buildConfig=function(e){var r,i,s,n,o,a;return s=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,(r=t.__super__._buildConfig.apply(this,arguments))._dimensions,r._measures,n=(a=s.getParameters()).x,o=a.y,a.trellis,i=a.radiusRatio,null==r.x&&(r.x={}),null==r.y&&(r.y={}),m.extend(r.x,n),m.extend(r.y,o),r.r.radiusRatio=i,r.plots=[r.plots],r},t.prototype._getPreferredTrellisSize=function(){return[150,150]},t.prototype.resolveParams=function(e,t,r){return i.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},t.prototype.constructFromResolvedParams=function(e){return i.constructFromResolvedParams(e,this._referenceLineConfigOption)},t}(g)},78390:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;a=r(8429).Z,n=r(34659).Z,s=r(99934).Z,o=r(67527),i=r(54251),l=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-stackhbar-chart")}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.PLOTS,type:s.MEASURE,isArray:!0,label:a.getLabel("EclairNgChartSections","axisBarLength"),minItems:1,maxItems:1/0},{name:o.DIMENSION_AXIS,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","axisBars"),minItems:0,maxItems:1/0},{name:o.SPLIT,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","stackBy"),minItems:0,maxItems:1},l.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setLabel(a.getLabel("ChartTypeLongName","stackhbar")),e.getProperty("dimensionAxis").setLabel(a.getLabel("EclairNgChartOptions","yAxis")),e.getProperty("measureAxis1").setLabel(a.getLabel("EclairNgChartOptions","xAxisTop")),e.getProperty("measureAxis2").setLabel(a.getLabel("EclairNgChartOptions","xAxisBottom")),e},t}(i)},78633:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g={}.hasOwnProperty;p=r(96486),c=r(8429).Z,r(42333),n=r(34659).Z,s=r(99934).Z,i=r(34073),a=r(67527),l=r(32029),h=r(26417),u=r(50566),d=r(56386),o=r(84137).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-stackpyramid-chart")}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:a.MEASURE_AXIS1,type:s.MEASURE,label:c.getLabel("EclairNgChartSections","leftAxis"),minItems:1,maxItems:1},{name:a.MEASURE_AXIS2,type:s.MEASURE,label:c.getLabel("EclairNgChartSections","rightAxis"),minItems:1,maxItems:1},{name:a.DIMENSION_AXIS,type:s.DIMENSION,label:c.getLabel("EclairNgChartSections","axisBars"),minItems:0,maxItems:1},{name:a.SPLIT,type:s.DIMENSION,label:c.getLabel("EclairNgChartSections","stackBy"),minItems:0,maxItems:1},h.getSectionDefinition()])},t.prototype.getCategory=function(){return o.BAR},t.prototype.getDefaultChartProperties=function(){return new u([l.GENERAL.buildProperty(),d.SECTION.of("chart").setLabel(c.getLabel("ChartTypeLongName","stackpyramid")).setItems([l.VALUE_TYPE.buildProperty(),l.COMPACT_DECIMAL_DIGITS.buildProperty(),d.BOOLEAN.of("normalize",!1).setTooltip(c.getLabel("EclairNgChartOptions","normalizeTooltip")),d.BOOLEAN.of("showMeasure",!0),d.BOOLEAN.of("showMeasureTitle",!0),l.AUTO_FIT_MODE.buildProperty()]),d.NAMED_SECTION.of("measureAxis1").setLabel(c.getLabel("EclairNgChartOptions","leftAxis")).setItems([d.BOOLEAN.of("sqrtScale",!1),l.CUSTOM_DOMAIN.buildProperty(),d.TEXT.of("title","").setPlaceholder(c.getLabel("EclairNgChartOptions","defaultTitle")),l.REFERENCE_LINES.buildProperty()]),d.NAMED_SECTION.of("measureAxis2").setLabel(c.getLabel("EclairNgChartOptions","rightAxis")).setItems([d.BOOLEAN.of("sqrtScale",!1),l.CUSTOM_DOMAIN.buildProperty(),d.TEXT.of("title","").setPlaceholder(c.getLabel("EclairNgChartOptions","defaultTitle")),l.REFERENCE_LINES.buildProperty()]),d.NAMED_SECTION.of("dimensionAxis").setLabel(c.getLabel("EclairNgChartOptions","centerAxis")).setItems([d.BOOLEAN.of("showAxis",!0),l.CUSTOM_SIZE.buildProperty()]),l.LEGEND.buildProperty(),l.TOOLTIP.buildProperty(),l.TRELLIS.buildProperty(this._getPreferredTrellisSize()),l.MARKERS.buildProperty()])},t.prototype.getPlotColumns=function(e){return e.measureAxis1.concat(e.measureAxis2)},t.prototype._updateProperties=function(e,r,i){var s;if(t.__super__._updateProperties.apply(this,arguments),null!=r)return s=r.getParameter("showMeasureTitle"),e.getProperty("measureAxis1").getItem("title").setHidden(!s),e.getProperty("measureAxis2").getItem("title").setHidden(!s)},t.prototype._buildColumnMap=function(e,r,i,s){var n,o,a;return o=(n=t.__super__._buildColumnMap.apply(this,arguments)).dimensionAxis,a=n.plots,n.measureAxis1=a.slice(0,1),n.measureAxis2=a.length>1?[a[1]]:[],delete n.plots,n.split=o.length>0?[o.pop()]:[],n},t.prototype._buildColorConfig=function(e){return this._getCategoricalColorConfig(e.split.length?p.last(e.split):null)},t.prototype.buildConfig=function(e,r,i){var s,n,o,a;return s=t.__super__.buildConfig.apply(this,arguments),n=(a=e.getParameters()).showMeasure,o=a.showMeasureTitle,s.showMeasure=n,s.showMeasureTitle=o,s.sorting.internal=!0,s},t}(i)},26545:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;a=r(8429).Z,n=r(34659).Z,s=r(99934).Z,o=r(67527),i=r(54251),l=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-stackvbar-chart")}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.DIMENSION_AXIS,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","axisBars"),minItems:0,maxItems:1/0},{name:o.PLOTS,type:s.MEASURE,isArray:!0,label:a.getLabel("EclairNgChartSections","axisBarLength"),minItems:1,maxItems:1/0},{name:o.SPLIT,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","stackBy"),minItems:0,maxItems:1},l.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setLabel(a.getLabel("ChartTypeLongName","stackvbar")),e.getProperty("dimensionAxis").setLabel(a.getLabel("EclairNgChartOptions","xAxis")),e.getProperty("measureAxis1").setLabel(a.getLabel("EclairNgChartOptions","yAxisLeft")),e.getProperty("measureAxis2").setLabel(a.getLabel("EclairNgChartOptions","yAxisRight")),e},t}(i)},60915:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h={}.hasOwnProperty;r(96486),d=r(8429).Z,r(42333),n=r(34659).Z,s=r(99934).Z,i=r(69307),o=r(67527),a=r(32029),c=r(26417),l=r(50566),u=r(56386),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-stackwaterfall-chart")}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._supportsConditionalFormatting=!1,t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.DIMENSION_AXIS,type:s.DIMENSION,label:d.getLabel("EclairNgChartSections","axisBars"),minItems:1,maxItems:1},{name:o.MEASURE_AXIS1,type:s.MEASURE,label:d.getLabel("EclairNgChartSections","axisBarLength"),minItems:1,maxItems:1},{name:o.SPLIT,type:s.DIMENSION,label:d.getLabel("EclairNgChartSections","stackBy"),minItems:1,maxItems:1},c.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=new l([a.GENERAL.buildProperty(),u.SECTION.of("chart").setLabel(d.getLabel("ChartTypeLongName","stackwaterfall")).setItems([u.DROPDOWN.of("totalValue","computeTotal",d.getLabel("EclairNgChartOptions","totalValue")).setChoices([{value:"none",label:d.getLabel("EclairNgChartOptions","noTotal")},{value:"computeTotal",label:d.getLabel("EclairNgChartOptions","computeTotal")},{value:"useLastBucket",label:d.getLabel("EclairNgChartOptions","useLastBucket")}]),u.TEXT.of("totalLabel","",d.getLabel("EclairNgChartOptions","totalLabel")),a.VALUE_TYPE.buildProperty(),a.COMPACT_DECIMAL_DIGITS.buildProperty()]),u.NAMED_SECTION.of("dimensionAxis").setLabel(d.getLabel("EclairNgChartOptions","xAxis")).setItems([u.BOOLEAN.of("showAxis",!0),u.BOOLEAN.of("showTitle",!0),u.TEXT.of("title","").setPlaceholder(d.getLabel("EclairNgChartOptions","defaultTitle"))]),a.MEASURE_AXIS.buildProperty().setName("measureAxis1").setLabel(d.getLabel("EclairNgChartOptions","yAxis")),a.LEGEND.buildProperty(),a.TOOLTIP.buildProperty(),a.TRELLIS.buildProperty(this._getPreferredTrellisSize()),a.MARKERS.buildProperty()])).getProperty("measureAxis1").getItem("showZero").setHidden(!0),e.getProperty("measureAxis1").getItem("referenceLines").setHidden(!0),e},t.prototype.getPlotColumns=function(e){return e.measureAxis1},t.prototype._buildColumnMap=function(e,r,i,s){var n,o,a;return o=(n=t.__super__._buildColumnMap.apply(this,arguments)).dimensionAxis,a=n.plots,n.measureAxis1=a,delete n.plots,n.split=o.length>1?[o.pop()]:[],n},t.prototype._buildColorConfig=function(e){return this._getCategoricalColorConfig(e.split.length?e.split[0]:null)},t}(i)},63023:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m={}.hasOwnProperty;g=r(96486),c=r(8429).Z,d=r(37954).Z,a=r(1806),u=r(36563),h=r(6597).ZP,o=r(32029),l=r(50566),s=r(84137).Z,n=r(32238).Z,i=r(52364).Z,p=function(e,t){return function(e){function r(){this._eclairNGModuleName=t.chartName}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(r,e),r.prototype._referenceLineConfigOption=["timeAxis","measureAxis1","measureAxis2"],r.prototype.getCategory=function(){return s.TIME},r.prototype.getDefaultChartProperties=function(){var e,t;return e=r.__super__.getDefaultChartProperties.call(this).getProperties(),new l(e.reduce((t=this,function(e,r){return"chart"===r.getName()?e.push(t._augmentChartProperty(r)):"dimensionAxis"===r.getName()?e.push(t._convertDimensionAxis(r)):e.push(r),e}),[]))},r.prototype.getValidSelectModes=function(){return[a.SelectMode.NONE,a.SelectMode.SINGLE,a.SelectMode.SINGLE_REQUIRED,a.SelectMode.MULTI,a.SelectMode.MULTI_REQUIRED,a.SelectMode.RANGE]},r.prototype.resolveParams=function(e,t,r){return i.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},r.prototype._augmentChartProperty=function(e){var r;return e.setLabel(c.getLabel("ChartTypeLongName",t.chartTypeName)),r=e.getItems().filter((function(e){return"autoFitMode"!==e.getName()})),t.configureMissingValue&&!e.getItem("missingValue")&&(r=[o.MISSING_VALUE.buildProperty()].concat(r)),e.setItems(r)},r.prototype._convertDimensionAxis=function(e){var t;return e.setName("timeAxis"),t=e.getItems().filter((function(e){return"icons"!==e.getName()&&"customSize"!==e.getName()})),e.getItem("predictiveLine")||(t=t.concat(o.PREDICTIVE_LINE.buildProperty())),e.getItem("referenceLines")||(t=t.concat(o.REFERENCE_LINES.buildProperty({isTime:!0}))),e.setItems(t)},r.prototype.requiresTimeColumn=function(){return!0},r.prototype._buildColorConfig=function(e,t){},r.prototype._buildColumnMap=function(e,t,i,s){var n,o;return o=(n=r.__super__._buildColumnMap.apply(this,arguments))._time,n.timeAxis=null!=o?[o]:[],n},r.prototype._buildConfig=function(e){var t,i,s,n,o,a,l,c,p,m,_,f,y,b,C;if(m=e.widgetMetadata,a=e.resultsMetadata,o=e.resultsFormatter,e.forceDefaultColoring,t=r.__super__._buildConfig.apply(this,arguments),s=(y=m.getParameters()).fillArea,c=y.timeAxis,null==t.timeAxis&&(t.timeAxis={}),g.extend(t.timeAxis,g.cloneDeep(c)),(l=null!=(b=t.timeAxis.column)?b[0]:void 0)&&(p=new h(a).buildCombinedDateGrainColumn(t.timeAxis.column)||a.getColumn(l),t.timeAxis.column=[p.getName()],i=o.getDateSeparator(),null!=t.timeAxis.predictiveLine&&(t.timeAxis.predictiveLine.time=u.sanitizeTime(t.timeAxis.predictiveLine.time,p,i)),null!=t.timeAxis.referenceLines))for(_=0,f=(C=t.timeAxis.referenceLines).length;_<f;_++)(n=C[_]).time=u.sanitizeTime(n.time,p,i);return null!=l&&o.getDateGrain(a.getColumn(l))!==d.FISCAL_MONTH||(t.timeAxis.formats={month:"MM"}),t.autoFitMode="fit",t.fillArea=s,t},r.prototype._updateProperties=function(e,t,i,s,o,a,l){return r.__super__._updateProperties.call(this,e,t,i,s),n.updateRefLineInputProperties(this._referenceLineConfigOption,e,o,t,a,l)},r}(e)},e.exports={createTimeChart:p}},44125:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty;a=r(8429).Z,r(45080).Z,s=r(34659).Z,i=r(99934).Z,o=r(67527),n=r(74187),l=r(26417),u=r(63023).createTimeChart,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(e){return null==e&&(e=!0),this._columnMapDefinition=new s([{name:o.TIME_AXIS,type:i.TIME,label:a.getLabel("EclairNgChartSections","timeAxis"),minItems:1,maxItems:e?1/0:1},{name:o.PLOTS,type:i.MEASURE,label:a.getLabel("EclairNgChartSections","yAxis"),isArray:!0,minItems:2,maxItems:1/0},l.getSectionDefinition()])},t.prototype._buildColumnMap=function(e,r,i,s){var n;return delete(n=t.__super__._buildColumnMap.apply(this,arguments)).dimensionAxis,n},t.prototype._buildConfig=function(e){var r,i,s,n;return n=e.widgetMetadata,s=e.resultsMetadata,i=e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),1===this._getPlotCount(n,s,i)&&(r.legend={show:!1}),r},t}(u(n,{chartName:"wave-timecombo-chart",chartTypeName:"time-combo",configureMissingValue:!0,maxGroupings:0}))},27997:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty;o=r(8429).Z,r(45080).Z,s=r(34659).Z,i=r(99934).Z,n=r(67527),a=r(26417),l=r(72012),u=r(63023).createTimeChart,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(e){return null==e&&(e=!0),this._columnMapDefinition=new s([{name:n.TIME_AXIS,type:i.TIME,label:o.getLabel("EclairNgChartSections","timeAxis"),minItems:1,maxItems:e?1/0:1},{name:n.PLOTS,type:i.MEASURE,label:o.getLabel("EclairNgChartSections","yAxis"),isArray:!0,minItems:1,maxItems:1/0},a.getSectionDefinition()])},t.prototype._buildColumnMap=function(e,r,i,s){var n;return delete(n=t.__super__._buildColumnMap.apply(this,arguments)).dimensionAxis,n},t.prototype._buildConfig=function(e){var r,i,s,n;return n=e.widgetMetadata,s=e.resultsMetadata,i=e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),1===this._getPlotCount(n,s,i)&&(r.legend={show:!1}),r},t}(u(l,{chartName:"wave-timebar-chart",chartTypeName:"time-bar",configureMissingValue:!1,maxGroupings:0}))},74391:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty;r(96486),o=r(8429).Z,r(45080).Z,s=r(34659).Z,i=r(99934).Z,n=r(67527),a=r(77192),l=r(26417),u=r(63023).createTimeChart,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(e){return null==e&&(e=!0),this._columnMapDefinition=new s([{name:n.TIME_AXIS,type:i.TIME,label:o.getLabel("EclairNgChartSections","timeAxis"),minItems:1,maxItems:e?1/0:1},{name:n.PLOTS,type:i.MEASURE,label:o.getLabel("EclairNgChartSections","yAxis"),isArray:!0,minItems:1,maxItems:1/0},{name:n.SPLIT,type:i.DIMENSION,label:o.getLabel("EclairNgChartSections","lines"),minItems:0,maxItems:1},l.getSectionDefinition()])},t.prototype._buildColumnMap=function(e,r,i,s){var n,o;return o=(n=t.__super__._buildColumnMap.apply(this,arguments)).dimensionAxis,n.split=o,delete n.dimensionAxis,n},t.prototype._buildColorConfig=function(e,t){return this._getCategoricalColorConfig(e.split.length?e.split[0]:null)},t.prototype._buildConfig=function(e){var r,i,s,n;return n=e.widgetMetadata,s=e.resultsMetadata,i=e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),1!==this._getPlotCount(n,s,i)||r.split.column.length||(r.legend={show:!1}),r},t}(u(a,{chartName:"wave-timeline-chart",chartTypeName:"time",configureMissingValue:!0,maxGroupings:1}))},2859:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p={}.hasOwnProperty;c=r(8429).Z,n=r(42333),s=r(34659).Z,i=r(99934).Z,a=r(67527),l=r(32029),h=r(26417),u=r(50566),d=r(56386),o=r(84137).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-treemap-chart")}return function(e,t){for(var r in t)p.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._validConditionalFormattingTypes=[n.CATEGORIES,n.GRADIENT,n.MULTI],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new s([{name:a.PLOTS,type:i.MEASURE,label:c.getLabel("EclairNgChartSections","size"),isArray:!0,minItems:1,maxItems:1},{name:a.DIMENSION,type:i.DIMENSION,label:c.getLabel("EclairNgChartSections","segmentBy"),minItems:1,maxItems:2},h.getSectionDefinition()])},t.prototype.getCategory=function(){return o.GRID},t.prototype.getDefaultChartProperties=function(){return new u([l.GENERAL.buildProperty(),d.SECTION.of("chart").setLabel(c.getLabel("ChartTypeLongName","treemap")).setItems([l.VALUE_TYPE.buildProperty(),l.COMPACT_DECIMAL_DIGITS.buildProperty()]),l.LEGEND.buildProperty(),l.TOOLTIP.buildProperty(),l.TRELLIS.buildProperty(this._getPreferredTrellisSize()),l.MARKERS.buildProperty()])},t.prototype._updateProperties=function(e,r,i){if(t.__super__._updateProperties.apply(this,arguments),null!=r)return this._updateValueTypeProperties(e,r)},t.prototype._buildColumnMap=function(e,r,i,s){var n;return(n=t.__super__._buildColumnMap.apply(this,arguments)).plots=n._measures,n.dimension=n._dimensions,n},t.prototype._buildColorConfig=function(e,t){return this._getCategoricalColorConfig(e.dimension.length?e.dimension[0]:null)},t.prototype._buildConfig=function(e){var r,i,s;return s=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),i=s.getParameters().valueType,r.valueType=i,r},t}(h)},26417:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty,c=[].slice;u=r(96486),l=r(90554).deepCopy,a=r(8429).Z,n=r(74577),s=r(99934).Z,i=r(30334),o=r(67527),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getSectionDefinition=function(){return{name:o.TRELLIS,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","trellis"),minItems:0,maxItems:2,zIndex:-1}},t.prototype.supportsTrellis=function(){return!0},t.prototype.updateTrellisParams=function(e,t,r){var i,s;return null==e&&(e=[]),null==t&&(t={}),s={},(i=e.length)?t.enable||(s.enable=!0,s.size=this._getPreferredTrellisSize(),r&&(s.type=2===i?"xy":"x")):t.enable&&(s.enable=!1),u.isEmpty(s)?null:u.extend({},t,s)},t.prototype._updateProperties=function(e,t,r){var i;if(null!=(null!=t?t.getParameter("valueType"):void 0)&&this._updateValueTypeProperties(e,t),null!=(i=e.getProperty("trellis")))return this._updateTrellisOption(i,t,r)},t.prototype._updateTrellisOption=function(e,t,r){var i;if(null!=t&&null!=(i=t.getParameter("trellis")))return e.getItem("enable").setDisabled(this.hasColumnMap(t)),e.getItem("type").setHidden(!i.enable),e.getItem("size").setHidden(!i.enable),e.getItem("showGridLines").setHidden(!i.enable),e.getItem("flipLabels").setHidden(!i.enable),e.getItem("chartsPerLine").setHidden(!(i.enable&&"wrap"===i.type))},t.prototype._buildColumnMap=function(e,r,i,a){var l,d,h,p,g,m,_,f,y,b,C,E;if(l=t.__super__._buildColumnMap.call(this,e,r,i),b=null!=e?e.getParameter("trellis"):void 0,f=null!=e?e.getParameter("columnMap"):void 0,m=(d=l._dimensions).length,y=l._time,C=[],a)C=this._getAutoTrellisColumns(null!=f?f.trellis:void 0,d,y);else{if(null==b)return l;m>0&&b.enable&&(_="xy"===b.type?2:1,g=this.getColumnMapDefinition().getSections().filter((function(e){return e.getColumnType()===s.DIMENSION&&e.getName()!==o.TRELLIS})),p=(E=n.getSectionsConstraint(g))[0],h=E[1],_=Math.max(_,m-h),_=Math.min(_,m-p),C=d.slice(0,_))}return l.trellis=C,l._dimensions=u.without.apply(u,[d].concat(c.call(C))),l},t.prototype._getAutoTrellisColumns=function(e,t,r){var i,a,l,d,h,p,g,m,_;return null==e&&(e=[]),i=this.getColumnMapDefinition(),p=t.length,g=null!=r?1:0,d=(a=i.getSections().filter((function(e){return e.getColumnType()!==s.MEASURE}))).filter((function(e){return e.getName()!==o.TRELLIS})),null!=r&&e.indexOf(r)>-1||!e.length||(m=u.without.apply(u,[t].concat(c.call(e))),!n.isValidForSections(d,m.length,0,g))?n.isValidForSections(a,p,0,g)?n.isValidForSections(d,p,0,g)?[]:(h=d.filter((function(e){return e.getColumnType()!==s.TIME})),(_=n.getSectionsConstraint(h))[0],(l=_[1])===1/0?[]:t.slice(0,p-l)):[]:e},t.prototype._buildConfig=function(e){var r,i,s;return s=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),(i=null!=s?s.getParameter("trellis"):void 0)&&r.trellis&&r.trellis.column.length&&u.extend(r.trellis,i),r},t.prototype._getPreferredTrellisSize=function(){return[100,100]},t.prototype.onPropertiesChange=function(e,t){var r,i;return null==e&&(e={}),null==t&&(t={}),i=e.trellis,r=t.trellis,null!=i&&null!=r&&i.enable&&!r.enable&&((e=l(e)).trellis.size=this._getPreferredTrellisSize()),e},t.prototype.getLensConstraint=function(e,t){var r,i,s;return r=this.getColumnMapDefinition(t).getSections(),null==e||(null!=(s=e.getParameter("trellis"))?s.enable:void 0)?this._getLensConstraint(r):(i=r.filter((function(e){return e.getName()!==o.TRELLIS})),this._getLensConstraint(i))},t}(i)},72012:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;a=r(8429).Z,n=r(34659).Z,s=r(99934).Z,i=r(13065),o=r(67527),l=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-vbar-chart")}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.DIMENSION_AXIS,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","axisBars"),minItems:0,maxItems:1/0},{name:o.PLOTS,type:s.MEASURE,isArray:!0,label:a.getLabel("EclairNgChartSections","axisBarLength"),minItems:1,maxItems:1/0},l.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setLabel(a.getLabel("ChartTypeLongName","vbar")),e.getProperty("dimensionAxis").setLabel(a.getLabel("EclairNgChartOptions","xAxis")),e.getProperty("measureAxis1").setLabel(a.getLabel("EclairNgChartOptions","yAxisLeft")),e.getProperty("measureAxis2").setLabel(a.getLabel("EclairNgChartOptions","yAxisRight")),e},t}(i)},97621:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;a=r(8429).Z,n=r(34659).Z,s=r(99934).Z,o=r(67527),i=r(2754),l=r(26417),e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-vdot-chart")}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new n([{name:o.DIMENSION_AXIS,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","xAxis"),minItems:0,maxItems:1/0},{name:o.PLOTS,type:s.MEASURE,label:a.getLabel("EclairNgChartSections","yAxis"),isArray:!0,minItems:1,maxItems:1},{name:o.RADIUS,type:s.MEASURE,label:a.getLabel("EclairNgChartSections","radius"),minItems:0,maxItems:1},{name:o.SPLIT,type:s.DIMENSION,label:a.getLabel("EclairNgChartSections","bubbles"),minItems:0,maxItems:1},l.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=t.__super__.getDefaultChartProperties.apply(this,arguments)).getProperty("chart").setLabel(a.getLabel("ChartTypeLongName","vdot")),e.getProperty("dimensionAxis").setLabel(a.getLabel("EclairNgChartOptions","xAxis")),e.getProperty("measureAxis1").setLabel(a.getLabel("EclairNgChartOptions","yAxis")),e},t}(i)},20441:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_={}.hasOwnProperty;r(96486),p=r(74179),g=r(8429).Z,a=r(42333),o=r(34659).Z,n=r(99934).Z,i=r(69307),u=r(67527),d=r(32029),m=r(26417),c=r(50566),h=r(56386),l=r(32238).Z,s=r(52364).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"wave-waterfall-chart")}return function(e,t){for(var r in t)_.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._supportsConditionalFormatting=!0,t.prototype._referenceLineConfigOption=["measureAxis1"],t.prototype._validConditionalFormattingTypes=[a.CATEGORIES,a.MULTI],t.prototype.getColumnMapDefinition=function(){return null!=this._columnMapDefinition?this._columnMapDefinition:this._columnMapDefinition=new o([{name:u.DIMENSION_AXIS,type:n.DIMENSION,label:g.getLabel("EclairNgChartSections","axisBars"),minItems:1,maxItems:1},{name:u.MEASURE_AXIS1,type:n.MEASURE,label:g.getLabel("EclairNgChartSections","axisBarLength"),minItems:1,maxItems:1},m.getSectionDefinition()])},t.prototype.getDefaultChartProperties=function(){var e;return(e=new c([d.GENERAL.buildProperty(),h.SECTION.of("chart").setLabel(g.getLabel("ChartTypeLongName","waterfall")).setItems([h.DROPDOWN.of("totalValue","computeTotal",g.getLabel("EclairNgChartOptions","totalValue")).setChoices([{value:"none",label:g.getLabel("EclairNgChartOptions","noTotal")},{value:"computeTotal",label:g.getLabel("EclairNgChartOptions","computeTotal")},{value:"useLastBucket",label:g.getLabel("EclairNgChartOptions","useLastBucket")}]),h.TEXT.of("totalLabel","",g.getLabel("EclairNgChartOptions","totalLabel")),d.VALUE_TYPE.buildProperty(),d.COMPACT_DECIMAL_DIGITS.buildProperty(),h.HEADER.of("colors"),h.COLOR.of("positiveColor","#0BA976").setClassName("sideBySide left"),h.COLOR.of("negativeColor","#E41E42").setClassName("sideBySide right").setDropdownType(p.DropdownRight),h.COLOR.of("startColor","#1674D9").setClassName("sideBySide left"),h.COLOR.of("totalColor","#1674D9").setClassName("sideBySide right").setDropdownType(p.DropdownRight)]),d.DIMENSION_AXIS.buildProperty().setLabel(g.getLabel("EclairNgChartOptions","xAxis")),d.MEASURE_AXIS.buildProperty().setName("measureAxis1").setLabel(g.getLabel("EclairNgChartOptions","yAxis")),d.TOOLTIP.buildProperty(),d.TRELLIS.buildProperty(this._getPreferredTrellisSize()),d.MARKERS.buildProperty()])).getProperty("measureAxis1").getItem("showZero").setHidden(!0),e},t.prototype.resolveParams=function(e,t,r){return s.getResolvedWidgetParams(e,this._referenceLineConfigOption,t,r)},t.prototype.constructFromResolvedParams=function(e){return s.constructFromResolvedParams(e,this._referenceLineConfigOption)},t.prototype.getPlotColumns=function(e){return e.measureAxis1},t.prototype.supportsLabelInBin=function(){return!1},t.prototype._updateProperties=function(e,r,i,s,n,o,a){return t.__super__._updateProperties.call(this,e,r,i),null!=r&&e.getProperty("tooltip").getItem("content").getItem("legend").getItem("showPercentage").setHidden(!0),l.updateRefLineInputProperties(this._referenceLineConfigOption,e,n,r,o,a)},t.prototype._buildColumnMap=function(e,r,i,s){var n,o;return o=(n=t.__super__._buildColumnMap.apply(this,arguments)).plots,n.measureAxis1=o,delete n.plots,n},t.prototype._buildConfig=function(e){var r,i,s,n,o,a,l;return a=e.widgetMetadata,e.resultsMetadata,e.resultsFormatter,e.forceDefaultColoring,r=t.__super__._buildConfig.apply(this,arguments),s=(l=a.getParameters()).positiveColor,i=l.negativeColor,n=l.startColor,o=l.totalColor,r.positiveColor=s,r.negativeColor=i,r.startColor=n,r.totalColor=o,r.keepPosNegColors=!0,r.split=[],r},t}(i)},58417:(e,t,r)=>{var i,s={}.hasOwnProperty;r(96486),r(1611).Z,i=r(18948),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setMinTimes=function(e){return this._minTimes=e,this},t.prototype._isValidForLens=function(e,t,r){var i,s;return null!=t&&(null!=r&&(i=null!=(s=this._minTimes)?s:0,t.getGroupings().filter((function(e){return t.isDateTimeColumn(e.getName())})).length>=i))},t}(i)},18948:(e,t,r)=>{var i,s,n,o;o=r(96486),i=r(11422).Z,s=r(1611).Z,n=r(78190).makeImmutableQuery,e.exports=function(){function e(){this._canHaveCountStar=!0,this._canUseGlobalLenses=!1,this._cannotHaveOtherWidgetsAttached=!1,this._isInternal=!1}return e.prototype.getMinGroupings=function(){return this._minGroupings},e.prototype.setMinGroupings=function(e){return this._minGroupings=e,this},e.prototype.getMaxGroupings=function(){return this._maxGroupings},e.prototype.setMaxGroupings=function(e){return this._maxGroupings=e,this},e.prototype.getMinMeasures=function(){return this._minMeasures},e.prototype.setMinMeasures=function(e){return this._minMeasures=e,this},e.prototype.getMaxMeasures=function(){return this._maxMeasures},e.prototype.setMaxMeasures=function(e){return this._maxMeasures=e,this},e.prototype.disallowCountStar=function(){return this._canHaveCountStar=!1,this},e.prototype.setMinFilters=function(e){return this._minFilters=e,this},e.prototype.setMaxFilters=function(e){return this._maxFilters=e,this},e.prototype.allowGlobalLenses=function(){return this._canUseGlobalLenses=!0,this},e.prototype.cannotHaveOtherWidgetsAttached=function(){return this._cannotHaveOtherWidgetsAttached=!0,this},e.prototype.setIsInternal=function(e){return this._isInternal=e,this._isInternal,this},e.prototype.isValidForLens=function(e,t){var r,a,l;if(this._isInternal)return!1;if(e.isGlobal()&&!this._canUseGlobalLenses)return!1;if(!new i(this._minGroupings,this._maxGroupings).inBounds((null!=t?t.getGroupings().length:void 0)||0))return!1;if(this._cannotHaveOtherWidgetsAttached&&!o.isEmpty(e.getAttachedWidgets()))return!1;if(!this._canHaveCountStar)if(null!=e.getQueryParameter("sources")){if(r=n(e.getQuery()).getSource(0).columns,o.some(r,(function(e){return"count"===e.field.aggregateFunction})))return!1}else if(o.some(e.getQueryParameter("measures"),(function(e){return"count"===e[0]})))return!1;return!!new i(this._minMeasures,this._maxMeasures).inBounds((null!=t?t.getColumns(s.MEASURE).length:void 0)||0)&&(a=null!=e.getQueryParameter("sources")?(l=n(e.getQuery())).getSourceFilterCount(l.getSource(0).name):o.size(e.getQueryParameter("filters")),!!new i(this._minFilters,this._maxFilter).inBounds(a)&&!!this._isValidForLens.apply(this,arguments))},e.prototype._isValidForLens=function(){return!0},e}()},44426:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getStepIds=function(){return[t.CHART.getValue(),t.TABLE.getValue(),t.DETAIL_TABLE.getValue()]},t}(i),s.build(s,{CHART:"reportChartStep",TABLE:"defaultReportStep",DETAIL_TABLE:"detailsTableStep"})},41556:(e,t,r)=>{var i,s,n,o,a;a=r(96486),o=r(27223),s=r(51548).Z,i=r(29655),e.exports=n=function(){function e(){this._steps={},this._widgets={},this._filters={},this._datasets={},this._gridLayouts={},this._widgetStyle={},this._dataSourceLinks=new Map,this._excludeRelationships=[],this._parameters=[]}return e.prototype.setId=function(e){return this._id=e,this},e.prototype.setType=function(e){return this._type=e,this},e.prototype.setName=function(e){return this._name=e,this},e.prototype.setNamespace=function(e){return this._namespace=e,this},e.prototype.setPermissions=function(e){return this._permissions=e,this},e.prototype.setLabel=function(e){return this._label=e,this},e.prototype.setDescription=function(e){return this._description=e,this},e.prototype.setDateVersion=function(e){return this._dateVersion=e,this},e.prototype.setFolder=function(e){return this._folderId=e,this},e.prototype.setEnableAutomaticLinking=function(e){return this._enableAutomaticLinking=e,this},e.prototype.addDataset=function(e){if(null!=this._datasets[e.getId()])throw new Error("Dataset with name "+e.getId()+" already exists.");return this._datasets[e.getId()]=e,this},e.prototype.addStep=function(e){if(null!=this._steps[e.getId()])throw new Error("Step with name "+e.getId()+" already exists.");return this._steps[e.getId()]=e,this},e.prototype.addWidget=function(e){if(null!=this._widgets[e.getId()])throw new Error("Widget with name "+e.getId()+" already exists.");return this._widgets[e.getId()]=e,this},e.prototype.addFilter=function(e){if(null!=this._filters[e.getId()])throw new Error("Filter on field "+e.getId()+" on already exists.");return this._filters[e.getId()]=e,this},e.prototype.addGridLayout=function(e){if(null!=this._gridLayouts[e.getName()])throw new Error("Layout with name "+step.getId()+" already exists.");return this._gridLayouts[e.getName()]=e,this},e.prototype.addDataSourceLink=function(e){var t;if(t=e.getName(),this._dataSourceLinks.has(t))throw new Error("Link with name "+t+" already exists.");return this._dataSourceLinks.set(t,e),this},e.prototype.addExcludeRelationship=function(e){return this._excludeRelationships.push(e),this},e.prototype.setWidgetStyle=function(e,t){return this._widgetStyle[e]=t,this},e.prototype.addParameter=function(e){return this._parameters.push(e),this},e.prototype.build=function(e){var t,r,i,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C;for(u in null==e&&(e=!1),h={id:this._id,name:this._name,label:this._label,description:this._description,type:null!=(y=this._type)?y:"dashboard"},null!=this._namespace&&(h.namespace=this._namespace),null!=this._folderId&&(h.folder={id:this._folderId}),null!=this._permissions&&(h.permissions=this._permissions.build()),null!=this._dateVersion&&(h.dateVersion=this._dateVersion.getCode()),_={},b=this._steps)l=b[u],_[u]=l.build();for(c in f={},C=this._widgets)d=C[c],f[c]=d.build();return m=function(){var e,t;for(a in t=[],e=this._gridLayouts)o=e[a],t.push(o.build());return t}.call(this),g=function(){var e,t;for(n in t=[],e=this._filters)i=e[n],t.push(i.build());return t}.call(this),p=[],this._dataSourceLinks.forEach((function(e){return p.push(e.build())})),h.state={filters:g,steps:_,widgets:f,gridLayouts:m,widgetStyle:this._widgetStyle,dataSourceLinksInfo:{links:p,enableAutomaticLinking:null==this._enableAutomaticLinking||this._enableAutomaticLinking,excludeRelationships:this._excludeRelationships.map((function(e){return e.build()}))}},this._parameters.length&&(h.state.parameters=this._parameters),h.datasets=function(){var e,i;for(r in i=[],e=this._datasets)t=e[r],i.push(t.build());return i}.call(this),new s(h,e)},e}(),n.Step=function(){function e(e){this._type=e,this._visualizationParameters={},this._datasets={},this._parameters={},this._receiveFacetSource={}}return e.ofType=function(e){return new n.Step(e)},e.prototype.getId=function(){return this._id},e.prototype.setId=function(e){return this._id=e,this},e.prototype.setQuery=function(e){return this._query=e,this},e.prototype.setBroadcastFacet=function(e){return this._broadcastFacet=e,this},e.prototype.setReceiveFacetMode=function(e){return this._receiveFacetSource.mode=e,this},e.prototype.setReceiveFacetSteps=function(e){return this._receiveFacetSource.steps=e,this},e.prototype.setFacet=function(e){return this._isFacet=e,this},e.prototype.setUseGlobal=function(e){return this._isUseGlobal=e,this},e.prototype.setGlobal=function(e){return this._isGlobal=e,this},e.prototype.setVisualizationOptions=function(e){return this._visualizationParameters.options=e,this},e.prototype.getVisualizationType=function(){return this._visualizationParameters.visualizationType},e.prototype.setVisualizationType=function(e){return this._visualizationParameters.visualizationType=e,this},e.prototype.addDataset=function(e){if(o.checkOfType("dataset",e,n.Dataset,!0),null!=this._datasets[e.getId()])throw new Error("Dataset with name "+e.getId()+" already exists");return this._datasets[e.getId()]=e,this},e.prototype.setSObject=function(e){return this._sObject=e,this},e.prototype.setCDPObjects=function(e){return this._cdpObjects=e,this},e.prototype.setConnectionName=function(e){return this._connectionName=e,this},e.prototype.setValues=function(e){return this._values=e,this},e.prototype.setColumns=function(e){return this._columns=e,this},e.prototype.setParameter=function(e,t){return this._parameters[e]=t,this},e.prototype.setNumbers=function(e){return this._numbers=e,this},e.prototype.setGroups=function(e){return this._groups=e,this},e.prototype.setStrings=function(e){return this._strings=e,this},e.prototype.setSelectMode=function(e){return this._selectMode=e,this},e.prototype.setLabel=function(e){return this._label=e,this},e.prototype.build=function(){var e,t,r,i,s,n;for(r in(i={}).type=this._type,i.query=this._query,null==this._visualizationParameters.options&&null==this._visualizationParameters.visualizationType||(i.visualizationParameters=this._visualizationParameters),a.isEmpty(this._datasets)||(i.datasets=function(){var r,i;for(t in i=[],r=this._datasets)e=r[t],i.push(e.build());return i}.call(this)),null!=this._sObject&&(i.sobject=this._sObject),null!=this._cdpObjects&&(i.cdpObjects=this._cdpObjects),null!=this._connectionName&&(i.connectionName=this._connectionName),null!=this._broadcastFacet&&(i.broadcastFacet=this._broadcastFacet),null!=this._receiveFacetSource.mode&&(i.receiveFacetSource=this._receiveFacetSource),null!=this._isFacet&&(i.isFacet=this._isFacet),null!=this._isUseGlobal&&(i.useGlobal=this._isUseGlobal),null!=this._isGlobal&&(i.isGlobal=this._isGlobal),null!=this._values&&(i.values=this._values),null!=this._columns&&(i.columns=this._columns),null!=this._numbers&&(i.numbers=this._numbers),null!=this._groups&&(i.groups=this._groups),null!=this._strings&&(i.strings=this._strings),null!=this._selectMode&&(i.selectMode=this._selectMode),null!=this._label&&(i.label=this._label),n=this._parameters)s=n[r],i[r]=s;return i},e}(),n.Widget=function(){function e(e){this._type=e,this._widgetParameters={}}return e.ofType=function(e){return new n.Widget(e)},e.prototype.getId=function(){return this._id},e.prototype.setId=function(e){return this._id=e,this},e.prototype.setStep=function(e){return this._step=e,o.checkOfType("step",this._step,n.Step,!0),this},e.prototype.setParameter=function(e,t){return this._widgetParameters[e]=t,this},e.prototype.setWidgetParameters=function(e){return this._widgetParameters=e,this},e.prototype.getParameter=function(e){return this._widgetParameters[e]},e.prototype.build=function(){return this._step instanceof n.Step&&null!=this._step.getId()&&(this._widgetParameters.step=this._step.getId()),{type:this._type,parameters:this._widgetParameters}},e}(),n.GridLayout=function(){function e(e){this._name=e,this._widgets={},this._selectors=[],this._style={},this._pages=[],this._rowHeight=i.NORMAL}return e.prototype.getName=function(){return this._name},e.prototype.setName=function(e){return this._name=e,this},e.prototype.setNumColumns=function(e){return this._numColumns=e,this},e.prototype.setRowHeight=function(e){return this._rowHeight=e,this},e.prototype.setStyle=function(e,t){return this._style[e]=t,this},e.prototype.setSelectors=function(e){return this._selectors=e,this},e.prototype.setMaxWidth=function(e){return this._maxWidth=e,this},e.prototype.addPage=function(e){return this._pages.push(e),this},e.prototype.setFirstPageName=function(e){return this._firstPageName=e,this},e.prototype.addWidget=function(e,t,r,i,s,o){var a;if(null!=this._widgets[e.getId()])throw new Error("Widget with name: "+e.getId()+" already exists.");return a=new n.GridLayoutWidget(e,t,r,i,s,o),this._widgets[e.getId()]=a,this},e.prototype.getWidgets=function(){return this._widgets},e.prototype.getWidget=function(e){return this._widgets[e]},e.prototype.build=function(){var e,t,r,i,s;return r={name:this._name,version:1,selectors:this._selectors,numColumns:this._numColumns,rowHeight:this._rowHeight.getCode(),style:this._style,maxWidth:this._maxWidth},s=function(){var r,i;for(t in i=[],r=this._widgets)e=r[t],i.push(e.build());return i}.call(this),i={name:this._firstPageName,widgets:s},r.pages=[i].concat(this._pages.map((function(e){return e.build()}))),r},e}(),n.Page=function(){function e(){this._widgets=new Map}return e.prototype.setName=function(e){return this._name=e,this},e.prototype.addWidget=function(e,t,r,i,s,o){var a;if(this._widgets.has(e.getId()))throw new Error("Widget with name: "+e.getId()+" already exists.");return a=new n.GridLayoutWidget(e,t,r,i,s,o),this._widgets.set(e.getId(),a),this},e.prototype.build=function(){return{name:this._name,widgets:Array.from(this._widgets.values()).map((function(e){return e.build()}))}},e}(),n.GridLayoutWidget=function(){function e(e,t,r,i,s,a,l){this._widget=e,this._row=t,this._column=r,this._rowspan=i,this._colspan=s,this._parameters=null!=a?a:{},this._widgetStyle=null!=l?l:{},o.checkOfType("widget",this._widget,n.Widget,!0)}return e.prototype.getId=function(){return this._widget.getId()},e.prototype.setRow=function(e){return this._row=e,this},e.prototype.setColumn=function(e){return this._column=e,this},e.prototype.setRowSpan=function(e){return this._rowspan=e,this},e.prototype.setColSpan=function(e){return this._colspan=e,this},e.prototype.setWidgetStyle=function(e,t){return this._widgetStyle[e]=t,this},e.prototype.setParameters=function(e){return this._parameters=e,this},e.prototype.build=function(){return{name:this._widget.getId(),row:this._row,column:this._column,rowspan:this._rowspan,colspan:this._colspan,parameters:this._parameters,widgetStyle:this._widgetStyle}},e}(),n.Dataset=function(){function e(e,t,r,i,s,n){this._id=e,this._name=t,this._label=r,this._url=i,this._namespace=s,this._datasets=null!=n?n:{}}return e.prototype.getId=function(){return this._id},e.prototype.setId=function(e){return this._id=e,this},e.prototype.setName=function(e){return this._name=e,this},e.prototype.setLabel=function(e){return this._label=e,this},e.prototype.setUrl=function(e){return this._url=e,this},e.prototype.setNamespace=function(e){return this._namespace=e,this},e.prototype.build=function(){var e;return e={},null!=this._id&&(e.id=this._id),null!=this._name&&(e.name=this._name),null!=this._label&&(e.label=this._label),null!=this._url&&(e.url=this._url),null!=this._namespace&&(e.namespace=this._namespace),e},e}(),n.Filter=function(){function e(){this._dataset={},this._fields=[]}return e.prototype.getId=function(){var e;return(("function"==typeof(e=this._dataset).getId?e.getId():void 0)||this._sobject||this._cdpObject||this.reportFilterSequenceId())+"-"+this._fields[0]},e.prototype.setLabel=function(e){return this._label=e,this},e.prototype.setFields=function(e){return this._fields=e,this},e.prototype.setOperator=function(e){return this._operator=e,this},e.prototype.setValue=function(e){return this._value=e,this},e.prototype.setLocked=function(e){return this._locked=e,this},e.prototype.setHidden=function(e){return this._hidden=e,this},e.prototype.setDependent=function(e){return this._dependent=e,this},e.prototype.setSequenceNumber=function(e){return this._sequenceNumber=e,this},e.prototype.setDataset=function(e){return o.checkOfType("dataset",e,n.Dataset,!0),this._dataset=e,this},e.prototype.setSObject=function(e){return this._sobject=e,this},e.prototype.setCDPObject=function(e){return this._cdpObject=e,this},e.prototype.setReportObject=function(e){return this._reportObject=e,this},e.prototype.reportFilterSequenceId=function(){return this._reportObject+"-"+this._sequenceNumber},e.prototype.build=function(){var e;return e={},null!=this._label&&(e.label=this._label),a.isEmpty(this._fields)||(e.fields=this._fields),null!=this._operator&&(e.operator=this._operator),null!=this._value&&(e.value=this._value),null!=this._dependent&&(e.dependent=this._dependent),null!=this._locked&&(e.locked=this._locked),null!=this._hidden&&(e.hidden=this._hidden),a.isEmpty(this._dataset)||(e.dataset=this._dataset.build()),a.isEmpty(this._sobject)||(e.sobject=this._sobject),a.isEmpty(this._cdpObject)||(e.cdpObject=this._cdpObject),a.isEmpty(this._reportObject)||(e.reportObject=this._reportObject),null!=this._sequenceNumber&&(e.sequenceNumber=this._sequenceNumber),e},e}(),n.DataSourceLink=function(){function e(e,t){this._name=e,this._fields=t}return e.prototype.setLabel=function(e){return this._label=e,this},e.prototype.getName=function(){return this._name},e.prototype.build=function(){var e;return e={name:this.getName(),fields:this._fields.map((function(e){return e.build()}))},null!=this._label&&(e.label=this._label),e},e}(),n.ExcludeRelationship=function(){function e(e,t,r,i){this._fromDataSource=e,this._fromDataSourceType=t,this._toDataSource=r,this._toDataSourceType=i}return e.prototype.build=function(){return{fromDataSource:this._fromDataSource,fromDataSourceType:this._fromDataSourceType,toDataSource:this._toDataSource,toDataSourceType:this._toDataSourceType}},e}(),n.DataSourceLinkField=function(){function e(e,t,r,i){this._dataSourceType=e,this._dataSourceName=t,this._dataSourceNamespace=r,this._fieldName=i}return e.prototype.build=function(){return{dataSourceType:this._dataSourceType,dataSourceName:this._dataSourceName,dataSourceNamespace:this._dataSourceNamespace,fieldName:this._fieldName}},e}(),n.Permissions=function(){function e(e,t,r){this._canView=e,this._canModify=t,this._canManage=r}return e.prototype.build=function(){return{view:this._canView,modify:this._canModify,manage:this._canManage}},e}()},18869:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g;g=r(96486),c=r(8429).Z,d=r(21966).Z,h=r(90554).deepDefaults,p=r(44709).D,n=r(93947),a=r(51548).Z,l=r(38241),s=r(29655),i=r(40651).Z,o=r(86866).Z,u=r(21891).Z,e.exports={setDefaults:function(e){null==e.id&&(e.id=d.consumeUniqueId("new")),g.defaults(e,{label:c.getLabel("Assets","newDashboard"),mobileDisabled:!1,dateVersion:1,state:{},folder:{},datasets:[]}),this._setStateDefaults(new a(e))},setGridLayoutDefaults:function(e,t){var r;return r={},g.defaults(e,{name:c.getLabel("DashboardDefaults","layoutName"),numColumns:(null!=t?t.getCode():void 0)===i.COMPONENT.getCode()?6:12,rowHeight:s.NORMAL.getCode(),version:1,pages:[],selectors:[],style:n.Property.getDefaults()}),this._setGridLayoutPagesDefaults(e.pages,r),e},setGridLayoutPageDefaults:function(e,t,r){return null==r&&(r={}),null==r[t]&&(r[t]=p()),g.defaults(e,{label:c.getLabel("DashboardPage","untitledPageName"),name:r[t],widgets:[],navigationHidden:!1})},_setStateDefaults:function(e){return g.defaults(e.getJson().state,{steps:{},widgets:{},filters:[],parameters:[],gridLayouts:[],dataSourceLinksInfo:{links:[],enableAutomaticLinking:!0,excludeRelationships:[],enableAutomaticLinking:!0},widgetStyle:l.Property.getDefaults()}),this._setStepsDefaults(e.getLenses()),this._setWidgetsDefaults(e.getWidgets()),this._setGridLayoutsDefaults(e.getJson().state.gridLayouts,e.getType())},_setStepsDefaults:function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(o.setDefaults(t.getJson()));return s},_setWidgetsDefaults:function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this._setWidgetDefaults(t));return s},_setWidgetDefaults:function(e){var t;if(null==e.getParameters()&&(e.getJson().parameters={}),!u.hasCode(e.getType()))throw new Error("Attempting to add defaults to a widget of invalid type: '"+e.getType());return t=u.fromCode(e.getType()).getDefinition().getDefaultParameters(null,e),h(e.getParameters(),t)},_setGridLayoutsDefaults:function(e,t){var r,i,s,n;for(0===e.length&&e.push({}),n=[],i=0,s=e.length;i<s;i++)r=e[i],n.push(this.setGridLayoutDefaults(r,t));return n},_setGridLayoutPagesDefaults:function(e,t){var r,i,s,n,o,a;for(0===e.length&&e.push({}),a=[],i=n=0,o=e.length;n<o;i=++n)r=e[i],this.setGridLayoutPageDefaults(r,i,t),a.push(function(){var e,t,i,n;for(n=[],e=0,t=(i=r.widgets).length;e<t;e++)s=i[e],n.push(g.defaults(s,{widgetStyle:{}}));return n}());return a}}},82370:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S;E=r(96486),l=r(27223),b=r(90554).deepCopy,o=r(45080).Z,u=r(63594),s=r(40651).Z,S=r(62652),h=S.Lens,g=S.LoadState,y=r(56861),a=r(62133),f=r(72713),m=r(39554),_=r(1611).Z,i=r(54180).Z,p=r(47735).Z,d=r(79587).Z,c=r(75550).Z,C=r(78190).makeImmutableQuery,r(86866).Z,n=r(21891).Z,r(12698).Z,e.exports=function(){function e(){}return e.prototype.buildLensJson=function(){var e,t,r,i;return i=this._getVisualizationType(),e=this._getDatasetMetadatas(),r=this._buildLensState(),t=E.extend(this._getLensJson(),{state:r,visualizationType:i.getCode()}),e.some((function(e){return e.getType()===s.DATASET}))&&(t.datasets=e.map((function(e){return{id:e.getId(),name:e.getName(),namespace:e.getNamespace()}}))),t},e.prototype.buildLens=function(){return new h(this.buildLensJson(),g.DEEP)},e.prototype.getMetadataProvider=function(e){var t,r;return r=e.clone(),t=this._getLensAssetId(),r.primeCache(s.LENS,t,new p(this.buildLens().toJSON())),r.primeXmdCache(s.LENS,this._getLensAssetId(),c.ASSET,new d(this.getNewAssetExtendedMetadataJson())),r},e.prototype.getNewAssetExtendedMetadataJson=function(){var e;return e={},this._copyFields(e,y.MEASURE),this._copyFields(e,y.DIMENSION),this._copyFields(e,y.DERIVED_MEASURE),this._copyFields(e,y.DERIVED_DIMENSION),e},e.prototype._isGrainQuery=function(e){return!E.isEmpty(e.sources)&&!C(e).isGrouped||!E.isEmpty(e.values)},e.prototype._getVisualizationTypeFromWidget=function(e,t){var r,i,s;return null!=e.query&&this._isGrainQuery(e.query)?u.VALUES_TABLE:(r=null!=t?t.type:void 0)===n.CHART.getCode()||r===n.TABLE.getCode()?this._getVisualizationTypeFromParameters(t.parameters):(null!=(i=e.visualizationParameters)?i.parameters:void 0)?this._getVisualizationTypeFromParameters(e.visualizationParameters.parameters):u.getEnumByCode(null!=(s=e.visualizationParameters)?s.visualizationType:void 0)},e.prototype._getVisualizationTypeFromStep=function(e){return null==e.getJson().query||E.isEmpty(e.getJson().query.values)?null!=e.getWidgetType()&&e.getWidgetType()===n.TABLE.getCode()?e.getWidgetVisualizationParameter("pivoted")?u.PIVOT_TABLE:u.COMPARISON_TABLE:null==e.getVisualizationType()?u.getEnumByCode(e.getWidgetVisualizationParameter("visualizationType")):u.getEnumByCode(e.getVisualizationType()):u.VALUES_TABLE},e.prototype._getVisualizationTypeFromParameters=function(e){return e.visualizationType?u.getEnumByCode(e.visualizationType):e.pivoted?u.PIVOT_TABLE:u.COMPARISON_TABLE},e.prototype._copyFields=function(e,t){var r,s,n,o,a,l,u,d,c;if(null!=(a=null!=(d=this._getAssetExtendedMetadata())?d.getJson()[t.getCode()]:void 0)){for(e[t.getCode()]=[],o=this._getStepId(),c=[],l=0,u=a.length;l<u;l++)s=a[l],i.getStepIdForField(s[t.getIdentifier()])===this._getDashboardStepId()&&(n=b(s),r=i.getFieldNameForField(s[t.getIdentifier()]),n[t.getIdentifier()]=i.getFullyFormedFieldName(o,r),c.push(e[t.getCode()].push(n)));return c}},e.prototype._updatePigqlStep=function(e,t,r,i,s){var n,o;return e.numbers=function(){var e,r,i,s;for(s=[],e=0,r=(i=t.measures||[]).length;e<r;e++)o=i[e],s.push(a.measureField(o));return s}(),e.groups=e.strings=function(){var e,r,i,s;for(s=[],e=0,r=(i=t.groups||[]).length;e<r;e++)n=i[e],f.isCompoundDim(n)?s.push(f.compoundDimToCompoundStr(n)):s.push(n);return s}(),delete e.isGlobal,this._updateSaqlStep(e,r,i,s)},e.prototype._updateSaqlStep=function(e,t,r,i){return this._updateSaqlStepMetadataProperties(e,r),e.query=m.replaceRefsToAliases(i,t),delete e.datasets},e.prototype._updateSaqlStepMetadataProperties=function(e,t){if(null!=t)return E.isEmpty(e.strings)||(e.strings=t.getColumnNames(_.DIMENSION)),E.isEmpty(e.numbers)||(e.numbers=t.getColumnNames(_.MEASURE)),E.isEmpty(e.groups)?void 0:e.groups=t.getGroupingColumnNames()},e.prototype._getLensAssetId=function(){return l.checkImplemented()},e.prototype._getStepId=function(){return l.checkImplemented()},e.prototype._getLensJson=function(){return l.checkImplemented()},e.prototype._getVisualizationType=function(){return l.checkImplemented()},e.prototype._getDashboardStepId=function(){return l.checkImplemented()},e.prototype._getDatasetMetadatas=function(){return l.checkImplemented()},e.prototype._getAssetExtendedMetadata=function(){},e.prototype._getAssetDateVersion=function(){return o.LEGACY},e.prototype._buildLensState=function(){return l.checkImplemented()},e}()},54191:(e,t,r)=>{var i,s;s=r(27223),i=r(41556),e.exports=function(){function e(){}return e.prototype.build=function(){var e,t,r,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I;for(n=new i,u=0,p=(b=this._getFilters()).length;u<p;u++)a=b[u],n.addFilter(a);for(d=0,g=(C=this._getSteps()).length;d<g;d++)t=C[d],n.addStep(t);for(s in E=this._getWidgets())r=E[s],n.addWidget(r);for(c=0,m=(S=this._getGridLayouts()).length;c<m;c++)e=S[c],n.addGridLayout(e);for(h=0,_=(T=this._getDatasets()).length;h<_;h++)o=T[h],n.addDataset(o);for(y=0,f=(I=this._getParameters()).length;y<f;y++)l=I[y],n.addParameter(l);return n.setPermissions(this._getPermissions()).setLabel(this._getLabel()).setDescription(this._getDescription()).setId(this._getId()).setName(this._getName()).setNamespace(this._getNamespace()).setFolder(this._getFolderId()).build()},e.prototype._getFolderId=function(){},e.prototype._getName=function(){},e.prototype._getNamespace=function(){},e.prototype._getPermissions=function(){return s.checkImplemented()},e.prototype._getLabel=function(){return s.checkImplemented()},e.prototype._getDescription=function(){return s.checkImplemented()},e.prototype._getDatasets=function(){return s.checkImplemented()},e.prototype._getSteps=function(){return s.checkImplemented()},e.prototype._getFilters=function(){return s.checkImplemented()},e.prototype._getParameters=function(){return s.checkImplemented()},e.prototype._getWidgets=function(){return s.checkImplemented()},e.prototype._getGridLayouts=function(){return s.checkImplemented()},e.prototype._getQueryBuilderSourceType=function(){return s.checkImplemented()},e}()},53361:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,{REPORT_RUN_PAGE_DESKTOP:"rpgd",REPORT_BUILDER_PREVIEW:"rbpv",EINSTEIN_DISCOVERY:"eidi"})},17636:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,{EDIT:"edit",VIEW:"view",THUMBNAIL:"thumbnail"})},56531:(e,t,r)=>{var i,s,n={}.hasOwnProperty;r(8429).Z,s=r(82890),i=r(18869),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._cleanse=function(e){return i.setDefaults(e)},t}(s)},82890:(e,t,r)=>{var i;i=r(27223),e.exports=function(){function e(){}return e.prototype.cleanse=function(e){this._cleanse(e)},e.prototype._cleanse=function(e){return i.checkImplemented()},e}()},28026:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty,l=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};o=r(96486),i=r(723),s=r(19422),e.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.code},t.prototype.getDashboardChartType=function(){return this._value.dashboardChartType},t.prototype.hasCustomPlots=function(){return this._value.hasCustomPlots},t.prototype.hasCustomSummaryColor=function(){return this._value.hasCustomSummaryColor},t.prototype.getNumberOfGroupings=function(){return this._value.numOfGroupings},t.prototype.getMinNumberOfMeasures=function(){return this._value.minNumOfMeasures},t.prototype.shouldNormalize=function(){return this._value.shouldNormalize},t.prototype.updateIfMeasureNotAvailable=function(e,r){var i,s,n,a,u,d,c;for(n=!1,s=u=(i=e.summaries).length-1;u>=0;s=u+=-1)a=i[s],l.call(r,a)<0&&(n=!0,i.splice(s,1),i.length>0&&(e.summaryAxisLocations.splice(s,1),e.summaryColors.splice(s,1),e.referenceLineColors.splice(s,1),e.referenceLineValues.splice(s,1),null!=(d=e.summaryVisualizationTypes)&&d.splice(s,1)));return i.length<this._value.minNumOfMeasures&&(this._value.chartToChangeWhenLostMeasure!==this._value.code&&(e.chartType=this._value.chartToChangeWhenLostMeasure,e.summaryAxisLocations[0]="Y",null!=(c=e.summaryVisualizationTypes)&&(c[0]="Column")),o.isEmpty(i)&&(i[0]=r[0])),t.getEnumByCode(e.chartType).cleanseLegend(e),n},t.prototype.updateIfGroupingNotAvailable=function(e,r){var i,s,n,a,u;for(n=!1,s=u=(i=e.groupings).length-1;u>=0;s=u+=-1)a=i[s],l.call(r,a)<0&&(n=!0,i.splice(s,1));return i.length<this._value.numOfGroupings&&(this._value.chartToChangeWhenLostGrouping!==this._value.code&&(e.chartType=this._value.chartToChangeWhenLostGrouping),o.isEmpty(i)&&(i[0]=r[0])),t.getEnumByCode(e.chartType).cleanseLegend(e),n},t.prototype.cleanseLegend=function(e){if(this._value.noLegendWithMinMeasure&&e.summaries.length===this._value.minNumOfMeasures)return delete e.legendPosition,delete e.hasLegend},t.getDefaultValue=function(){return t.HBAR},t}(i),n.build(n,{DONUT:{code:"Donut",dashboardChartType:s.PIE,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:1,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Donut",chartToChangeWhenLostGrouping:"Donut"},PIE:{code:"Pie",dashboardChartType:s.PIE,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:1,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Pie",chartToChangeWhenLostGrouping:"Pie"},FUNNEL:{code:"Funnel",dashboardChartType:s.FUNNEL,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:1,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Funnel",chartToChangeWhenLostGrouping:"Funnel"},LINE:{code:"Line",dashboardChartType:s.LINE,hasCustomSummaryColor:!0,hasCustomPlots:!1,numOfGroupings:1,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!0,chartToChangeWhenLostMeasure:"Line",chartToChangeWhenLostGrouping:"Line"},LINEGROUPED:{code:"Line Grouped",dashboardChartType:s.LINE,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Line Grouped",chartToChangeWhenLostGrouping:"Line"},LINECUMULATIVE:{code:"Line Cumulative",dashboardChartType:s.LINE,hasCustomSummaryColor:!0,hasCustomPlots:!1,numOfGroupings:1,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!0,chartToChangeWhenLostMeasure:"Line Cumulative",chartToChangeWhenLostGrouping:"Line Cumulative"},LINECUMULATIVEGROUPED:{code:"Line Cumulative Grouped",dashboardChartType:s.LINE,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:1,chartToChangeWhenLostMeasure:"Line Cumulative Grouped",chartToChangeWhenLostGrouping:"Line Cumulative"},SCATTER:{code:"Scatter",dashboardChartType:s.SCATTER,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:1,minNumOfMeasures:2,shouldNormalize:!1,noLegendWithMinMeasure:!0,chartToChangeWhenLostMeasure:"Horizontal Bar",chartToChangeWhenLostGrouping:"Scatter"},SCATTERGROUPED:{code:"Scatter Grouped",dashboardChartType:s.SCATTER,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:2,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Scatter Grouped",chartToChangeWhenLostGrouping:"Scatter"},HBAR:{code:"Horizontal Bar",dashboardChartType:s.HBAR,hasCustomSummaryColor:!0,hasCustomPlots:!1,numOfGroupings:1,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!0,chartToChangeWhenLostMeasure:"Horizontal Bar",chartToChangeWhenLostGrouping:"Horizontal Bar"},HBARGROUPED:{code:"Horizontal Bar Grouped",dashboardChartType:s.HBAR,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Horizontal Bar Grouped",chartToChangeWhenLostGrouping:"Horizontal Bar"},STACKHBAR:{code:"Horizontal Bar Stacked",dashboardChartType:s.STACKHBAR,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Horizontal Bar Stacked",chartToChangeWhenLostGrouping:"Horizontal Bar"},STACKHBAR100:{code:"Horizontal Bar Stacked to 100",dashboardChartType:s.STACKHBAR,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:1,shouldNormalize:!0,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Horizontal Bar Stacked to 100",chartToChangeWhenLostGrouping:"Horizontal Bar"},VBAR:{code:"Vertical Bar",dashboardChartType:s.VBAR,hasCustomSummaryColor:!0,hasCustomPlots:!0,numOfGroupings:1,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!0,chartToChangeWhenLostMeasure:"Vertical Bar",chartToChangeWhenLostGrouping:"Vertical Bar"},VBARGROUPED:{code:"Vertical Bar Grouped",dashboardChartType:s.VBAR,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Vertical Bar Grouped",chartToChangeWhenLostGrouping:"Vertical Bar"},STACKVBAR:{code:"Vertical Bar Stacked",dashboardChartType:s.STACKVBAR,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:1,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Vertical Bar Stacked",chartToChangeWhenLostGrouping:"Vertical Bar"},STACKVBAR100:{code:"Vertical Bar Stacked to 100",dashboardChartType:s.STACKVBAR,hasCustomSummaryColor:!1,hasCustomPlots:!1,numOfGroupings:2,minNumOfMeasures:1,shouldNormalize:!0,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Vertical Bar Stacked to 100",chartToChangeWhenLostGrouping:"Vertical Bar"},VBARSTACKEDLINE:{code:"Vertical Bar Stacked Line",dashboardChartType:s.STACKVBAR,hasCustomSummaryColor:!1,hasCustomPlots:!0,numOfGroupings:2,minNumOfMeasures:2,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Vertical Bar Stacked",chartToChangeWhenLostGrouping:"Vertical Bar Line"},VBARLINE:{code:"Vertical Bar Line",dashboardChartType:s.VBAR,hasCustomPlots:!0,hasCustomSummaryColor:!0,numOfGroupings:1,minNumOfMeasures:2,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Vertical Bar",chartToChangeWhenLostGrouping:"Vertical Bar Line"},VBARGROUPEDLINE:{code:"Vertical Bar Grouped Line",dashboardChartType:s.VBAR,hasCustomSummaryColor:!1,hasCustomPlots:!0,numOfGroupings:2,minNumOfMeasures:2,shouldNormalize:!1,noLegendWithMinMeasure:!1,chartToChangeWhenLostMeasure:"Vertical Bar Grouped",chartToChangeWhenLostGrouping:"Vertical Bar Line"}})},38325:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(81513),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.connect=function(e){return this._runtimeConnector=e},t.prototype._getRuntimeConnector=function(){return this._runtimeConnector},t}(i)},81513:(e,t,r)=>{var i,s,n,o;o=r(96486),n=r(90554).toES6Set,i=r(27223),s=r(90456).$,e.exports=function(){function e(e,t,r){this._id=e,this._blocking=null!=t&&t,this._resetOnFulfilled=null!=r&&r,this._messageBuffer={}}return e.prototype.getId=function(e){return null==e&&(e=!0),e?s(this._id,this._namespace):this._id},e.prototype.getTopics=function(e){return null==e&&(e=!1),i.checkImplemented()},e.prototype.onMessage=function(e,t){var r,i,s,n,o,a,l;for(s=!1,o=0,a=(n=this.getTopics()).length;o<a;o++)(r=n[o]).isOfTopic(e)&&(i=r.getHash(),s||(s=(null!=(l=this._messageBuffer[i])?l.getId():void 0)===e.getId()),this._messageBuffer[i]=e);this._isFulfilled()&&this._onFulfilled(e,s,t)},e.prototype.reset=function(){return this._messageBuffer={}},e.prototype._getBlockingTopics=function(){return i.checkImplemented()},e.prototype._isFulfilled=function(){return!(this._blocking&&!o.isEmpty(this._getBlockingTopics()))||this._areTopicsFulfilled(this._getBlockingTopics())},e.prototype._onFulfilled=function(e,t,r){return i.checkImplemented()},e.prototype._getMessagesForTopics=function(e){var t,r,i,s,o;for(r in i=n(e,(function(e){return e.getHash()})),o=[],s=this._messageBuffer)t=s[r],i.has(r)&&o.push(t);return o},e.prototype._areTopicsFulfilled=function(e){return e.every(this._isTopicFulfilled.bind(this))},e.prototype._isTopicFulfilled=function(e){return o.has(this._messageBuffer,e.getHash())},e}()},47575:e=>{e.exports=function(){function e(e,t){this._updateFilter=e,this._getDataSourceFilters=t}return e.prototype.updateFilter=function(e,t,r){return this._updateFilter(e,t,r)},e.prototype.getDataSourceFilters=function(e){return this._getDataSourceFilters(e)},e}()},68181:(e,t,r)=>{var i,s,n;n=r(1611).Z,r(40651).Z,i=r(1209).Z,s=r(61055).Z,e.exports=function(){function e(e,t,r,o){var a,l,u,d,c,h,p,g,m,_,f,y,b;if(this._filter=e,this._extendedMetadata=t,this._assetMetadata=r,this._isExternal=o,this._isValid=!0,c=this._filter.getDataset(),g=this._filter.getSObject(),a=this._filter.getCDPObject(),p=this._filter.getReportObject(),null!=c||null!=g||a||p){if(null!=c?d=i.DATASET.make(c.getFullyQualifiedName()):null!=g?d=i.SOBJECT.make(g):null!=a?d=i.CDP.make(a):null!=p&&(d=i.REPORT.make(p)),l=[],null!=p)l=this.getReportFilterColumns(e,r);else for(m=0,_=(f=this._filter.getFields()).length;m<_;m++)if(u=f[m],null==(h=null!=(y=this._extendedMetadata)?y.getDateTimeFieldGrain(u):void 0)||h.isLegacy()){if(!(null!=(b=this._extendedMetadata)?b.hasField(u):void 0)){this._isValid=!1;break}l.push(this._extendedMetadata.getField(u).getType().getMetadataColumnType().of(u))}else l.push(n.DIMENSION.of(h.getColumnName(),u));this._dataSourceFilter=this._isValid?s.fromCode(this._filter.getOperator()).of(d,l,this._filter.getValue(),this._filter.isHidden(),this._filter.isLocked(),this._filter.getSequenceNumber()):void 0}else this._isValid=!1}return e.prototype.getReportFilterColumns=function(e,t){var r,i,s,o,a,l,u,d;for(s=[],l=0,u=(d=e.getFields()).length;l<u;l++)o=d[l],null==(i=null!=t?t.getColumnDataType(o):void 0)&&null!=(a=null!=t?t.getStandardFilterInfo(o):void 0)&&(i=a.type),r=null!=i?null!=t?t.getResultsMetadataColumnType(i).of(o):void 0:n.DIMENSION.of(o),s.push(r);return s},e.prototype.getFilterMetadata=function(){return this._filter},e.prototype.getFilterFields=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this._dataSourceFilter.getColumns()).length;t<r;t++)e=i[t],s.push(e.getValue());return s},e.prototype.getFilterOperator=function(){return this._dataSourceFilter.getOperator().getCode()},e.prototype.getFilterValues=function(){return this._dataSourceFilter.getValues()},e.prototype.getExtendedMetadata=function(){return this._extendedMetadata},e.prototype.getAssetMetadata=function(){return this._assetMetadata},e.prototype.isLocked=function(){return this._filter.isLocked()},e.prototype.isHidden=function(){return this._filter.isHidden()},e.prototype.isDependent=function(){return this._filter.isDependent()},e.prototype.getDataspace=function(){return this._filter.getDataspace()},e.prototype.isValid=function(){return this._isValid},e.prototype.getDataSourceFilter=function(){return this._dataSourceFilter},e.prototype.getDataSource=function(){return this._dataSourceFilter.getDataSource()},e.prototype.isExternal=function(){return this._isExternal},e.prototype.getReportObject=function(){return this._filter.getReportObject()},e}()},12815:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T={}.hasOwnProperty;S=r(96486),r(57244).Z,i=r(40651).Z,s=r(52570),f=r(70999).Z,C=r(92463).Z,_=r(35245).Z,r(26499).Z,b=r(591).Z,u=r(38325),l=r(68181),E=r(29717).Z,h=r(70974).Z,o=r(47575),p=r(24556),a=r(41556),g=r(97535).Z,m=r(12698).Z,n=r(76133).Z,c=r(42669).Z,d=r(68955).Z,y=r(96900).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,"__FilterManager__",!0),this._runtimeGlobalFilterItems={},this._runtimeExternalFilterItems={},this._savedViewFilters=[],this._externalFilters=[]}return function(e,t){for(var r in t)T.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setMetadataHolder=function(e){return this._metadataHolder=e,this},t.prototype.setMetadataProvider=function(e){return this._metadataProvider=e,this},t.prototype.setDataSourceStateProvider=function(e){return this._dataSourceStateProvider=e,this},t.prototype.start=function(){return this.isStarted()?Promise.resolve():(this._isStarted=!0,this._applyFilters(this._getFiltersToBeApplied(),!1,!1).then((e=this,function(){if(!S.isEmpty(e._externalFilters))return e._applyFilters(e._externalFilters,!0)})));var e},t.prototype.stop=function(){return this._isStarted=!1,this.removeFilters(this.getFilters()),this.removeFilters(this.getFilters(!0),!0),this._externalFilters=[]},t.prototype.isStarted=function(){return this._isStarted},t.prototype.getTopics=function(){return[]},t.prototype.createFilterConnector=function(){return new o(this._updateFilterOperatorAndValues.bind(this),this._getDataSourceFilters.bind(this))},t.prototype.addFilters=function(e,t){return t&&!this.isStarted()?this._externalFilters.push.apply(this._externalFilters,e):this._applyFilters(e,t,!0)},t.prototype.setSavedViewFilters=function(e){return this._savedViewFilters=e.filter((function(e){return null!=e.getDataset()||null!=e.getSObject()||null!=e.getCDPObject()}))},t.prototype.resetFilters=function(e){return null==e&&(e=!0),this._setFilters(this.getFilters(),!1,!0,!1),e&&this._setFilters(this.getFilters(!0),!0,!0,!1),this._applyFilters(this._getMetadataFilters(),!1,!1)},t.prototype.removeFilters=function(e,t){return this._setFilters(e,t,!0,!0),this._publishResultMessage()},t.prototype.getFilters=function(e){var t;return t=e?this._runtimeExternalFilterItems:this._runtimeGlobalFilterItems,S.values(t)},t.prototype._updateFilterOperatorAndValues=function(e,t,r){var n,o,a,u,h,p,g,m,_;return u=this._rebuildFilterJson(e.getFilterMetadata().getJson(),t,r),g=(h=e.getFilterMetadata().getDashboardMetadata()).getType()===i.COMPONENT&&this._metadataHolder.getMetadata().getType()===i.DASHBOARD?(n=h.getJson().name,this._metadataHolder.getComponentMetadata(n)):this._metadataHolder.getMetadata(),m=new l(new s(u,g),e.getExtendedMetadata(),e.getAssetMetadata()),null!=(o=this._runtimeExternalFilterItems[e.getDataSourceFilter().getColumnHash()])&&this._setFilters([o],!0,!0,!1),new c(this._metadataHolder.getMetadata(),e.getDataSourceFilter().getColumns()).traverse(e.getDataSourceFilter().getDataSource(),(_=this,function(t,r,i){var s;if(null!=(s=_._runtimeExternalFilterItems[new d(e.getDataSourceFilter().getOperator(),r,[i],e.getDataSourceFilter().getValues()).getColumnHash()]))return _._setFilters([s],!0,!0,!1)})),e.getFilterOperator()!==t&&(a=this._runtimeGlobalFilterItems[m.getDataSourceFilter().getColumnHash()],this._publishFilterMessage([a.getDataSourceFilter()],!1,!0,!0)),p=this._hasFilterItemChanged(m),this._setFilters([m],!1,!1,!0),this._publishResultMessage(p)},t.prototype._getDataSourceFilters=function(e){return this._dataSourceStateProvider.getCollatedFilters(e,null,!0,!0,y.NONE)},t.prototype._hasFilterItemChanged=function(e){var t;return!e.isExternal()&&(t=this._runtimeGlobalFilterItems[e.getDataSourceFilter().getColumnHash()],!S.isEqual(t.getFilterValues(),e.getFilterValues())||t.getDataSourceFilter().getHash()!==e.getDataSourceFilter().getHash())},t.prototype._applyFilters=function(e,t,r){var i,s;return null==this._metadataProvider?Promise.resolve([]):Promise.all(function(){var r,s,n;for(n=[],r=0,s=e.length;r<s;r++)i=e[r],n.push(this._buildFilterItem(i,t));return n}.call(this)).then((s=this,function(e){return e=S.filter(e,(function(e){return null!=e})),s._setFilters(e,t,!1,r),s._publishResultMessage(),e}))},t.prototype._buildFilterItem=function(e,t){var r,i,s,n;return r=e.getFullyQualifiedAssetName(),i=e.getAssetType(),s=e.getDataspace(),null==r?Promise.resolve():this._metadataProvider.provide(i,[r],this._metadataHolder.getMetadata().getDateVersion(),null,s).then((n=this,function(r){var i,s,o,a;if(i=r[0],s=r[1],!(!(o=new l(e,s[0],i[0],t)).isValid()||t&&(null!=(a=n._runtimeGlobalFilterItems[o.getDataSourceFilter().getColumnHash()])?a.isLocked():void 0)))return o}))},t.prototype._setFilters=function(e,t,r,i){var s,n;s=[],e.forEach((n=this,function(e){var i,o;null!=e&&(i=e.getDataSourceFilter().getColumnHash(),o=t?n._runtimeExternalFilterItems:n._runtimeGlobalFilterItems,n._shouldOverride(e,o[i])&&s.push(e.getDataSourceFilter()),n._updateFilterMap(e,r))})),s.length&&this._publishFilterMessage(s,t,r,i)},t.prototype._publishFilterMessage=function(e,t,r,i){var s;return s=t?n.EXTERNAL:n.GLOBAL,i&&this._runtimeConnector.publish(new h(this.getId(),e)),this._runtimeConnector.publish(new E(this.getId(),e,s,!r))},t.prototype._publishResultMessage=function(e){return null==e&&(e=!1),this._getRuntimeConnector().publish(new b(this.getId(),[],new m(new f(this._getFilterItems(e)),new C([]),new _,new g,!1)))},t.prototype._getFilterItems=function(e){var t,r,i,n,o,a;if(null==e&&(e=!1),o=[],!this._hasLegacyFilters)for(r in a=this._runtimeGlobalFilterItems)i=a[r],null!=(t=this._runtimeExternalFilterItems[r])&&(n=this._rebuildFilterJson(i.getFilterMetadata().getJson(),t.getFilterOperator(),t.getFilterValues()),i=new l(new s(n,this._metadataHolder.getMetadata()),i.getExtendedMetadata(),i.getAssetMetadata())),o.push(i);return{globalFilters:o,externalFilters:S.values(this._runtimeExternalFilterItems),didGlobalFiltersChange:e}},t.prototype._updateFilterMap=function(e,t){var r,i;if(null!=e)return r=e.getDataSourceFilter().getColumnHash(),i=e.isExternal()?this._runtimeExternalFilterItems:this._runtimeGlobalFilterItems,t?delete i[r]:this._shouldOverride(e,i[r])?i[r]=e:void 0},t.prototype._shouldOverride=function(e,t){var r,s;return s=e.getFilterMetadata().getDashboardMetadata(),null==t||s.getType()===i.DASHBOARD||this._metadataHolder.getMetadata().getType()===i.COMPONENT||(r=t.getFilterMetadata().getDashboardMetadata()).getType()===i.COMPONENT&&s.getType()===i.COMPONENT&&s.getName().toLowerCase()<=r.getName().toLowerCase()},t.prototype._getMetadataFilters=function(){var e,t,r;return this._hasLegacyFilters=!1,null==this._metadataHolder?[]:(t=this._metadataHolder.getMetadata(),e=t.getFilters(),S.isEmpty(e)&&(e=p.getLegacyFilters(t),this._hasLegacyFilters=!S.isEmpty(e)),t.getComponentNames(!0).forEach((r=this,function(t){if(r._metadataHolder.hasComponentMetadata(t))return e=e.concat(r._metadataHolder.getComponentMetadata(t).getFilters())})),e)},t.prototype._getFiltersToBeApplied=function(){var e,t,r,i,s,n;for(t=this._getMetadataFilters(),i=0,s=(n=this._savedViewFilters).length;i<s;i++)e=n[i],this._metadataHolder.getMetadata().hasFilter(e.getId())?t[r=S.findIndex(this._getMetadataFilters(),(function(t){return t.getId()===e.getId()}))]=t[r].shardOperatorAndValue(e.getOperator(),e.getValue()):t.push(e);return t},t.prototype._rebuildFilterJson=function(e,t,r){var i;return i=null!=e.dataset&&(new a.Dataset).setName(e.dataset.name).setNamespace(e.dataset.namespace),(new a.Filter).setLabel(e.label).setFields(e.fields).setOperator(t).setValue(r).setLocked(e.locked).setDependent(e.dependent).setDataset(i).setSObject(e.sobject).setCDPObject(e.cdpObject).setReportObject(e.reportObject).setSequenceNumber(e.sequenceNumber).build()},t}(u)},24556:(e,t,r)=>{var i,s,n,o;o=r(96486),r(1611).Z,i=r(52570),n=r(61055).Z,s=r(86866).Z,e.exports={getQueryFilters:function(e){var t,r,i,s,n,a,l,u,d,c,h,p,g,m,_;if(null==e.columns&&null!=e.filters){for(_=[],a=0,d=(p=e.filters).length;a<d;a++)r=p[a],_.push(r);return _}for(n={},s=[],l=0,c=(g=e.columns).length;l<c;l++)if(t=g[l],!o.isEmpty(t.query.filters))for(u=0,h=(m=t.query.filters).length;u<h;u++)r=m[u],n[i=JSON.stringify(r)]||(n[i]=!0,s.push(r));return s},getLegacyFilters:function(e){var t,r,o,a,l,u,d,c,h,p,g;for(o=[],a=0,u=(c=e.getLenses()).length;a<u;a++)if(t=c[a],s.fromCode(t.getType()).getDefinition().hasLegacyGlobalFilterBehavior(t))for(l=0,d=(h=this.getQueryFilters(t.getQuery())).length;l<d;l++)null!=(r=h[l])&&o.push(new i({fields:[r[0]],value:r[1],operator:null!=(p=r[2])?p:n.IN.getCode(),dataset:null!=(g=t.getDatasets()[0])?g.getJson():void 0},e));return o}}},62519:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L,M,N,O,P,x,Z,F,k,B,W,G,U,H,V,j,q,z,$,Q={}.hasOwnProperty,Y=[].slice;$=r(96486),W=r(61506).Z,y=r(52115),a=r(37129).Z,i=r(18111),r(21966).Z,C=r(27223),v=r(8429).Z,o=r(16045).Z,k=r(1611).Z,g=r(13134).Z,j=r(92855).Z,q=r(64609).Z,V=r(67149).Z,u=r(65016),c=r(41992).Z,d=r(59816),p=r(37073).Z,H=r(64848).Z,h=r(99689).Z,B=r(2843).Z,F=r(591).Z,Z=r(84749).Z,U=r(16892).Z,r(3528).Z,N=r(69985).Z,l=r(76133).Z,b=r(2355).Z,T=r(47466).Z,x=r(86170).Z,I=r(58815).Z,P=r(30386).Z,L=r(97535).Z,M=r(12698).Z,s=r(77955).Z,A=r(21949).Z,w=r(91780).Z,R=r(25997).Z,D=r(65798).Z,n=r(72984).Z,m=r(31889).Z,S=r(72063).Z,E=r(46841).Z,z=r(90456).V,_=r(68955).Z,G=r(29388).Z,r(18253).Z,f=r(5783).Z,O=r(24617).Z,e.exports=function(e){function t(e,r,s,n,o,a,l,u,d,c){var h;this._bindingsTraverserProvider=l,this._namespace=d,this._idManager=c,t.__super__.constructor.call(this,e,r,s,n,o,a,u,r.isQueryBindable),this._searchSubscriberId=void 0,this._tokenizer=new m(W.get(i).getAppUser()),this._startValueBindingTopics=[],this._countdownLatchTopics=[],this._lensTypeDefinition.canQueryContainDynamicData&&(this._dynamicDataTraverser=new f),this._blockingTopics=function(){var e;try{return(e=Array.prototype.concat).call.apply(e,[[]].concat(Y.call(this._getBindingBlockingTopics(this._lensTypeDefinition.getQueryBindableJson(this.getLensMetadata()))),[this._getDynamicDataBlockingTopics(this._lensTypeDefinition.getDynamicDataValuesJson(this.getLensMetadata()))],[this._getParameterBlockingTopics(this._metadataHolder.getMetadata(),this.getLensMetadata().getJson())]))}catch(e){return h=e,this._bindingValidationErrorMessage=h.getErrorMessage(),[]}}.call(this),this._dataSources=[],this._shouldQueryOnResume=!1,this._refreshOnceWithoutConditionalFormattingRules=!1}return function(e,t){for(var r in t)Q.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDataSourceMetadatas=function(){return this._fetchMetadata().then((e=this,function(t){var r,i;return r=t[0],i=e._lensTypeDefinition.getDataSources(e.getLensMetadata()).map((function(e){return e.getName()})),r.filter((function(e){return i.includes(e.getName())}))})).catch((function(e){return[]}));var e},t.prototype.start=function(e,r){return this._countdownLatchTopics=null!=e?e:[],this._initialExternalSelection=r,this._runtimeConnector.updateSubscriptions(!1),t.__super__.start.call(this,this._countdownLatchTopics,this._initialExternalSelection)},t.prototype.reset=function(){var e;return this.getStatus()===c.QUERYING&&(this._needRequery=!1,null!=(e=this._queryPromise)&&e.cancel(),this._queryPromise=null),t.__super__.reset.call(this),this._startValueBindingTopics=[],this._countdownLatchTopics=[],this._dataSources=[],this._shouldQueryOnResume=!1,this._refreshOnceWithoutConditionalFormattingRules=!1,delete this._lastSelectionMessage,this._getRuntimeConnector().updateSubscriptions(!0)},t.prototype.resume=function(){return this._shouldQueryOnResume?(this._shouldQueryOnResume=!1,this._query()):t.__super__.resume.call(this)},t.prototype.refresh=function(e){var t,r,i;if(null==(t=(i=null!=e?e:{}).refreshOnceWithoutConditionalFormattingRules)&&(t=!1),null==(r=i.shouldDedupe)&&(r=!0),this._refreshOnceWithoutConditionalFormattingRules=t,this.getStatus().canReceiveMessages)return this._query({shouldDedupe:r,isFirstQuery:!1})},t.prototype.getTopics=function(e){return null==e&&(e=!1),null==this._topics||e?this._topics=p.unique(this._getBlockingTopics().concat(new H(this.getId()),this._countdownLatchTopics,this._getStartValueBindingTopics(),S.getTopics(this._getDataSources(),this._lensTypeDefinition,this.getLensMetadata()))):this._topics},t.prototype.onMessage=function(e,r){var i,s,n,o,a,l,u;if(this.getStatus().canReceiveMessages)if(e instanceof U)for(this._countdownLatchTopics=e.countdownLatchTopics,this._runtimeConnector.updateSubscriptions(!1),o=0,a=(l=e.countdownLatchTopics).length;o<a;o++)i=l[o],delete this._messageBuffer[i.getHash()];else n=this._startValueBindingTopics.length,this._startValueBindingTopics=this._startValueBindingTopics.filter((function(t){return!t.isOfTopic(e)})),this._startValueBindingTopics.length!==n&&this._runtimeConnector.updateSubscriptions(!1),t.__super__.onMessage.call(this,e,r),this.getStatus()===c.PAUSED?this._shouldQueryOnResume||(this._shouldQueryOnResume=!0):this.getStatus()!==c.IDLE||this._isFulfilled()||this._setStatus(c.WAITING),s=this._countdownLatchTopics.length,this._countdownLatchTopics=this._countdownLatchTopics.filter((u=this,function(e){return!u._isTopicFulfilled(e)})),this._countdownLatchTopics.length!==s&&this._runtimeConnector.updateSubscriptions(!1),null!=this._startValueBindingDef&&0===this._startValueBindingTopics.length&&this._startValueBindingDef.resolve()},t.prototype.onSelection=function(e,t){var r,i,s,n,o,a,l,u,d,c,h;if(!this.hasValidLastResult())throw new Error("Selection cannot be made on lens which does not have a valid last result.");if(n=this._lastResult.getMetadata(),o=e.select(this._lastResult.getData(),n,this.getLensMetadata().getSelectMode()),r=this._getFilteringValues(o),i=this._getFilteringColumns(),s=this._lensTypeDefinition.isBroadcastingFaceting(this.getLensMetadata())&&!(t===N.INITIAL&&$.isEmpty(r))&&!$.isEmpty(i),!$.isEqual(o,this.getSelectedRows())||!$.isEqual(r,null!=(d=this._lastSelectionMessage)?d.getFilterValues():void 0)||s!==(null!=(c=this._lastSelectionMessage)?c.isFilterable():void 0))for(l=0,u=(h=this._getSelectionMessages(this._getDataSources(),o,n,t,s,i,r)).length;l<u;l++)a=h[l],this._sendSelectionMessage(a)},t.prototype._getSelectionMessages=function(e,t,r,i,s,n,o){return[new B(this.getId(),[e[0]],t,r,i,s,n,o,E.determine(this.getLensMetadata(),o),this._lastResult.getFormatter())]},t.prototype.onFocus=function(e,t){var r,i,s,n,o;return n=this._lastResult.getMetadata(),o=e.select(this._lastResult.getData(),n,this.getLensMetadata().getSelectMode()),r=this._getFilteringValues(o),i=this._getFilteringColumns(),s=new _(E.determine(this.getLensMetadata(),r),this._getDataSources()[0],i,r),this._runtimeConnector.publish(new G(this.getId(),[s],l.TEMPORARY,!$.isEmpty(i)&&!$.isEmpty(o),t))},t.prototype.onRemoveFocus=function(e){return this.onFocus(new b,e)},t.prototype.fireDefaultSelections=function(e){return null==e&&(e=!1),this._hasValidStartValueBindings()?this._resolveStartValueBindings(e):this._fireDefaultSelections(e,this._getStartValues())},t.prototype.refireSelectionWithoutFilters=function(){var e;(null!=(e=this._lastSelectionMessage)?e.isFilterable():void 0)&&this._sendSelectionMessage(this._lastSelectionMessage.cloneAsUnfilterable())},t.prototype.setExternalSelection=function(e){if(delete this._externalSelectionsByDataSourceToSet,this.hasValidLastResult())return this._setExternalSelection(e);this._externalSelectionToSet=e},t.prototype.setExternalSelectionByDataSource=function(e){if(this.hasValidLastResult())return this._setExternalSelectionsByDataSource(e);this._externalSelectionsByDataSourceToSet=e},t.prototype.removeAllSelections=function(){return this.onSelection(new b,N.SYSTEM)},t.prototype.getSelectedAsStartValues=function(e){return null==e&&(e=!1),e&&this._hasValidStartValueBindings()?this.getLensMetadata().getStart():null!=this.getSelectedRows()?this._getSelectedAsStartValues():void 0},t.prototype.getSelectedRows=function(){var e;return null!=(e=this._lastSelectionMessage)?e.getData():void 0},t.prototype.getLastSelectionState=function(){var e;if(!this.hasValidLastResult())throw new Error("Lenses without a valid last result have no last selection state.");return e=null!=this._lastSelectionMessage?this._getFilteringValues(this.getSelectedRows()):[],new g(this._getFilteringColumns(),e)},t.prototype.dontFireInitialSelection=function(){return this._dontFireInitialSelection=!0},t.prototype.doFireInitialSelection=function(){return this._dontFireInitialSelection=!1},t.prototype.shouldFireInitialSelection=function(){return!this._dontFireInitialSelection},t.prototype.getNextPage=function(e){var t;if(this._canSupportPaging(e))return t=new V(this._idManager.appContext,this._idManager.getTabIdForLogging(),this._idManager.makeQueryId(),this._idManager.getQuerySequenceId()),this._makeQuery(!0,t,e).then((function(e){return e.getData()}))},t.prototype.updateLensState=function(e){var t;if(t=(void 0===this._enablePaging||this._enablePaging)&&e.enablePaging,this._enablePaging!==t&&(this._enablePaging=t,this.hasLastResult()))return this.refresh()},t.prototype.resetLensState=function(){return delete this._enablePaging},t.prototype._getQueryPageLimit=function(){return 200},t.prototype._getInitialPageParam=function(){},t.prototype._getBlockingTopics=function(){return this._blockingTopics},t.prototype._getBindingBlockingTopics=function(e){return this._bindingsTraverserProvider.getNewTraverser().getRuntimeTopics(e,this._namespace)},t.prototype._getDynamicDataBlockingTopics=function(e){return this._dynamicDataTraverser?this._dynamicDataTraverser.getDynamicDataBlockingTopics(e,this._namespace):[]},t.prototype._getParameterBlockingTopics=function(e,t){return O.getParametersTopics(e,t,this._namespace)},t.prototype._validate=function(){var e,t,r,i,s,n,o,a,l,d,c;if(null!=this._bindingValidationErrorMessage)return u.ValidationResultStatus.ERROR.makeResult(this._bindingValidationErrorMessage);try{o=this._getStartValueBindingTopics()}catch(e){return t=e,u.ValidationResultStatus.ERROR.makeResult(t.getErrorMessage())}if(this._hasStartValues()){if(this._hasStartValueBindings()){if(!this._lensTypeDefinition.canHaveStartValueBindings)return u.ValidationResultStatus.ERROR.makeResult(v.getLabel("StepValidation","startValueBindingsNotSupported"));if(o.some((function(e){return e.getMessageType()!==h.RESULT})))return u.ValidationResultStatus.ERROR.makeResult(v.getLabel("StepValidation","invalidStartValueBinding"))}if(null!=(a=this._validateStartValues(this._getStartValues())))return a}for(s=this._metadataHolder.getMetadata(),r=Array.from(this._metadataHolder.getComponentMetadatas().values()),e=(null==this._bindingValidationErrorMessage?this._getBindingBlockingTopics(this._lensTypeDefinition.getQueryBindableJson(this.getLensMetadata())):[]).concat(o).map((function(e){return e.getPublisherId()})),n=new Set,l=0,d=e.length;l<d;l++){if((i=e[l])===this.getId())return u.ValidationResultStatus.ERROR.makeResult(v.getLabel("StepValidation","selfReferentialBinding"));s.hasLens(this._namespace?z(i,this._namespace):i)||r.some((function(e){return e.hasLens(z(i,e.getFullyQualifiedName()))}))||(null!=(c=this._metadataHolder.getParentMetadata())?c.hasLens(this._namespace?z(i,this._namespace):i):void 0)||n.add(i)}return n.size>0?u.ValidationResultStatus.ERROR.makeResult(v.getLabel("StepValidation","invalidBindingReference",v.toSentence(n))):u.ValidationResultStatus.VALID.makeResult()},t.prototype._validateStartValues=function(e){if(this._hasValidStartValueBindings()&&(!$.isString(e)||!this._bindingsTraverserProvider.getNewTraverser().isBinding(e)))return u.ValidationResultStatus.ERROR.makeResult(v.getLabel("StepValidation","invalidStartValue"))},t.prototype._start=function(){return this._isFulfilled()?this._query():this._setStatus(c.WAITING)},t.prototype._disableLens=function(e,r){return t.__super__._disableLens.call(this,e,r),this._sendResultMessage(new R(e,r,this._getQuery(this.getLensMetadata()))),this._maybeSendFilterBackoffMessage()},t.prototype._sendResultMessage=function(e,t){return this._lastResult=e,this._getRuntimeConnector().publish(new F(this.getId(),this._getDataSources().slice(0,1),this._lastResult,t))},t.prototype._isFulfilled=function(){return t.__super__._isFulfilled.call(this)&&(!this.hasLastResult()&&this.getStatus()!==c.QUERYING||this._areTopicsFulfilled(this._countdownLatchTopics))},t.prototype._onFulfilled=function(e,t,r){t||this._query()},t.prototype._query=function(e){var t,r,i,s,n;(null==(i=(s=null!=e?e:{}).shouldDedupe)&&(i=!0),null==(t=s.isFirstQuery)&&(t=!this.hasLastResult()),this.getStatus()!==c.QUERYING)?(this._setStatus(c.QUERYING),r=new V(this._idManager.appContext,this._idManager.getTabIdForLogging(),this._idManager.makeQueryId(),this._idManager.getQuerySequenceId()),W.get(o).trigger(new j(r,q.START)),this._queryPromise=new a(this._makeQuery(i,r,{offset:0})),this._queryPromise.getPromise().then(this._onResult.bind(this,t,r),(function(e){if(!e.isCanceled)throw e})).then((n=this,function(){if(n._needRequery&&(n._needRequery=!1,n._query()),n._refreshOnceWithoutConditionalFormattingRules)return n._refreshOnceWithoutConditionalFormattingRules=!1,n._query()}))):this._needRequery=!0},t.prototype._makeQuery=function(e,t,r){return this._fetchMetadata().then((i=this,function(s){var o,a,l,u,d,c,h,p;if(l=s[0],d=s[1],o=[],i._lensTypeDefinition.isQueryBindable)try{p=i._executeBindings(o)}catch(e){if((u=e)instanceof n)return Promise.resolve(new w(u,i._getQuery(i.getLensMetadata())));throw u}else p=i.getLensMetadata();return i._lensTypeDefinition.canQueryContainUserTokens&&(p=i._lensTypeDefinition.shardWithNewQuery(p,i._tokenizer.tokenize(i._getQuery(p),!0))),i._lensTypeDefinition.canQueryContainDynamicData&&(p=i._resolveDynamicData(p)),h=function(){var e,t,r,i;for(i=[],e=0,t=(r=this._dataSources).length;e<t;e++)a=r[e],i.push(a.getHash());return i}.call(i),i._dataSources=i._lensTypeDefinition.getDataSources(p),$.isEqual(h.sort(),function(){var e,t,r,i;for(i=[],e=0,t=(r=this._dataSources).length;e<t;e++)a=r[e],i.push(a.getHash());return i}.call(i).sort())||i._getRuntimeConnector().updateSubscriptions(),c=S.getDataSourceFilters(i._dataSourceStateProvider,i._lensTypeDefinition,i.getLensMetadata(),i._getDataSources(),i.getId(),i._namespace),i._addFilters(p,c,{datasetMetadatas:l,extendedMetadatas:d}).then(i._handleRangeQuery.bind(i,{datasetMetadatas:l,extendedMetadatas:d})).then(i._validateAndExecuteQuery.bind(i,e,o,p,t,c,{datasetMetadatas:l,extendedMetadatas:d},r))})).catch(this._handleGenericQueryGenerationError.bind(this));var i},t.prototype._canSupportPaging=function(e){return this._enablePaging},t.prototype._executeBindings=function(e){var t,r;return t=this.getLensMetadata(),r=$.cloneDeep(this._lensTypeDefinition.getQueryBindableJson(t)),this._resolveBindings(r,this._getMessagesForTopics(this._getBlockingTopics()),e),$.defaultsDeep(r,t.getJson()),t.shard(r)},t.prototype._resolveBindings=function(e,t,r){this._bindingsTraverserProvider.getNewTraverser().executeBindings(e,t,r,{namespace:this._namespace})},t.prototype._resolveDynamicData=function(e){var t,r,i;return this._dynamicDataTraverser?(i=$.cloneDeep(this._lensTypeDefinition.getQueryDynamicDataJson(e)),t=this._lensTypeDefinition.getDynamicDataValuesJson(e),$.isEmpty(null!=t?t.values:void 0)&&!this._metadataHolder.getMetadata().hasParameters()?e:(r=this._getParameterBlockingTopics(this._metadataHolder.getMetadata(),this.getLensMetadata().getJson()),$.isEmpty(r)||O.resolveParameters(i,this._getMessagesForTopics(r)),$.isEmpty(null!=t?t.values:void 0)||this._dynamicDataTraverser.resolveDynamicData(i,t,this._getMessagesForTopics(this._getBlockingTopics()),this._namespace),$.defaultsDeep(i,e.getJson()),e.shard(i))):e},t.prototype._addFilters=function(e,t){return Promise.resolve(e)},t.prototype._handleRangeQuery=function(e,t){return t},t.prototype._validateAndExecuteQuery=function(e,t,r,i,s,n,o,a){var l,u,d,c,h,p,g,m;return this._validateResolvedQuery(r,n),p=this._convertToFinalQueryFormat(a,n,o),d=(g=this._resolveDataSourceAliases(p,r,n))[0],l=g[1],u=g[2],c=this._canSupportPaging(o)?this._getQueryWithOriginalLimit(a,r,n):d,h=new L(this._dataSources,this._getQuery(this.getLensMetadata()),t,s,this._getQuery(r),this._getQuery(a),p,d,c,l,u,this._lensTypeDefinition.getBoundQueryReferences(this._bindingsTraverserProvider,this.getLensMetadata())),e&&this.hasValidLastResult()&&this._normalizeQuery(this._lastResult.getQueryInfo())===this._normalizeQuery(h)?this._buildLensQueryResult(r,h,!0,this._lastResult.getQueryResult(),{datasetMetadatas:l,extendedMetadatas:u}):this._performQuery(h,r,i,{datasetMetadatas:l,extendedMetadatas:u}).then((m=this,function(e){return m._buildLensQueryResult(r,h,e.wasCached(),e,{datasetMetadatas:l,extendedMetadatas:u})}),this._handleQueryExecutionError.bind(this,h))},t.prototype._getQueryWithOriginalLimit=function(e,t,r){var i;return i=this._convertToFinalQueryFormat(e,r),this._resolveDataSourceAliases(i,t,r)[0]},t.prototype._validateResolvedQuery=function(e,t){},t.prototype._convertToFinalQueryFormat=function(e,t,r){return this._getQuery(e)},t.prototype._resolveDataSourceAliases=function(e,t,r){return r.datasetMetadatas,r.extendedMetadatas,[e,[],void 0]},t.prototype._handleGenericQueryGenerationError=function(e){return new D(e,this._getQuery(this.getLensMetadata()))},t.prototype._normalizeQuery=function(e){return this._lensTypeDefinition.normalizeQuery(e.finalQuery)},t.prototype._performQuery=function(e,t,r,i){return C.checkImplemented()},t.prototype._buildLensQueryResult=function(e,t,r,i,s){var n,o;return o=this._buildResultsMetadata(e,t,i,s),n=this._buildResultsFormatter(e,s,o),new M(i,o,n,t,r)},t.prototype._buildResultsMetadata=function(e,t,r,i){return C.checkImplemented()},t.prototype._buildResultsFormatter=function(e,t,r){return C.checkImplemented()},t.prototype._handleQueryExecutionError=function(e,t){return new A(t,e)},t.prototype._onResult=function(e,t,r){var i,s,n;if(n=this._lastResult,this._lensTypeDefinition.isEveryQueryResultPublished||this._searchSubscriberId?this._sendResultMessage(r,this._searchSubscriberId):this._isValidResult(r)&&this._needRequery||this._sendResultMessage(r,this._searchSubscriberId),this._setStatus(c.IDLE),this._logQueryResult(t,r),this.hasCapability(d.SELECTION)){if(e&&!this._isValidResult(r)&&this._maybeSendFilterBackoffMessage(),this._isValidResult(r))if(null!=this._externalSelectionToSet){if(i=this._externalSelectionToSet,delete this._externalSelectionToSet,this._setExternalSelection(i))return}else if(null!=this._externalSelectionsByDataSourceToSet&&this._externalSelectionsByDataSourceToSet.size>0&&(s=this._externalSelectionsByDataSourceToSet,delete this._externalSelectionsByDataSourceToSet,this._setExternalSelectionsByDataSource(s)))return;var o;this._shouldFireInitialSelection(e,n,r)?this._hasValidStartValueBindings()?(this._startValueBindingDef=new y,this._startValueBindingDef.promise().then(this._resolveStartValueBindings.bind(this,!1)).finally((o=this,function(){return delete o._startValueBindingDef,o._startValueBindingTopics=[]})),this._startValueBindingTopics=this._getStartValueBindingTopics().filter(function(e){return function(t){return!$.has(e._messageBuffer,t.getHash())}}(this)),0===this._startValueBindingTopics.length&&this._startValueBindingDef.resolve()):this.fireDefaultSelections():this._isLastSelectionInvalid(n,r)&&this._removeLastSelection(r)}},t.prototype._maybeSendFilterBackoffMessage=function(){var e,t;if(t=this.getLensMetadata(),this.hasCapability(d.SELECTION)&&this._lensTypeDefinition.isBroadcastingFaceting(t)&&this._lensTypeDefinition.canDetermineInitialDataSources(this._bindingsTraverserProvider,t)&&(null!=this._initialExternalSelection||null!=this.getLensMetadata().getStart()&&this._lensTypeDefinition.canDetermineFilteringColumns(this._bindingsTraverserProvider,t)))return e=null!=this._initialExternalSelection?this._initialExternalSelection.getFilterColumns():this._lensTypeDefinition.getFilteringColumns(t),this._runtimeConnector.publish(new Z(this.getId(),this._lensTypeDefinition.getDataSources(t),[l.FACETING],e))},t.prototype._logQueryResult=function(e,t){var r,i,s;return s=t instanceof M&&t.wasCached(),i=t instanceof M?t.getQueryResult().getResponseTime():void 0,this._statsTracker.addServerDuration(i),this._statsTracker.addQuery(s),r=new j(e,this.hasValidLastResult()?q.SUCCESS:q.FAILURE).setCached(s),t instanceof A&&r.setErrorCode(t.errorCode),W.get(o).trigger(r)},t.prototype._getQuery=function(e){return this._lensTypeDefinition.getQuery(e)},t.prototype._getDataSourceName=function(){var e;return null!=(e=this._dataSources[0])?e.getName():void 0},t.prototype._shouldFireInitialSelection=function(e,t,r){return(this.shouldFireInitialSelection()||null==this._lastSelectionMessage&&null!=this._initialExternalSelection)&&(this._isValidResult(r)&&null==this._lastSelectionMessage||this.getLensMetadata().getSelectMode().isRequired()&&this._isLastSelectionInvalid(t,r))},t.prototype._fireDefaultSelections=function(e,t){var r,i;return r=this.getSelectedAsStartValues(),i=e&&!$.isEmpty(r)?r:t,this._fireSelection(i,N.INITIAL)},t.prototype._fireSelection=function(e,t){var r,i,s,n,o;return r=this._getSelectionColumns(),n=function(){var t,a;if(this._isSelectionEmpty(e))return new b;if($.isEmpty(e)&&this.getLensMetadata().getSelectMode().isRequired())return new T([0]);if(this._inRangeSelectMode())return new x(e);if(this._isInputSelectMode())return s=this._getSelectionValues(e)[0],new I(s);for(o=this._getSelectionValues(e),n=new P(r),t=0,a=o.length;t<a;t++)i=o[t],n.addSelectedValue(r.length>1?i:[i]);return n}.call(this),this.onSelection(n,t)},t.prototype._isSelectionEmpty=function(e){return $.isEmpty(this._getSelectionColumns())||!this.getLensMetadata().getSelectMode().isRequired()&&$.isEmpty(e)},t.prototype._getSelectionValues=function(e){return $.isArray(e)?e:[e]},t.prototype._sendSelectionMessage=function(e){return this._lastSelectionMessage=e,this._runtimeConnector.publish(this._lastSelectionMessage)},t.prototype._setExternalSelectionsByDataSource=function(e){return 0!==(e=e.get(this._getDataSourceName()).getOrElse((function(){return[]}))).length&&this._attemptToSetExternalSelections(e)},t.prototype._setExternalSelection=function(e){return this._attemptToSetExternalSelections([{fields:e.metadata.groups,values:e.values}])},t.prototype._attemptToSetExternalSelections=function(e){var t,r,i;for(r=0,i=e.length;r<i;r++)if(t=e[r],this._isValidExternalSelection(t))return this._fireSelection(t.values,N.EXTERNAL),!0;return!1},t.prototype._isValidExternalSelection=function(e){var t;return $.isEqual(e.fields,function(){var e,r,i,s;for(s=[],e=0,r=(i=this._getSelectionColumns()).length;e<r;e++)t=i[e],s.push(t.getValue());return s}.call(this))},t.prototype._resolveStartValueBindings=function(e){var t,r;try{t=[this._getStartValues()],this._bindingsTraverserProvider.getNewTraverser().executeBindings(t,this._getMessagesForTopics(this._getStartValueBindingTopics()),void 0,{namespace:this._namespace}),t=t[0]}catch(e){if((r=e)instanceof n)return void this._fireSelection([],N.INITIAL);throw r}return this._fireDefaultSelections(e,t)},t.prototype._hasStartValues=function(){return null!=this._initialExternalSelection||null!=this.getLensMetadata().getStart()},t.prototype._getStartValues=function(){return null!=this._initialExternalSelection?this._lensTypeDefinition.getStartValues(this._initialExternalSelection):this._tokenizer.tokenize(this.getLensMetadata().getStart(),!1)},t.prototype._getSelectedAsStartValues=function(){var e,t,r,i,s;if(t=this._getSelectionColumns(),!$.isEmpty(t))return e=function(){var e,i,s;for(s=[],e=0,i=t.length;e<i;e++)r=t[e],s.push(r.getName());return s}(),function(){var t,r,n,o;for(o=[],t=0,r=(n=this.getSelectedRows()).length;t<r;t++)s=n[t],1===$.size(e)?o.push(s[e[0]]):o.push(function(){var t,r,n;for(n=[],t=0,r=e.length;t<r;t++)i=e[t],n.push(s[i]);return n}());return o}.call(this)},t.prototype._getSelectionColumns=function(e){return null==e&&(e=this.getLastResult()),this._inRangeSelectMode()?[k.MEASURE.of("min"),k.MEASURE.of("max")]:e.getMetadata().getGroupings()},t.prototype._getFilteringColumns=function(e){return this._inRangeSelectMode()?this._getSelectionColumns().slice(0,1):this._getSelectionColumns(e)},t.prototype._getFilteringValues=function(e){var t,r,i,s;return t=this._getSelectionColumns(),s=function(){var s,n,o;for(o=[],s=0,n=e.length;s<n;s++)i=e[s],1===t.length?o.push(this._getFilterColumnValue(t[0],i)):o.push(function(){var e,s,n;for(n=[],e=0,s=t.length;e<s;e++)r=t[e],n.push(this._getFilterColumnValue(r,i));return n}.call(this));return o}.call(this),this._processFilteringValues(s)},t.prototype._getFilterColumnValue=function(e,t){return t[e.getName()]},t.prototype._hasStartValueBindings=function(){return null==this._initialExternalSelection&&this._lensTypeDefinition.hasStartValueBindings(this._bindingsTraverserProvider,this.getLensMetadata())},t.prototype._hasValidStartValueBindings=function(){return this._lensTypeDefinition.canHaveStartValueBindings&&this._hasStartValueBindings()},t.prototype._getStartValueBindingTopics=function(){return this._lensTypeDefinition.canHaveStartValueBindings?Array.prototype.concat.apply([],this._bindingsTraverserProvider.getNewTraverser().getRuntimeTopics(this._getStartValues(),this._namespace)):[]},t.prototype._processFilteringValues=function(e){return e},t.prototype._inRangeSelectMode=function(){return this._lensTypeDefinition.inRangeSelectMode(this.getLensMetadata())},t.prototype._getDataSources=function(){return this._dataSources},t.prototype._getConditionalFormattingRules=function(){if(!this._refreshOnceWithoutConditionalFormattingRules)return t.__super__._getConditionalFormattingRules.call(this)},t.prototype._isInputSelectMode=function(){return this._lensTypeDefinition.isInputSelectMode()},t.prototype._removeLastSelection=function(e){return this._sendSelectionMessage(new B(this.getId(),this._getDataSources(),[],this._lastSelectionMessage.getMetadata(),N.SYSTEM,!0,this._lastSelectionMessage.getFilterColumns(),[],this._lastSelectionMessage.getFilterOperator(),this._lastSelectionMessage.getFormatter()))},t.prototype._isValidResult=function(e){return!(e instanceof s)},t.prototype._isLastSelectionInvalid=function(e,t){return!$.isEmpty(this.getSelectedRows())&&(!this._isValidResult(t)||this._isValidResult(e)&&!$.isEqual(this._getFilteringColumns(e),this._getFilteringColumns(t)))},t}(u)},65016:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f={}.hasOwnProperty,y=function(e,t){for(var r in t)f.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};c=r(27223),d=r(78978),o=r(54953),g=r(99522),n=r(37129).Z,i=r(54180).Z,l=r(41992).Z,r(81513),m=r(47333).Z,h=r(3704).Z,p=r(1281).Z,u=r(38325),_=r(44458).Z,r(59816),s=r(77955).Z,r(76133).Z,e.exports=a=function(e){function t(e,r,i,s,n,o,a,u,d){this._lensTypeDefinition=r,this._metadataHolder=i,this._metadataProvider=s,this._dataSourceStateProvider=n,this._executeMutators=o,t.__super__.constructor.call(this,e,u,d),this._registerCapabilities(a),this._status=l.NOT_STARTED,this._statsTracker=new p}return y(t,e),t.prototype.createLensConnector=function(){return{hasCapability:this.hasCapability.bind(this),callCapabilityMethod:this.callCapabilityMethod.bind(this),onFocus:this.onFocus.bind(this),onRemoveFocus:this.onRemoveFocus.bind(this)}},t.prototype.refresh=function(){return c.checkImplemented()},t.prototype.reset=function(){var e;return t.__super__.reset.call(this),null!=(e=this._primeThePumpPromise)&&e.cancel(),delete this._primeThePumpPromise,this._setStatus(l.NOT_STARTED),this._statsTracker=new p,this._invalidateLastResult()},t.prototype.onInteraction=function(e,t,r){var i,s,n,o;if(this.hasValidLastResult())return n=this.getLastResult(),r||(r=n.getMetadata()),i=t.select(n.getData(),r),s=new _(i,r),e.setInteractionData(s),o=new h(this.getId(),e),this.isStarted()?this._getRuntimeConnector().publish(o):void 0},t.prototype.getLastResult=function(){return this._lastResult},t.prototype.hasLastResult=function(){return null!=this._lastResult},t.prototype.hasValidLastResult=function(){return this.hasLastResult()&&!(this._lastResult instanceof s)},t.prototype.hasError=function(){return this.hasLastResult()&&this._lastResult instanceof s},t.prototype.getErrorMessage=function(){if(!this.hasError())throw new Error("Lenses without an error have no error message.");return this._lastResult.getErrorMessage()},t.prototype._primeThePump=function(){return this._fetchMetadata()},t.prototype._fetchMetadata=function(){return Promise.resolve({datasetMetadatas:[],extendedMetadatas:[]})},t.prototype._invalidateLastResult=function(){return this._lastResult=null},t.prototype.getLensMetadata=function(){return this._metadataHolder.getMetadata().getLens(this._id)},t.prototype.disconnect=function(){return this._setStatus(l.DISCONNECTING)},t.prototype.start=function(e,t){return this._setStatus(l.PRIMING_THE_PUMP),this._primeThePumpPromise=new n(this._primeThePump()),new Promise((r=this,function(e,t){return r._primeThePumpPromise.getPromise().then((function(){return r._validationResult=r._validate(),r._validationResult.getStatus().shouldStart()?(r._start(),e(!0)):(r._disableLens(void 0,r._validationResult.getMessage()),e(!1))}),(function(t){return t&&t.isCanceled||r._disableLens(t,t.message),e(!1)}))}));var r},t.prototype.pause=function(){return this._setStatus(l.PAUSED)},t.prototype.resume=function(){return this._setStatus(l.IDLE)},t.prototype.getValidationResult=function(){return this._validationResult},t.prototype.getStatus=function(){return this._status},t.prototype.isStarted=function(){return this.getStatus()!==l.NOT_STARTED},t.prototype.onMessage=function(e,r){if(this.getStatus().canReceiveMessages)return t.__super__.onMessage.call(this,e,r)},t.prototype.getPerformanceStats=function(){return this._statsTracker.getStats()},t.prototype.getNamespace=function(){return this._namespace},t.prototype.getDataSourceMetadatas=function(){return c.checkImplemented()},t.prototype._validate=function(){return c.checkImplemented()},t.prototype._isFulfilled=function(){return t.__super__._isFulfilled.call(this)&&this.getStatus()!==l.PAUSED},t.prototype._start=function(){return c.checkImplemented()},t.prototype._disableLens=function(e,t){return this._setStatus(l.DISABLED)},t.prototype._getDataSources=function(){return c.checkImplemented()},t.prototype._setStatus=function(e){if(e===this._status)return!1;if(!this._status.isValidNextStatus(e))throw new Error("Lens cannot transition to "+e.name+" from "+this._status.name+".");return this._statsTracker.addStatus(e),this._getRuntimeConnector().publish(this._createStatusChangeMessage(e)),this._status=e,!0},t.prototype._createStatusChangeMessage=function(e){return new m(this.getId(),this._status,e)},t.prototype._getConditionalFormattingRules=function(){return new i(this._metadataHolder.getAssetExtendedMetadata()).getConditionalFormattingRulesForStep(this.getLensMetadata().getId())},t.prototype._getResultColumnsFormat=function(){var e,t,r,s,n,o,a,l;for(n=new Map,s=new i(this._metadataHolder.getAssetExtendedMetadata()),o=this.getLensMetadata().getId(),a=0,l=(r=s.getAllFieldsForStep(o)).length;a<l;a++)e=r[a],t=i.getFieldNameForField(e.getName()),n.set(t,{label:e.getLabel(),format:e.getFormat(),conditionalFormatting:e.getConditionalFormatting(),defaultAction:e.getDefaultAction()});return n},t}(u),g.mix(a,[o]),a.ValidationResult=function(){function e(e,t){this._status=e,this._message=t}return e.prototype.getStatus=function(){return this._status},e.prototype.getMessage=function(){return this._message},e}(),a.ValidationResultStatus=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return y(t,e),t.prototype.makeResult=function(e){return new a.ValidationResult(this,e)},t.prototype.shouldStart=function(){return this._value.shouldStart},t}(d),a.ValidationResultStatus.build(a.ValidationResultStatus,{VALID:{shouldStart:!0},WARNING:{shouldStart:!0},ERROR:{shouldStart:!1}})},59816:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(96588),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,{SELECTION:{methodNames:["onSelection","fireDefaultSelections","removeAllSelections","getSelectedAsStartValues","getSelectedRows","dontFireInitialSelection","doFireInitialSelection","refireSelectionWithoutFilters","getLastSelectionState","setExternalSelection","setExternalSelectionByDataSource"]},SEARCH:{methodNames:["onSearch"]},LENS_STATE:{methodNames:["updateLensState","resetLensState"]},SORT:{methodNames:["isQuickSortEnabled","onSort","getOriginalColumnSortInfos","isHeaderMenuColumnSortEnabled","onHeaderMenuColumnSort"]},PAGING:{methodNames:["getNextPage"]},INTERACTION:{methodNames:["onInteraction"]},CUSTOM_BULK_ACTION:{methodNames:["getBulkActionQuery"]},QUERY_BUILDER:{methodNames:["getQueryBuilderDelegate"]},RESULT_EMULATION:{methodNames:["setEmulatedResultMessageFlag","sendEmulatedResultMessage"]},ROW_LIMIT:{methodNames:["setRowLimit"]}})},30944:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h={}.hasOwnProperty,p=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};c=r(96486),a=r(8429).Z,l=r(35245).Z,d=r(64933),n=r(1713).Z,o=r(42333),s=r(37253).Z,i=r(82871),u=r(85808).Z,e.exports=function(e){function t(e,t,r,i){this._reportMetadata=e,this._valueLabelsMapping=t,this._conditionalFormattingRules=r,this._valueColorsMapping=i,this._parsingUtil=d.get()}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.columnLabel=function(e){return this.getColumnLabel(e.getName())},t.prototype.getColumnLabel=function(e,t){var r,i;return null==t&&(t=this._reportMetadata.getReportTypeMetadata()),t.getColumnName(e)||(null!=(r=this._reportMetadata.getCustomSummaryFormula()[e])?r.label:void 0)||(null!=(i=this._reportMetadata.getCustomDetailFormula()[e])?i.label:void 0)},t.prototype.getCategoryLabelFromColumn=function(e,t){return null==t&&(t=this._reportMetadata.getReportTypeMetadata()),t.retrieveCategoryLabelColumn(e)},t.prototype.formatDimension=function(e,t){return this._formatColumn(e,t)},t.prototype.formatMeasure=function(e,t,r){return null==r&&(r=!0),this._formatColumn(e,t)},t.prototype._formatColumn=function(e,t){var r,i,s,n,o;if(null==t)return a.getLabel("Null","display");if(c.isArray(t)){for(o=[],i=s=0,n=t.length;s<n;i=++s)r=t[i],o.push(this.formatAggregate(r,i,e));return o}return t},t.prototype.formatAggregate=function(e,t,r){var i,s,n,o,l,d,c;if(d=r.getName(),this._reportMetadata.getCustomSummaryFormula()[d])return e;if(this._reportMetadata.isMultiBlock()&&(l=this._parsingUtil.splitBlockColumnName(d).blockId,o=this._reportMetadata.getBlockById(l),this._reportMetadata.isBlockWithRecordCount(l)&&0===o.getDetailColumns(!0).indexOf(d))){if(0===t)return a.getLabel("Aggregate","count",e);t--}return s=this._reportMetadata.getAggregates(),c=function(){var e,t,r;for(r=[],e=0,t=s.length;e<t;e++)i=s[e],this._parsingUtil.isAggregateForColumn(i,d)&&r.push(i);return r}.call(this),(n=this._parsingUtil.getAggregateType(c[t]))?n===u.SUM?e:n===u.UNIQUE?a.getLabel("reportBuilder","uniqueAggregate",e):a.getLabel("Aggregate",n.getAggregateLabelKey(),e):void 0},t.prototype.formatAggregateShort=function(e){var t,r,i;if(this._parsingUtil.isRowCount(e))return a.getLabel("reportBuilder","count");switch(t=this._parsingUtil.getAggregateType(e),(r=this._parsingUtil.getAggregateColumnName(e))&&(i=this._reportMetadata.getReportExtendedMetadata().getColumnName(r)),t){case u.SUM:return a.getLabel("reportBuilder","sumWithField",i);case u.MIN:return a.getLabel("reportBuilder","minWithField",i);case u.MAX:return a.getLabel("reportBuilder","maxWithField",i);case u.AVERAGE:return a.getLabel("reportBuilder","avgWithField",i);case u.MEDIAN:return a.getLabel("reportBuilder","medianWithField",i)}},t.prototype.formatMeasureName=function(e){var t,r;return t=e.getName(),null!=(r=this.getColumnLabel(t))?r:this.getMeasureLabel(t)},t.prototype.getMeasureLabel=function(e){return this._reportMetadata.getReportExtendedMetadata().getMeasureLabel(e)},t.prototype.getMeasureFormat=function(e){},t.prototype.getValueLabels=function(e){var t;return null!=(t=this._valueLabelsMapping)?t[e.getName()]:void 0},t.prototype.getValueColors=function(e){var t;return null!=(t=this._valueColorsMapping)?t[e.getName()]:void 0},t.prototype.hasRecordActions=function(e){return!1},t.prototype.hasOpenSalesforceRecordActionEnabled=function(e){return!1},t.prototype.getExtendedMetadata=function(){},t.prototype._getFormulaKeys=function(){var e,t;for(e in t=[],this._reportMetadata.getCustomSummaryFormula())t.push(e);return t},t.prototype.isNumericColumn=function(e){return this._reportMetadata.getReportTypeMetadata().isColumnNumeric(e)||p.call(this._getFormulaKeys(),e)>=0||e===d.ROW_COUNT},t.prototype._getConditionalFormattingRules=function(){return this._conditionalFormattingRules},t.prototype.getCategoricalConditionalFormattingRuleCollection=function(e,t){var r,a,l,u,d,c;return(r=null!=(c=this._valueColorsMapping)?c[e]:void 0)?(d=function(){var e;for(u in e=[],r)a=r[u],e.push({value:u,formatValue:a});return e}(),l=[{field:e,conditionalFormatting:i.make({fieldName:e,referenceField:e,property:s.CHART_COLOR,type:o.CATEGORIES,values:d}).getRuleJson()}],new n(l)):new n([])},t}(l)},74577:(e,t,r)=>{var i,s,n,o,a,l=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};a=r(96486),n=r(90877).Z,o=r(1611).Z,i=r(99934).Z,r(67527),e.exports=s={isEqual:function(e,t){return a.isEqual(this._clone(e),this._clone(t))},_clone:function(e){var t,r,i;for(r in t={},e)null!=(i=e[r])&&i.length&&(t[r]=i);return t},convertColumnMap:function(e,t,r){var i,s,o;if(null!=e&&null==e.getParameter("columnMap"))return o=t.getMetadata(),s=t.getFormatter(),i=e.getParameter("columns"),a.isEmpty(i)||(o=new n(o,i)),(null!=r?r.getDefinition():void 0).buildColumnMap(e,o,s)},cleanse:function(e,t){var r,i;if(null!=e){for(r in i={},e)e[r],i[r]=s.getColumnNames(e,r,t);return i}},getColumnNames:function(e,t,r){var i,s,n,o,a;if(i=null!=e&&null!=t&&e[t]||[],n=[],null!=r){for(o=0,a=i.length;o<a;o++)s=i[o],n=n.concat(r.getFilteredColumnNames(s));return n}return i},getAllColumnNames:function(e,t){var r,i,s;if(null==e)return[];for(i in r=[],e)null!=(s=e[i])&&(r=r.concat(s));return r=a.uniq(r),null!=t?t.getColumnNames().filter((function(e){return l.call(r,e)>=0})):r},getAllMeasureColumnNames:function(e,t){return s.getAllColumnNames(e).filter((function(e){var r;return(null!=(r=t.getColumn(e))?r.getType():void 0)===o.MEASURE}))},getSectionName:function(e,t){var r,i;for(i in e)if(r=e[i],Array.isArray(r)&&r.includes(t))return i;throw new Error("Unable to find section for "+t)},addColumn:function(e,t,r,i){var n;return n=s.getColumnNames(e,r),null==e[r]&&(e[r]=[]),null==i&&(i=n.length),e[r].splice(i,0,t),e},removeColumns:function(e,t,r){var i,n,o,a,l;for(n=s.getColumnNames(e,r),a=0,l=t.length;a<l;a++)i=t[a],(o=n.indexOf(i))>-1&&n.splice(o,1);return e},moveColumn:function(e,t,r,i,s,n){var o,a,l,u;return{},o=null,a=null,null!=s&&((o=null!=(l=e[s])?l:[]).splice(r,1),e[s]=o),null!=n&&((a=null!=(u=e[n])?u:[]).splice(i,0,t),e[n]=a),e},swapColumn:function(e,t,r,i,s,n,o){var a,l,u,d;return{},a=null,l=null,null!=n&&((a=null!=(u=e[n])?u:[]).splice(i,1,r),e[n]=a),null!=o&&((l=null!=(d=e[o])?d:[]).splice(s,1,t),e[o]=l),e},editColumn:function(e,t,r,i){var n,o;return(o=(n=s.getColumnNames(e,i)).indexOf(t))>-1&&(n[o]=r),e},isValid:function(e,t){return!!t&&s.getAllColumnNames(e).every((function(e){return t.hasColumn(e)}))},isValidForColumnMap:function(e,t,r){var i,s;return i=this._buildColumnTypeMap(r),e.every((s=this,function(e){var r,n,o;return r=null!=(o=t[e.getName()])?o:[],!!s._isValidForConstraint(e.getMinItems(),e.getMaxItems(),r.length)&&(n=e.getColumnType(),r.every((function(e){return s._typeMatch(n,i[e])})))}))},_typeMatch:function(e,t){return e===i.DIMENSION?t===i.DIMENSION||t===i.TIME:t===e},_buildColumnTypeMap:function(e){var t,r,s,n,o,a,l,u,d,c,h,p,g;for(null==e&&(e={}),r=e.dimensions,s=e.measures,n=e.times,t={},o=0,u=(h=r||[]).length;o<u;o++)t[h[o]]=i.DIMENSION;for(a=0,d=(p=n||[]).length;a<d;a++)t[p[a]]=i.TIME;for(l=0,c=(g=s||[]).length;l<c;l++)t[g[l]]=i.MEASURE;return t},getConstraints:function(e){var t,r,n,o,l,u;return r=(l=a.partition(e,(function(e){return e.getColumnType()===i.MEASURE})))[0],t=l[1],o=(u=a.partition(t,(function(e){return e.getColumnType()===i.TIME})))[0],n=u[1],{measure:s.getSectionsConstraint(r),time:s.getSectionsConstraint(o),dimension:s.getSectionsConstraint(n)}},getSectionsConstraint:function(e){var t,r,i,s,n;return null==e&&(e=[]),r=(n=a.partition(e,(function(e){return e.allowsDuplicate()})))[0],s=n[1],t=r.reduce((function(e,t){return e[0]=Math.max(e[0],t.getMinItems()),e[1]+=t.getMaxItems(),e}),[0,0]),i=s.reduce((function(e,t){return e[0]+=t.getMinItems(),e[1]+=t.getMaxItems(),e}),[0,0]),[t[0]+i[0],t[1]+i[1]]},isValidForSections:function(e,t,r,i){var n,o,a,l;return o=(l=s.getConstraints(e)).measure,a=l.time,n=l.dimension,!(null!=r&&null!=o&&!s._isValidForConstraint(o[0],o[1],r))&&(!!(!i||null==a||s._isValidForConstraint(a[0],a[1],i))&&(null==t||null==n||s._isValidForConstraint(n[0],n[1],t)))},_isValidForConstraint:function(e,t,r){return r>=e&&r<=t}}},44368:(e,t,r)=>{var i,s,n,o,a,l,u;u=r(96486),n=r(8429).Z,o=r(8644),s=r(81693).Z,i=r(62133),l=r(72713),a=r(40321).Z,r(46194).Z,e.exports={formatOperatorAndValue:function(e,t){var r,o,a,d,c,h,p;if(r=e[0],d=e[1],o=e[2],null==t)return Array.isArray(d)?d.join(", "):d;if(null!=d&&(Array.isArray(d)||(d=[d]),t.isDateTimeType(r)||(d=d.map((function(e){return l.isCompoundDim(e)?l.compoundDimToCompoundStr(e):e})))),d=null!=d?d.map((function(e){return""!==e?e:n.getLabel("InsightsSelector","null_dimension_value")})):void 0,(h=t.isStringType(r)||l.isCompoundStr(r)||this._isCompoundDim(r))&&null==o&&(o=s.IN.code),o=s.fromCode(o),(null==d||0===d.length)&&o!==s.IS_NULL&&o!==s.IS_NOT_NULL)return n.getLabel("FilterOperatorValueDisplayLabel","noValue");if(o===s.IS_NULL)return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorIsNull");if(o===s.IS_NOT_NULL)return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorIsNotNull");if(o.isRange()&&i.isAggregate(r,t))switch((p=this._getFormattedRangeValue(t,r,d)).length){case 2:return p[0]+" "+s.BETWEEN.getLabel()+" "+p[1];case 0:return n.getLabel("FilterOperatorValueDisplayLabel","noValue");default:return o.getLabel()+" "+p[0]}if(h)switch(o){case s.IN:return(c=function(){var e,s,o;for(o=[],e=0,s=d.length;e<s;e++)(a=d[e])?""!==a?o.push(i.fullKeyText(t,r,a)):o.push(n.getLabel("FilterOperatorValueDisplayLabel","emptyStringValue")):o.push(i.fullKeyText(t,r,String(a)));return o}()).join(", ");case s.NOT_IN:return c=function(){var e,s,o;for(o=[],e=0,s=d.length;e<s;e++)(a=d[e])?""!==a?o.push(i.fullKeyText(t,r,a)):o.push(n.getLabel("FilterOperatorValueDisplayLabel","emptyStringValue")):o.push(i.fullKeyText(t,r,String(a)));return o}(),n.getLabel("FilterOperatorValueDisplayLabel","dimensionOperatorNotIn",c.join(", "));case s.MATCHES:return n.getLabel("FilterOperatorValueDisplayLabel","dimensionOperatorContains",d);case s.STARTS_WITH:return n.getLabel("FilterOperatorValueDisplayLabel","dimensionOperatorStartsWith",d)}else{if(o.isRange()&&!(p=this._getFormattedRangeValue(t,r,d)).length)return n.getLabel("FilterOperatorValueDisplayLabel","noValue");if(t.isNumberType(r)||i.isAggregate(r,t))switch(o){case s.BETWEEN:return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorBetween",p[0],p[1]);case s.GREATER:return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorGreater",p[0]);case s.GREATER_OR_EQUALS:return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorGreaterOrEqual",p[0]);case s.LESS:return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorLess",p[0]);case s.LESS_OR_EQUALS:return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorLessOrEqual",p[0]);case s.EQUALS:return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorEquals",p[0]);case s.NOT_EQUALS:return n.getLabel("FilterOperatorValueDisplayLabel","measureOperatorNotEquals",p[0])}else if(t.isDateTimeType(r))switch(o){case s.BETWEEN:return u.isEqual(p[0],p[1])?p[0]:d[0][0]?d[0][1]?n.getLabel("FilterOperatorValueDisplayLabel","dateOperatorBetween",p[0],p[1]):n.getLabel("FilterOperatorValueDisplayLabel","dateOperatorGreaterOrEqual",p[0]):n.getLabel("FilterOperatorValueDisplayLabel","dateOperatorLessOrEqual",p[0]);case s.IN:return(c=function(){var e,s,n;for(n=[],e=0,s=d.length;e<s;e++)a=d[e],n.push(i.fullKeyText(t,r,a));return n}()).join(", ");case s.GREATER_OR_EQUALS:return n.getLabel("FilterOperatorValueDisplayLabel","dateOperatorGreaterOrEqual",p[0]);case s.LESS_OR_EQUALS:return n.getLabel("FilterOperatorValueDisplayLabel","dateOperatorLessOrEqual",p[0])}}},formatFilterField:function(e,t){var r,s,o,a,d;return null==t?Array.isArray(e)?e.join(" - "):e:function(){var c,h;if(Array.isArray(e)){if(null!=(s=t.getDateTimeFieldGrain(e)))return s.getLabel();if(i.isAggregate(e,t))return i.fullAggFctAndMeasureText(t,e);for(a=[],c=0,h=e.length;c<h;c++)r=e[c],Array.isArray(r)?a.push(r):a=a.concat(l.compoundStrToCompoundDim(r));return null!=(d=t.getDateTimeFieldGrain(u.last(a)))?d.getDateTimeField().getLabel()+" ("+n.getLabel("InsightsDateSelector",d.getGrainName()+"_compound")+")":(o=function(){var e,i,s;for(s=[],e=0,i=a.length;e<i;e++)r=a[e],s.push(t.getFieldLabel(r));return s}(),l.formatForDisplay(o))}return i.fullDimensionOrMeasureText(t,e)}()},_getFormattedRangeValue:function(e,t,r){var i,s,n,o,a,l;if(n=[],null!=r[0])for(o=0,a=(l=r[0]).length;o<a;o++)i=l[o],null!=(s=this._formatRangeValue(e,t,i))&&n.push(s);return n},_formatRangeValue:function(e,t,r){var s;if(null!=r)return s=u.isArray(t)?t[1]:t,e.isNumberType(t)?a.getMeasureFormatter(e,s)(r):i.isAggregate(t,e)?a.getMeasureFormatter(e,t[0])(r):Array.isArray(r)?i.getDateLabel.apply(i,r):o.formatDateInUtc(new Date(r),o.DATE_SHORT)},_isCompoundDim:function(e){var t,r,i;if(!u.isArray(e))return!1;for(r=0,i=e.length;r<i;r++)if(t=e[r],!u.isString(t)&&!Array.isArray(t))return!1;return!0}}},62816:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L,M,N,O,P,x,Z,F=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};x=r(96486),Z=r(90554),N=Z.deepExtend,M=Z.deepDefaults,O=Z.deleteNullValues,y=r(8429).Z,r(61506).Z,v=r(44110).Z,I=r(64933),R=r(34533).Z,r(21891).Z,p=r(19422),c=r(5118),T=r(28026),D=r(29429).Z,i=r(99203).Z,s=r(42441).Z,n=r(89231).Z,o=r(12692).Z,r(61331).Z,A=r(60807).Z,L=r(91069).Z,a=r(44801).Z,l=r(2629).Z,u=r(56076).Z,d=r(36829).Z,h=r(90143).Z,g=r(40266).Z,m=r(43186).Z,_=r(75210).Z,f=r(87783).Z,b=r(81146).Z,C=r(50061).Z,E=r(90946).Z,S=r(85205).Z,P=r(91874).Z,w=r(84317).Z,e.exports=function(){function e(){this._colorService=d(),this._reportResultTransformService=v(),this._legacyEclairNG=g(),this._optionalFieldControl=b(),this._axisOrchestrator=s(),this._buildColorSelector=A(),this._baseInput=n(this._optionalFieldControl),this._referenceLineHelper=P(this._buildColorSelector),this._picklistColorService=E(this._reportResultTransformService),this._buildPalettePreview=L(),this._axisInput=i(this._baseInput,this._referenceLineHelper,this._buildPalettePreview,this._buildColorSelector,this._reportResultTransformService,this._picklistColorService),this._booleanInput=o(this._baseInput),this._colorInput=u(this._baseInput,this._buildColorSelector),this._enumInput=m(this._baseInput),this._groupInput=_(this._baseInput),this._integerInput=f(this._baseInput),this._orInput=C(this._baseInput),this._rangeInput=S(this._baseInput,this._buildColorSelector),this._textInput=w(this._baseInput),this._chartSerializationService=a(this._reportResultTransformService,this._picklistColorService,this._colorService),this._configHelpers=h(null,this._picklistColorService),this._chartService=l(this._configHelpers,this._picklistColorService)}return e.get=function(){return null!=this._instance?this._instance:this._instance=new e},e.CHARTS_WITH_DUPE_MEASURES=["sfdc-lightning/charts/scatter.js"],e.prototype._getReportChartType=function(e){return T.getEnumByCode(e.chartType)},e.prototype.generateDashboardChartConfig=function(e,t){var r,i,s,n,o,a,l,u;if(!x.isEmpty(e)){switch(r={visualizationType:(u=(a=this._getReportChartType(e)).getDashboardChartType(e)).getCode(),title:{label:e.title||"",subtitleLabel:"",align:"center"},theme:"wave",_overridePalette:this._generateLightningPalette(e),_sortColor:!1,legend:{position:this._normalizeLegend(e.legendPosition),showHeader:!!e.legendPosition,show:!!e.legendPosition,inside:!1,sorting:{order:"asc"}},padding:24,showPercentage:!!e.showChartPercentages,valueType:e.showChartValues?"compactNumber":"none",centerValueType:e.showChartTotal?"number":"none",hasCustomPlots:!1,applyConditionalFormatting:!1,showPoints:a===T.LINEGROUPED},n=this._buildMeasureAxis(e,0),o=this._buildMeasureAxis(e,1),u){case p.SCATTER:return x.extend(r,{x:n,y:o});case p.FUNNEL:r.stemSegments=0}return a.hasCustomPlots()&&e.summaries.length>1?(r.hasCustomPlots=!0,r.plots=function(){var t,r,i,n;for(i=e.summaries,n=[],s=t=0,r=i.length;t<r;s=++t)l=i[s],n.push({column:[l],mark:"Line"===e.summaryVisualizationTypes[s]?"line":"bar",color:e.summaryColors[s]});return n}(),e.groupings.length>1?(r._color={column:[e.groupings[1]]},delete r.plots[0].color):t&&(r._color=null)):t&&(r.plots=null,r._color=null),x.extend(r,{autoFitMode:"keepLabels",axisMode:e.summaryAxisLocations[0]===e.summaryAxisLocations[1]?"sync":"dual",normalize:a.shouldNormalize()}),null!=n&&(r.measureAxis1=n),null!=o&&(r.measureAxis2=o),i=u.getDefinition().getDefaultParameters(),M(r,i),r}},e.prototype._buildMeasureAxis=function(e,t){var r,i;if(r=null!=(i=e.referenceLineValues)?i[t]:void 0)return{referenceLines:[{value:r,color:e.referenceLineColors[t]}]}},e.prototype._generateLightningPalette=function(e){var t,r,i,s,n;return null!=e.summaryColors&&this._getReportChartType(e).hasCustomSummaryColor()&&(t=function(){var t,r,s,n;for(n=[],t=0,r=(s=e.summaryColors).length;t<r;t++)null!=(i=s[t])&&n.push(i);return n}()),x.isEmpty(t)?(r=e.groupingColorPalette||"DEFAULT",null!=(s=this.getPalettes())&&null!=(n=s.find((function(e){return e.id===r})))?n.colors:void 0):t},e.prototype.generateEclairChartConfig=function(e,t){var r;return(r=this._chartSerializationService.convertChartMetadataToConfig(e.chart,t,this.getColors(),this.getSecondaryColors(),this.getPalettes()[0],this.getChartGeometry(e),!0)).config&&delete r.config.extraMeasure,r},e.prototype.generateSuggestedEclairChartConfig=function(e,t,r,i,s,n){var o,a,l,u,d,c,h;return h=null,o={dimensions:null!=e?e.dimensions.slice(0,1):void 0,measures:null!=e?e.measures.slice(0,1):void 0},s&&s.isCalculatedInsight()&&this.isOnlyNonAggregatableMeasures(n,s)&&(o.dimensions=null!=e?e.dimensions:void 0),a=this._chartService,l=o.dimensions,u=o.measures,d=null!=l?l.length:void 0,c=null!=u?u.length:void 0,a.getLightningChartWhitelist(this._legacyEclairNG,o,"").some((function(e){var s;if((s=a.findSuggestedConfig(e,null,null,d,c,l,u,t,r,i))&&!h)return s.config.extraMeasure&&delete s.config.extraMeasure,h=s})),h},e.prototype.getChartGeometry=function(e){var t;return null!=(t=this._axes)?t:e.chart.groupings},e.prototype.resetCachedValues=function(){return this._axes=null},e.prototype.getColors=function(){return c.getColors(y)},e.prototype.getSecondaryColors=function(){return c.getSecondaryColors(y)},e.prototype.getPalettes=function(){return c.getPalettes(y)},e.prototype._normalizeLegend=function(e){return null==e||"Right"===e?"right-top":"bottom-center"},e.prototype.getLightningChartWhitelist=function(e,t,r){return this._chartService.getLightningChartWhitelist(this._legacyEclairNG,e,t,r)},e.prototype.getOrderedAxesFromMetadata=function(e,t,r){var i,s;return i=this._reportResultTransformService.getOrderedAxesFromMetadata(e,t),r&&(x.isEmpty(e.chart)?i=this._deleteNonAggregatableMeasures(i,1,new R(r),e):(s=new R(r),i=this._deleteNonAggregatableMeasures(i,e.chart.groupings.length,s,e))),i},e.prototype._deleteNonAggregatableMeasures=function(e,t,r,i){var s,n,o,a,l,u,d,c;if(!r.isCalculatedInsight()||this.isOnlyNonAggregatableMeasures(i,r))return e;if(r.getAvailableCIDimensionNames().length!==t||t>2){for(a=[],l=r.getAvailableCIMeasures("NONAGGREGATABLE"),u=0,d=(c=e.measures).length;u<d;u++)o=c[u],n=(s=I.get().getAggregateColumnName(o.column)).indexOf(this._reportResultTransformService.VALUE_SUFFIX),-1===l.indexOf(s.substring(0,n))&&a.push(o);e.measures=a}return e},e.prototype.isOnlyNonAggregatableMeasures=function(e,t){var r;return 0===(r=t.getAvailableCIMeasures("AGGREGATABLE")).length||e.detailColumns&&!e.detailColumns.some((function(e){return F.call(r,e)>=0}))},e.prototype.updateChartTypeDimensions=function(e,t,r){return r.isCalculatedInsight()&&this.isOnlyNonAggregatableMeasures(t,r)?e.map((function(e){return e.metadata.config=e.metadata.config.map((function(e){return"DIMENSION"===e.type.toUpperCase()&&(e.min=e.max),e})),e})):e},e.prototype.disableChartTypesCIReports=function(e,t,r){var i,s,n,o,a,l,u;if(!r.isCalculatedInsight())return e;for(s=["sfdc-lightning/charts/metric.js","sfdc-lightning/charts/gauge.js","sfdc/charts/flexTable.js"],n=["sfdc-lightning/charts/donut.js","sfdc-lightning/charts/funnel.js"],this.isOnlyNonAggregatableMeasures(t,r)&&r.getAvailableCIDimensionNames().length>1&&(s=s.concat(n)),o=0,a=e.length;o<a;o++)l=(i=e[o]).script._path,(F.call(s,l)>=0||(u=i.script.path(),F.call(s,u)>=0))&&(i.enabled=!1);return e},e.prototype.getBuildConfigLib=function(){return D(this._baseInput,this._axisInput,this._colorInput,this._integerInput,this._rangeInput,this._textInput,this._booleanInput,this._enumInput,this._groupInput,this._orInput,this._axisOrchestrator)},e.prototype.getConfigHelpers=function(){return this._configHelpers},e.prototype.getChartSerializationService=function(){return this._chartSerializationService},e.prototype.setWidgetParams=function(e,t){var r;if(!x.isEmpty(e))return r=this.generateDashboardChartConfig(e,!0),N(t,r),this._removeReferenceLines(t,r),O(t)},e.prototype._removeReferenceLines=function(e,t){if(null!=t.measureAxis1&&null==t.measureAxis1.referenceLines&&(e.measureAxis1.referenceLines=[]),null!=t.measureAxis2&&null==t.measureAxis2.referenceLines)return e.measureAxis2.referenceLines=[]},e.prototype.updateChartGroupings=function(e,t){var r,i,s;return r=function(){var e,r,n;for(n=[],s=e=0,r=t.length;e<r;s=++e)i=t[s],n.push(i.name);return n}(),this._getReportChartType(e).updateIfGroupingNotAvailable(e,r)},e.prototype.updateChartSummaries=function(e,t){return this._getReportChartType(e).updateIfMeasureNotAvailable(e,t)},e.prototype.mapConfigsToNewDefinition=function(e,t,r,i){return this._configHelpers.mapConfigsToNewDefinition(this._legacyEclairNG,e,t,r,i)},e}()},5118:e=>{e.exports.getPalettes=function(e,t){var r,i,s;if(s=[{label:e.getLabel("ColorPalettes","default"),id:"DEFAULT",colors:["#00A1E0","#16325C","#76DED9","#08A69E","#E2CE7D","#E69F00","#C23934","#FFB75D","#60B17D","#00716B","#94E3B1","#009E73","#93C9F8","#3A93BA","#0070D2","#ABDCF4","#8073F7","#7B399C","#CC79A7","#E2B1FA","#AF5CD8","#C9CED8","#98A1AE","#656F7E","#000000"]},{label:e.getLabel("ColorPalettes","gray"),id:"GRAY",colors:["#000000","#303030","#454649","#595959","#686A6D","#8B8D92","#AEB1B7","#BEC0C5","#CDD0D3","#DEDFE2","#E5E5E6","#F2F2F2"]},{label:e.getLabel("ColorPalettes","colorSafe"),id:"COLOR_SAFE",colors:["#FF800E","#006BA4","#ABABAB","#595959","#5F9CD1","#C85200","#A2C8EC","#898989","#FFBC40","#CFCFCF","#00707A","#FFB4C0"]}],t){for(i in t)r=t[i],s.push({id:i,colorMap:r});s.hasPicklistColors=Object.keys(t).length>0}return s},e.exports.getColors=function(t){return e.exports.getPalettes(t)[0].colors.map((function(e){return{color:e}}))},e.exports.getSecondaryColors=function(t){return e.exports.getColors(t).slice(1)}},21922:(e,t,r)=>{var i,s,n,o,a,l,u;u=r(96486),l=r(90554).deepCopy,r(29946),s=r(88912),n=r(67883),o=r(64933),a=r(44426),i=r(59150).Z,e.exports=function(){function e(){}return e.get=function(){return null!=this._instance?this._instance:this._instance=new e},e.prototype.mixReportMetadata=function(e,t,r){var i,s,a,d,c;return null==t&&(t=!0),null==r&&(r=!0),c=(d=e.getParameter("reportMetadata")).reportMetadata,r||(c=l(c)),c.name=e.getDashboardLabel(),c.groupingsDown=this._getGroupingDownColumns(e),c.groupingsAcross=this._getGroupingAcrossColumns(e),c.detailColumns=this._getDetailColumns(e),c.aggregates=this._getMeasures(e),c.customSummaryFormula=this._getCustomSummaryFormula(e),c.customDetailFormula=this._getCustomDetailFormula(e),c.hasDetailRows=this._getShowDetails(e),c.showSubtotals=this._getShowSubtotals(e),c.showGrandTotal=this._getShowGrandTotal(e),c.currency=this._getCurrency(e),c.buckets=this._getBuckets(e),c.reportType=this._getReportType(e),c.historicalSnapshotDates=this._getHistoricalSnapshotDates(e),c.userOrHierarchyFilterId=this._getUserOrHierarchyFilterId(e),c.userOrHierarchyFilterName=this._getUserOrHierarchyFilterName(e),c.dataCategoryFilters=this._getDataCategoryFilters(e),c.blocks=this._getBlocks(e,c),c.blocks?c.reportFormat=n.MULTI_BLOCK.getCode():(a=!u.isEmpty(c.groupingsDown),s=!u.isEmpty(c.groupingsAcross),c.reportFormat=s&&a?n.MATRIX.getCode():a?n.SUMMARY.getCode():s?n.MATRIX.getCode():n.TABULAR.getCode()),c.chart=this._getChart(e),c.sortBy=this._getSortBy(e),this._appendReportFilters(e,c,t),this._addReportBooleanFilters(e,c,t),c.hasRecordCount=u.some(c.aggregates,o.get().isRowCount),c.presentationOptions=this._getReportPresentationOptions(e),(i=c).reportFormat===n.MULTI_BLOCK.getCode()&&(i=this._getMultiBlockService().unflattenMultiBlockMetadata(c),r&&this._isDefaultLens(e)&&this._rehydrateBlockMetadata(d,i)),i},e.prototype._getMultiBlockService=function(){return this._multiBlockService||(this._multiBlockService=i()),this._multiBlockService},e.prototype._getGroupingDownColumns=function(e){return this._getQuery(e).groupingDownColumns},e.prototype._getGroupingAcrossColumns=function(e){return this._getQuery(e).groupingAcrossColumns},e.prototype._getMeasures=function(e){return this._getQuery(e).measureColumns},e.prototype._getCustomSummaryFormula=function(e){return this._getQuery(e).customSummaryFormula},e.prototype._getCustomDetailFormula=function(e){return this._getQuery(e).customDetailFormula},e.prototype._getDetailColumns=function(e){return this._getQuery(e).detailColumns},e.prototype._getChart=function(e){if(e)return this._getQuery(e).chart},e.prototype._getSortBy=function(e){return this._getQuery(e).sortBy||[]},e.prototype._getQuery=function(e){return e.getQuery()},e.prototype._appendReportFilters=function(e,t,r){var i,n,o,a;n=this._getQuery(e).filters||[],i=this._getQuery(e).chartFilters||[],o=this._getQuery(e).linkedFilters||[],r&&(n=u.concat(n,i,o)),a=s.get().convertToApiFilters(n,t),e.getJson().numOfDynamicFiltersInAPI=a},e.prototype._addReportBooleanFilters=function(e,t,r){var i,s,o,a,l,u;if(o=this._getQuery(e).reportBooleanFilter,t.reportFormat!==n.MULTI_BLOCK.getCode())return t.reportBooleanFilter=this._getReportBooleanFilter(e,t.reportFilters.length,r,o);for(s=a=0,l=(u=t.blocks).length;a<l;s=++a)(i=u[s]).reportBooleanFilter=this._getReportBooleanFilter(e,i.reportFilters.length,!1,o[s]);return delete t.reportBooleanFilter},e.prototype._getReportBooleanFilter=function(e,t,r,i){var s,n,o,a,l,u;if(s=this._getQuery(e).chartFilters||[],o=this._getQuery(e).linkedFilters||[],null==i||!r||0===s.length&&0===o.length)return i;for(i="("+i+")",n=l=a=t-(s.length+o.length),u=t-1;a<=u?l<=u:l>=u;n=a<=u?++l:--l)i+=" AND "+(n+1);return i},e.prototype._getReportPresentationOptions=function(e){return this._getQuery(e).presentationOptions},e.prototype._getShowDetails=function(e){return this._getQuery(e).showDetails},e.prototype._getShowSubtotals=function(e){return this._getQuery(e).showSubtotals},e.prototype._getShowGrandTotal=function(e){return this._getQuery(e).showGrandTotal},e.prototype._getCurrency=function(e){return this._getQuery(e).currency},e.prototype._getBuckets=function(e){return this._getQuery(e).buckets||[]},e.prototype._getBlocks=function(e){var t,r,i,s,n;if(r=l(this._getQuery(e).blocks)){for(i=this._getMeasures(e),s=0,n=r.length;s<n;s++)(t=r[s]).hasRecordCount=-1!==i.indexOf(o.get().getBlockRowCountName(t.blockId));return r}},e.prototype._getReportType=function(e){return this._getQuery(e).reportType},e.prototype._getHistoricalSnapshotDates=function(e){return this._getQuery(e).historicalSnapshotDates},e.prototype._getUserOrHierarchyFilterId=function(e){return this._getQuery(e).userOrHierarchyFilterId},e.prototype._getUserOrHierarchyFilterName=function(e){return this._getQuery(e).userOrHierarchyFilterName},e.prototype._getDataCategoryFilters=function(e){return this._getQuery(e).dataCategoryFilters},e.prototype._isDefaultLens=function(e){return e.getId()===a.TABLE.getValue()},e.prototype._rehydrateBlockMetadata=function(e,t){var r,s;if(s=Object.keys(e.reportTypeMetadata.reportTypes||{}),r=t.blocks.map((function(e){return e.reportType.type})),u.isEqual(r,s))return e.reportMetadata=l(t),i().flattenMultiBlockMetadata(e)},e}()},90414:(e,t,r)=>{var i,s,n,o;o=r(96486),i=r(8429).Z,r(61506).Z,n=r(44110).Z,s=r(67883),e.exports=function(){function e(e,t,r){this._results=e,this._presentationOptions=t,null==r&&(r={}),this._errorCodeKey="errorCode",this._chartRows=[],this._flatRows=[],this._flatColumns=[],this._errorMessages=[],this._groupingValueLabelsMappings={},this._groupingValueColorsMappings={},this._reportTransformer=n(),this._transformerConfig={labels:{subtotal:i.getLabel("WaveTable","subtotal"),grandTotal:i.getLabel("WaveTable","grandtotal")},labelOnly:!0,valueOnly:!1,groupAggregatesByField:this._isTabularOrSummaryWithDetailsRow(),allowMultipleLabels:!0,presentationOptions:this._presentationOptions,includeEntityIds:!0},o.isEmpty(r)||(this._transformerConfig=o.assign(this._transformerConfig,r)),o.isEmpty(this._results.factMap)||this._flattenFactMapForTable()}return e.prototype.getChartRows=function(e,t){return this._processChartRows(e,t),this._chartRows},e.prototype._processChartRows=function(e,t){var r,s,n,a;if(null==e&&(e=!0),null==t&&(t=!0),(a=this._results.reportMetadata)&&!o.isEmpty(a.chart))return n=(r=a.chart).summaries,this._reportTransformer.setConfig({}),s=r.groupings,this._chartRows=this._reportTransformer.convertToEclairRows(this._results,s.length,n,2e3,this._isCumulativeChart(r)?this._generateCumulativeGrouping(s):null,t,!1,!0,!0),r.combineSmallGroups&&(this._chartRows=this._reportTransformer.combineSmallGroupsToOther(this._chartRows,s[0],n,i.getLabel("Report","Other"))),e?this._mergeValueLabels(this._chartRows,n,s):void 0},e.prototype._generateCumulativeGrouping=function(e){return e&&0!==e.length?1===e.length?"":e[e.length-1]:null},e.prototype._mergeValueLabels=function(e,t,r){var i,s,n,a,l,u,d,c,h,p,g,m;for(null==t&&(t=[]),null==r&&(r=[]),m=[],c=0,p=e.length;c<p;c++){for(d=e[c],h=0,g=t.length;h<g;h++)a=t[h],null!=d[a+this._reportTransformer.VALUE_SUFFIX]&&(d[a]=d[a+this._reportTransformer.VALUE_SUFFIX],this._deleteRowValueLabels(d,a,this._reportTransformer));m.push(function(){var e,t,a,c,h,p;for(p=[],a=0,c=r.length;a<c;a++)s=r[a],null!=d[s+this._reportTransformer.VALUE_SUFFIX]?(n=d[s+this._reportTransformer.VALUE_SUFFIX],d[s]=n,null==(e=this._groupingValueLabelsMappings)[s]&&(e[s]={}),this._groupingValueLabelsMappings[s][n]=d[s+this._reportTransformer.LABEL_SUFFIX],l=this._results.picklistColors,!o.isEmpty(l)&&l[s]&&(u=JSON.parse(d[s+this._reportTransformer.VALUE_SUFFIX]).groupValue,null==(t=this._groupingValueColorsMappings)[s]&&(t[s]={}),null!=(i=null!=(h=l[s][u])?h.color:void 0)&&(this._groupingValueColorsMappings[s][n]="#"+i)),p.push(this._deleteRowValueLabels(d,s,this._reportTransformer))):p.push(void 0);return p}.call(this))}return m},e.prototype._deleteRowValueLabels=function(e,t,r){return delete e[t+r.VALUE_SUFFIX],delete e[t+r.LABEL_SUFFIX]},e.prototype.getTableRows=function(){return this._flatRows},e.prototype.getTableColumns=function(){return this._flatColumns},e.prototype.getDetailsTableRows=function(e){return null==e&&(e={}),this._transformerConfig.groupAggregatesByField=!0,this._reportTransformer.flattenMatrixDetails(this._results,e.groupingDownValues,e.groupingAcrossValues).rows},e.prototype.getGroupingValueLabelsMappings=function(){return this._groupingValueLabelsMappings},e.prototype.getGroupingValueColorsMappings=function(){return this._groupingValueColorsMappings},e.prototype._flattenFactMapForTable=function(){var e;if(this._results.reportMetadata)return this._reportTransformer.setConfig(this._transformerConfig),e=this._reportTransformer.flattenTable(this._results),this._flatRows=e.rows,this._flatColumns=e.columns},e.prototype._isCumulativeChart=function(e){return!o.isEmpty(e)&&("Line Cumulative"===e.chartType||"Line Cumulative Grouped"===e.chartType)},e.prototype._isTabularOrSummaryWithDetailsRow=function(){var e;if(!(e=this._results.reportMetadata))return!1;switch(s.getEnumByValue(e.reportFormat)){case s.TABULAR:return!0;case s.SUMMARY:return e.hasDetailRows&&0!==e.detailColumns.length;case s.MULTI_BLOCK:return 0===e.groupingsDown.length||e.hasDetailRows&&0!==e.detailColumns.length;default:return!1}},e.prototype.getErrorMessages=function(){return this._errorMessages},e}()},56191:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(78978),e.exports=i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getClassName=function(){return this._value},t}(s),i.build(i,{SINGLE_LINE:"singleMode",COMPACT:"compactMode",FULL:"fullMode"})},30090:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(96486),r(62133),s=r(18948),i=r(86866).Z,e.exports=function(e){function t(){this._legacyConstraint=(new s).setMinGroupings(1).cannotHaveOtherWidgetsAttached(),this._newConstraint=(new s).setMinMeasures(2),t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._isValidForLens=function(e,t,r){var s,o;if(i.fromCode(e.getType()).getDefinition().hasLegacyRangeBehavior){if(!(s=this._legacyConstraint).isValidForLens.apply(s,arguments))return!1;if(null==t)return!1;if(null==r)return!1;if(!n.every(t.getGroupingColumnNames(),(function(e){return t.isDateTimeColumn(e)})))return!1}else if(!(o=this._newConstraint).isValidForLens.apply(o,arguments))return!1;return!0},t}(s)},59922:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C={}.hasOwnProperty;b=r(96486),f=b.extend,y=b.isEmpty,_=r(90554).deleteNullValues,r(1806),l=r(29655),i=r(37253).Z,o=r(93367).Z,a=r(73414).Z,p=r(18001).Z,u=r(86866).Z,h=r(76438),n=r(19422),m=r(18948),s=r(3475).Z,c=r(89769).Z,d=r(70210).Z,g=r(64271).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new h.Builder).setHotKey("C").setDefaultWidth(3).setDefaultHeight(l.NORMAL,3).setDefaultHeight(l.FINE,11).setMinHeight(l.FINE,3).setIcon("chart-thumb-vbar").setCanAnnotate(!0).setCanAddNotification(!0).setIsDataVisualization(!0).setCanShare(!0).setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)C.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDefaultSelectMode=function(e){return this._getChartType(e).getDefinition().getDefaultSelectMode()},t.prototype.getLensConstraint=function(){return new m},t.prototype.getSupportedConditionalFormattingStyles=function(){return[i.CHART_COLOR]},t.prototype.getPropertiesMutatorAfterQueryUpdate=function(e,t,r){var i,n;return null!=(n=t.getLensMetadata().getWidgetVisualizationParameters())&&r?new s(e.getId(),f(this.getDefaultParameters(t),n)):(i=f(this.getDefaultParameters(t,e,!y(e.getParameters())&&!e.hasLens()),e.getParameters()),null==n||e.hasLens()||(null==i.visualizationType&&(i.visualizationType=n.visualizationType),null==i.tooltip&&(i.tooltip=n.tooltip),y(n.columnMap)?y(n.columns)?(i.columns=void 0,i.columnMap=void 0):(i.columns=n.columns,i.columnMap=void 0):(i.columnMap=n.columnMap,i.columns=void 0)),new c(e.getId(),i))},t.prototype.getTitle=function(e){var t;return null!=e&&null!=(t=e.getParameter("title"))?t.label:void 0},t.prototype.resolveWidgetParams=function(e,t,r,i){return this._getChartType(t).getDefinition().resolveParams(e,r,i)},t.prototype.constructFromResolvedParams=function(e){return n.getEnumByCode(e.parameters.visualizationType).getDefinition().constructFromResolvedParams(e)},t.prototype.getDynamicReferences=function(e){var t;return t=[],this._retrieveData(e,t),t},t.prototype.getDynamicReferencesToRemove=function(e){var t,r,i;return(null!=(t=e.tooltip)&&null!=(r=t.content)&&null!=(i=r.widget)?i.name:void 0)?[{widget:e.tooltip.content.widget.name,deleteStep:!0}]:[]},t.prototype.canAddSubscription=function(e){var t;return(t=n.getEnumByCode(e.getParameters().visualizationType))!==n.CHOROPLETH&&t!==n.BUBBLEMAP&&t!==n.GEOMAP},t.prototype.canHaveInteractions=function(){return!0},t.prototype.getInteractionEventTypes=function(){return[g.CLICK,g.SELECT]},t.prototype.getThemedStyle=function(e){return new d(e).getDefaultStyle()},t.prototype._retrieveData=function(e,t,r){var i,s,n,l,u,d,c;for(i in null==r&&(r=[]),c=[],e)n=e[i],r.push(i),n instanceof Object&&("dynamic"===n.type&&null!=(null!=(l=n.data)?l.step:void 0)&&null!=(null!=(u=n.data)?u.sourceType:void 0)?t.push(new o(n.data,r.slice())):"tooltip"===i?null!=(null!=(s=null!=(d=n.content)?d.widget:void 0)?s.name:void 0)&&t.push(new a(s.name,r.concat(["content","widget"]),p.LAZY_LOAD)):this._retrieveData(n,t,r)),c.push(r.pop());return c},t.prototype._getDefaultParameters=function(e,t){var r,i,s,o,a;return a=(null!=t?t.getLens():void 0)||(null!=e?e.getLensMetadata():void 0),s={visualizationType:(i=n.getEnumByCode((null!=t?t.getParameter("visualizationType"):void 0)||(null!=a?a.getVisualizationType():void 0))).getCode()},r=i.getDefinition(),f(s,r.getDefaultParameters()),o=a.getVisualizationOptions(),r.mergeWithLegacyOptions(o,s),s.showActionMenu=!0,i.isAvailableInExplorer()&&null!=a&&(s.exploreLink=u.fromCode(a.getType()).getDefinition().canExplore()),_(s)},t.prototype._getValidSelectModes=function(e){return this._getChartType(e).getDefinition().getValidSelectModes()},t.prototype._getSummaryDescription=function(e){return this._getChartType(e).getLabel()},t.prototype._getSummaryIconName=function(e){return this._getChartType(e).getIconName()},t.prototype._getChartType=function(e){return n.getEnumByCode(e.getParameter("visualizationType"))},t}(h)},61946:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;i=r(29655),o=r(98410),n=r(76438),s=r(70210).Z,a=r(64271).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new n.Builder).setHotKey("C").setDefaultWidth(3).setDefaultHeight(i.NORMAL,3).setDefaultHeight(i.FINE,11).setMinHeight(i.FINE,3).setHasStep(!1).setIcon("widget-container"))}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getThemedStyle=function(e){return new s(e).getDefaultStyle()},t.prototype._getDefaultParameters=function(e){return o.Property.getDefaults()},t.prototype.canHaveInteractions=function(){return!0},t.prototype.getInteractionEventTypes=function(){return[a.CLICK]},t}(n)},79973:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b={}.hasOwnProperty;y=r(96486),g=r(8429).Z,r(31550),s=r(1806),i=r(29655),_=r(1611).Z,c=r(16011),d=r(31835).Z,f=r(73612),l=r(76438),u=r(56191),a=r(70210).Z,h=r(88353),p=r(30090),n=r(86866).Z,r(21318).Z,o=r(68017).Z,m=r(70526),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new l.Builder).setHotKey("D").setDefaultWidth(3).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,4).setMinHeight(i.FINE,3).setViewModeMaxRows(i.NORMAL,u.SINGLE_LINE,1).setViewModeMaxRows(i.NORMAL,u.COMPACT,2).setViewModeMaxRows(i.FINE,u.SINGLE_LINE,4).setViewModeMaxRows(i.FINE,u.COMPACT,7).setIcon("date").setExclusiveLensUser(!0).setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)b.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getNewWidgetSelectedRowsAfterSelection=function(e,r){var i;return y.isEmpty(r)&&e.getParameter("relativeModeEnabled")&&!e.getParameter("absoluteModeEnabled")?(i=h.getWidgetDefaultRelativeRange(e),[{min:c.buildRelativeDateArray(i.getFromDate()),max:c.buildRelativeDateArray(i.getToDate())}]):t.__super__.getNewWidgetSelectedRowsAfterSelection.call(this,e,r)},t.prototype.getLensConstraint=function(){return new p},t.prototype._getDefaultParameters=function(e){var t,r,i,s;return s=!0,null!=(null!=e?e.hasValidLastResult():void 0)&&e.getLastResult().getQueryInfo().datasetMetadatas.length>0&&(t=e.getLastResult().getQueryInfo().datasetMetadatas[0],s=d.getDelegateFromAssetMetadata(t).supportsFiscal()),i={defaultFiscalMode:!1,calendarTypeSwitchingAllowed:s,absoluteModeEnabled:!0,relativeModeEnabled:!0,presetsEnabled:!0,customFilterPresets:[]},null!=(r=this._getDefaultTitle(e))&&(i.title=r),Object.assign(i,o.getDefaultSelectorWidgetsParameters(!1)),i},t.prototype.getDefaultWidgetStyle=function(){return o.getFilterStyleWidgetDefaults()},t.prototype.getThemedStyle=function(e){return new a(e).getDefaultStyle()},t.prototype._getValidSelectModes=function(){return[s.SelectMode.RANGE]},t.prototype._getDefaultTitle=function(e){var t,r;return(null!=e?e.hasValidLastResult():void 0)&&n.fromCode(e.getLensMetadata().getType()).getDefinition().hasLegacyRangeBehavior?(r=e.getLastResult(),t=m.getDateFieldName(r.getQueryInfo()),r.getFormatter().getFullDateFieldLabel(_.DATE.of(t,t))):g.getLabel("DateTimeWidget","defaultTitle")},t.prototype._getSummaryDescription=function(e,t){var r;return null!=(r=e.getParameter("title"))?r:this._getDefaultTitle(t)},t}(f)},95235:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(76438),i=r(29655),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setHasStep(!1).setDefaultWidth(4).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,3).setIsInternal(!0).setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(){return{}},t}(s)},35214:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;i=r(29655),r(40651).Z,s=r(76438),n=r(18948),e.exports=function(e){function t(e){t.__super__.constructor.call(this,(new s.Builder).setHotKey("G").setDefaultWidth(2).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,3).setIcon("filter").setIsInternal(!0).setIsDataVisualization(!0).setPlaceholderClickable(!1).setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getPropertiesFormDefinition=function(e){return e.widgetMetadata,e.runtimeLens,e.widgetViewMode,e.imageManagerDelegate,[]},t.prototype._getDefaultParameters=function(){return{}},t.prototype.getLensConstraint=function(){return(new n).setMaxGroupings(0).setMaxMeasures(1).setMinFilters(1)},t}(s)},42196:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;r(96486),i=r(29655),n=r(37724).Z,o=r(98410),s=r(76438),a=r(64271).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setHotKey("I").setDefaultWidth(2).setDefaultHeight(i.NORMAL,2).setDefaultHeight(i.FINE,8).setHasStep(!1).setIcon("widget-image").setPlaceholderClickable(!0))}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.resolveWidgetParams=function(e,t,r,i){var s,o,a,l,u,d;return(null!=(s=e.parameters.tooltip)&&null!=(o=s.content)?o.description:void 0)&&null!=(a=e.parameters.tooltip)&&null!=(l=a.content)&&(l.description=n.getResolvedWidgetParams(null!=(u=e.parameters.tooltip)&&null!=(d=u.content)?d.description:void 0,r,i)),e},t.prototype.getDynamicReferences=function(e,t){var r;return r=[],this._retrieveTooltipDynamicReferences(e,r,[],t),r},t.prototype.isPlaceholder=function(e,t){return null==t&&(t=!1),!t&&(null==(null!=e?e.getParameter("image"):void 0)&&null==(null!=e?e.getParameter("documentId"):void 0))},t.prototype.canHaveInteractions=function(){return!0},t.prototype.getInteractionEventTypes=function(){return[a.CLICK]},t.prototype._getDefaultParameters=function(){return o.Property.getDefaults()},t.prototype._getSummaryDescription=function(e){var t,r;return null!=(t=null!=(r=e.getParameter("image"))?r.name:void 0)?t:e.getParameter("documentId")},t.prototype._buildImageRepresentation=function(e,t){return{name:e,namespace:t}},t}(s)},4759:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty;i=r(31550),a=r(34809),l=r(8429).Z,u=r(5712).Z,s=r(29655),r(40651).Z,o=r(76438),n=r(70210).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new o.Builder).setHotKey("K").setDefaultWidth(2).setDefaultHeight(s.NORMAL,1).setDefaultHeight(s.FINE,3).setHasStep(!1).setIcon("share_link"))}return function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getUsedLensId=function(e){var t,r;if(e.getParameter("destinationType")===u.EXPLORE.getCode())return null!=(t=null!=(r=e.getParameter("destinationLink"))?r.name:void 0)?t:e.getParameter("destination")},t.prototype.getThemedStyle=function(e){return new n(e).getDefaultStyle()},t.prototype._getDefaultParameters=function(){return{destinationType:u.getDefaultValue().getCode(),includeState:!1,text:l.getLabel("DashboardLinkWidget","buttonTitle"),textColor:i.SKY.getHexCode(),textAlignment:a.CENTER.getCode(),fontSize:16}},t.prototype._getSummaryDescription=function(e){return e.getParameter("text")},t}(o)},29457:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g={}.hasOwnProperty;p=r(96486),r(8429).Z,r(31550),s=r(1806),i=r(29655),c=r(1611).Z,h=r(73612),a=r(76438),l=r(76950),u=r(56191),o=r(70210).Z,d=r(18948),r(21318).Z,n=r(68017).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new a.Builder).setHotKey("L").setDefaultWidth(2).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,4).setMinHeight(i.FINE,3).setViewModeMaxRows(i.NORMAL,u.SINGLE_LINE,1).setViewModeMaxRows(i.NORMAL,u.COMPACT,2).setViewModeMaxRows(i.FINE,u.SINGLE_LINE,4).setViewModeMaxRows(i.FINE,u.COMPACT,8).setShouldRenderWidgetOnNoData(!0).setIcon("view-list"))}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e){var t,r;return(null!=e?e.hasValidLastResult():void 0)?(r=null!=e?e.getLastResult().getMetadata().getColumns(c.DIMENSION):void 0,t={title:p.isEmpty(r)?void 0:r[0].getName(),compact:!1,exploreLink:!1},Object.assign(t,n.getDefaultSelectorWidgetsParameters())):{}},t.prototype.getDefaultWidgetStyle=function(){return n.getFilterStyleWidgetDefaults()},t.prototype._getDefaultProjectionParameters=function(e){var t,r;return t=null!=e?e.getLastResult().getMetadata().getColumns(c.MEASURE):void 0,r={},p.isEmpty(t)||(r.measureField=t[0].getName()),this._addWidgetProjectionDefaultParameters(r,e)},t.prototype.getLensConstraint=function(){return new d},t.prototype.getThemedStyle=function(e){return new o(e).getDefaultStyle()},t.prototype._getValidSelectModes=function(){return[s.SelectMode.SINGLE,s.SelectMode.MULTI,s.SelectMode.SINGLE_REQUIRED,s.SelectMode.MULTI_REQUIRED]},t.prototype._getSummaryDescription=function(e,t){var r;return null!=(r=e.getParameter("title"))?r:this._getDefaultParameters(t).title},t.prototype._addWidgetProjectionDefaultParameters=function(e,t){var r,i;return r=null!=(i=null!=t?t.getLastResult().getMetadata().getGroupingColumnNames():void 0)?i:[],!p.isEmpty(r)&&r.length>1&&(e.displayTemplate=l.buildCustomTemplate(r)),e},t}(h)},80226:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;i=r(29655),s=r(76438),n=r(56191),o=r(18948),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(3).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,3).setViewModeMaxRows(i.NORMAL,n.COMPACT,1).setViewModeMaxRows(i.FINE,n.COMPACT,3).setIsInternal(!0).setIcon("data-play").setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e){return{}},t.prototype.getLensConstraint=function(){return(new o).setIsInternal(!0)},t.prototype._getSummaryDescription=function(e){return"Mode Switcher"},t}(s)},37987:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(76438),i=r(29655),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setHasStep(!1).setDefaultWidth(4).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,3).setIsInternal(!0))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e,t){return{}},t}(s)},41245:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;i=r(31550),s=r(29655),o=r(76438),n=r(70210).Z,e.exports=function(e){function t(e){t.__super__.constructor.call(this,(new o.Builder).setDefaultWidth(12).setDefaultHeight(s.NORMAL,1).setDefaultHeight(s.FINE,2).setHasStep(!1).setIcon("widget-page-nav").setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getThemedStyle=function(e){return new n(e).getDefaultStyle()},t.prototype._getDefaultParameters=function(){return{fontSize:16,textColor:i.BLUE4.getHexCode(),tabCount:5,selectedTab:{textColor:i.SKY.getHexCode(),backgroundColor:i.WHITE.getHexCode(),borderEdges:["bottom"],borderColor:i.SKY.getHexCode(),borderWidth:2}}},t}(o)},30836:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g={}.hasOwnProperty;r(96486),i=r(31550),p=r(1611).Z,o=r(29655),s=r(37253).Z,n=r(42333),d=r(37724).Z,l=r(76438),u=r(56191),h=r(18948),a=r(70210).Z,c=r(64271).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new l.Builder).setHotKey("N").setDefaultWidth(2).setDefaultHeight(o.NORMAL,1).setDefaultHeight(o.FINE,3).setMinHeight(o.FINE,2).setViewModeMaxRows(o.NORMAL,u.SINGLE_LINE,1).setViewModeMaxRows(o.NORMAL,u.COMPACT,2).setViewModeMaxRows(o.FINE,u.SINGLE_LINE,4).setViewModeMaxRows(o.FINE,u.COMPACT,8).setIcon("widget-number").setCanAnnotate(!0).setIsDataVisualization(!0).setCanAddNotification(!0).setCanAddSubscription(!0).setCanShare(!0).setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.resolveWidgetParams=function(e,t,r,i){var s,n,o,a,l,u;return(null!=(s=e.parameters.tooltip)&&null!=(n=s.content)?n.description:void 0)&&null!=(o=e.parameters.tooltip)&&null!=(a=o.content)&&(a.description=d.getResolvedWidgetParams(null!=(l=e.parameters.tooltip)&&null!=(u=l.content)?u.description:void 0,r,i)),e},t.prototype.getDynamicReferences=function(e,t){var r;return r=[],this._retrieveTooltipDynamicReferences(e,r,[],t),r},t.prototype.getDynamicReferencesToRemove=function(e){var t,r,i;return(null!=(t=e.tooltip)?t.customizeTooltip:void 0)&&(null!=(r=e.tooltip.content)&&null!=(i=r.widget)?i.name:void 0)?[{widget:e.tooltip.content.widget.name,deleteStep:!0}]:[]},t.prototype.getUsedWidgetIds=function(e){var t,r,i;return(null!=(t=e.tooltip)?t.customizeTooltip:void 0)?[null!=(r=e.tooltip.content)&&null!=(i=r.widget)?i.name:void 0]:[]},t.prototype.getLensConstraint=function(){return(new h).setMinMeasures(1)},t.prototype.getSupportedConditionalFormattingStyles=function(){return[s.TEXT_COLOR,s.NUMBER_COLOR,s.BACKGROUND_COLOR,s.BORDER_COLOR]},t.prototype.getValidConditionalFormattingTypes=function(){return[n.SINGLE,n.MULTI,n.CATEGORIES,n.RAW]},t.prototype.getTitle=function(e){return null!=e?e.getParameter("title"):void 0},t.prototype.getThemedStyle=function(e){return new a(e).getDefaultStyle()},t.prototype.canHaveInteractions=function(){return!0},t.prototype.getInteractionEventTypes=function(){return[c.CLICK]},t.prototype._getDefaultParameters=function(e){return{title:this._getDefaultTitle(e),measureField:this._getDefaultMeasureField(e),textAlignment:"left",compact:!1,showActionMenu:!0,exploreLink:!0,titleColor:i.BLACK.getHexCode(),titleSize:16,numberColor:i.BLACK.getHexCode(),numberSize:16}},t.prototype._getDefaultProjectionParameters=function(e){var t;return null!=(t=this._getDefaultMeasureField(e))?{measureField:t}:{}},t.prototype._getDefaultMeasureField=function(e){var t,r;return null==e?null:null!=(t=null!=(r=e.getLastResult().getMetadata().getColumns(p.MEASURE))?r[0]:void 0)?t.getName():null},t.prototype._getDefaultTitle=function(e,t){var r,i;if((null!=e?e.hasValidLastResult():void 0)&&(i=e.getLastResult().getMetadata(),null!=t&&(r=i.getColumn(t)),null==r&&(r=i.getColumn(this._getDefaultMeasureField(e))),null!=r))return e.getLastResult().getFormatter().formatMeasureName(r)},t.prototype._getSummaryDescription=function(e,t){var r;return null!=(r=e.getParameter("title"))?r:this._getDefaultTitle(t,e.getParameter("measureField"))},t}(l)},22451:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;o=r(18948),i=r(29655),s=r(76438),n=r(56191),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(6).setDefaultHeight(i.NORMAL,3).setDefaultHeight(i.FINE,11).setViewModeMaxRows(i.NORMAL,n.COMPACT,3).setViewModeMaxRows(i.FINE,n.COMPACT,11).setIsInternal(!0).setIcon("data-play").setShouldRenderWidgetOnNoData(!0).setShouldRenderWidgetOnError(!0))}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e){return{}},t.prototype.getLensConstraint=function(){return(new o).setIsInternal(!0)},t.prototype._getSummaryDescription=function(e){return"Query Editor"},t}(s)},91989:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h={}.hasOwnProperty;r(31550),s=r(1806),i=r(29655),d=r(1611).Z,c=r(73612),a=r(76438),l=r(56191),o=r(70210).Z,u=r(18948),r(21318).Z,n=r(68017).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new a.Builder).setHotKey("R").setDefaultWidth(2).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,3).setMinHeight(i.FINE,3).setViewModeMaxRows(i.NORMAL,l.SINGLE_LINE,1).setViewModeMaxRows(i.NORMAL,l.COMPACT,2).setViewModeMaxRows(i.FINE,l.SINGLE_LINE,4).setViewModeMaxRows(i.FINE,l.COMPACT,8).setIcon("widget-range").setExclusiveLensUser(!0).setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getLensConstraint=function(){return(new u).setMaxGroupings(0).disallowCountStar().cannotHaveOtherWidgetsAttached()},t.prototype._getValidSelectModes=function(){return[s.SelectMode.RANGE]},t.prototype._getDefaultParameters=function(e){var t,r;return(null!=e?e.hasValidLastResult():void 0)?(r=n.getDefaultSelectorWidgetsParameters(),null!=(t=this._getDefaultTitle(null!=e?e.getLastResult():void 0))&&(r.title=t),r):{}},t.prototype.getDefaultWidgetStyle=function(){return n.getFilterStyleWidgetDefaults()},t.prototype.getThemedStyle=function(e){return new o(e).getDefaultStyle()},t.prototype._getSummaryDescription=function(e,t){var r;return null!=(r=e.getParameter("title"))?r:this._getDefaultTitle(null!=t?t.getLastResult():void 0)},t.prototype._getDefaultTitle=function(e){var t;if(null!=e&&0!==(t=e.getMetadata().getColumns(d.MEASURE)).length)return e.getFormatter().columnLabel(t[0])},t}(c)},54955:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;i=r(29655),s=r(76438),n=r(56191),r(18948),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(10).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,1).setViewModeMaxRows(i.NORMAL,n.COMPACT,1).setViewModeMaxRows(i.FINE,n.COMPACT,1).setIsInternal(!0).setShouldRenderWidgetOnNoData(!0).setIcon(""))}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e,t){return{}},t}(s)},34750:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;i=r(29655),s=r(76438),n=r(56191),r(18948),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(6).setDefaultHeight(i.NORMAL,3).setDefaultHeight(i.FINE,11).setViewModeMaxRows(i.NORMAL,n.COMPACT,3).setViewModeMaxRows(i.FINE,n.COMPACT,11).setIsInternal(!0).setIcon("").setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e){return{}},t.prototype.getValidSelectModes=function(){return[]},t}(s)},7561:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(29655),s=r(76438),r(56191),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(1).setDefaultHeight(i.NORMAL,18).setDefaultHeight(i.FINE,18).setShouldRenderWidgetOnNoData(!0).setIsInternal(!0).setIcon(""))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e,t){return{}},t}(s)},783:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(29655),s=r(76438),r(56191),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(6).setDefaultHeight(i.NORMAL,2).setDefaultHeight(i.FINE,2).setShouldRenderWidgetOnNoData(!0).setIsInternal(!0).setIcon(""))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e,t){return{}},t}(s)},20955:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(29655),s=r(76438),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(6).setDefaultHeight(i.NORMAL,2).setDefaultHeight(i.FINE,2).setShouldRenderWidgetOnNoData(!0).setIsInternal(!0).setIcon(""))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e,t){return{}},t}(s)},97168:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(29655),s=r(76438),r(56191),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(6).setDefaultHeight(i.NORMAL,2).setDefaultHeight(i.FINE,2).setShouldRenderWidgetOnNoData(!0).setIsInternal(!0).setIcon(""))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e,t){return{}},t}(s)},22855:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T={}.hasOwnProperty;S=r(96486),g=r(61162).Z,p=r(7905).Z,y=r(57244).Z,o=r(29655),m=r(63594),u=r(41089),a=r(1806),b=r(91023).Z,C=r(52405).Z,E=r(50308),s=r(37253).Z,n=r(42333),i=r(77955).Z,l=r(86866).Z,h=r(76438),f=r(18948),c=r(89769).Z,l=r(86866).Z,d=r(70210).Z,_=r(64271).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new h.Builder).setHotKey("O").setDefaultWidth(3).setDefaultHeight(o.NORMAL,4).setDefaultHeight(o.FINE,15).setMinHeight(o.FINE,3).setIcon("chart-thumb-valuestable").setCanAnnotate(!0).setIsDataVisualization(!0).setCanShare(!0).setCanAddNotification(!0))}return function(e,t){for(var r in t)T.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getDefaultColumnProperty=function(e,t){var r,i;switch(null==t&&(t=C.TEXT.code),r=new b({column:e,columnProperties:{type:t}}),i={},t){case C.TEXT.code:i.alignment=r.getAlignment().getName().toLowerCase();break;case C.IMAGE.code:i.alignment=r.getAlignment().getName().toLowerCase(),i.width=E.DEFAULT_IMAGE_WIDTH,i.height=E.DEFAULT_IMAGE_HEIGHT}return{type:t,parameters:i}},t.prototype.updateModePropertyData=function(e,t){return null==t&&(t=!0),e.mode===u.VARIABLE.getCode()?(e.fixedColumnWidth=void 0,t&&(e.minColumnWidth=40,e.maxColumnWidth=300)):e.mode===u.FIXED.getCode()?(e.minColumnWidth=void 0,e.maxColumnWidth=void 0,t&&(e.fixedColumnWidth=100)):e.mode===u.FIT_TO_CONTAINER.getCode()&&(e.minColumnWidth=void 0,e.maxColumnWidth=void 0,e.fixedColumnWidth=void 0),e},t.prototype.getPropertiesMutatorAfterQueryUpdate=function(e,t,r){var i,s,n;return n=null!=(s=t.getLensMetadata().getWidgetVisualizationParameters())&&r?S.extend(this.getDefaultParameters(t),t.getLensMetadata().getWidgetVisualizationParameters()):(i=S.extend(this.getDefaultParameters(t,null,!S.isEmpty(e.getParameters())&&!e.hasLens()),e.getParameters()),null!=s&&(S.isEmpty(s.columns)?null!=t.getLastResult().getQueryInfo().originalQuery.sources?i.columns=t.getLastResult().getMetadata().getColumnNames():i.columns=void 0:i.columns=s.columns),i),new c(e.getId(),this.updateModePropertyData(n,!1))},t.prototype.getLensConstraint=function(){return new f},t.prototype.getSupportedConditionalFormattingStyles=function(){return[s.TEXT_COLOR,s.BACKGROUND_COLOR]},t.prototype.getValidConditionalFormattingTypes=function(){return[n.SINGLE,n.MULTI,n.CATEGORIES,n.RAW]},t.prototype.getThemedStyle=function(e){return new d(e).getDefaultTableStyle()},t.prototype.canAddSubscription=function(){return y.has(y.USER_CAN_USE_SUBSCRIPTION_EMAILS)&&y.has(y.USER_CAN_USE_WAVE_TABULAR_DOWNLOAD)},t.prototype.canHaveInteractions=function(){return!0},t.prototype.getInteractionEventTypes=function(){return[_.CLICK,_.SELECT]},t.prototype._getDefaultParameters=function(e,t){var r,i,s,n,o,a,d;return o=new g,r={customBulkActions:[],showActionMenu:!0,mode:u.VARIABLE.getCode(),borderWidth:o.getValue(p.BORDER_WIDTH),borderColor:o.getValue(p.BORDER_COLOR),evenRowColor:o.getValue(p.EVEN_ROW_COLOR),oddRowColor:o.getValue(p.ODD_ROW_COLOR),innerMinorBorderColor:o.getValue(p.INNER_MINOR_BORDER_COLOR),innerMajorBorderColor:o.getValue(p.INNER_MAJOR_BORDER_COLOR),verticalPadding:o.getValue(p.VERTICAL_PADDING),numberOfLines:1,header:{backgroundColor:o.getValue(p.HEADER_BACKGROUND_COLOR),fontColor:o.getValue(p.HEADER_FONT_COLOR),fontSize:o.getValue(p.HEADER_FONT_SIZE),textWrap:o.getValue(p.TEXT_WRAP)},cell:{backgroundColor:o.getValue(p.BACKGROUND_COLOR),fontColor:o.getValue(p.FONT_COLOR),fontSize:o.getValue(p.FONT_SIZE),textWrap:o.getValue(p.TEXT_WRAP)},columns:[],columnProperties:{}},null!=t&&null!=t.getParameter("mode")||(r.minColumnWidth=40,r.maxColumnWidth=300),null==t||t.getDashboardMetadata().isNew()||(r.header.textWrap=!1,r.cell.textWrap=!1),null!=(i=null!=(a=null!=t?t.getLens():void 0)?a:null!=e?e.getLensMetadata():void 0)&&(s=i.getVisualizationType(),(null!=(n=i.getWidgetVisualizationParameter("pivoted"))&&!1===n||null!=s&&s!==m.PIVOT_TABLE.getCode())&&(r.totals=null==(d=i.getVisualizationOption("totals"))||d),null!=s&&s===m.VALUES_TABLE.getCode()?r.showRowIndexColumn=!0:i.getType()!==l.AGGREGATE.getCode()&&i.getType()!==l.AGGREGATE_WITH_NEW_BINDINGS.getCode()||(r.showRowIndexColumn=!1)),r},t.prototype._getDefaultProjectionParameters=function(e,t){var r,s,n,o;return s={},null==(r=null!=e?e.getLensMetadata():void 0)||(null!=e?e.getLastResult():void 0)instanceof i||(s.exploreLink=l.fromCode(r.getType()).getDefinition().canExplore(),(null!=e&&null!=(n=e.getLastResult())&&null!=(o=n.getMetadata())?o.getGroupings().length:void 0)>0&&(s.pivoted=null!=r.getWidgetVisualizationParameter("pivoted")?r.getWidgetVisualizationParameter("pivoted"):r.getVisualizationType()===m.PIVOT_TABLE.getCode())),s},t.prototype._getValidSelectModes=function(){return[a.SelectMode.NONE,a.SelectMode.SINGLE,a.SelectMode.SINGLE_REQUIRED,a.SelectMode.MULTI,a.SelectMode.MULTI_REQUIRED]},t}(h),e.exports.DEFAULT_NUMBER_OF_LINES=1},44315:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(29655),s=r(76438),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setHasStep(!1).setDefaultWidth(4).setDefaultHeight(i.NORMAL,1).setDefaultHeight(i.FINE,3).setIsInternal(!0))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e,t){return{}},t}(s)},82632:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m={}.hasOwnProperty;g=r(96486),s=r(31550),i=r(60626),o=r(1806),n=r(29655),h=r(1611).Z,p=r(73612),l=r(76438),d=r(56191),u=r(76950),c=r(18948),a=r(70210).Z,e.exports=function(e){function t(){t.__super__.constructor.call(this,(new l.Builder).setHotKey("U").setDefaultWidth(2).setDefaultHeight(n.NORMAL,1).setDefaultHeight(n.FINE,3).setMinHeight(n.FINE,2).setViewModeMaxRows(n.NORMAL,d.SINGLE_LINE,1).setViewModeMaxRows(n.FINE,d.SINGLE_LINE,3).setIcon("widget-toggle").setCanAnnotate(!0))}return function(e,t){for(var r in t)m.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.shouldUpdateInstantly=function(e,t){return!0},t.prototype._getDefaultParameters=function(e){return{compact:!1,showActionMenu:!0,exploreLink:!1,fontSize:14,textColor:s.SCIENCE_BLUE.getHexCode(),selectedTab:{textColor:s.WHITE.getHexCode(),backgroundColor:s.SCIENCE_BLUE.getHexCode(),borderEdges:[i.ALL_BORDERS.getCode()],borderColor:s.GRAY2.getHexCode(),borderWidth:1}}},t.prototype._getDefaultProjectionParameters=function(e){var t,r,i;return t=null!=e&&null!=(i=e.getLastResult())?i.getMetadata().getColumns(h.MEASURE):void 0,r={},g.isEmpty(t)||(r.measureField=t[0].getName()),this._addWidgetProjectionDefaultParameters(r,e)},t.prototype.getLensConstraint=function(){return new c},t.prototype.getThemedStyle=function(e){return new a(e).getDefaultToggleStyle()},t.prototype._getValidSelectModes=function(){return[o.SelectMode.SINGLE,o.SelectMode.MULTI,o.SelectMode.SINGLE_REQUIRED,o.SelectMode.MULTI_REQUIRED]},t.prototype._getSummaryDescription=function(e,t){var r,i;if(null!=t?t.hasValidLastResult():void 0)return r=null!=(i=t.getLastResult())?i.getMetadata().getColumns(h.DIMENSION):void 0,g.isEmpty(r)?void 0:r[0].getName()},t.prototype._addWidgetProjectionDefaultParameters=function(e,t){var r,i,s;return r=null!=(i=null!=t&&null!=(s=t.getLastResult())?s.getMetadata().getGroupingColumnNames():void 0)?i:[],!g.isEmpty(r)&&r.length>1&&(e.displayTemplate=u.buildCustomTemplate(r)),e},t}(p)},76438:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p;p=r(96486),c=r(27223),o=r(1806),n=r(29655),s=r(73414).Z,i=r(93367).Z,d=r(18001).Z,u=r(56191),h=r(20553),a=r(89769).Z,e.exports=l=function(){function e(e){this._definition=e.build()}return e.prototype.getDefaultParameters=function(e,t,r){var i;return null==r&&(r=!1),this.isPlaceholder(t,!0)&&null==e?{}:(i=this._getDefaultProjectionParameters(e,t),r?i:p.extend(this._getDefaultParameters(e,t),i))},e.prototype.getDefaultWidgetStyle=function(){return{}},e.prototype.getResolvedValueDefaults=function(){return{}},e.prototype.hasInvalidConfigurationState=function(e,t){return!1},e.prototype.getLensConstraint=function(){return c.checkImplemented()},e.prototype.getUsedLensId=function(e){if(e.hasLens())return e.getLensId()},e.prototype.getSupportedConditionalFormattingStyles=function(){return c.checkImplemented()},e.prototype.getValidConditionalFormattingTypes=function(){return c.checkImplemented()},e.prototype.getDefaultSelectMode=function(e){return o.SelectMode.SINGLE},e.prototype.hasInvalidSelectMode=function(e){return e.hasLens()&&!p.includes(this._getValidSelectModes(e),e.getLens().getSelectMode())},e.prototype.resolveWidgetParams=function(e,t,r,i){return e},e.prototype.constructFromResolvedParams=function(e){return e},e.prototype.getDynamicReferences=function(e){return[]},e.prototype.getDynamicReferencesToRemove=function(e){return[]},e.prototype.getParameterAttributeReferences=function(e){return[]},e.prototype.getUsedWidgetIds=function(e){return[]},e.prototype.getSummary=function(e,t){return new h(e.getId(),this._getSummaryDescription(e,t),this._getSummaryIconName(e))},e.prototype.getHotKey=function(){return this._definition.hotKey},e.prototype.getIconUrl=function(){return this._definition.icon},e.prototype.getDefaultWidth=function(e){return Math.ceil(this._definition.defaultWidth*e/12)},e.prototype.getDefaultHeight=function(e){return this._definition.defaultHeight[e.getCode()]},e.prototype.getMinWidth=function(){return this._definition.minWidth},e.prototype.getMinHeight=function(e){return this._definition.minHeight[e.getCode()]},e.prototype.hasStep=function(){return this._definition.hasStep},e.prototype.canAnnotate=function(){return this._definition.canAnnotate},e.prototype.canShare=function(){return this._definition.canShare},e.prototype.canSort=function(){return this._definition.canSort},e.prototype.showPreview=function(){return this._definition.showPreview},e.prototype.canAddNotification=function(){return this._definition.canAddNotification},e.prototype.canAddSubscription=function(){return this._definition.canAddSubscription},e.prototype.isPlaceholderClickable=function(){return this._definition.isPlaceholderClickable},e.prototype.isDataVisualization=function(){return this._definition.isDataVisualization},e.prototype.isExclusiveLensUser=function(){return this._definition.isExclusiveLensUser},e.prototype.shouldRenderWidgetOnNoData=function(){return this._definition.shouldRenderWidgetOnNoData},e.prototype.shouldRenderWidgetOnError=function(){return this._definition.shouldRenderWidgetOnError},e.prototype.isValidDimensions=function(e,t,r,i){var s,n;return n=this.getMinWidth(),s=this.getMinHeight(e),!(p.isNumber(n)&&p.isNumber(s)&&(r<n||i<s))},e.prototype.getViewMode=function(e,t,r,i){var s,n,o,a;if(!this.isValidDimensions(e,t,r,i))return null;for(s=0,s=n=0,o=(a=this._definition.viewModeMaxRows[e.getCode()]).length;n<o&&!(i<=a[s]);s=++n);return u.getEnumByOrdinal(s)},e.prototype.isInternal=function(){return this._definition.isInternal},e.prototype.isEnabled=function(){return!0},e.prototype.isPlaceholder=function(e,t){return null==t&&(t=!1),this.hasStep()&&!(null!=e?e.hasLens():void 0)},e.prototype.getPropertiesMutatorAfterQueryUpdate=function(e,t,r){var i,s,n;return r?s=p.extend(this.getDefaultParameters(t),t.getLensMetadata().getWidgetVisualizationParameters()):(i=this.getDefaultParameters(t,null,!p.isEmpty(e.getParameters())&&!e.hasLens()),s=this.isPlaceholder(e)?i:null==(null!=(n=t.getLastResult())?n.getMetadata().getColumn(e.getParameter("measureField")):void 0)?p.extend(i,{title:e.getParameter("title")}):e.getParameters()),new a(e.getId(),s)},e.prototype.getTitle=function(e){},e.prototype.getThemedStyle=function(e){return{}},e.prototype.canHaveInteractions=function(){return!1},e.prototype._retrieveTooltipDynamicReferences=function(e,t,r,n){var o,a,l;if(!p.isEmpty(e)&&e.tooltip&&e.tooltip.content)return e=e.tooltip.content,r=["tooltip","content"],(null!=(o=e.description)?o.displayTemplate:void 0)&&(null!=o?o.values:void 0)&&"object"==typeof(null!=o?o.values:void 0)&&(a=o.values,Object.keys(a).forEach((function(e){if(a[e].step&&a[e].field&&a[e].sourceType)return t.push(new i(a[e],r.concat("description"),d.LAZY_LOAD))}))),(null!=(l=e.widget)?l.name:void 0)?t.push(new s(l.name,r.concat("widget"),d.LAZY_LOAD)):void 0},e.prototype._getValidSelectModes=function(e){return o.SelectMode.enums()},e.prototype._getSummaryDescription=function(e,t){},e.prototype._getSummaryIconName=function(e){return this.getIconUrl()},e.prototype._getDefaultParameters=function(e,t){return c.checkImplemented()},e.prototype._getDefaultProjectionParameters=function(e,t){return{}},e}(),l.Builder=function(){function e(){this._hasStep=!0,this._isExclusiveLensUser=!1,this._canAnnotate=!1,this._canShare=!1,this._canSort=!1,this._showPreview=!0,this._canAddNotification=!1,this._canAddSubscription=!1,this._isPlaceholderClickable=!0,this._isDataVisualization=!1,this._shouldRenderWidgetOnNoData=!1,this._shouldRenderWidgetOnError=!1,this._minWidth=1,this._isInternal=!1,this.setViewModeMaxRows(n.NORMAL,u.FULL,Number.POSITIVE_INFINITY),this.setViewModeMaxRows(n.FINE,u.FULL,Number.POSITIVE_INFINITY)}return e.prototype.setHotKey=function(e){return this._hotKey=e,this},e.prototype.setDefaultWidth=function(e){return this._defaultWidth=e,this},e.prototype.setDefaultHeight=function(e,t){return null==this._defaultHeight&&(this._defaultHeight=[]),this._defaultHeight[e.getCode()]=t,this},e.prototype.setMinWidth=function(e){return this._minWidth=e,this},e.prototype.setMinHeight=function(e,t){return null==this._minHeight&&(this._minHeight={}),this._minHeight[e.getCode()]=t,this},e.prototype.setViewModeMaxRows=function(e,t,r){var i,s;return null==this._viewModeMaxRows&&(this._viewModeMaxRows=[]),null==(i=this._viewModeMaxRows)[s=e.getCode()]&&(i[s]=[]),this._viewModeMaxRows[e.getCode()][t.getOrdinal()]=r,this},e.prototype.setExclusiveLensUser=function(e){return this._isExclusiveLensUser=e,this},e.prototype.setHasStep=function(e){return this._hasStep=e,this},e.prototype.setIcon=function(e){return this._icon=e,this},e.prototype.setCanAnnotate=function(e){return this._canAnnotate=e,this},e.prototype.setCanShare=function(e){return this._canShare=e,this},e.prototype.setCanSort=function(e){return this._canSort=e,this},e.prototype.setShowPreview=function(e){return this._showPreview=e,this},e.prototype.setCanAddNotification=function(e){return this._canAddNotification=e,this},e.prototype.setCanAddSubscription=function(e){return this._canAddSubscription=e,this},e.prototype.setPlaceholderClickable=function(e){return this._isPlaceholderClickable=e,this},e.prototype.setIsDataVisualization=function(e){return this._isDataVisualization=e,this},e.prototype.setIsInternal=function(e){return this._isInternal=e,this},e.prototype.setShouldRenderWidgetOnNoData=function(e){return this._shouldRenderWidgetOnNoData=e,this},e.prototype.setShouldRenderWidgetOnError=function(e){return this._shouldRenderWidgetOnError=e,this},e.prototype.build=function(){return{hotKey:this._hotKey,defaultWidth:this._defaultWidth,defaultHeight:this._defaultHeight,minWidth:this._minWidth,minHeight:p.extend({normal:1,fine:1},this._minHeight),viewModeMaxRows:this._viewModeMaxRows,hasStep:this._hasStep,isExclusiveLensUser:this._isExclusiveLensUser,icon:this._icon,canAnnotate:this._canAnnotate,canShare:this._canShare,canSort:this._canSort,showPreview:this._showPreview,canAddNotification:this._canAddNotification,canAddSubscription:this._canAddSubscription,isPlaceholderClickable:this._isPlaceholderClickable,isDataVisualization:this._isDataVisualization,isInternal:this._isInternal,shouldRenderWidgetOnNoData:this._shouldRenderWidgetOnNoData,shouldRenderWidgetOnError:this._shouldRenderWidgetOnError}},e}()},77173:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;i=r(29655),s=r(76438),n=r(56191),o=r(18948),e.exports=function(e){function t(){t.__super__.constructor.call(this,(new s.Builder).setDefaultWidth(6).setDefaultHeight(i.NORMAL,3).setDefaultHeight(i.FINE,11).setViewModeMaxRows(i.NORMAL,n.COMPACT,3).setViewModeMaxRows(i.FINE,n.COMPACT,11).setIsInternal(!0).setIcon("data-play").setShouldRenderWidgetOnNoData(!0))}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype._getDefaultParameters=function(e){return{}},t.prototype.getLensConstraint=function(){return(new o).setIsInternal(!0)},t.prototype._getSummaryDescription=function(e){return"Explorer Query Builder"},t}(s)},20553:e=>{e.exports=function(){function e(e,t,r){this._title=e,this._description=t,this._iconName=r}return e.prototype.setAdditionalClassName=function(e){return this._additionalIconClassName=e,this},e.prototype.setIconStyles=function(e){return this._iconStyles=e,this},e.prototype.useSLDSIcon=function(e,t){return this._shouldUseSldsIcon=e,this._sldsIconCategory=t,this},e.prototype.getTitle=function(){return this._title},e.prototype.getDescription=function(){return this._description},e.prototype.getIconName=function(){return this._iconName},e.prototype.getAdditionalIconClassName=function(){return this._additionalIconClassName},e.prototype.getIconStyles=function(){return this._iconStyles},e.prototype.shouldUseSLDSIcon=function(){return this._shouldUseSldsIcon},e.prototype.getSLDSIconCategory=function(){return this._sldsIconCategory},e}()},73612:(e,t,r)=>{var i,s,n={}.hasOwnProperty;r(96486),r(8429).Z,r(1806),r(29655),r(86866).Z,i=r(76438),s=r(56191),r(30090),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.shouldUpdateInstantly=function(e,t){return e.getParameter("instant")||t===s.FULL},t.prototype.getNewWidgetSelectedRowsAfterSelection=function(e,t){return t},t}(i)},76950:(e,t,r)=>{var i,s,n,o;o=r(96486).isEmpty,s=r(8429).Z,n=r(1611).Z,e.exports=i={getDisplayLabel:function(e,t,r,n,a){var l,u,d,c,h,p,g;if(o(t))return null!=(l=i._getDisplayColumn(r))?this.formatColumnValue(l,e[l.getName()],n,a):s.getLabel("Null","display");if(Array.isArray(t))for(d="",p=0,g=t.length;p<g;p++)""!==(u=t[p])&&(h=o(d)?"":" - ",l=r.getColumn(u),d+=h+this.formatColumnValue(l,e[u],n,a));else{for(d=t.replace("\\[","&#91;").replace("\\]","&#93;");c=/\[([^\[\]]*)\]/.exec(d);)u=c[1],l=r.getColumn(u),d=d.replace(c[0],this.formatColumnValue(l,e[u],n,a));d=d.replace("&#91;","[").replace("&#93;","]")}return d},getProjectedDimensions:function(e,t){var r,s,n,a,l,u,d,c;if(a=[],o(t))a.push(i._getDisplayColumn(e));else if(Array.isArray(t))for(l=0,d=t.length;l<d;l++)""!==(s=t[l])&&(r=e.getColumn(s),this._isMeasure(r)||a.push(r));else for(u=0,c=(n=t.match(/\[([^\[\]]*)\]/g)).length;u<c;u++)s=n[u],r=e.getColumn(s.substring(1,s.length-1)),this._isMeasure(r)||a.push(r);return a},buildCustomTemplate:function(e){var t,r,i,s;for(r="",i=0,s=e.length;i<s;i++)t=e[i],r+=(o(r)?"":" - ")+"["+t+"]";return r},_getDisplayColumn:function(e){var t,r;return null!=(t=null!=(r=e.getGroupings())?r[0]:void 0)?t:e.getColumns(n.DIMENSION)[0]},formatColumnValue:function(e,t,r,i){var s;return null==e?"":this._isMeasure(e)?r.formatMeasure(e,t,i):null!=(s=r.formatDimension(e,t))?s:""},_isMeasure:function(e){return e.getType()===n.MEASURE}}},80604:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setDrawerItems=function(e){return this._drawerItems=null!=e?e:[],this},t.prototype.getDrawerItems=function(){var e;return null!=(e=this._drawerItems)?e:[]},t.prototype.setIconName=function(e){return this._iconName=e,this},t.prototype.getIconName=function(){return this._iconName},t.prototype.setIconCategory=function(e){return this._iconCategory=e,this},t.prototype.getIconCategory=function(){return this._iconCategory},t.prototype.setMaxInstances=function(e){return this._maxIntances=e,this},t.prototype.getMaxInstances=function(){return this._maxIntances},t}(i)},22392:(e,t,r)=>{var i,s={}.hasOwnProperty;r(96486),i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDefault=function(){return null},t.prototype.setIconName=function(e){return this._iconName=e,this},t.prototype.getIconName=function(){return this._iconName},t.prototype.setOnClickCallback=function(e){return this._onClick=e,this},t.prototype.getOnClickCallback=function(){return this._onClick},t.prototype.setButtonStyle=function(e){return this._buttonStyle=e,this},t.prototype.getButtonStyle=function(){return this._buttonStyle},t}(i)},25535:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setOptions=function(e){return this._options=e,this},t.prototype.getOptions=function(){return this._options},t}(i)},93622:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setDropdownType=function(e){return this._dropdownType=e,this},t.prototype.getDropdownType=function(){return this._dropdownType},t}(i)},22666:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(96486),i=r(22771),e.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._inline=!1,this._resetItems()}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setItems=function(e){return this._items=e,this},t.prototype.getItems=function(){return this._items},t.prototype.addItem=function(e){return this._items.push(e),this},t.prototype.removeItem=function(e){var t,r,i,s,n;for(n=[],t=r=0,i=(s=this._items).length;r<i;t=++r)if(s[t].getName()===e){this._items.splice(t,1);break}return n},t.prototype.addItems=function(e){var t,r,i;for(r=0,i=e.length;r<i;r++)t=e[r],this.addItem(t);return this},t.prototype.getItem=function(e){var t,r,i,s;for(r=0,i=(s=this._items).length;r<i;r++)if((t=s[r]).getName()===e)return t;return null},t.prototype.setInline=function(e){return this._inline=e,this},t.prototype.isInline=function(){return this._inline},t.prototype._resetItems=function(){return this._items=[]},t.prototype.getItemsDefault=function(){var e,t,r,i,n;for(t={},r=0,i=(n=this.getItems()).length;r<i;r++)(e=n[r]).isHidden()||s.extend(t,e.getDefault());return t},t}(i)},34965:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setPlaceholder=function(e){return this._placeholder=e,this},t.prototype.getPlaceholder=function(){return this._placeholder},t.prototype.setColorInputDropdownType=function(e){return this._colorInputDropdownType=e,this},t.prototype.getColorInputDropdownType=function(){return this._colorInputDropdownType},t}(i)},97166:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setCustomizeTemplateLabel=function(e){return this._customizeTemplateLabel=e,this},t.prototype.getCustomizeTemplateLabel=function(){return this._customizeTemplateLabel},t.prototype.setGroupings=function(e){return this._groupings=e,this},t.prototype.getGroupings=function(){return this._groupings},t.prototype.setColumns=function(e){return this._columns=e,this},t.prototype.getColumns=function(){return this._columns},t}(i)},66927:(e,t,r)=>{var i,s={}.hasOwnProperty;r(96486),i=r(43882),e.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._choices=[]}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setOnAddCallback=function(e){return this._onAddCallback=e,this},t.prototype.getOnAddCallback=function(){return this._onAddCallback},t.prototype.setOnEditCallback=function(e){return this._onEditCallback=e,this},t.prototype.getOnEditCallback=function(){return this._onEditCallback},t.prototype.setEditLabel=function(e){return this._editLabel=e,this},t.prototype.getEditLabel=function(){return this._editLabel},t.prototype.setChoicesCallback=function(e){return this._choicesCallback=e,this},t.prototype.getChoicesCallback=function(){return this._choicesCallback},t.prototype.setChoices=function(e){return this._choices=e,this},t.prototype.getChoices=function(){return this._choices},t.prototype.setMultiSelect=function(e){return this._multiSelect=null!=e&&e,this},t.prototype.isMultiSelect=function(){return this._multiSelect},t.prototype.setDefaultValues=function(e){return this._defaultValues=e,this},t.prototype.getDefaultValues=function(){return this._defaultValues},t.prototype.setShouldRefresh=function(e){return this._needRefresh=null!=e&&e,this},t.prototype.shouldRefresh=function(){return this._needRefresh},t}(i)},59948:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDefault=function(){return null},t}(i)},55642:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setTrigger=function(e){return this._trigger=e,this},t.prototype.getTrigger=function(){return this._trigger},t}(i)},1362:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22666),r(74179),r(16730),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDefaultValue=function(){return null},t.prototype.getAddLabel=function(){return this._addLabel},t.prototype.setAddLabel=function(e){return this._addLabel=e,this},t.prototype.getMaxInstances=function(){return this._maxInstances},t.prototype.setMaxInstances=function(e){return this._maxInstances=e,this},t.prototype.getShowAddInstance=function(){return this._showAddInstance},t.prototype.setShowAddInstance=function(e){return this._showAddInstance=e,this},t.prototype.getShowRemoveInstance=function(){return this._showRemoveInstance},t.prototype.setShowRemoveInstance=function(e){return this._showRemoveInstance=e,this},t.prototype.getItemClassName=function(){return this._itemClassName},t.prototype.setItemClassName=function(e){return this._itemClassName=e,this},t.prototype.getCanCollapseItem=function(){return this._canCollapseItem},t.prototype.setCanCollapseItem=function(e){return this._canCollapseItem=e,this},t}(i)},91570:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(96486),i=r(22666),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDefault=function(){var e,t;return e=this.getItemsDefault(),s.isEmpty(e)?{}:((t={})[this.getName()]=e,t)},t}(i)},38641:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(22771),s=r(16730),e.exports=function(e){function t(){t.__super__.constructor.apply(this,arguments),this._numberType=s.Int}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setPlaceholder=function(e){return this._placeholder=e,this},t.prototype.getPlaceholder=function(){return this._placeholder},t.prototype.setNumberType=function(e){return this._numberType=e,this},t.prototype.getNumberType=function(){return this._numberType},t.prototype.setMin=function(e){return this._min=e,this},t.prototype.setMax=function(e){return this._max=e,this},t.prototype.getMin=function(){return this._min},t.prototype.getMax=function(){return this._max},t}(i)},41100:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDefault=function(){return null},t.prototype.setButtonLabel=function(e){return this._buttonLabel=e,this},t.prototype.getButtonLabel=function(){return this._buttonLabel},t}(i)},50566:(e,t,r)=>{var i,s;s=r(96486),i=r(90554).deleteNullValues,e.exports=function(){function e(e){this._properties=e}return e.prototype.addProperty=function(e){return this._properties.push(e),this},e.prototype.getProperty=function(e){var t,r,i,s;for(r=0,i=(s=this._properties).length;r<i;r++)if((t=s[r]).getName()===e)return t;return null},e.prototype.getProperties=function(){return this._properties},e.prototype.getDefault=function(e){var t,r,n,o,a;for(null==e&&(e=!1),r={},n=0,o=(a=this._properties).length;n<o;n++)(t=a[n]).isHidden()||s.extend(r,t.getDefault());return e?r:i(r)},e}()},22771:(e,t,r)=>{var i;i=r(8429).Z,e.exports=function(){function e(e){this._name=e.name,this._label=e.label,this._type=e.type,this._defaultValue=e.defaultValue,this._disabled=!1,this._hidden=!1,this._shouldImmediatelyValidate=!1}return e.prototype.setName=function(e){return this._name=e,this},e.prototype.getName=function(){return this._name},e.prototype.getType=function(){return this._type},e.prototype.setDefaultValue=function(e){return this._defaultValue=e,this},e.prototype.getDefaultValue=function(){return this._defaultValue},e.prototype.setLabel=function(e){return this._label=e,this},e.prototype.getLabel=function(){var e;return null!=(e=this._label)?e:i.getLabel("EclairNgChartOptions",this.getName())},e.prototype.setTooltip=function(e){return this._tooltip=e,this},e.prototype.getTooltip=function(){return this._tooltip},e.prototype.setDisabled=function(e){return this._disabled=e,this},e.prototype.isDisabled=function(){return this._disabled},e.prototype.setHidden=function(e){return this._hidden=e,this},e.prototype.isHidden=function(){return this._hidden},e.prototype.setRequired=function(e){return this._required=e,this},e.prototype.isRequired=function(){return this._required},e.prototype.setClassName=function(e){return this._className=e,this},e.prototype.getClassName=function(){return this._className},e.prototype.setShouldImmediatelyValidate=function(e){return this._shouldImmediatelyValidate=e,this},e.prototype.shouldImmediatelyValidate=function(){return this._shouldImmediatelyValidate},e.prototype.getDefault=function(){var e;return(e={})[this.getName()]=this.getDefaultValue(),e},e}()},56386:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w={}.hasOwnProperty;R=r(78978),E=r(82210),g=r(91570),v=r(97715),y=r(22771),m=r(38641),o=r(93622),S=r(43882),u=r(66927),p=r(1362),d=r(59948),s=r(22392),f=r(41100),l=r(97166),a=r(34965),n=r(25535),I=r(46196),i=r(80604),c=r(33590).Z,h=r(55642),T=r(36215).Z,C=r(13938).Z,_=r(24769).Z,e.exports=b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)w.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.of=function(e,t,r){return new(this.getValue())({name:e,type:this,label:r,defaultValue:t})},t}(R),b.build(b,{HEADER:d,NAMED_SECTION:g,SECTION:E,TEXT:v,BOOLEAN:y,NUMBER:m,COLOR:o,DROPDOWN:u,RADIO:S,MULTI_VALUE:p,BUTTON:s,PREVIEW_BUTTON:f,CUSTOM_TEXT:l,CUSTOM_COLOR:a,CATEGORICAL_COLOR:n,STYLE_TRAY:I,BINS:i,MAP_LIST:c,MAP_MANAGER:h,SERIES:T,REF_LINE_INPUT:C,ONBOARDING_VIDEO:_,WIDGET_PICKER:y})},82210:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22666),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDefault=function(){return this.getItemsDefault()},t}(i)},43882:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(96486),s=r(90394),i=r(22771),e.exports=function(e){function t(){this._choices=[],t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setChoicesCallback=function(e){return this._choicesCallback=e,this},t.prototype.getChoicesCallback=function(){return this._choicesCallback},t.prototype.setChoices=function(e){return this._choices=e,this},t.prototype.getChoices=function(){return this._choices},t.prototype.getInputOptions=function(){var e,t,r,i,o,a,l;for(i=new s,o=0,a=(t=null!=(l="function"==typeof(r=this.getChoicesCallback())?r():void 0)?l:this.getChoices()).length;o<a;o++)e=t[o],n.isObject(e)?i.add(e.value,e.label):i.add(e,e);return i},t}(i)},46196:(e,t,r)=>{var i,s={}.hasOwnProperty;r(74179),r(16730),i=r(22666),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getDefault=function(){var e,t,r,i,s,n;for(t=this.getItemsDefault(),i=0,s=(n=this.getDrawerItems()).length;i<s;i++)(e=n[i]).isHidden()||_.extend(t,e.getDefault());return(r={})[this.getName()]=t,r},t.prototype.setDrawerItems=function(e){return this._drawerItems=e,this},t.prototype.getDrawerItems=function(){return this._drawerItems},t.prototype.setIconName=function(e){return this._iconName=e,this},t.prototype.getIconName=function(){return this._iconName},t.prototype.setIconCategory=function(e){return this._iconCategory=e,this},t.prototype.getIconCategory=function(){return this._iconCategory},t}(i)},97715:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(22771),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.setPlaceholder=function(e){return this._placeholder=e,this},t.prototype.getPlaceholder=function(){return this._placeholder},t}(i)},6190:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f;r(96486),h=r(33854).Z,c=r(32350),l=r(8429).Z,_=r(83993).Oz,i=r(16045).Z,m=r(61506).Z,n=r(45131).Z,o=r(69008).Z,a=r(84938).Z,d=r(5712).Z,r(40651).Z,f=r(90493),g=f.SAVED_VIEW_ID_QUERY_PARAM,p=f.PAGE_ID_QUERY_PARAM,s=r(47688).Z,u=r(12698).Z,e.exports=function(){function e(e,t,r,i,s){this._metadataProvider=e,this._getQuery=t,this._getLastResult=r,this._dashboardDescribe=i,this._appInstanceId=s}return e.prototype.goToAsset=function(e,t,r,s,l){var u,_,f,y,b;f=(b=null!=l?l:{}).savedViewId,u=b.pageId,e===d.LENS&&m.get(i).trigger(new o(n.DASHBOARD,"linkToLens",0,{type:a.PARTIAL,categories:["lens","link"]})),s||(s=this._dashboardDescribe.getExtendedHash()),_=new Map,null!=f&&_.set(g,f),null!=u&&_.set(p,u),y={baseRoute:e.getCode(),instanceId:t,extendedHash:s,queryParams:_},r&&Object.assign(y,{state:this._dashboardDescribe.getRuntimeState(!1,!1).describe({includeSteps:!1,includeFacetingFilters:!0}),replaceState:!0}),c.trigger("DEPRECATED:router:go-to-route",new h(y),void 0,this._appInstanceId)},e.prototype.goToAssetByName=function(e,t,r,i,s,n){var o,a,l,u;return a=(l=null!=n?n:{}).savedViewId,o=l.pageId,this._metadataProvider.getAsset(e.getAssetType(),_(t,r)).then((u=this,function(t){return u.goToAsset(e,t.getId(),i,s,{savedViewId:a,pageId:o})}))},e.prototype.goToExplorer=function(e,t,r,d,p){var g,_,f;if(null==r&&(r=!1),f=e.getId(),(_=this._getLastResult(f))instanceof u)return g=new s({lensId:e.getDashboardId()+":"+f,lensName:l.getLabel("RuntimeWidget","action_explore")+": "+f,folderId:e.getDashboardFolderId(),stepId:f,stepJson:e.getJson(),widgetJson:t,queryJson:this._getQuery(f,r),finalQuery:null!=_?_.getQueryInfo().finalQueryWithOriginalLimit:void 0,datasetMetadatas:null!=_?_.getQueryInfo().datasetMetadatas:void 0,lastResultMetadata:null!=_?_.getMetadata():void 0,assetExtendedMetadata:d,dateVersion:p}),m.get(i).trigger(new o(n.DASHBOARD,"exploreLens",0,{type:a.PARTIAL,categories:["lens","explore"]})),c.trigger("DEPRECATED:router:go-to-route",new h({instance:g.buildLens().toJSON(),extendedHash:this._dashboardDescribe.getExtendedHash(),options:{assetExtendedMetadataJson:g.getNewAssetExtendedMetadataJson()}}),void 0,this._appInstanceId)},e.prototype.goToAssetInNewWindow=function(e,t,r){var i;i=e.isNew()?{instance:e.getJson(),queryParams:null!=r?new Map([[p,r]]):new Map}:{baseRoute:e.getType().getCode(),instanceId:e.getId(),queryParams:null!=r?new Map([[p,r]]):new Map},t&&Object.assign(i,{state:this._dashboardDescribe.getRuntimeState(!1,!0).describe({includeSteps:!0,includeFacetingFilters:!1}),replaceState:!1}),c.trigger("DEPRECATED:router:go-to-route",new h(i),{newWindow:!0},this._appInstanceId)},e}()},1098:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L,M,N,O,P,x,Z,F,k,B,W,G,U,H,V,j,q,z,$,Q,Y,K,J,X,ee,te,re,ie,se,ne,oe,ae,le,ue,de,ce,he,pe,ge,me,_e,fe,ye,be,Ce,Ee,Se,Te,Ie,ve,Re,we,Ae,De,Le,Me,Ne,Oe,Pe,xe,Ze,Fe,ke,Be,We,Ge,Ue,He,Ve,je,qe,ze,$e,Qe,Ye=[].slice;Ue=r(72555),Ie=r(45697),we=r(67294),ze=r(96486),i=r(70351),Ae=r(66351).Z,r(46125).Z,fe=r(12205).Z,r(8429).Z,oe=r(24585).Z,o=r(37129).Z,ie=r(52115),$e=r(90554),qe=$e.toMap,je=$e.toKeyValuePair,Oe=r(32574),Qe=r(30077),He=Qe.get$,Ve=Qe.isOrIn,ce=r(85600),ae=r(20319),l=r(91942).Z,Pe=r(22516).Z,ye=r(32350),r(33854).Z,r(8902),xe=r(72084).Z,Ee=r(6798),le=r(2391),Te=r(94607).Z,de=fe((function(){return Promise.all([r.e(441),r.e(425),r.e(592),r.e(989)]).then(r.t.bind(r,13469,23))})),r(83993).Oz,Ce=r(95929).ZP,r(26499).Z,R=r(51548).Z,S=r(12860),T=r(93947),r(93748).Z,Ze=r(14077),ne=r(79587).Z,r(45080).Z,r(67399).Z,s=r(40651).Z,Fe=r(24293).Z,ue=r(11040).Z,O=r(22371).Z,Ge=r(4289).Z,H=r(96603).Z,De=r(99642).Z,Le=r(73700).Z,r(25778),r(74703).Z,te=r(70804).Z,X=r(67427).Z,r(9462).Z,r(94969).Z,B=r(83977).Z,U=r(91088).Z,v=r(91046).Z,Z=r(42799).Z,k=r(59816),q=r(50933).Z,W=r(48835).Z,G=r(99689).Z,be=r(68831).Z,j=r(68726).Z,n=r(56379).Z,ee=r(21891).Z,w=r(73896).Z,N=r(10591).Z,A=r(12982).Z,Q=r(89769).Z,he=r(62271).Z,x=r(90970).Z,m=r(5394).Z,f=r(3694).Z,_e=r(86968).Z,Me=r(94170).Z,F=r(56412).Z,z=r(70210).Z,re=r(83458).Z,g=r(64805).Z,K=r(26612).Z,L=r(91019).Z,M=r(55647).Z,se=r(40811).Z,P=r(14084).Z,I=r(9111).Z,V=r(24359).Z,We=r(50003).Z,h=r(41200).Z,p=r(6190),E=r(6137).Z,u=r(64726).Z,r(55278),C=r(5945).Z,y=r(17369).Z,b=r(39917),$=r(84458),c=r(93165).Z,Y=r(88919).Z,Ne=fe((function(){return Promise.all([r.e(441),r.e(425),r.e(592),r.e(61)]).then(r.bind(r,13356))})),Be=r(83577).Z,J=r(19991).Z,_=r(52885),ge=r(52955).Z,me=r(96487).Z,pe=r(41989).Z,d=r(46874),D=r(10379).Z,Se=r(17182),ke=r(98481).Z,a=r(18277).Z,Re="runtimeLensResultsSubscriber",ve="runtimeLensPanelResultsSubscriber",e.exports=Ue({displayName:"DashboardRC",mixins:[ce],propTypes:{commandInvoker:Ie.instanceOf(l).isRequired,metadata:Ie.instanceOf(R).isRequired,metadataProvider:Ie.instanceOf(Ce).isRequired,assetExtendedMetadata:Ie.instanceOf(ne),view:Ie.instanceOf(Pe),isEditMode:Ie.bool,showHeader:Ie.bool,showToolbar:Ie.bool,showLayoutHeader:Ie.bool,showActionBar:Ie.bool,showWidgetActions:Ie.bool,isTooltipMode:Ie.bool,showLastRefreshDate:Ie.bool,canShowRightPanel:Ie.bool,isRightPanelHandleVisible:Ie.bool,externalState:Ie.instanceOf(f),doesReceiveClippedSteps:Ie.bool,plugins:Ie.arrayOf(Ie.instanceOf(L)),pluginManager:Ie.instanceOf(M),delegate:Ie.instanceOf(g),widgetActionDelegate:Ie.instanceOf(K),lensProvider:Ie.instanceOf(_e).isRequired,widgetProvider:Ie.instanceOf(We).isRequired,gridRows:Ie.instanceOf(le),renderOnWidgetError:Ie.func,initialLayoutName:Ie.string,initialPageIndex:Ie.number,headerLabelIconName:Ie.string,currentSavedView:Ie.instanceOf(H),resetCounter:Ie.number,viewportRendering:Ie.bool,onMetadataUpdate:Ie.func,minRowHeight:Ie.number,onUpdateLayoutPage:Ie.func,onRuntimeReady:Ie.func,runtime:Ie.object,onLoaded:Ie.func,onCrashed:Ie.func,components:Ie.object,componentAssetExtendedMetadatas:Ie.object,onInitialization:Ie.func,removeOuterSpacing:Ie.bool,onExploreAsLens:Ie.func,addNotification:Ie.func,inlineEditProvider:Ie.object,gridLayoutMaxWidth:Ie.number,dashboardTheme:Ie.string,captureUsageTracking:Ie.func,bindingsTraverserProvider:Ie.object,useImmutableMetadata:Ie.bool},contextTypes:{appContext:Ie.instanceOf(Fe).isRequired,appServices:Ie.object.isRequired,router:Ie.instanceOf(Ae)},childContextTypes:{addDashboardComponent:Ie.func,removeDashboardComponent:Ie.func,addReportComponent:Ie.func,removeReportComponent:Ie.func,addTableauComponent:Ie.func,removeTableauComponent:Ie.func},getChildContext:function(){return{addDashboardComponent:this._addComponent,removeDashboardComponent:this._removeComponent,addReportComponent:this._addReportComponent,removeReportComponent:this._removeReportComponent,addTableauComponent:this._addTableauComponent,removeTableauComponent:this._removeTableauComponent}},getDefaultProps:function(){return{isEditMode:!1,showHeader:!0,showActionBar:!0,showWidgetActions:!0,showLastRefreshDate:!1,canShowRightPanel:!0,isRightPanelHandleVisible:!1,doesReceiveClippedSteps:!1,plugins:[],delegate:new g,widgetActionDelegate:new K,initialPageIndex:0,viewportRendering:!0,assetExtendedMetadata:new ne,bindingsTraverserProvider:new n,captureUsageTracking:function(){},showToolbar:!0,showLayoutHeader:!0,useImmutableMetadata:!0}},getInitialState:function(){var e;return{metadataHolder:new w(this.props.metadata,this.props.assetExtendedMetadata,this.props.bindingsTraverserProvider,this.props.components,this.props.componentAssetExtendedMetadatas,this.props.parentMetadata,this.props.useImmutableMetadata),areWidgetsReady:!1,currentLayoutName:null!=(e=this.props.initialLayoutName)?e:this.props.metadata.getLayouts()[0].getName(),currentPageIndex:this.props.initialPageIndex,isShowingImageManagerModal:!1,showStepCreationWizard:!1,showDefaultDataset:!1,stepCreationAssetId:void 0,stepCreationAssetType:void 0,showStaticStepCreation:!1,selectedWidgetId:void 0,plugins:{},isShowingQueryBuilder:!1,isRightPanelOpenEditMode:!0,isRightPanelOpenViewMode:!1,rightPanelModeEditMode:this._getInitialRightPanelMode(),overlappingRightPanelMode:void 0,rightPanelModeViewMode:se,leftPanelMode:void 0,modalContents:{},modal:void 0,selectedLens:void 0,isPreviewingDashboard:!1,selectedWidgetIds:[]}},UNSAFE_componentWillMount:function(){var e,t,r,i,s;if(ye.on(this._getUncaughtExceptionEventString(),this._handleUncaughtException),this._didAddVisibleWidgetsFilter=!1,this._runtimeReadyDef=new ie,this._visibleWidgetsReadyDef=new ie,this._widgetsReadyDef=new ie,this._widgetsFullyUpdatedDef=new ie,this._backgroundImageLoadedDef=new ie,Promise.all([this._visibleWidgetsReadyDef.promise(),this._runtimeReadyDef.promise()]).then((s=this,function(e){var t,r;return t={widgetIds:s._getCurrentLayoutPage().getWidgetIds(),viewportWidgetIds:e[0]},"function"==typeof(r=s.props).onLoaded?r.onLoaded(Te.PERCEIVED_DONE,t):void 0})),e=[this._runtimeReadyDef.promise(),this._visibleWidgetsReadyDef.promise(),this._widgetsFullyUpdatedDef.promise(),this._backgroundImageLoadedDef.promise()],this._isViewportRendering()||e.push(this._widgetsReadyDef.promise()),this._readyPromise=Promise.all(e),this._readyPromise.then(function(e){return function(){var t;return e.setState({areWidgetsReady:!0}),"function"==typeof(t=e.props).onLoaded?t.onLoaded(Te.DONE,void 0,e._getPostLoadMetrics()):void 0}}(this)),this._commandInvoker=this.props.commandInvoker,this._widgets={},this._dashboardReconciler=new N(this.props.lensProvider,this.props.metadataProvider,this._executeMutators,this.props.bindingsTraverserProvider,this.context.appServices.idManager),this._initRuntime(this.props.metadata),!this._hasError)return this._dataSourceStateProvider=new q(this._runtime,Z.DATA_SOURCE_STATES_FILTER_ID),this._messageProvider=new W(this._runtime),this._gridLayoutDelegate=new y({getCurrentLayoutName:this._getCurrentLayoutName,getCurrentPageIndex:this._getCurrentPageIndex,executeMutators:this._executeMutators,onDeleteWidget:this._onDeleteWidget,onDuplicateWidget:ze.partial(this._performWidgetAction,ke.DUPLICATE,[this._getCurrentPageIndex()]),onCopyWidget:ze.partial(this._performWidgetAction,ke.COPY,[this._getCurrentPageIndex()]),onDidAttachLensToWidget:this._onDidAttachLensToWidget,generateWidgetId:this._generateWidgetId,beginEditingStepAndWidget:ze.partial(this._onLensActionStart,me.EDIT),showConvertModalForGlobalFilters:this._showConvertModalForGlobalFilters,bindingsTraverserProvider:this.props.bindingsTraverserProvider,metadataHolder:this.state.metadataHolder,setModal:this._setModal}),this._dashboardDescribe=new m({commandInvoker:this._commandInvoker,getCurrentLayoutName:this._getCurrentLayoutName,getCurrentPageIndex:this._getCurrentPageIndex,metadataHolder:this.state.metadataHolder,isEditMode:this._isEditMode,getCurrentLayout:this._getCurrentLayout,runtime:this._runtime,getSelectedGridLayoutWidgets:this._getSelectedWidgets,gridLayoutDelegate:this._gridLayoutDelegate,bindingsTraverserProvider:this.props.bindingsTraverserProvider,getRightPanelMode:this._getRightPanelMode,getExtendedHash:null!=(r=this.props.view)?r.getExtendedHash.bind(this.props.view):void 0,getComponentRuntime:this._getComponentRuntime,getComponentDescribes:this._getComponentDescribes,getComponentInitialPageIndex:this._getComponentInitialPageIndex,messageProvider:this._messageProvider}),this._deepLinker=new p(this.props.metadataProvider,this._getQuery,this._getLastResult,this._dashboardDescribe,this.context.appContext.appInstanceId),this._mover=new b,this._widgetSelector=new E(function(e){return function(){return e._setRightPanelMode(c.WIDGET_PROPERTIES)}}(this)),this._runtimeActions=new x({runtime:this._runtime,dashboardDescribe:this._dashboardDescribe,bindingsTraverserProvider:this.props.bindingsTraverserProvider,initialExternalState:null!=(i=this.props.externalState)?i.state:void 0}),this._layoutSwitcher=new he({switchLayoutPage:this._switchLayoutPage,mutateDashboard:this._mutateDashboard,dashboardDescribe:this._dashboardDescribe}),this._pageActions=new Se({metadataHolder:this.state.metadataHolder,layoutSwitcher:this._layoutSwitcher,getCurrentLayout:this._getCurrentLayout,getCurrentPageIndex:this._getCurrentPageIndex,executeMutators:this._executeMutators}),this._lensActions=new ge({metadataProvider:this.props.metadataProvider,metadataHolder:this.state.metadataHolder,getLastResult:this._getLastResult,getCurrentLayoutName:this._getCurrentLayoutName,getWidget:this._getWidget,executeMutators:this._executeMutators,getQuery:this._getQuery,onLensActionComplete:this._onLensActionComplete,onExploreAsLens:this.props.onExploreAsLens}),this._componentWidgetSdks=new Map,this._stateApplicator=new j(this.state.metadataHolder,this._runtime),this._sdk=new V({viewConfig:this._getViewConfig(),getDashboardMetadata:this.getMetadata,metadataHolder:this.state.metadataHolder,metadataProvider:this.props.metadataProvider,getGridLayoutWidget:this._getWidget,getCurrentLayout:this._getCurrentLayout,getCurrentLayoutPage:this._getCurrentLayoutPage,getRuntimeLens:this._getRuntimeLens,getRightPanelMode:this._getRightPanelMode,getOverlappingRightPanelMode:this._getOverlappingRightPanelMode,updateRightPanel:this._updateRightPanel,getLeftPanelMode:this._getLeftPanelMode,setLeftPanelMode:this._setLeftPanelMode,toggleRightPanel:this._toggleRightPanel,layoutSwitcher:this._layoutSwitcher,commandInvoker:this._commandInvoker,executeMutators:this._executeMutators,resetRuntime:this._resetRuntime,stateApplicator:this._stateApplicator,getWidgetContainerDomNode:function(e){return function(t){return e.getRef$().find(".widget-container_"+t)[0]}}(this),getDashboardFilterManagerId:this._getDashboardFilterManagerId,removeDashboardFilters:this._removeFilters,dataSourceStateProvider:this._dataSourceStateProvider,messageProvider:this._messageProvider,getHotkeyManager:this._getHotKeyManager,dashboardDescribe:this._dashboardDescribe,imageManagerDelegate:this._getImageManagerDelegate(),lensActionsDelegate:this._getLensActionsDelegate(),getDashboardDomNode:function(e){return function(){return e.getRef$()[0]}}(this),deepLinker:this._deepLinker,getWidgetsReadyPromise:function(e){return function(){return e._readyPromise}}(this),openSaveModal:this._openSaveModal,removeComponent:this._removeComponent,getComponentSdk:this._getComponentSdk,getComponentWidgetDelegate:function(e){return function(){return e._componentWidgetDelegate}}(this),lensActions:this._lensActions,getTooltipWidget:this._getTooltipWidget,setPluginState:this._setPluginState,getPluginManager:function(e){return function(){return e._pluginManager}}(this),getWidgetProvider:function(e){return function(){return e.props.widgetProvider}}(this),addNotification:this.props.addNotification,appServices:this.context.appServices,startAllLenses:function(e){return function(){return e._runtimeActions.startAllLenses()}}(this),startLens:function(e){return function(t){return e._runtimeActions.startLens(t)}}(this),router:this.context.router,captureUsageTracking:this.props.captureUsageTracking,getTableauComponentSdk:this._getTableauComponentSdk,getDashboardScrollContainerDomNode:function(e){return function(){return e.getRef$().find(".layout-inner-container")[0]}}(this)}),this._pluginManager=this.props.pluginManager?this.props.pluginManager:new M(this._sdk,function(e){return function(t){return e.state.plugins[t]}}(this),this._setPluginState),ze.isEmpty(this.props.plugins)||this._pluginManager.registerPlugins(this.props.plugins,this._runtime),this._externalInterface=new _({getCurrentLayoutName:this._getCurrentLayoutName,hasResultError:this._hasResultError,dashboardDescribe:this._dashboardDescribe}),this._componentWidgetDelegate=new u({getComponentWidgetSdk:this._getComponentWidgetSdk,removeDashboardComponent:this._removeComponent,getComponentRuntime:this._getComponentRuntime,executeMutators:this._executeMutators}),this._clippedLensQueue=[],this._fetchImageUrl().then(function(e){return function(t){if(!t)return e._backgroundImageLoadedDef.resolve()}}(this)),"function"==typeof(t=this.props).onInitialization&&t.onInitialization(this._sdk),this._debouncedOnUpdateViewport=ze.debounce(this._onUpdateViewportWidgets,50)},componentDidMount:function(){var e;return this.props.doesReceiveClippedSteps&&ye.on("dashboard:add-step",this._addClippedLens,this),"function"==typeof(e=this.props).onLoaded?e.onLoaded(Te.SKELETON):void 0},UNSAFE_componentWillReceiveProps:function(e){var t,r,i,s,n,o,a;for(s=qe(e.plugins,(function(e){return e.getName()})),n=0,o=(a=this.props.plugins).length;n<o;n++)t=a[n],ze.has(s,t.getName())?delete s[t.getName()]:this._pluginManager.tearDownPlugin(t.getName(),this._runtime);for(r in s)t=s[r],this._pluginManager.registerPlugin(t,this._runtime,this._sdk);if(this._pluginManager||this._pluginManager.setPluginOrder(e.plugins),e.isEditMode&&!this.props.isEditMode&&(this._updateSelectedWidgets([]),this.state.plugins.DashboardSelectThemePlugin&&this.state.plugins.DashboardSelectThemePlugin.dashboardTheme===z.HIGH_CONTRAST.getCode()&&this._setPluginState("DashboardSelectThemePlugin",{dashboardTheme:z.ORIGINAL.getCode()})),(i=!e.isEditMode&&this.props.isEditMode)!==this.state.isPreviewingDashboard)return this.setState({isPreviewingDashboard:i})},shouldComponentUpdate:function(){return!this._hasError},componentDidUpdate:function(e,t){var r,i,s,n,o,a,l,u;if(r=this._getCurrentLayoutName(e,t),o=this.props.initialLayoutName!==r&&this.props.initialLayoutName!==e.initialLayoutName?this.props.initialLayoutName:this._getCurrentLayoutName(this.props,this.state),i=this._getCurrentPageIndex(e,t),!1,s=!1,((a=this.props.initialPageIndex!==i&&this.props.initialPageIndex!==e.initialPageIndex?this.props.initialPageIndex:this._getCurrentPageIndex(this.props,this.state))!==i||(o!==r&&this.props.isEditMode,0))&&(s=!0),!e.isEditMode&&this.props.isEditMode?this._resetRuntime().then((u=this,function(){var e;return"function"==typeof(e=u.props).onLoaded?e.onLoaded(Te.DONE):void 0})):e.isEditMode&&!this.props.isEditMode?this._runtime.stopAndResetLenses(this.state.metadataHolder.getDependencyAnalyzer().getUnusedLensIds(this._getCurrentLayoutName(),this._getCurrentPageIndex())):this.props.currentSavedView!==e.currentSavedView||this.props.resetCounter!==e.resetCounter?this._resetRuntime():a!==i||o!==r?(this._updateWidgetSubscribers(o,a),this.props.isEditMode&&o!==r?this._runtimeActions.reset({layoutName:o,pageIndex:a}):this._runtimeActions.setStartedLenses(o,a,null!=(l=this.props.externalState)?l.state:void 0,this.props.currentSavedView)):this.props.externalState!==e.externalState&&null!=this.props.externalState&&this._stateApplicator.applyExternalState(this.props.externalState),null!=this.props.onMetadataUpdate&&(n=[],this.props.metadata.getJson()!==e.metadata.getJson()&&this.props.metadata.getJson()!==this.getMetadata().getJson()&&n.push(new O(this.props.metadata.getJson())),s&&n.push(new O(this.props.metadata.getJson())),this.props.assetExtendedMetadata!==e.assetExtendedMetadata&&this.props.assetExtendedMetadata!==this.state.metadataHolder.getAssetExtendedMetadata()&&n.push(new re(new Ge(this.props.assetExtendedMetadata.getJson()))),n.length>0&&this._executeMutators(n,{undoEnabled:!1})),null!=this.state.widgetToHighlightId&&(Oe.scrollIntoView(this.getRef$().find(".widget-container_"+this.state.widgetToHighlightId)[0],!1),this.setState({widgetToHighlightId:null})),this.props.isEditMode&&this._clippedLensQueue.length&&(this._getRightPanelMode()===c.STEP_LIST?(this._clippedLensQueue.forEach(this._addClippedLensFromExplorer),this._clippedLensQueue=[]):this._setRightPanelMode(c.STEP_LIST)),this._getCurrentLayoutName(e,t)!==r&&this._fetchImageUrl(),e.isEditMode!==this.props.isEditMode&&this._pluginManager.didChangeMode(),this.state.layoutImageUrl||this.state.didLayoutImageFailToLoad)return this._backgroundImageLoadedDef.resolve()},componentWillUnmount:function(){var e,t,r,i,s;if(ye.off(this._getUncaughtExceptionEventString()),this.props.doesReceiveClippedSteps&&ye.off("dashboard:add-step",this._addClippedLens,this),null!=(r=this._fetchImageInfoPromise)&&r.cancel(),null!=(i=this._debouncedOnUpdateViewport)&&i.cancel(),this.props.pluginManager||null!=(s=this._pluginManager)&&s.tearDownPlugins(this._runtime),delete this._externalInterface,null!=this.props.runtime&&(t=["widgetsReadyFilter",this._runtime.getNamespace()].filter(Boolean).join("-"),this._runtime.getFilter(t)&&this._runtime.removeFilter(t),e=["visibleWidgetsReadyFilter",this._runtime.getNamespace()].filter(Boolean).join("-"),this._runtime.getFilter(e)))return this._runtime.removeFilter(e)},render:function(){var e,t,r,i,s,n,o,a,l,u,d,h,p,g,m,_,f;return this._hasError?we.createElement("div",null):(e=Oe.classSet({"dashboard-builder-body-content":!0,"with-right-panel":this._isRightPanelVisible()&&this._getRightPanelMode()!==c.SERVICE_INTELLIGENCE,"with-wide-right-panel":this._getRightPanelMode().isWide,"with-toolbar":this.props.isEditMode&&this.props.showToolbar,"with-right-panel-handle":this.props.isRightPanelHandleVisible,"edit-mode":this.props.isEditMode&&this.props.showLayoutHeader}),n=this.props.isEditMode&&this.props.showToolbar?we.createElement($,{delegate:this._gridLayoutDelegate,assetType:this.getMetadata().getType()}):void 0,t=Oe.classSet({"dashboard-builder-body":!0,"dashboard-show-header":this.props.showHeader}),r=Oe.classSet({"dashboard-container":!0,"with-left-panel":this._isLeftPanelVisible(),"with-wide-left-panel":null!=this._getLeftPanelMode()&&this._getLeftPanelMode().isWide,"with-header":this.props.showHeader}),s=null!=this.state.plugins.DashboardSelectThemePlugin?this.state.plugins.DashboardSelectThemePlugin.dashboardTheme:this.props.dashboardTheme,this.props.showHeader&&(l=null!=(_=this.props.view)?_.getHotkeyManager():void 0,m=this._getViewConfig(),p=this.getMetadata(),i=this.props.delegate.renderHeader({viewConfig:m,dashboard:p,getMetadata:this.getMetadata,pluginManager:this._pluginManager,hotkeyManager:l,executeMutators:this._executeMutators,actionSet:this.props.delegate.getHeaderActions(m,p,this._getCurrentLayoutName(),this._commandInvoker,this._pluginManager),onMouseDown:this._onHeaderMouseDown,labelIconName:this.props.headerLabelIconName,showActionBar:this.props.showActionBar&&!this._pluginManager.areHeaderActionsHidden(),showLastRefreshDate:this.props.showLastRefreshDate,showModal:this._showModal,closeModal:this._closeModal,getRuntimeLens:this._getRuntimeLens,isEditMode:this._isEditMode,dashboardTheme:s,closeViewInCRMA:this._closeViewInCRMA})),o=function(){var e,t,r;for(r=[],e=0,t=this._getCurrentLayout().getNumColumns();0<=t?e<t:e>t;0<=t?e++:e--)r.push(1);return r}.call(this),a=null!=(f=this.props.gridRows)?f:this._getCurrentLayout().getRowHeight().getRowSpec(),h=new T(this._getCurrentLayout(),this.state.layoutImageUrl,this.context.appContext.isS1Mobile),d=Oe.classSet({"layout-outer-container":!0,focused:this._getRightPanelMode()===c.LAYOUT_PROPERTIES}),u=this.props.isEditMode&&this.props.showLayoutHeader?we.createElement("div",{className:"layout-properties-container"},this._renderPageCreator(),we.createElement("div",{className:"page-creator-filler"})):void 0,g={},s===z.HIGH_CONTRAST.getCode()&&(g={backgroundColor:"#E6ECF2"}),we.createElement("div",{className:"edge-builder-ii","data-widgets-ready":this.state.areWidgetsReady},we.createElement("div",{className:r},i,we.createElement("div",{className:t},we.createElement("div",{className:"dashboard-builder-body-fill"},we.createElement("div",{className:e,onClick:this._onBodyContainerClick},we.createElement("div",{className:"dashboard-grid-container"},we.createElement("div",{className:d,style:this._getLayoutOuterContainerInlineStyle()},u,we.createElement("div",{className:"layout-inner-container",style:{...h.getGutterInlineStyle(),...g}},we.createElement(ae,{ref:"grid",columns:o,rows:a,minRowHeight:this.props.minRowHeight||this.props.delegate.getMinRowHeight(this.getMetadata()),minColumnWidth:10,widgets:this._makeDashboardWidgets(),delegate:this._gridLayoutDelegate,previewMode:!this.props.isEditMode,cellSpacing:h.getGridCellSpacing(),style:h.getInlineStyle(),maxWidth:this._getCurrentLayout().getMaxWidth()||this.props.gridLayoutMaxWidth,useBodyTracking:!0,getScrollTrackingElement$:this._getScrollTrackingElement$,mover:this._mover,widgetSelector:this._widgetSelector,enableKeyboardEvents:!0,removeOuterSpacing:this.props.removeOuterSpacing,selectedWidgetUIDs:this.state.selectedWidgetIds,onUpdateSelectedWidgets:this._updateSelectedWidgets,onUpdateViewport:this._debouncedOnUpdateViewport,isViewportRendering:this._isViewportRendering(),dashboardTheme:s}))),this._renderWidgetActions())),this._renderRightPanel(),n),this._renderRightTabBar())),this._renderLeftPanel(),this._renderModal(),this.state.modal,!this.props.pluginManager&&this._pluginManager.getFloatingRenderables(),this._renderStepCreationWizard(),this._renderImageManagerModal(),this._renderLensExplorerModal()))},getExternalInterface:function(){return this._externalInterface},getMetadata:function(){return this.state.metadataHolder.getMetadata()},hasError:function(){return this._hasError},_hasResultError:function(){var e;return ze.some(null!=(e=this._runtime)?e.getLenses():void 0,(function(e){return e.hasError()}))},_getCurrentLayout:function(){return this.getMetadata().getLayout(this._getCurrentLayoutName())},_getCurrentLayoutPage:function(){return this._getCurrentLayout().getPage(this._getCurrentPageIndex())},_getCurrentLayoutPageIndex:function(e){return this._getCurrentLayout().hasPageWithId(e)?this._getCurrentLayout().getPageById(e).getIndex():this.props.initialPageIndex},_getCurrentLayoutName:function(e,t){return null==e&&(e=this.props),null==t&&(t=this.state),null!=e.onUpdateLayoutPage?e.initialLayoutName:t.currentLayoutName},_getCurrentPageIndex:function(e,t){return null==e&&(e=this.props),null==t&&(t=this.state),null!=e.onUpdateLayoutPage?e.initialPageIndex:t.currentPageIndex},_getMetadataHolder:function(){return this.state.metadataHolder},_switchLayoutPage:function(e,t,r){return null==t&&(t=this._getCurrentPageIndex()),null==r&&(r=!1),this.props.isEditMode&&this._setRightPanelMode(c.LAYOUT_PROPERTIES),null==e||this._pluginManager.canRenderRightPanel(e)||(this._setRightPanelMode(se),this._toggleRightPanel(!1)),null!=this.props.onUpdateLayoutPage?this.props.onUpdateLayoutPage(e,t,r):e!==this._getCurrentLayoutName()||t!==this._getCurrentPageIndex()?this.setState({currentLayoutName:e,currentPageIndex:t}):void 0},_updateWidgetSubscribers:function(e,t){if(this.getMetadata().getLayout(e).hasPage(t))return this._runtimeActions.updateWidgetSubscribers(e,t)},_executeMutators:function(e,t){var r,i,s,n,o;return n=(o=null!=t?t:{undoEnabled:!0}).undoEnabled,i=o.description,s=o.layoutName,r=o.continueUndoRedo,this._commandInvoker.executeCommand(new A(this._mutateDashboard,e,i,this._getCurrentLayoutName(),s,r),n)},_mutateDashboard:function(e,t,r){var i,s,n,o,a,l,u;return null==t&&(t=this._getCurrentLayoutName()),a=this.getMetadata(),l=this._dashboardReconciler.mutate(e,this._runtime,this._runtimeActions,this._dashboardDescribe,this._dataSourceStateProvider,r),n=(o={metadataHolder:this.state.metadataHolder}).metadataHolder.getMetadata(),"function"==typeof(u=this.props).onMetadataUpdate&&u.onMetadataUpdate(n,o.metadataHolder.getAssetExtendedMetadata()),this._pluginManager.onMetadataUpdate(a,n),t!==(i=this._getCurrentLayoutName())&&this._isEditMode()&&(s=this._getCurrentPageIndex(),null!=this.props.onUpdateLayoutPage?this.props.onUpdateLayoutPage(t,s,!0):o.currentLayoutName=t,this._updateWidgetSubscribers(t,s)),this.setState(o),ze.isEqual(a.getLayout(i).getStyleJson(),n.getLayout(t).getStyleJson())||this._fetchImageUrl(),l},_isEditMode:function(){return this.props.isEditMode},_getViewConfig:function(){return null!=this.props.view?this.props.view.getViewConfig():null!=this._mockViewConfig?this._mockViewConfig:this._mockViewConfig=new xe({appContext:this.context.appContext})},_renderPageCreator:function(){return we.createElement(D,{metadataHolder:this.state.metadataHolder,currentLayout:this._getCurrentLayout(),currentPageIndex:this._getCurrentPageIndex(),onSelectPage:this._onSelectPage,pageActions:this._pageActions})},_renderImageManagerModal:function(){if(this.state.isShowingImageManagerModal)return we.createElement(de,{onUploadComplete:this._onUploadComplete,onBlurOrClose:this._endStepCreation,dataProvider:this._getImageManager(),appId:this.state.metadataHolder.getCurrentFolderId(),onImageUpdate:this._getImageManagerDelegate().onImageUpdate})},_renderStepCreationWizard:function(){if(this.state.showStepCreationWizard)return we.createElement(Ne,{ref:"stepCreationWizard",widgetId:this.state.selectedWidgetId,assetId:this.state.stepCreationAssetId,assetType:this.state.stepCreationAssetType,useDefaultDataset:this.state.showDefaultDataset,metadataProvider:this.props.metadataProvider,metadataHolder:this.state.metadataHolder,onCloseModal:this._endStepCreation,onAddStep:ze.bind(this._onAddStep,this,this.state.selectedWidgetId),getRuntimeLens:this._getRuntimeLens,onAttachExistingStep:ze.bind(this._onAttachExistingStep,this,this.state.selectedWidgetId),lensActionsDelegate:this._lensActions,showStaticStepCreation:this.state.showStaticStepCreation,dashboardRuntime:this._runtime,appContext:this.context.appContext})},_renderLensExplorerModal:function(){var e,t;if(this.state.selectedLens&&this.state.selectedLens.getAction()!==me.EXPLORE)return e=null!=(t=this._getSelectedWidgets()[0])?t.getWidget():void 0,this.props.metadata,we.createElement(pe,{selectedLens:this.state.selectedLens,selectedWidget:e,lensActionsDelegate:this._lensActions,dashboardLens:this._getRuntimeLens(this.state.selectedLens.getId()),onCloseModal:this._endStepCreation,getDashboardMetadata:this.getMetadata,dashboardRuntime:this._runtime})},_isRightPanelVisible:function(){return this.props.canShowRightPanel&&(this.props.isEditMode&&this.state.isRightPanelOpenEditMode||!this.props.isEditMode&&this.state.isRightPanelOpenViewMode)},_getRightPanelMode:function(){return this.props.isEditMode?this.state.rightPanelModeEditMode:this.state.rightPanelModeViewMode},_getOverlappingRightPanelMode:function(){return this.state.overlappingRightPanelMode},_renderRightPanel:function(){return we.createElement(P,{isWide:this._getRightPanelMode().isWide,isOpen:this._isRightPanelVisible(),hasHandle:this.props.isRightPanelHandleVisible,toggleRightPanel:ze.partial(this._toggleRightPanel,null),pluginManager:this._pluginManager})},_renderLeftPanel:function(){var e;if(null!=(e=this._getLeftPanelMode()))return we.createElement(I,{pluginManager:this._pluginManager,isWide:e.isWide})},_renderRightTabBar:function(){var e;if(e=this._pluginManager.getButtonBarActions(),!ze.isEmpty(e))return we.createElement(h,{actions:e})},_renderWidgetActions:function(){var e;if(e=this._getSelectedWidgets(),this.props.isEditMode&&!ze.isEmpty(e))return we.createElement(Be,{ref:"widget-actions",selectedGridLayoutWidgets:e,getLens:this._runtime.getLens.bind(this._runtime),startLens:this._runtimeActions.startLens,executeMutators:this._executeMutators,cloneWidgetAction:ze.partial(this._performWidgetAction,ke.CLONE),duplicateWidgetAction:ze.partial(this._performWidgetAction,ke.DUPLICATE,[this._getCurrentPageIndex()]),copyWidgetAction:ze.partial(this._performWidgetAction,ke.COPY,[this._getCurrentPageIndex()]),moveWidgetAction:ze.partial(this._performWidgetAction,ke.MOVE),deleteWidgetAction:this._onClickDeleteWidgetAction,showStepProperties:this._showStepPropertiesPanel,cloneStep:ze.partial(this._onLensActionStart,me.CLONE,void 0),editStep:ze.partial(this._onLensActionStart,me.EDIT),editComponent:this._onEditComponent,dashboardDescribe:this._dashboardDescribe,messageProvider:this._messageProvider,hasSingleWidgetSelected:1===this.state.selectedWidgetIds.length})},_onEditComponent:function(e){return this._componentWidgetDelegate.editComponent(e)},_getLensActionsDelegate:function(){var e;return{cloneStep:ze.partial(this._onLensActionStart,me.CLONE,void 0),editStep:ze.partial(this._onLensActionStart,me.EDIT,null!=(e=this._getSelectedWidgets[0])?e.getWidget():void 0),deleteStep:ze.bind(this._lensActions.delete,this._lensActions),openQueryBuilder:ze.partial(this._openQueryBuilder,this.state.selectedWidgetId),resultsSubscriber:this.props.runtime?void 0:this._runtime.getSubscriber(ve),unlinkSelectedWidget:ze.partial(this._performWidgetAction,ke.UNLINK)}},_initRuntime:function(e){var t,r,i,s,n,o,a,l;if(null!=this._runtime)throw new Error("Runtime already initialized.");if(null!=this.props.runtime)return this._runtime=this.props.runtime,this._runtime.addFilter(["widgetsReadyFilter",this._runtime.getNamespace()].filter(Boolean).join("-"),new te(this._getCurrentLayoutPage().getWidgetIds(),this._onWidgetsReady)),void this._runtimeReadyDef.resolve();s=[this._dashboardReconciler],null!=this.props.inlineEditProvider&&(i=this.props.inlineEditProvider.getInlineEditPublisherClass(),s.push(new i("__inlineEditManager__",this._executeMutators,this._getCurrentLayoutPage().getWidgetIds()))),t=new v("dasboardLoadingStateSubscriber",this._onUpdateLoadingState);try{return n=new Z(this.props.lensProvider,this.props.metadataProvider,this.props.bindingsTraverserProvider,this._executeMutators,this._getCurrentLayoutName,this._getCurrentPageIndex,this.context.appServices.idManager).build({metadataHolder:this.state.metadataHolder,externalState:null!=(o=this.props.externalState)?o.state:void 0,savedView:this.props.currentSavedView,filters:new Map([["widgetsReadyFilter",new te(this._getCurrentLayoutPage().getWidgetIds(),this._onWidgetsReady)]]),subscribers:[new U(ve),t],publishers:s,appInstanceId:this.context.appContext.appInstanceId,parentRuntime:this.props.parentRuntime}),this._runtime=n.getRuntime(),this._componentRuntimes=new Map,n.getComponentRuntimeBuilderResults().forEach((l=this,function(e,r){var i;return(i=e.getRuntime()).getNamespace()||i.addSubscriber(t),l._componentRuntimes.set(r,i)})),this._initialComponentRuntimeBuilderResults=n.getComponentRuntimeBuilderResults(),Promise.all([(new F).initRuntime(n,this.state.metadataHolder,null!=(a=this.props.externalState)?a.state:void 0,this.props.currentSavedView,this._getCurrentLayoutName(),this._getCurrentPageIndex())]).then(function(e){return function(){return e._hasError=!1,e._runtimeReadyDef.resolve()}}(this)).catch(function(e){return function(t){return e._handleUncaughtException(t)}}(this))}catch(e){return r=e,this._handleUncaughtException(r)}},_getComponentRuntime:function(e){return this._componentRuntimes.get(e)},_getComponentInitialPageIndex:function(e){var t;return this._getComponentWidgetSdk(e)?this._getComponentWidgetSdk(e).getInitialPageIndex():null!=(t=this._initialComponentRuntimeBuilderResults.get(e))?t.getPageIndex():void 0},_onWidgetsReady:function(){this._widgetsReadyDef.resolve(),this._isLoading||this._widgetsFullyUpdatedDef.resolve()},_onUpdateLoadingState:function(e){var t;if(this._isLoading=e,null!=(t=this._pluginManager)&&t.onUpdateLoadingState(e),!e)return this._widgetsFullyUpdatedDef.resolve()},_makeDashboardWidgets:function(){var e,t,r,i,s,n,o,a,l,u,d,c,h,p,g,m,_,f;for(d={},e={},c=0,p=(m=this._getCurrentLayoutPage().getWidgetLayouts()).length;c<p;c++)if(n=(o=m[c]).getWidgetId(),a=X.getWidgetRuntimeId(n),this._runtime.hasSubscriber(a)&&(s=this._runtime.getSubscriber(a)),u=new T(this._getCurrentLayout()).getGridCellSpacing(),l=null!=this.state.plugins.DashboardSelectThemePlugin?this.state.plugins.DashboardSelectThemePlugin.dashboardTheme:this.props.dashboardTheme,d[n]=null!=this._widgets[n]?this._widgets[n].recycle({widgetLayout:o,runtimeSubscriber:s,gridCellSpacing:u,renderOnWidgetError:this.props.renderOnWidgetError,viewportRendering:this.props.viewportRendering,delegate:this.props.delegate,dashboardTheme:l}):this._makeDashboardWidget(o,n),d[n].isContainer())for(h=0,g=(_=o.getContainedWidgetLayouts()).length;h<g;h++)r=_[h],e[r.getWidgetId()]=!0;for(n in this._widgets=d,f=this._widgets)(i=f[n]).isContainer()&&i.setContainedWidgets(function(){var e,r,s,n;for(n=[],e=0,r=(s=i.getWidgetLayout().getContainedWidgetLayouts()).length;e<r;e++)t=s[e],this._widgets[t.getWidgetId()].setContainer(i),n.push(this._widgets[t.getWidgetId()]);return n}.call(this));return ze.filter(this._widgets,(function(t){return!e[t.getUID()]}))},_makeDashboardWidget:function(e,t){var r,i,s,n,o,a;return n=X.getWidgetRuntimeId(t),this._runtime.hasSubscriber(n)&&(s=this._runtime.getSubscriber(n)),i=new T(this._getCurrentLayout()).getGridCellSpacing(),r=null!=this.state.plugins.DashboardSelectThemePlugin?this.state.plugins.DashboardSelectThemePlugin.dashboardTheme:this.props.dashboardTheme,new C({widgetLayout:e,runtimeSubscriber:s,gridCellSpacing:i,deepLinker:this._deepLinker,viewConfig:this._getViewConfig(),widgetRCProvider:this.props.widgetProvider,dashboardPluginManager:this._pluginManager,showWidgetActions:this.props.showWidgetActions,isTooltipMode:this.props.isTooltipMode,imageManagerDelegate:this._getImageManagerDelegate(),layoutSwitcher:this._layoutSwitcher,renderOnWidgetError:this.props.renderOnWidgetError,viewportRendering:this.props.viewportRendering,isTooltip:this.props.isTooltipMode,delegate:this.props.delegate,dashboardTheme:r,handlers:{startStepCreation:this._populateWidget,openStepAsLens:ze.bind(this._lensActions.exploreAsLens,this._lensActions,this._deepLinker),openStepAsReport:ze.partial(this._onLensActionStart,me.EDIT,null!=(o=this._getSelectedWidgets[0])?o.getWidget():void 0),openStepInTableau:ze.partial(this._lensActions.exploreInTableau,this._setModal),executeMutators:this._executeMutators,getCurrentRightPanelMode:this._getRightPanelMode,updateRightPanel:this._updateRightPanel,toggleRightPanel:this._toggleRightPanel,getMetadata:this.getMetadata,getMetadataProvider:(a=this,function(){return a.props.metadataProvider}),getCurrentLayout:this._getCurrentLayout,showModal:this._showModal,closeModal:this._closeModal,dashboardDescribe:this._dashboardDescribe,sdk:this._sdk,widgetActionDelegate:this.props.widgetActionDelegate,componentWidgetDelegate:this._componentWidgetDelegate}})},_getTooltipWidget:function(e){var t;return null!=this._widgets[e]?this._widgets[e]:(t=new ue(this._getCurrentLayoutName(),0,0,{colspan:0,column:0,name:e,row:0,rowspan:0},this.getMetadata()),this._makeDashboardWidget(t,e))},_getRuntimeLens:function(e){return this._runtime.getLens(e)},_getQuery:function(e,t){var r,i;return null==t&&(t=!1),r=null!=(i=this._getRuntimeLens(e).getLastResult())?i.getQueryInfo():void 0,t?r.queryWithFilters:r.queryWithoutFilters},_getInitialRightPanelMode:function(){return ze.isEmpty(this.props.metadata.getLenses())?c.LAYOUT_PROPERTIES:c.STEP_LIST},_updateRightPanel:function(e,t){var r,i,s,n,o;return i=(o=null!=t?t:{}).mutators,s=o.shouldClearSelectedWidget,r=o.commandDescription,n=o.shouldOverlap,null!=i&&i.length>0&&this._executeMutators(i,{description:r}),this._setRightPanelMode(e,s,n)},_setRightPanelMode:function(e,t,r){var i;return i=this.props.isEditMode?"rightPanelModeEditMode":"rightPanelModeViewMode",r?(this.setState({overlappingRightPanelMode:e}),void this._pluginManager.setOverlappingPanelParentMode(e)):(this.state.overlappingRightPanelMode&&this.setState({overlappingRightPanelMode:null}),this.state[i]!==e&&this.setState(je(i,e)),this.props.isEditMode&&t?this._updateSelectedWidgets([]):void 0)},_getLeftPanelMode:function(){return this.state.leftPanelMode},_setLeftPanelMode:function(e){return this.setState({leftPanelMode:e})},_isLeftPanelVisible:function(){return null!=this.state.leftPanelMode},_showStepPropertiesPanel:function(e){return this._setRightPanelMode(c.STEP_PROPERTIES,!1)},_onHeaderMouseDown:function(e){this.props.isEditMode&&e.currentTarget===e.target&&this._setRightPanelMode(c.STEP_LIST,!0)},_onBodyContainerClick:function(e){this.props.isEditMode&&(Ve(i(".layout-name-container"),e.target)?(this._setRightPanelMode(c.LAYOUT_PROPERTIES,!0),this._toggleRightPanel(!0)):Ve(this.getRef$("widget-actions"),e.target)||this._setRightPanelMode(c.STEP_LIST,!0))},_getHotKeyManager:function(){var e;return null!=(e=this.props.view)?e.getHotkeyManager():void 0},_toggleRightPanel:function(e){var t;if(t=this.props.isEditMode?this.state.isRightPanelOpenEditMode:this.state.isRightPanelOpenViewMode,null==e||e!==t)return this.setState(this.props.isEditMode?{isRightPanelOpenEditMode:null!=e?e:!this.state.isRightPanelOpenEditMode}:{isRightPanelOpenViewMode:null!=e?e:!this.state.isRightPanelOpenViewMode})},_showConvertModalForGlobalFilters:function(e){return this._showModal(we.createElement(d,{newFilterPanelPosition:e,newFilterPanelWidgetLayoutName:this._getCurrentLayoutName(),newFilterPanelWidgetLayoutPageIndex:this._getCurrentPageIndex(),onCloseModal:this._closeModal,executeMutators:this._executeMutators,metadataHolder:this.state.metadataHolder,metadataProvider:this.props.metadataProvider}))},_performWidgetAction:function(e,t,r){var i,s,n,o,a;return null==t&&(t=[this._getCurrentPageIndex()]),(o=(n=e.make(this._layoutSwitcher,this._pageActions,this._dashboardDescribe,this._getSelectedWidgets(),t)).perform()).hasError()?(s=new Ee(this._closeModal),void this._showModal(s.makeWarningModal(null,o.getMessage(),e.getErrorClass()))):(ye.trigger("DEPRECATED:notification:success",o.getMessage()),null!=(a=n.getWidgetToHighlightId())?(i=this.getMetadata().getWidget(a).getLensId(),e.createsNewStep()&&null!=i?this._runtime.addSubscriber(new B(Re,i,ze.partial(this._afterPerformWidgetAction,r,a,i))):this._afterPerformWidgetAction(r,a)):void 0)},_afterPerformWidgetAction:function(e,t,r){var i;return null!=r&&this._runtime.removeSubscriber(Re+"_"+r),i=this._widgetSelector.selectWidget(t,e,this.state.selectedWidgetIds),this.setState(i),this.setState({widgetToHighlightId:t}),this._setRightPanelMode(c.WIDGET_PROPERTIES,!1)},_onClickDeleteWidgetAction:function(){return this._onDeleteWidget(this._getSelectedWidgets())},_onDeleteWidget:function(e){return new J({numOfLayouts:this.getMetadata().getLayouts().length,getRuntimeLens:this._getRuntimeLens,executeMutators:this._executeMutators,onDeleteComplete:this._onDeleteComplete,showModal:this._showModal,closeModal:this._closeModal,numOfFilters:this._runtime.getGlobalFilterManager().getFilters().length,metadataHolder:this.state.metadataHolder,lensActions:this._lensActions}).deleteWidgets(e)},_onDeleteComplete:function(){if(this._setRightPanelMode(c.STEP_LIST,!0),null!=this.state.modal)return this._closeModal()},_getSelectedWidgets:function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.state.selectedWidgetIds).length;t<r;t++)e=i[t],null!=this._widgets[e]&&s.push(this._widgets[e]);return s},_getWidget:function(e){return this._widgets[e]},_generateWidgetId:function(e,t){return this.state.metadataHolder.generateWidgetId(e,t)},_setModal:function(e){return this.setState({modalContents:e})},_renderModal:function(){var e,t,r,i;if(!ze.isEmpty(this.state.modalContents))return r=(i=this.state.modalContents).title,t=i.message,e=i.additionalClassName,new Ee(ze.partial(this._setModal,{})).makeWarningModal(r,t,e)},_showModal:function(e){return this.setState({modal:e})},_closeModal:function(e){return this.setState({modal:void 0},ze.isFunction(e)?e:void 0)},_closeViewInCRMA:function(){var e,t;return null!=(e=this.props.delegate._viewManager)&&null!=(t=e.getSelectedView())?t.close():void 0},_handleUncaughtException:function(e){if(null==this.props.onCrashed)throw e;return this._hasError=!0,this.props.onCrashed(e)},_getUncaughtExceptionEventString:function(){return"dashboard:uncaught-exception-"+this.props.metadata.getId()},_getLayoutOuterContainerInlineStyle:function(){var e;return{maxWidth:this.props.isEditMode||this.state.isPreviewingDashboard?null!=(e=this._getCurrentLayout().getSelector(S.Type.MAX_WIDTH))?e.getValue():void 0:{}}},_getScrollTrackingElement$:function(){return i(".layout-inner-container",He(this))},_setPluginState:function(e,t,r){return this.setState((function(r,i){var s;return(s=ze.extend({},r.plugins))[e]=ze.extend({},s[e],t),{plugins:s}}),r)},_getLastResult:function(e){return this._getRuntimeLens(e).getLastResult()},_onLensActionStart:function(e,t,r){return this.setState({selectedLens:this._lensActions.buildLensForExplorer(e,t,r)})},_onLensActionComplete:function(e){var t,r,i,s;return i=e.stepId,s=e.widgetId,r=e.didQueryChange,t=e.clearSelectedWidget,r?this._runtime.addSubscriber(new B(Re,i,this._updateWidgetAfterLensResults.bind(this,i,s)),!0,!1):(this.setState({selectedLens:void 0}),t?this._updateSelectedWidgets([]):void 0)},_onDidAttachLensToWidget:function(e){var t;if(!ze.some(this.getMetadata().getWidgets(),(function(t){return t.getLensId()===e})))return(t=this._getRuntimeLens(e)).isStarted()?(t.callCapabilityMethod(k.SELECTION,"doFireInitialSelection"),t.callCapabilityMethod(k.SELECTION,"fireDefaultSelections")):void 0},_updateWidgetAfterLensResults:function(e,t){return this._runtime.removeSubscriber(Re+"_"+e),this._lensActions.attachToWidgets(this._runtime.getLens(e),this.getMetadata().getLens(e).getAttachedWidgets().map((function(e){return e.getId()})),!1),this._setRightPanelMode(c.WIDGET_PROPERTIES,null==t),this._endStepCreation()},_onLensResultReady:function(e,t){return this._runtime.removeSubscriber(Re+"_"+e),null!=t&&this._lensActions.attachToWidgets(this._runtime.getLens(e),[t]),this._setRightPanelMode(c.WIDGET_PROPERTIES,null==t),this._endStepCreation()},_addClippedLens:function(e,t,r,i,s,n){var o,l;if(null==n&&(n=!1),new R({state:e}).getLenses().some((l=this,function(e){return(new Me).canClip(e,l.props.metadata,s,n)})))return o=new a(e,t,r,i),this.props.isEditMode&&this._getRightPanelMode()===c.STEP_LIST?this._addClippedLensFromExplorer(o):(this._clippedLensQueue.push(o),this.props.isEditMode?this._setRightPanelMode(c.STEP_LIST,!0):this.props.view.setMode(Y.EDIT)),this._setRightPanelMode(c.STEP_LIST,!0)},_addClippedLensFromExplorer:function(e){var t,r,i,s;return s=e.lensState,t=e.datasetReferences,r=e.label,i=e.lensAssetOnlyXmdJson,this._lensActions.addFromExplorer(s,t,r,i)},_onAddStep:function(e,t,r,i,s,n){return this._lensActions.add(t,r,i,s,void 0,n),null==this._getRuntimeLens(t).getLastResult()?this._runtime.addSubscriber(new B(Re,t,this._onLensResultReady.bind(this,t,e))):(e&&this._lensActions.attachToWidgets(this._runtime.getLens(t),[e]),this._endStepCreation())},_onAttachExistingStep:function(e,t){return this._runtimeActions.startLens(t).then((r=this,function(){return e&&r._lensActions.attachToWidgets(r._runtime.getLens(t),[e]),r._onDidAttachLensToWidget(t),r._endStepCreation()}));var r},_populateWidget:function(e,t){var r;return null==t&&(t=!0),this._openQueryBuilder(e,t,null!=(r=ze.last(this.getMetadata().getDatasetReferences()))?r.getId():void 0,s.DATASET)},_openQueryBuilder:function(e,t,r,i,s){var n,o;return null==t&&(t=!0),null==s&&(s=!1),n=null!=e&&ee.fromCode(this.getMetadata().getWidget(e).getType())===ee.IMAGE?{showStepCreationWizard:!1,isShowingImageManagerModal:!0}:{showStepCreationWizard:!0,isShowingImageManagerModal:!1},this.setState(ze.extend(n,{selectedWidgetId:e,showDefaultDataset:t,stepCreationAssetId:r,stepCreationAssetType:i,showStaticStepCreation:s})),"function"==typeof(o=this.props.view).setHotkeySuppressed?o.setHotkeySuppressed(!0):void 0},_endStepCreation:function(){var e;return this.setState({selectedWidgetId:void 0,showStepCreationWizard:!1,stepCreationAssetId:void 0,stepCreationAssetType:void 0,showStaticStepCreation:!1,isShowingImageManagerModal:!1,selectedLens:void 0}),"function"==typeof(e=this.props.view).setHotkeySuppressed?e.setHotkeySuppressed(!1):void 0},_onUploadComplete:function(e,t){return this._executeMutators([new Q(this.state.selectedWidgetId,{image:t})]),this._endStepCreation()},_fetchImageUrl:function(){var e,t;return this.getMetadata().hasLayout(this._getCurrentLayoutName())?(e=new T(this._getCurrentLayout()).getBackgroundImageStyle(),this._fetchImageInfoPromise=new o(this._getImageManager().fetchImageInfo({name:e.getImageId(),namespace:e.getNamespace()},!0)),this._fetchImageInfoPromise.getPromise().then((t=this,function(e){var r;if(e.url)return(r=new Image).onload=function(){return t.setState({layoutImageUrl:e.url})},r.onerror=function(){return t.setState({didLayoutImageFailToLoad:!0})},r.src=e.url,e.url}),(function(e){if(!e.isCanceled)throw e}))):Promise.resolve()},_getImageManagerDelegate:function(){return{getImageManager:(e=this,function(){return e._getImageManager()}),onImageUpdate:function(e){return function(){return e._fetchImageUrl()}}(this)};var e},_getImageManager:function(){return null!=this._imageManager?this._imageManager:this._imageManager=new Ze(this.state.metadataHolder)},_onSelectPage:function(e){return this._layoutSwitcher.switchTo({layoutName:this._getCurrentLayoutName(),pageIndex:this._getCurrentLayout().getPageById(e).getIndex()})},_getDashboardFilterManagerId:function(){return this._runtime.getGlobalFilterManager().getId()},_removeFilters:function(e,t){return this._runtimeActions.removeGlobalFilters(e,t)},_resetRuntime:function(){var e,t,r;return r=this.props.currentSavedView,e=this._resetComponents(),t=this._runtimeActions.reset({layoutName:this._getCurrentLayoutName(),pageIndex:this._getCurrentPageIndex(),savedView:r}),Promise.all([t].concat(Ye.call(e)))},_openSaveModal:function(){var e,t,r;if(e=this.props.delegate.getHeaderActions(this._getViewConfig(),this.getMetadata(),this._getCurrentLayoutName(),this._commandInvoker,this._pluginManager),t=ze.flatten(e.mainActions),r=ze.find(t,{_id:"save"}))return r._onClick()},_addComponent:function(e){var t;return t=e.getComponentName(),this._componentRuntimes.set(t,e.getComponentRuntime()),this._componentWidgetSdks.set(t,e)},_removeComponent:function(e,t){if(null==t&&(t=!1),this._componentWidgetSdks.delete(e),!t)return this._componentRuntimes.delete(e)},_addReportComponent:function(e,t){return this._componentWidgetSdks.set(t,e)},_removeReportComponent:function(e,t){return null==t&&(t=!1),this._componentWidgetSdks.delete(e)},_addTableauComponent:function(e){var t;return t=e.getComponentName(),this._runtime.getTableauParameterManager().addTableauComponent(t,e)},_removeTableauComponent:function(e){return this._runtime.getTableauParameterManager().removeTableauComponent(e)},_getTableauComponentSdk:function(e){return this._runtime.getTableauParameterManager().getTableauComponentSdks().get(e)},_getComponentWidgetSdk:function(e){return this._componentWidgetSdks.get(e)},_getComponentSdk:function(e){var t;return null!=(t=this._getComponentWidgetSdk(e))?t.getComponentSdk():void 0},_getComponentDescribes:function(){var e,t,r;return e=Array.from(this._componentWidgetSdks.entries()).reduce((function(e,t){return e.set(t[0],t[1].getComponentDescribe()),e}),new Map),null!=(t=this._initialComponentRuntimeBuilderResults)&&t.forEach((r=this,function(t,i){if(!e.has(i))return e.set(i,new m({runtime:t.getRuntime(),getCurrentPageIndex:function(){return t.getPageIndex()},getCurrentLayout:function(){return r._getMetadataHolder().getComponentMetadata(i).getLayout()}}))})),e},_resetComponents:function(){return Array.from(this._componentWidgetSdks.values()).map((e=this,function(t){return t.resetComponentPage(e.props.currentSavedView)}));var e},_onUpdateViewportWidgets:function(e){var t,r,i,s;if(t=new Set,e.forEach((s=this,function(e){if(s._getWidget(e))return t.add(e)})),r=Array.from(t),this._runtimeActions.setPrioritizedLenses(r,null!=(i=this.props.externalState)?i.state:void 0,this.props.currentSavedView),!this._didAddVisibleWidgetsFilter)return this._runtime.addFilter(["visibleWidgetsReadyFilter",this._runtime.getNamespace()].filter(Boolean).join("-"),new te(r,function(e){return function(){return e._visibleWidgetsReadyDef.resolve(r)}}(this)),{cachedMessageTopics:[new be(G.WIDGET_READY),new be(G.DASHBOARD_READY)]}),this._didAddVisibleWidgetsFilter=!0},_updateSelectedWidgets:function(e){return this.setState({selectedWidgetIds:e})},_getPostLoadMetrics:function(){var e,t;return e=(t=this._runtime.getCacheFilter().getByMessageType(G.RESULT).map((function(e){return e.getMessage()})).filter((function(e){var t;return!e.isError()&&((t=e.getResult().getQueryResult())instanceof De||t instanceof Le)})).map((function(e){return e.getResult().getQueryResult()}))).filter((function(e){return e.wasCached()})),{numQueriesOnPageLoad:t.length,numCachedQueriesOnPageLoad:e.length}},_isViewportRendering:function(){return oe.isOpen("einstein.analytics.ui.viewportRendering")&&this.props.viewportRendering}})},66043:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v;b=r(57715).Z,r(72555),f=r(67294),_=r(45697),y=r(73935),I=r(96486),i=r(70351),r(18111),h=r(64031).Z,p=r(8429).Z,E=r(32574),r(8902),m=r(32350),r(64259).a,r(57244).Z,r(61506).Z,s=r(87418).Z,r(25884).Z,c=r(11040).Z,(v=r(90493)).PERSONAL_SETTING_PAGE,v.PERSONAL_SETTING_CLASSIC_PAGE,o=r(67427).Z,d=r(56191),n=r(76438),T=r(13822).Z,l=r(21891).Z,C=r(5817).Z,a=r(84956).Z,u=r(61476).Z,S=r(17900).Z,r(81020),g=["widget","widgetLayout","resolvedWidget"],e.exports={propTypes:{isViewMode:_.bool.isRequired,widget:_.instanceOf(s).isRequired,widgetLayout:_.instanceOf(c).isRequired,viewMode:_.instanceOf(d).isRequired,widgetDefinition:_.instanceOf(n).isRequired,runtimeSubscriber:_.instanceOf(o).isRequired,ignoreWidgetRenderedClass:_.bool},getInitialState:function(){return{resultMessage:void 0,widgetStatus:T.IDLE}},UNSAFE_componentWillMount:function(){var e;return this._updateManager=null!=(null!=(e=this.props.dashboardDescribe)?e.getCommandInvoker():void 0)?new u(this.props.widget,this.props.dashboardDescribe.getCommandInvoker()):void 0},componentDidMount:function(){return this._subscribeToMessages(),this._appendWidgetRenderedClassName()},UNSAFE_componentWillReceiveProps:function(e){var t;return null!=(t=this._updateManager)?t.onUpdateWidget(e.widget):void 0},componentDidUpdate:function(e){return e.runtimeSubscriber!==this.props.runtimeSubscriber&&(this._unsubscribeFromMessages(e.runtimeSubscriber),this._subscribeToMessages()),this._appendWidgetRenderedClassName()},componentWillUnmount:function(){return this._isWidgetReady||this._setWidgetReady(),this._unsubscribeFromMessages(this.props.runtimeSubscriber)},render:function(){var e,t,r,i,s,n,o,u,d,c,m,_,y,b,S;if(this._hasNewResultMessage=!1,this._lastRenderedMetadataProps={},null!=this.state.resultMessage&&this.state.resultMessage.isError()&&!this._shouldRenderWidgetOnError())return null!=(o=this._renderSpinner("base",C.MEDIUM))?o:null!=(r="function"==typeof(d=this.props).renderOnWidgetError?d.renderOnWidgetError(this.state.resultMessage.getErrorMessage(),l.fromCode(this.props.widget.getType()),this.props.widgetLayout.getGridLayout().getName()):void 0)?r:(i=null!=(_=this.state.resultMessage.getResult())&&null!=(y=_.getError())?y.errorCode:void 0,e=h.hasCode(i)?h.fromCode(i):null,f.createElement(a,{widget:this.props.widget,isViewMode:this.props.isViewMode,errorCode:e,errorMessage:this.state.resultMessage.getErrorMessage()}));if(null==this.state.resultMessage||this.state.resultMessage.isError()||0!==this.state.resultMessage.getData().length||this.props.widgetDefinition.shouldRenderWidgetOnNoData()){for(c=0,m=g.length;c<m;c++)t=g[c],null!=this.props[t]&&(this._lastRenderedMetadataProps[t]=JSON.stringify(this.props[t].getJson()));return this._render()}return s=E.buildClassName("noResultsPlaceholder","default",this.props.viewMode.getClassName()),u=null!=(b="function"==typeof this._getTitle?this._getTitle():void 0)?b:this.props.resolvedWidget.getParameter("title"),n=null!=(S="function"==typeof this._getNoResultsText?this._getNoResultsText():void 0)?S:p.getLabel("EclairNgChartLabels","noData"),f.createElement("div",{className:s,style:this.props.resolvedWidgetInlineStyle},f.createElement("div",{className:"title"},f.createElement("span",null,u)),f.createElement("div",{className:"message"},f.createElement("span",null,n)))},_hasWidgetChanged:function(e,t){var r,i,s,n,o,a;for(i=0,s=(n=["isViewMode","viewMode","viewportRendering","themedStyle","resolvedWidgetInlineStyle"]).length;i<s;i++)if(r=n[i],!I.isEqual(e[r],this.props[r]))return!0;return!!this._hasWidgetMetadataChanged(e)||(!I.isEqual(this.state,t)||(null!=(o=e.widget.getLens())&&"function"==typeof o.getSelectMode?o.getSelectMode():void 0)!==(null!=(a=this.props.widget.getLens())&&"function"==typeof a.getSelectMode?a.getSelectMode():void 0))},_hasWidgetMetadataChanged:function(e){var t,r,i,s,n;for(r=0,i=g.length;r<i;r++)if(t=g[r],JSON.stringify(null!=(s=e[t])?s.getJson():void 0)!==(null!=(n=this._lastRenderedMetadataProps)?n[t]:void 0))return!0;return!1},_hasAllUpdates:function(e){return null==e&&(e=!0),null==this._updateManager||this._updateManager.hasAllUpdates(e)},_widgetStatusRequiresUpdate:function(e,t){return t.widgetStatus!==this.state.widgetStatus&&(t.widgetStatus===T.QUERYING||t.widgetStatus===T.PAUSED||this.state.widgetStatus===T.PAUSED)},_perhapsShouldComponentUpdate:function(e,t){return this._hasNewResultMessage||this._hasWidgetChanged(e,t)},_shouldRenderWidgetOnError:function(){return this.props.widgetDefinition.shouldRenderWidgetOnError()||this.props.widget.getParameter("shouldRenderWidgetOnError")},_renderSpinner:function(e,t){var r;if(null==e&&(e="base"),this.state.widgetStatus===T.QUERYING&&(r=t||C.fromSizeThreshold(this._getInnerDimensions().height))!==C.XSMALL)return f.createElement(f.Fragment,null,f.createElement(b,{variant:e,className:"dashboard-widget-spinner",size:r.code}))},_renderSpinnerOverlay:function(){if(this.state.widgetStatus===T.QUERYING)return f.createElement("div",{className:"slds-spinner_container"})},_renderOverlayWhenPaused:function(){if(this.state.widgetStatus===T.PAUSED)return f.createElement(S,null)},_onResultOuter:function(e){var t,r;if(this.state.widgetStatus!==T.PAUSED){if(this._hasNewResultMessage=!0,e.isError())return this.setState({resultMessage:e}),void(this._shouldRenderWidgetOnError()||this._setWidgetRendered());if(null==e.getSearchSubscriberId()||this.props.widget.getId()===e.getSearchSubscriberId())return this._setWidgetFinalState(!1),null!=(r=this._updateManager)&&r.onUpdateResults(e),t=this._onResult(e),this.setState(Object.assign({resultMessage:e},t))}},_guardForUncaughtException:function(e){var t;return t=this.props.widget.getDashboardId(),function(){var r;try{return e.apply(null,arguments)}catch(e){return r=e,m.trigger("dashboard:uncaught-exception-"+t,r)}}},_appendWidgetRenderedClassName:function(){if(!this.props.ignoreWidgetRenderedClass)return i(y.findDOMNode(this)).addClass(E.classSet({widgetReady:!0,finalState:this._inFinalState})),i(y.findDOMNode(this)).toggleClass("disable-mouse",!this.props.isViewMode)},_setWidgetFinalState:function(e){return this._inFinalState=e,this._appendWidgetRenderedClassName()},_setWidgetRendered:function(){if(!this._inFinalState)return this._setWidgetFinalState(!0),this._hasAllUpdates()?this._setWidgetReady():void 0},_setWidgetReady:function(){var e;return this._isWidgetReady=!0,null!=(e=this.props.runtimeSubscriber)?e.onWidgetReady():void 0},_getInnerDimensions:function(e,t){var r,s,n,o,a,l,u,d,c,h,p;if(null==e&&(e=this.props),null==t&&(t=this.state),a=e.width,o=e.height,isNaN(a)&&(a=i(y.findDOMNode(this)).width()),isNaN(o)&&(o=i(y.findDOMNode(this)).height()),!I.isEmpty(e.resolvedWidgetInlineStyle))if(e.resolvedWidgetInlineStyle.borderWidth>0)a-=2*e.resolvedWidgetInlineStyle.borderWidth,o-=2*e.resolvedWidgetInlineStyle.borderWidth;else{for(l=0,d=(h=["Left","Right"]).length;l<d;l++)r=h[l],(n=e.resolvedWidgetInlineStyle["border"+r+"Width"])>0&&(a-=n);for(u=0,c=(p=["Top","Bottom"]).length;u<c;u++)r=p[u],(s=e.resolvedWidgetInlineStyle["border"+r+"Width"])>0&&(o-=s)}return{width:Math.max(0,a)||0,height:Math.max(0,o)||0}},_onStatusChange:function(e){var t;if(t=null!=this._updateManager?this._updateManager.onUpdateStatus(e,this.props.widget):this.state.widgetStatus,this.state.widgetStatus!==t)return this.setState({widgetStatus:t})},_subscribeToMessages:function(){var e;return null!=(e=this.props.runtimeSubscriber)?e.attachWidget({onResult:this._onResultOuter,onStatusChange:this._onStatusChange}):void 0},_unsubscribeFromMessages:function(e){return null!=e?e.detachWidget({onResult:this._onResultOuter,onStatusChange:this._onStatusChange}):void 0}}},25778:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v=function(e,t){return function(){return e.apply(t,arguments)}};y=r(70982),T=r(32387),I=r(17619),S=I.mapApi,E=I.geoJsonApi,C=r(98663),n=r(18111),_=r(61506).Z,c=r(50760),i=r(54871).Z,p=r(8429).Z,u=r(27393).Z,l=r(36563),s=r(16582),g=r(45455).ZP,d=r(59678).ZP,m=r(39713).Z,a=r(19422),f="/node_modules/@salesforce/charts",o="force-cache",h=["waterfallTotal","insufficientSpace","noData","noValues","measure","total","range","percentTooltip","percentTooltipWithGroup","other","enableDataTable","dataTableEnabled","invalidGeoJSON","invalidMap","nullLabel","low","medium","high"],e.exports={get:function(){return null!=this._instance?this._instance:this._instance=new b}},b=function(){function e(){this._loadCustomMapsRemote=v(this._loadCustomMapsRemote,this),this._mapRecordToDefinition=v(this._mapRecordToDefinition,this),this._loadCustomMapsLocal=v(this._loadCustomMapsLocal,this)}return e.prototype.ready=function(){return null!=this._readyPromise?this._readyPromise:this._readyPromise=_.get(n).isCmsMode()?y.ready().then(this._initialSetup.bind(this)).then(this._configureModuleLoaderRemote):y.ready().then(this._initialSetup.bind(this)).then(this._configureModuleLoaderLocal)},e.prototype.loadMaps=function(){return null!=this._mapPromise?this._mapPromise:this._mapPromise=_.get(n).isCmsMode()?y.ready().then(this._loadDefaultMapsRemote).then(this._loadCustomMapsRemote):y.ready().then(this._loadDefaultMapsLocal).then(this._loadCustomMapsLocal)},e.prototype.getFiscalGranularity=function(){return null!=this._fiscalGranularityPromise?this._fiscalGranularityPromise:this._fiscalGranularityPromise=(new u).getFiscalGranularity()},e.prototype._initialSetup=function(){var e;return l.setWaveChartType(a),e=_.get(n),this._setLabels(),this._registerImageValidator(),y.getSettings().setResourcesPath(e.getWaveChartsResourcesPath()),y.registerTheme(C),y.setLocale(e.getAppUser().getLocale()),T.sldsIconsPath=e.getSLDSIconsPath(),T.analyticsSpriteUrl=s},e.prototype._setLabels=function(){var e,t,r,i;for(t={},r=0,i=h.length;r<i;r++)t[e=h[r]]=p.getLabel("EclairNgChartLabels",e);return y.setLabels({"@salesforce/charts":t})},e.prototype.getWaveChartsModulePath=function(){return f},e.prototype._registerImageValidator=function(){return y.__getPrivateApi().registerImageValidator(c.getImageValidator())},e.prototype._loadDefaultMapsLocal=function(){var e;return e=y.__getPrivateApi().registerDefaultMaps({prefix:f+"/"}),Promise.resolve(e)},e.prototype._loadCustomMapsLocal=function(){var e,t,r,i,s,n,o;if(m.canHaveCustomMaps()){for(t={label:"World Countries",name:"world_countries",url:f+"/geojson/sfdc/world-countries.geo.json"},o=[],s=0,n=(i=[{name:"North America",label:"North America",projection:"Mercator",boundingBox:{left:-170.2,bottom:6,right:-32,top:72},geoData:{id:e=E.syncUpsert(t).id}},{name:"North America",label:"North America",namespace:"OrgA",projection:"Mercator",boundingBox:{left:-170.2,bottom:6,right:-32,top:72},geoData:{id:e}},{name:"North America",label:"North America",namespace:"OrgB",projection:"Mercator",boundingBox:{left:-170.2,bottom:6,right:-32,top:72},geoData:{id:e}},{name:"Africa",label:"Africa",projection:"Mercator",boundingBox:{left:-18,bottom:-35.5,right:52,top:38},geoData:{id:e}}]).length;s<n;s++)r=i[s],r=S.syncUpsert(r),o.push(y.__getPrivateApi().registerMap(this._mapRecordToDefinition(r)));return o}},e.prototype._mapRecordToDefinition=function(e,t){var r,i,s,n,o,a,l;return s=e.id,o=e.name,n=e.label,a=e.namespace,l=e.projection,r=e.boundingBox,i=e.geoData,r=r&&r.top&&r.left&&r.right&&r.left?r:void 0,{name:m.getCustomMapJsonName(o,a),projection:l,boundingBox:r,geoJson:{url:i.id,metadata:{id:i.id},loader:t},metadata:{id:s,name:o,namespace:a,label:n,isCustom:!0}}},e.prototype._configureModuleLoaderLocal=function(){return y.configureModuleLoader({prefix:"/node_modules/@salesforce/charts",resourceLoader:function(e){return i.fetch(e,{cache:o})}})},e.prototype._configureModuleLoaderRemote=function(){var e;return e="undefined"!=typeof $A&&null!=$A.lockerService?function(e,t){return $A.lockerService.create("return (function(register){"+e+"})",Object.create(null)).returnValue(t)}:void 0,y.configureModuleLoader({prefix:_.get(n).getWaveChartsResourcesPath(),resourceLoader:function(e){return i.fetch(e,{cache:o})},scriptEvaluator:e})},e.prototype._loadDefaultMapsRemote=function(){var e;return e=y.__getPrivateApi().registerDefaultMaps({prefix:_.get(n).getWaveChartsResourcesPath()+"/",geoJsonLoader:function(e){return i.fetch(e,{cache:o})}}),Promise.resolve(e)},e.prototype._loadCustomMapsRemote=function(){var e;if(m.canHaveCustomMaps())return _.get(g).getAll().then((e=this,function(t){var r,i;return e._isError(t)?(console.warn(response.gackId+": "+response.message),Promise.resolve([])):(i=function(){var e,i,s;for(s=[],e=0,i=t.length;e<i;e++)r=t[e],s.push(y.__getPrivateApi().registerMap(this._mapRecordToDefinition(r,(function(e){return _.get(d).getFile(e)}))));return s}.call(e),Promise.resolve(i))})).catch((function(e){return Promise.resolve([])}))},e.prototype._isError=function(e){return null!==e.gackId&&void 0!==e.gackId},e}()},55430:(e,t,r)=>{var i,s,n;i=r(40651).Z,n=r(4033),s=r(75263),e.exports={getProfilePhotoUrl:function(e){var t;return null!=(t=null!=e?e.profilePhotoUrl:void 0)?t:s},getDefaultVisualizationType:function(){return"hbar"},getResultThumbUrl:function(e,t){var s,n;return null==t&&(t=this.getDefaultVisualizationType()),s=e instanceof i?e:i.fromCode(e),n=function(){switch(s){case i.LENS:return"chart-"+t;case i.DATASET:return"edgemart";case i.DASHBOARD:case i.STORY:case i.DASHBOARD_SNAPSHOT:case i.LIGHTNING_DASHBOARD:case i.DASHBOARD_SAVED_VIEW:return"dashboard";case i.COMPONENT:return"component";case i.FOLDER:case i.LIGHTNING_REPORT_FOLDER:case i.LIGHTNING_DASHBOARD_FOLDER:return"application";case i.EXTERNAL_DATA:return"edgemart-csv";case i.REPORT:return"report";case i.TABLEAU_DASHBOARD:case i.TABLEAU_WORKBOOK:return"dashboard";case i.FLOW:return"flow";default:throw new Error('Invalid asset type: "'+s.getCode()+'".')}}(),r(26585)("./thumb-"+n+".png")},getAssetIconUrl:function(e,t){var r,s;switch(null!=e&&(t||(t=e.getType())),r=t instanceof i?t:i.fromCode(t)){case i.FOLDER:case i.TEMPLATE:return e.isUserPrivateAsset()?n:null!=(s=e.getIcon())?s.url:void 0;case i.STORY:return e.getStatus().getIconUrl();default:return this.getResultThumbUrl(r,null!=e&&"function"==typeof e.getVisualizationType?e.getVisualizationType():void 0)}},getAssetPreviewThumbUrl:function(e){var t,r,s,n,o,a,l;for(o=null,s=0,a=0,l=(r=e.getFiles()).length;a<l;a++)if("assetPreviewThumb"===(t=r[a]).fileName||e.getType()===i.TABLEAU_DASHBOARD&&"thumbnail"===t.fileName){o=t.url,s=t.lastModifiedDate;break}return o&&-1===(n=o).indexOf("lastModified")&&0!==o.indexOf("data:")&&(n+="?lastModified="+s),n}}},44298:e=>{e.exports={MAX_NUMBER_OF_GRAINTABLE_DIMS:5,MAX_NUMBER_OF_GRAINTABLE_MEAS:5,BAR_TEXT_MIN_PADDING:25,SCATTER_DEFAULT_RADIUS:10,SCATTER_DEFAULT_PADDING:15,WATERMARK_DOT_RADIUS:3,LEGEND_WIDTH:145,MIN_LEGEND_WIDTH:50,MAX_LEGEND_WIDTH:300,MENU_PADDING:3,KEY_SEPARATOR:"||",SELECTMODE_NONE:"none",SELECTMODE_SINGLE:"single",SELECTMODE_MULTI:"multi",SELECTMODE_SINGLE_REQUIRED:"single_required",SELECTMODE_MULTI_REQUIRED:"multi_required",SELECTMODE_LEGEND_MULTI:"legend_multi",SELECTMODE_LEGEND_SINGLE:"legend_single",CHART_OPTION_TYPE:{BOOLEAN:"boolean",CHARTTYPE:"chartType",CHOICE:"choice",COLOR:"color",DASHBOARD:"dashboard",INT:"int",LENS:"lens",STEP:"step",STRING:"string",TEXT:"text"},FORMAT_PERCENT_MEASURE_NAME:"_#_percent_#_",FORMAT_CURRENCY_CENTS_MEASURE_NAME:"_#_currency_cents_#_",FORMAT_CURRENCY_DOLLARS_MEASURE_NAME:"_#_currency_dollars_#_",TYPE_MEASURE:"measure",TYPE_DIMENSION:"dimension",TYPE_AGGREGATE:"aggregate",DIM_TYPE:{ALL:"all",DATE:"date",RANGE:"range",STANDARD:"standard",GEO:"geo"},YEAR_TYPE:{CALENDAR:"calendar",FISCAL:"fiscal"},DATE_TYPE_KEY:{DIMENSION:{YEAR:"year",QUARTER:"quarter",MONTH:"month",WEEK:"week",DAY:"day",HOUR:"hour",MINUTE:"minute",SECOND:"second",YEAR_FISCAL:"year_fiscal",QUARTER_FISCAL:"quarter_fiscal",MONTH_FISCAL:"month_fiscal",WEEK_FISCAL:"week_fiscal",FULLFIELD:"fullField"},MEASURE:{EPOCH_DAY:"epoch_day",EPOCH_SECOND:"epoch_second"}},SORT:{ASC:"asc",DESC:"desc",OFF:"neither"},AGGTYPES:{COUNT:"count",SUM:"sum",AVG:"avg",MAX:"max",MIN:"min",UNIQUE:"unique",MEDIAN:"median",FIRST:"first",LAST:"last",STDDEV:"stddev",STDDEVP:"stddevp",VAR:"var",VARP:"varp"},DRILL_TYPE_FULL:0,DRILL_TYPE_LINE:1,DRILL_TYPE_COLUMN:2,DRILL_TYPE_ROW:3,DRILL_TYPE_CELL:4,DRILL_NO_ACTION:5,DATE_GRAIN_YEAR:0,DATE_GRAIN_QUARTER:1,DATE_GRAIN_MONTH:2,DATE_GRAIN_DAY:3,CALENDAR_BORDER_COLOR:"#bebebe",PASTE_TYPE_CHART:0,PASTE_TYPE_FILTERS:1,PASTE_TYPE_GROUPS:2,DURATION_MENU_FADEOUT:200,DURATION_DELETE_CONTROLBAR_ITEM:160,DURATION_SWAP_CONTROLBAR_ITEM:160,DURATION_SWAP_VALUESTABLE_COLUMN:200,DURATION_ANIM_DEFAULT:800,DURATION_CANVAS_SELECT:500,WIDGET_MIN_W:function(e){return e?20:130},WIDGET_MIN_H:function(e){return e?20:30},DIM_FILTER_OPERATORS:["operator_equals","operator_not_equals","operator_contains"],MEA_FILTER_OPERATORS:["operator_between","operator_greater","operator_greater_equal","operator_less","operator_less_equal","operator_equals","operator_not_equals","operator_is_null","operator_is_not_null"],DATE_RANGE_OPERATORS:["operator_between","operator_greater_equal","operator_less_equal"],SLIDER_SUPPRESS_NO:0,SLIDER_SUPPRESS_LEFT:1,SLIDER_SUPPRESS_RIGHT:2,SLIDER_SUPPRESS_BOTH:3,SLIDER_SUPPRESS_ALL:4,EDGE_OPTINOS_FOR_NATIVE_EVENT:"SOME_UNIQUE_THING||EDGE_OPTINOS_FOR_NATIVE_EVENT",ERROR_LEVEL:{SEVERE:"severe",WARNING:"warning"},ERROR_EDGEMART_NOT_FOUND:"EDGEMART_NOT_FOUND",ERROR_EDGEMART_XMD_NOT_FOUND:"EDGEMART_XMD_NOT_FOUND",DATA_PREP_RECIPE_STEP_LIMIT:100,DATA_PREP_COLUMN_SAMPLE_LIMIT:100,DATA_PREP_DEFAULT_CHUNK_SIZE:2e3,DATA_PREP_DEFAULT_FIELDS_TO_SAMPLE:40}},29946:e=>{e.exports={core:{pollingNotifications:36e5,maxNumberGroups:4,maxNumberMeasures:4,maxDashboardPages:20,maxConditionalFormattingBins:10,maxParallelRequests:6,maxParallelRequestsForHighConcurrency:10,cmsMode:!1,resourcesPath:"/WaveCommon/static",staticResourcesPath:"/insights/gen/static/",waveChartsResourcesPath:"../projRes/insights/gen/static/charts",appRoot:"/",imageUrl:"",validImageUrlDomains:[],trialUrl:"/home/home.jsp",communityId:"",isInCommunityContext:!1,sitePrefix:"",isOnConsole:"",trialDaysLeft:99,documentImageUrl:"./proto/images/placeholder_appview_image.jpeg?id=",crossOrigins:[],formattedQueryServletUrl:"http://httpbin.org/servlet/FormattedQueryServlet",isCdnEnabled:!1,routing:{rootPath:"/Client/ui/wave.html",sanitizedPath:void 0},visualforce:{urlTemplate:"http://httpbin.org/post?noNamespace&devname={1}",namespacedUrlTemplate:"http://httpbin.org/post?namespace={0}&devname={1}"},timezone:{defaultSource:"GMT",defaultTarget:"GMT",options:[{label:"(GMT+00:00) Greenwich Mean Time (GMT)",value:"GMT"}],defaultDashboard:"GMT"},recipeExtensions:[{namespace:"industries_mfg",name:"RebatesExpression",hasAccess:!0},{namespace:"industries_mfg",name:"RebatesExpression_formula",hasAccess:!0}],learn:{releaseNotes:"releaseNotes",continueLearning:"continueLearning",gettingStarted:"gettingStarted",whatsNew:"https://releasenotes.docs.salesforce.com/en-us/spring19/release-notes/rn_bi_analytics_cloud.htm",learningMap:"http://einsteinanalyticslearningmap.com"},perms:{canUseWave:!0,userCanUseInsights:!0,userHasInsightsAdmin:!1,devMode:!1,orgHasLightningExperienceEnabled:!0,userCanCreateInsightsApplication:!0,canShareApp:!0,showAppTemplateJsonEditor:!1,canManageTemplatesInStudio:!1,userHasChatterEnabled:!0,isInPortalContext:!1,orgHasWaveCommunityAccess:!1,orgHasCommonPrmEnabled:!1,orgHasCommonCspEnabled:!1,userHasFullInsightsApp:!0,canUseAppTemplatingFramework:!0,ViewAllData:!1,userCanUseWaveTabularDownload:!0,userCanShareAnalyticsImages:!1,canUseWaveChatter:!0,userCanUseWaveNotifications:!0,userCanUseSubscriptionEmails:!0,userCanAddNotificationRecipients:!0,orgHasSecureImageSharing:!1,userCanEditDashboard:!0,orgHasDashboardSavedView:!0,orgHasWaveRepeaterWidget:!0,orgHasReportComponentInDashboard:!0,userCanEditLenses:!0,orgHasCustomChoropleth:!0,orgHasEclairNGApi:!0,userCanManageMaps:!0,canCreateEdgemart:!0,userCanEditEdgeMarts:!0,canEditExternalData:!0,canExtractSFDC:!0,canScheduleWorkflow:!0,canUploadExternalData:!0,canUploadWorkflow:!0,canViewDataflows:!0,canViewWorkflowAndNodes:!0,canWriteDataflowViaAPI:!0,orgCanScheduleSubHourly:!1,orgHasWaveNullMeaEnabled:!1,userCanCreateWorkflow:!0,userCanDeleteWorkflow:!0,orgHasWaveNullDimensionSAQLEnabled:!1,WaveQueryReserved11:!1,canUseWaveSparkELT:!0,canUseWavePublishToIoT:!1,canUseSentimentAnalysisRecipes:!1,canUseDataPrep:!0,canUseFullDataPrep:!0,canUseDataPrepPilot:!1,orgHasFirebirdEditor:!0,orgHasEtlOrchestration:!0,orgHasReplicationEnabled:!0,orgHasExternalDataConnectors:!0,orgHasPilotConnectors:!0,userCanAddAnalyticsRemoteConnections:!0,orgHasMulesoftConnectors:!0,orgHasLiveConnectors:!0,orgHasEAWriteConnectors:!0,orgHasSyncOut:!0,userHasInsightsEltEditor:!0,orgHasWaveTrendReports:!0,userCanTrendReportsInWave:!0,orgHasWaveSharing:!0,orgHasEDEnabled:!0,orgHasEDUI:!0,orgHasEDOnCorePilot:!0,userCanManageEDModels:!0,orgHasEDWithEinsteinMetadataEnabled:!0,orgHasPredictionInRecipe3:!0,orgHasEuclid:!0,userCanUseEDUI:!0,userCanCreateUpdateEDStory:!0,userCanRunAnalysis:!0,orgHasEdiEnabled:!0,orgHasOnboardingExperienceVideoAccess:!0,orgHasAnalyticsTrialAccess:!1,orgHasOnboardingCustomerResourceAccess:!1,orgHasFavorites:!0,canUseSearchSuggestions:!0,orgHasWatchlistEnabled:!0,userCanUseCollections:!0,userHasMetalytics:!0,orgHasMetalyticsAPI:!0,orgHasSemanticGraphAPI:!0,canUseNLPrediction:!0,canUseNextBestGroupingPrediction:!0,orgHasNotifications:!0,orgHasWaveNLQ:!0,orgHasWaveTimeZoneEnabled:!1,orgHasInaccessibleHelpResource:!1,orgHasWaveAssetsNewDateVersion:!1,orgCanUseWaveLwcDashboards:!1,orgHasWaveIsYearEndFiscalYear:!0,orgHasWaveCustomFiscalEnabled:!1,orgHasRecipeFiscal:!0,canUseUnifiedAnalytics:!0,userCanAccessSalesforceCdpOrCdpApp:!0,canCreateReports:!1,canCreateDashboards:!1,canCreateReportFolders:!1,canCreateDashboardFolders:!1,canShowMedianAggregate:!0,hasInlineEditing:!1,orgCanViewTableau:!0,orgCanViewTableauWorkbook:!1,canSelectAccessibleTheme:!0,orgCanEnableSelectAndNavigate:!0,canOrgSeeLivePreviews:!0,canOrgViewThumbnailsForOA:!0,canUseExploreRecommendation:!0,canUseWatchRecommendation:!0,orgHasWatchEnabled:!0,userHasWatchEnabled:!0,orgCanUseBundleCaching:!1,orgHasHighUIRequestConcurrency:!1,orgCanUseSaqlQueryCaching:!1,orgCanUseBundleCachingInStudio:!0,userHasEGPTFormulaGenerationEnabled:!0,userHasEGPTReportGenerationEnabled:!0,userHasEGPTReportQnaEnabled:!0,userHasEGPTServiceIntelligenceEnabled:!0,orgHasTableauSeamlessAuth:!1,orgHasTUAEnabled:!1,hasPostToSlack:!0},gates:{"einstein.analytics.ui.helpSearch":!1,"einstein.analytics.discovery.modelInspector":!0,"einstein.analytics.discovery.byom":!0,"tcrm.teapot.ui.vizComponent.useAppExchange":!1,"einstein.analytics.selectAndNavigate":!0,"einstein.analytics.discovery.rebrandStoryToModel":!0,"einstein.analytics.ui.cache.enableDashboardBundleCachingInAnalyticsStudio":!0},test:{simulate401Unauthorized:!1,simulate404NotFound:!1,testName:"",localStorageKeyPrefix:"",simulateOpenWindow:!1},perf:{isPerfMode:!1},logging:{maxLogLineBatchSize:25,flushTimeout:1e4},orgValues:{waveMaxIdsInTriggerRule:5,recipeXjoinLeftColIn:8,recipeXjoinRigthColIn:8},orgInfo:{namespace:null},header:{systemMessages:[],secondaryLinks:[{displayName:"Google",url:"http://www.google.com",openInNewTab:!0}],userMenu:[{displayName:"My Profile",url:"#profile"},{displayName:"My Settings",url:"#settings"},{displayName:"Log Out",url:"#logout"}],settingsMenu:[{displayName:"Setup",url:"#setup"}],helpMenu:[{displayName:"Help and Training",url:"#helpAndTraining"}]},finderLeftNavLinks:[{displayName:"community",url:"https://success.salesforce.com/_ui/core/chatter/groups/GroupProfilePage?g=0F9300000009MBP"}],helpArticleUrlTemplate:"http://example.com?article={ARTICLE}",developerGuideTopicUrlTemplate:"http://example.com?guide={GUIDE}&topic={TOPIC}",einsteinDiscoveryForReports:{ediMaxRows:5e5,ediMinRows:50,ediMaxColumns:50,ediMinColumns:2},rowLevelFormulaLimit:1,einsteinDiscovery:{isStoriesDirectEnabled:!0,optMaxDecisionValues:20},explorer:{maxDirectQueryRowLimit:5e3,defaultMaxDatasetRowLimit:25e3},lightningDashboardsAssetsPath:"/projRes/ui-analytics-dashboard-components/assets",cache:{defaultQueryCacheTTLInSeconds:604800}},app:{appUser:{_uid:"005000000000000AAB",email:"insightsuser@salesforce.com",username:"Insights User",roleId:"01aEAC11E811aaaa1L",preferred_username:"loginusername@salesforce.com",isAdmin:!1,locale:"en-US",timezone:"America/Los_Angeles",utcOffset:-288e5,language:"eng"},browser:{name:"Chrome",version:123,isMobile:!1},isAnalyticsStudioAvailable:!0},dashboardInspector:{networkSpeedAssetSize:2048,performanceRule:{slowNetworkThreshold:1,slowQueryThreshold:5e3}}}},72713:(e,t,r)=>{var i,s,n,o,a;a=r(96486),r(74978).quoteValue,n=r(44298),i=r(61818),s=r(33524),e.exports=o={DIM_SEPARATOR:"~~~",DIM_DISPLAY_SEPARATOR:" - ",DIM_DATE_TIME_SEPARATOR:" ",DIM_TIME_MIN_SEPARATOR:":",isCompoundDim:function(e){var t,r,i;if(!a.isArray(e))return!1;for(r=0,i=e.length;r<i;r++)if(null!=(t=e[r])&&"string"!=typeof t)return!1;return!0},getInnerDims:function(e){return e},isCompoundStr:function(e){return!!a.isString(e)&&-1!==e.indexOf(o.DIM_SEPARATOR)},getInnerStrs:function(e){return e.split(this.DIM_SEPARATOR)},compoundStrToCompoundDim:function(e){return e.split(this.DIM_SEPARATOR)},compoundDimToCompoundStr:function(e){return e.map((function(e){return String(e)})).join(this.DIM_SEPARATOR)},getRawAlias:function(e){return e.join(""+this.DIM_SEPARATOR)},getProj:function(e){var t;return function(){var r,s,n;for(n=[],r=0,s=e.length;r<s;r++)t=e[r],n.push(i.quoteDimName(t));return n}().join(' + "'+this.DIM_SEPARATOR+'" + ')},getCompoundFilter:function(e,t){var r,n;return"("+function(){var o,a,l;for(l=[],r=o=0,a=e.length;o<a;r=++o)n=e[r],l.push(s.createSingleFieldEqualityFilter(i.quoteDimName(n),t[r]));return l}().join(" && ")+")"},isCompoundFilters:function(e){return!!a.isArray(e)&&e.some((t=this,function(e){return t.isCompoundStr(e)||t.isCompoundDim(e)}));var t},formatForDisplay:function(e){return e.join(this.DIM_DISPLAY_SEPARATOR)},formatDateWithTimeForDisplay:function(e){return e.slice(0,3).join(this.DIM_DISPLAY_SEPARATOR)+this.DIM_DATE_TIME_SEPARATOR+e.slice(3).join(this.DIM_TIME_MIN_SEPARATOR)},indexOfDim:function(e,t){var r,i,s,n;for(i=s=0,n=t.length;s<n;i=++s)if(r=t[i],a.isEqual(r,e))return i;return-1},getFullDimList:function(e){return a.flatten(e)},ensureCompoundStr:function(e){return o.isCompoundDim(e)?o.compoundDimToCompoundStr(e):e},ensureCompoundDim:function(e){return o.isCompoundStr(e)?o.compoundStrToCompoundDim(e):e},isSelectModeMulti:function(e){return e===n.SELECTMODE_MULTI_REQUIRED||e===n.SELECTMODE_MULTI||e===n.SELECTMODE_LEGEND_MULTI},isSelectModeSingle:function(e){return e===n.SELECTMODE_SINGLE_REQUIRED||e===n.SELECTMODE_SINGLE||e===n.SELECTMODE_LEGEND_SINGLE},isSelectModeRequired:function(e){return e===n.SELECTMODE_SINGLE_REQUIRED||e===n.SELECTMODE_MULTI_REQUIRED},isSelectModeOnLegend:function(e){return e===n.SELECTMODE_LEGEND_MULTI||e===n.SELECTMODE_LEGEND_SINGLE},isSelectModeNone:function(e){return e===n.SELECTMODE_LEGEND_NONE}}},58881:(e,t,r)=>{var i,s,n;n=r(96486).isEmpty,i=r(40651).Z,s=r(62652).Folder,e.exports=function(){function e(e){this._obj=null!=e?e:{}}return e.prototype._get=function(){return this._obj},e.prototype.getMasterLabel=function(){return this._get().name},e.prototype.getFolderId=function(){return this._get().folder.id},e.prototype.getFolder=function(){var e;if(null!=(e=this._get().folder))return new s(e)},e.prototype.getId=function(){return this._get().id},e.prototype.getType=function(){return this._get().type},e.prototype.getRelatedWorkflows=function(){return this.getRelatedAssetsOfType(i.WORKFLOW.getCode())},e.prototype.getRelatedAssetsOfType=function(e){var t,r;return n(null!=(t=this._get()[e])?t.dependentAssets:void 0)?[]:null!=(r=this._get()[e])?r.dependentAssets:void 0},e.prototype.getRelatedAssetsCountByType=function(e){var t,r;return isNaN(null!=(t=this._get()[e])?t.totalCount:void 0)?0:null!=(r=this._get()[e])?r.totalCount:void 0},e}()},25946:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;i=r(723),n=r(8429).Z,e.exports=s=function(){function e(e,t,r,i){this._name=e,this._label=t,this._type=r,this._disabled=i}return e.prototype.getName=function(){return this._name},e.prototype.getLabel=function(){return this._label},e.prototype.getType=function(){return this._type},e.prototype.isDisabled=function(){return this._disabled},e}(),s.Type=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t._isCaseSensitive=!1,t.getDefaultValue=function(){return s.DIMENSION},t.prototype.getCode=function(){return this._value.code},t.prototype.getIconName=function(){return this._value.iconName},t.prototype.getTooltip=function(){return n.getLabel("InsightsSelector",this.getCode())},t}(i),s.Type.build(s.Type,{MEASURE:{code:"measure",iconName:"measure-1"},DIMENSION:{code:"dimension",iconName:"dimension"},DATE:{code:"date",iconName:"date"},AGGREGATE:{code:"aggregate",iconName:"summation"}})},14077:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h={}.hasOwnProperty;c=r(96486),o=r(8429).Z,a=r(61506).Z,n=r(98287),r(18111),i=r(40651).Z,d=r(23296),s=r(62652).Folder,u=r(14792).Z,l=r(55430),e.exports=function(e){function t(e){this._metadataHolder=e,t.__super__.constructor.call(this,c.bind(this._metadataHolder.getCurrentFolderId,this._metadataHolder)),this._imagesCached=!1}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.loadAppDetails=function(){return d.loadAsset(d.getAssetById(i.FOLDER.getCode(),this.getCurrentFolderId()),!1,!0)},t.prototype.getAppIconUrl=function(e){return l.getAssetIconUrl(e)},t.prototype.getImageUrl=function(e,t){return a.get(u).getImageUrl(e,t,this.getCurrentFolderId())},t.prototype.getImageMetadata=function(e,t){return new Promise((r=this,function(i){var s,n;return null!=(s=r.getImageCache().getImage(t))?i(s):null!=(n=r.getImageCache().getImageId(t))?r._getFile(t,n,i):a.get(u).getContentDocumentId(e,t,r.getCurrentFolderId()).then((function(e){return e.hasError||c.isEmpty(e)?i(void 0):r._getFile(t,e.id,i)}))}));var r},t.prototype.getGalleryImages=function(e,t){return null==t&&(t=!1),new Promise((r=this,function(s){var n;return n=r.getImageCache().getAllImages(),t||c.isEmpty(n)||!r._imagesCached?d.loadAsset(d.getAssetById(i.FOLDER.getCode(),e),!1,!0).then((function(e){return r._getFolderAttachedFiles(e,s)})):s({images:n})}));var r},t.prototype.handleImageDelete=function(e,t,r){return new Promise((i=this,function(e){return i._metadataHolder.getMetadata().isImageUsedInDashboard(r)?i._noDelete(e):i._getFileId(t,r).then((function(t){return i._isImageUsedInAnotherApp(t).then((function(s){return i._deleteFile(i.getCurrentFolderId(),r,t,e,s.usedInAnotherApp)}))}))}));var i},t.prototype.handleImageUpload=function(e,t,r){return new Promise((i=this,function(s){return i._createImageFile(t,r).then((function(t){return t.error?i._buildErrorMessage(t,uploadImagePromise):(i.getImageCache().add(t),i._linkImageToApp(e,[t]).then((function(e){return e.error&&i._buildErrorMessage(e,s),s(e)})))}))}));var i},t.prototype.handleMultipleImageUpload=function(e,t){var r,i,s,n;return s=[],i=[],r=[],new Promise((n=this,function(a){var l,u,d,h;for(d=0,h=t.length;d<h;d++)l=t[d],u=n._createImageFile(l.name,l).then((function(e){return null!=e.error&&s.push(e.error),n.getImageCache().add(e),i.push(e)})),r.push(u);return Promise.all(r).then((function(){return n._linkImageToApp(e,i).then((function(e){return c.isEmpty(s)?a(e):n._buildErrorMessage({error:{code:"206",message:o.getLabel("ImageManager","uploadWarning",error.length)}},a)}))}))}))},t.prototype._getFolderAttachedFiles=function(e,t){var r,i,s;return i=[],e.isUserPrivateAsset()?a.get(u).getFilesLinkedToUser(e.getId()).then((s=this,function(e){var r;return e.files&&(i=function(){var t,i,s,n;for(n=[],t=0,i=(s=e.files).length;t<i;t++)r=s[t],n.push(r.id);return n}()),s._getBulkFileLoad(i,t)})):(null!=e.get("attachedFiles")&&(i=function(){var t,i,s,n;for(n=[],t=0,i=(s=e.get("attachedFiles")).length;t<i;t++)r=s[t],n.push(r.id);return n}()),this._getBulkFileLoad(i,t))},t.prototype._getFile=function(e,t,r){return a.get(u).getFile(t,this.getCurrentFolderId()).then((i=this,function(e){return e.error?i._buildErrorMessage(e,r):r(i.getImageCache().add(e))}));var i},t.prototype._deleteFile=function(e,t,r,s,n){return null==n&&(n=!1),d.loadAsset(d.getAssetById(i.FOLDER.getCode(),e),!1,!0).then((o=this,function(e){return e.isUserPrivateAsset()?o._deleteFileMappings(t,r,s,n):d.updateAsset(o._getFolderModelForPatch(e,[{id:r}],!1),{shouldPatchFiles:!0}).then((function(e){return o._deleteFileMappings(t,r,s,n)}))}));var o},t.prototype._deleteFileMappings=function(e,t,r,i){return null==i&&(i=!1),this.getImageCache().remove(e),i?r({}):a.get(u).deleteFile(t,this.getCurrentFolderId()).then((function(e){return r(null!=e?e:{})}))},t.prototype._getBulkFileLoad=function(e,t){var r,i;return 0===(r=this._getUncachedFiles(e)).length?t({images:this.getImageCache().getAllImages()}):a.get(u).getFilesInBatch(r.join(","),this.getCurrentFolderId()).then((i=this,function(e){var r,s,n,o,a;if(e.hasError)return i._buildErrorMessage(e,t);for(s=[],n=0,o=(a=e.results).length;n<o;n++)r=a[n].result,c.isEmpty(r.fileAsset)||s.push(i.getImageCache().add(r));return i._imagesCached=!0,t({images:i.getImageCache().getAllImages()})}))},t.prototype._getUncachedFiles=function(e){var t,r,i,s,o;for(t=this.getImageCache(),i=[],s=0,o=e.length;s<o&&(r=e[s],t.isImageByIdCached(r)||(i.push(r),i.length!==n.IMAGE_PAGE_SIZE));s++);return i},t.prototype._createImageFile=function(e,t){return new Promise((r=this,function(i){var s;return(s=new FileReader).onload=function(t){return a.get(u).createContentVersion(e,t.target.result,r.getCurrentFolderId()).then((function(e){return e.error?r._buildErrorMessage(e,i):r._fetchImageFileUsingVersionId(e.id,i)}))},s.readAsDataURL(t)}));var r},t.prototype._fetchImageFileUsingVersionId=function(e,t){var r,i;return(r=a.get(u)).getContentDocumentIdFromContentVersion(e,this.getCurrentFolderId()).then((i=this,function(e){return r.getFile(e.ContentDocumentId,i.getCurrentFolderId()).then((function(e){return e.error?i._buildErrorMessage(e,t):t(e)}))}))},t.prototype._linkImageToApp=function(e,t){return null==t&&(t=[]),new Promise((r=this,function(s){return d.loadAsset(d.getAssetById(i.FOLDER.getCode(),e),!1,!0).then((function(e){var i,n;return e.isUserPrivateAsset()?s(t[0]):(n=function(){var e,r,s;for(s=[],e=0,r=t.length;e<r;e++)i=t[e],s.push({id:i.id});return s}(),d.updateAsset(r._getFolderModelForPatch(e,n,!0),{shouldPatchFiles:!0}).then((function(e){return s(t[0])})))}))}));var r},t.prototype._getFolderModelForPatch=function(e,t,r){var i,n,o;return null==t&&(t=[]),null==r&&(r=!0),(n=new s({id:e.get("appId")})).set(e.attributes),i=null!=(o=e.get("attachedFiles"))?o:[],i=r?i.concat(t):c.filter(i,(function(e){return e.id!==t[0].id})),n.setAttachedFiles(i)},t.prototype._buildErrorMessage=function(e,t){return t({error:{code:e.error.code,message:e.error.message}})},t.prototype._isImageUsedInAnotherApp=function(e){return new Promise((t=this,function(r){return a.get(u).getFileLinks(e,t.getCurrentFolderId()).then((function(e){return r({usedInAnotherApp:e.shares.length>1})}))}));var t},t.prototype._noDelete=function(e){var t;return t={error:{code:"403",message:o.getLabel("ImageManager","deleteWarning")}},this._buildErrorMessage(t,e)},t.prototype._getFileId=function(e,t){return new Promise((r=this,function(i){var s;return s=r.getImageCache().getImageId(t),c.isEmpty(s)?a.get(u).getContentDocumentId(e,t,r.getCurrentFolderId()).then((function(e){return s=e[0].ContentDocumentId,i(s)})):i(s)}));var r},t}(n)},27327:(e,t,r)=>{var i,s,n,o,a,l,u;a=r(84198).Z,u=r(72555),o=r(67294),n=r(45697),i=r(8429).Z,l=r(32574),s=r(8666),e.exports=u({displayName:"ConfirmationModalRC",propTypes:{id:n.string,isOpen:n.bool,onClose:n.func,onConfirm:n.func,confirmLabel:n.string,cancelLabel:n.string,title:n.string.isRequired,message:n.string.isRequired,className:n.string,maskHeader:n.bool,variant:n.string,size:n.string,prompt:n.string,dismissOnClickOutside:n.bool},getDefaultProps:function(){return{isOpen:!0,maskHeader:!0,variant:"brand",onClose:function(){},onConfirm:function(){},dismissOnClickOutside:!0}},componentDidMount:function(){return this._returnFocusTo=document.activeElement},render:function(){var e;return e=l.buildClassName("confirm-modal",this.props.className),o.createElement(s,{id:this.props.id,containerClassName:e,isOpen:this.props.isOpen,heading:this.props.title,footer:this._getFooter(),size:this.props.size||"medium",prompt:this.props.prompt,directional:!1,disableClose:!1,dismissOnClickOutside:this.props.dismissOnClickOutside,maskHeader:this.props.maskHeader,onRequestClose:this.props.onClose,contentClassName:"slds-p-around_medium"},o.createElement("p",{className:"confirm-modal-description slds-text-align_center"},this.props.message))},_getFooter:function(){return[o.createElement(a,{className:"confirmation-cancel",label:this.props.cancelLabel||i.getLabel("reportBuilder","cancel"),onClick:this._onCancel,key:"cancel",buttonRef:this._getInitialFocus}),o.createElement(a,{className:"confirmation-apply",label:this.props.confirmLabel||i.getLabel("Buttons","confirm"),variant:this.props.variant,onClick:this._onConfirm,key:"confirm"})]},_onCancel:function(){var e;return this.props.onClose(),null!=(e=this._returnFocusTo)?e.focus():void 0},_onConfirm:function(){var e;return this.props.onConfirm(),null!=(e=this._returnFocusTo)?e.focus():void 0},_getInitialFocus:function(e){return setTimeout((function(){return null!=e?e.focus():void 0}),0)}})},79845:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,["MINI_FINDER","MANAGE_ORGS","CUSTOM_COLOR","CATEGORICAL_COLOR","CATEGORICAL_VALUE","STYLE_TRAY","BINS","TITLED_READ_ONLY","SYMBOL_PICKER"])},27779:(e,t,r)=>{var i,s,n,o,a,l,u;u=r(72555),l=r(67294),a=r(45697),s=r(85600),o=r(8429).Z,r(32574),r(70211),r(26374).Z,r(53373),n=r(49720),i=r(62490),r(82837),e.exports=u({displayName:"ClipActionDropdownRC",mixins:[s],propTypes:{onBlur:a.func.isRequired,onClip:a.func.isRequired,children:a.element.isRequired},getInitialState:function(){return{stepLabel:null}},render:function(){return l.createElement("div",{className:"clip-action"},this.props.children,this._renderClipDropdown())},_renderClipDropdown:function(){return l.createElement(i,{onBlur:this.props.onBlur,getTargetEl:this._getTargetEl},l.createElement("div",{className:"drop-down-content"},l.createElement("div",{className:"label"},o.getLabel("StepLabel","label")),l.createElement("input",{className:"style-guide input",type:"text",maxLength:"80",onChange:this._onStepLabelChange,placeholder:o.getLabel("QueryBuilder","stepLabel"),value:this.state.stepLabel||"",autoFocus:!0,onKeyDown:this._onKeyDown}),l.createElement("button",{className:"style-guide primary add",onClick:this._onButtonClick},o.getLabel("InsightsAssetSaveDialog","clipToDesignerLabel"))))},_getTargetEl:function(){return this.getRef$()},_onKeyDown:function(e){if(e.keyCode===n.KEY_CODE_ENTER)return this._onButtonClick()},_onButtonClick:function(){return this.props.onClip(this.state.stepLabel),this.props.onBlur()},_onStepLabelChange:function(e){return this.setState({stepLabel:e.target.value})}})},57843:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h;c=r(72555),l=r(45697),u=r(67294),h=r(96486),n=r(70211),i=r(26374).Z,s=r(96619).Z,o=r(53373),a=r(77889).Z,d=r(26734).Z,e.exports=c({displayName:"WaveActionBarRC",propTypes:{mainActions:l.oneOfType([l.arrayOf(l.instanceOf(i)),l.arrayOf(l.arrayOf(l.instanceOf(i)))]).isRequired,menuActions:l.arrayOf(l.instanceOf(i)),delegate:l.instanceOf(d).isRequired,toggledActionIds:l.arrayOf(l.string),hotkeyManager:l.instanceOf(o),isEmbedded:l.bool},getDefaultProps:function(){return{isEmbedded:!1}},getInitialState:function(){return{actionComponent:void 0}},render:function(){var e,t,r,s;return this.props.isEmbedded&&(t="embedded-small"),(e=this.props.mainActions.slice()).length>0&&(e[0]instanceof i?this._addActionsMenu(e,this.props.menuActions):(s=this.props.delegate.getMenuGroupIndex(),r=e[e.length-s].slice(),e[e.length-s]=r,this._addActionsMenu(r,this.props.menuActions))),u.createElement(n,{actions:e,onClick:this._onClick,toggledActionIds:this.props.toggledActionIds,hotkeyManager:this.props.hotkeyManager,shouldRenderSLDSActionBar:this.props.delegate.useSLDS(),alignOfSLDSDropdown:this.props.delegate.getSLDSDropdownAlign(),additionalClassName:t})},_onClick:function(e){var t;return t=this.props.delegate.onAction.apply(this.props.delegate,arguments),this.setState({actionComponent:t})},_addActionsMenu:function(e,t){var r,i,n,o;if(h.isEmpty(t))return e;for(r=new s("more",new a("WaveAction","more").toString(),"dots"),t.every((function(e){return e.getDisabled()}))&&r.setDisabled(!0),n=0,o=t.length;n<o;n++)i=t[n],r.addAction(i);e.push(r)}})},36563:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m;g=r(96486),c=r(90554).isMap,m=r(53499),h=m.isRgbFormat,p=m.rgbToHex,a=r(8429).Z,r(18111),r(61506).Z,l=r(1611).Z,n=r(66537),s=r(6597).ZP,i=r(6597).RY,u=null,d=null,e.exports=o={setWaveChartType:function(e){return u=e},eclairConfig2WaveParams:function(e,t,r,i){var s,n,o,a,l;for(o in null==r&&(r=!0),null==i&&(i=!0),n=(s=this._getChartTypeByModule(e)).getDefinition().getDefaultParameters(),(a=i?n:{}).visualizationType=s.getCode(),t)l=t[o],c(l)||("projection"===o?a.projectionType=l:a[o]=l);return s.getDefinition().supportsTrellis()&&(a.trellis={enable:!1},t.trellis&&t.trellis.column&&t.trellis.column.length&&(a.trellis.enable=!0,a.trellis.type=t.trellis.type)),r&&this.updateParamsForThumbnail(a,s.getDefinition()),a},updateParamsForThumbnail:function(e,t){var r;return null!=(r=t.getDefaultParameters()).autoFitMode&&(e.autoFitMode="keepLabels"),null!=r.legend&&(null==e.legend&&(e.legend={}),e.legend.show=!1),null!=r.autoZoom&&(e.autoZoom=!0),e.trellis&&"wrap"===e.trellis.type&&(e.trellis.chartsPerLine=3),e},_getChartTypeByModule:function(e){var t,r,i,s;if(!d)for(d={},r=0,i=(s=u.enums()).length;r<i;r++)t=s[r],d[t.getDefinition().getEclairNGModuleName()]=t;return d[e]},makeLinearGradient:function(e,t){return"linear-gradient(to bottom, "+this.convertToHexColor(e)+", "+this.convertToHexColor(t)+")"},convertToHexColor:function(e){return e&&h(e)?p(e):e},parseLinearGradient:function(e){return(e=e.replace(/\ /g,"")).match(/(#[0-9A-F]{3,6}|rgb\(\d+,\d+,\d+\))/gi)||[e]},buildRowsMetadata:function(e){var t,r,i,s,n,o,a,l,u,d;return u=e.resultsMetadata,l=e.resultsFormatter,i=e.data,s=e.fieldName,o=e.groupingOnly,d=e.timeColumns,a=e.isCustomFiscal,n=e.fiscalGranularity,t=e.compactDecimalDigits,r=e.compactDecimalDigitsOnLine,this._buildMeasureColumns(u,l,t,r).concat(this._buildDimensionAndTimeColumns({resultsMetadata:u,resultsFormatter:l,data:i,fieldName:s,groupingOnly:o,timeColumns:d,isCustomFiscal:a,fiscalGranularity:n}))},processDataRows:function(e,t,r){var i,s,n,o,a,l,u;if(Array.isArray(e)){for(n=t.concat(r),s={},r.forEach((function(e){return s[e]=null})),u=[],a=0,l=e.length;a<l;a++)i=e[a],o=g.pick(i,n),g.isEmpty(o)||(g.defaults(o,s),u.push(o));return u}},getGroupingColumns:function(e){var t;return t=e.getGroupings(),g.isEmpty(t)?e.getColumns(l.DIMENSION):t},getMeasureColumns:function(e){return e.getUngroupedColumns(l.MEASURE)},getDimensionColumns:function(e,t){var r,i,s;return i=o.getGroupingColumns(e),t||(s=e.getUngroupedColumns(l.DIMENSION),i=i.concat(s)),r=new Set(i),e.getCompoundTimeColumnNames().forEach((function(t){return e.getCompoundColumnParts(t).forEach((function(t){return r.delete(e.getColumn(t))}))})),Array.from(r)},_buildMeasureColumns:function(e,t,r,i){var s,n,a,l,u,d,c,h,p,g;for(g=[],d=c=0,h=(p=o.getMeasureColumns(e)).length;c<h;d=++c)s=p[d],l=t.getMeasureFormat(s),n=e.isCurrencyColumn(s.getName())?e.getCurrencyIsoCode(s.getName()):void 0,u=null!=l?l.customFormat.concat({delimiters:l.delimiters,currencyIsoCode:n}):void 0,null==r&&null==i||((d>0&&null!=i?-1===i:-1===r)||null!==(null!=l?l.customFormat[0]:void 0)||null!=l&&(l.customFormat[0]="#,###"),a=d>0&&null!=i?i:r,u=null!=l?l.customFormat.concat({delimiters:l.delimiters,currencyIsoCode:n,compactDecimalDigits:a,removeTrailingZeros:!0}):void 0),g.push({column:s.getName(),label:t.formatMeasureName(s),format:u,type:"measure"});return g},_buildDimensionAndTimeColumns:function(e){var t,r,i,n,a,l,u,d,c,h,p,g,m,_;return g=e.resultsMetadata,p=e.resultsFormatter,a=e.data,u=e.fieldName,c=e.groupingOnly,m=e.timeColumns,h=e.isCustomFiscal,d=e.fiscalGranularity,i=o.getDimensionColumns(g,c),l=function(){var e,s,n,o,l;for(l=[],e=0,s=i.length;e<s;e++)t=i[e],r=t.getName(),_=null!=(n=p.getCategoricalConditionalFormattingRuleCollection(r,u).getRulesForField(r))&&null!=(o=n.chartColor)?o.getValueFormatValueMap():void 0,g.isDateTimeColumn(r)?l.push(this._buildTimeColumn(t,p,a,_,null,h,d)):l.push(this._buildDimensionColumn(t,g,p,a,_));return l}.call(this),Array.isArray(m)&&m.length>1&&null!=(n=new s(g).buildCombinedDateGrainColumn(m))&&l.push(this._buildTimeColumn(n,p,a,_,null,h,d)),l},_buildTimeColumn:function(e,t,r,s,n,o,a){var l,u,d,c,h,p;return null==s&&(s={}),d=this._getChartGranularity(t.getDateGrain(e),o),c=i,u=t.getDateParseFormat(e),l={column:e.getName(),type:"time",label:null!=n?n:t.columnLabel(e),dataFormat:u,format:t.getDateFormat(e),dataGranularity:d,firstDayOfWeek:t.getFirstDayOfWeek(e),valueLabels:this.getValueLabels(e,t,r),valueColors:s,dataSeparator:c,fiscalGranularity:a},p=(null!=u?u.split(c).length:void 0)>1,"sfdcWeek"===d?(h=e.getName().indexOf(c)>-1?"sfdcYearWeek":"sfdcWeek",l.format=h,l.dataFormat=h):"quarter"===d?l.dataFormat=e.getName().indexOf(c)>-1?"yearQuarter":"quarter":o&&null!=(h=function(){switch(d){case"fiscalWeek":return p?"fiscalYearWeek":"fiscalWeek";case"fiscalMonth":return p?"fiscalYearMonth":"fiscalMonth";case"fiscalQuarter":return p?"fiscalYearQuarter":"fiscalWeek";case"fiscalYear":return"fiscalWeek"}}())&&(l.format=h,l.dataFormat=h),l},_buildDimensionColumn:function(e,t,r,i,s){var n;return null==s&&(s={}),n={column:e.getName(),label:r.columnLabel(e),valueColors:s,type:"dimension",valueLabels:this.getValueLabels(e,r,i)},r.hasActions(e,t)&&(n.hotSpots=this._getHotSpots()),n},_getChartGranularity:function(e,t){if(null!=e)switch(n.getEnumByCode(e)){case n.YEAR:case n.YEAR_FISCAL:return"year";case n.QUARTER:return"quarter";case n.MONTH:return"month";case n.WEEK:return"sfdcWeek";case n.DAY:return"day";case n.HOUR:return"hour";case n.MINUTE:return"minute";case n.SECOND:return"second";case n.QUARTER_FISCAL:return t?"fiscalQuarter":"quarter";case n.MONTH_FISCAL:return t?"fiscalMonth":"month";case n.WEEK_FISCAL:return t?"fiscalWeek":"sfdcWeek"}},getValueLabels:function(e,t,r){var i,s,n,o,a,l;if(o=t.getValueLabels(e),!g.isEmpty(o))return o;if(null==r)return{};for(o={},a=0,l=(s=g.uniq(g.map(r,e.getName()))).length;a<l;a++)i=s[a],(n=t.formatDimension(e,i))!==i&&(o[i]=n);return o},_getHotSpots:function(){return[{name:"menu",position:"right",icon:""}]},getRowDataFromValues:function(e,t){var r,i;return r={},i=t.getGroupingColumnNames(),e.forEach((function(e,t){return r[i[t]]=e})),r},getGroupingValuesFromRow:function(e,t){var r;return r=[],e.getGroupingColumnNames().forEach((function(e){if(t[e])return r.push(t[e])})),r},findMarkerIndex:function(e,t,r){return g.findIndex(e,(function(e){if(t.toString()===e.row.toString())return!r||!e.measure||r===e.measure}))},sanitizeTime:function(e,t,r){var i,s,n,o;if(e){for(o=e.replace(/\s/g,"").split(/\D/).filter((function(e){return""!==e})),i=t.getName().split(r),s=0,n=[];s<i.length;)n.push(o[s]||"01"),s++;return n.join(r)}},formatTooltipDescription:function(e,t,r,i){var s,n,o,u,d;if(g.isEmpty(e))return"";for(n=e.replace("\\[","&#91;").replace("\\]","&#93;");o=/\[([^[\]]*)\]/.exec(n);)s=o[1],(null!=(d=r.getColumn(s))?d.getType():void 0)===l.MEASURE?u=i.formatMeasureValue(d,t[s]):(null!=d?d.getType():void 0)===l.DIMENSION?u=i.formatDimension(d,t[s]):null==(u=t[s])&&(u=a.getLabel("EclairNgChartLabels","nullLabel")),n=n.replace(o[0],u);return n=n.replace("&#91;","[").replace("&#93;","]")},extractValue:function(e){var t;if("string"!=typeof e)return e;try{if(null!=(t=JSON.parse(e)).groupValue)return t.groupValue}catch(t){return t,e}},sortLegends:function(e,t,r){var i;return null==r&&(r={}),g.isEmpty(e)?[]:"picklist"===t?o.sortByPicklistValues(e,r):(i=function(){switch(t){case"currency":return function(e,t){var r,i,s,n,a;return i=o.extractValue(e),n=o.extractValue(t),r=null!=(null!=i?i.sort_rank:void 0)?i.sort_rank:-1,s=null!=(null!=n?n.sort_rank:void 0)?n.sort_rank:-1,null==(null!=i?i.sort_rank:void 0)||null==(null!=n?n.sort_rank:void 0)||null==(null!=i?i.currency:void 0)||null==(null!=n?n.currency:void 0)?(null!=(null!=i?i.amount:void 0)?i.amount:-1/0)-(null!=(null!=n?n.amount:void 0)?n.amount:-1/0):0!==(a=r-s)?a:void 0};case"string":case"email":return function(e,t){var r;return(null!=(r=o.extractValue(e))?r.localeCompare(o.extractValue(t)):void 0)||0};case"number":case"percent":case"int":case"double":return function(e,t){return(o.extractValue(e)||0)-(o.extractValue(t)||0)};case"boolean":return function(e,t){var r,i,s,n;return r=o.extractValue(e),i=o.extractValue(t),(s=String(r))===(n=String(i))?0:s<n?-1:1};case"date":case"datetime":return function(e,t){var r,i;return r=o.extractValue(e),i=o.extractValue(t),g.isEmpty(r)||g.isEmpty(i)?g.isEmpty(r)&&g.isEmpty(i)?0:g.isEmpty(r)?-1:1:new Date(r).getTime()-new Date(i).getTime()}}}())?e.sort(i):e},sortByValueLabelsForLookup:function(e,t){var r;return g.isEmpty(e)?[]:(t&&e&&(r=function(e,r){var i,s;return i=t[e]||"",s=t[r]||"",i.localeCompare(s)},e.sort(r)),e)},sortByPicklistValues:function(e,t){var r,i,s,n;for(i={},r=s=0,n=t.length;0<=n?s<n:s>n;r=0<=n?++s:--s)i[t[r].label]=r;return e.sort((function(e,t){var r,s,n,a;return n=o.extractValue(e),a=o.extractValue(t),r=i[n],s=i[a],null!=r&&null!=s?r-s:n.toString().localeCompare(a)}))}}},63594:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;i=r(723),n=r(8429).Z,e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t._isCaseSensitive=!1,t.getDefaultValue=function(){return this.HBAR},t.getTableChartTypes=function(){var e,r,i,s,n;for(n=[],r=0,i=(s=t.enums()).length;r<i;r++)(e=s[r]).isTable()&&n.push(e);return n},t.getVisualizationChartTypes=function(){var e,r,i,s,n;for(n=[],r=0,i=(s=t.enums()).length;r<i;r++)(e=s[r]).isTable()||e.isOnlyInLegacyExplorer()||n.push(e);return n},t.prototype.getCode=function(){return this._value.code},t.prototype.getLabel=function(){return n.getLabel("ChartType",this.getCode())},t.prototype.getTooltip=function(){return n.getLabel("ChartType",this.getCode()+"Tooltip")},t.prototype.getIconName=function(){return"chart-thumb-"+this.getCode()},t.prototype.isTable=function(){return this._value.isTable},t.prototype.isOnlyInLegacyExplorer=function(){return this._value.isOnlyInLegacyExplorer},t.prototype.supportsColumnMap=function(){return!this._value.isTable},t.prototype.toString=function(){return this.getCode()},t}(i),s.build(s,{HBAR:{code:"hbar",isTable:!1,isOnlyInLegacyExplorer:!1},VBAR:{code:"vbar",isTable:!1,isOnlyInLegacyExplorer:!1},STACKHBAR:{code:"stackhbar",isTable:!1,isOnlyInLegacyExplorer:!1},STACKVBAR:{code:"stackvbar",isTable:!1,isOnlyInLegacyExplorer:!1},SCATTER:{code:"scatter",isTable:!1,isOnlyInLegacyExplorer:!1,supportsColumnMap:!0},PIE:{code:"pie",isTable:!1,isOnlyInLegacyExplorer:!1},HEATMAP:{code:"heatmap",isTable:!1,isOnlyInLegacyExplorer:!1},LINE:{code:"line",isTable:!1,isOnlyInLegacyExplorer:!1},HDOT:{code:"hdot",isTable:!1,isOnlyInLegacyExplorer:!1},VDOT:{code:"vdot",isTable:!1,isOnlyInLegacyExplorer:!1},TIMELINE:{code:"time",isTable:!1,isOnlyInLegacyExplorer:!1},TIMEBAR:{code:"time-bar",isTable:!1,isOnlyInLegacyExplorer:!1},TIMECOMBO:{code:"time-combo",isTable:!1,isOnlyInLegacyExplorer:!1},WATERFALL:{code:"waterfall",isTable:!1,isOnlyInLegacyExplorer:!1},STACK_WATERFALL:{code:"stackwaterfall",isTable:!1,isOnlyInLegacyExplorer:!1},COMBO:{code:"combo",isTable:!1,isOnlyInLegacyExplorer:!1},FUNNEL:{code:"funnel",isTable:!1,isOnlyInLegacyExplorer:!1},ORIGAMI:{code:"origami",isTable:!1,isOnlyInLegacyExplorer:!1},SANKEY:{code:"sankey",isTable:!1,isOnlyInLegacyExplorer:!1},METRICS_RADAR:{code:"metricsradar",isTable:!1,isOnlyInLegacyExplorer:!1},CHOROPLETH:{code:"choropleth",isTable:!1,isOnlyInLegacyExplorer:!1},BUBBLEMAP:{code:"bubblemap",isTable:!1,isOnlyInLegacyExplorer:!1},GEOMAP:{code:"geomap",isTable:!1,isOnlyInLegacyExplorer:!1},PYRAMID:{code:"pyramid",isTable:!1,isOnlyInLegacyExplorer:!1},STACKPYRAMID:{code:"stackpyramid",isTable:!1,isOnlyInLegacyExplorer:!1},GAUGE:{code:"gauge",isTable:!1,isOnlyInLegacyExplorer:!1},POLAR_GAUGE:{code:"polargauge",isTable:!1,isOnlyInLegacyExplorer:!1},FLAT_GAUGE:{code:"flatgauge",isTable:!1,isOnlyInLegacyExplorer:!1},BULLET:{code:"bullet",isTable:!1,isOnlyInLegacyExplorer:!1},RATING:{code:"rating",isTable:!1,isOnlyInLegacyExplorer:!1},MATRIX:{code:"matrix",isTable:!1,isOnlyInLegacyExplorer:!1},TREEMAP:{code:"treemap",isTable:!1,isOnlyInLegacyExplorer:!1},CALHEATMAP:{code:"calheatmap",isTable:!1,isOnlyInLegacyExplorer:!1},PARALLELCOORDS:{code:"parallelcoords",isTable:!1,isOnlyInLegacyExplorer:!1},VALUES_TABLE:{code:"valuestable",isTable:!0,isOnlyInLegacyExplorer:!1},COMPARISON_TABLE:{code:"comparisontable",isTable:!0,isOnlyInLegacyExplorer:!1},PIVOT_TABLE:{code:"pivottable",isTable:!0,isOnlyInLegacyExplorer:!1}})},12107:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;a=r(96486),s=r(723),o=r(61506).Z,i=r(97589),e.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this.getType()},t.getDefaultValue=function(){return this.DEFAULT},t.prototype._getLocalizationService=function(){if(o.has(i))return o.get(i)},t.prototype.getSupportedOperator=function(e){return a.reduce(e||[],(function(e,t){return e[t.name]=!0,e}),{})},t.prototype.getLabel=function(e,t,r){try{return this._value.getLabel(e,this._getLocalizationService(),t,r)}catch(t){return t,e}},t.prototype.isValid=function(e){return!0},t.prototype.getValue=function(e){return e},t.prototype.getType=function(){return this._value.type},t.prototype.isDate=function(){var e;return"date"===(e=this._value.type)||"datetime"===e},t.prototype.isNumeric=function(){var e;return"int"===(e=this._value.type)||"double"===e||"currency"===e||"percent"===e},t.prototype.getFilterValue=function(e,t){return this._value.getFilterValue(e,t)},t}(s),n.build(n,{DATE:{type:"date",getLabel:function(e,t,r,i){return i.isValidDate(e,i.getApiDateFormat())?i.formatDate(e,null,r):e},getFilterValue:function(e,t){return e}},DATETIME:{type:"datetime",getLabel:function(e,t,r,i){return i.isValidDate(e,i.getApiDateFormat())?i.formatDateTime(e,r):e},getFilterValue:function(e,t){return e}},TIME:{type:"time",getLabel:function(e,t,r,i){return a.isEmpty(e)?"":i.formatTime(e)},getFilterValue:function(e,t){return e}},BOOLEAN:{type:"boolean",getLabel:function(e){return e},getFilterValue:function(e,t){return e}},INT:{type:"int",getLabel:function(e,t){return t.formatNumber(e)},getFilterValue:function(e,t){return e}},DOUBLE:{type:"double",getLabel:function(e,t){return t.formatNumber(e)},getFilterValue:function(e,t){return e}},CURRENCY:{type:"currency",getLabel:function(e,t){return t.formatCurrency(e)},getFilterValue:function(e,t){return e instanceof Object?e.amount:e}},PERCENT:{type:"percent",getLabel:function(e,t){return t.formatPercent(e)},getFilterValue:function(e,t){return e}},PICKLIST:{type:"picklist",getLabel:function(e){return e},getFilterValue:function(e,t){return e}},MULTIPICKLIST:{type:"multipicklist",getLabel:function(e){return e},getFilterValue:function(e,t){return e&&Array.isArray(e)?0===e.length?"":e.join("; "):e}},REFERENCE:{type:"reference",getLabel:function(e){return e},getFilterValue:function(e,t){return""!==e?t:e}},STRING:{type:"string",getLabel:function(e){return e},getFilterValue:function(e,t){return""!==e?t:e}},ID:{type:"id",getLabel:function(e){return e},getFilterValue:function(e,t){return e}},HTML:{type:"html",getLabel:function(e){return e},getFilterValue:function(e,t){return e}},URL:{type:"url",getLabel:function(e){return e},getFilterValue:function(e,t){return 0===e.indexOf("http://")?[e.substr(7),e]:e}},EMAIL:{type:"email",getLabel:function(e){return e},getFilterValue:function(e,t){return e}},PHONE:{type:"phone",getLabel:function(e){return e},getFilterValue:function(e,t){return e}},DEFAULT:{type:"default",getLabel:function(e){return e},getFilterValue:function(e,t){return e}}})},88912:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g;g=r(96486),l=r(8429).Z,h=r(61506).Z,i=r(97589),s=r(11227).Z,n=r(67746).Z,d=r(11715),u=r(12107),c=r(67883),a=r(11822).Z,p=r(74978).trim,o=a.FIELD.getApiName(),e.exports=function(){function e(){}return e.get=function(){return null!=this._instance?this._instance:this._instance=new e},e.prototype._getLocalizationService=function(){if(h.has(i))return h.get(i)},e.prototype.getReportFilters=function(e,t,r,i){return null==r&&(r=new n),null==i&&(i={}),g.union(this._getScopeFilter(e,t),this._getStandardDateFilter(e,t),this._getStandardFilter(e,t),this._getCustomFilter(e,t,r,i),this._getCrossFilter(e,t),this._getRowLimitFilter(e),this._getDataCategoryFilter(e,t),this._getSummaryFilter(e),r.getShouldIncludeFilters()?this._getDynamicFilter(r.getFilters(),t):void 0)},e.prototype.convertToApiFilters=function(e,t){var r,i,s,n,o,a,l,u,h,p,g,m,_,f,y,b;if(null==e&&(e=[]),l=0,t.reportFormat===c.MULTI_BLOCK.getCode()){for(s=g=0,_=(y=t.blocks).length;g<_;s=++g)i=y[s],this.convertToApiFilters(e[s],i);delete t.scope,delete t.userOrHierarchyFilterId,delete t.userOrHierarchyFilterName,delete t.standardDateFilter,delete t.standardFilters,delete t.crossFilters,delete t.dataCategoryFilters,delete t.aggregateFilters,delete t.reportFilters,delete t.topRows}else{for(p=[],o=[],n=[],a=[],h=[],r=[],m=0,f=e.length;m<f;m++)switch(u=e[m],d.getEnumByName(u.type)){case d.SCOPE:t.scope=u.value,t.supportsRoleHierarchy&&(t.userOrHierarchyFilterId=null!=(b=u.roleHierarchyInfo)?b.userOrHierarchyFilterId:void 0);break;case d.STANDARDDATE:t.standardDateFilter=u.filter;break;case d.STANDARD:p.push({name:u.filter.name,value:u.value});break;case d.CUSTOM:o.push(u.filter);break;case d.CHART:case d.LINKED:o.push(u.filter),l++;break;case d.CROSS:n.push(this._convertMetaDataCrossFilter(u));break;case d.ROWLIMIT:h.push(this._convertMetadataRowLimitFilter(u));break;case d.DATACATEGORY:a.push(this._convertMetaDataCategoryFilter(u));break;case d.SUMMARY:r.push(this._convertMetaDataSummaryFilter(u))}t.standardFilters=p,t.crossFilters=n,t.dataCategoryFilters=a,t.reportFilters=o,t.aggregateFilters=r,t.topRows=h[0]}return l},e.prototype._getScopeFilter=function(e,t){var r,i;return null==e.scope?[]:(r={type:d.SCOPE.getName(),value:e.scope,operator:"",columnName:l.getLabel("reportBuilder","scopeFilter"),isDeletable:!1},window.testMode||"undefined"==typeof $A||null===$A||(r.roleHierarchyInfo={userOrHierarchyFilterId:e.userOrHierarchyFilterId,userOrHierarchyFilterName:e.userOrHierarchyFilterName,scopeOptions:null!=(i=t.getScopeInfo())?i.values:void 0,selectedScope:r.value},r.showRoleHierarchyFilter=e.supportsRoleHierarchy&&!$A.isMock),[r])},e.prototype._getStandardDateFilter=function(e,t){var r;return null==(r=e.standardDateFilter)?[]:[{type:d.STANDARDDATE.getName(),value:this._getStandardDateFilterValue(r.startDate,r.endDate),operator:"",columnName:t.getColumnName(r.column),isDeletable:!1,filter:r}]},e.prototype._getStandardDateFilterValue=function(e,t){var r,i;return i=u.DATE.getLabel(e,null,this),r=u.DATE.getLabel(t,null,this),e||t?e&&!t?l.getLabel("reportBuilder","standardDateOnOrAfter",i):!e&&t?l.getLabel("reportBuilder","standardDateOnOrBefore",r):e===t?l.getLabel("reportBuilder","standardDateOn",i):l.getLabel("reportBuilder","standardDateRange",i,r):l.getLabel("reportBuilder","allTime")},e.prototype._getStandardFilter=function(e,t){var r,i,s,n,o,a;if(null==e.standardFilters)return[];for(a=[],r=s=0,n=(o=e.standardFilters).length;s<n;r=++s)i=o[r],a.push({type:d.STANDARD.getName(),value:i.value,operator:"",columnName:t.getStandardFilterInfo(i.name).label,isDeletable:!1,index:r,filter:i});return a},e.prototype._getCustomFilter=function(e,t,r,i){var s,o,a,l,u,c,h;if(null==r&&(r=new n),null==i&&(i={}),null==e.reportFilters)return[];if((u=(a=e.reportFilters).length-r.getNumDynamicFiltersInAPI()-1)<0)return[];for(h=[],l=c=0;0<=u?c<=u:c>=u;l=0<=u?++c:--c)s={type:d.CUSTOM.getName(),value:this._getFilterValue(a[l],t),operator:t.getOperatorLabel(a[l].column,a[l].operator),columnName:this._getFilterColumnName(a[l],t),isDeletable:!0,filter:a[l],isRunPageEditable:a[l].isRunPageEditable},o=i["fv"+l],a[l].isRunPageEditable&&!g.isEmpty(o)&&this._updateFilterValue(s,o),h.push(s);return h},e.prototype._getFilterValue=function(e,t){return e.filterType===o?t.getColumnName(e.value):e.value},e.prototype._getFilterColumnName=function(e,t){return e.snapshotDate?this._getHistoricalFilterColumnName(e,t):t.getColumnName(e.column)},e.prototype._getHistoricalFilterColumnName=function(e,t){var r,i;return r=t.getColumnName(e.column),i=null,null==(i=this.isValidDate(e.snapshotDate,this.getApiDateFormat())?this.formatDate(e.snapshotDate,this.getApiDateFormat(),this.getLocalizedDateInputFormat(),!0):t.getSnapshotDateLabel(e.snapshotDate))&&(i=e.snapshotDate),r+": "+i},e.prototype._getCriteria=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push({label:"",operator:"",type:d.SUBFILTER.getName(),apiName:t.column,value:t.value,isDeletable:!0,isRunPageEditable:t.isRunPageEditable,filter:{column:t.column,operator:t.operator,value:t.value}});return s},e.prototype._getDynamicFilter=function(e,t){var r,i,s,n;for(n=[],i=0,s=e.length;i<s;i++)r=e[i],n.push({type:r.type,value:r.filter.value||'""',operator:t.getOperatorLabel(r.filter.column,r.filter.operator),columnName:t.getColumnName(r.filter.column),isDeletable:!1,isRunPageEditable:!1,filter:r.filter});return n},e.prototype._getCrossFilter=function(e,t){var r,i,s,n,o,a,u,c,h,p,g;if(null==e.crossFilters)return[];for(i=[],n=h=0,p=(g=e.crossFilters).length;h<p;n=++h)r=g[n],o=(null!=(a=null!=(u=t.getCrossFilterObjectRelationships())?u.find((function(e){return e.primaryEntityField===r.primaryEntityField})):void 0)?a.relatedObjects.find((function(e){return e.relatedEntity===r.relatedEntity&&e.relatedEntityJoinField===r.relatedEntityJoinField})):void 0).label,c=r.includesObject?l.getLabel("ObjectFilterOperator","w"):l.getLabel("ObjectFilterOperator","wo"),s={label:o,objectRelationships:u,type:d.CROSS.getName(),criteria:this._getCriteria(r.criteria),includesObject:r.includesObject,primaryEntityField:r.primaryEntityField,relatedEntity:r.relatedEntity,relatedEntityJoinField:r.relatedEntityJoinField,isDeletable:!0,isRunPageEditable:!1,operator:c,canBeLocked:!0,index:n,reportType:e.reportType},i.push(s);return i},e.prototype._getRowLimitFilter=function(e){var t;return null==e.topRows?[]:(t=e.topRows,[{type:d.ROWLIMIT.getName(),direction:t.direction,rowLimit:t.rowLimit,canBeLocked:!1,isDeletable:!0,isRunPageEditable:!1}])},e.prototype._getDataCategoryFilter=function(e,t){var r,i,n,o,a,l,u;if(null==e.dataCategoryFilters)return[];for(i=[],o=a=0,l=(u=e.dataCategoryFilters).length;a<l;o=++a)n={operator:(r=u[o]).operation,categoryGroupId:r.categoryGroupId,categoryValueId:r.categoryId,categoryGroups:t.getDataCategories(),type:d.DATACATEGORY.getName(),isDeletable:!0,isRunPageEditable:!1,canBeLocked:!1,index:o,validOperators:s.getDataCategoryOperators()},i.push(n);return i},e.prototype._getSummaryFilter=function(e){var t,r,i,s,n,o,a;if(null==e.aggregateFilters)return[];for(t=[],i=n=0,o=(a=e.aggregateFilters).length;n<o;i=++n)r={operator:(s=a[i]).operator,value:s.value,aggregate:s.aggregate,type:d.SUMMARY.getName(),isDeletable:!0,isRunPageEditable:!1,canBeLocked:!1,index:i},t.push(r);return t},e.prototype._convertMetaDataCrossFilter=function(e){var t,r;return t=[],null!=(r=e.criteria)&&r.forEach((function(e){return t.push({column:e.filter.column,isRunPageEditable:e.filter.isRunPageEditable,operator:e.filter.operator,value:e.filter.value})})),{criteria:t,includesObject:e.includesObject,primaryEntityField:e.primaryEntityField,relatedEntity:e.relatedEntity,relatedEntityJoinField:e.relatedEntityJoinField}},e.prototype._convertMetadataRowLimitFilter=function(e){return{rowLimit:e.rowLimit,direction:e.direction}},e.prototype._convertMetaDataCategoryFilter=function(e){return{operation:e.operator,categoryGroupId:e.categoryGroupId,categoryId:e.categoryValueId}},e.prototype._convertMetaDataSummaryFilter=function(e){return{value:e.value,operator:e.operator,aggregate:e.aggregate}},e.prototype.updateFilter=function(e,t,r){var i,s,n,o,a,l;switch(d.getEnumByName(e.type)){case d.STANDARDDATE:return s=t.length>0?t[0]:[null,null,"CUSTOM"],l=(i=Array(s)[0]).length>0?i[0]:null,o=i.length>1?i[1]:null,n=i.length>2?i[2]:"CUSTOM",e.filter.startDate=l,e.filter.endDate=o,e.filter.durationValue=n,e.value=this._getStandardDateFilterValue(l,o);case d.STANDARD:if(a=t.length>0?Array(t).toString():null)return this._updateFilterValue(e,a);break;case d.CUSTOM:return(a=t.length>0?Array(t).toString():null)&&this._updateFilterValue(e,a),e.operator=r,e.filter.operator=r}},e.prototype.setFilterValues=function(e,t,r){switch(d.getEnumByName(e.type)){case d.SCOPE:return this._setScopeFilterValue(e,t);case d.STANDARD:return this._setStandardFilterValue(e,t);case d.CUSTOM:return this._setCustomFilterValue(e,t,r);case d.STANDARDDATE:return this._setStandardDateFilterValue(e,t,r);case d.CROSS:return this._setCrossFilterValue(e,t,r);case d.ROWLIMIT:return this._setRowLimitFilterValue(e,t);case d.DATACATEGORY:return this._setDataCategoryFilterValue(e,t,r);case d.SUMMARY:return this._setSummaryFilterValue(e,t)}},e.prototype._setCustomFilterValue=function(e,t,r){var i,s;return this._setFilterColumn(e,t),i=e.dataType?e.dataType:r.getColumnDataType(e.filter.column),this._setLockedFilterValue(e,t),this._setOperatorValue(e,t,"boolean"===i),t.filterType===o?this._updateFilterValue(e,t.value,r.getColumnName(t.value)):null!=t.dateField?this._setCustomDateFilterValue(e,t,i):g.isArray(t.values)?null!=(null!=(s=t.values[0])?s.isSelected:void 0)?this._updateFilterValue(e,this._getPicklistFilterValue(t.values,!0),this._getPicklistFilterValue(t.values,!1)):this._updateFilterValue(e,this._joinStringValues(t.values)):null!=t.values.value?this._updateFilterValue(e,t.values.value,t.values.label):this._updateFilterValue(e,t.values),this._setFilterTypeValue(e,t),this._setSnapshotDateValue(e,t)},e.prototype._setFilterColumn=function(e,t){if(null!=t.selectedField)return e.columnName=t.selectedField.label,e.filter.column=t.selectedField.value},e.prototype._setCrossFilterValue=function(e,t){return e.criteria=t.criteria,e.includesObject=t.selectedIncludeOption,e.primaryEntityField=t.selectedPrimaryObject,e.relatedEntity=t.selectedRelatedObject,e.relatedEntityJoinField=t.relationshipJoinField},e.prototype._setRowLimitFilterValue=function(e,t){return e.rowLimit=t.newRowLimit},e.prototype._setDataCategoryFilterValue=function(e,t){return e.operator=t.selectedOperator.value,e.categoryGroupId=t.selectedCategoryGroup.value,e.categoryValueId=t.selectedCategoryFilterValue.value},e.prototype._setSummaryFilterValue=function(e,t){return e.value=t.value,e.operator=t.operator.value,e.aggregate=t.aggregate},e.prototype.setSubFilterValues=function(e,t,r,i){var s;return i?e.criteria.splice(r,1):(-1===r&&(r=e.criteria.length-1),s=e.criteria[r],this._setCustomFilterValue(s,t),e.criteria[r]=s)},e.prototype._setScopeFilterValue=function(e,t){if(e.operator="",e.value=t.values.value,e.roleHierarchyInfo&&(e.roleHierarchyInfo.selectedScope=t.values.value),e.roleHierarchyInfo&&t.values.roleHierarchyInfo)return e.roleHierarchyInfo.userOrHierarchyFilterId=t.values.roleHierarchyInfo.userOrHierarchyFilterId,e.roleHierarchyInfo.userOrHierarchyFilterName=t.values.roleHierarchyInfo.userOrHierarchyFilterName},e.prototype._setStandardFilterValue=function(e,t){return this._setOperatorValue(e,t),this._updateFilterValue(e,t.values.value)},e.prototype._setStandardDateFilterValue=function(e,t,r){var i,s,n,o;return null!=t.customRange.startDate?(o=t.customRange.startDate,n=t.customRange.endDate):null!=t.startDate.value.date||null!=t.endDate.value.date?(this.getLocalizedDateInputFormat(),o=this._getDateInApiFormat(t.startDate.value.inputValue),n=this._getDateInApiFormat(t.endDate.value.inputValue)):(o="",n=""),i=t.dateField,"all_time"===(s=null!=t.customRange.value?t.customRange.value:"CUSTOM")&&(s="CUSTOM"),o||(o=null),n||(n=null),e.filter={durationValue:s,startDate:o,endDate:n,column:i},e.value=this._getStandardDateFilterValue(o,n)},e.prototype._setCustomDateFilterValue=function(e,t,r){var i,s,n,o,a,l,u,d;return o=t.startDate.value,a=function(){var e,a,c,h;if(t.startDate.isRelativeDate)return o;if("date"===r){for(s=this.getLocalizedDateInputFormat(),n=this.splitStringValues(o.inputValue,s),l=e=0,c=n.length;e<c;l=++e)""!==(i=n[l])&&(n[l]=this._getDateInApiFormat(i));return this._joinStringValues(n)}if("time"===r){for(d=this.splitStringValues(o.time.inputValue),l=a=0,h=d.length;a<h;l=++a)""!==(u=d[l])&&(d[l]=this._getTimeInApiFormat(u));return this._joinStringValues(d)}return this._getDateTimeInApiFormat(o)}.call(this),this._updateFilterValue(e,a)},e.prototype.getApiDateFormat=function(){return"yyyy-MM-dd"},e.prototype.getApiTimeFormat=function(){return"HH:mm:ss.SSS"},e.prototype.getLocalizedDateInputFormat=function(){return this._getLocalizationService().getShortDateFormat()},e.prototype.getLocalizedTimeInputFormat=function(){return this._getLocalizationService().getTimeFormat(!0)},e.prototype._getDateInApiFormat=function(e){return g.isEmpty(e)?"":this.formatDate(e,this.getLocalizedDateInputFormat(),this.getApiDateFormat(),!1)},e.prototype._getTimeInApiFormat=function(e){return g.isEmpty(e)||!this.isValidTime(e)?"":this.formatDate("1970-01-01 "+e,this.getApiDateFormat()+" "+this.getLocalizedTimeInputFormat(),this.getApiTimeFormat())},e.prototype._getDateTimeInApiFormat=function(e){var t;return(t=e.time)&&!g.isEmpty(t.inputValue)?this.convertDateTimeToISO(t.dateInput||e.inputValue,t.inputValue):this._getDateInApiFormat(e.inputValue)},e.prototype.isISOFormat=function(e){var t;try{return(t=new Date(e).toISOString()).substring(0,19)+t.substring(23)===e}catch(e){return e,!1}},e.prototype.isValidDate=function(e,t){return null==t&&(t=this.getLocalizedDateInputFormat()),g.isDate(e)?this._getLocalizationService().isValidDateObject(e):""===(e=this._getLocalizationService().translateFromLocalizedDigits(e))||(!!this.isISOFormat(e)||null!=this._getLocalizationService().parseDateTime(e,t,!0))},e.prototype.isValidTime=function(e){var t,r,i;return!!g.isEmpty(e)||(e=this._getLocalizationService().translateFromLocalizedDigits(e),r=(t=this.getLocalizedDateInputFormat())+" "+this.getLocalizedTimeInputFormat(),i=this._getLocalizationService().formatDate(new Date,t),null!=this._getLocalizationService().parseDateTime(i+" "+e,r,!0))},e.prototype.getNewFilter=function(e,t,r){return{columnName:t,type:d.CUSTOM.getName(),isDeletable:!0,isRunPageEditable:!0,operator:"",value:this._getDefaultValue(r),filter:{column:e,operator:"",value:"",isRunPageEditable:!0}}},e.prototype.getNewCrossFilter=function(e){return{label:"",objectRelationships:e,type:d.CROSS.getName(),includesObject:!0,isDeletable:!0,isRunPageEditable:!1,operator:"",value:"",filter:{column:"",operator:"",value:"",isRunPageEditable:!1}}},e.prototype.getNewRowLimitFilter=function(e){return{rowLimit:10,direction:e[0].sortOrder,type:d.ROWLIMIT.getName(),isDeletable:!0,isRunPageEditable:!1}},e.prototype.getNewDataCategoryFilter=function(e){return{label:"",categoryGroups:e,type:d.DATACATEGORY.getName(),isDeletable:!0,isRunPageEditable:!1,operator:"",value:"",validOperators:s.getDataCategoryOperators(),filter:{column:"",operator:"",value:"",isRunPageEditable:!1}}},e.prototype.getNewSummaryFilter=function(e){return{value:0,operator:"",aggregate:"",type:d.SUMMARY.getName(),isDeletable:!0,isRunPageEditable:!1,aggregateName:""}},e.prototype._getDefaultValue=function(e){return"boolean"===e?"True":""},e.prototype._getPicklistFilterValue=function(e,t){var r,i,s,n;for(r=[],s=0,n=e.length;s<n;s++)(i=e[s]).isSelected&&r.push(this._getPicklistOptionValue(i,t));return this._joinStringValues(r)},e.prototype._getPicklistOptionValue=function(e,t){return e.isNull?"":t?e.name:e.label},e.prototype._updateFilterValue=function(e,t,r){return e.filter.value=t,e.value=null!=r?r:t},e.prototype.getFilterPredicate=function(e,t,r){var i,s,n,o,a,c,h,p,m,_,f,y,b,C;return b=e.roleHierarchyInfo,y=d.getEnumByName(e.type),m=function(){if(y.shouldRenderFilterPredicate(e)){if(y===d.CUSTOM||y===d.SUBFILTER)return _=e.value||e.filter.value,h=e.dataType||t.retrieveColumnInfo(e.filter.column).dataType,p=u.getEnumByCode(h),f=this.formatFilterValue(_,!0,h,p.getLabel.bind(p)),l.getLabel("reportBuilder","filterPredicate",r,f);if(y===d.ROWLIMIT)return e.rowLimit;if(y===d.DATACATEGORY){if(n=e.categoryGroups,c=g.find(n,(function(t){return t.categoryGroupId===e.categoryGroupId})),i=c.categories[0],e.categoryValueId===i.categoryId)m=i.categoryName;else for((a=[]).push.apply(a,i.childNodes);a.length>0;){if((o=a.shift()).categoryId===e.categoryValueId){m=o.categoryName;break}a.push.apply(a,o.childNodes)}return m}return y===d.SUMMARY?l.getLabel("reportBuilder","aggregateSumRecordCount",r,e.value):(f=y.getFormattedFilter(e,t),l.getLabel("reportBuilder","filterPredicate",r,f))}return""}.call(this),null!=(null!=b?b.userOrHierarchyFilterId:void 0)&&(C=b.userOrHierarchyFilterId,s=l.getLabel("LightningReportFilter","00E"===C.substring(0,3)?"roleHierarchyRoleLevel":"roleHierarchyUserLevel"),m=s.replace("{0}",m).replace("{1}",b.userOrHierarchyFilterName)),m},e.prototype.isHistoricalField=function(e,t){return e&&t&&t.getHistoricalMetadata()&&!!t.getHistoricalMetadata().getHistoricalSubColumnInfo(e)},e.prototype.formatFilterValue=function(e,t,r,i){var s,n,o;return n=this.splitStringValues(null!=e?e.toString():void 0),(s=g.indexOf(n,""))>=0&&(n.splice(s,1),n.push("")),null!=i&&(n=g.map(n,(o=this,function(e){return i(e,null,o)}))),this._joinStringValues(n,t,"date"!==r&&"datetime"!==r)},e.prototype._setLockedFilterValue=function(e,t){return e.isRunPageEditable=!t.isLocked,e.filter.isRunPageEditable=!t.isLocked},e.prototype._setOperatorValue=function(e,t,r){return e.filter.operator=null!=t.operator?t.operator.value:r?"equals":"",e.operator=null!=t.operator?t.operator.label:r?l.getLabel("reportBuilder","booleanFilterEqualOperator"):""},e.prototype._setFilterTypeValue=function(e,t){return e.filter.filterType=t.filterType},e.prototype._setSnapshotDateValue=function(e,t){if(t.hasOwnProperty("snapshotDate"))return e.filter.snapshotDate=t.snapshotDate},e.prototype.splitStringValues=function(e,t){var r,i,s,n,o,a,l,u;if(null==e&&(e=""),null==t&&(t=null),l=[],r=!1,a=e.length,",",'"',e.indexOf(",")>-1||e.indexOf('"')>-1)for(i=0,s=null!=t?(t+"").split(",").length-1:0;i<=a;){for(;i<a&&/\s/.test(e.charAt(i));)i++;if(i<a&&'"'===e.charAt(i)){for(o=++i;i<a&&'"'!==e.charAt(i);)i++;if(i<a){for(r=this._addValueToList(e.substring(o,i),l,r);i<a&&","!==e.charAt(i);)i++;i++}else r=this._addValueToList(e.substring(o,a),l,r)}else{for(o=i,n=u=0;0<=s?u<=s:u>=s;n=0<=s?++u:--u){for(;i<a&&","!==e.charAt(i);)i++;n!==s&&i++}r=this._addValueToList(p(e.substring(o,i)),l,r),i++}}else this._addValueToList(p(e),l,r);return l},e.prototype._addValueToList=function(e,t,r){var i;return"'",(i=e.length)>=2&&"'"===e.charAt(0)&&"'"===e.charAt(i-1)&&(e=e.substring(1,i-1)),e.length>0?t.push(e):r||(t.push(""),r=!0),r},e.prototype._joinStringValues=function(e,t,r){var i,s,n,o;for(null==t&&(t=!1),null==r&&(r=!0),n=0,o=e.length;n<o;n++)s=e[n],null!=i?i+=", ":i="",""===(s+="")&&t?i+='""':r&&(" "===s.charAt(0)||" "===s.charAt(s.length-1)||s.indexOf(",")>-1)?i+='"'+s+'"':i+=s;return i},e.prototype.getSelectedPicklistValues=function(e,t){var r,i,s,n,o;return o=e.isNew?[]:this.splitStringValues(e.value),n=[],e.type===d.SUBFILTER.getName()?i=e.filterValues||[]:(i=(r=t.retrieveColumnInfo(e.filter.column)).filterValues,s=r.inactiveFilterValues),i.map(this.buildFilterValue(n,o,!0)),null!=s&&s.length>0&&s.map(this.buildFilterValue(n,o,!1)),n.push({label:l.getLabel("MultiSelectPicker","nullSelection"),isNull:!0,isSelected:o.indexOf("")>-1,isActive:!0}),n},e.prototype.buildFilterValue=function(e,t,r){return function(i,s){return e.push({label:i.label,name:i.name,value:i.name,isSelected:t.indexOf(i.name)>-1,isActive:r})}},e.prototype.parseDate=function(e,t,r,i){var s,n;return null==r&&(r=!0),null==i&&(i=!1),e?(-1!==e.indexOf("T")?(s=new Date(e),this._getLocalizationService().UTCToWallTime(s,null,(function(t){return e=t.toISOString()})),n=e.split("T")[0]):n=e,null!=(s=i?this._getLocalizationService().parseDateTimeUTC(n,t||this.getApiDateFormat(),!0):this._getLocalizationService().parseDateTime(n,t||this.getApiDateFormat(),!0))?r?this._getLocalizationService().translateToOtherCalendar(s):this._getLocalizationService().translateFromOtherCalendar(s):null):""},e.prototype.parseDateTime=function(e){var t;return e?(null,t=this._getLocalizationService().parseDateTimeISO8601(e),this.convertToTimezone(t)):""},e.prototype.convertToTimezone=function(e){var t,r;return t=null,this._getLocalizationService().UTCToWallTime(e,null,(r=this,function(e){return t=r._getLocalizationService().translateToOtherCalendar(e)})),t},e.prototype.formatDate=function(e,t,r,i){var s,n;return null==i&&(i=!0),e?(i||(e=this._getLocalizationService().translateFromLocalizedDigits(e)),null!=(s=this.parseDate(e,t,i,!0))?(n=this._getLocalizationService().formatDateUTC(s,r),i?this._getLocalizationService().translateToLocalizedDigits(n):n):""):""},e.prototype.formatDateTime=function(e,t,r){var i,s,n;return null==r&&(r=!0),e?(r||(e=this._getLocalizationService().translateFromLocalizedDigits(e)),i=this.parseDateTime(e),s=t||this._getLocalizationService().getDateTimeFormat().replace(":ss","").replace(".SSS",""),n=this._getLocalizationService().formatDateTimeUTC(i,s),r?this._getLocalizationService().translateToLocalizedDigits(n):n):""},e.prototype.formatTime=function(e){var t;return t=this._getLocalizationService().formatTime("1970-01-01 "+e,this._getLocalizationService().getTimeFormat(!0)),this._getLocalizationService().translateToLocalizedDigits(t)},e.prototype.convertDateTimeToISO=function(e,t){var r,i,s,n,o;return e=(n=this._getLocalizationService()).translateFromLocalizedDigits(e),t=n.translateFromLocalizedDigits(t),s=this.getLocalizedDateInputFormat()+" "+this.getLocalizedTimeInputFormat(),o=e+" "+t,i=n.parseDateTimeUTC(o,s,null,!0),r=null,n.WallTimeToUTC(i,null,(function(e){return r=e})),(r=n.translateFromOtherCalendar(r)).toISOString().substring(0,19)+r.toISOString().substring(23)},e}()},11715:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty,u=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};i=r(723),n=r(12107),s=["organization","orgAll"],a=["all",">0","te",""],e.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this.getName()},t.prototype.getFormattedFilter=function(e,t){return this._value.getFormattedFilter(e,t)},t.prototype.shouldRenderFilterPredicate=function(e){return!e.isNew},t.prototype.isActiveFilter=function(e){return this._value.isActiveFilter(e)},t}(i),o.build(o,{SCOPE:{getFormattedFilter:function(e,t){var r,i,s,n;for(i=0,s=(n=t.getScopeInfo().values).length;i<s;i++)if((r=n[i]).value===e.value)return e.label=r.label,r.label},isActiveFilter:function(e){var t;return t=e.value,u.call(s,t)<0}},STANDARDDATE:{getFormattedFilter:function(e,t){var r;return"CUSTOM"===(r=e.filter.durationValue)?e.value:t.getDurationLabel(r)+" ("+e.value+")"},isActiveFilter:function(e){return!(!e.filter.startDate&&!e.filter.endDate)}},STANDARD:{getFormattedFilter:function(e,t){var r,i,s,n,o;for((r=t.getStandardFilterInfo(e.filter.name)).filterValues?i=r.filterValues:r.filterValue&&(i=[r.filterValue]),n=0,o=i.length;n<o;n++)if((s=i[n]).name===e.value)return e.label=s.label,s.label},isActiveFilter:function(e){var t;return t=e.value,u.call(a,t)<0}},CUSTOM:{getFormattedFilter:function(e,t){var r;return r=t.retrieveColumnInfo(e.filter.column),e.label=n.getEnumByCode(r.dataType).getLabel(e.value||e.filter.value)},isActiveFilter:function(e){return!0}},CROSS:{getFormattedFilter:function(e,t){return e.label},isActiveFilter:function(e){return!0}},ROWLIMIT:{getFormattedFilter:function(e,t){return e.label},isActiveFilter:function(e){return!0}},DATACATEGORY:{getFormattedFilter:function(e,t){return e.label},isActiveFilter:function(e){return!0}},SUMMARY:{getFormattedFilter:function(e,t){return e.label},isActiveFilter:function(e){return!0}},SUBFILTER:{getFormattedFilter:function(e,t){return n.getEnumByCode(e.dataType).getLabel(e.value)},isActiveFilter:function(e){return!1}},CHART:{getFormattedFilter:function(e,t){var r;return r=t.retrieveColumnInfo(e.filter.column),e.label=n.getEnumByCode(r.dataType).getLabel(e.value||e.filter.value)},isActiveFilter:function(e){return!1}},LINKED:{getFormattedFilter:function(e,t){var r;return r=t.retrieveColumnInfo(e.filter.column),e.label=n.getEnumByCode(r.dataType).getLabel(e.value||e.filter.value)},isActiveFilter:function(e){return!1}}})},5033:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(8429).Z,i=r(14532),e.exports=function(e){function t(e,r,n){this._formulaString=r,this._level=null!=n?n:i.Error,t.__super__.constructor.call(this,e),this.name="FormulaError",this.title=s.getLabel("FormulaError","title"),this.message=e,this.level=this._level}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,Error),t.prototype.getFormulaString=function(){return this._formulaString},t.prototype.getLevel=function(){return this._level},t}()},14532:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(i),s.build(s,["Warning","Error"])},67951:(e,t,r)=>{var i,s,n,o,a,l,u,d;s=r(27223),d=r(74978),u=d.startsWith,a=d.contains,l=r(83993).Oz,n=r(55430),i=r(51308),o=r(60873).Z,e.exports=function(){function e(e){this._json=e}return e.isNew=function(e){return null==e||u(e,"new")||a(e,":")},e.prototype.getType=function(){return s.checkImplemented()},e.prototype.getId=function(){return s.checkImplemented()},e.prototype.getLabel=function(){return s.checkImplemented()},e.prototype.getName=function(){return s.checkImplemented()},e.prototype.getNamespace=function(){return s.checkImplemented()},e.prototype.getDataspace=function(){},e.prototype.getFullyQualifiedName=function(){return l(this.getName(),this.getNamespace())},e.prototype.getDescription=function(){return s.checkImplemented()},e.prototype.getUrl=function(){return s.checkImplemented()},e.prototype.getBaseRoute=function(){return s.checkImplemented()},e.prototype.getVisibility=function(){return o.ALL},e.prototype.getFolder=function(){if(null!=this._json.folder)return new i(this._json.folder)},e.prototype.getFolderId=function(){var e;return null!=(e=this._json.folder)?e.id:void 0},e.prototype.getPermissions=function(){return this._json.permissions},e.prototype.isNew=function(){return e.isNew(this.getId())},e.prototype.isUserPrivateAsset=function(){var e;return 0===(null!=(e=this.getFolderId())?e.indexOf("005"):void 0)},e.prototype.canView=function(){var e;return!!(null!=(e=this._json.permissions)?e.view:void 0)},e.prototype.canModify=function(){var e;return!!(null!=(e=this._json.permissions)?e.modify:void 0)},e.prototype.canManage=function(){var e;return!!(null!=(e=this._json.permissions)?e.manage:void 0)},e.prototype.getCreatedBy=function(){return this._json.createdBy},e.prototype.getCreatedByName=function(){var e;return null!=(e=this._json.createdBy)?e.name:void 0},e.prototype.getCreatedById=function(){var e;return null!=(e=this._json.createdBy)?e.id:void 0},e.prototype.getCreatedByPhotoUrl=function(){return n.getProfilePhotoUrl(this._json.createdBy)},e.prototype.getCreatedDate=function(){return this._json.createdDate},e.prototype.getLastAccessedDate=function(){return this._json.lastAccessedDate},e.prototype.getLastModifiedDate=function(){return this._json.lastModifiedDate},e.prototype.getLastModifiedByName=function(){var e;return null!=(e=this._json.lastModifiedBy)?e.name:void 0},e.prototype.getFiles=function(){return this._json.files||[]},e.prototype.getRefreshDate=function(){return 0},e.prototype.doNotUseThisToSetFiles=function(e){return this._json.files=e},e.prototype.getAssetSharingUrl=function(){return this._json.assetSharingUrl},e.prototype.getSldsIconCode=function(){return this.getType().getSldsIconCode()},e.prototype.isPrivateOrPublicFolder=function(){return!1},e.prototype.getJson=function(){return this._json},e}()},51308:(e,t,r)=>{var i;i=r(83993).Oz,e.exports=function(){function e(e){this._json=e}return e.prototype.getId=function(){return this._json.id},e.prototype.getName=function(){return this._json.name},e.prototype.getNamespace=function(){return this._json.namespace},e.prototype.getFullyQualifiedName=function(){return i(this.getName(),this.getNamespace())},e.prototype.getUrl=function(){return this._json.url},e.prototype.getLabel=function(){return this._json.label},e.prototype.getJson=function(){return this._json},e}()},47475:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(78978),e.exports=i=function(){function e(e,t){this._type=e,this._id=t}return e.prototype.getType=function(){return this._type},e.prototype.getId=function(){return this._id},e}(),i.Type=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.of=function(e){return new i(this,e)},t}(s),i.Type.build(i.Type,["STEP","WIDGET"])},52570:(e,t,r)=>{var i,s;s=r(83993).IO,i=r(40651).Z,e.exports=function(){function e(e,t){this._json=e,this._dashboardMetadata=t}return e.prototype.getId=function(){return this.getAssetId()+"-"+this.getFields()[0]},e.prototype.getLabel=function(){return this._json.label},e.prototype.getFields=function(){return this._json.fields},e.prototype.getOperator=function(){return this._json.operator},e.prototype.getValue=function(){return this._json.value},e.prototype.getDataset=function(){return this._json.dataset&&this._dashboardMetadata.getDatasetReferenceByName(s(this._json.dataset))},e.prototype.getDatasetId=function(){return this.getDataset().getId()},e.prototype.getDatasetName=function(){return this.getDataset().getName()},e.prototype.getFullyQualifiedAssetName=function(){var e;return(null!=(e=this.getDataset())?e.getFullyQualifiedName():void 0)||this.getSObject()||this.getCDPObject()||this.getReportObject()},e.prototype.getSObject=function(){return this._json.sobject},e.prototype.getCDPObject=function(){return this._json.cdpObject},e.prototype.getDataspace=function(){return this._json.dataspace},e.prototype.getReportObject=function(){return this._json.reportObject},e.prototype.getSequenceNumber=function(){return this._json.sequenceNumber},e.prototype.getAssetId=function(){var e;return(null!=(e=this.getDataset())?e.getId():void 0)||this.getSObject()||this.getCDPObject()||this.getReportObjectId()},e.prototype.getReportObjectId=function(){return this.getReportObject()+"-"+this.getSequenceNumber()},e.prototype.getAssetType=function(){return null!=this._json.sobject?i.SOBJECT:null!=this._json.cdpObject?i.CDP_OBJECT:null!=this._json.reportObject?i.REPORT_TYPE:i.DATASET},e.prototype.isLocked=function(){return this._json.locked},e.prototype.isHidden=function(){return this._json.hidden},e.prototype.isDependent=function(){return this._json.dependent},e.prototype.getDashboardMetadata=function(){return this._dashboardMetadata},e.prototype.getJson=function(){return this._json},e.prototype.shard=function(t){return new e(t,this._dashboardMetadata)},e.prototype.shardOperatorAndValue=function(e,t){return this.shard(_.extend({},this._json,{operator:e,value:t}))},e}()},29655:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;i=r(723),o=r(8429).Z,n=r(2391),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.apiCode},t.prototype.getLabel=function(){return o.getLabel("DashboardLayoutRowHeight",this.getCode())},t.prototype.getRowSpec=function(){return this._value.rowSpec},t}(i),s.build(s,{NORMAL:{apiCode:"normal",rowSpec:n.Type.PIXELS.of(45)},FINE:{apiCode:"fine",rowSpec:n.Type.PIXELS.of(12)}})},93947:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;a=r(96486),i=r(31550),n=r(98410),o=r(35750),e.exports=s=function(){function e(e,t,r){var i,s;this.isS1Mobile=r,s=i=a.defaults({},e.getStyleJson(),this.constructor.Property.getDefaults()),this._backgroundColor=s.backgroundColor,this._gutterColor=s.gutterColor,this._cellSpacingX=s.cellSpacingX,this._cellSpacingY=s.cellSpacingY,this._backgroundImageStyle=new n(i,t)}return e.prototype.getInlineStyle=function(){return a.extend({backgroundColor:this._backgroundColor},this._backgroundImageStyle.getInlineStyle())},e.prototype.getGutterInlineStyle=function(){return{backgroundColor:this._gutterColor,overflowY:this.isS1Mobile?"hidden":"auto"}},e.prototype.getGridCellSpacing=function(e){return{x:this._cellSpacingX,y:this._cellSpacingY}},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.getBackgroundImageStyle=function(){return this._backgroundImageStyle},e}(),s.Property=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getDefaults=function(){var e;return e={backgroundColor:i.BLACK1.getHexCode(),gutterColor:i.BLACK3.getHexCode(),cellSpacingX:8,cellSpacingY:8},a.extend(e,n.Property.getDefaults())},t}(o),s.Property.build(s.Property,s.Property.getDefaults())},1806:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;l=r(96486),s=r(723),a=r(83993).IO,o=r(8429).Z,i=r(51308),e.exports=n=function(){function e(e,t,r){this._id=e,this._json=t,this._dashboardMetadata=r}return e.prototype.getId=function(){return this._id},e.prototype.getLabel=function(){return this._json.label},e.prototype.getPlaceholderLabel=function(){return l.isEmpty(this.getLabel())?this.getId().replace(/_+/g," "):this.getLabel()},e.prototype.getType=function(){return this._json.type},e.prototype.getParameter=function(e){return this._json[e]},e.prototype.getQuery=function(){return this._json.query},e.prototype.getQueryParameter=function(e){if(null!=this._json.query)return this._json.query[e]},e.prototype.getValues=function(){return this._json.values},e.prototype.getColumns=function(){return this._json.columns},e.prototype.getVisualizationOptions=function(){var e;return null!=(e=this._json.visualizationParameters)?e.options:void 0},e.prototype.getVisualizationOption=function(e){var t;return null!=(t=this.getVisualizationOptions())?t[e]:void 0},e.prototype.getVisualizationType=function(){var e;return null!=(e=this._json.visualizationParameters)?e.visualizationType:void 0},e.prototype.getWidgetType=function(){var e;return null!=(e=this._json.visualizationParameters)?e.type:void 0},e.prototype.getWidgetVisualizationParameters=function(){var e;return null!=(e=this._json.visualizationParameters)?e.parameters:void 0},e.prototype.getWidgetVisualizationParameter=function(e){var t;return null!=(t=this.getWidgetVisualizationParameters())?t[e]:void 0},e.prototype.getDatasetIds=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getDatasets()).length;t<r;t++)e=i[t],s.push(e.getId());return s},e.prototype.getInaccessibleDatasetsNames=function(){var e,t,r,i,s,n,o,u,d;if(s=[],null!=this._json.datasets)for(n=0,o=(u=this._json.datasets).length;n<o;n++)r=u[n],i=a(r),null==this.getDatasetByName(i)&&s.push(i);if(!l.isEmpty(this.getColumns()))for(t in d=this.getColumns())if(e=d[t].dataset){if(i=a(e),null!=this.getDatasetByName(i))continue;s.push(i)}return s},e.prototype.getDatasets=function(){var e,t,r,i,s;if(null==this._json.datasets)return[];for(s=[],t=0,r=(i=this._json.datasets).length;t<r;t++)e=i[t],s.push(this._dashboardMetadata.getDatasetReferenceByName(a(e)));return s},e.prototype.getDataset=function(e){var t;if(null!=(t=this._json.datasets[e]))return this.getDatasetByName(a(t))},e.prototype.getDatasetByName=function(e){return this._dashboardMetadata.getDatasetReferenceByName(e)},e.prototype.getAllDatasetIdsHackily=function(){var e,t,r,i,s,n,o,a,l;for(r=[],e={},i=0,n=(a=this.getDatasets()).length;i<n;i++)e[(t=a[i]).getId()]=!0,r.push(t.getId());for(s=0,o=(l=this._dashboardMetadata.getDatasetReferences()).length;s<o;s++)e[(t=l[s]).getId()]||(e[t.getId()]=!0,r.push(t.getId()));return r},e.prototype.getAllDatasetNamesHackily=function(){var e,t,r,i,s,n,o,a,l;for(r=[],e={},i=0,n=(a=this.getDatasets()).length;i<n;i++)e[(t=a[i]).getId()]=!0,r.push(t.getName());for(s=0,o=(l=this._dashboardMetadata.getDatasetReferences()).length;s<o;s++)e[(t=l[s]).getId()]||(e[t.getId()]=!0,r.push(t.getName()));return r},e.prototype.getSObject=function(){return this._json.sobject},e.prototype.getCDPObjects=function(){return this._json.cdpObjects},e.prototype.getDataspace=function(){return this._json.dataspace},e.prototype.getReport=function(){var e;return null!=(e=this._json.query)?e.reportId:void 0},e.prototype.getConnectionName=function(){return this._json.connectionName},e.prototype.getDimensions=function(){return this._json.dimensions},e.prototype.getSelectMode=function(){return e.SelectMode.getEnumByCode(this._json.selectMode)},e.prototype.getStart=function(){return this._json.start},e.prototype.getAttachedWidgets=function(){return this._dashboardMetadata.getWidgetsAttachedToLens(this.getId())},e.prototype.useGlobal=function(){return this._json.useGlobal},e.prototype.canBroadcastFacet=function(){return this._json.broadcastFacet},e.prototype.isFaceted=function(){return this._json.isFacet},e.prototype.getReceiveFacetMode=function(){var e;return null!=(e=this._json.receiveFacetSource)?e.mode:void 0},e.prototype.getReceiveFacetSteps=function(){var e;return null!=(e=this._json.receiveFacetSource)?e.steps:void 0},e.prototype.isGlobal=function(){return this._json.isGlobal},e.prototype.getAssetReference=function(){return new i({id:this._id,name:this._json.source.name,namespace:this._json.source.namespace,url:void 0,label:this._json.label})},e.prototype.getReferencedLensName=function(){return this._json.source.name},e.prototype.getReferencedLensNamespace=function(){return this._json.source.namespace},e.prototype.getDashboardId=function(){return this._dashboardMetadata.getId()},e.prototype.getDashboardLabel=function(){return this._dashboardMetadata.getLabel()},e.prototype.getDashboardFolderId=function(){return this._dashboardMetadata.getFolderId()},e.prototype.getDateVersion=function(){return this._dashboardMetadata.getDateVersion()},e.prototype.getTemplateSourceId=function(){return this._dashboardMetadata.getTemplateSourceId()},e.prototype.hasUserDefinedMetadata=function(e){return null==e&&(e=["strings","numbers","groups"]),l.some(e,(t=this,function(e){return!l.isEmpty(t.getParameter(e))}));var t},e.prototype.getJson=function(){return this._json},e.prototype.shard=function(t){return new e(this._id,t,this._dashboardMetadata)},e}(),n.SelectMode=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getDefaultValue=function(){return this.SINGLE},t.prototype.getCode=function(){return this._value.code},t.prototype.isSingle=function(){return this._value.single},t.prototype.isMultiple=function(){return this._value.multiple},t.prototype.isRequired=function(){return this._value.required},t.prototype.getLabel=function(){return o.getLabel("DashboardStepSelectMode",this.getCode())},t}(s),n.SelectMode.build(n.SelectMode,{NONE:{code:"none",single:!1,multiple:!1,required:!1},SINGLE:{code:"single",single:!0,multiple:!1,required:!1},MULTI:{code:"multi",multiple:!0,single:!1,required:!1},SINGLE_REQUIRED:{code:"singlerequired",single:!0,multiple:!1,required:!0},MULTI_REQUIRED:{code:"multirequired",multiple:!0,single:!1,required:!0},RANGE:{code:"range",single:!1,multiple:!1,required:!1}})},41089:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;i=r(723),n=r(8429).Z,e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.apiCode},t.prototype.getLabel=function(){return n.getLabel("TableProperties",this._value.labelKey)},t}(i),s.build(s,{VARIABLE:{apiCode:"variable",labelKey:"variable"},FIXED:{apiCode:"fixed",labelKey:"fixed"},FIT_TO_CONTAINER:{apiCode:"fittocontainer",labelKey:"fitToContainer"}})},38241:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;a=r(96486),i=r(60626),s=r(31550),o=r(35750),e.exports=n=function(){function e(e,t,r){this._collatedStyle=null!=r?r:a.defaults({},e.getWidgetStyleJson(),t.getWidgetStyleJson(),this.constructor.Property.getDefaults())}return e.prototype.getCollatedStyle=function(){return this._collatedStyle},e.prototype.getInlineStyle=function(){var e;return e={backgroundColor:this._collatedStyle.backgroundColor,borderRadius:this._collatedStyle.borderRadius},a.isEmpty(this._collatedStyle.borderEdges)||a.extend(e,i.getBorderStyles(this._collatedStyle.borderEdges,this._collatedStyle.borderColor,this._collatedStyle.borderWidth)),e},e}(),n.Property=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getDefaults=function(){return{backgroundColor:s.WHITE.getHexCode(),borderEdges:[],borderColor:s.GRAY7.getHexCode(),borderWidth:1,borderRadius:0}},t}(o),n.Property.build(n.Property,n.Property.getDefaults())},66537:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;o=r(8429).Z,i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.isEpochGrain=function(e){return n.has(e)},t.isValidDateGrain=function(e){return e.split("-").every((function(e){return t.getEnumByGrain(e)}))},t.isValidCfQueryGrain=function(e){return e.split("-").every((function(e){return t.getEnumByCfQueryGrain(e)}))},t.getEnumByGrain=function(e){return this._GRAINS_BY_GRAIN_NAME.get(e)},t.getEnumByCfQueryGrain=function(e){return this._GRAINS_BY_CF_QUERY_GRAIN.get(e)},t.hasCfQueryGrain=function(e){return null!=this.getEnumByCfQueryGrain(e)},t.getFinestGrain=function(e){return t.getEnumByGrain(e.split("-").pop())},t._registerMore=function(e){return t.__super__.constructor._registerMore.call(this,e),null==this._GRAINS_BY_GRAIN_NAME&&(this._GRAINS_BY_GRAIN_NAME=new Map),this._GRAINS_BY_GRAIN_NAME.set(e.getGrain(),e),null==this._GRAINS_BY_CF_QUERY_GRAIN&&(this._GRAINS_BY_CF_QUERY_GRAIN=new Map),this._GRAINS_BY_CF_QUERY_GRAIN.set(e.getCfQueryGrain(),e)},t.prototype.getGrain=function(){return this._value.grain},t.prototype.getSuffix=function(){return this._value.suffix},t.prototype.getCfQueryGrain=function(){var e;return null!=(e=this._value.cfQueryGrain)?e:this._value.grain},t.prototype.isFiscal=function(){return this._value.isFiscal},t.prototype.isFullField=function(){return this._value.isFullField},t.prototype.getLabel=function(){return o.getLabel("InsightsDateSelector",this._value.grain+"_discrete")},t.prototype.getCode=function(){return this._value.code},t.prototype.getAccessFunction=function(){return this._value.accessFunction},t.prototype.showInExplorer=function(){return this._value.showInExplorer},t.prototype.doesSupportGrouping=function(){return this._value.supportsGrouping},t.prototype.getMetadata=function(){return this._value.metadata},t.prototype.getFormat=function(){return this._value.format},t.prototype.doesSupportPeriodOverPeriod=function(){return void 0!==this._value.supportsPeriodOverPeriod&&this._value.supportsPeriodOverPeriod},t}(i),s.build(s,{YEAR:{code:"year",grain:"year",suffix:"_Year",isFiscal:!1,isFullField:!1,accessFunction:"year",showInExplorer:!0,supportsGrouping:!0,metadata:"yyyy",format:"yyyy"},QUARTER:{code:"quarter",grain:"quarter",suffix:"_Quarter",isFiscal:!1,isFullField:!1,accessFunction:"quarter",showInExplorer:!0,supportsGrouping:!0,metadata:"q",format:"q",supportsPeriodOverPeriod:!0},MONTH:{code:"month",grain:"month",suffix:"_Month",isFiscal:!1,isFullField:!1,accessFunction:"month",showInExplorer:!0,supportsGrouping:!0,metadata:"M",format:"MM",supportsPeriodOverPeriod:!0},WEEK:{code:"week",grain:"week",suffix:"_Week",isFiscal:!1,isFullField:!1,accessFunction:"week",showInExplorer:!0,supportsGrouping:!0,metadata:"W",format:"WW",supportsPeriodOverPeriod:!0},DAY:{code:"day",grain:"day",suffix:"_Day",isFiscal:!1,isFullField:!1,accessFunction:"day",showInExplorer:!0,supportsGrouping:!0,metadata:"d",format:"dd",supportsPeriodOverPeriod:!0},HOUR:{code:"hour",grain:"hour",suffix:"_Hour",isFiscal:!1,isFullField:!1,accessFunction:"hour",showInExplorer:!0,supportsGrouping:!0,metadata:"H",format:"HH"},MINUTE:{code:"minute",grain:"minute",suffix:"_Minute",isFiscal:!1,isFullField:!1,accessFunction:"minute",showInExplorer:!0,supportsGrouping:!0,metadata:"m",format:"mm"},SECOND:{code:"second",grain:"second",suffix:"_Second",isFiscal:!1,isFullField:!1,accessFunction:"second",showInExplorer:!0,supportsGrouping:!0,metadata:"s",format:"ss"},YEAR_FISCAL:{code:"fiscalYear",grain:"year_fiscal",suffix:"_Year_Fiscal",isFiscal:!0,isFullField:!1,accessFunction:"fiscalYear",cfQueryGrain:"fiscal_year",showInExplorer:!0,supportsGrouping:!0,metadata:"yyyy",format:"yyyy"},QUARTER_FISCAL:{code:"fiscalQuarter",grain:"quarter_fiscal",suffix:"_Quarter_Fiscal",isFiscal:!0,isFullField:!1,accessFunction:"fiscalQuarter",cfQueryGrain:"fiscal_quarter",showInExplorer:!0,supportsGrouping:!0,metadata:"q",format:"q",supportsPeriodOverPeriod:!0},MONTH_FISCAL:{code:"fiscalMonth",grain:"month_fiscal",suffix:"_Month_Fiscal",isFiscal:!0,isFullField:!1,accessFunction:"fiscalMonth",cfQueryGrain:"fiscal_month",showInExplorer:!0,supportsGrouping:!0,metadata:"M",format:"MM"},WEEK_FISCAL:{code:"fiscalWeek",grain:"week_fiscal",suffix:"_Week_Fiscal",isFiscal:!0,isFullField:!1,accessFunction:"fiscalWeek",cfQueryGrain:"fiscal_week",showInExplorer:!0,supportsGrouping:!0,metadata:"W",format:"WW"},FULLFIELD:{code:"fullField",grain:"fullField",suffix:"",isFiscal:!1,isFullField:!0,showInExplorer:!0,supportsGrouping:!0},EPOCH_DAY:{code:"epochDay",grain:"epoch_day",suffix:"_day_epoch",accessFunction:"epochDay",showInExplorer:!0,supportsGrouping:!1},EPOCH_SECOND:{code:"epochSecond",grain:"epoch_second",suffix:"_sec_epoch",accessFunction:"epochSecond",showInExplorer:!0,supportsGrouping:!1}}),n=new Set([s.EPOCH_DAY.getGrain(),s.EPOCH_SECOND.getGrain()])},84985:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;i=r(78978),n=r(8429).Z,o=r(56263).default,e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getSaqlDataType=function(){return this._value.saqlDataType},t.prototype.getMetadataColumnType=function(){return this._value.saqlDataType.getMetadataColumnType()},t.prototype.getIconName=function(){return this._value.iconName},t.prototype.getLabel=function(){return n.getLabel("FieldType",this._name.toLowerCase())},t}(i),s.build(s,{Dimension:{saqlDataType:o.STRING,iconName:"text-field"},Measure:{saqlDataType:o.NUMBER,iconName:"measure-1"},Date:{saqlDataType:o.DATE,iconName:"date"}})},98410:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;l=r(96486),s=r(56977).Z,i=r(34809),a=r(55637),r(29946),o=r(35750),e.exports=n=function(){function e(e,t){var r;this._imageUrl=t,r=l.defaults({},e,this.constructor.Property.getDefaults()),this._documentId=r.documentId,this._image=r.image,this._fit=r.fit,this._alignmentX=r.alignmentX,this._alignmentY=r.alignmentY}return e.prototype.getInlineStyle=function(){var e;return e={backgroundPosition:this._alignmentX+" "+this._alignmentY},null!=this._imageUrl&&(e.backgroundImage="url('"+this._imageUrl+"')"),Object.assign(e,s.fromCode(this._fit).style),e},e.prototype.getImageId=function(){var e,t;return null!=(e=null!=(t=this._image)?t.name:void 0)?e:this._documentId},e.prototype.getNamespace=function(){var e,t;return null!=(e=null!=(t=this._image)?t.namespace:void 0)?e:""},e}(),n.Property=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getDefaults=function(){return{documentId:void 0,image:void 0,fit:s.ORIGINAL.code,alignmentX:i.LEFT.getCode(),alignmentY:a.TOP.getCode()}},t}(o),n.Property.build(n.Property,n.Property.getDefaults())},35750:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(78978),s=r(27223),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getDefaults=function(){return s.checkImplemented()},t.prototype.getDefaultValue=function(){return this._value},t}(i)},56861:(e,t,r)=>{var i,s,n,o,a,l,u={}.hasOwnProperty;l=r(96486),i=r(723),n=r(84985),o=r(1611).Z,s=r(6965).Z,e.exports=a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.code},t.prototype.getSection=function(e){return e[this._value.code]},t.prototype.getIdentifier=function(){return this._value.identifier},t.prototype.hasLabel=function(){return this._value.hasLabel},t.prototype.hasFormat=function(){return this._value.hasFormat},t.prototype.hasShowInExplorer=function(){return this._value.hasShowInExplorer},t.prototype.hasMembers=function(){return this._value.hasMembers},t.prototype.isDerived=function(){return this._value.isDerived},t.prototype.hasConditionalFormatting=function(){return this._value.hasConditionalFormatting},t.prototype.canEditValues=function(){return this._value.canEditValues},t.prototype.createField=function(e,t){var r,i;return(r={})[this._value.identifier]=t instanceof s?t.getJson()[this._value.identifier]:e,"function"==typeof(i=this._value).addDefaultValues&&i.addDefaultValues(r,t),r},t.prototype.getField=function(e,t){var r;return(r={})[this._value.identifier]=t,l.find(e,r)},t.get=function(e){var r;switch(r=e.isDerived(),e.getType()){case n.Dimension:return r?t.DERIVED_DIMENSION:t.DIMENSION;case n.Measure:return r?t.DERIVED_MEASURE:t.MEASURE;case n.Date:return t.DATE;default:throw new Error("Unsupported field type "+e.getType().getValue()+".")}},t.getByColumnType=function(e,r){switch(null==r&&(r=!1),e){case o.MEASURE:case o.CURRENCY:case o.PERCENT:return r?t.DERIVED_MEASURE:t.MEASURE;case o.DIMENSION:case o.BOOLEAN:return r?t.DERIVED_DIMENSION:t.DIMENSION;case o.DATE:return t.DATE}},t}(i),a.build(a,{DIMENSION:{code:"dimensions",identifier:"field",hasLabel:!0,hasFormat:!1,hasShowInExplorer:!0,hasMembers:!0,isDerived:!1,hasConditionalFormatting:!0,canEditValues:!0},MEASURE:{code:"measures",identifier:"field",hasLabel:!0,hasFormat:!0,hasShowInExplorer:!0,hasMembers:!1,isDerived:!1,hasConditionalFormatting:!0,canEditValues:!1},DATE:{code:"dates",identifier:"alias",hasLabel:!0,hasFormat:!1,hasShowInExplorer:!0,hasMembers:!1,isDerived:!1,hasConditionalFormatting:!1,canEditValues:!1,addDefaultValues:function(e,t){if(null==t)throw new Error("mainXMDField is needed as an argument");return e.firstDayOfWeek=t.getFirstDayOfWeek(),e.fiscalMonthOffset=t.getFiscalMonthOffset()}},DERIVED_DIMENSION:{code:"derivedDimensions",identifier:"field",hasLabel:!0,hasFormat:!1,hasShowInExplorer:!1,hasMembers:!0,isDerived:!0,hasConditionalFormatting:!0,canEditValues:!0,addDefaultValues:function(e){return e.showInExplorer=!0}},DERIVED_MEASURE:{code:"derivedMeasures",identifier:"field",hasLabel:!0,hasFormat:!0,hasShowInExplorer:!1,hasMembers:!1,isDerived:!0,hasConditionalFormatting:!0,canEditValues:!1,addDefaultValues:function(e){return e.showInExplorer=!0}}})},82871:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(96486),s=r(8429).Z,i=r(77073),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.make=function(e){var r,i,s,n,o,a;return r=e.fieldName,s=e.referenceField,n=e.scope,i=e.property,o=e.type,a=e.values,new t({type:o.getCode(),referenceField:s,scope:n,parameters:{values:a}},o,r,i)},t.prototype.formatValue=function(e){var t,r;return null!=(t=n.find(this.getValues(),(r=this,function(t){return t.value===r._getValue(e,r.getReferenceField())})))?t.formatValue:void 0},t.prototype.getValueFormatValueMap=function(){var e,t,r,i,s;for(t={},r=0,i=(s=this.getValues()).length;r<i;r++)t[(e=s[r]).value]=e.formatValue;return t},t.prototype.getValues=function(){return this.getParameter("values")},t.prototype.getFormatValues=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getValues()).length;t<r;t++)e=i[t],s.push(e.formatValue);return s},t.prototype.getFieldValues=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getValues()).length;t<r;t++)e=i[t],s.push(e.value);return s},t.prototype.getConditionDescription=function(){var e;return function(){var t,r,i,n;for(n=[],t=0,r=(i=this.getValues()).length;t<r;t++)e=i[t],n.push(null===e.value?s.getLabel("InsightsSelector","null_dimension_value"):e.value);return n}.call(this).join(", ")},t}(i)},77073:(e,t,r)=>{var i;i=r(27223),e.exports=function(){function e(e,t,r,i){this._json=e,this._type=t,this._field=r,this._property=i,this._ruleHash=this.getField()+"_"+this.getReferenceField()+"_"+this._type.getCode()+"_"+this.getConditionDescription()}return e.prototype.getProperty=function(){return this._property},e.prototype.getParameters=function(){return this._json.parameters},e.prototype.getParameter=function(e){var t;return null!=(t=this.getParameters())?t[e]:void 0},e.prototype.getReferenceField=function(){var e;return null!=(e=this._json.referenceField)?e:this._field},e.prototype.getScope=function(){return this._json.scope},e.prototype.getField=function(){return this._field},e.prototype.getType=function(){return this._type},e.prototype.getHash=function(){return this._ruleHash},e.prototype.formatValue=function(e){return i.checkImplemented()},e.prototype.getFormatValues=function(){return[]},e.prototype.getConditionDescription=function(){return""},e.prototype.getRuleJson=function(){var e;return(e={})[this.getProperty().code]=this._json,e},e.prototype.getJson=function(){return this._json},e.prototype._getValue=function(e,t){var r,i;return void 0===(r=e[t])?null:null!=(i=null!=r?r.label:void 0)?i:r},e}()},7852:(e,t,r)=>{var i;r(96486),i=r(90554).toMap,e.exports=function(){function e(e,t,r,i,s){this._fieldName=e,this._referenceField=t,this._scope=r,this._type=i,this._rules=null!=s?s:[]}return e.prototype.getFieldName=function(){return this._fieldName},e.prototype.getReferenceField=function(){return this._referenceField},e.prototype.getScope=function(){return this._scope},e.prototype.getType=function(){return this._type},e.prototype.getRules=function(){return this._rules},e.prototype.getHash=function(){return this._rules[0].getHash()},e.prototype.getLabel=function(){return this._rules[0].getConditionDescription()},e.prototype.getRulesMap=function(){return null!=this._rulesMap?this._rulesMap:this._rulesMap=i(this._rules,(function(e){var t;return null!=(t=e.getProperty())?t.code:void 0}))},e}()},42333:(e,t,r)=>{var i,s,n,o,a,l,u,d,c={}.hasOwnProperty;s=r(723),u=r(73043),a=r(5758),l=r(59661),i=r(82871),o=r(55094),d=r(30425),e.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)c.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.make=function(e,t,r,i){return new(t.getClass())(e,t,r,i)},t.getDefaultValue=function(){},t.prototype.getCode=function(){return this._value.code},t.prototype.getClass=function(){return this._value.clazz},t}(s),n.build(n,{SINGLE:{code:"single",clazz:u},MULTI:{code:"multiple",clazz:a},RAW:{code:"raw",clazz:l},CATEGORIES:{code:"categories",clazz:i},GRADIENT:{code:"gradient",clazz:o},STATIC:{code:"static",clazz:d}})},55094:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(77073),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.make=function(e){var r,i,s,n,o,a;return i=e.fieldName,n=e.referenceField,o=e.scope,s=e.property,a=e.type,r=e.bins,new t({type:a.getCode(),referenceField:n,scope:o,parameters:{bins:r}},a,i,s)},t.prototype.formatValue=function(e){return null},t.prototype.getBins=function(){return this.getParameter("bins")},t}(i)},5758:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty;n=r(96486),s=r(8429).Z,i=r(77073),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.LOWER_LIMIT="*",t.make=function(e){var r,i,s,n,o,a;return i=e.fieldName,n=e.referenceField,o=e.scope,s=e.property,a=e.type,r=e.bins,new t({type:a.getCode(),referenceField:n,scope:o,parameters:{bins:r}},a,i,s)},t.prototype.formatValue=function(e){var t,r;return null!=(t=n.find(this.getBins().slice().reverse(),(r=this,function(t){var i;return null!==(i=r._getValue(e,r.getReferenceField()))&&r._getBinValue(t)<=i})))?t.formatValue:void 0},t.prototype.getBins=function(){return this.getParameter("bins")},t.prototype.getFormatValues=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getBins()).length;t<r;t++)e=i[t],s.push(e.formatValue);return s},t.prototype.getConditionDescription=function(){var e,r,i,n,o,a;for(e=[],i=n=0,o=(a=this.getBins()).length;n<o;i=++n)(r=a[i]).bin!==t.LOWER_LIMIT&&e.push(r.bin);return s.getLabel("ConditionalFormatting","multiConditionDescription",this.getBins().length)+" "+e.join(", ")},t.prototype._getBinValue=function(e){return e.bin===t.LOWER_LIMIT?Number.NEGATIVE_INFINITY:e.bin},t.prototype._getPreviousBinValue=function(e){return this.getBins()[e-1].bin},t}(i)},59661:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(77073),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.make=function(e){var r,i,s,n,o;return r=e.fieldName,s=e.referenceField,n=e.scope,i=e.property,new t({type:(o=e.type).getCode(),referenceField:s,scope:n,parameters:{}},o,r,i)},t.prototype.formatValue=function(e){return this._getValue(e,this.getReferenceField())},t.prototype.getConditionDescription=function(){return this.getReferenceField()},t}(i)},73043:(e,t,r)=>{var i,s,n={}.hasOwnProperty;s=r(57265).Z,i=r(77073),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.OPERATOR="operator",t.OPERAND_VALUE="operandValue",t.FORMAT_VALUE="formatValue",t.make=function(e){var r,i,s,n,o,a,l,u;return r=e.fieldName,a=e.referenceField,l=e.scope,o=e.property,u=e.type,n=e.operator,s=e.operandValue,i=e.formatValue,new t({type:u.getCode(),referenceField:a,scope:l,parameters:{operator:n,operandValue:s,formatValue:i}},u,r,o)},t.prototype.formatValue=function(e){if(null!==this._getValue(e,this.getReferenceField()))return s.fromCode(this.getOperator()).check(this._getValue(e,this.getReferenceField()),this.getOperandValue())?this.getFormatValue():void 0},t.prototype.getFormatValues=function(){return[this.getParameter(t.FORMAT_VALUE)]},t.prototype.getConditionDescription=function(){return s.fromCode(this.getOperator()).getDisplayOperator()+" "+this.getOperandValue()},t.prototype.getOperator=function(){return this.getParameter(t.OPERATOR)},t.prototype.getOperandValue=function(){return this.getParameter(t.OPERAND_VALUE)},t.prototype.getFormatValue=function(){return this.getParameter(t.FORMAT_VALUE)},t}(i)},30425:(e,t,r)=>{var i,s={}.hasOwnProperty;i=r(77073),e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.make=function(e){var r,i,s,n,o,a;return r=e.fieldName,s=e.referenceField,n=e.scope,i=e.property,o=e.type,a=e.value,new t({type:o.getCode(),referenceField:s,scope:n,parameters:{formatValue:a}},o,r,i)},t.prototype.formatValue=function(e){return null},t.prototype.getFormatValue=function(){return this.getParameter("formatValue")},t}(i)},61367:(e,t,r)=>{var i,s;s=r(96486),i=r(57361),e.exports=function(){function e(){}return e.prototype.convert=function(e){return this.convertState(e.state),e},e.prototype.convertState=function(e){return this.convertSteps(e.steps),this.convertWidgets(e.widgets),this._convertFilters(e.filters)},e.prototype.convertSteps=function(e){var t,r,i;if(!s.isEmpty(e)){for(r in i=[],e)t=e[r],i.push(this.convertStep(t));return i}},e.prototype.convertWidgets=function(e){var t,r,i;if(!s.isEmpty(e)){for(r in i=[],e)t=e[r],i.push(this.convertWidget(t));return i}},e.prototype._convertFilters=function(e){var t,r,i,n;if(!s.isEmpty(e)){for(n=[],r=0,i=e.length;r<i;r++)t=e[r],n.push(this._convertFilter(t));return n}},e.prototype.convertStep=function(e){var t,r,n,o;switch(e.type){case"static":case"staticflex":this._convertValues(e);break;case"grain":case"aggregate":case"aggregateflex":this.convertQuery(e);break;case"multi":for(r=0,n=(o=e.columns).length;r<n;r++)t=o[r],this.convertQuery(t)}if(null!=e.start&&s.isString(e.start))return e.start=i.parseJSON(e.start)},e.prototype._convertValues=function(e){var t;if(null!=e.values)return e.values=function(){var r,s,n,o;for(o=[],r=0,s=(n=e.values).length;r<s;r++)t=n[r],o.push(i.parseJSON(t));return o}()},e.prototype.convertQuery=function(e){var t;if(null!=(null!=(t=e.query)?t.query:void 0))return e.query=JSON.parse(s.unescape(e.query.query))},e.prototype.convertWidget=function(e){var t,r;if(null!=(t=null!=(r=e.parameters)?r.displayTemplate:void 0))return e.parameters.displayTemplate=i.parseJSON(t)},e.prototype._convertFilter=function(e){if(s.isString(e.value))return e.value=i.parseJSON(e.value)},e}()},22597:(e,t,r)=>{var i;i=r(96486),e.exports=function(){function e(e){this.serializeToString=null==e||e}return e.prototype.convert=function(e){var t;return delete e.dashboard,this.convertSteps(e),(null!=(t=e.gridLayouts)?t.length:void 0)?this.convertWidgetsSelectMode(e):this.convertWidgets(e)},e.prototype.convertSteps=function(e){var t,r,i,s;if(null!=e.steps){for(r in s=[],i=e.steps)t=i[r],s.push(this.convertStep(t));return s}},e.prototype.convertStep=function(e){switch(this.convertEM(e),this.convertExtra(e),this.convertStart(e),this.convertSelectMode(e),e.type){case"multi":return this.convertColumns(e);case"static":return this.convertStaticStep(e);case"grain":case"aggregate":return this.convertQuery(e)}},e.prototype.convertEM=function(e){var t,r,i;if(r=e.em,i=e.emNamespace,r)return delete e.em,delete e.emNamespace,t={name:r},null!=i&&(t.namespace=i),e.datasets=[t]},e.prototype.convertExtra=function(e){var t,r,i,s;if(s={},(i=e.extra)&&(delete e.extra,(t=i.chartOptions)&&(s.options=t),(r=i.chartType)&&(s.visualizationType=r),t||r))return e.visualizationParameters=s},e.prototype.convertStart=function(e){var t;if(t=e.start)return e.start=this.jsonObjectToString(t)},e.prototype.convertSelectMode=function(e){var t;if(t=e.selectMode)return e.selectMode=this.convertSelectModeValue(t)},e.prototype.convertColumns=function(e){var t,r,i,s;for(r=e.query.columns,delete e.query.columns,i=0,s=r.length;i<s;i++)t=r[i],this.convertQuery(t),this.convertSort(t),this.convertFormat(t);return e.columns=r,this.convertQuery(e),e.globalQuery=e.query,delete e.query},e.prototype.convertQuery=function(e){var t;return this.serializeToString?null==e.query||e.query.sources?void 0:(t=JSON.stringify(e.query),delete e.query,"{}"!==t?e.query={query:t,version:-1}:void 0):e},e.prototype.convertSort=function(e){var t;if(t=e.sort)return delete e.sort,e.sort=t.inner?t.asc?"innerascending":"innerdescending":t.asc?"ascending":"descending"},e.prototype.convertFormat=function(e){if(!e.format)return delete e.format;switch(e.format){case"percent":return e.format="percentage";case"currency_cents":return e.format="currencycents";case"currency_dollars":return e.format="currencydollars"}},e.prototype.convertStaticStep=function(e){return this.convertValues(e),this.convertDim(e)},e.prototype.convertValues=function(e){var t;if(!i.isEmpty(e.values))return e.values=function(){var r,i,s,n;for(n=[],r=0,i=(s=e.values).length;r<i;r++)t=s[r],n.push(this.jsonObjectToString(t));return n}.call(this)},e.prototype.convertDim=function(e){if(null!=e.dim)return e.dimensions=this.isString(e.dim)?[e.dim]:i.isArray(e.dim)?e.dim.slice():[],delete e.dim},e.prototype.jsonObjectToString=function(e){return this.serializeToString&&i.isObject(e)?JSON.stringify(e):e},e.prototype.convertWidgets=function(e){var t,r,i,s;if(i=e.widgets){for(r in s=[],i)t=i[r],s.push(this.convertWidget(t));return s}},e.prototype.convertWidget=function(e){return e.type=this.convertWidgetType(e.type),this.convertPosition(e),this.convertWidgetParameters(e)},e.prototype.convertWidgetType=function(e){switch(e){case"ChartWidget":return"chart";case"CompareTable":return"comparetable";case"ValuesTable":return"valuestable";case"ListSelector":return"listselector";case"DateSelector":return"dateselector";case"RangeSelector":return"rangeselector";case"NumberWidget":return"number";case"PillBox":return"pillbox";case"GlobalFiltersWidget":return"globalfilters";case"TextWidget":return"text";case"BoxWidget":return"box";case"LinkWidget":return"link";case"YoutubeWidget":return"url";case"Container":return"container";default:return e}},e.prototype.convertPosition=function(e){var t;return t=e.pos,delete e.pos,e.position=t||{x:0,y:0}},e.prototype.convertWidgetParameters=function(e){var t,r,i,s,n,o,a;return s=e.params,e.parameters=s?(delete e.params,(t=s.chartType)&&(delete s.chartType,s.visualizationType=t),i=s.imgUrl,delete s.imgUrl,i&&(s.imageUrl=i),o=s.youtubeUrl,delete s.youtubeUrl,o&&(s.url=o),(r=s.destType)&&(delete s.destType,s.destinationType=r),(n=s.selectMode)&&(delete s.selectMode,s.selectModeOverride=this.convertSelectModeValue(n)),s):null!=(a=e.parameters)?a:{}},e.prototype.isString=function(e){return"string"==typeof e},e.prototype.isObject=function(e){return"object"==typeof e},e.prototype.isArray=function(e){return e.constructor===Array},e.prototype.convertSelectModeValue=function(e){return e.replace("_","")},e.prototype.convertWidgetsSelectMode=function(e){var t,r,i,s,n;if(null!=e.widgets){for(i in n=[],s=e.widgets)(t=(r=s[i]).parameters.selectMode)?(delete r.parameters.selectMode,n.push(r.parameters.selectModeOverride=this.convertSelectModeValue(t))):n.push(void 0);return n}},e}()},38503:(e,t,r)=>{var i;i=r(96486),e.exports=function(){function e(e){this.parseSerializedJson=null==e||e}return e.prototype.convert=function(e,t){var r;return this.convertSteps(e),(null!=t?t:!(null!=(r=e.gridLayouts)?r.length:void 0))?this.convertWidgets(e):this.convertWidgetsSelectMode(e)},e.prototype.convertSteps=function(e){var t,r,i,s;if(i=e.steps){for(r in s=[],i)t=i[r],s.push(this.convertStep(t));return s}},e.prototype.convertStep=function(e){switch(this.convertEM(e),this.convertExtra(e),this.convertStart(e),this.convertSelectMode(e),e.type){case"multi":return this.convertColumns(e);case"static":return this.convertStaticStep(e);case"grain":case"aggregate":return this.convertQuery(e)}},e.prototype.convertEM=function(e){var t;if((t=e.datasets)&&(delete e.datasets,t.length>0&&(e.em=t[0].name,null!=t[0].namespace)))return e.emNamespace=t[0].namespace},e.prototype.convertExtra=function(e){var t,r,i,s;if(t={},(i=e.visualizationParameters)&&(delete e.visualizationParameters,(r=i.options)&&(t.chartOptions=r),(s=i.visualizationType)&&(t.chartType=s),r||s))return e.extra=t},e.prototype.convertStart=function(e){var t;if(this.parseSerializedJson&&(t=e.start)){try{t=JSON.parse(t)}catch(e){}return e.start=t}},e.prototype.convertSelectMode=function(e){return e.selectMode?e.selectMode=this.convertSelectModeValue(e.selectMode):delete e.selectMode},e.prototype.convertColumns=function(e){var t,r,s,n,o;for(r=e.columns,delete e.columns,s=e.globalQuery,delete e.globalQuery,e.query=null!=(null!=s?s.query:void 0)?JSON.parse(i.unescape(s.query)):null!=s?s:{},n=0,o=r.length;n<o;n++)t=r[n],this.convertQuery(t),this.convertSort(t);return e.query.columns=r},e.prototype.convertQuery=function(e){var t;if(null!=(null!=(t=e.query)?t.query:void 0))return e.query=JSON.parse(i.unescape(e.query.query))},e.prototype.convertSort=function(e){var t,r,i;if(i=e.sort)return r="innerascending"===i.trim()||"innerdescending"===i.trim(),t="innerascending"===i.trim()||"ascending"===i.trim(),e.sort={inner:r,asc:t}},e.prototype.convertStaticStep=function(e){return this.convertValues(e),this.convertDim(e)},e.prototype.convertValues=function(e){var t;if(null!=e.values)return e.values=function(){var r,i,s,n;for(n=[],r=0,i=(s=e.values).length;r<i;r++)t=s[r],n.push(this.jsonObjectFromString(t));return n}.call(this)},e.prototype.convertDim=function(e){var t;if((t=e.dimensions)&&(delete e.dimensions,t.length))return 1===t.length?e.dim=t[0]:e.dim=t},e.prototype.jsonObjectFromString=function(e){if(!this.parseSerializedJson)return e;try{return JSON.parse(e)}catch(t){return e}},e.prototype.convertWidgets=function(e){var t,r,i,s;if(i=e.widgets){for(r in s=[],i)t=i[r],s.push(this.convertWidget(t));return s}},e.prototype.convertWidget=function(e){return e.type=this.convertWidgetType(e.type),this.convertPosition(e),this.convertWidgetParameters(e)},e.prototype.convertWidgetType=function(e){switch(e){case"chart":return"ChartWidget";case"comparetable":return"CompareTable";case"valuestable":return"ValuesTable";case"listselector":return"ListSelector";case"dateselector":return"DateSelector";case"rangeselector":return"RangeSelector";case"number":return"NumberWidget";case"pillbox":return"PillBox";case"globalfilters":return"GlobalFiltersWidget";case"text":return"TextWidget";case"box":return"BoxWidget";case"link":return"LinkWidget";case"url":return"YoutubeWidget";case"container":return"Container";default:return e}},e.prototype.convertPosition=function(e){var t;if(t=e.position)return delete e.position,t.w&&!isNaN(t.w)&&(t.w=+t.w),t.h&&!isNaN(t.h)&&(t.h=+t.h),e.pos=t},e.prototype.convertWidgetParameters=function(e){var t,r,i,s,n,o;if((i=e.parameters)&&(delete e.parameters,e.params=i,(o=i.visualizationType)&&(delete i.visualizationType,i.chartType=o),(r=i.imageUrl)&&(delete i.imageUrl,i.imgUrl=r),(n=i.url)&&(delete i.url,i.youtubeUrl=n),(t=i.destinationType)&&(delete i.destinationType,i.destType=t),s=i.selectModeOverride))return delete i.selectModeOverride,i.selectMode=this.convertSelectModeValue(s)},e.prototype.convertSelectModeValue=function(e){return"multirequired"===e?"multi_required":"singlerequired"===e?"single_required":e},e.prototype.convertWidgetsSelectMode=function(e){var t,r,i,s,n;if(null!=e.widgets){for(i in n=[],s=e.widgets)(t=(r=s[i]).parameters.selectModeOverride)?(delete r.parameters.selectModeOverride,n.push(r.parameters.selectMode=this.convertSelectModeValue(t))):n.push(void 0);return n}},e}()},86166:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L,M,N,O,P,x,Z,F,k,B,W,G,U,H,V,j,q,z,$={}.hasOwnProperty,Q=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};j=r(96486),G=j.isEmpty,V=j.transform,x=j.camelCase,U=j.isObject,H=j.map,E=r(61506).Z,T=r(72236).Z,D=r(32898),Z=r(90554).deepCopy,r(57244).Z,s=r(18111),I=r(1708),N=r(19032).Z,M=r(16051).Z,L=r(89407).Z,O=r(94683).Z,l=r(40651).Z,r(29946),h=r(58881),C=r(6838).Z,(q=r(62652)).Edgemart,q.Lens,q.Folder,q.Dashboard,q.Component,S=r(98768).Z,r(57680).Z,p=r(12944).Z,r(39213).Z,o=r(1905).Z,P=r(82675).Z,a=r(67951),A=r(39213).Z,b=r(36672).Z,_=r(65334).Z,f=r(98841).Z,y=r(45044).Z,z=r(13234),W=z.getLoadReportsQuery,B=z.getLoadReportFoldersQuery,k=z.getLoadOADashboardsQuery,F=z.getLoadOADashboardFoldersQuery,w=r(9410).Z,v=r(88730).Z,d=r(51548).Z,m=r(47735).Z,c=r(96063).Z,g=r(61884).Z,u=r(26499).Z,n=r(63024).Z,i=r(52699).Z,R=r(45992).Z,e.exports=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)$.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.deleteAsset=function(e){switch(e instanceof a?e.getType():l.fromCode(e.getType())){case l.LENS:return E.get(O).deleteLens(e.getId());case l.DASHBOARD:return E.get(M).deleteDashboard(e.getId());case l.COMPONENT:return E.get(L).deleteComponent(e.getId());case l.DATASET:return E.get(N).deleteDataset(e.getId());case l.FOLDER:return E.get(p).deleteFolder(e.getId());case l.STORY:return S.deleteStory(e.getId());case l.TEMPLATE:return E.get(A).deleteTemplate(e.getId());case l.TABLEAU_DASHBOARD:return R.deleteDashboard(e.getId());default:throw Error("Unsupported asset type: "+e.getType().code)}},t.prototype.createAsset=function(e,t){var r;return null==(r=(null!=t?t:{}).includeTemplateAttributes)&&(r=!1),function(){switch(e.getType()){case l.LENS.code:return E.get(O).postLens(this._buildLensPayload(e,{includeTemplateAttributes:r}));case l.DASHBOARD.code:return E.get(M).postDashboard(this._buildDashboardPayload(e,{includeTemplateAttributes:r}));case l.COMPONENT.code:return E.get(L).postComponent(this._buildComponentPayload(e,{includeTemplateAttributes:r}));case l.DATASET.code:throw Error("Post unsupported for asset type");case l.FOLDER.code:return E.get(p).createFolder(this._buildFolderPayload(e));case l.TEMPLATE.code:return E.get(A).createTemplate(this._buildTemplatePayload(e));default:throw Error("Unsupported asset type: "+e.getType())}}.call(this).then((function(t){return e.set(e.parse(t))}))},t.prototype.updateAsset=function(e,t){var r,i,s,n;return(n=null!=t?t:{}).doNotUpgrade,s=n.usePut,i=n.shouldPatchFiles,function(){switch(e.getType()){case l.LENS.code:return r=this._buildLensPayload(e,{allowEmptyState:!0}),E.get(O).patchLens(e.getId(),r);case l.DASHBOARD.code:return r=this._buildDashboardPayload(e,{allowEmptyState:!0}),E.get(M).patchDashboard(e.getId(),r);case l.COMPONENT.code:return r=this._buildComponentPayload(e),E.get(L).patchComponent(e.getId(),r);case l.DATASET.code:return r=this._buildDatasetPayload(e),E.get(N).patchDataset(e.getId(),r);case l.TEMPLATE.code:return r=this._buildTemplatePayload(e),E.get(A).updateTemplate(e.getId(),r);case l.TABLEAU_DASHBOARD.code:return r=this._buildTableauDashboardPayload(e),R.updateDashboard(e.getId(),r);case l.FOLDER.code:return s?E.get(p).updateFolder(e.getId(),this._buildFolderPayload(e)):E.get(p).patchFolder(e.getId(),this._buildFolderPayloadForUpdate(e,i));default:throw Error("Unsupported asset type: "+e.getType())}}.call(this).then((function(t){return e.set(e.parse(t))}))},t.prototype.loadAsset=function(e,t,r,i){return null==t&&(t=!1),null==r&&(r=!1),null==i&&(i=!1),function(){switch(e.getType()){case l.LENS.code:return E.get(O).getLens(e.getId());case l.DASHBOARD.code:return E.get(M).getDashboard(e.getId(),t,r);case l.COMPONENT.code:return E.get(L).getComponent(e.getId(),t,r);case l.DATASET.code:return E.get(N).getDataset(e.getId());case l.FOLDER.code:return E.get(p).getFolder(e.getId(),{disableMru:i});default:throw Error("Unsupported asset type: "+e.getType())}}().then((function(t){return e.set(e.parse(t))}))},t.prototype.getAssetOnlyXmd=function(e){return E.get(P).getAssetXmd(e)},t.prototype._buildDatasetPayload=function(e){var t,r;return(t={}).description=e.getDescription(),t.label=e.getName(),t.folder={},t.folder.id=e.getFolderId(),t.visibility=null!=(r=e.getVisibility())?r.code:void 0,t},t.prototype._buildTemplatePayload=function(e){var t;return(t={}).folderSource={},t.folderSource.id=e.getFolderId(),t},t.prototype._buildFolderPayload=function(e){var t,r,i,s;return(t={}).description=e.getDescription(),t.label=e.getName(),t.shares=this._processShares(e.getShares()),t.isPinned=e.getIsPinned(),t.attachedFiles=e.getAttachedFiles(),(r=null!=(s=e.getIcon())?s.url:void 0)&&(t.assetIcon=r.substring(r.lastIndexOf("/")+1)),i=e.getTemplateOptions(),null!=e.getTemplateSourceId()&&null!=i&&(t.templateOptions=i),void 0!==e.getCanBeSharedExternally()&&(t.canBeSharedExternally=e.getCanBeSharedExternally()),this._addTemplateAttributes(t,e)},t.prototype._buildFolderPayloadForUpdate=function(e,t){var r,i,s;return null==t&&(t=!1),r=this._buildFolderPayload(e),"cancelledstatus"===e.getApplicationStatus()&&(r.applicationStatus=e.getApplicationStatus()),null!=(null!=(i=e.getFeaturedAssets())&&null!=(s=i.default)?s.assets:void 0)&&(r.featuredAssets=e.getFeaturedAssets(),r.featuredAssets.default.assets=H(r.featuredAssets.default.assets,(function(e){var t;return t={},null!=e.id&&(t.id=e.id),null!=e.name&&(t.name=e.name),null!=e.namespace&&(t.namespace=e.namespace),t}))),t||delete r.attachedFiles,delete r.templateSourceId,delete r.templateValues,delete r.templateOptions,delete r.name,r},t.prototype._buildLensPayload=function(e,t){var r,i,s,n,o;return null==(r=(n=null!=t?t:{}).allowEmptyState)&&(r=!1),null==(s=n.includeTemplateAttributes)&&(s=!1),(i={}).description=e.getDescription(),i.label=e.getName(),i.historyLabel=e.getHistoryLabel(),i.folder={id:e.getFolderId()},s?this._addTemplateAttributes(i,e):(i.datasets=e.getEdgemartIds().map((function(e){return{id:e}})),i.visualizationType=e.getVisualizationType(),G(e.getState())&&r||(i.state=this._buildDashboardStatePayload(e.getState())),i.xmd=e.getExtendedMetadata(),i.dateVersion=e.getDateVersion(),i.visibility=null!=(o=e.getVisibility())?o.code:void 0,i)},t.prototype._buildDashboardPayload=function(e,t){var r,i,s,n,o,a;return null==(r=(o=null!=t?t:{}).allowEmptyState)&&(r=!1),null==(n=o.includeTemplateAttributes)&&(n=!1),(s={}).description=e.getDescription(),s.label=e.getName(),s.historyLabel=e.getHistoryLabel(),s.folder={id:e.getFolderId()},n?this._addTemplateAttributes(s,e):(G(e.getState())&&r||(s.state=this._buildDashboardStatePayload(e.getState())),s.mobileDisabled=e.isMobileDisabled(),s.layoutAutoSync=e.isLayoutAutoSync(),s.xmd=e.getExtendedMetadata(),s.dateVersion=e.getDateVersion(),s.visibility=null!=(a=e.getVisibility())?a.code:void 0,(i=e.getClonedTemplateOrigin())&&(s.clonedTemplateOrigin=i),s)},t.prototype._buildComponentPayload=function(e,t){var r,i,s,n;return r=(n=null!=t?t:{}).allowEmptyState,s=n.includeTemplateAttributes,(i=this._buildDashboardPayload(e,{allowEmptyState:r,includeTemplateAttributes:s})).type="component",delete i.layoutAutoSync,i},t.prototype._buildDashboardStatePayload=function(e){var t,r,i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E;for(h in f=(t=Z(e)).widgets)if((null!=(y=(c=f[h]).parameters)?y.destination:void 0)&&!c.parameters.destinationType&&(c.parameters.destinationType="lens"),"filterpanel"===c.type&&(l=c.parameters,!G(l)&&!G(l.filters)))for(p=0,m=(b=l.filters).length;p<m;p++)a=b[p],this._cleanSingleDataset(a);for(d in C=t.steps)if(u=C[d],(o=u.datasets)&&(delete u.datasets,u.datasets=function(){var e,t,r;for(r=[],e=0,t=o.length;e<t;e++)n=o[e],r.push({name:n.name,namespace:n.namespace});return r}()),"staticflex"===u.type&&(s=u.columns,!G(s)))for(i in s)"aggregate"!==(r=s[i]).type&&"grouping"!==r.type||this._cleanSingleDataset(r);if(null!=t.filters)for(g=0,_=(E=t.filters).length;g<_;g++)a=E[g],this._cleanSingleDataset(a);return t},t.prototype._buildTableauDashboardPayload=function(e){var t,r;return(t={}).description=e.getDescription(),t.label=e.getName(),t.folder={id:e.getFolderId()},t.visibility=null!=(r=e.getVisibility())?r.code:void 0,t},t.prototype._addTemplateAttributes=function(e,t){var r;return null==(r=t.getTemplateSourceId())?e:Object.assign({},e,{name:t.getName(),templateSourceId:r,templateValues:t.getTemplateValues()})},t.prototype._cleanSingleDataset=function(e){var t;null!=(t=e.dataset)&&(delete e.dataset,e.dataset={name:t.name,namespace:null!=t.namespace?t.namespace:void 0})},t.prototype._processShares=function(e){var t,r,i,s,n;if(e)for(r=[],s=0,n=e.length;s<n;s++)t={sharedWithId:(i=e[s]).sharedWithId,accessType:i.accessType,shareType:i.shareType},r.push(t);return r},t.prototype.loadReports=function(e){var t,r,i,s,n,o;return e.name,t=e.folderId,e.page,i=e.pageSize,r=e.order,n=e.scope,s=W({folderId:t,pageSize:i,order:r,scope:n}),E.get(T).getRecordsData(s).then((o=this,function(e){return o._massageSoqlApiResponse(e),e.reports=e.records,o._buildCollectionResponse(l.REPORT.code,e)}))},t.prototype.loadLightningDashboards=function(e){var t,r,i,s,n,o;return e.name,t=e.folderId,e.page,i=e.pageSize,r=e.order,n=e.scope,s=k({folderId:t,pageSize:i,order:r,scope:n}),E.get(T).getRecordsData(s).then((o=this,function(e){return o._massageSoqlApiResponse(e),e.lightningDashboards=e.records,o._buildCollectionResponse(l.LIGHTNING_DASHBOARD.code,e)}))},t.prototype.loadLightningDashboardFolders=function(e){var t,r,i,s,n,o;return e.name,t=e.folderId,e.page,i=e.pageSize,r=e.order,n=e.scope,s=F({folderId:t,pageSize:i,order:r,scope:n}),E.get(T).getRecordsData(s).then((o=this,function(e){return o._massageSoqlApiResponse(e),e.lightningDashboardFolders=e.records,o._buildCollectionResponse(l.LIGHTNING_DASHBOARD_FOLDER.code,e)}))},t.prototype.loadLightningReportFolders=function(e){var t,r,i,s,n,o;return e.name,t=e.folderId,e.page,i=e.pageSize,r=e.order,n=e.scope,s=B({folderId:t,pageSize:i,order:r,scope:n}),E.get(T).getRecordsData(s).then((o=this,function(e){return o._massageSoqlApiResponse(e),e.lightningReportFolders=e.records,o._buildCollectionResponse(l.LIGHTNING_REPORT_FOLDER.code,e)}))},t.prototype.loadLenses=function(e){var t,r,i,s,n,o,a;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,E.get(O).getLenses({search:r,folderId:t,page:s,pageSize:n,sort:i,scope:o}).then((a=this,function(e){return a._buildCollectionResponse(l.LENS.code,e)}))},t.prototype.loadDashboards=function(e){var t,r,i,s,n,o,a;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,E.get(M).getDashboards({search:r,folderId:t,page:s,pageSize:n,sort:i,scope:o}).then((a=this,function(e){return a._buildCollectionResponse(l.DASHBOARD.code,e)}))},t.prototype.loadTableauDashboards=function(e){var t,r,i,s,n,o,a;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,R.getDashboards({search:r,folderId:t,page:s,pageSize:n,sort:i,scope:o}).then((a=this,function(e){return a._buildCollectionResponse(l.TABLEAU_DASHBOARD.code,e)}))},t.prototype.loadComponents=function(e){var t,r,i,s,n,o,a;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,E.get(L).getComponents({search:r,folderId:t,page:s,pageSize:n,sort:i,scope:o}).then((a=this,function(e){return a._buildCollectionResponse(l.COMPONENT.code,e)}))},t.prototype.loadFolders=function(e){var t,r,i,s,n,o,a,u;return r=e.name,s=e.page,n=e.pageSize,i=e.order,a=e.templateSourceId,t=e.isPinned,o=e.scope,E.get(p).getFolders({search:r,page:s,pageSize:n,sort:i,templateSourceId:a,isPinned:t,scope:o}).then((u=this,function(e){return u._buildCollectionResponse(l.FOLDER.code,e)}))},t.prototype.loadEdgemarts=function(e){var t,r,i,s,n,o,a;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,E.get(N).getDatasets({search:r,folderId:t,page:s,pageSize:n,sort:i,scope:o}).then((a=this,function(e){return a._buildCollectionResponse(l.DATASET.code,e)}))},t.prototype.loadStories=function(e){var t,r,n,o,a,u,d,c;return r=e.name,t=e.folderId,o=e.page,a=e.pageSize,n=e.order,u=e.scope,d=[i.ANALYTICS_DATASET],E.get(s).isStoriesDirectEnabled()&&d.push(i.LIVE_DATASET),S.getStories({search:r,folderId:t,page:o,pageSize:a,sort:n,scope:u,sourceTypes:d}).then((c=this,function(e){return c._buildCollectionResponse(l.STORY.code,e.getRawJson())}))},t.prototype.loadManageableTemplates=function(e){var t;return e.name,e.folderId?Promise.resolve([]):E.get(A).getManageableTemplates().then((t=this,function(e){return t._buildCollectionResponse(l.TEMPLATE.code,e)}))},t.prototype._massageSoqlApiResponse=function(e){var t;return t=[],e.records.forEach((function(e){var r;return(r=V(e,(function(e,t,r){return"object"==typeof t&&(t=V(t,(function(e,t,r){return e[x(r)]=t}))),e[x(r)]=t}))).label=r.name,r.folder=r.folder||r.owner,t.push(r)})),e.records=t,e.nextPageUrl=e.nextRecordsUrl},t.prototype._buildCollectionResponse=function(e,t){var r,i,s,o,a,h,p,E;for(U(t)||(t=JSON.parse(t)),s=function(){switch(e){case l.FOLDER.code:return"folders";case l.LENS.code:return"lenses";case l.DASHBOARD.code:case l.COMPONENT.code:return"dashboards";case l.TABLEAU_DASHBOARD.code:return"tableauDashboards";case l.DATASET.code:return"datasets";case l.STORY.code:return"stories";case l.TEMPLATE.code:return"templates";case l.REPORT.code:return"reports";case l.LIGHTNING_DASHBOARD.code:return"lightningDashboards";case l.LIGHTNING_DASHBOARD_FOLDER.code:return"lightningDashboardFolders";case l.LIGHTNING_REPORT_FOLDER.code:return"lightningReportFolders";default:throw Error("Unsupported type"+e)}}(),i=[],a=0,h=(p=t[s]).length;a<h;a++)switch(r=p[a],e){case l.FOLDER.code:i.push(new g(r));break;case l.LENS.code:i.push(new m(r));break;case l.DASHBOARD.code:i.push(new d(r));break;case l.COMPONENT.code:i.push(new u(r));break;case l.DATASET.code:i.push(new c(r));break;case l.STORY.code:i.push(new v(r));break;case l.TEMPLATE.code:i.push(new n(r));break;case l.REPORT.code:i.push(new b(r));break;case l.LIGHTNING_DASHBOARD.code:i.push(new _(r));break;case l.LIGHTNING_DASHBOARD_FOLDER.code:i.push(new f(r));break;case l.LIGHTNING_REPORT_FOLDER.code:i.push(new y(r));break;case l.TABLEAU_DASHBOARD.code:i.push(new w(r));break;default:throw Error("Unsupported asset type: "+e)}return o=t.totalSize||i.length,E=this,new C(i,o,(function(){var r;switch(r=null!=t.nextPageUrl?D.getQueryParams(t.nextPageUrl).get("page"):void 0,e){case l.LENS.code:return E.loadLenses({page:r});case l.DASHBOARD.code:return E.loadDashboards({page:r});case l.COMPONENT.code:return E.loadComponents({page:r});case l.DATASET.code:return E.loadEdgemarts({page:r});case l.FOLDER.code:return E.loadFolders({page:r});case l.STORY.code:return E.loadStories({page:r})}}))},t.prototype.loadDependenciesForAsset=function(e){var t,r,i;if(r=e.type,t=e.id,r===l.FOLDER.code)return E.get(o).getDependencies(t).then((i=this,function(e){return U(e)||(e=JSON.parse(e)),Array.isArray(e.result)&&(e=e.result[0]),i._massageDependencyTree(e)}));throw new Error("Not implemented for type "+r)},t.prototype._getAssetTypeByDependencyType=function(e){switch(e){case"lenses":return l.LENS.code;case"dashboards":return l.DASHBOARD.code;case"edgemarts":return l.DATASET.code;case"workflows":return l.WORKFLOW.code}},t.prototype._massageDependencyTree=function(e){var t,r,i,s;if(t=["lenses","dashboards","workflows","edgemarts"],i={},U(e))for(r in e)s=e[r],Q.call(t,r)>=0?i[this._getAssetTypeByDependencyType(r)]=this._massageDependencies(s):i[r]=s;return i.type=function(){switch(i.type){case"dashboard":return l.DASHBOARD.code;case"lens":return l.LENS.code;case"edgemart":return l.DATASET.code;case"folder":return l.FOLDER.code;case"workflow":return l.WORKFLOW.code}}(),new h(i)},t.prototype._massageDependencies=function(e){var t,r,i,s,n;if(t={},e){for(t.totalCount=e.totalSize,t.dependentAssets=[],i=0,s=(n=e.dependencies).length;i<s;i++)r=n[i],t.dependentAssets.push(this._massageDependencyTree(r));return t}return null},t}(I)},23296:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D=function(e,t){return function(){return e.apply(t,arguments)}};w=r(96486),C=r(32350),f=r(8429).Z,T=r(61506).Z,s=r(18111),i=r(2057).Z,r(16045).Z,E=r(75380).Z,A=r(62652),m=A.Folder,l=A.Dashboard,v=A.TableauDashboard,a=A.Component,h=A.Edgemart,y=A.Lens,b=A.LoadState,n=r(40651).Z,o=r(86166),d=r(38503),u=r(22597),r(29946),p=r(13962),R=r(82675).Z,r(81697).ZP,I=r(88730).Z,g=r(75550).Z,_=r(61884).Z,r(57680).Z,S=r(6838).Z,c=function(){function e(){this.createAsset=D(this.createAsset,this),this.updateAsset=D(this.updateAsset,this),this.deleteAsset=D(this.deleteAsset,this)}return e.prototype.reset=function(){var e;return null!=(e=this.storageMgr)?e.reset():void 0},e.prototype.repoChanged=function(e){return C.trigger("repo:changed",null!=e?e.id:void 0),e&&e.getType()===n.FOLDER.code&&C.trigger("folderChange",e),E.refresh()},e.prototype.deprecatedGetEdgemartByAlias=function(e){return this._ensureRepoLoaded(),this.loadEdgemarts({}).then((function(t){return w.find(t.results,(function(t){return t.getAlias()===e}))}))},e.prototype.getAppUserFolder=function(){return this._ensureRepoLoaded(),this._appUserFolder},e.prototype.getAssetById=function(e,t,r){var i,s;if(null==r&&(r=b.NONE),this._ensureRepoLoaded(),t===(null!=(s=this._appUserFolder)?s.getId():void 0))return this._appUserFolder;switch(i={id:t},e){case n.LENS.code:return new y(i,r);case n.DASHBOARD.code:return new l(i,r);case n.COMPONENT.code:return new a(i,r);case n.DATASET.code:return new h(i,r);case n.FOLDER.code:return new m(i,r);case n.STORY.code:return new I(i);case n.TABLEAU_DASHBOARD.code:return new v(i,r)}},e.prototype.loadAsset=function(e,t,r,s,o,a){var l,u,d;return null==s&&(s=!1),null==o&&(o=!1),null==a&&(a=!1),this._ensureRepoLoaded(),new RegExp("^[a-zA-Z0-9_-]+$").test(e.getId())?e.getId()===(null!=(u=this._appUserFolder)?u.getId():void 0)?Promise.resolve(this._appUserFolder):(l=e.getLastModifiedDate(),this.storageMgr.loadAsset(e,s,o,a).then((d=this,function(){var i;return r||d._runPrivateApiConversion(e,t),l!==e.getLastModifiedDate()&&((i={})[e.getId()]=e.getLastModifiedDate(),C.trigger("propagate-asset-timestamps",i)),e.loadState=b.DEEP,e}),(function(t){var r;switch(t.errorCode){case"201":r=f.getLabel("InsightsEdgemartNotFoundDialog","invalidEdgemartTitle");break;case"216":case"212":case"227":case"260":case"NOT_FOUND":e.getType()===n.DASHBOARD.code?r=f.getLabel("InsightsErrorDialog","dashboardNotFound"):e.getType()===n.LENS.code?r=f.getLabel("InsightsErrorDialog","lensNotFound"):e.getType()===n.FOLDER.code?r=f.getLabel("InsightsErrorDialog","folderNotFound"):e.getType()===n.TABLEAU_DASHBOARD.code&&(r=f.getLabel("InsightsErrorDialog","tableauDashboardNotFound")),r=e.getType()===n.COMPONENT.code?f.getLabel("InsightsErrorDialog","componentNotFound"):f.getLabel("InsightsErrorDialog","itemNotFound")}if(r)throw t.shard(r);throw t}))):Promise.reject(new i(f.getLabel("InsightsErrorDialog","invalidAssetId"),"216",404))},e.prototype.loadXMetadata=function(e,t){return null==t&&(t=g.MAIN),this._ensureRepoLoaded(),T.get(R).getXmd(e.getId(),e.getVersionId(),t)},e.prototype.deleteAsset=function(e){var t;return this._ensureRepoLoaded(),console.log((new Date).toLocaleTimeString()+"|esObjectRepository:: deleting asset "+e.getId()+" ("+e.getName()+")"),this.storageMgr.deleteAsset(e).then((t=this,function(){return t.repoChanged(e)}))},e.prototype.updateAsset=function(e,t){var r,i,s,n,o,a;return null==(i=(o=null!=t?t:{}).doNotUpgrade)&&(i=!1),null==(n=o.usePut)&&(n=!1),null==(s=o.shouldPatchFiles)&&(s=!1),this._ensureRepoLoaded(),console.log((new Date).toLocaleTimeString()+"|esObjectRepository:: updating asset "+e.getId()+" ("+e.getName()+")"),r=e.clone(),i||this._runPublicApiConversion(r),this.storageMgr.updateAsset(r,{usePut:n,shouldPatchFiles:s}).then((a=this,function(){return e.set(r.attributes,{silent:!1}),a.repoChanged(e)}))},e.prototype.createAsset=function(e,t){var r,i,s,n;return null==(r=(s=null!=t?t:{}).doNotUpgrade)&&(r=!1),null==(i=s.includeTemplateAttributes)&&(i=!1),this._ensureRepoLoaded(),delete e.attributes.id,console.log((new Date).toLocaleTimeString()+"|esObjectRepository:: creating asset "+e.getId()+" ("+e.getName()+")"),r||this._runPublicApiConversion(e),this.storageMgr.createAsset(e,{includeTemplateAttributes:i}).then((n=this,function(){return e.loadState=b.DEEP,n.repoChanged(e)}))},e.prototype._runPrivateApiConversion=function(e,t){if(e.getType()===n.DASHBOARD.code)return(new d).convert(e.getState(),t)},e.prototype._runPublicApiConversion=function(e){if(e.getType()===n.DASHBOARD.code)return(new u).convert(e.getState())},e.prototype.loadList=function(e){var t,r,i,s,o,a,l,u,d;switch(t=e.assetType,o=e.name,i=e.folderId,l=e.page,u=e.pageSize,a=e.order,s=e.isPinned,r=e.excludePrivateApp,d=e.scope,t){case n.LENS.code:return this.loadLenses({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.DASHBOARD.code:return this.loadDashboards({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.TABLEAU_DASHBOARD.code:return this.loadTableauDashboards({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.COMPONENT.code:return this.loadComponents({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.DATASET.code:return this.loadEdgemarts({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.FOLDER.code:return this.loadFolders({name:o,page:l,pageSize:u,order:a,isPinned:s,excludePrivateApp:r,scope:d});case n.STORY.code:return this.loadStories({name:o,folderId:i,pageSize:u,order:a,scope:d});case n.TEMPLATE.code:return this.loadManageableTemplates({name:o,folderId:i});case n.REPORT.code:return this.loadReports({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.LIGHTNING_DASHBOARD.code:return this.loadLightningDashboards({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.LIGHTNING_DASHBOARD_FOLDER.code:return this.loadLightningDashboardFolders({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.LIGHTNING_REPORT_FOLDER.code:return this.loadLightningReportFolders({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});case n.TABLEAU_WORKBOOK.code:return this.loadTableauWorkbooks({name:o,folderId:i,page:l,pageSize:u,order:a,scope:d});default:throw new Error("Unsupported asset type: "+t)}},e.prototype.loadReports=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadReports({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadLightningDashboards=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadLightningDashboards({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadLightningDashboardFolders=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadLightningDashboardFolders({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadLightningReportFolders=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadLightningReportFolders({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadLenses=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadLenses({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadDashboards=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadDashboards({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadTableauDashboards=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadTableauDashboards({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadTableauWorkbooks=function(e){return e.name,e.folderId,e.page,e.pageSize,e.order,e.scope,Promise.resolve(S.finite([]))},e.prototype.loadComponents=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadComponents({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadFolders=function(e){var t,r,i,s,n,o,a,l,u,d;return s=e.name,o=e.page,a=e.pageSize,n=e.order,u=e.templateSourceId,i=e.isPinned,r=e.excludePrivateApp,l=e.scope,this._ensureRepoLoaded(),t=this.storageMgr.loadFolders({name:s,page:o,pageSize:a,order:n,templateSourceId:u,isPinned:i,scope:l}),!r&&p.matchesSearchWords(this._appUserFolder,p.nameToSearchWords(s))?t.then((d=this,function(e){return null!=d._appUserFolder&&(e.results.splice(0,0,new _(d._appUserFolder.attributes)),e.totalCount++),e})):t},e.prototype.loadEdgemarts=function(e){var t,r,i,s,n,o;return r=e.name,t=e.folderId,s=e.page,n=e.pageSize,i=e.order,o=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadEdgemarts({name:r,folderId:t,page:s,pageSize:n,order:i,scope:o})},e.prototype.loadStories=function(e){var t,r,i,s,n;return r=e.name,t=e.folderId,s=e.pageSize,i=e.order,n=e.scope,this._ensureRepoLoaded(),this.storageMgr.loadStories({name:r,folderId:t,pageSize:s,order:i,scope:n})},e.prototype.loadManageableTemplates=function(e){var t,r;return r=e.name,t=e.folderId,this._ensureRepoLoaded(),this.storageMgr.loadManageableTemplates({name:r,folderId:t})},e.prototype.loadDependenciesForAsset=function(e){var t,r;return r=e.type,t=e.id,this._ensureRepoLoaded(),this.storageMgr.loadDependenciesForAsset({type:r,id:t})},e.prototype._ensureRepoLoaded=function(){var e;return null==this.storageMgr&&(this.storageMgr=new o),e=T.get(s).getAppUser(),null!=this._appUserFolder?this._appUserFolder:this._appUserFolder=new m({id:e.getId(),label:f.getLabel("InsightsHomePage","userApplicationName"),description:f.getLabel("InsightsHomePage","userApplicationDescription"),createdBy:null,createdDate:0,lastAccessedDate:2147483647,permissions:{view:!0,modify:!0,manage:!1},attachedFiles:[]})},e}(),e.exports=new c},13962:(e,t,r)=>{var i,s,n,o,a,l,u;o=r(52115),l=r(61506).Z,i=r(18111),n=r(40651).Z,a=r(6838).Z,s=r(51560).Z,e.exports=u={filterResultSet:function(e,t,r,s,n,d,c,h,p){var g,m,_,f,y,b,C,E,S,T,I;for(b=s?s*n:0,_=[],C=this.nameToSearchWords(t),S=0,T=e.length;S<T;S++)if(m=e[S],(!c||("function"==typeof m.get?m.get("templateSourceId"):void 0)===c)&&(!r||m.getFolderId()===r)&&this.matchesSearchWords(m,C)&&(null==h||m.getIsPinned()===h)){if(g=l.get(i).getAppUser(),null!=p)if("createdByMe"===p){if(m.getCreatedById()!==g.getId())continue}else if("sharedWithMe"===p&&(m.getCreatedById()===g.getId()||!1===(null!=(I=m.getPermissions())?I.view:void 0)))continue;_.push(m)}return b||(b=0),E=(_=this._sortAssets(_,d)).length,n&&(_=_.slice(b,b+n)),y=this.filterResultSet.bind(this,e,t,r,s+1,n,d),(f=new o).resolve(new a(u.mapCmsModeltoMetadata(_),E,y)),f},mapJsontoMetadata:function(e){var t,r,i,n;for(r=[],i=0,n=e.length;i<n;i++)t=e[i],r.push((new s).fromJson(t));return r},mapCmsModeltoMetadata:function(e){var t,r,i,n;for(r=[],i=0,n=e.length;i<n;i++)t=e[i],r.push((new s).fromJson(t.attributes));return r},sortByLatestUpdate:function(e,t){var r,i;return e.getCreatedDate(),t.getCreatedDate(),r=e.getLastModifiedDate(e)||e.getCreatedDate(),i=t.getLastModifiedDate(t)||t.getCreatedDate(),0===r&&0===i?e.getLabel().localeCompare(t.getLabel()):r>i?-1:1},sortByMRU:function(e,t){var r,i;return r=u.getLastAccessedDate(e),i=u.getLastAccessedDate(t),0===r&&0===i?e.getLabel().localeCompare(t.getLabel()):r>i?-1:1},sortByName:function(e,t){return e.getLabel().localeCompare(t.getLabel())},getLastAccessedDate:function(e){var t;return t=0,t=null!=e.type?e.type===n.TEMPLATE.getCode()?e.lastModifiedDate:e.lastAccessedDate:e.getType()===n.STORY?e.getLastModifiedDate().toISOString():e.getType()===n.REPORT||e.getType()===n.LIGHTNING_DASHBOARD||e.getType()===n.LIGHTNING_DASHBOARD_FOLDER||e.getType()===n.LIGHTNING_REPORT_FOLDER?e.getLastRunDate():e.getLastAccessedDate(),new Date(t||0)},_sortAssets:function(e,t){return"name"===t?e.sort(this.sortByName):e.sort(this.sortByMRU),e},nameToSearchWords:function(e){var t,r;return t=[],e&&(t=e.split(" ")),t=function(){var e,i,s;for(s=[],e=0,i=t.length;e<i;e++)r=t[e],s.push(r.toLowerCase());return s}()},matchesSearchWords:function(e,t){var r,i,s,n,o;if(t.length>0){if(r=[],e.getLabel()&&r.push(e.getLabel()),e.get("description")&&r.push(e.get("description")),0===r.length)return!1;for(i=r.join(" ").toLowerCase(),n=0,o=t.length;n<o;n++)if(s=t[n],-1===i.indexOf(s))return!1}return!0}}},62652:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I,v,R,w,A,D,L,M,N,O,P,x,Z,F,k,B,W,G,U,H,V={}.hasOwnProperty,j=function(e,t){for(var r in t)V.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},q=function(e,t){return function(){return e.apply(t,arguments)}};H=r(96486),a=r(43305).Z,o=r(76219).Z,U=r(90554).deepCopy,f=r(78978),S=r(8429).Z,C=r(21966).Z,r(83993).Oz,g=r(97108).Z,n=r(40651).Z,G=r(29946),r(79587).Z,E=r(52067),x=r(55430),Z=r(60873).Z,s=r(67951),i=/\/services\/data\/v[\d]+.0\/wave\/(dashboards|lenses|folders|datasets|tableaudashboards|tableauworkbooks)\/[\w]+/,v=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.build(t,["NONE","SHALLOW","DEEP"]),t}(f),u=function(e){function t(e,r,i){this.isUserPrivateAsset=q(this.isUserPrivateAsset,this),this.url=q(this.url,this),this.loadState=r||this.getDefaultLoadState(),t.__super__.constructor.call(this,e,{parse:!0})}return j(t,e),t.prototype.dateFields=["createdDate","lastModifiedDate","refreshDate","lastAccessedDate"],t.prototype.idAttribute="id",t.prototype.url=function(){var e;return e=this.isNew()?"":"/json",t.__super__.url.apply(this,arguments)+e},t.prototype.getReference=function(){return G.core.cmsMode?this.isLoaded()?this.getId()+"/"+this.getVersionId():"":this.getUrl()},t.prototype.getDefaultLoadState=function(){return v.SHALLOW},t.prototype.isLoaded=function(){return this.loadState!==v.NONE},t.prototype.isNew=function(){var e;return!!this.isStep()||(!(!(e=this.getId())||!E.isNew(e))||null==e)},t.prototype.isStep=function(){var e;return!!(e=this.getId())&&H.includes(e.toString(),":")},t.prototype.getHash=function(){return this.getType()+this.getId()},t.prototype.getUrl=function(){var e;return(e=this.get("url"))||(e=this.url()),e},t.prototype.getId=function(){var e;return(e=this.get("id"))&&"new"!==e?""+e:(e=C.consumeUniqueId("new"),this.setId(e,{silent:!0}),e)},t.prototype.setId=function(e,t){return this.set("id",e,t)},t.prototype.getName=function(){return this.get("label")},t.prototype.setName=function(e){return this.set("label",e)},t.prototype.isMobileDisabled=function(){return this.get("mobileDisabled")},t.prototype.getDateVersion=function(){return this.get("dateVersion")},t.prototype.setDateVersion=function(e){return this.set("dateVersion",e)},t.prototype.getDescription=function(){return this.get("description")},t.prototype.setDescription=function(e){return this.set("description",e)},t.prototype.getHistoryLabel=function(){return this.get("historyLabel")},t.prototype.setHistoryLabel=function(e){return this.set("historyLabel",e)},t.prototype.getAlias=function(){return this.get("name")},t.prototype.setAlias=function(e){return this.set("name",e)},t.prototype.getType=function(){return this.get("type")},t.prototype.getFolder=function(){var e;if(null!=(e=this.get("folder")))return new y(e)},t.prototype.getFolderId=function(){var e;return null!=(e=this.get("folder"))?e.id:void 0},t.prototype.setFolder=function(e,t){var r;return(r=this.get("folder"))?(r.id=e,r.label=t):this.set("folder",{id:e,label:t})},t.prototype.getCreatedById=function(){var e;return null!=(e=this.get("createdBy"))?e.id:void 0},t.prototype.getCreatedByName=function(){var e;return null!=(e=this.get("createdBy"))?e.name:void 0},t.prototype.getCreatedByPhotoUrl=function(){return x.getProfilePhotoUrl(this.get("createdBy"))},t.prototype.getCreatedDate=function(){return this.get("createdDate")},t.prototype.isAllowPreview=function(){return this.get("allowPreview")},t.prototype.getFiles=function(){var e;return(e=this.get("files"))||(e=[]),e},t.prototype.setFiles=function(e,t){return this.set("files",e,t)},t.prototype.getRefreshDate=function(){var e;return(e=this.get("refreshDate"))||(e=0),e},t.prototype.setRefreshDate=function(e){return this.set("refreshDate",e)},t.prototype.getLastAccessedDate=function(){return this.get("lastAccessedDate")},t.prototype.getLastModifiedName=function(){var e;return null!=(e=this.get("lastModifiedBy"))?e.name:void 0},t.prototype.getLastModifiedDate=function(){var e;return(e=this.get("lastModifiedDate"))||(e=0),e},t.prototype.isUserPrivateAsset=function(){return!!this.getFolderId()&&0===this.getFolderId().indexOf("005")},t.prototype.getPermissions=function(){return this.get("permissions")},t.prototype.setPermissions=function(e){return this.set("permissions",e)},t.prototype.getAssetSharingUrl=function(){return this.get("assetSharingUrl")},t.prototype.getNamespace=function(){return this.get("namespace")},t.prototype.getLabel=function(){return this.get("label")},t.prototype.setState=function(e){return this._json.state=e},t.prototype.getVisibility=function(){return this.get("visibility")?Z.fromCode(this.get("visibility")):Z.ALL},t.prototype.setVisibility=function(e){return this.set("visibility",e.code)},t.prototype.getTemplateSourceId=function(){return this.get("templateSourceId")},t.prototype.getTemplateAssetSourceName=function(){return this.get("templateAssetSourceName")},t.prototype.getClonedTemplateOrigin=function(){return this.get("clonedTemplateOrigin")},t.prototype.setClonedTemplateOrigin=function(e){return this.set("clonedTemplateOrigin",e)},t.prototype.getTemplateValues=function(){return this.get("templateValues")},t.prototype.parse=function(e){var t,r,i,n;if(e instanceof s&&(e=e.getJson()),this._transformDateFields(e),e.files)for(r=0,i=(n=e.files).length;r<i;r++)t=n[r],this._transformDateFields(t);return e},t.prototype._transformDateFields=function(e){var t,r,i,s,n;for(n=[],r=0,i=(s=this.dateFields).length;r<i;r++)e[t=s[r]]&&!H.isNumber(e[t])?n.push(e[t]=new Date(e[t]).valueOf()):n.push(void 0);return n},t}(a),T=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults={type:"lens",visibility:Z.ALL.code,state:{}},t.prototype.getDatasets=function(){return this.get("datasets")},t.prototype.getDatasetReference=function(e){return this.get("datasets").find((function(t){return t.id===e}))},t.prototype.getEdgemartIds=function(){return null!=this.get("datasets")?this.get("datasets").map((function(e){return e.id})):[]},t.prototype.getSObjectName=function(){var e,t;return null!=(e=this.getState().steps)&&null!=(t=e.aggregateflex)?t.sobject:void 0},t.prototype.getConnectionName=function(){var e,t;return null!=(e=this.getState().steps)&&null!=(t=e.aggregateflex)?t.connectionName:void 0},t.prototype.getCDPObjects=function(){var e,t;return null!=(e=this.getState().steps)&&null!=(t=e.aggregateflex)?t.cdpObjects:void 0},t.prototype.getDataspace=function(){var e,t;return null!=(e=this.getState().steps)&&null!=(t=e.aggregateflex)?t.dataspace:void 0},t.prototype.getStepType=function(){var e,t;if(1!==(e=Object.values(null!=(t=this.getState().steps)?t:{})).length)throw new Error("Expected a single step.");return e[0].type},t.prototype.getIconUrl=function(){return x.getResultThumbUrl(n.LENS.code,this.getVisualizationType())},t.prototype.getVisualizationType=function(){return this.get("visualizationType")},t.prototype.setVisualizationType=function(e){return this.set("visualizationType",e)},t.prototype.getState=function(){return this.get("state")},t.prototype.getDateVersion=function(){return this.get("dateVersion")},t.prototype.setDateVersion=function(e){return this.set("dateVersion",e)},t.prototype.getRuntimeUrl=function(e){return e.getAssetSharingUrl()+"&applicationId="+this.getFolderId()},t.prototype.getExtendedMetadata=function(){return this.get("xmd")},t.prototype.setExtendedMetadata=function(e){return this.set("xmd",e)},t.prototype.setDatasets=function(e){return this.set("datasets",e.map((function(e){return{id:e.getId(),name:e.getAlias(),label:e.getLabel(),url:e.getUrl(),namespace:null!=e.getNamespace()?e.getNamespace():void 0}})))},t}(u),m=function(e){function t(){return this.url=q(this.url,this),t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults={type:"dataset",visibility:Z.ALL.code},t.prototype.url=function(){var e;return e=this.isNew()?"":"?current=true",t.__super__.url.apply(this,arguments)+e},t.prototype.getDefaultLoadState=function(){return v.DEEP},t.prototype.getVersionUrl=function(){return this.get("currentVersionUrl")},t.prototype.getVersionId=function(){return this.get("currentVersionId")},t.prototype.getRefreshDate=function(){var e;return this.get("datasetType")===g.LIVE.code?0:(0,e=this.get("dataRefreshDate")?this.get("dataRefreshDate"):this.get("lastModifiedDate")?this.get("lastModifiedDate"):this.getCreatedDate()?this.getCreatedDate():void 0,new Date(e).getTime())},t.prototype.getIconUrl=function(){return x.getResultThumbUrl(n.DATASET.code)},t.prototype.getDisplayLabel=function(){return this.get("datasetType")===g.LIVE.code?S.getLabel("DatasetType","liveDisplayLabel"):this.get("datasetType")===g.STAGED.code?S.getLabel("DatasetType","stagedDisplayLabel"):S.getLabel("DatasetType","standardDisplayLabel")},t}(u),h=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults=function(){return{type:"dashboard",label:S.getLabel("Assets","newDashboard"),mobileDisabled:!1,layoutAutoSync:"true",visibility:Z.ALL.code,dateVersion:1,state:{},datasets:[],folder:{}}},t.prototype.getEdgemartIds=function(){var e,t,r,i,s;if(t=[],null!=this.get("datasets"))for(r=0,i=(s=this.get("datasets")).length;r<i;r++)(e=s[r]).id&&t.push(e.id);return t},t.prototype.getIconUrl=function(){return x.getResultThumbUrl(n.DASHBOARD.code)},t.prototype.getState=function(){return this.get("state")},t.prototype.getRuntimeUrl=function(e){return e.getAssetSharingUrl()+"&applicationId="+this.getFolderId()},t.prototype.deepClone=function(){var e;return(e=this.clone()).clear(),e.loadState=this.loadState,e.set(U(this.attributes)),e},t.prototype.getDatasets=function(){return this.get("datasets")},t.prototype.getDatasetReference=function(e){return this.get("datasets").find((function(t){return t.id===e}))},t.prototype.getExtendedMetadata=function(){return this.get("xmd")},t.prototype.setExtendedMetadata=function(e){return this.set("xmd",e)},t.prototype.isLayoutAutoSync=function(){return this.get("layoutAutoSync")},t}(u),d=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults=function(){return{type:"component",label:S.getLabel("Assets","newComponent"),mobileDisabled:!1,dateVersion:1,state:{},datasets:[]}},t.prototype.getType=function(){return"component"},t}(h),L=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults=function(){return{type:n.TABLEAU_DASHBOARD.code,label:S.getLabel("Assets","newTableauDashboard"),mobileDisabled:!1,visibility:Z.ALL.code}},t}(u),N=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults=function(){return{type:n.TABLEAU_WORKBOOK.code,label:S.getLabel("Assets","newTableauWorkbook"),mobileDisabled:!1,visibility:Z.ALL.code}},t}(u),B=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults={type:"xmetadata"},t.prototype.getDefaultLoadState=function(){return v.DEEP},t}(u),O=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults={type:"template"},t.prototype.getFolderId=function(){return this.get("folderId")},t.prototype.setFolderId=function(e){return this.set("folderId",e)},t}(u),y=function(e){function t(){return this.isUserPrivateAsset=q(this.isUserPrivateAsset,this),t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults={type:"folder"},t.prototype.isUserPrivateAsset=function(){return 0===this.getId().indexOf("005")},t.prototype.getRefreshDate=function(){return 0},t.prototype.getFolderId=function(){return this.getId()},t.prototype.getDefaultLoadState=function(){return v.SHALLOW},t.prototype.getIconUrl=function(){return x.getAssetIconUrl(this,n.FOLDER.code)},t.prototype.setIcon=function(e){return this.set("icon",e)},t.prototype.getIcon=function(){return this.get("icon")},t.prototype.getApplicationStatus=function(){return this.get("applicationStatus")},t.prototype.setApplicationStatus=function(e){return this.set("applicationStatus",e)},t.prototype.getRuntimeUrl=function(e){return e.getAssetSharingUrl()+"&applicationId="+this.getFolderId()},t.prototype.getShares=function(){return this.get("shares")},t.prototype.setShares=function(e){return this.set("shares",e)},t.prototype.getCanBeSharedExternally=function(){return this.get("canBeSharedExternally")},t.prototype.setCanBeSharedExternally=function(e){return this.set("canBeSharedExternally",e)},t.prototype.getIsPinned=function(){return this.get("isPinned")},t.prototype.setIsPinned=function(e){return this.set("isPinned",e)},t.prototype.getFeaturedAssets=function(){return this.get("featuredAssets")},t.prototype.setFeaturedAssets=function(e){return this.set("featuredAssets",e)},t.prototype.getAppLog=function(){return this.get("appLog")},t.prototype.getAttachedFiles=function(){return this.get("attachedFiles")},t.prototype.setAttachedFiles=function(e){return this.set("attachedFiles",e)},t.prototype.getTemplateOptions=function(){return this.get("templateOptions")},t.prototype.setTemplateValues=function(e){return this.set("templateValues",e)},t.prototype.setTemplateSourceId=function(e){return this.set("templateSourceId",e)},t.prototype.getTemplateVersion=function(){return this.get("templateVersion")},t.prototype.setTemplateVersion=function(e){return this.set("templateVersion",e)},t.prototype._getAssetTypeFromAPIUrl=function(e){var t;switch(null!=(t=i.exec(e))?t[1]:void 0){case"dashboards":return n.DASHBOARD.code;case"lenses":return n.LENS.code;case"folders":return n.FOLDER.code;case"datasets":return n.DATASET.code;case"tableaudashboards":return n.TABLEAU_DASHBOARD.code;case"tableauworkbooks":return n.TABLEAU_WORKBOOK.code;default:return null}},t}(u),F=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults={_type:"workflow"},t.prototype.getWorkflowDefinition=function(){return this.get("workflowDefinition")},t.prototype.getEdgemartDevNames=function(){var e,t,r,i,s;if(t=[],e=this.getWorkflowDefinition())for(r in e)(i=e[r]).action&&"sfdcRegister"===i.action&&t.push(null!=(s=i.parameters)?s.alias:void 0);return t},t.prototype.getMasterLabel=function(){return this.get("MasterLabel")},t.prototype.getName=function(){return this.getMasterLabel()},t.prototype.getType=function(){return this.get("_type")},t}(u),R=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults={_type:"recipe"},t.prototype.getType=function(){return this.get("_type")},t}(u),D=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.defaults={type:"story"},t.prototype.getType=function(){return this.get("type")},t}(u),I=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=T,t}(l=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t}(o)),w=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=R,t}(l),_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=m,t}(l),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=h,t}(l),M=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=L,t}(l),c=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=d,t}(l),W=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=B,t}(l),b=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=y,t}(l),k=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=F,t}(l),P=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=O,t}(l),A=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return j(t,e),t.prototype.model=D,t}(l),e.exports={Folders:b,XMetadatas:W,Dashboards:p,TableauDashboards:M,TableauDashboard:L,TableauWorkbook:N,Components:c,Edgemarts:_,Lenses:I,LoadState:v,Workflows:k,TemplateInputs:P,Recipes:w,Stories:A,CMSModel:u,Folder:y,XMetadata:B,Dashboard:h,Component:d,Edgemart:m,Lens:T,LoadState:v,Workflow:F,Recipe:R,TemplateInput:O,Story:D}},1708:(e,t,r)=>{var i,s,n;i=r(2057).Z,s=r(32350),n=r(29946),e.exports=function(){function e(){var e,t;this.simulateErrors=(e=this.simulateErrors,t=this,function(){return e.apply(t,arguments)})}return e.prototype.simulateErrors=function(e){var t;return n.core.test.simulate401Unauthorized?this._internalSimulateError(401,"100","Simulated error: Server request timed out."):n.core.test.simulate404NotFound?this._internalSimulateError(404,"212","Simulated error: The requested resource was not found on the server. Please hit OK and try again."):(e&&(t=e()),t&&"function"==typeof t.promise?t:Promise.resolve(t))},e.prototype._internalSimulateError=function(e,t,r){return new Promise((function(s,n){return setTimeout((function(){return n(new i(r,t,e))}),500)}))},e.prototype.reset=function(){return s.trigger("repo:reset")},e}()},12860:(e,t,r)=>{var i,s,n,o,a,l,u,d={}.hasOwnProperty,c=function(e,t){for(var r in t)d.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};u=r(96486),i=r(723),o=r(27223),a=r(8429).Z,l=r(76681),n=r(78286),l.parser.yy.parseError=function(e){throw new Error(e)},e.exports=s=function(){function e(e,t){var r,i,s,n,o;if(this._type=e,this._values=t,this._values.length>1&&!this._type.allowsMultipleValues())throw new Error(a.getLabel("DashboardLayoutSelectorValidation","multipleValues",this._type.getCode()));for(r={},s=0,n=(o=this._values).length;s<n;s++){if(r[i=o[s].toString()])throw new Error(a.getLabel("DashboardLayoutSelectorValidation","duplicateValues",this._type.getCode(),i));r[i]=!0}}return e.parse=function(t){var r,i,s,n,o,u,d;for(s={},d=[],o=0,u=t.length;o<u;o++){if(i=t[o],r=l.parser.parse(i),n=e.Type.getEnumByCode(r.selectorType),s[r.selectorType])throw new Error(a.getLabel("DashboardLayoutSelectorValidation","duplicateSelectors",r.selectorType));s[r.selectorType]=!0,d.push(n.makeSelector(r.values))}return d},e.prototype.getType=function(){return this._type},e.prototype.getValue=function(){if(this._type.allowsMultipleValues())throw new Error("Attempting to get single value for multi-value selector.");return this._values[0].getValueForMatching()},e.prototype.getSerializedValues=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this._values).length;t<r;t++)e=i[t],s.push(e.toString());return s},e.prototype.matches=function(e){return u.some(this._values,(t=this,function(r){return t._type.matches(r.getValueForMatching(),e)}));var t},e.prototype.toString=function(){return this._type.getCode()+"("+this.getSerializedValues().join(", ")+")"},e}(),s.Value=function(){function e(e){this._value=e}return e.prototype.getValueForMatching=function(){return this._value},e.prototype.toString=function(){return o.checkImplemented()},e}(),s.IntegerValue=function(e){function t(e){var r;if(r=Number(e),!Number.isInteger(r))throw new Error("Selector value '"+e+"' is not an integer.");t.__super__.constructor.call(this,r)}return c(t,e),t.prototype.toString=function(){return this._value.toString()},t}(s.Value),s.EnumValue=function(e){function t(e,r){if(!r.hasCode(e))throw new Error("Selector value '"+e+"' is not valid.");t.__super__.constructor.call(this,r.getEnumByCode(e))}return c(t,e),t.prototype.toString=function(){return this._value.getCode()},t}(s.Value),s.OrientationValue=function(e){function t(e){t.__super__.constructor.call(this,e,n.Orientation)}return c(t,e),t}(s.EnumValue),s.PlatformValue=function(e){function t(e){t.__super__.constructor.call(this,e,n.Platform)}return c(t,e),t}(s.EnumValue),s.Type=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return c(t,e),t.prototype.makeSelector=function(e){var t,r;return t=this.getValueType(),u.isArray(e)||(e=[e]),new s(this,function(){var i,s,n;for(n=[],i=0,s=e.length;i<s;i++)r=e[i],n.push(new t(r));return n}())},t.prototype.getCode=function(){return this._value.code},t.prototype.getValueType=function(){return this._value.valueType},t.prototype.allowsMultipleValues=function(){var e;return null!=(e=this._value.multipleValuesAllowed)&&e},t.prototype.matches=function(e,t){return this._value.matches(e,t)},t}(i),s.Type.build(s.Type,{MIN_WIDTH:{code:"minWidth",valueType:s.IntegerValue,matches:function(e,t){return t.getWidth()>=e}},MAX_WIDTH:{code:"maxWidth",valueType:s.IntegerValue,matches:function(e,t){return t.getWidth()<=e}},ORIENTATION:{code:"orientation",valueType:s.OrientationValue,matches:function(e,t){return t.getOrientation()===e}},PLATFORM:{code:"platform",valueType:s.PlatformValue,multipleValuesAllowed:!0,matches:function(e,t){return t.getPlatform()===e}}})},78286:(e,t,r)=>{var i,s,n,o={}.hasOwnProperty,a=function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};i=r(723),n=r(8429).Z,r(29655),e.exports=s=function(){function e(t,r,i,s,n){this._width=t,this._height=r,this._platform=i,this._formFactor=s,this._deviceDensity=null!=n?n:1,this._orientation=this._width>this._height?e.Orientation.LANDSCAPE:this._width<this._height?e.Orientation.PORTRAIT:void 0}return e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.getOrientation=function(){return this._orientation},e.prototype.getPlatform=function(){return this._platform},e.prototype.getFormFactor=function(){return this._formFactor},e.prototype.getDeviceDensity=function(){return this._deviceDensity},e}(),s.Orientation=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.getCode=function(){return this._value},t.prototype.getLabel=function(){return n.getLabel("DeviceOrientation",this.getCode())},t}(i),s.Orientation.build(s.Orientation,{PORTRAIT:"portrait",LANDSCAPE:"landscape"}),s.Platform=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return a(t,e),t.prototype.getCode=function(){return this._value},t.prototype.getLabel=function(){return n.getLabel("DevicePlatform",this.getCode())},t}(i),s.Platform.build(s.Platform,{IOS:"iOS",ANDROID:"Android"})},3005:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C,E,S,T,I=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};T=r(96486),E=r(61506).Z,p=r(7931),S=r(90554).deepCopy,y=r(83784),r(67883),r(49842),f=r(64933),_=r(11715),n=r(14201).ZP,o=y.CHART,d=y.GROUPINGACROSS,c=y.GROUPINGDOWN,g=y.MEASURES,a=y.CSF,y.CDF,c=y.GROUPINGDOWN,b=y.SHOWDETAILS,h=y.HIGHLIGHT,l=y.DETAILCOLUMNS,C=y.SORTBY,i=y.BLOCKS,m=y.PRESENTATION_OPTIONS,u=y.FILTER,s=y.BOOLEANFILTER,e.exports={_setEmptyMeasures:function(e,t){return T.isEmpty(e)?this._addRowCounts([],t):e},_addRowCounts:function(e,t){var r,s,n,o,a;if(t&&(s=this._getQuery(t,i.getValue()))){if(!T.isEmpty(s))for(n=f.get(),o=0,a=s.length;o<a;o++)r=s[o],e.push(n.getBlockRowCountName(r.blockId));return e}return e.push(f.ROW_COUNT),e},_getOldChartIfMeasureRemoved:function(e,t,r){var i,s,n;if(i=e.getQuery()[o.getValue()],!T.isEmpty(i)&&!T.isEmpty(i.summaries)&&(s=S(i),r.get().updateChartSummaries(i,e.getQuery()[g.getValue()])))return n=t.getWidget(o.getValue()),"reportChartStep"===e.getId()&&r.get().setWidgetParams(i,n.getJson().parameters),s},_getOldChartIfGroupingRemoved:function(e,t,r,i){var s,n,a,l,u,h,p;return l=e.getQuery()[c.getValue()],a=e.getQuery()[d.getValue()],s=l.concat(a),n=e.getQuery()[o.getValue()],u=T.intersection(null!=n?n.groupings:void 0,t),T.isEmpty(n)||u.length<=0?this._getOldChartIfMeasureRemoved(e,r,i):(h=JSON.parse(JSON.stringify(e.getQuery()[o.getValue()])),T.isEmpty(s)||T.isEmpty(n)?e.getQuery()[o.getValue()]={}:(p=r.getWidget(o.getValue()).getJson().parameters,i.get().updateChartGroupings(n,s),this._getOldChartIfMeasureRemoved(e,r,i),"reportChartStep"===e.getId()&&i.get().setWidgetParams(n,p),e.getQuery()[o.getValue()]=n),h)},_restoreChart:function(e,t,r,i){var s;if(null!=r)return e.getQuery()[o.getValue()]=r,s=t.getWidget(o.getValue()).getJson().parameters,"reportChartStep"===e.getId()?i.get().setWidgetParams(r,s):void 0},_handleChartNoData:function(e,t,r,i){return T.isEmpty(t)?(this._chartFromGroupingChange=JSON.parse(JSON.stringify(e.getQuery()[o.getValue()])),e.getQuery()[o.getValue()]={}):null!=this._chartFromGroupingChange?this._restoreChart(e,r,this._chartFromGroupingChange,i):void 0},_cleanseFormulas:function(e,t,r){var s,n,o,l,u,h,p,m,_,y,b,C,E,v,R,w,A,D;if(null==r&&(r=!1),l=e.getQuery()[a.getValue()],!T.isEmpty(l)){if(b=f.get(),y=S(l),h=!!this._getQuery(e,i.getValue()),m=T.isEmpty(e.getQuery()[c.getValue()]))if(h)for(T.remove(e.getQuery()[g.getValue()],(function(e){return b.isCsf(e)})),C=0,E=(v=Object.keys(l)).length;C<E;C++)p=v[C],b.getBlockPrefix(p)&&delete l[p];else this._deleteAllFormulas(e);if(!m||h)for(p in n=T.map(e.getQuery()[c.getValue()],"name"),s=T.map(e.getQuery()[d.getValue()],"name"),_=(u=t&&(R=t.name,I.call(n,R)>=0||(w=t.name,I.call(s,w)>=0)))?t.name:t,l)o=l[p],r&&(u||this._oldCdfMetadata)&&b.isCsfReferencingColumn(o,_)?this._deleteFormula(e,p):null!=o.acrossGroup&&(A=o.acrossGroup,I.call(s,A)<0)||null!=o.downGroup&&(D=o.downGroup,I.call(n,D)<0)?b.isCsfValidAtAllLevels(o)?this._convertFormulaToAllLevels(e,p):this._deleteFormula(e,p):T.isEmpty(s)&&(l[p].acrossGroupType="all");return y}},_deleteFormula:function(e,t){return T.pull(e.getQuery()[g.getValue()],t),delete e.getQuery()[a.getValue()][t]},_deleteAllFormulas:function(e){return e.getQuery()[a.getValue()]={},T.remove(e.getQuery()[g.getValue()],(function(e){return f.get().isCsf(e)}))},_convertFormulaToAllLevels:function(e,t){var r;return(r=e.getQuery()[a.getValue()][t]).acrossGroup=null,r.acrossGroupType="all",r.downGroup=null,r.downGroupType="all"},_replaceOldFormulas:function(e){var t,r,s,n,o,l,u;for(e.getQuery()[a.getValue()]=this._oldFormulas,s=e.getQuery()[g.getValue()],r=!!this._getQuery(e,i.getValue()),u=[],n=0,o=(l=f.get().getFormulaColumnNames(this._oldFormulas,r)).length;n<o;n++)t=l[n],-1===s.indexOf(t)?u.push(s.push(t)):u.push(void 0);return u},_handleDeleteGroupingCarryOverMetadata:function(e,t,r){var i,s,n,o,a,u,d,c;if(!T.isEmpty(this._detailColumnIndices))for(i=this._getQuery(e,l.getValue()),o=0,u=(c=T.sortBy(Object.keys(this._detailColumnIndices))).length;o<u;o++)s=c[o],i.splice(s,0,this._detailColumnIndices[s]);if(null!=this._groupingAcrossIndex&&-1!==this._groupingAcrossIndex)for(a=0,d=t.length;a<d;a++)n=t[a],this._getQuery(e,this._getOtherGroupingName()).splice(this._groupingAcrossIndex,0,n);if(null!=this._measureColumns)return e.getQuery()[g.getValue()]=this._measureColumns},_handleDeleteGroupingsAfterMeasureUpdate:function(e,t,r,i){var s,n;return n=function(){var e,r,i;for(i=[],e=0,r=t.length;e<r;e++)s=t[e],i.push(s.name);return i}(),this._updateChartObjectOnDeleteGrouping(e,n,r,i),this._updateShowDetails(e),this._restoreSortBy(e),this._removeGroupingHighlight(e)},_restoreSortBy:function(e){if(null!=this._sortBy)return e.getQuery()[C.getValue()]=this._sortBy},_removeGroupingHighlight:function(e){return null!=this._highlight?e.getQuery()[h.getValue()]=this._highlight:null!=e.getQuery()[h.getValue()]?(null==this._newHighlight&&(this._newHighlight=e.getQuery()[h.getValue()]),e.getQuery()[h.getValue()]=T.isEmpty(e.getQuery()[d.getValue()])?void 0:{groupingDownValues:[],groupingAcrossValues:[]}):void 0},_updateShowDetails:function(e){if(!0!==this._getQuery(e,b.getValue())&&T.isEmpty(this._getQuery(e,c.getValue())))return this._oldShowDetails=!1,e.getQuery()[b.getValue()]=!0},_getQuery:function(e,t){return null==t&&(t=this._type.getQuery(this._groupIndex)),e.getQuery()[t]},_updateChartObjectOnDeleteGrouping:function(e,t,r,i){var s;return s=this._getOldChartIfGroupingRemoved(e,t,r,i),null!=this._chartFromGroupingChange?this._chartFromGroupingChange:this._chartFromGroupingChange=s},_handleDeleteDetailColumnAfterMeasureUpdate:function(e,t,r){return T.isEmpty(this._groupingsDown)||(e.getQuery()[c.getValue()]=this._groupingsDown),T.isEmpty(this._groupingsAcross)||(e.getQuery()[d.getValue()]=this._groupingsAcross),null!=this._showDetails&&(e.getQuery()[b.getValue()]=this._showDetails),null!=this._highlight?e.getQuery()[h.getValue()]=this._highlight:T.isEmpty(e.getQuery()[l.getValue()])&&(this._newHighlight=this._getNewHighlightVal(e.getQuery()[h.getValue()]),e.getQuery()[h.getValue()]=void 0),this._replaceSortBy(e,t)},_handleCreateGroupingAfterMeasureUpdate:function(e,t,r){return null!=this._showDetails&&(e.getQuery()[b.getValue()]=this._showDetails),null!=this._chartFromGroupingChange?this._restoreChart(e,t,this._chartFromGroupingChange,r):this._chartFromMeasureChange=this._getOldChartIfMeasureRemoved(e,t,r),this._updateSortByIfIsGrouping(e,this._newGrouping),this._removeGroupingHighlight(e)},_handleCreateDetailColumnAfterMeasureUpdate:function(e,t){return T.isEmpty(this._groupingsDown)||(e.getQuery()[c.getValue()]=this._groupingsDown),this._updateShowDetails(e),null!=this._highlight&&(e.getQuery()[h.getValue()]=this._highlight),this._restoreSortBy(e)},_generateNewBucketDevName:function(e){return this._getRandomBucketName(e.getQuery().buckets)},_getRandomBucketName:function(e){var t,r;return r=Math.random(),r*=99999999,t="BucketField_"+(r=Math.floor(r)),T.find(e||[],{developerName:t})?this._getRandomBucketName(e):t},_replaceOldFormatting:function(e){return e.getQuery()[m.getValue()].formattingRules=S(this._oldConditionalFormatting)},_cleanseFormatting:function(e){var t,r,i;return null==(null!=(i=e.getQuery()[m.getValue()])?i.formattingRules:void 0)?null:(r=S(e.getQuery()[m.getValue()].formattingRules),0===e.getQuery()[c.getValue()].length?(e.getQuery()[m.getValue()].formattingRules=[],r):(0===e.getQuery()[d.getValue()].length&&(t=T.findIndex(r,(function(e){return"RowCount"===e.column})))>-1&&e.getQuery()[m.getValue()].formattingRules.splice(t,1),this._cleanseFormattingAggregates(e),r))},_cleanseFormattingAggregates:function(e){var t,r,i,s,n,o,a,l;if(null==(null!=(o=e.getQuery()[m.getValue()])?o.formattingRules:void 0))return null;for(s=S(e.getQuery()[m.getValue()].formattingRules),i=[],r=e.getQuery()[g.getValue()],t=n=0,a=s.length;0<=a?n<a:n>a;t=0<=a?++n:--n)l=s[t].column,I.call(r,l)>=0&&i.push(s[t]);return e.getQuery()[m.getValue()].formattingRules=i,s},_replaceOldFilters:function(e){var t,r;return e.getQuery()[u.getValue()]=S(this._oldFilters),e.getQuery()[s.getValue()]=this._oldFilterBooleanLogic,t=new n(this._oldFilterBooleanLogic),null!=(r=E.get(p))?r.setBooleanFilter(t):void 0},_cleanseFilters:function(e,t){var r,i,o,a,l,d,h,g,m,f,y,b,I;if(d=e.getQuery()[u.getValue()],y=e.getQuery()[C.getValue()],h=0===e.getJson().query[c.getValue()].length,f=S(d),m=e.getQuery()[s.getValue()],t){for(g=t.developerName||t,m&&(r=new n(m)),o=i=T.filter(d,(function(e){return e.type===_.CUSTOM.getName()})).length,o=i,l=b=d.length-1;b>=0;l=b+=-1)switch(a=d[l],_.getEnumByName(a.type)){case _.CUSTOM:g===a.filter.column&&(r&&r.getLogic()&&r.delete(o,i),d.splice(l,1),i--),o--;break;case _.ROWLIMIT:T.isEmpty(y)&&d.splice(l,1)}r&&(e.getQuery()[s.getValue()]=r.getLogic()),null!=(I=E.get(p))&&I.setBooleanFilter(r)}return h||T.remove(d,(function(e){return e.type===_.ROWLIMIT.getName()})),{oldFilters:f,oldFilterBooleanLogic:m}},_hasRowLimit:function(e){return-1!==T.findIndex(e,(function(e){return e.type===_.ROWLIMIT.getName()}))},_hasRowLimitFilter:function(e){var t,r,i;return t=e.getQuery()[u.getValue()],!T.isEmpty(t)&&(r=this._hasRowLimit(t),i=this._hasRowLimit(this._oldFilters),r||i)}}},71964:(e,t,r)=>{var i,s;i=r(88912),s=r(64933),e.exports=function(){function e(e,t,r){var i,s,n;for(this._blockJson=e,this._blockIndex=t,this._myCsfs=[],s=0,n=r.length;s<n;s++)0===(i=r[s]).indexOf(this.getBlockId())&&this._myCsfs.push(i)}return e.prototype.getBlockId=function(){return this._blockJson.blockId},e.prototype.getBlockIndex=function(){return this._blockIndex},e.prototype.getDetailColumns=function(e){var t,r,i,n,o;for(o=[],r=0,i=(n=this._blockJson.detailColumns).length;r<i;r++)t=n[r],o.push((e?this._blockJson.blockId+s.BLOCK_ID_SEPARATOR:"")+t);return o},e.prototype.getHasRecordCount=function(){return this._blockJson.hasRecordCount},e.prototype.getFilters=function(e){return null!=this._filters?this._filters:this._filters=i.get().getReportFilters(this._blockJson,e)},e.prototype.getCrossFilters=function(){return[]},e.prototype.getCustomFilters=function(){return this._blockJson.reportFilters},e.prototype.getStandardDateFilter=function(){return this._blockJson.standardDateFilter},e.prototype.getStandardFilters=function(){return this._blockJson.standardFilters},e.prototype.getReportBooleanFilter=function(){return this._blockJson.reportBooleanFilter},e.prototype.getChartFilters=function(){return[]},e.prototype.getLinkedFilters=function(){return[]},e.prototype.getReportType=function(){return this._blockJson.reportType.type},e.prototype.getReportTypeLabel=function(){return this._blockJson.reportType.label},e.prototype.getReportTypeObject=function(){return this._blockJson.reportType},e.prototype.getSortBy=function(){return this._blockJson.sortBy},e.prototype.getScope=function(){return this._blockJson.scope},e.prototype.getDivision=function(){return this._blockJson.division},e.prototype.getName=function(){return this._blockJson.name},e.prototype.getCsfColumns=function(){return this._myCsfs},e.prototype.isCsfLimitReached=function(){return this.getCsfColumns().length>=10},e}()},58526:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.code},t.prototype.shouldPreserveBucketsOnSwitch=function(){return!0===this._value.shouldPreserveBuckets},t}(i),s.build(s,{NUMBER:{code:"number",shouldPreserveBuckets:!0},TEXT:{code:"text"},PICKLIST:{code:"picklist"},NONE:{code:"none"}})},71805:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;i=r(723),o=r(1611).Z,s=r(58526),e.exports=n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.getDefaultValue=function(){return this.STRING},t.prototype.getCode=function(){return this._value.code},t.prototype.getMetadataColumnType=function(){return this._value.metadataColumnType},t.prototype.getBucketColumnType=function(){return this._value.bucketColumnType},t.prototype.supportsDateGranularity=function(){var e;return"date"===(e=this._value.code)||"datetime"===e},t}(i),n.build(n,{STRING:{code:"string",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},BOOLEAN:{code:"boolean",metadataColumnType:o.BOOLEAN,bucketColumnType:s.NONE},DOUBLE:{code:"double",metadataColumnType:o.MEASURE,bucketColumnType:s.NUMBER},INTEGER:{code:"int",metadataColumnType:o.MEASURE,bucketColumnType:s.NUMBER},PERCENT:{code:"percent",metadataColumnType:o.PERCENT,bucketColumnType:s.NUMBER},CURRENCY:{code:"currency",metadataColumnType:o.CURRENCY,bucketColumnType:s.NUMBER},DATE:{code:"date",metadataColumnType:o.DATE,bucketColumnType:s.NONE},DATETIME:{code:"datetime",metadataColumnType:o.DIMENSION,bucketColumnType:s.NONE},TIME:{code:"time",metadataColumnType:o.DIMENSION,bucketColumnType:s.NONE},PICKLIST:{code:"picklist",metadataColumnType:o.DIMENSION,bucketColumnType:s.PICKLIST},MULTIPICKLIST:{code:"multipicklist",metadataColumnType:o.DIMENSION,bucketColumnType:s.PICKLIST},ID:{code:"id",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},REFERENCE:{code:"reference",metadataColumnType:o.DIMENSION,bucketColumnType:s.PICKLIST},TEXTAREA:{code:"textarea",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},PHONE:{code:"phone",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},URL:{code:"url",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},EMAIL:{code:"email",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},ENCRYPTEDSTRING:{code:"encryptedstring",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},HTML:{code:"html",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},ADDRESS:{code:"address",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},DATACATEGORYGROUPREFERENCE:{code:"datacategorygroupreference",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT},LOCATION:{code:"location",metadataColumnType:o.DIMENSION,bucketColumnType:s.TEXT}})},77591:e=>{e.exports=function(){function e(e){this._reportExtendedMetadata=e}return e.prototype.getMeasureColumnInfos=function(){return this._reportExtendedMetadata.aggregateColumnInfo},e.prototype.getDetailColumnInfos=function(){return this._reportExtendedMetadata.detailColumnInfo},e.prototype.getGroupingColumnInfos=function(){return this._reportExtendedMetadata.groupingColumnInfo},e.prototype.getMeasureName=function(e){var t,r;return(null!=(t=this.getMeasureColumnInfos()[e])?t.fullLabel:void 0)||(null!=(r=this.getMeasureColumnInfos()[e])?r.label:void 0)},e.prototype.getMeasureLabel=function(e){var t;return null!=(t=this.getMeasureColumnInfos()[e])?t.label:void 0},e.prototype.getColumnName=function(e){var t;return null!=(t=this.getDetailColumnInfos()[e])?t.label:void 0},e.prototype.getAggregateColumnInfo=function(e){return this.getMeasureColumnInfos()[e]},e.prototype.getGroupingColumnInfo=function(e){return this.getGroupingColumnInfos()[e]},e.prototype.getColumnInfo=function(e){return this.getDetailColumnInfos()[e]},e.prototype.getGroupingName=function(e){var t;return null!=(t=this.getGroupingColumnInfos()[e])?t.label:void 0},e.prototype.getGroupingDataType=function(e){var t;return null!=(t=this.getGroupingColumnInfos()[e])?t.dataType:void 0},e}()},67883:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value},t.prototype.isSortable=function(){return"MATRIX"!==this._value},t}(i),s.build(s,{TABULAR:"TABULAR",SUMMARY:"SUMMARY",MATRIX:"MATRIX",MULTI_BLOCK:"MULTI_BLOCK"})},52402:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),r(8429).Z,e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.code},t.prototype.getName=function(){return this._value.name},t.prototype.getValueFromMetadataByIndex=function(e,t){return e[this._value.metadataGetMethod]()[t]},t.prototype.isDraggable=function(){return this._value.isDraggable},t.prototype.isDroppable=function(){return this._value.isDroppable},t}(i),s.build(s,{TABLE:{code:"table",name:"Table",isDraggable:!0,isDroppable:!0},GROUPING_DOWN:{code:"groupingDown",name:"GroupingDown",isDraggable:!0,isDroppable:!0,metadataGetMethod:"getGroupingDownColumnNames"},GROUING_ACROSS:{code:"groupingAcross",name:"GroupingAcross",isDraggable:!0,isDroppable:!0,metadataGetMethod:"getGroupingAcrossColumnNames"},DETAIL:{code:"detail",name:"Detail",isDraggable:!0,isDroppable:!0,metadataGetMethod:"getDetailColumns"},CSF:{code:"csf",name:"CSF",isDraggable:!1,isDroppable:!1,metadataGetMethod:"getCustomSummaryFormula"},ALL_FIELDS:{code:"allfields",name:"AllFields",isDraggable:!0,isDroppable:!1},FILTERS:{code:"filters",name:"Filters",isDraggable:!1,isDroppable:!0}})},49842:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b,C=function(e,t){return function(){return e.apply(t,arguments)}},E=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};b=r(96486),o=r(11822).Z,n=r(67746).Z,l=r(85808).Z,u=r(71964),g=r(67883),c=r(77591),_=r(34533).Z,h=r(88912),d=r(71805),m=r(64933),a=r(90249).ZP,f=r(90249).Ix,i=r(40651).Z,p=r(11715),s="~CROSS~BLOCK~",y=["string","textarea","html"],e.exports=function(){function e(e,t){var r,i,s;this._json=e,this._dynamicFilterManager=null!=t?t:new n,this.isCustomDetailFormulaNameUnique=C(this.isCustomDetailFormulaNameUnique,this),this.isCustomSummaryFormulaNameUnique=C(this.isCustomSummaryFormulaNameUnique,this),this._reportMetadata=this._json.reportMetadata,this._reportExtendedMetadata=new c(this._json.reportExtendedMetadata,void 0,this.isMultiBlock()),this._historicalMetadata=a.getHistoricalTrackingMetadata(this._json),this._reportTypeMetadata=new _(this._json.reportTypeMetadata,this.getBuckets(),this.isMultiBlock()&&null!=(r=this._reportMetadata.reportType)?r.type:void 0,this._historicalMetadata,this.getCustomDetailFormula(),null!=(i=this.getReportTypeObject())?i.type:void 0,null!=(s=this.getReportTypeObject())?s.label:void 0),this._parsingUtil=m.get()}return e.prototype.getId=function(){return this._reportMetadata.id},e.prototype.getReportMetadata=function(){return this._reportMetadata},e.prototype.getReportExtendedMetadata=function(){return this._reportExtendedMetadata},e.prototype.getReportTypeMetadata=function(){return this._reportTypeMetadata},e.prototype.getHistoricalMetadata=function(){return this._historicalMetadata},e.prototype.getReportTypeMetadataForBlockId=function(e){var t;if(t=this.getBlockById(e))return this.getReportTypeMetadata().getInnerReportTypeMetadataByReportType()[t.getReportType()]},e.prototype.getPrincipalReportTypeMetadata=function(){var e;return(e=this.getReportTypeMetadata()).getInnerReportTypeMetadataByReportType()[e.getPrincipalReportType()]},e.prototype.getReportFormat=function(){return this._reportMetadata.reportFormat},e.prototype.getAggregates=function(){return this._reportMetadata.aggregates},e.prototype.getMeasureColumns=function(){return this.getAggregates()},e.prototype.getGroupingDownColumns=function(){return this._reportMetadata.groupingsDown},e.prototype.isGroupingDownColumn=function(e){return-1!==this.getGroupingDownColumnNames().indexOf(e)},e.prototype.getGroupingAcrossColumns=function(){return this._reportMetadata.groupingsAcross},e.prototype.getGroupingDownColumnNames=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this._reportMetadata.groupingsDown).length;t<r;t++)e=i[t],s.push(e.name);return s},e.prototype.getGroupingAcrossColumnNames=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this._reportMetadata.groupingsAcross).length;t<r;t++)e=i[t],s.push(e.name);return s},e.prototype.getGroupingColumns=function(){return b.union(this._reportMetadata.groupingsDown,this._reportMetadata.groupingsAcross)},e.prototype.getGroupingColumnNames=function(){return b.union(this.getGroupingDownColumnNames(),this.getGroupingAcrossColumnNames())},e.prototype.getDetailColumns=function(){return this._reportMetadata.detailColumns},e.prototype.getDetailColumnsPerBlock=function(e){var t,r,i,s,n;for(n=[],r=0,i=(s=this.getBlocks()).length;r<i;r++)t=s[r],n.push(t.getDetailColumns(e));return n},e.prototype.getFilters=function(e,t){return null==t&&(t={}),this.isMultiBlock()?this.getFiltersPerBlock():null!=this._filters?this._filters:this._filters=h.get().getReportFilters(this._reportMetadata,this._reportTypeMetadata,e,t)},e.prototype.getMaxFilterCount=function(){return 20},e.prototype.getChartFilters=function(){return this._dynamicFilterManager.getChartFilters()},e.prototype.getLinkedFilters=function(){return this._dynamicFilterManager.getLinkedFilters()},e.prototype.getFiltersPerBlock=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getBlocks()).length;t<r;t++)e=i[t],s.push(e.getFilters(this.getReportTypeMetadataForBlockId(e.getBlockId())));return s},e.prototype.getCrossFilters=function(){return this._reportMetadata.crossFilters||[]},e.prototype.getCrossFiltersPerBlock=function(){var e,t,r,i;for(i=[],e=0,t=(r=this.getBlocks()).length;e<t;e++)r[e],i.push([]);return i},e.prototype.getSummaryFilters=function(){return this._reportMetadata.aggregateFilters||[]},e.prototype.getCustomFilters=function(){return this._reportMetadata.reportFilters||[]},e.prototype.getStandardFilters=function(){return this._reportMetadata.standardFilters||[]},e.prototype.getFieldToFieldFilters=function(){return b.filter(this.getCustomFilters(),(function(e){return e.filterType===o.FIELD.getApiName()}))},e.prototype.isFieldToFieldFilterLimitReached=function(){return b.size(this.getFieldToFieldFilters())>=4},e.prototype.getMaxFieldToFieldFilters=function(){return 4},e.prototype.getCustomFiltersPerBlock=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getBlocks()).length;t<r;t++)e=i[t],s.push(e.getCustomFilters());return s},e.prototype.getStandardDateFilter=function(){return this._reportMetadata.standardDateFilter},e.prototype.getStandardDateFilterPerBlock=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getBlocks()).length;t<r;t++)e=i[t],s.push(e.getStandardDateFilter());return s},e.prototype.getReportBooleanFilter=function(){return this.isMultiBlock()?this.getReportBooleanFilterPerBlock():this._reportMetadata.reportBooleanFilter},e.prototype.getReportBooleanFilterPerBlock=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getBlocks()).length;t<r;t++)e=i[t],s.push(e.getReportBooleanFilter());return s},e.prototype.getCustomDetailFormula=function(){return this._reportMetadata.customDetailFormula||{}},e.prototype.getCustomSummaryFormula=function(){return this._reportMetadata.customSummaryFormula||{}},e.prototype.getCustomSummaryFormulaByReportType=function(){return null!=this._customSummaryFormulaByReportType?this._customSummaryFormulaByReportType:this._customSummaryFormulaByReportType=b.transform(this.getCustomSummaryFormula(),(function(e,t,r){var i;if(-1===r.indexOf(m.BLOCK_ID_SEPARATOR))return null==e[i=t.crossBlock?s:t.reportType]&&(e[i]={}),e[i][r]=t}),{})},e.prototype.getNumberOfCsfs=function(){var e,t,r,i;for(e=b.size(this.getCustomSummaryFormula()),t=0,r=(i=this.getBlocks()).length;t<r;t++)e-=i[t].getCsfColumns().length;return e},e.prototype.isCsfLimitReached=function(e){return e?b.size(this.getCrossBlockFormulas())>=10:this.getNumberOfCsfs()>=(this.isMultiBlock()?50:5)},e.prototype.getCrossBlockFormulas=function(){return this.getCustomSummaryFormulaByReportType()[s]},e.prototype.getShowDetails=function(){return this._reportMetadata.hasDetailRows},e.prototype.getShowSubtotals=function(){return this._reportMetadata.showSubtotals},e.prototype.getShowGrandTotal=function(){return this._reportMetadata.showGrandTotal},e.prototype.hasStackedSummaries=function(){var e;return null!=(e=this._reportMetadata.presentationOptions)?e.hasStackedSummaries:void 0},e.prototype.getShowRecordCount=function(){return this._reportMetadata.hasRecordCount},e.prototype.getHasOuterJoin=function(){return this._reportTypeMetadata.getHasOuterJoin()},e.prototype.isExternalObjectReport=function(){return this._reportTypeMetadata.isExternalObjectReport()},e.prototype.isHistorical=function(){return this._reportTypeMetadata.isHistorical()},e.prototype.getDataCategories=function(){return this._reportTypeMetadata.getDataCategories()},e.prototype.getDataCategoryFilters=function(){return this._reportMetadata.dataCategoryFilters},e.prototype.getDataCategoryFiltersByCategoryGroup=function(){var e,t,r,i;if(this._dataCategoryFilters=this.getDataCategoryFilters(),this._dataCategoryFiltersByGroup={},null!=this._dataCategoryFilters)for(t=0,r=(i=this._dataCategoryFilters).length;t<r;t++)(e=i[t]).categoryGroupId in this._dataCategoryFiltersByGroup?this._dataCategoryFiltersByGroup[e.categoryGroupId].push(e):this._dataCategoryFiltersByGroup[e.categoryGroupId]=[e];return this._dataCategoryFiltersByGroup},e.prototype.getCurrency=function(){return this._reportMetadata.currency},e.prototype.getScope=function(){return this._reportMetadata.scope},e.prototype.getScopePerBlock=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getBlocks()).length;t<r;t++)e=i[t],s.push(e.getScope());return s},e.prototype.getChartObject=function(){return this._reportMetadata.chart},e.prototype.getSortBy=function(){return this._reportMetadata.sortBy},e.prototype.getSortByPerBlock=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getBlocks()).length;t<r;t++)e=i[t],s.push(e.getSortBy());return s},e.prototype.getReportType=function(){var e;return null!=(e=this._reportMetadata.reportType)?e.type:void 0},e.prototype.getReportTypeObject=function(){return this._reportMetadata.reportType},e.prototype.getReportTypePerBlock=function(){var e,t,r,i,s;for(s=[],t=0,r=(i=this.getBlocks()).length;t<r;t++)e=i[t],s.push(e.getReportType());return s},e.prototype.getTopRows=function(){return this._reportMetadata.topRows},e.prototype.getUniqueReportTypes=function(){return b.uniq(b.map(this.getBlocks(),(function(e){return e.getReportType()})))},e.prototype._isFormulaNameUnique=function(e,t,r){var i;for(i in e)if(e[i].label===t.trim()&&!this._parsingUtil.getBlockPrefix(i)&&i!==this._parsingUtil.unprefixBlockColumnName(r))return!1;return!0},e.prototype.isCustomSummaryFormulaNameUnique=function(e,t){return this._isFormulaNameUnique(this.getCustomSummaryFormula(),e,t)},e.prototype.isCustomDetailFormulaNameUnique=function(e,t){return this._isFormulaNameUnique(this.getCustomDetailFormula(),e,t)},e.prototype.isMultiBlock=function(){return this.getReportFormat()===g.MULTI_BLOCK.getCode()},e.prototype.isTabularReport=function(){return"TABULAR"===this._reportMetadata.reportFormat},e.prototype.isSummaryReport=function(){return this.getReportFormat()===g.SUMMARY.getCode()},e.prototype.isSummaryFilterEnabled=function(){return this.getSummaryFilters().length>0},e.prototype.isSortAsc=function(){var e;return"ASC"===(null!=(e=this._reportMetadata.sortBy[0])?e.sortOrder:void 0)},e.prototype.getBlocks=function(){var e,t;return null!=this._blocks?this._blocks:this._blocks=function(){var r,i,s,n;for(s=this._reportMetadata.blocks||[],n=[],t=r=0,i=s.length;r<i;t=++r)e=s[t],n.push(new u(e,t,this.getCSFKeys()));return n}.call(this)},e.prototype.getBlockById=function(e){return null==this._idToBlockMap&&(this._idToBlockMap=b.keyBy(this.getBlocks(),(function(e){return e.getBlockId()}))),this._idToBlockMap[e]},e.prototype._buildBlockColumnInfos=function(){var e,t,r,i,s,n,o,a,l,u,d,c,h;if(this._blockColumnInfos=[],this._blockColumns=[],this._blockColumnInfosHideDetails=[],this._blockColumnsHideDetails=[],this.isMultiBlock()&&(n=this.getBlocks(),!b.isEmpty(n))){for(h=[],s=a=0,u=n.length;a<u;s=++a){for(i=(e=n[s]).getBlockId(),e.getReportType(),t=e.getDetailColumns().slice(),l=0,d=(c=this.getCSFKeys()).length;l<d;l++)0===(o=c[l]).indexOf(i)&&t.push(o);this._blockColumns.push(t),this._appendBlockColumnInfo(this._blockColumnInfos,e,s,t),this.getShowDetails()?h.push(void 0):(r=this._parsingUtil.filterColumnsFromBlock(this.getAggregates(),i),this.getShowRecordCount()&&e.getHasRecordCount()||(r=b.without(r,this._parsingUtil.getBlockRowCountName(i))),this._blockColumnsHideDetails.push(r),h.push(this._appendBlockColumnInfo(this._blockColumnInfosHideDetails,e,s,r)))}return h}},e.prototype._appendBlockColumnInfo=function(e,t,r,i){var s,n,o,a,l;for(l=[],n=o=0,a=i.length;o<a;n=++o)s=i[n],l.push(e.push({name:s,blockId:t.getBlockId(),blockIndex:r,blockLevelColumnIndex:n,colorIndex:parseInt(this.getColorIndexByTypeMap()[t.getReportType()],10),isCsf:E.call(this.getCSFKeys(),s)>=0}));return l},e.prototype.getColorIndexByTypeMap=function(){var e;return this._colorIndexByType||(this.isMultiBlock()?(e=this.getUniqueReportTypes(),this._colorIndexByType=b.invert(b.keyBy(e,(function(t){return e.indexOf(t)})))):this._colorIndexByType={}),this._colorIndexByType},e.prototype.getBlockColumnInfo=function(e,t){var r,i;if(null==t&&(t=!1),this._blockColumnInfos||this._buildBlockColumnInfos(),r=this.getShowDetails()||t?this._blockColumnInfos:this._blockColumnInfosHideDetails,E.call(function(){i=[];for(var e=0,t=r.length-1;0<=t?e<=t:e>=t;0<=t?e++:e--)i.push(e);return i}.apply(this),e)>=0)return r[e]},e.prototype.getBlockColumns=function(e,t){var r,i;if(null==t&&(t=!1),this._blockColumns||this._buildBlockColumnInfos(),r=this.getShowDetails()||t?this._blockColumns:this._blockColumnsHideDetails,E.call(function(){i=[];for(var e=0,t=r.length-1;0<=t?e<=t:e>=t;0<=t?e++:e--)i.push(e);return i}.apply(this),e)>=0)return r[e]},e.prototype.getColumnNameInPrincipalReportType=function(e,t){var r,i,s,n,o,a,l;if(r=(a=m.get().splitBlockColumnName(e)).blockId,s=a.columnName,r)t=null!=(l=this.getBlockById(r))?l.getReportType():void 0;else if(!t)return e;return t===(n=(o=this.getReportTypeMetadata()).getPrincipalReportType())?s:(i=o.retrieveColumnInfo(s,t))&&i.isCommon?i.equivalentFields[n].name:void 0},e.prototype.canFieldBeUsedForGrouping=function(e,t){var r;return!t||(1===(r=this.getReportTypeMetadata()).getOrderedReportTypes().length||r.retrieveColumnInfo(e,t).isCommon)},e.prototype.isBlockWithRecordCount=function(e){var t;return null!=(t=this.getBlockById(e))?t.getHasRecordCount():void 0},e.prototype.getBlockQueryMetadata=function(){var e,t,r,i,s;if(this.isMultiBlock()){for(s=[],t=0,r=(i=this._reportMetadata.blocks).length;t<r;t++)e=i[t],s.push(b.pick(e,["blockId","name","reportType"]));return s}},e.prototype.getSkipAPI=function(){return!1},e.prototype.getPreviewRefreshing=function(){return!1},e.prototype.getUseCache=function(){return!0},e.prototype.getMaxGroupingDown=function(){return this.getReportTypeMetadata().isCalculatedInsight()?5:3},e.prototype.getMaxGroupingAcross=function(){return this.isMultiBlock()?0:2},e.prototype.getPresentationOptions=function(){return this._reportMetadata.presentationOptions},e.prototype.getHistoricalSnapshotDates=function(){return this._reportMetadata.historicalSnapshotDates},e.prototype.getUserOrHierarchyFilterId=function(){return this._reportMetadata.userOrHierarchyFilterId},e.prototype.getUserOrHierarchyFilterName=function(){return null!=this._reportMetadata.userOrHierarchyFilterName?this._reportMetadata.userOrHierarchyFilterName:null},e.prototype.getQuery=function(e){return this._dynamicFilterManager.shouldIncludeFilters(!1),{reportType:this._reportMetadata.reportType,measureColumns:this.getMeasureColumns(),groupingDownColumns:this.getGroupingDownColumns(),groupingAcrossColumns:this.getGroupingAcrossColumns(),detailColumns:this.getDetailColumns(),filters:this.getFilters(this._dynamicFilterManager,e),crossFilters:this.getCrossFilters(),topRows:this.getTopRows(),summaryFilters:this.getSummaryFilters(),dataCategoryFilters:this.getDataCategoryFilters(),linkedFilters:this._dynamicFilterManager.getLinkedFilters(),reportBooleanFilter:this.getReportBooleanFilter(),customSummaryFormula:this.getCustomSummaryFormula(),customDetailFormula:this.getCustomDetailFormula(),showDetails:this.getShowDetails(),showSubtotals:this.getShowSubtotals(),showGrandTotal:this.getShowGrandTotal(),chart:this.getChartObject(),sortBy:this.getSortBy(),skipAPI:this.getSkipAPI(),useCache:this.getUseCache(),buckets:this.getBuckets(),currency:this.getCurrency(),blocks:this.getBlockQueryMetadata(),presentationOptions:this.getPresentationOptions(),historicalSnapshotDates:this.getHistoricalSnapshotDates(),userOrHierarchyFilterId:this.getUserOrHierarchyFilterId(),userOrHierarchyFilterName:this.getUserOrHierarchyFilterName(),previewRefreshing:this.getPreviewRefreshing()}},e.prototype.exceedGroupingDownLimit=function(){return b.isEmpty(this.getGroupingAcrossColumns())?this.getGroupingDownColumns().length===this.getMaxGroupingDown():2===this.getGroupingDownColumns().length},e.prototype.exceedGroupingAcrossLimit=function(){return!(!this.isMultiBlock()&&3!==this.getGroupingDownColumns().length)||(2===this.getGroupingAcrossColumns().length||b.isEmpty(this.getGroupingDownColumns()))},e.prototype.canRemoveDetailColumn=function(e){return!this.getReportTypeMetadata().isCalculatedInsight()||this.getDetailColumns().length>1},e.prototype.canRemoveGroupingDown=function(e){var t,r,i,s;return(!(null!=(i=this._historicalMetadata)?i.isHistoricalReport():void 0)||e.name!==f||1===this.getGroupingDownColumns().length)&&(!(this.getReportTypeMetadata().isCalculatedInsight()&&(r=this.getReportTypeMetadata().getAvailableCIMeasures("AGGREGATABLE"),t=this.getDetailColumns().map((s=this,function(e){return s._parsingUtil.getAggregateColumnName(e)})).filter((function(e){return r.includes(e)})),this.getGroupingDownColumns().length<=1||b.isEmpty(t)))&&(1!==this.getGroupingDownColumns().length||b.isEmpty(this.getGroupingAcrossColumns())))},e.prototype.canRemoveGroupingAcross=function(e){var t;return(!(null!=(t=this._historicalMetadata)?t.isHistoricalReport():void 0)||e.name!==f)&&(!this.getReportTypeMetadata().isCalculatedInsight()||this.getGroupingAcrossColumns().length>1)},e.prototype.getAvailableMeasures=function(){var e,t,r,i,s,n,o,a,l;if(this.isMultiBlock()){if(!this._availableMeasures)for(this._availableMeasures=[],e=this._reportTypeMetadata.getAvailableMeasuresPerReportType(),i=0,n=(a=this.getBlocks()).length;i<n;i++)for(s=0,o=(l=e[(t=a[i]).getReportType()]).length;s<o;s++)r=l[s],this._availableMeasures.push(this._parsingUtil.addBlockPrefixToColumnName(r,t.getBlockId()));return this._availableMeasures}return this._reportTypeMetadata.getAvailableMeasures()},e.prototype.getAvailableDetailColumns=function(){return this.isMultiBlock()?[]:this._reportTypeMetadata.getAvailableDetailColumns()},e.prototype.getAvailableDetailColumnsWithSections=function(){return this.isMultiBlock()?[]:this._reportTypeMetadata.getAvailableDetailColumnsWithSections()},e.prototype.getBuckets=function(){return this._reportMetadata.buckets||[]},e.prototype.getBucketValue=function(e){return b.find(this.getBuckets(),{developerName:e})},e.prototype.getBucketIndex=function(e){return b.findIndex(this.getBuckets(),{developerName:e})},e.prototype.getBucketSourceColumn=function(e){return this.isBucketColumn(e)?this.getBucketValue(e).sourceColumnName:e},e.prototype.isBucketColumn=function(e){return null!=this.getBucketValue(e)},e.prototype.isBucketableColumn=function(e){return b.some(this.getBucketableDetailColumns(),(function(t){return t.value===e}))},e.prototype.getBucketType=function(e){var t;return t=this.getReportTypeMetadata().retrieveColumnInfo(e).dataType,this._getBucketTypeFromColumnType(t)},e.prototype._getBucketTypeFromColumnType=function(e){return d.getEnumByCode(e).getBucketColumnType()},e.prototype.isCSFColumn=function(e){return null!=this.getCustomSummaryFormula()[e]},e.prototype.getCsfAggregates=function(){return b.filter(this.getAggregates(),(e=this,function(t){return e.isCSFColumn(t)}));var e},e.prototype.getCsfColumnIndices=function(){var e,t,r,i,s,n,o,a,l;if(n=[],this.isMultiBlock())for(s=0;t=this.getBlockColumnInfo(s);)t.isCsf&&n.push(s),s++;else for(i=this.getDetailColumns().length,r=0,o=0,a=(l=this.getAggregates()).length;o<a;o++)e=l[o],this.isCSFColumn(e)&&(n.push(i+r),r++);return n},e.prototype.getFilterAt=function(e){var t,r,i,s,n;return this.getNumOfReportFilters(),i=this.getStandardDateFilter(),s=this.getStandardFilters(),r=this.getCustomFilters(),t=i?1:0,n=s.length,e===t-1?{type:p.STANDARDDATE.getName(),filter:i}:e>=t&&e<n+t?{type:p.STANDARD.getName(),filter:s[e-t]}:{type:p.CUSTOM.getName(),filter:r[e-(t+n)]}},e.prototype.isCustomDetailFormulaColumn=function(e){return null!=this.getCustomDetailFormula()[e]},e.prototype.isNumericCDFColumn=function(e){var t;return(t=this.getCustomDetailFormula()[e])&&"number"===t.formulaType},e.prototype.getOverallDetailColumnIndex=function(e,t){var r,i,s,n,o,a;for(null==t&&(t=0),s=t,i=n=0,o=(a=this.getBlocks()).length;n<o&&(r=a[i],!(i>=e));i=++n)s+=r.getDetailColumns().length;return s},e.prototype.isAggregate=function(e){return-1!==this.getAggregates().indexOf(e)},e.prototype.isFirstDetailColumn=function(e){var t;return this.isMultiBlock()?0===(t=this.getBlockColumnInfo(e)).blockLevelColumnIndex&&!t.isCsf:0===e},e.prototype.isLastDetailColumn=function(e){var t,r;return this.isMultiBlock()?(t=this.getBlockColumnInfo(e),r=this.getBlocks()[t.blockIndex].getDetailColumns(),t.blockLevelColumnIndex===r.length-1&&!t.isCsf):e===this.getDetailColumns().length-1},e.prototype.getCSFCountBeforeDetailColumn=function(e){var t,r,i,s,n,o;if(!this.isMultiBlock())return 0;for(r=0,i=this.getBlockColumnInfo(e).blockIndex,s=0,n=(o=this.getBlocks()).length;s<n&&(t=o[s]).getBlockIndex()!==i;s++)r+=t.getCsfColumns().length;return r},e.prototype.getBucketableDetailColumns=function(e){var t,r,i,s,n,o,a,l;if(this.isMultiBlock())return[];for(t=[],n=0,o=(a=this._reportTypeMetadata.getCategories()).length;n<o;n++)for(s in r=a[n],e&&t.push({label:r.label,type:"separator"}),l=r.columns)(i=l[s]).bucketable&&!this.isBucketColumn(s)&&t.push({value:s,label:i.label,type:this._getBucketTypeFromColumnType(i.dataType).getCode()});return t},e.prototype.findEquivalentDetailColumns=function(e,t){var r,i,s,n,o,a,l,u,d,c,h,p,g;if(null==t&&(t=this.getDetailColumns()),a={},this.isMultiBlock())for(l=(u=this.getReportTypeMetadata()).getPrincipalReportType(),n=u.retrieveColumnInfo(e,l).equivalentFields,c=0,h=(p=this.getBlocks()).length;c<h;c++)(i=(r=p[c]).getReportType())===l?d=e:n&&(d=null!=(g=n[i])?g.name:void 0),d&&(s=this._parsingUtil.addBlockPrefixToColumnName(d,r.getBlockId()),-1!==(o=t.indexOf(s))&&(a[o]=s));else-1!==(o=t.indexOf(e))&&(a[o]=e);return a},e.prototype.findDetailColumns=function(e,t){var r,i,s,n,o,a,l,u,d,c,h,p,g,m,_;if(!this.isMultiBlock())return-1!==(a=this.getDetailColumns().indexOf(e))?[a]:[];for(l=[],u=0,o=this.getReportTypeMetadata().retrieveColumnInfo(e,t),s=c=0,p=(m=this.getBlocks()).length;c<p;s=++c){if(r=m[s],i=this.getBlockColumns(s,!0),t===r.getReportType()||o.isCommon)for(d=e,t!==r.getReportType()&&(d=null!=(_=o.equivalentFields[r.getReportType()])?_.name:void 0),n=h=0,g=i.length;h<g;n=++h)i[n]===d&&l.push(u+n);u+=i.length}return l},e.prototype.getCSFKeys=function(){return b.filter(this.getAggregates(),(function(e){return m.get().isCsf(e)}))},e.prototype.isColumnUniqueCountable=function(e){var t;return!!(t=this.getReportTypeMetadata())&&t.isColumnUniqueCountable(e)},e.prototype.isUniqueRowCountLimitReached=function(){var e;return e=b.filter(this.getAggregates(),(function(e){return m.get().getAggregateType(e)===l.UNIQUE})),b.size(e)>=3},e.prototype.getColumnHasAggregate=function(e,t){return b.includes(this.getAggregates(),this._parsingUtil.getAggregateNameForColumn(e,t.getPrefix()))},e.prototype.getJson=function(){return this._json},e.prototype.getFormattingRules=function(){var e;return(null!=(e=this._reportMetadata.presentationOptions)?e.formattingRules:void 0)||[]},e.prototype.getTextWrappedColumnIndices=function(e){var t,r,i,s,n,o,a,l,u;if(e)return[];for(n=this.getDetailColumns(),o=this.getReportTypeMetadata(),a=[],r=l=0,u=n.length;0<=u?l<=u:l>=u;r=0<=u?++l:--l)i=n[r],s=o.getColumnDataType(i),(E.call(y,s)>=0||function(){var e,r,s,n;for(n=[],e=0,r=(s=this.getAggregates()).length;e<r;e++)t=s[e],this._parsingUtil.isAggregateForColumn(t,i)&&n.push(t);return n}.call(this).length>=2)&&a.push(r);return a},e.prototype.getLastModifiedDate=function(){},e.prototype.getLabel=function(){return this._reportMetadata.name},e.prototype.getSldsIconCode=function(){return"report"},e.prototype.getFullyQualifiedName=function(){return this._reportMetadata.developerName},e.prototype.getType=function(){return i.REPORT},e.prototype.hasReportFilter=function(){return this.getNumOfReportFilters()>0},e.prototype.getNumOfReportFilters=function(){var e,t;return(null!=(e=this.getCustomFilters())?e.length:void 0)+(null!=(t=this.getStandardFilters())?t.length:void 0)+(null!=this.getStandardDateFilter()?1:0)},e.prototype.isDataCloudReport=function(){return this._reportTypeMetadata.isDataCloud()},e}()},52067:e=>{e.exports={isNew:function(e){return null==e||0===e.toString().indexOf("new")}}},64933:(e,t,r)=>{var i,s,n,o=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};n=r(96486),s=r(85808).Z,i=r(59150).Z,e.exports=function(){function e(){this._multiBlockService="function"==typeof i?i():void 0,this.REMOVE_SPACES_REGEXP=new RegExp("\\s+","g"),this.FORMULA_OPERATORS="[-+*/^(),&|=<>!:]",this.FORMULA_SPLIT_REGEXP=new RegExp(this.FORMULA_OPERATORS),this.FORMULA_GROUPVAL_REGEX=new RegExp("(?:PARENT|PREV)GROUPVAL\\(")}return e.get=function(){return null!=this._instance?this._instance:this._instance=new e},e.AGGREGATE_ID_SEPARATOR="!",e.BLOCK_ID_SEPARATOR="#",e.ROW_COUNT="RowCount",e.prototype.isColumnFromBlock=function(t,r){return 0===t.indexOf(r+e.BLOCK_ID_SEPARATOR)},e.prototype.filterColumnsFromBlock=function(e,t){return n.filter(e,(r=this,function(e){return r.isColumnFromBlock(e,t)}));var r},e.prototype.isAggregateForColumn=function(e,t){return e===t||this.getAggregateColumnName(e)===t},e.prototype.isAggregate=function(t){return-1!==t.indexOf(e.AGGREGATE_ID_SEPARATOR)},e.prototype.isRowCount=function(t){return n.last(t.split(e.BLOCK_ID_SEPARATOR))===e.ROW_COUNT},e.prototype.isCsf=function(t){return-1===t.indexOf(e.AGGREGATE_ID_SEPARATOR)&&!this.isRowCount(t)},e.prototype.isCsfReferencingColumn=function(e,t){var r,i;return!(!e||!t)&&(r=e.formula.replace(this.REMOVE_SPACES_REGEXP,""),n.filter(r.split(this.FORMULA_SPLIT_REGEXP),(function(e){return e===t})).length>((null!=(i=r.match(new RegExp("(^|"+this.FORMULA_OPERATORS+")"+t+"\\(","g")))?i.length:void 0)||0))},e.prototype.isCsfReferencingColumns=function(e,t){return t.some((r=this,function(t){return r.isCsfReferencingColumn(e,t)}));var r},e.prototype.isCsfValidAtAllLevels=function(e){return!e.formula.replace(this.REMOVE_SPACES_REGEXP,"").match(this.FORMULA_GROUPVAL_REGEX)},e.prototype.addBlockPrefixToColumnName=function(e,t){return null==t&&(t=""),t.length?this._multiBlockService.prefixBlockColumnName(e,t):e},e.prototype.addBlockPrefixToColumnNames=function(e,t){return n.transform(e,(r=this,function(e,i){return e.push(r.addBlockPrefixToColumnName(i,t))}),[]);var r},e.prototype.getBlockRowCountName=function(t){return this.addBlockPrefixToColumnName(e.ROW_COUNT,t)},e.prototype.unprefixBlockColumnName=function(e){return this._multiBlockService.unprefixBlockColumnName(e)},e.prototype.unprefixBlockColumnNames=function(e){return n.transform(e,(t=this,function(e,r){return e.push(t.unprefixBlockColumnName(r))}),[]);var t},e.prototype.splitBlockColumnName=function(e){return this._multiBlockService.splitBlockColumnName(e)},e.prototype.getBlockId=function(e){return this._multiBlockService.getBlockId(e)},e.prototype.getBlockPrefix=function(e){return this.buildBlockPrefix(this._multiBlockService.getBlockId(e))},e.prototype.buildBlockPrefix=function(t){return t?t+e.BLOCK_ID_SEPARATOR:""},e.prototype.getAggregateColumnName=function(t){var r;return r=t.indexOf(e.AGGREGATE_ID_SEPARATOR),this.getBlockPrefix(t)+t.substring(r+1)},e.prototype.getAggregateNameForColumn=function(t,r){var i,s,n,o;return s=(o=this.splitBlockColumnName(t)).blockId,n=o.columnName,i=r+e.AGGREGATE_ID_SEPARATOR+n,s?s+e.BLOCK_ID_SEPARATOR+i:i},e.prototype.getAggregateType=function(t){var r,i;if(i=this.unprefixBlockColumnName(t))return r=i.substring(0,i.indexOf(e.AGGREGATE_ID_SEPARATOR)),s.fromPrefix(r)},e.prototype.getFormulaColumnNames=function(t,r){var i;return i=Object.keys(t),r&&(i=n.filter(i,(function(t){return-1!==t.indexOf(e.BLOCK_ID_SEPARATOR)}))),i},e.prototype.setDetailSort=function(e,t,r){var i;return(i=this.getBlockId(r.sortColumn))?t[e.getBlockById(i).getBlockIndex()]=r:t=[r],t},e.prototype.isSortedDetail=function(e,t){var r,i,s,a;if(t?n.isArray(t)||(t=[t]):t=[],e)for(i=0,s=e.length;i<s;i++)if(a=null!=(r=e[i])?r.sortColumn:void 0,o.call(t,a)>=0)return!0;return!1},e.prototype.removeDetailSort=function(e,t){var r,i,s,a,l;if(t?n.isArray(t)||(t=[t]):t=[],e)for(r=s=0,a=e.length;s<a;r=++s)if(l=null!=(i=e[r])?i.sortColumn:void 0,o.call(t,l)>=0){if(!this.getBlockId(i.sortColumn)){e=[];break}e[r]=null}return e},e.prototype.splitByBlock=function(e){return n.reduce(e,(t=this,function(e,r){var i,s,n,o;return i=(o=t.splitBlockColumnName(r)).blockId,s=o.columnName,(n=e[i]||[]).push(s),e[i]=n,e}),{});var t},e.prototype.removeAcrossGrouping=function(e){return-1===e.indexOf("~~")?e:e.split("~~")[1]},e}()},10647:(e,t,r)=>{var i,s,n,o,a;o=r(96486),s=r(8429).Z,a=r(89827),i=a.DimOperatorEnum,n=a.MeaOperatorEnum,e.exports={findItemText:function(e,t,r){var i,n,o,a,l;for(null==r&&(r=!1),o=0,a=(l=e.enums()).length;o<a;o++)(i=l[o]).getValue()===t&&(n=i.getName());return n?(r&&(n+="_math"),s.getLabel("InsightsSelector",n)):""},isContainsOperator:function(e){return i.operator_contains.getValue()===e},calculateRangeOperator:function(e){var t;return null!==(e=o.flatten(e))[0]&&e[0]===e[1]?(t=n.operator_equals.getValue(),[e=[e[0]],t]):(null!==e[0]&&null!==e[1]?t=n.operator_between.getValue():null!==e[0]?(t=n.operator_greater_equal.getValue(),e=[e[0]]):null!==e[1]&&(t=n.operator_less_equal.getValue(),e=[e[1]]),[e,t])},roundNumber:function(e,t){var r;return null==t&&(t=0),null==e||isNaN(e)?null:(r=Math.pow(10,t),Math.round(e*r)/r)}}},61818:(e,t,r)=>{var i,s;i=r(74978).escapeQuotesAndBackslash,s=null,e.exports={getAlias:function(e){return""===e?"":this.quoteDimNameForProjAlias(this.getRawAlias(e))},getProj:function(e){return null==s&&(s=r(72713)),s.isCompoundDim(e)?s.getProj(e):this.quoteDimName(e)},getGroupingDim:function(e){var t,i,n,o,a;if(null==s&&(s=r(72713)),s.isCompoundDim(e)){for(a=[],i=0,n=(o=s.getFullDimList(e)).length;i<n;i++)t=o[i],a.push(this.quoteDimNameForGroup(t));return a}return this.quoteDimNameForGroup(e)},quoteDimName:function(e){var t,r;return t=(r=this.unwrapDimOrMea(e))[0],""===(e=r[1])?t:(t?t+".":"")+"'"+i(e,!0)+"'"},quoteDimNameForProjAlias:function(e){return""===e?e:"'"+i(e,!0)+"'"},quoteDimNameForGroup:function(e){var t;return(t=this.unwrapDimOrMea(e))[0],e=t[1],"'"+i(e,!0)+"'"},getRawAlias:function(e){return null==s&&(s=r(72713)),s.isCompoundDim(e)?s.getRawAlias(e):e},unwrapDimOrMea:function(e,t){return t&&t.isDateDimension(e)||-1===e.indexOf("/")?["",e]:e.split("/")},wrapDimOrMea:function(e,t){if(!t)return e;if(-1!==e.indexOf("/"))throw"dim already wrapped "+e;return t+"/"+e}}},62133:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g,m,_=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};h=r(70847),m=r(96486),c=r(8644),d=r(8429).Z,s=r(44298),a=r(61818),g=r(72713),o=r(66537),p=r(33524),r(84985),u=r(81693).Z,n={hour:["year","month","day","hour"],minute:["year","month","day","hour","minute"],second:["year","month","day","hour","minute","second"],day:["year","month","day"],week:["year","week"],month:["year","month"],quarter:["year","quarter"],year:"year",week_fiscal:["year_fiscal","week_fiscal"],month_fiscal:["year_fiscal","month_fiscal"],quarter_fiscal:["year_fiscal","quarter_fiscal"],year_fiscal:["year_fiscal"]},i=new Set(["count","min","max","sum","avg","unique","first","last","median","stddev","stddevp","var","varp","percentile_disc","percentile_cont"]),e.exports=l={getTypeOfSelectorValue:function(e,t,r){var i;return(null!=(i=this.getDimensionRelationships(r,t))?i.type:void 0)===s.DIM_TYPE.DATE&&null!=e&&m.isArray(e[0]||"number"==typeof e[0])?s.DIM_TYPE.DATE:s.DIM_TYPE.STANDARD},getDimensionRelationships:function(e,t){var r,i,n,o,a,l;return(r=g.isCompoundStr(t))&&(t=g.compoundStrToCompoundDim(t)),this._isCompoundDim(e,t)&&(t=m.last(t),r=!0),(null!=e?e.isDateDimension(t):void 0)?(l=e.isDateDimension(t)?s.DIM_TYPE.DATE:null,o=(a=e.getParentDimension(t))&&a!==t?a:null,i=e.getDimensionGrain(t),n=e.getFieldLabel(a),{dimension:t,key:i,parent:o,children:e.getSubDimensions(t),type:l,isCompound:r,label:n}):null},splitFilterValues:function(e,t,r){var i,s,n,o,a,l,u;for(i=[],s=[],o=[],l=0,u=e.length;l<u;l++)a=e[l],r&&(n=this.getDimensionRelationships(r,t)),"date"===(null!=n?n.type:void 0)&&"date"===this.getTypeOfSelectorValue(a,t,r)?m.isArray(a)&&!m.isArray(a[0])?s.push(a):o.push(a):m.isArray(a)?s.push(a):i.push(a);return{discretes:i,ranges:s,relativeDates:o}},convertFilterMapToArray:function(e){var t,r,i;for(t in null==e&&(e={}),i=[],e)null!=(r=e[t])&&i.push([t,r]);return i},getDateRepInfo:function(e,t,r,i){var s,n,o,a,l,h,g,_,f,y,b,C,E,S,T,I,v,R;if(b=null,o=null,g="All",Array.isArray(r)&&!Array.isArray(r[0])&&(i=null==r[0]?u.LESS_OR_EQUALS.code:null==r[1]?u.GREATER_OR_EQUALS.code:u.BETWEEN.code),v=function(e){return c.formatDateInUtc(new Date(Date.UTC(e[0],e[1]-1,e[2])),c.DATE_SHORT)},R=function(e,t,r){switch(e){case u.LESS_OR_EQUALS.code:return d.getLabel("InsightsSelector","dateRange_less_or_equal",v(r));case u.GREATER_OR_EQUALS.code:return d.getLabel("InsightsSelector","dateRange_greater_or_equal",v(t));default:return(t=v(t))===(r=v(r))?t:t+" - "+r}},t&&((null!=(C=this.getDimensionRelationships(e,t))?C.parent:void 0)&&(t=C.parent),(S=e.getSubDimensions(t))&&(I=S.year,f=S.month,n=S.day)),m.isNumber(r))b="date('"+I+"', '"+f+"', '"+n+"') in "+(o="[dateRange(["+(s=p.toDateArray(r))+"], ["+s+"])]"),g=s?v(s):"All";else if(Array.isArray(r)&&!Array.isArray(r[0])){if(null==r[0]&&null==r[1])throw new Error(d.getLabel("ErrorMsg","invalidDateRange"));switch(i){case u.LESS_OR_EQUALS.code:a=p.OPEN_ENDED_DATE_RANGE_LOWER_BOUND,T=p.toDateArray(r[1]);break;case u.GREATER_OR_EQUALS.code:a=p.toDateArray(r[0]),T=p.OPEN_ENDED_DATE_RANGE_UPPER_BOUND;break;default:1===r.length&&r.push(r[0]),a=p.toDateArray(r[0]),T=p.toDateArray(r[1])}b="date('"+I+"', '"+f+"', '"+n+"') in "+(o="[dateRange(["+a+"], ["+T+"])]"),g=R(i,a,T)}else b="date('"+I+"', '"+f+"', '"+n+"')"+" in "+(o="["+function(){var e,t,i;for(i=[],e=0,t=r.length;e<t;e++)E=r[e],i.push(p.relativeDateString(E));return i}().join("..")+"]"),g=(_=function(){var e,t,i,s;for(s=[],h=e=0,t=r.length;e<t;h=++e)i=r[h],l=i[0],y=i[1],null!=l&&s.push(this.getDateLabel(l,y));return s}.call(this))[0]===_[1]?_[0]:_.join(" to ");return{pigql:b,filterPigql:o,label:g}},getDateLabel:function(e,t){var r;return o.hasCfQueryGrain(e)?m.isNumber(t)?(r=d.getLabel("InsightsDateSelector",e),0===t?"day"===e?d.getLabel("InsightsDateSelector","today"):d.getLabel("InsightsDateSelector","this",r):-1===t?"day"===e?d.getLabel("InsightsDateSelector","yesterday"):d.getLabel("InsightsDateSelector","last",r):1===t?"day"===e?d.getLabel("InsightsDateSelector","tomorrow"):d.getLabel("InsightsDateSelector","next",r):t<0?d.getLabel("InsightsDateSelector","lastN",Math.abs(t),this.getPluralGrain(e)):t>0?d.getLabel("InsightsDateSelector","nextN",t,this.getPluralGrain(e)):void 0):"":d.getLabel("InsightsDateSelector","current")+" "+e},getPluralGrain:function(e){switch(e){case"day":return d.getLabel("DateGrain","days");case"week":return d.getLabel("DateGrain","weeks");case"month":return d.getLabel("DateGrain","months");case"quarter":return d.getLabel("DateGrain","quarters");case"year":return d.getLabel("DateGrain","years");case"fiscal_week":return d.getLabel("InsightsDateSelector","fiscal_weeksLC");case"fiscal_month":return d.getLabel("InsightsDateSelector","fiscal_monthsLC");case"fiscal_quarter":return d.getLabel("InsightsDateSelector","fiscal_quartersLC");case"fiscal_year":return d.getLabel("InsightsDateSelector","fiscal_yearsLC")}},getDateSubgroup:function(e,t,r,i){var s,n,o;if(null==i&&(i=!1),o=i?(n=l.dimensionToCompoundArray(r),m.isString(n)?e.getDateFieldByGrain(t,n):function(){var r,i,o;for(o=[],r=0,i=n.length;r<i;r++)s=n[r],null!=e.getDateFieldByGrain(t,s)&&o.push(e.getDateFieldByGrain(t,s));return o}()):e.getDateFieldByGrain(t,r),m.isArray(o)){if(0===m.size(o)||m.some(o,(function(e){return null==e})))return null}else if(null==o)return null;return o},isDateGroup:function(e,t){var r,i,n;return t=g.ensureCompoundDim(t),m.isString(t)?null!=(r=l.getDimensionRelationships(e,t))&&r.type===s.DIM_TYPE.DATE&&(null==r.parent||(n=r.key)===s.DATE_TYPE_KEY.DIMENSION.YEAR||n===s.DATE_TYPE_KEY.DIMENSION.YEAR_FISCAL):(i=t.map((function(t){return l.getDimensionRelationships(e,t)})),i=m.compact(i),null!=l.compoundArrayToDimension(m.map(i,"key"))||i.some((function(e){return e.type===s.DIM_TYPE.DATE})))},isCompoundNonDateGrouping:function(e,t){return Array.isArray(t)&&!l.isDateGroup(e,t)&&null==(null!=e?e.getDateTimeFieldGrain(t):void 0)},removeSubMeas:function(e,t){var r,i,s,n;for(i=[],s=0,n=t.length;s<n;s++)r=t[s],e.getParentDimension(r)&&r!==e.getParentDimension(r)||i.push(r);return i},typeOfDimension:function(e,t){var r;return(null!=(r=l.getDimensionRelationships(e,t))?r.type:void 0)===s.DIM_TYPE.DATE?r.parent&&"fullField"!==r.key?s.DIM_TYPE.STANDARD:s.DIM_TYPE.DATE:s.DIM_TYPE.STANDARD},refineDimOrMeaForlabel:function(e,t){var r,i;return r=e.getDateTimeFieldGrain(t)?t:g.ensureCompoundStr(t),null!=(i=this.getDimensionRelationships(e,r))?i:t},fullDimensionOrMeasureText:function(e,t){var r,i;return t=this.refineDimOrMeaForlabel(e,t),m.isObject(t)&&"date"===t.type?this.dimensionTextForDate(e,t):this._isCompoundDim(e,t)?(r=g.getInnerDims(t).map((i=this,function(t){return i.fullDimensionOrMeasureText(e,t)})),g.formatForDisplay(r)):g.isCompoundStr(t)?this.fullDimensionOrMeasureText(e,g.getInnerStrs(t)):e.getFieldLabel(t)||t},dimensionTextForDate:function(e,t){var r,i,n,o,a;return r=t.dimension,a=t.parent,n=t.key,i=t.isCompound,o=t.label,a?n===s.DATE_TYPE_KEY.DIMENSION.FULLFIELD?o||e.getDateAlias(a):(o||e.getDateAlias(a))+" ("+d.getLabel("InsightsDateSelector",i?n+"_compound":n+"_discrete")+")":o||e.getDateAlias(r)},fullAggFctAndMeasureText:function(e,t){var r,s,n;return(s=t[3])&&s.display?s.display:(Array.isArray(t)?(r=t[0],n=t[1]):n=t,null!=r?i.has(r)?d.getLabel("InsightsControlBar","aggType_"+r,l.fullDimensionOrMeasureText(e,n)):l.fullDimensionOrMeasureText(e,r+"_"+n):l.fullDimensionOrMeasureText(e,n))},measureNameForFormat:function(e){switch(e){case"percentage":return s.FORMAT_PERCENT_MEASURE_NAME;case"currencycents":return s.FORMAT_CURRENCY_CENTS_MEASURE_NAME;case"currencydollars":return s.FORMAT_CURRENCY_DOLLARS_MEASURE_NAME;default:return null}},measureField:function(e,t){var r,i,s,n,o;return null==t&&(t=!0),m.isEmpty(e)||!m.isArray(e)?null:(r=e[0],n=e[1],(s=e[2])&&t?s:(i=(o=a.unwrapDimOrMea(n))[0],"*"===o[1]?a.wrapDimOrMea("count",i):("count"===r&&(r="unique"),r+"_"+n)))},measureForField:function(e){var t;return e?"count"===e?["count","*"]:-1===e.indexOf("_")?null:("unique"===(t=this.measureForMeasureField(e))[0]&&(t[0]="count"),t):null},measureForMeasureField:function(e){var t;return e?"count"===e?["count","*"]:-1===(t=e.indexOf("_"))?null:[e.slice(0,t),e.slice(t+1)]:null},measureByAlias:function(e,t){return m.find(e,(function(e){return e[2]===t}))},measureNameForDisplay:function(e){var t,r;return t=e[0],r=e[1],"unique"===t?"*":r},fullKeyText:function(e,t,r){var i,s,n;if(!(null==r||m.isString(r)&&0===r.length))return i=function(e){return g.isCompoundStr(e)?g.getInnerStrs(e):e},null!=e.getDateTimeFieldGrain(t)?this._fullKeyText(e,t,r):this._isCompoundDim(e,t)?(s=g.getInnerDims(t),n=i(r),this._compoundFullKeyText(e,s,n)):g.isCompoundStr(t)?(s=g.getInnerStrs(t),n=i(r),this._compoundFullKeyText(e,s,n)):this._fullKeyText(e,t,r)},_fullKeyText:function(e,t,r){return e.getFieldMemberLabel(t,r)||(""===r?d.getLabel("ExtMeta","emptyDimValue"):String(r))},_isCompoundDim:function(e,t){return!e.isDateDimension(t)&&(g.isCompoundDim(t)||Array.isArray(t)&&t.every((function(t){return e.hasField(t)||null!=e.getDateTimeFieldGrain(t)})))},_compoundFullKeyText:function(e,t,r){var i,s,n;return i=function(){var i,o,a;for(a=[],s=i=0,o=t.length;i<o;s=++i)n=t[s],a.push(this._fullKeyText(e,n,r[s]));return a}.call(this),e.isDateDimension(t[0])&&t.length>3?g.formatDateWithTimeForDisplay(i):g.formatForDisplay(i)},rangeToStr:function(e,t,r){return 1===t.length?""+this.formatNumber(e,r,t[0]):this.formatNumber(e,r,t[0])+" - "+this.formatNumber(e,r,t[1])},formatNumber:function(e,t,r){var i;return i=e.getMeasureFormat(t),h.formatCompact(r,{formatString:i.customFormat[0],multiplier:i.customFormat[1],delimiters:i.delimiters,byOriginalFormatString:!0,minCompactDecimalDigits:1,minMidRangeCompactDecimalDigits:0})},isAggregate:function(e,t){var r,i;return e.length>1&&(t.isMeasure(e[1])&&(r=e[0],_.call(m.values(s.AGGTYPES),r)>=0)||t.isDimension(e[1])&&((i=e[0])===s.AGGTYPES.COUNT||i===s.AGGTYPES.UNIQUE)||"*"===e[1]&&e[0]===s.AGGTYPES.COUNT)},typeOfGroupfield:function(e,t){return this.isDateGroup(e,t)?s.DIM_TYPE.DATE:s.DIM_TYPE.STANDARD},dimensionToCompoundArray:function(e){var t;return null==(t=n[e])?null:m.isString(t)?t:t.slice()},compoundArrayToDimension:function(e){var t,r;for(r in n)if(t=n[r],m.isEqual(t,e))return r;return null}}},89827:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty,l=function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};(o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.getEnumByValue=function(e){var t,r,i,s;for(r=0,i=(s=this.enums()).length;r<i;r++)if((t=s[r]).getValue()===e)return t},t.hasEnumByValue=function(e){return null!=this.getEnumByValue(e)},t}(n=r(78978))).build(o,{operator_between:">=<=",operator_less:"<",operator_less_equal:"<=",operator_greater:">",operator_greater_equal:">=",operator_equals:"==",operator_not_equals:"!=",operator_is_null:"isnull",operator_is_not_null:"isnotnull"}),(s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t.getEnumByValue=function(e){var t,r,i,s;for(r=0,i=(s=this.enums()).length;r<i;r++)if((t=s[r]).getValue()===e)return t},t.hasEnumByValue=function(e){return null!=this.getEnumByValue(e)},t}(n)).build(s,{operator_equals:"in",operator_not_equals:"not in",operator_contains:"matches",operator_is_null:"isnull",operator_is_not_null:"isnotnull",operator_starts_with:"starts with"}),(i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return l(t,e),t}(n)).build(i,{operator_between:">=<=",operator_less_equal:"<=",operator_greater_equal:">="}),e.exports={MeaOperatorEnum:o,DimOperatorEnum:s,DateRangeOperatorEnum:i}},83784:(e,t,r)=>{var i,s={}.hasOwnProperty;i=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t}(r(78978)),e.exports=i.build(i,{BLOCKS:"blocks",BOOLEANFILTER:"reportBooleanFilter",BUCKET:"buckets",CDF:"customDetailFormula",CHART:"chart",CHART_FILTERS:"chartFilters",CROSS_FILTERS:"crossFilters",CSF:"customSummaryFormula",CURRENCY:"currency",DETAILCOLUMNS:"detailColumns",DRILL_FILTERS:"drillFilters",FILTER:"filters",GRANDTOTAL:"showGrandTotal",GROUPINGACROSS:"groupingAcrossColumns",GROUPINGDOWN:"groupingDownColumns",HIGHLIGHT:"highlight",LINKED_FILTERS:"linkedFilters",MEASURES:"measureColumns",PRESENTATION_OPTIONS:"presentationOptions",REPORT_TYPE:"reportType",SCROLL_TO_COLUMN_INDEX:"scrollToColumnIndex",SHOWDETAILS:"showDetails",SKIP_API:"skipAPI",SNAPSHOT_DATES:"historicalSnapshotDates",SORTBY:"sortBy",STACKED_SUMMARIES:"hasStackedSummaries",SUBTOTALS:"showSubtotals",USE_CACHE:"useCache",USER_OR_HIERARCHY_FILTER_ID:"userOrHierarchyFilterId",USER_OR_HIERARCHY_FILTER_NAME:"userOrHierarchyFilterName",PREVIEW_REFRESHING:"previewRefreshing",IS_PAUSABLE_SUBSCRIBER_PAUSED:"isPausableSubscriberPaused"})},39554:(e,t,r)=>{var i,s,n,o,a,l,u,d;u=r(96486),l=r(83993).Oz,n=r(61506).Z,i=r(18111),d=r(90554),o=d.deepCopy,a=d.deleteNullValues,s=r(61818),e.exports={ORDERBY_MEASURE_TOKEN:-1,DEFAULT_QUERY:{filters:[],aggregateFilters:[],groups:[],measures:[["count",s.wrapDimOrMea("*")]],values:[],order:[],formula:null,pigql:null},cleanupQuery:function(e){var t,r,i,s;for(t in delete e.dimensions,delete e.facet_filters,delete e.global_filters,i=this.DEFAULT_QUERY)r=i[t],u.isEqual(e[t],r)&&delete e[t];return(null!=(s=e.values)?s.length:void 0)>0?(e.limit===this.getDatasetDefaultValuesQueryLimit()&&delete e.limit,delete e.measures):(e.limit===this.getDatasetDefaultGroupQueryLimit()&&delete e.limit,null==e.measures&&(e.measures=this.DEFAULT_QUERY.measures)),e},cleanseQuery:function(e){return e.sources||(u.isEmpty(e.filters)&&delete e.filters,u.isEmpty(e.aggregateFilters)&&delete e.aggregateFilters),a(e),e},mergeWithDefault:function(e){var t,r,i;for(t in i=u.cloneDeep(this.DEFAULT_QUERY))r=i[t],null==e[t]&&(e[t]=r);return e},getProjString:function(e,t){return[e,t].filter((function(e){return e.length>0})).join(", ")},filterLoads:function(e,t,r){var i;return i=new RegExp('(\\w+)\\s*=\\s*load\\s+"'+t+'"\\s*;',"g"),e.replace(i,(function(e,t){return""+e+r.map((function(e){return t+" = filter "+t+" by "+e+";"})).join("")}))},replaceAliasesToRefs:function(e,t){var r,i,s,n,o;if(u.isEmpty(t))return e;for(n=0,o=t.length;n<o;n++)if(r=t[n],(s='load "'+l(r.getAlias(),r.getNamespace())+'"')!==(i='load "'+r.getReference()+'"'))for(;-1!==e.indexOf(s);)e=e.replace(s,i);return e},replaceRefsToAliases:function(e,t){var r,i,s,n,o,a;if(u.isEmpty(t))return e;for(o=0,a=t.length;o<a;o++)if(i=t[o],r=l(i.getAlias(),i.getNamespace()),(n='load "'+i.getReference()+'"')!==(s='load "'+r+'"'))for(;-1!==e.indexOf(n);)e=e.replace(n,s);return e},replaceAliasesToIds:function(e,t){var r,i,s,n,o;if(u.isEmpty(t))return e;for(n=0,o=t.length;n<o;n++)if(r=t[n],(s='load "'+l(r.getAlias(),r.getNamespace())+'"')!==(i='load "'+r.getId()+'"'))for(;-1!==e.indexOf(s);)e=e.replace(s,i);return e},getEmRefsInPigql:function(e){var t,r,i;for(r=new RegExp('load\\s+"([^"]+)"',"g"),i=[];null!==(t=r.exec(e));)i.push(t[1]);return i},getDatasetDefaultGroupQueryLimit:function(){return n.get(i).getDatasetDefaultGroupQueryLimit()},getDatasetDefaultValuesQueryLimit:function(){return n.get(i).getDatasetDefaultValuesQueryLimit()},getSelectorQueryLimit:function(){return n.get(i).getSelectorQueryLimit()},getDefaultQuery:function(){return o(this.DEFAULT_QUERY)},measureField:function(e){var t,r,i,n,o;return u.isEmpty(e)||!u.isArray(e)?null:(t=e[0],n=e[1],(i=e[2])?i:(r=(o=s.unwrapDimOrMea(n))[0],"*"===o[1]?s.wrapDimOrMea("count",r):("count"===t&&(t="unique"),t+"_"+n)))},getMeasureNameFromIndex:function(e,t){var r;return r=null!=t.columns?t.columns[e].query.measures[0]:t.measures[e],this.measureField(r)},getMeasureIndexFromName:function(e,t){var r,i,s,n,o,a,l,u,d,c;if(null!=t.columns){for(r=o=0,l=(d=t.columns).length;o<l;r=++o)if(n=d[r].query,e=this.measureField(n.measures[0]))return r}else for(i=a=0,u=(c=t.measures).length;a<u;i=++a)if(s=c[i],e===this.measureField(s))return i;return-1}}},32502:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value},t}(i),s.build(s,{PLUS:"+",MINUS:"-",MULTIPLICATION:"*",DIVISION:"/",MODULO:"%"})},88255:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t._isCaseSensitive=!1,t.prototype.getCode=function(){return this._value},t}(i),s.build(s,{EQUALS:"==",NOT_EQUALS:"!=",LESS:"<",LESS_OR_EQUALS:"<=",GREATER:">",GREATER_OR_EQUALS:">=",MATCHES:"matches",IN:"in",NOT_IN:"not in",LIKE:"like"})},36938:(e,t,r)=>{var i,s,n,o;o=r(96486),i=r(27223),s=r(66053),n=r(49989),e.exports=function(){function e(e){this._branch=e}return e.prototype.getExpressionTree=function(){return null!=this._expressionTree?this._expressionTree:this._expressionTree=new s(this._branch)},e.prototype.getInputs=function(){var e;return null!=this._inputs?this._inputs:this._inputs=function(){var t;for(e in t=[],this._discoverInputs(this._branch))t.push(e);return t}.call(this)},e.prototype.replaceInput=function(e,t){var r,i;if(-1!==(r=(i=this.getInputs()).indexOf(e)))return i[r]=t,this._inputs=i},e.prototype.validate=function(){return i.checkImplemented()},e.prototype.replaceNodes=function(e,t){return this.getExpressionTree().replaceNodes(e,t)},e.prototype.toQueryString=function(){return this.getExpressionTree().toQueryString()},e.prototype._discoverInputs=function(e,t){var r,i,s,a;if(null==t&&(t={}),2===o.size(e)&&n.hasCode(e[0])){if(n.getEnumByCode(e[0])===n.ID)return null==t[i=e[1]]&&(t[i]=0),t[i]++,t}else{if(3===o.size(e)&&"("===e[0])return this._discoverInputs(e[2],t);if(o.size(e)>=4&&"("===e[0])return this._discoverInputs(e[3],t)}for(s=0,a=e.length;s<a;s++)r=e[s],o.isArray(r)?this._discoverInputs(r,t):o.isObject(r)&&(null!=r.list&&this._discoverInputs(r.list,t),null!=r.expr&&this._discoverInputs(r.expr,t));return t},e}()},66053:(e,t,r)=>{var i,s,n,o,a,l,u,d,c,h,p,g={}.hasOwnProperty,m=function(e,t){for(var r in t)g.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};p=r(96486),s=r(27223),d=r(36015),o=r(32502),a=r(88255),u=r(6204).Z,h=r(49989),c=r(963),e.exports=l=function(){function e(e){this._rootBranch=i.fromExpression(e)}return e.prototype.getRootBranch=function(){return this._rootBranch},e.prototype.select=function(e){var t;return t=[],this._traverse(this._rootBranch,e,t),t},e.prototype.replaceNodes=function(e,t){var r,s,n,o,a,l,u,d,c;if(a=this.select(e),!p.isEmpty(a)){for(l=0,d=a.length;l<d;l++){for(n=(s=a[l]).getExpressionBranch(),o=u=0,c=t.length;u<c;o=++u)r=t[o],n[o]=r;n.splice(t.length),s.deleteChildBranches()}return this._rootBranch=i.fromExpression(this._rootBranch.getExpressionBranch())}},e.prototype.toQueryString=function(){return this._rootBranch.toQueryString(!0)},e.prototype.isTypeIsomorphic=function(e){return this._isTypeIsomorphic(this._rootBranch,e)},e.prototype._isTypeIsomorphic=function(e,t){var r,i,s,n,o,a,l,u;if(!(e instanceof t.clazz))return!1;if(i=e.getChildBranches(),p.isEmpty(t.children)){if(!p.isEmpty(i))return!1}else if(p.isArray(t.children)){if(p.size(i)!==p.size(t.children))return!1;for(s=n=0,a=(u=t.children).length;n<a;s=++n)if(r=u[s],!this._isTypeIsomorphic(i[s],r))return!1}else if(!p.isEmpty(i))for(o=0,l=i.length;o<l;o++)if(r=i[o],!this._isTypeIsomorphic(r,t.children))return!1;return!0},e.prototype.isFoldable=function(e,t,r){return null==r&&(r=!0),this._isFoldable(this._rootBranch,e,t,r)},e.prototype._isFoldable=function(e,t,r,i,s){var n,o,a;return null==s&&(s=[]),a=this,(n=function(t){var n;return!1!==(n=null!=r.foldingBranchClass?a._isFoldable(t,r.foldingBranchClass,r.foldedChild,i):!!a._isTypeIsomorphic(t,r)&&[t])&&s.push({foldingNode:e,foldedChildren:n}),!1!==n})(e)?[{foldedChildren:s[0].foldedChildren}]:e instanceof t&&(o=e.getChildBranches(),2===p.size(o)&&(!!n(o[i?1:0])&&(n(o[i?0:1])?s:this._isFoldable(o[i?0:1],t,r,i,s))))},e.prototype._traverse=function(e,t,r){var i,s,n,o,a;for(t(e)&&r.push(e),a=[],s=0,n=(o=e.getChildBranches()).length;s<n;s++)null!=(i=o[s])&&a.push(this._traverse(i,t,r));return a},e}(),i=function(){function e(e){this._expressionBranch=e}return e.fromExpression=function(e){var t,r;if(r=e[0],null==(t=n[r]))throw new Error("Unknown branch operator '"+r+"'.");return new t(e)},e.prototype.getExpressionBranch=function(){return this._expressionBranch},e.prototype.getChildBranches=function(){return s.checkImplemented()},e.prototype.deleteChildBranches=function(){return delete this._childBranches},e.prototype.toQueryString=function(e){return null==e&&(e=!1),s.checkImplemented()},e}(),l.PrecedenceBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){var e;return null!=this._childBranches?this._childBranches:this._childBranches=function(){var t,r,s;for(s=[],e=t=1,r=p.size(this._expressionBranch);1<=r?t<r:t>r;e=1<=r?++t:--t){if(e>2)throw new Error("Only unary and binary operations supported.");s.push(i.fromExpression(this._expressionBranch[e]))}return s}.call(this)},t.prototype.toQueryString=function(e){var t,r;return 1===(t=this.getChildBranches()).length?this.getOperator().getCode()+t[0].toQueryString():(r=t[0].toQueryString()+" "+this.getOperator().getCode()+" "+t[1].toQueryString(),e?r:"("+r+")")},t.prototype.getOperator=function(){return s.checkImplemented()},t}(i),l.LogicalBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getOperator=function(){return null!=this._operator?this._operator:this._operator=d.getEnumByCode(this._expressionBranch[0])},t}(l.PrecedenceBranch),l.ArithmeticBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getOperator=function(){return null!=this._operator?this._operator:this._operator=o.getEnumByCode(this._expressionBranch[0])},t}(l.PrecedenceBranch),l.FunctionBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getFunction=function(){return u.fromCode(this.getFunctionName())},t.prototype.getFunctionName=function(){return this._expressionBranch[1][1]},t.prototype.getChildBranches=function(){var e;return this._childBranches=function(){var t,r,s,n;for(n=[],t=0,r=(s=this._expressionBranch[2]).length;t<r;t++)e=s[t],n.push(i.fromExpression(e));return n}.call(this),4===this._expressionBranch.length&&this._childBranches.push(i.fromExpression(this._expressionBranch[3])),this._childBranches},t.prototype.toQueryString=function(e){var t,r,i;return t=function(){var e,t,i,s;for(s=[],e=0,t=(i=this.getChildBranches()).length;e<t;e++)r=i[e],s.push(r.toQueryString(!0));return s}.call(this),this.getFunction().hasWithinGroup?(i=t.splice(-1),this.getFunctionName()+"("+t.join(", ")+") within group (order by "+i+")"):this.getFunctionName()+"("+t.join(", ")+")"},t}(i),l.ComparisonBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getOperator=function(){return null!=this._operator?this._operator:this._operator=a.getEnumByCode(this._expressionBranch[0])},t.prototype.getChildBranches=function(){var e;return null!=this._childBranches?this._childBranches:this._childBranches=function(){var t,r;for(r=[],e=t=1;t<=2;e=++t)r.push(i.fromExpression(this._expressionBranch[e]));return r}.call(this)},t.prototype.getLeftBranch=function(){return this._childBranches[0]},t.prototype.getRightBranch=function(){return this._childBranches[1]},t.prototype.toQueryString=function(e){var t,r;return r=(t=this.getChildBranches())[0].toQueryString()+" "+this.getOperator().getCode()+" "+t[1].toQueryString(),e?r:"("+r+")"},t}(i),l.ValueBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){return[]},t.prototype.getType=function(){return null!=this._type?this._type:this._type=h.getEnumByCode(this._expressionBranch[0])},t.prototype.getValue=function(){return this.getType().getValue(this._expressionBranch)},t.prototype.toQueryString=function(e){return this.getType().toQueryString(this._expressionBranch)},t}(i),l.WindowFunctionBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){var e;return null!=this._childBranches?this._childBranches:this._childBranches=function(){var t,r;for(r=[],e=t=1;t<=2;e=++t)r.push(i.fromExpression(this._expressionBranch[e]));return r}.call(this)},t.prototype.toQueryString=function(){var e;return(e=this.getChildBranches())[0].toQueryString()+" over("+e[1].toQueryString()+")"},t}(i),l.WindowFrameBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){var e;return null!=this._childBranches?this._childBranches:this._childBranches=function(){var t,r,s;for(s=[],e=t=1,r=p.size(this._expressionBranch);1<=r?t<r:t>r;e=1<=r?++t:--t)s.push(i.fromExpression(this._expressionBranch[e]));return s}.call(this)},t.prototype.toQueryString=function(){var e,t;return t="["+(e=this.getChildBranches())[0].toQueryString()+"] partition by "+e[1].toQueryString(),3===e.length&&(t+=" order by "+e[2].toQueryString()),t},t}(i),l.ExpressionListBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){var e;return null!=this._childBranches?this._childBranches:this._childBranches=p.isArray(this._expressionBranch[1][0])?function(){var t,r,s,n;for(n=[],t=0,r=(s=this._expressionBranch[1]).length;t<r;t++)e=s[t],n.push(i.fromExpression(e));return n}.call(this):[i.fromExpression(this._expressionBranch[1])]},t.prototype.toQueryString=function(){var e,t,r;return r=(t=function(){var t,r,i,s;for(s=[],t=0,r=(i=this.getChildBranches()).length;t<r;t++)e=i[t],s.push(e.toQueryString());return s}.call(this)).join(", "),1===t.length?r:"("+r+")"},t}(i),l.CaseStatementBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){var e,t;return this._childBranches||(this._childBranches=function(){var t,r,s,n;for(n=[],t=0,r=(s=this._expressionBranch[1].list).length;t<r;t++)e=s[t],n.push(i.fromExpression(e));return n}.call(this),null!=this._expressionBranch[1].expr&&(t=i.fromExpression(this._expressionBranch[1].expr)),this._childBranches.unshift(t)),this._childBranches},t.prototype.toQueryString=function(){var e,t,r;return e=this.getChildBranches(),r=function(){var r,i,s,n;for(n=[],r=0,i=(s=e.slice(1)).length;r<i;r++)t=s[r],n.push(t.toQueryString());return n}().join(" "),"case "+(null!=e[0]?e[0].toQueryString()+" "+r:r)+" end"},t}(i),l.CaseWhenThenStatementBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){var e;return null!=this._childBranches?this._childBranches:this._childBranches=function(){var t,r;for(r=[],e=t=1;t<=2;e=++t)r.push(i.fromExpression(this._expressionBranch[e]));return r}.call(this)},t.prototype.toQueryString=function(){var e;return"when "+(e=this.getChildBranches())[0].toQueryString()+" then "+e[1].toQueryString()},t}(i),l.CaseElseStatementBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){return null!=this._childBranches?this._childBranches:this._childBranches=i.fromExpression(this._expressionBranch[1])},t.prototype.toQueryString=function(){return"else "+this.getChildBranches().toQueryString()},t}(i),l.RangeExpressionBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){var e;return null!=this._childBranches?this._childBranches:this._childBranches=function(){var t,r;for(r=[],e=t=1;t<=2;e=++t)null!=this._expressionBranch[e]?r.push(i.fromExpression(this._expressionBranch[e])):r.push(void 0);return r}.call(this)},t.prototype.toQueryString=function(){var e;return(null!=(e=this.getChildBranches())[0]?e[0].toQueryString():"")+".."+(null!=e[1]?e[1].toQueryString():"")},t}(i),l.ArrayExpressionBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){var e;return null!=this._childBranches?this._childBranches:this._childBranches=function(){var t,r,s,n;for(n=[],t=0,r=(s=this._expressionBranch[1]).length;t<r;t++)null!=(e=s[t])?n.push(i.fromExpression(e)):n.push(void 0);return n}.call(this)},t.prototype.isAllChildrenOf=function(e){var t,r,i;for(t=0,r=(i=this.getChildBranches()).length;t<r;t++)if(!(i[t]instanceof e))return!1;return!0},t.prototype.toQueryString=function(){var e;return"["+function(){var t,r,i,s;for(s=[],t=0,r=(i=this.getChildBranches()).length;t<r;t++)e=i[t],s.push(e.toQueryString());return s}.call(this).join(", ")+"]"},t}(i),l.OrderListItemBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){return null!=this._childBranches?this._childBranches:this._childBranches=[i.fromExpression(this._expressionBranch[1])]},t.prototype.toQueryString=function(){return this.getChildBranches()[0].toQueryString()+" "+this._getSortOrder()},t.prototype._getSortOrder=function(){return this._expressionBranch[2]?"desc":"asc"},t}(i),l.NullExpressionBranch=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return m(t,e),t.prototype.getChildBranches=function(){return null!=this._childBranches?this._childBranches:this._childBranches=i.fromExpression(this._expressionBranch[1])},t.prototype.toQueryString=function(){return this.getChildBranches().toQueryString()+" "+this.getOperator()},t.prototype.getOperator=function(){return null!=this._operator?this._operator:this._operator=c.getEnumByCode(this._expressionBranch[0]).getOperator()},t}(i),n=function(){var e,t,r,i,s,n,u,p,g,m,_;for(s={"(":l.FunctionBranch,window:l.WindowFunctionBranch,winFrame:l.WindowFrameBranch,winResetList:l.ExpressionListBranch,winOrderList:l.ExpressionListBranch,case:l.CaseStatementBranch,when:l.CaseWhenThenStatementBranch,else:l.CaseElseStatementBranch,"@":l.RangeExpressionBranch,ord:l.OrderListItemBranch,arr:l.ArrayExpressionBranch},n=0,p=(r=[[d,l.LogicalBranch],[o,l.ArithmeticBranch],[a,l.ComparisonBranch],[c,l.NullExpressionBranch],[h,l.ValueBranch]]).length;n<p;n++)for(t=(m=r[n])[0],e=m[1],u=0,g=(_=t.enums()).length;u<g;u++){if(null!=s[i=_[u].getCode()])throw new Error("Operator '"+i+"' already mapped.");s[i]=e}return s}()},3713:e=>{e.exports=function(){function e(e,t,r,i,s){this._alias=e,this._type=t,this._sourceStatement=r,this._sourceFields=null!=i?i:[],this._stream=s,null==this._stream&&(this._stream=this._sourceStatement.getInto())}return e.buildFieldId=function(e,t){return e+".'"+t+"'"},e.getFieldAliasFromId=function(e){return e.split("'")[1]},e.prototype.getId=function(){return this.constructor.buildFieldId(this._stream,this._alias)},e.prototype.getAlias=function(){return this._alias},e.prototype.getType=function(){return this._type},e.prototype.getStream=function(){return this._stream},e.prototype.getSourceStatement=function(){return this._sourceStatement},e.prototype.getSourceFields=function(){return this._sourceFields},e}()},36015:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value},t}(i),s.build(s,{AND:"&&",OR:"||",NOT:"!"})},963:(e,t,r)=>{var i,s,n={}.hasOwnProperty;i=r(723),e.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t._isCaseSensitive=!1,t.prototype.getCode=function(){return this._value.code},t.prototype.getOperator=function(){return this._value.operator},t}(i),s.build(s,{ISNULL:{code:"isnull",operator:"is null"},IS_NOT_NULL:{code:"isnotnull",operator:"is not null"}})},77114:(e,t,r)=>{var i,s,n,o,a={}.hasOwnProperty;i=r(723),s=r(13728).Z,n=r(5082).Z,e.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)a.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.getCode=function(){return this._value.code},t.prototype.getDateTimeGrain=function(){return this._value.dateTimeGrain},t.prototype.isFiscal=function(){return this._value.isFiscal},t.prototype.getRelativeDate=function(e){return new n(this.getDateTimeGrain(),e,this.isFiscal())},t}(i),o.build(o,{YEAR:{code:"year",dateTimeGrain:s.YEAR,isFiscal:!1},QUARTER:{code:"quarter",dateTimeGrain:s.QUARTER,isFiscal:!1},MONTH:{code:"month",dateTimeGrain:s.MONTH,isFiscal:!1},WEEK:{code:"week",dateTimeGrain:s.WEEK,isFiscal:!1},DAY:{code:"day",dateTimeGrain:s.DAY,isFiscal:!1},FISCAL_YEAR:{code:"fiscal_year",dateTimeGrain:s.YEAR,isFiscal:!0},FISCAL_QUARTER:{code:"fiscal_quarter",dateTimeGrain:s.QUARTER,isFiscal:!0},FISCAL_MONTH:{code:"fiscal_month",dateTimeGrain:s.MONTH,isFiscal:!0},FISCAL_WEEK:{code:"fiscal_week",dateTimeGrain:s.WEEK,isFiscal:!0}})},33524:(e,t,r)=>{var i,s,n;n=r(96486),i=r(70873),s=r(74978).quoteValue,r(61818),e.exports={OPEN_ENDED_DATE_RANGE_LOWER_BOUND:[0,1,1],OPEN_ENDED_DATE_RANGE_UPPER_BOUND:[9999,1,1],fieldName:function(e){return"'"+e+"'"},stringValue:function(e){return JSON.stringify(e)},absoluteDateArrayString:function(e){var t;return"["+(t=new Date(e)).getUTCFullYear()+", "+(t.getUTCMonth()+1)+", "+t.getUTCDate()+"]"},relativeDateString:function(e){return i.relativeDateArrayToStr(e)},toSanitizedString:function(e){var t,r;return(r=function(){var r,i,s,n;for(n=[],r=0,i=(s=e.split(";")).length;r<i;r++)t=s[r],n.push(t.trim());return n}()).length>1?r.slice(0,-1).join(";\n")+n.last(r)+";":r+";"},createSingleFieldEqualityFilter:function(e,t){return null==t?e+" is null":e+" == "+s(t)},joinDimsWithQuoting:function(e,t){var r;return null==t&&(t=!1),function(){var i,n,o;for(o=[],i=0,n=e.length;i<n;i++)r=e[i],o.push(s(r,t));return o}().join(", ")},toDateArray:function(e){var t;return"number"==typeof e||"string"==typeof e?[(t=new Date(e)).getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()]:[e.year,e.month+1,e.day]}}},49989:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;a=r(96486),i=r(723),n=r(3713),s=r(56263),e.exports=o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.toQueryString=function(e){return this.getEnumByCode(e[0]).toQueryString(e)},t.prototype.getCode=function(){return this._value.code},t.prototype.getDataType=function(e,t){var r;return null!=(r=this._value.dataType)?r:this._value.getDataType(e,t)},t.prototype.getValue=function(e){var t,r;return null!=(r="function"==typeof(t=this._value).getValue?t.getValue(e):void 0)?r:e[1]},t.prototype.toQueryString=function(e){return this._value.toQueryString(e)},t}(i),o.build(o,{ID:{code:"'",getDataType:function(e,t){var r,i;if(r=e[1],null==(i=a.find(t,(function(e){return e.getAlias()===r}))))throw new Error("No input stream field found with ID '"+r+"'.");return i.getType()},toQueryString:function(e){return"'"+e[1]+"'"}},NUMBER:{code:"#",dataType:s.NUMBER,toQueryString:function(e){return e[1].toString()}},STRING:{code:'"',dataType:s.STRING,toQueryString:function(e){return'"'+e[1]+'"'}},UNARY_PLUS:{code:"u+",dataType:s.NUMBER,toQueryString:function(e){return o.toQueryString(e[1])}},UNARY_MINUS:{code:"u-",dataType:s.NUMBER,getValue:function(e){return-e[1]},toQueryString:function(e){return"-"+o.toQueryString(e[1])}},ACCESSOR:{code:".",getDataType:function(e,t){var r,i;if(r=this.toQueryString(e),null==(i=a.find(t,(function(e){return e.getId()===r}))))throw new Error("No input stream field found with ID '"+r+"'.");return i.getType()},getValue:function(){return[branch[1],branch[2]]},toQueryString:function(e){return n.buildFieldId(e[1][1],e[2][1])}},NULL:{code:"null",dataType:void 0,getValue:function(e){return null},toQueryString:function(e){return"null"}}})},44887:(e,t,r)=>{var i;(i=r(78976)).parser.yy.parseError=function(e,t){throw{message:e,data:t}},e.exports={parse:function(e){return i.parser.parse(e)}}},50482:(e,t,r)=>{var i,s,n,o,a,l={}.hasOwnProperty;i=r(18111),n=r(81634).Z,a=r(90554).deepExtend,s=r(68776).Z,o=r(29946),e.exports=function(e){function t(){this._queryOptions={LIMIT_VALUES_QUERY:100,LIMIT_GROUP_QUERY:2e3,LIMIT_SELECTOR_QUERY:1e3,LIMIT_EXTERNAL_LINK_QUERY:1e3}}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype}(t,e),t.prototype.updateConfig=function(e){var t;return null!=(null!=e&&null!=(t=e.core)?t.gates:void 0)&&delete o.core.gates,a(o,e)},t.prototype.isCmsMode=function(){return o.core.cmsMode},t.prototype.getAppUser=function(){return null!=this._user?this._user:this._user=new n(o.app.appUser)},t.prototype.getBrowserName=function(){return o.app.browser.name},t.prototype.getBrowserVersion=function(){return o.app.browser.version},t.prototype.isMobileBrowser=function(){return o.app.browser.isMobile},t.prototype.getCommunityId=function(){return o.core.communityId},t.prototype.hasPermission=function(e){return!!o.core.perms[e.code]},t.prototype.getDatasetDefaultGroupQueryLimit=function(){return this._queryOptions.LIMIT_GROUP_QUERY},t.prototype.getDatasetDefaultValuesQueryLimit=function(){return this._queryOptions.LIMIT_VALUES_QUERY},t.prototype.getSelectorQueryLimit=function(){return this._queryOptions.LIMIT_SELECTOR_QUERY},t.prototype.getExternalLinkQueryLimit=function(){return this._queryOptions.LIMIT_EXTERNAL_LINK_QUERY},t.prototype.getDirectQueryLimit=function(){return o.core.explorer.maxDirectQueryRowLimit},t.prototype.getDatasetDefaultMaxQueryLimit=function(){return o.core.explorer.defaultMaxDatasetRowLimit},t.prototype.getCrossOrigins=function(){return o.core.crossOrigins},t.prototype.getDocumentIdUrl=function(){return o.core.documentImageUrl},t.prototype.getRoutingRootPath=function(){return o.core.routing.rootPath},t.prototype.getSanitizedInitialRoute=function(){return o.core.routing.sanitizedPath},t.prototype.getInitialRouteError=function(){var e;if(null!=(e=o.core.routing.initialRouteError))return new s(e.title,e.message)},t.prototype.getImageUrl=function(){return o.core.imageUrl},t.prototype.getValidImageUrlDomains=function(){return o.core.validImageUrlDomains},t.prototype.getMaxDashboardPages=function(){return o.core.maxDashboardPages},t.prototype.getMaxConditionalFormattingBins=function(){return o.core.maxConditionalFormattingBins},t.prototype.getSLDSIconsPath=function(){return o.core.sldsIconPath},t.prototype.getEclairNGIconsPath=function(){return"/projRes/analytics-platform/img/eclairNG/chartIcons"},t.prototype.getAppRoot=function(){return o.core.appRoot},t.prototype.getResourcePath=function(e){return o.core.resourcesPath+e},t.prototype.getStaticResourcePath=function(){return o.core.staticResourcesPath},t.prototype.getWaveChartsResourcesPath=function(){return o.core.waveChartsResourcesPath},t.prototype.getDefaultTimezone=function(){return o.core.timezone.defaultDashboard},t.prototype.getFinderLeftNavLinks=function(){return o.core.finderLeftNavLinks},t.prototype.getSystemMessages=function(){return o.core.header.systemMessages},t.prototype.getHelpArticleUrl=function(e){return this._resolveTemplate(o.core.helpArticleUrlTemplate,new Map([["ARTICLE",e.path]]))},t.prototype.getDeveloperGuideTopicUrl=function(e,t){return this._resolveTemplate(o.core.developerGuideTopicUrlTemplate,new Map([["GUIDE",e],["TOPIC",t]]))},t.prototype.getSessionId=function(){return o.app.sessionId},t.prototype.getCsrfToken=function(){return o.app.csrfToken},t.prototype.getCryptoKey=function(){var e,t;return t=o.app.cryptoKey,e=new ArrayBuffer(t.length),new Uint8Array(e).set(t),e},t.prototype.getMaxParallelRequests=function(){return o.core.maxParallelRequests},t.prototype.getMaxParallelRequestsForHighConcurrency=function(){return o.core.maxParallelRequestsForHighConcurrency},t.prototype.isInCommunityContext=function(){return o.core.isInCommunityContext},t.prototype.getSitePrefix=function(){return o.core.sitePrefix},t.prototype.isOnConsole=function(){return o.core.isOnConsole},t.prototype.getTrialDaysLeft=function(){return o.core.trialDaysLeft},t.prototype.getTrialUrl=function(){return o.core.trialUrl},t.prototype.getGates=function(){return o.core.gates},t.prototype.isAnalyticsStudioAvailable=function(){return o.app.isAnalyticsStudioAvailable},t.prototype.isCdnEnabled=function(){return o.core.isCdnEnabled},t.prototype.isPerfMode=function(){return o.core.perf.isPerfMode},t.prototype.getMaxLogLineBatchSize=function(){return o.core.logging.maxLogLineBatchSize},t.prototype.getLogLineFlushTimeout=function(){return o.core.logging.flushTimeout},t.prototype.getReleaseNotes=function(){return o.core.learn.releaseNotes},t.prototype.getContinueLearning=function(){return o.core.learn.continueLearning},t.prototype.getGettingStarted=function(){return o.core.learn.gettingStarted},t.prototype.getFormattedQueryServletUrl=function(){return o.core.formattedQueryServletUrl},t.prototype.getUserMenuItems=function(){return o.core.header.userMenu},t.prototype.getSecondaryLinks=function(){return o.core.header.secondaryLinks},t.prototype.getSecondaryMenuItems=function(){return o.core.header.settingsMenu},t.prototype.getHelpMenuItems=function(){return o.core.header.helpMenu},t.prototype.getMaxEdiRows=function(){return o.core.einsteinDiscoveryForReports.ediMaxRows},t.prototype.getMinEdiRows=function(){return o.core.einsteinDiscoveryForReports.ediMinRows},t.prototype.getMaxEdiColumns=function(){return o.core.einsteinDiscoveryForReports.ediMaxColumns},t.prototype.getMinEdiColumns=function(){return o.core.einsteinDiscoveryForReports.ediMinColumns},t.prototype.getRowLevelFormulaLimit=function(){return o.core.rowLevelFormulaLimit},t.prototype.getReportConfig=function(){return o.core.reportConfig},t.prototype._resolveTemplate=function(e,t){var r;return r=e,t.forEach((function(e,t){return r=r.replace(new RegExp("{"+t+"}","g"),e)})),r},t.prototype.isStoriesDirectEnabled=function(){return o.core.einsteinDiscovery.isStoriesDirectEnabled},t.prototype.getOptMaxDecisionValues=function(){return o.core.einsteinDiscovery.optMaxDecisionValues},t.prototype.getOrgNamespace=function(){return o.core.orgInfo.namespace},t.prototype.getOrgId=function(){return o.core.orgInfo.id},t.prototype.getIsOrgSingleCurrency=function(){return o.core.orgInfo.isOrgSingleCurrency},t.prototype.getRecipeExtensions=function(){return o.core.recipeExtensions},t.prototype.getSpecialGroupIdForOrg=function(){return o.core.orgInfo.specialGroupId},t.prototype.getSlowNetworkThreshold=function(){return o.dashboardInspector.performanceRule.slowNetworkThreshold},t.prototype.getSlowQueryThreshold=function(){return o.dashboardInspector.performanceRule.slowQueryThreshold},t.prototype.getNetworkSpeedAssetSize=function(){return o.dashboardInspector.networkSpeedAssetSize},t.prototype.getLightningDashboardsAssetsPath=function(){return o.core.lightningDashboardsAssetsPath},t.prototype.getDefaultQueryCacheTTLInSeconds=function(){return o.core.cache.defaultQueryCacheTTLInSeconds},t.prototype.getExcelDownloadCellLimit=function(){return o.core.orgValues.maxExcelDownloadCells},t}(i)},98381:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/A.0d1d2e962fc11ca1ad01.png"},8987:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/B.a9ca20ced3d92ad22d4b.png"},36046:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/copilot-onboarding.5679e012465fa420bec4.png"},94549:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x1-all.c10f54855a3f03a7ffac.png"},80559:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x1-r1c1.26dc5992bcaec1b7adac.png"},83010:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x1-r1cGT.fe35c3e6b9a41595648e.png"},50961:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x1-rGTc1.4e61e393603b195762e5.png"},42342:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x1-rGTcGT.bddca3976bc38061a543.png"},84062:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x2-all.247dc284214eb7ce0722.png"},32475:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x2-r1c1.6f37d88432e4e9ba202c.png"},8254:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x2-r1c2.6f4ed50cd9cfe9f453bb.png"},46118:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x2-r1cGT.c8312649b7dc532a0282.png"},4242:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x2-rGTc1.a040fb819e9bf7f8a297.png"},28512:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x2-rGTc2.6b41c0c9eee51be271a6.png"},98254:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix1x2-rGTcGT.ff96021fb5d1884cd4c0.png"},4298:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x1-all.a523ccda594b68ac484d.png"},45233:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x1-r1c1.7c21e8cf9eff6e444441.png"},81337:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x1-r1cGT.1024b824382d54db831e.png"},439:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x1-r2c1.5ad438283c6a366b52ff.png"},81266:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x1-r2cGT.fbbe3822f4ac44f3f769.png"},42704:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x1-rGTc1.e0c868c64415296038c7.png"},32382:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x1-rGTcGT.3ba15aebffca83c1681b.png"},21006:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-all.824766724813ea803598.png"},11159:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-r1c1.ff59faa1616f56aad06c.png"},41008:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-r1c2.32bf66cae4a36758451f.png"},43325:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-r1cGT.ede4ff08d7dc9ddcf72c.png"},34847:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-r2c1.4296107441b498ca3d8a.png"},10330:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-r2c2.8940c0bf901665b73667.png"},96260:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-r2cGT.9a6aa5db152e394af630.png"},53635:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-rGTc1.e54fc1c2151eda17ca4d.png"},55727:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-rGTc2.fb5cb59d0191fdf97a68.png"},59021:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/matrix2x2-rGTcGT.a69cf91ba8b6063984d8.png"},85565:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx1-all.d2feb5375df2d22dca16.png"},67842:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx1-grand.0e814a65f22ddccbeabd.png"},66316:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx1-sub1.0b4c48db6c841b509946.png"},16686:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx2-all.7165371fe60abcb0c33a.png"},73816:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx2-grand.d0ca5831c16c5275d486.png"},27833:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx2-sub1.f77d73127ce7068cae68.png"},13489:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx2-sub2.9cbb1407c2bc6e48bdaf.png"},93333:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx3-all.c817dad23984b7302f08.png"},16099:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx3-grand.f7d642365a37babb7d88.png"},64924:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx3-sub1.76e5c2794a55fec10362.png"},54524:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx3-sub2.431581b7c3bd42bfe2b9.png"},75657:(e,t,r)=>{"use strict";e.exports=r.p+"images/LightningReport/assets/images/sumx3-sub3.6324c5c86f62279886a9.png"},16582:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/icons/sprite.analytics.e731a74db977c0f5feee.svg"},4033:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/my-app.2156a75e62bb48f4d50c.png"},22766:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/report/empty-state-lake-mountain.100645001711ee9b67f7.svg"},72492:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-application.42f598716e392594f1e2.png"},72927:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-bubblemap.4bb374eb8eb7a1c1d093.png"},80458:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-bullet.9af9a1f8d1cea87d0f11.png"},30992:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-calheatmap.2a13fc747a1e02e2baf7.png"},49718:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-choropleth.e61163874b46b7d1f3b2.png"},67273:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-combo.dd24687229a4b0129a22.png"},70907:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-comparisontable.f57f60e9da263dc728db.png"},92886:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-customtable.fb52de1e1e6b5e7a5215.png"},93724:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-flatgauge.b31deadb194fd0dbf29d.png"},65184:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-funnel.7a0f72560de006649f62.png"},92547:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-gauge.7f81bd4e3c608908aaf9.png"},28477:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-geomap.97858742d0bc64892073.png"},63341:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-hbar.0a20381e3ada6877cd72.png"},64189:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-hdot.abc0f3ead615baf9df2f.png"},6387:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-heatmap.a41f47cd39b220619a8a.png"},99133:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-legend.d4bb879ef3f05a9533ef.png"},39074:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-line.32bbb8bdd164cc51cec5.png"},32945:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-map.e61163874b46b7d1f3b2.png"},7044:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-matrix.00815d97e2d545dd61f9.png"},65179:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-metric.7c2fd176709b21365033.png"},69640:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-metricsradar.b4a8d10fe1f436b02db9.png"},32588:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-origami.6972afb464ea13ec9fcb.png"},53085:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-parallelcoords.3e06ae6e697402a88ab7.png"},62987:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-pie.773608348fa3140d0124.png"},40130:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-pivottable.7ba6933c84b94ea5caab.png"},27440:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-polargauge.66918c1cc97858fe8754.png"},45382:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-pyramid.85d4fe53a1c2a5b76480.png"},36079:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-rating.1cbcd6672f8a19a344b9.png"},17719:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-sankey.5634e41dcb292110a690.png"},40494:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-scatter.ed4984c91d2832e72ea3.png"},82225:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-stackhbar.355a405cd7f15afefdf6.png"},99834:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-stackpyramid.08daadc9616624c9adc2.png"},60179:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-stackvbar.61c8ae4daad2609ca5a0.png"},97618:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-stackwaterfall.d7ac834c95ddb0bbcfb0.png"},9551:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-time-bar.9713f66ff6f4e7dbb0f7.png"},59096:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-time-combo.cfacdca17f205c1adb3f.png"},57875:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-time-line.57a3b65d529247c4eb40.png"},80522:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-time.60a9083956be6b6c0708.png"},20725:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-treemap.3f4d4266378cc46d5942.png"},98242:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-valuestable.fe3cedea6f1089317a63.png"},71589:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-vbar.a10447d7070ecacc4803.png"},6267:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-vdot.b2310d93d96e61375866.png"},32495:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart-waterfall.362c66dc11928f95fa8f.png"},9557:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-chart.cf7047cec7a74cb1960f.png"},48605:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-component.f507359801363981a830.png"},80038:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-dashboard.b4cfcfeb216a60dce293.png"},20517:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-edgemart-csv.acb3ab7c48058536c61b.png"},46439:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-edgemart.327fd66e48411eb879a7.png"},35861:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-flow.774bc7695ca22817f57e.png"},34146:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/thumbs/thumb-report.56ad81e30deb0e597e7a.png"},75263:(e,t,r)=>{"use strict";e.exports=r.p+"images/WaveCommon/static/images/user.cf3859a78c62a05eb675.png"},44809:()=>{},29795:()=>{},36741:()=>{},77572:()=>{},62060:()=>{},35423:()=>{},77832:()=>{},24869:()=>{},93654:()=>{},2057:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(8429);class s extends Error{static DEFAULT_ERROR_CODE="DEFAULT_ERROR_CODE";constructor(e,t,r){super(e||i.Z.getLabel("ErrorMsg","internalServerError")),this.errorCode=t||s.DEFAULT_ERROR_CODE,this.statusCode=r}shard(e){const t=new s(e,this.errorCode,this.statusCode);return t.stack=this.stack,t}}},54871:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var i=r(96486),s=r(2057);class n extends s.Z{constructor(e,t){let r,s,n;Array.isArray(t)?(r=(0,i.get)(t,["0","errorCode"]),s=(0,i.get)(t,["0","message"]),n=(0,i.get)(t,["0","description"])):(r=(0,i.get)(t,["errorCode"]),s=(0,i.get)(t,["errorMsg"])||(0,i.get)(t,["message"]),n=(0,i.get)(t,["errorDescription"])),s&&n&&(s+=` ${n}`),super(s||e.statusText,r,e.status),this.responseJson=t}}class o extends s.Z{constructor(e){super(e,"NETWORK_ERROR",-1)}}class a extends s.Z{static ERROR_CODE="ABORT_ERROR";constructor(e){super(e,a.ERROR_CODE,-1)}}var l=r(14079),u=r(52115);class d{_nextPermitId=0;_issuedPermits=new Map;_requestedPermits=new l.Z;constructor(e){this._size=e}async getPermit(){if(this._issuedPermits.size>=this._size){const e=new u;this._requestedPermits.add(e),await e.promise()}const e=this._nextPermitId++,t={id:e,release:()=>{this._issuedPermits.delete(e),this._requestedPermits.poll()?.resolve()}};return this._issuedPermits.set(e,t),t}async flush(){for(;this._issuedPermits.size>0;)for(const e of this._issuedPermits.values()){const t=this._requestedPermits.peek()[0];e.release(),null!=t&&await t.promise()}}}var c=r(57244);class h{_nextPermitId=0;_issuedPermits=new Map;constructor(e,t){this._lowConcurrencyPermitPool=new d(e),this._combinedPermitPool=c.Z.has(c.Z.ORG_HAS_HIGH_UI_REQUEST_CONCURRENCY)?new d(t):void 0}async getPermit(e){let t,r;e?e&&null==this._combinedPermitPool&&(t=await this._lowConcurrencyPermitPool.getPermit()):t=await this._lowConcurrencyPermitPool.getPermit(),null!=this._combinedPermitPool&&(r=await this._combinedPermitPool.getPermit());const i=this._getNextPermitId(),s={id:i,release:()=>{t?.release(),r?.release(),this._issuedPermits.delete(i)}};return this._issuedPermits.set(i,s),s}async flush(){for(;this._issuedPermits.size>0;)for(const e of this._issuedPermits.values())e.release()}_getNextPermitId(){return this._nextPermitId++}}class p extends h{constructor(e,t){super(e,t),this._permitPoolSize=Math.max(e,t)}_getNextPermitId(){const e=new Set(this._issuedPermits.keys()),t=(0,i.range)(this._permitPoolSize).filter((t=>!e.has(t)));return t.length>0?t[0]:-1}}const g=new class{_requestFilters=[];setRequestFilters(e){return this._requestFilters=e,this}setLockBasedRateLimiting(e){return this._useLockBasedRateLimiting="locks"in window.navigator&&e,this}setMaxParallelRequests(e,t){return this._requestPermitPool=this._useLockBasedRateLimiting?new p(e,t):new h(e,t),this}setLogLockName(e){return this._logLockName=e,this}async fetch(e,t={}){const r=await this.fetchResponse(e,t);if(204!==r.status)return r.headers.get("Content-Type")?.includes("application/json")?r.json():r.text()}async fetchResponse(e,t={}){const r=!!t.isHighConcurrencyEligible&&c.Z.has(c.Z.ORG_HAS_HIGH_UI_REQUEST_CONCURRENCY),i=null!=this._requestPermitPool?await this._requestPermitPool.getPermit(r):void 0;return null!=i&&this._useLockBasedRateLimiting?window.navigator.locks.request(`fetch_lock_${i.id}`,(async r=>{const s=t.loggingContext;return s&&this._logLockName&&s.tags.push(r.name),this._fetchResponse(e,t,i)})):this._fetchResponse(e,t,i)}async _fetchResponse(e,t,r){const i=this._requestFilters.map((r=>r.pre(e,t.loggingContext)));let s,l,u=-1;try{let r;try{r=await this._fetchRawResponse(e,t),s=r.headers.get("X-SFDC-Request-Id")??void 0,u=r.status}catch(e){throw"AbortError"===e.name?new a(e.message):new o(e.message)}if(r.ok||304===r.status)return r;throw new n(r,await r.json())}catch(e){throw l=e.errorCode,e}finally{r?.release();for(let e=this._requestFilters.length-1;e>=0;e--)this._requestFilters[e].post(s,u,l,i[e])}}async _fetchRawResponse(e,{method:t,body:r,headers:i={},cache:s="no-cache",keepalive:n,signal:o}={}){return fetch(e,{method:t,body:r,headers:i,cache:s,keepalive:n,signal:o})}}},88652:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("GET",new s).add("POST",new s).add("PUT",new s).add("PATCH",new s).add("DELETE",new s).add("HEAD",new s).finish()},57003:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},12470:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},50656:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new(r(9502))(r(39947),new(r(3479).Z))},3479:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(61506),s=r(7931);class n{getOrPutPromiseObject(e,t){const r=i.Z.get(s),n=r.getResult(e);if(n)return n;const o=t();return r.addResult(e,o),o}getOrPutPromiseObjectWithNoEviction(e,t){const r=i.Z.get(s),n=r.getNoEvictionResult(e);if(n)return n;const o=t();return r.addNoEvictionResult(e,o),o}getOrPutPromiseObjectWithCacheHitCallback(e,t,r){const n=i.Z.get(s),o=n.getResult(e);if(o)return o.then((e=>(r(e),e)));const a=t();return n.addResult(e,a),a}getOrPutResultObject(e,t){const r=i.Z.get(s),n=r.getResult(e);if(n)return Promise.resolve(n);return t().then((t=>(r.addResult(e,t),t)))}getOrPutSerializedResultWithCacheHitCallback(e,t,r){const n=i.Z.get(s),o=n.getResult(e);if(o){const e=JSON.parse(o);return r(e),Promise.resolve(e)}return t().then((t=>(n.addResult(e,JSON.stringify(t)),t)))}clearCacheForKey(e){i.Z.get(s).clearResult(e)}}},64031:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("API_CONCURRENT_USER_QUERY_LIMIT_EXCEEDED","402",new s).add("CONCURRENT_USER_DOWNLOADS_LIMIT_EXCEEDED","436",new s).add("EXCEL_DOWNLOAD_CELLS_LIMIT_EXCEEDED","437",new s).add("EXTERNAL_CONNECTOR_ERROR","450",new s).add("CONNECTOR_INVALID_TOKEN_ERROR","458",new s).add("MISSING_PERM","720",new s).finish()},40167:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._reportMetadata=e}static PURE_METADATA=new Set(["showSubtotals","showGrandTotal"]);scrape(e,t){if(!i.PURE_METADATA.has(e))return t}patch(e){i.PURE_METADATA.forEach((t=>{t in e.reportMetadata&&(e.reportMetadata[t]=this._reportMetadata[t])}))}}},99095:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(640),s=r(88652),n=r(57950),o=r(54871),a=r(52115),l=r(14079);const u=new class{_batchQueue=new l.Z(25);batchRequest(e,t){const r=new a;if(null!=t.body&&"string"!=typeof t.body)throw new Error("Invalid request body on batched request.");return this._batchQueue.add({path:e,options:t,def:r}),25===this._batchQueue.size()&&this.flushRequest(),r.promise()}async flushRequest(){if(0===this._batchQueue.size())return;const e=[],t=[];let r=this._batchQueue.poll();for(;null!=r;){e.push(r.def);const i={method:r.options.method??s.Z.GET.name,url:r.path};null!=r.options.body&&(i.richInput=JSON.parse(r.options.body)),t.push(i),r=this._batchQueue.poll()}return this._makeBatchRequest(e,t)}async _makeBatchRequest(e,t){const r=await o.Z.fetch(n.ZP.buildPath("connect/batch"),{method:s.Z.POST.name,body:JSON.stringify({batchRequests:t}),headers:{"Content-Type":"application/json","X-Chatter-Entity-Encoding":"false"}});return e.map(((e,t)=>{const i=r.results[t];return i.statusCode>=400?e.reject({responseJson:i.result}):e.resolve(i.result)}))}};class d extends i.Z{_buildFullPath(e){return n.ZP.buildPath(e)}_makeRequest(e,{shouldBatch:t=!1,shouldFlush:r=!1,...i}={}){const s=this._makeAjaxOptions(e,i);if(t){const t=u.batchRequest(e,s);return r&&u.flushRequest(),t}return o.Z.fetch(e,s)}_fetchResponse(e,t){return o.Z.fetchResponse(e,this._makeAjaxOptions(e,t))}_disableConnectEncoding(e){return!0}_makeAjaxOptions(e,{method:t=s.Z.GET,body:r,customHeaders:i={},keepAlive:n,loggingContext:o,signal:a,isHighConcurrencyEligible:l,cache:u}={}){return{method:t.name,headers:{...i,...this._disableConnectEncoding(e)?{"X-Chatter-Entity-Encoding":"false"}:{},...null==r||"undefined"!=typeof FormData&&r instanceof FormData?{}:{"Content-Type":"application/json"}},body:r,keepalive:n,loggingContext:o,signal:a,isHighConcurrencyEligible:l,cache:u}}}},57950:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>s,_C:()=>i});const i=61;const s=new class{#_="/";#f=i;getAppRoot(){return this.#_}setAppRoot(e){return this.#_=e,this}setApiVersion(e){return this.#f=e,this}buildPath(e,{appRoot:t=this.#_,apiVersion:r=this.#f}={}){return`${t}services/data/v${r}.0/${e}`}}},12450:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(99095),s=r(88652),n=r(32898);const o=/folders|smartdatadiscovery|powerinsights/;class a extends i.Z{getMruReports(){return this._makeRequest(this._buildFullPath("analytics/reports"))}getReport(e){return this._makeRequest(this._buildFullPath(`analytics/reports/${e}`))}runReport(e,t,r=!1,i=!1,n=!1,o="",a=!1,l=!0,u=!1){const d=i,c=`analytics/reports/${e}?isUpdateMru=${l?"true":"false"}&isPreview=${String(r)}&createReportInstance=${String(i)}&fastCsv=${String(d)}&includeChartData=${String(n)}&skipReportResult=${String(a)}&isDataCloud=${String(u)}`;return t?this._makeRequest(this._buildFullPath(c),{method:s.Z.POST,customHeaders:{ExecutionOrigin:o},body:JSON.stringify({reportMetadata:t})}):this._makeRequest(this._buildFullPath(c))}deleteDashboard(e){return this._makeRequest(this._buildFullPath(`analytics/dashboards/${e}?updateMru=true&isAnalyticsApp=true`),{method:s.Z.DELETE})}loadReports(){return this._makeRequest(this._buildFullPath("analytics/reports"))}loadReportTypes(){return this._makeRequest(this._buildFullPath("analytics/reportTypes"))}getRecentlyCreatedReportsUsingReportType(e,t,r,i){const s=`analytics/report-types/${e}/recent-reports?isCurrentUser=${String(t)}&pageSize=${r}&offset=${i}`;return this._makeRequest(this._buildFullPath(s))}getReportType(e){return this._makeRequest(this._buildFullPath(`analytics/reportTypes/${e}`))}updateReportTypeVisibility(e,t){return this._makeRequest(this._buildFullPath(`analytics/report-types/${t}/visibility`),{method:s.Z.POST,body:JSON.stringify({hidden:e})})}getRecentReportTypes(){return this._makeRequest(this._buildFullPath("analytics/report-types/recent/by-user"),{method:s.Z.GET})}getJoinedReportTypes(e,t){const r=`analytics/reportTypes/${e}/joined-metadata`;return this._makeRequest(this._buildFullPath(r),{method:s.Z.POST,body:JSON.stringify({reportTypes:t})})}getCommonObjects(e,t){const r=`analytics/reportTypes/${e}/common-objects`;return this._makeRequest(this._buildFullPath(r),{method:s.Z.POST,body:JSON.stringify({reportTypes:t})})}getCrossFilterRelatedObjectFields(e,t){return this._makeRequest(this._buildFullPath(`analytics/reportTypes/${e}/related-objects/${t}`))}queryReport(e,t=!1,r=!1,i="rpgd",n=!1){const o=`analytics/reports/query?isPreview=${String(t)}&includeChartData=${String(r)}&skipReportResult=${String(n)}`;return this._makeRequest(this._buildFullPath(o),{method:s.Z.POST,customHeaders:{ExecutionOrigin:i},body:JSON.stringify({reportMetadata:e})})}saveReport(e,t){return null!=e?this._makeRequest(this._buildFullPath(`analytics/reports/${e}`),{method:s.Z.PATCH,body:JSON.stringify({reportMetadata:t})}):this._makeRequest(this._buildFullPath("analytics/reports"),{method:s.Z.POST,body:JSON.stringify({reportMetadata:t})})}getAllSObjects(){return this._makeRequest(this._buildFullPath("sobjects"),{method:s.Z.GET})}getSObjectFields(e){return this._makeRequest(this._buildFullPath(`sobjects/${e}/describe`),{method:s.Z.GET})}getReportTypesbySObject(e,t){return this._makeRequest(this._buildFullPath("autonomous-analytics/semantic-graph/sobject/report-type/referenced-by"),{method:s.Z.POST,body:JSON.stringify({assets:e,limit:100,pageNumber:t})})}getReportTypesbyFields(e,t){return this._makeRequest(this._buildFullPath("autonomous-analytics/semantic-graph/sobject-field/report-type/referenced-by"),{method:s.Z.POST,body:JSON.stringify({assets:e,limit:100,pageNumber:t})})}searchUsers(e,t,r){return this._makeRequest(this._buildFullPath(`analytics/users?q=${e}&relationship=${t}&limit=${r}`),{method:s.Z.GET})}create(e){return this._makeRequest(this._buildFullPath("analytics/dashboards"),{method:s.Z.POST,body:JSON.stringify(e)})}clone(e,t){return this._makeRequest(this._buildFullPath(`analytics/dashboards?cloneId=${e}`),{method:s.Z.POST,body:JSON.stringify(t)})}changeDashboardOwner(e){return this._makeRequest(this._buildFullPath("analytics/change-owner"),{method:s.Z.PATCH,body:JSON.stringify(e)})}refresh(e,t){const r=`analytics/dashboards/${e}`,i=this._appendDashboardParameters(r,t);return this._makeRequest(this._buildFullPath(i),{method:s.Z.PUT})}getReportFields(e,t){return this._makeRequest(this._buildFullPath(`analytics/reports/${e}/fields`),{method:s.Z.POST,body:JSON.stringify(t)})}saveDashboard(e,t,r){return this._makeRequest(this._buildFullPath(`analytics/dashboards/${e}?isStickyFilterSave=${String(r)}`),{method:s.Z.PATCH,body:t})}getFilterOperators(){return this._makeRequest(this._buildFullPath("analytics/filteroperators"),{method:s.Z.GET})}validateFilterOptions(e){return this._makeRequest(this._buildFullPath("analytics/dashboards/filteroptionsanalysis"),{method:s.Z.POST,body:e})}loadComponents(e,t){return this._makeRequest(this._buildFullPath(`analytics/dashboards/${e}`),{method:s.Z.POST,body:JSON.stringify(t)})}getDashboardStatus(e,t){const r=`analytics/dashboards/${e}/status`,i=this._appendDashboardParameters(r,t);return this._makeRequest(this._buildFullPath(i))}describeDashboard(e,t){const r=`analytics/dashboards/${e}/describe?updateMru=true&isAnalyticsApp=true`,i=this._appendDashboardParameters(r,t);return this._makeRequest(this._buildFullPath(i))}describeReport(e,t=!0){return this._makeRequest(this._buildFullPath(`analytics/reports/${e}/describe?isUpdateMru=${t?"true":"false"}`))}deleteReport(e){return this._makeRequest(this._buildFullPath(`analytics/reports/${e}`),{method:s.Z.DELETE})}describeFolder(e){return this._makeRequest(this._buildFullPath(`folders/${e}`))}searchColumnTextValue(e,t,r,i){const n=`analytics/reportTypes/${e}/text-values/${t}?searchTerm=${r}`;return this._makeRequest(this._buildFullPath(n),{method:s.Z.POST,body:JSON.stringify({reportMetadata:i})})}getAggregates(e,t,r){const i=`analytics/reports/${e}/aggregates`;return this._makeRequest(this._buildFullPath(i),{method:s.Z.POST,body:JSON.stringify({aggregateKey:t,limit:r})})}getFormulaFunctions(){return this._makeRequest(this._buildFullPath("tooling/query?q=SELECT Name, categoryid, description, label, exampleString FROM FormulaFunction WHERE CategoryId IN ('MATH', 'LOGICAL', 'REPORT_SUMMARIES', 'DATE_TIME', 'TEXT') AND Name NOT IN ('DISTANCE', 'GEOLOCATION', 'ISCLONE', 'ISNEW', 'PRIORVALUE') ORDER BY Name"))}getFormulaFunctionCategories(){return this._makeRequest(this._buildFullPath("tooling/query?q=SELECT Name, label FROM FormulaFunctionCategory WHERE durableId IN ('MATH', 'LOGICAL', 'REPORT_SUMMARIES', 'DATE_TIME', 'TEXT')"))}getAnalyses(e,t){let r="smartdatadiscovery/analyses";return null!=e&&(r=(0,n.appendQueryString)(r,`containerId=${e}`)),null!=t&&(r=(0,n.appendQueryString)(r,`sourceType=${t}`)),this._makeRequest(this._buildFullPath(r))}getAnalysis(e){return this._makeRequest(this._buildFullPath(`smartdatadiscovery/analyses/${e}`))}sendPayloadToProxy(e){return this._makeRequest(this._buildFullPath("smartdatadiscovery/proxy"),{method:s.Z.POST,body:JSON.stringify(e)})}postAnalysis(e){return this._makeRequest(this._buildFullPath("smartdatadiscovery/analyses/"),{method:s.Z.POST,body:JSON.stringify(e)})}deleteAnalysis(e){return this._makeRequest(this._buildFullPath(`smartdatadiscovery/analyses/${e}`),{method:s.Z.DELETE})}getDomainSetEntities(e,t){return this._makeRequest(this._buildFullPath(`analytics/dashboards/domainEntities?entityApiName=${e}&fieldName=${t}`))}getMRURecords(e,t){return this._makeRequest(this._buildFullPath(`analytics/dashboards/entity-mru-records?entityApiName=${e}&pageSize=${t}`))}patchAnalysis(e,t){return this._makeRequest(this._buildFullPath(`smartdatadiscovery/analyses/${e}`),{method:s.Z.PATCH,body:JSON.stringify(t)})}postPowerInsightsLogs(e){return this._makeRequest(this._buildFullPath("powerinsights/log"),{method:s.Z.POST,body:JSON.stringify({logLines:e})})}_disableConnectEncoding(e){return o.test(e)}_appendDashboardParameters(e,t){if(!t)return e;let r=e;if(null!=t.filters)for(const[e,i]of Object.entries(t.filters)){const t=i;r=(0,n.appendQueryString)(r,`${e}=${t}`)}return null!=t.runningUser&&(r=(0,n.appendQueryString)(r,`runningUser=${encodeURIComponent(String(t.runningUser))}`)),null!=t.useReportInstance&&(r=(0,n.appendQueryString)(r,`useReportInstance=${encodeURIComponent(String(t.useReportInstance))}`)),null!=t.markStale&&(r=(0,n.appendQueryString)(r,`markStale=${encodeURIComponent(String(t.markStale))}`)),null!=t.networkId&&(r=(0,n.appendQueryString)(r,`networkId=${encodeURIComponent(String(t.networkId))}`)),null!=t.loadComponentProperties&&(r=(0,n.appendQueryString)(r,`loadComponentProperties=${encodeURIComponent(String(t.loadComponentProperties))}`)),r}}const l=new a},79368:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},57929:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},72236:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},93640:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{constructor({allowLimitedAssetAccess:e=!0}){super(),this.allowLimitedAssetAccess=e}}s.add("ANALYTICS_STUDIO","studio",new s({allowLimitedAssetAccess:!1})).add("ANALYTICS_TAB","tab",new s({allowLimitedAssetAccess:!1})).add("EMBEDDED","embedded",new s({allowLimitedAssetAccess:!0})).add("EMBEDDED_IN_COMMUNITY","embeddedInCommunity",new s({allowLimitedAssetAccess:!0})).add("MOBILE_NATIVE","mobileNative",new s({allowLimitedAssetAccess:!0})).add("REPORT_BUILDER","reportBuilder",new s({allowLimitedAssetAccess:!1}))},85188:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor({appInstanceId:e,appStartTime:t,analyticsMode:r,pageContext:i,embeddedContext:s,referrer:n,staticResourceMode:o,isS1Mobile:a=!1}){this.appInstanceId=e,this.appStartTime=t,this.analyticsMode=r,this.pageContext=i,this.embeddedContext=s,this.referrer=n,this.staticResourceMode=o,this.isS1Mobile=a}}},10444:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(8429);class n extends i.Z{static getDefaultValue(){return this.OPEN_IN_STUDIO}constructor(e){super(),this._labelName=e}get label(){if(null==this._labelName)throw new Error(`No label name for "${this.code}".`);return s.Z.getLabel("Assets",this._labelName)}getAssistiveText(e){return this._labelName?s.Z.getLabel("Assets",this._labelName+"AssistiveText",e):""}}n.add("OPEN_IN_STUDIO","OPEN_IN_STUDIO",new n("openInStudio")).add("OPEN_IN_TAB","OPEN_IN_TAB",new n("openInTab")).add("HIDE","HIDE",new n).finish()},57234:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("AURA","aura",new s).add("LWC","lwc",new s).add("LWR","lwr",new s).add("VISUALFORCE","vf",new s).add("ALOHA","aloha",new s).add("LIGHTNING_OUT","lightningOut",new s).add("IOS","iOS",new s).add("ANDROID","Android",new s).finish()},8160:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{static fromUrlParam(e){if(e&&s.hasCode(e))return s.fromCode(e)}}s.add("CHATTER_FEED","chatter_feed",new s).add("SUBSCRIPTION","subscription",new s).add("NOTIFICATION","notification",new s).add("ANNOTATION","annotation",new s).add("LIGHTNING_DATA_MANAGER","data_manager",new s).add("D360_LIGHTNING_DATA_MANAGER","d360_data_manager",new s).add("HEADLESS_RENDERER","headless_renderer",new s).add("NOTIFICATION_IN_SLACK","notification_in_slack",new s).add("SUBSCRIPTION_IN_SLACK","subscription_in_slack",new s).add("ASSET_IN_SLACK","asset_in_slack",new s).add("WATCH","watch",new s).finish()},24426:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(2057);class s extends i.Z{constructor(e){super(e.message,e.errorCode,e.statusCode)}}},51412:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._cache=new Map,this._size=0,this._hits=0,this._misses=0,e&&this.setLimit(e)}put(e,t){let r=this._cache.get(e);return r?(r.value=t,this._remove(r)):r={key:e,value:t},this._insert(r).value}shift(){return this._remove(this._head)}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);if(t)return this._hits++,this._remove(t),this._insert(t).value;this._misses++}getOrPut(e,t){const r=this.get(e);return null!=r?r:this._insert({key:e,value:t()}).value}delete(e){const t=this._cache.get(e);if(t)return this._remove(t)}flush(){return delete this._head,delete this._tail,this._size=0,this._cache=new Map,this}keys(){let e=this._head;const t=[];for(;e;){const{key:r}=e;e=e.newer,t.push(r)}return t}setLimit(e){this._limit=e;let t=this._size-e;if(t>0)for(;--t;)this.shift();return this}clone(){const e=new i(this._limit);let t=this._head;for(;t;)e.put(t.key,t.value),t=t.newer;return e}_remove(e){if(e)return this._cache.delete(e.key),e.newer?e.newer.older=e.older:this._tail=e.older,e.older?e.older.newer=e.newer:this._head=e.newer,this._size--,e}_insert(e){return this._cache.set(e.key,e),this._tail?(this._tail.newer=e,e.older=this._tail):this._head=e,delete e.newer,this._tail=e,this._size===this._limit&&this._remove(this._head),this._size++,e}}},23561:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{_list=[];_map=new Map;constructor(e=!1){this._ensureUnique=e}put(e,t,r=!1){const i=this._map.get(e);if(this._ensureUnique&&null!=i&&!r)throw new Error("Existing value with key.");const s={key:e,value:t};return this._map.set(e,s),null!=i?this._list.splice(this._list.indexOf(i),1,s):this._list.push(s),i?i.value:void 0}get(e){const t=this._map.get(e);return t?t.value:void 0}getStrict(e){const t=this._map.get(e);if(!t)throw new Error("No value found for key.");return t.value}getValueAt(e){return this._getEntryAt(e).value}getKeyAt(e){return this._getEntryAt(e).key}getValues(){return this._list.map((e=>e.value))}eachValue(e,t){for(const r of this._list)if(!e(r.value,r.key,t))break}getKeys(){return this._list.map((e=>e.key))}eachKey(e,t){for(const r of this._list)if(!e(r.key,t))break}getIndex(e){let t=0,r=-1;for(const i of this._list){if(i.value===e){r=t;break}t++}return r}pop(){const e=this._list.pop();if(e)return this._map.delete(e.key),e.value}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this._list.splice(this._list.indexOf(t),1),t.value}containsKey(e){return this._map.has(e)}containsValue(e){return-1!==this.getIndex(e)}size(){return this._list.length}isEmpty(){return!this._list.length}_getEntryAt(e){const t=this._list[e];if(!t)throw new Error(`No entry found at index ${e}.`);return t}}},1607:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(57446);class s{static kv(){return new s(!0)}constructor(e){this._tos=new i.Z,this._froms=new i.Z,this._defaultValue=e}put(e,t,r){if(this.has(e,t))throw new Error(`From '${String(e)}' to '${String(t)}' already exists.`);let s;if(null!=r)s=r;else{if(null==this._defaultValue)throw new Error("Can't set null value without a default value.");s=this._defaultValue}return this._tos.getOrSet(e,(()=>new i.Z)).set(t,s),this._froms.getOrSet(t,(()=>new i.Z)).set(e,s),this}getOptional(e,t){return this._tos.get(e).flatMap((e=>e.get(t)))}get(e,t){return this.getOptional(e,t).get()}has(e,t){return this.getOptional(e,t).map((()=>!0)).getOrElse((()=>!1))}hasFrom(e){return this._tos.has(e)}hasTo(e){return this._froms.has(e)}remove(e,t){if(!this.has(e,t))throw new Error(`From '${String(e)}' to '${String(t)}' does not exist.`);const r=this.get(e,t);return this._tos.get(e).forEach((e=>{e.delete(t)})),this._froms.get(t).forEach((t=>{t.delete(e)})),r}removeTo(e){return this._froms.get(e).map((t=>Array.from(t.map(((t,r)=>this.remove(t,e))).values()))).getOrElse((()=>[]))}removeFrom(e){return this._tos.get(e).map((t=>Array.from(t.map(((t,r)=>this.remove(e,t))).values()))).getOrElse((()=>[]))}getToMap(e){return this._tos.get(e).map((e=>{const t={};return e.forEach(((e,r)=>{t[e]=r})),t})).getOrElse((()=>({})))}getTos(e){return this._tos.get(e).map((e=>Array.from(e.keys()))).getOrElse((()=>[]))}getTosWithValue(e){return this._tos.get(e).map((e=>Array.from(e.entries()))).getOrElse((()=>[]))}getAllTos(){return Array.from(this._froms.keys())}getFroms(e){return this._froms.get(e).map((e=>Array.from(e.keys()))).getOrElse((()=>[]))}getFromsWithValue(e){return this._froms.get(e).map((e=>Array.from(e.entries()))).getOrElse((()=>[]))}getAllFroms(){return Array.from(this._tos.keys())}getPairs(){const e=[];return this._tos.forEach(((t,r)=>{r.forEach(((r,i)=>{e.push({from:t,to:r})}))})),e}reduceFroms(e){return this._tos.map(((t,r)=>e(r.entries())))}reduceTos(e){return this._froms.map(((t,r)=>e(r.entries())))}}},14079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e=1/0){this._max=e,this._queue=[]}add(e){if(!this.offer(e))throw new Error(`Queue max of ${this._max} reached.`);return this}offer(e){return!(this.size()>=this._max)&&(this._queue.push(e),!0)}poll(){return this._queue.splice(0,1)[0]}peek(e=1){return this._queue.slice(0,e)}size(){return this._queue.length}findIndex(e){return this._queue.findIndex(e)}remove(e){if(e>=this.size())throw new Error(`Queue element at index ${e} does not exist.`);return this._queue.splice(e,1)[0]}removeMatching(e){const t=[];for(let r=this._queue.length-1;r>=0;r--)e(this._queue[r])&&t.push(this._queue.splice(r,1)[0]);return t.reverse()}}},31436:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e=1/0){this._max=e,this._stack=[]}push(e){if(this._stack.push(e),this._stack.length>this._max)return this._stack.shift()}pop(){return this._stack.pop()}drain(){const e=this._stack;return e.reverse(),this._stack=[],e}peek(e=1){const t=this._stack.slice(-e);return t.reverse(),t}size(){return this._stack.length}isEmpty(){return 0===this.size()}copy(){const e=new i(this._max),t=this.peek(this._max);for(let r=t.length-1;r>=0;r--)e.push(t[r]);return e}}},49655:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(23561),s=r(96486);class n{constructor(e=new i.Z(!0)){this._nodes=e}getNode(e){const t=this._nodes.get(e);if(!t)throw new Error(`No node found with id "${e}".`);return t}hasNode(e){return this._nodes.containsKey(e)}getNodes(){return this._nodes.getValues()}getNumNodes(){return this._nodes.size()}getRootNodes(){return this.getNodes().filter((e=>e.isRoot()))}getLeafNodes(){return this.getNodes().filter((e=>e.isLeaf()))}getNodeWithLeastSources(){let e;for(const t of this.getNodes())(!e||t.getNumSources()<e.getNumSources())&&(e=t);return e}getNodesByNumSources(){return(0,s.sortBy)(this.getNodes(),(e=>e.getNumSources()))}getAncestors(e,t={}){return this._getAncestorsOrDescendants(e,t,!0)}getDescendants(e,t={}){return this._getAncestorsOrDescendants(e,t,!1)}getEdges(){const e=[];for(const t of this.getNodes())e.push.apply(e,t.getDestinationEdges());return e}_getAncestorsOrDescendants(e,{filterEdges:t=(e=>e)},r){const i=(0,s.castArray)(e),n=new Set(i),o=new Map;for(const e of i){const i=this.getNode(e);for(const[e,s]of this._traverseGraph(i,r,t,n))n.add(e),o.set(e,s)}return Array.from(o.values())}_traverseGraph(e,t,r,i=new Set,s=new Map){const n=r(t?e.getSourceEdges():e.getDestinationEdges());for(const e of n){const n=t?e.getSource():e.getDestination();i.has(n.getId())||s.has(n.getId())||(s.set(n.getId(),n),this._traverseGraph(n,t,r,i,s))}return s}}class o{constructor(e,t,r){this._source=e,this._destination=t,this._value=r}getSource(){return this._source}getDestination(){return this._destination}getValue(){return this._value}}class a{_sources=new i.Z(!0);_destinations=new i.Z(!0);constructor(e,t){this._id=e,this._value=t}getId(){return this._id}getValue(){return this._value}isRoot(){return 0===this.getNumSources()}isLeaf(){return 0===this.getNumDestinations()}getNumSources(){return this._sources.size()}hasSource(e){return e?this._sources.containsKey(e instanceof a?e.getId():e):!this._sources.isEmpty()}getSourceEdge(e){return this._sources.get(e)}getSourceEdges(){return this._sources.getValues()}getNumDestinations(){return this._destinations.size()}hasDestinations(){return!this._destinations.isEmpty()}hasDestination(e){return this._destinations.containsKey(e instanceof a?e.getId():e)}getDestinationEdge(e){return this._destinations.get(e)}getDestinationEdges(){return this._destinations.getValues()}addSource(e,t,r=!0){const i=this.getSourceEdge(e.getId());if(i){if(r)throw new Error("Source already exists.");return i}const s=new o(e,this,t);return this._sources.put(e.getId(),s),e._destinations.put(this.getId(),s),s}unlinkSource(e,t=!1){if(!this._sources.containsKey(e.getId())){if(t)throw new Error(`Unknown source ${e.getId()}.`);return}const r=this._sources.get(e.getId());return this._sources.remove(e.getId()),e._destinations.remove(this.getId()),r}addDestination(e,t,r=!0){return e.addSource(this,t,r)}unlinkDestination(e){return e.unlinkSource(this)}unlinkAll(){this.getSourceEdges().forEach((e=>{this.unlinkSource(e.getSource())})),this.getDestinationEdges().forEach((e=>{this.unlinkDestination(e.getDestination())}))}isIsolated(){return!(this.hasDestinations()||this.hasSource())}}class l extends n{constructor(e,t=!1){super(e),this._respectEdgeOrder=t;const r=this.getRootNodes();if(this._isAcyclic=!0,0===r.length)this._isAcyclic=!1;else{const e=[],t=new Set;for(const i of r)if(!this._topologicalSort(i,e,t)){this._isAcyclic=!1;break}this._isAcyclic&&(this._topologicalOrder=e)}}isAcyclic(){return this._isAcyclic}getTopologicalOrder(){return this._topologicalOrder}getRespectEdgeOrder(){return this._respectEdgeOrder}getLongestPath(){let e,t,r;if(!this._topologicalOrder)return;const i=new Map;for(const s of this._topologicalOrder){let n;if(s.isRoot())n=0;else{let e;for(const t of s.getSourceEdges()){const r=i.get(t.getSource().getId());if(!r)throw new Error("Expected source node distance to have been determined.");(!e||r.distance>e.distance)&&(e=r)}if(!e)throw new Error("Expected max source node distance to have been determined.");n=e.distance+1,r=e}e={distance:n,node:s,parentNodeDistance:r},i.set(s.getId(),e),(null==t||n>t.distance)&&(t=e)}const s=[];for(e=t;null!=e;)s.unshift(e.node),e=e.parentNodeDistance;return s}isLinear(){return!!this.isAcyclic()&&this.getNodes().every((e=>e.getSourceEdges().length<=1&&e.getDestinationEdges().length<=1))}_topologicalSort(e,t,r,s=new i.Z(!0)){if(s.containsKey(e.getId()))return!1;if(r.has(e))return!0;s.put(e.getId(),e);const n=e.getDestinationEdges();this._respectEdgeOrder&&n.reverse();for(const e of Array.from(n))if(!this._topologicalSort(e.getDestination(),t,r,s))return!1;return r.add(e),s.pop(),t.unshift(e),!0}}class u extends n{constructor(e=!1){super(),this._respectEdgeOrder=e,this._mutation=0}getMutation(){return this._mutation}addNode(e,t){const r=new a(e,t);return this._nodes.put(r.getId(),r),this._didMutate(),r}deleteNode(e){const t=this.getNode(e);return t.unlinkAll(),this._nodes.remove(e),this._didMutate(),t}addEdge(e,t,r,i=!1){const s=this._nodes.get(e);if(!s)throw new Error("Can't find source node.");const n=this._nodes.get(t);if(!n)throw new Error("Can't find destination node.");return this._didMutate(),n.addSource(s,r,i)}hasEdge(e,t){const r=this._nodes.get(e);return!!r&&r.hasDestination(t)}deleteEdge(e,t){const r=this._nodes.get(e);if(null==r)throw new Error("Can't find source node.");const i=this._nodes.get(t);if(null==i)throw new Error("Can't find destination node.");this._didMutate();const s=i.unlinkSource(r);if(!s)throw new Error(`No edge found between ${e} and ${t}.`);return s}getGraphs(){if(!this._graphs){const e=new Set;for(const t of this.getNodes())e.add(t);const t=[];for(const r of e)t.push(this._traverse(r,e));this._graphs=t.map((e=>new l(e,this._respectEdgeOrder)))}return this._graphs}copy(){const e=new u(this._respectEdgeOrder),t=this.getNodes();for(const r of t)e.addNode(r.getId(),r.getValue());for(const r of t)for(const t of r.getDestinationEdges())e.addEdge(r.getId(),t.getDestination().getId(),t.getValue());return e}_didMutate(){delete this._graphs,this._mutation++}_traverse(e,t,r=new i.Z(!0)){if(r.containsKey(e.getId()))return r;t.delete(e),r.put(e.getId(),e);for(const i of e.getSourceEdges())this._traverse(i.getSource(),t,r);for(const i of e.getDestinationEdges())this._traverse(i.getDestination(),t,r);return r}}},37681:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("BOT",new s).add("USER",new s).finish()},19929:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{static getDefaultSldsIconName(e){return s.hasCode(e)?s.fromCode(e).sldsIconName:"sobject"}static sanitizeNameForLogging(e){return e?.endsWith("__c")?"<Custom Object>":e}constructor(e,t){super(),this._idPrefix=e,this._sldsIconName=t}get idPrefix(){return this._idPrefix}get sldsIconName(){return this._sldsIconName||this.code.toLowerCase()}isValidId(e){return(15===e.length||18===e.length)&&e.startsWith(this.idPrefix)}}s.add("ORGANIZATION","Organization",new s("00D")).add("LENS","Lens",new s("0FK")).add("FOLDER","Folder",new s("00l")).add("COLLECTION","Collection",new s("0lk")).add("EDGE_MART","EdgeMart",new s("0Fb")).add("DATA_FLOW","Dataflow",new s("02K")).add("ELT_WORK_FLOW","EltWorkflow",new s("0Bw")).add("INSIGHTS_EXTERNAL_DATA","InsightsExternalData",new s("06V")).add("ANALYSIS","AnalysisConfiguration",new s("1Y3")).add("ACCOUNT","Account",new s("001")).add("CONTACT","Contact",new s("003")).add("OPPORTUNITY","Opportunity",new s("006")).add("LEAD","Lead",new s("00Q")).add("CAMPAIGN","Campaign",new s("701")).add("CASE","Case",new s("500")).add("SOLUTION","Solution",new s("501")).add("USER","User",new s("005")).add("EVENT","Event",new s("00U")).add("TASK","Task",new s("00T")).add("GROUP","Group",new s("00G","groups")).add("ORDER","Order",new s("801","orders")).add("CONTRACT","Contract",new s("800")).add("PRICEBOOK2","Pricebook2",new s("01t","pricebook")).add("TEMPLATE","WaveTemplate",new s("0Nk")).add("WATCHLIST","DashboardSnapshotItem",new s("0zF")).add("LIGHTNING_DASHBOARD","Dashboard",new s("01Z")).add("REPORT","Report",new s("00O")).add("REPORT_TYPE","ReportType",new s("0NL")).add("DASHBOARD","Dashboard",new s("01Z")).add("DASHBOARD_SAVED_VIEW","DashboardSavedView",new s("8wk")).add("TABLEAU_DASHBOARD","TableauDashboard",new s("6nD")).add("TABLEAU_WORKBOOK","TableauWorkbook",new s("3iA")).add("FLOW","Flow",new s("300")).finish()},96469:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{constructor(e){super(),this.className=e}getClassName(){return this.className}}s.add("STRING",new s("string")).add("NUMBER",new s("number")).add("DATE",new s("date")).add("BOOLEAN",new s("boolean")).add("PERCENT",new s("percent")).add("CUSTOM",new s("custom")).finish()},53182:(e,t,r)=>{"use strict";r.d(t,{E_:()=>l,ZP:()=>u,jY:()=>a});var i=r(96486),s=r(27223),n=r(34711),o=r(93892);const a=-1,l=-1;class u{isHeader(e,t,r,i){return r||i}getTotalRows(e){return s.checkImplemented()}getTotalColumns(e){return s.checkImplemented()}canResizeColumn(e,t,r,i){return!1}setColumnWidth(e,t,r){}getColumnWidth(e,t){return 200}getRowContentHeight(e,t){return 20}getCellValue(e,t,r,i){return s.checkImplemented()}getRowStyleClass(e,t){return this.isHeaderRow(e,t)?"data-grid-header-row":null}getCellStyleClass(e,t,r,i){return this.isHeaderRow(e,r)?"data-grid-header-cell":null}getCellStyle(e,t,r,i){return{}}getCellTextAlignment(e,t,r,i){return n.Z.LEFT}isTextWrapSupported(){return!0}getMaxColumnsSupportedForTextWrap(){return 50}shouldWrapText(e,t,r,i){return!1}getTextWrappedColumnIndices(e){return[]}getAriaSort(e,t,r,i){}isHeaderRow(e,t){return t&&0===e}isDraggableRow(e,t){return this.isHeaderRow(e,t)}isDroppableRow(e,t){return!0}isMajorRow(e,t,r){return!e&&t>1}isCellSelected(e,t,r,i){return!1}isMultiSelectable(e){return!1}hasRowSpan(e,t,r){return e||t}hasColSpan(e,t){return e||t}hasColSpanForRow(e,t,r){return!0}canRowSpanCells(e,t,r,s,n){if(!this.hasRowSpan(s,n,e))return!1;for(let o=e;o>=0;o--){const e=this.getCellValue(t,o,s,n),a=this.getCellValue(r,o,s,n);if(!i.isEqual(e,a))return!1}return!0}canColSpanCells(e,t,r,s,n){if(!this.hasColSpan(s,n)||1===this.getTotalRows(s))return!1;for(let o=e;o>=0;o--){const e=this.getCellValue(o,t,s,n),a=this.getCellValue(o,r,s,n);if(!i.isEqual(e,a))return!1}return!0}useHeadersOnHeadersInDomain(e,t,r,i){return!1}getCellHeaderDomain(e,t,r,i){return r&&i?this._getDoublyFixedHeaderDomain(e,t):r?this._getFixedRowHeaderDomain(e,t):i?this._getFixedColumnHeaderDomain(e,t):this._getUnfixedHeaderDomain(e,t)}supportsMajorRowsRendering(){return!1}setMajorRowsIndices(e){s.checkImplemented()}getGroupingsCount(){return s.checkImplemented()}async getNextPage(){return s.checkImplemented()}hasNextPage(){return!1}_getUnfixedHeaderDomain(e,t){return o.Z.NONE}_getFixedRowHeaderDomain(e,t){return o.Z.COLUMN}_getFixedColumnHeaderDomain(e,t){return o.Z.ROW}_getDoublyFixedHeaderDomain(e,t){return o.Z.NONE}shouldSkipHeadersOnCell(e,t,r,i){const s=this.getCellValue(e,t,r,i);return null==s||""===s}getExtraHeaderRowSpan(e,t,r,i,s){return 0}getExtraHeaderColSpan(e,t,r,i,s){return 0}getSearchableText(e,t,r,i){const s=this.getCellValue(e,t,r,i);return s?"string"==typeof s?s:s.toString():""}}},7905:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(78978),s=r(53499);class n extends i{getType(){return this._value.type}getKeys(){return this._value.keys}}n.Type=class extends i{isValid(e){return this._value.isValid(e)}},n.Type.build(n.Type,{NUMBER:{isValid:e=>"number"==typeof e&&!isNaN(e)&&isFinite(e)},BOOLEAN:{isValid:e=>!0===e||!1===e},COLOR:{isValid:e=>"string"==typeof e&&((0,s.isShortHexFormat)(e)||(0,s.isHexFormat)(e)||(0,s.isRgbFormat)(e)||(0,s.isRgbaFormat)(e))}}),n.build(n,{WRAP_TEXT:{type:n.Type.BOOLEAN,keys:["wrapText"]},BORDER_WIDTH:{type:n.Type.NUMBER,keys:["borderWidth"]},BORDER_COLOR:{type:n.Type.COLOR,keys:["borderColor"]},BACKGROUND_COLOR:{type:n.Type.COLOR,keys:["backgroundColor"]},FIXED_ROW_DIVIDER_COLOR:{type:n.Type.COLOR,keys:["fixedRowDividerColor"]},FIXED_COLUMN_DIVIDER_COLOR:{type:n.Type.COLOR,keys:["fixedColumnDividerColor"]},INNER_MAJOR_BORDER_WIDTH:{type:n.Type.NUMBER,keys:["innerMajorBorderWidth"]},INNER_MAJOR_BORDER_COLOR:{type:n.Type.COLOR,keys:["innerMajorBorderColor"]},INNER_MINOR_BORDER_WIDTH:{type:n.Type.NUMBER,keys:["innerMinorBorderWidth"]},INNER_MINOR_BORDER_COLOR:{type:n.Type.COLOR,keys:["innerMinorBorderColor"]},FIXED_COLUMN_SELECTION_BACKGROUND_COLOR:{type:n.Type.COLOR,keys:["fixedColumnSelectionBackgroundColor"]},FIXED_COLUMN_SELECTION_FONT_COLOR:{type:n.Type.COLOR,keys:["fixedColumnSelectionFontColor"]},SELECTION_BACKGROUND_COLOR:{type:n.Type.COLOR,keys:["selectionBackgroundColor"]},SELECTION_FONT_COLOR:{type:n.Type.COLOR,keys:["selectionFontColor"]},HEADER_FONT_SIZE:{type:n.Type.NUMBER,keys:["header","fontSize"]},HEADER_FONT_COLOR:{type:n.Type.COLOR,keys:["header","fontColor"]},HEADER_FONT_WEIGHT:{type:n.Type.NUMBER,keys:["header","fontWeight"]},HEADER_BACKGROUND_COLOR:{type:n.Type.COLOR,keys:["header","backgroundColor"]},HEADER_INNER_MINOR_BORDER_COLOR:{type:n.Type.COLOR,keys:["header","innerMinorBorderColor"]},FONT_SIZE:{type:n.Type.NUMBER,keys:["fontSize"]},FONT_COLOR:{type:n.Type.COLOR,keys:["fontColor"]},FONT_WEIGHT:{type:n.Type.NUMBER,keys:["fontWeight"]},TEXT_WRAP:{type:n.Type.BOOLEAN,keys:["textWrap"]},LINE_HEIGHT:{type:n.Type.NUMBER,keys:["lineHeight"]},HORIZONTAL_PADDING:{type:n.Type.NUMBER,keys:["horizontalPadding"]},VERTICAL_PADDING:{type:n.Type.NUMBER,keys:["verticalPadding"]},ODD_ROW_COLOR:{type:n.Type.COLOR,keys:["oddRowColor"]},EVEN_ROW_COLOR:{type:n.Type.COLOR,keys:["evenRowColor"]},DROP_INDICATOR_COLOR:{type:n.Type.COLOR,keys:["dropIndicatorColor"]}})},61162:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(7905),n=r(93318);class o{constructor(e={}){this._styles=e,this._styles=this._getValidStyles(),i.defaultsDeep(this._styles,n.Z.LIGHT.getStyles()),Object.freeze(this._styles)}getValue(e){let t;const r=e.getKeys();for(let e=0;e<r.length;e++){const i=r[e];if(0===e)t=this._styles[i];else{if(null==t)break;t=t[i]}}return t}getValueAsNumber(e){const t=this.getValue(e);return"number"==typeof t?t:0}getValueAsString(e){const t=this.getValue(e);return"string"==typeof t?t:""}getStyles(){return this._styles}_setValue(e,t,r){const i=t.getKeys(),s=i.length;let n=e;for(let e=0;e<i.length;e++){const t=i[e];e<s-1?(null==n[t]&&(n[t]={}),n=n[t]):n[t]=r}}_getValidStyles(){const e={};for(const t of s.Z.enums()){const r=this.getValue(t);if(null==r)continue;t.getType().isValid(r)&&this._setValue(e,t,r)}return e}}},93318:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(78978),n=r(8429);class o extends s{getLabel(){return n.Z.getLabel("TableThemes",this._value.labelKey)}getStyles(){return this._value.styles}}const a=Object.freeze({wrapText:!1,borderWidth:1,borderColor:"#e0e5ee",backgroundColor:"#ffffff",fixedRowDividerColor:"#a8b7c7",fixedColumnDividerColor:"#a8b7c7",innerMajorBorderWidth:1.5,innerMajorBorderColor:"#a8b7c7",innerMinorBorderWidth:1,innerMinorBorderColor:"#e0e5ee",selectionBackgroundColor:"#d8edff",selectionFontColor:"#16325c",dropIndicatorColor:"#0070d2",fontSize:12,fontColor:"#16325c",fontWeight:400,lineHeight:1.5,horizontalPadding:8,verticalPadding:8,oddRowColor:null,evenRowColor:null,textWrap:!0,header:{fontSize:12,fontColor:"#16325c",fontWeight:700,backgroundColor:"#f4f6f9",innerMinorBorderColor:"#e0e5ee"}});o.build(o,{LIGHT:{labelKey:"light",styles:a},CLASSIC:{labelKey:"classic",styles:Object.freeze(i.defaultsDeep({borderColor:"#e1e5ee",backgroundColor:"#f2f6fa",fixedRowDividerColor:"#a9b7c7",fixedColumnDividerColor:"#a9b7c7",innerMajorBorderColor:"#a9b7c7",innerMinorBorderColor:"#e1e5ee",oddRowColor:"#ffffff",evenRowColor:"#f2f6fa",header:{innerMinorBorderColor:"#e1e5ee",fontColor:"#5c7a99",backgroundColor:"#e4ecf2"}},a))},DARK:{labelKey:"dark",styles:Object.freeze(i.defaultsDeep({borderColor:"#54698d",backgroundColor:"#16325c",fixedRowDividerColor:"#54698d",fixedColumnDividerColor:"#54698d",innerMajorBorderColor:"#54698d",innerMinorBorderColor:"#54698d",fontColor:"#ffffff",header:{innerMinorBorderColor:"#54698d",fontColor:"#ffffff",backgroundColor:"#000000"}},a))},BLUE:{labelKey:"blue",styles:Object.freeze(i.defaultsDeep({borderColor:"#98c6f5",fixedRowDividerColor:"#3290ed",fixedColumnDividerColor:"#3290ed",innerMajorBorderColor:"#3290ed",innerMinorBorderColor:"#98c6f5",header:{innerMinorBorderColor:"#98c6f5",fontColor:"#ffffff",backgroundColor:"#1589ee"}},a))},GREEN:{labelKey:"green",styles:Object.freeze(i.defaultsDeep({borderColor:"#82c238",fixedRowDividerColor:"#6dab26",fixedColumnDividerColor:"#6dab26",innerMajorBorderColor:"#5e981b",innerMinorBorderColor:"#82c238",evenRowColor:"#f0f6ea",header:{innerMinorBorderColor:"#82c238",fontColor:"#ffffff",backgroundColor:"#6dab26"}},a))},DARK_HEADER:{labelKey:"darkHeader",styles:Object.freeze(i.defaultsDeep({borderColor:"#a8b7c7",fixedRowDividerColor:"#54698d",fixedColumnDividerColor:"#54698d",innerMajorBorderColor:"#54698d",innerMinorBorderColor:"#a8b7c7",header:{innerMinorBorderColor:"#a8b7c7",fontColor:"#ffffff",backgroundColor:"#16325c"}},a))}})},34711:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{getClassName(){return this._value.className}}s.build(s,{LEFT:{className:""},CENTER:{className:"data-grid-table-cell-align-center"},RIGHT:{className:"data-grid-table-cell-align-right"}})},11822:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{getApiName(){return this._value.apiName}}s.build(s,{VALUE:{apiName:"fieldValue"},FIELD:{apiName:"fieldToField"}})},74899:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{constructor(e){super(),this.iconName=e}}s.add("NO_SYMBOL","noSymbol",new s("prohibited")).add("ARROW_UP","arrowUp",new s("arrow-up")).add("ARROW_DOWN","arrowDown",new s("arrow-down")).add("ARROW_UP_45","arrowUp45",new s("arrow-up-45")).add("ARROW_UP_N45","arrowUpN45",new s("arrow-up-n45")).add("ARROW_DOWN_45","arrowDown45",new s("arrow-down-45")).add("ARROW_DOWN_N45","arrowDownN45",new s("arrow-down-n45")).add("ARROW_BACK","arrowBack",new s("arrow-back")).add("ARROW_FORWARD","arrowForward",new s("arrow-forward")).add("ARROW_UP_THIN","arrowUpThin",new s("arrow-up-thin")).add("ARROW_DOWN_THIN","arrowDownThin",new s("arrow-down-thin")).add("ARROW_UP_45_THIN","arrowUp45Thin",new s("arrow-up-45-thin")).add("ARROW_UP_N45_THIN","arrowUpN45Thin",new s("arrow-up-n45-thin")).add("ARROW_DOWN_45_THIN","arrowDown45Thin",new s("arrow-down-45-thin")).add("ARROW_DOWN_N45_THIN","arrowDownN45Thin",new s("arrow-down-n45-thin")).add("ARROW_BACK_THIN","arrowBackThin",new s("arrow-back-thin")).add("ARROW_FORWARD_THIN","arrowForwardThin",new s("arrow-forward-thin")).add("ARROW_UP_ENCLOSED","arrowUpEnclosed",new s("arrow-up-enclosed")).add("ARROW_DOWN_ENCLOSED","arrowDownEnclosed",new s("arrow-down-enclosed")).add("ARROW_UP_45_ENCLOSED","arrowUp45Enclosed",new s("arrow-up-45-enclosed")).add("ARROW_UP_N45_ENCLOSED","arrowUpN45Enclosed",new s("arrow-up-n45-enclosed")).add("ARROW_DOWN_45_ENCLOSED","arrowDown45Enclosed",new s("arrow-down-45-enclosed")).add("ARROW_DOWN_N45_ENCLOSED","arrowDownN45Enclosed",new s("arrow-down-n45-enclosed")).add("ARROW_BACK_ENCLOSED","arrowBackEnclosed",new s("arrow-back-enclosed")).add("ARROW_FORWARD_ENCLOSED","arrowForwardEnclosed",new s("arrow-forward-enclosed")).add("ARROW_UP_OUTLINE","arrowUpOutline",new s("arrow-up-outline")).add("ARROW_DOWN_OUTLINE","arrowDownOutline",new s("arrow-down-outline")).add("ARROW_UP_45_OUTLINE","arrowUp45Outline",new s("arrow-up-45-outline")).add("ARROW_UP_N45_OUTLINE","arrowUpN45Outline",new s("arrow-up-n45-outline")).add("ARROW_DOWN_45_OUTLINE","arrowDown45Outline",new s("arrow-down-45-outline")).add("ARROW_DOWN_N45_OUTLINE","arrowDownN45Outline",new s("arrow-down-n45-outline")).add("ARROW_BACK_OUTLINE","arrowBackOutline",new s("arrow-back-outline")).add("ARROW_FORWARD_OUTLINE","arrowForwardOutline",new s("arrow-forward-outline")).add("FACE_HAPPY","faceHappy",new s("face-happy")).add("FACE_SAD","faceSad",new s("face-sad")).add("FACE_NEUTRAL","neutralAverage",new s("face-neutral")).add("THUMB_UP","thumbUp",new s("thumb-up")).add("THUMB_DOWN","thumbDown",new s("thumb-down")).add("CHECK_ENCLOSED","checkEnclosed",new s("check-enclosed")).add("CLOSE_ENCLOSED","closeEnclosed",new s("close-enclosed")).add("WARNING","warning",new s("warning")).add("CHECK","check",new s("check")).add("CLOSE","close",new s("close")).add("EXCLAMATION_MARK","exclamationMark",new s("exclamation-mark")).add("CIRCLE_0","circle0",new s("circle-0")).add("CIRCLE_25","circle25",new s("circle-25")).add("CIRCLE_50","circle50",new s("circle-50")).add("CIRCLE_75","circle75",new s("circle-75")).add("CIRCLE_100","circle100",new s("circle-100")).add("DOWN","down",new s("down")).add("UP","up",new s("up")).add("LEFT","left",new s("left")).add("RIGHT","right",new s("right")).add("PLUS","plus",new s("plus")).add("MINUS","minus",new s("minus")).add("FLAG","flag",new s("flag")).add("FAVORITE","favorite",new s("favorite")).finish()},42064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{#y;constructor(e){super(),this.#y=e}getCode(){return this.code}getStyle(){return this.#y}}s.add("LEFT","left",new s("flex-start")).add("CENTER","center",new s("center")).add("RIGHT","right",new s("flex-end")).finish()},56977:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(8429);class n extends i.Z{#b;#C;constructor(e,t,r){super(),this.style=r,this.#b=e,this.#C=t}getCode(){return this.code}getLabel(){return s.Z.getLabel("ImageScale",this.code)}getWidth(){return this.#b}getHeight(){return this.#C}}n.add("ORIGINAL","original",new n("auto","auto",{backgroundSize:"auto"})).add("STRETCH","stretch",new n("100%","100%",{backgroundSize:"100% 100%"})).add("TILE","tile",new n("auto","auto",{backgroundRepeat:"repeat"})).add("FIT_WIDTH","fitwidth",new n("100%","auto",{backgroundSize:"100% auto"})).add("FIT_HEIGHT","fitheight",new n("auto","100%",{backgroundSize:"auto 100%"})).finish()},36949:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this.name=e,this.namespace=t}}},29682:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{#y;constructor(e){super(),this.#y=e}getCode(){return this.code}getStyle(){return this.#y}}s.add("TOP","top",new s("flex-start")).add("CENTER","center",new s("center")).add("BOTTOM","bottom",new s("flex-end")).finish()},38931:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(32479),s=r(74899),n=r(36949),o=r(83993);const a="icon";class l{static getInputOptions(){const e="Image",t="Symbol",r=new i;return r.addOptionsToCategory(e,[new n.Z("")]).addOptionsToCategory(t,[s.Z.NO_SYMBOL]).addOptionsToCategory(t,[s.Z.ARROW_UP,s.Z.ARROW_DOWN,s.Z.ARROW_UP_45,s.Z.ARROW_UP_N45,s.Z.ARROW_DOWN_45,s.Z.ARROW_DOWN_N45,s.Z.ARROW_BACK,s.Z.ARROW_FORWARD]).addOptionsToCategory(t,[s.Z.ARROW_UP_THIN,s.Z.ARROW_DOWN_THIN,s.Z.ARROW_UP_45_THIN,s.Z.ARROW_UP_N45_THIN,s.Z.ARROW_DOWN_45_THIN,s.Z.ARROW_DOWN_N45_THIN,s.Z.ARROW_BACK_THIN,s.Z.ARROW_FORWARD_THIN]).addOptionsToCategory(t,[s.Z.ARROW_UP_ENCLOSED,s.Z.ARROW_DOWN_ENCLOSED,s.Z.ARROW_UP_45_ENCLOSED,s.Z.ARROW_UP_N45_ENCLOSED,s.Z.ARROW_DOWN_45_ENCLOSED,s.Z.ARROW_DOWN_N45_ENCLOSED,s.Z.ARROW_BACK_ENCLOSED,s.Z.ARROW_FORWARD_ENCLOSED]).addOptionsToCategory(t,[s.Z.ARROW_UP_OUTLINE,s.Z.ARROW_DOWN_OUTLINE,s.Z.ARROW_UP_45_OUTLINE,s.Z.ARROW_UP_N45_OUTLINE,s.Z.ARROW_DOWN_45_OUTLINE,s.Z.ARROW_DOWN_N45_OUTLINE,s.Z.ARROW_BACK_OUTLINE,s.Z.ARROW_FORWARD_OUTLINE]).addOptionsToCategory(t,[s.Z.FACE_HAPPY,s.Z.FACE_SAD,s.Z.FACE_NEUTRAL,s.Z.THUMB_UP,s.Z.THUMB_DOWN,s.Z.CHECK_ENCLOSED,s.Z.CLOSE_ENCLOSED,s.Z.WARNING]).addOptionsToCategory(t,[s.Z.CHECK,s.Z.CLOSE,s.Z.EXCLAMATION_MARK,s.Z.CIRCLE_0,s.Z.CIRCLE_25,s.Z.CIRCLE_50,s.Z.CIRCLE_75,s.Z.CIRCLE_100]).addOptionsToCategory(t,[s.Z.DOWN,s.Z.UP,s.Z.LEFT,s.Z.RIGHT,s.Z.PLUS,s.Z.MINUS,s.Z.FLAG,s.Z.FAVORITE]),r.hideCategoryLabel(e),r.hideCategoryLabel(t),r}static fromPrefixedValue(e){const t=e.indexOf(":"),r=e.substring(0,t),i=e.substring(t+1);switch(r){case a:return s.Z.fromCode(i);case"img":return new n.Z(i);default:throw new Error("Invalid symbol prefix")}}static toPrefixedValue(e){if(e instanceof s.Z)return`${a}:${e.code}`;if(e instanceof n.Z){return`img:${(0,o.Oz)(e.name,e.namespace)}`}}}},59495:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(27223);class s{canMoveWidget(e){return!0}canResizeWidget(e){return!0}didMoveWidgets(e,t){return i.checkImplemented()}didResizeWidget(e,t){}didAddWidget(e,t){}didDropWidgetInvalid(e){}didDragOutside(e,t){return!1}didStartMoveWidget(){}didDragEnter(e,t,r,i){}didDragLeave(e){}didPressDeleteWidget(e){}didPressDuplicateWidget(e){}didPressCopyWidget(e){}didMouseEnterWidget(e,t){}didMouseLeaveWidget(e,t){}getAdditionalWidgetContainerClassName(e){}didDoubleClickWidget(e){}}},52222:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(96486);class s{_hasIntersectionObserverConnected=!1;_isResizeObserverConnecting=!0;constructor(e,t){this._elements=e,this._debouncedOnResize=(0,i.debounce)((()=>{this._resizeObserver.disconnect(),t(),this._connectResizeObserver()}),50),this._resizeObserver=new ResizeObserver((e=>{this._isResizeObserverConnecting?this._isResizeObserverConnecting=!1:e.some((e=>e.contentRect.width>0||e.contentRect.height>0))&&this._debouncedOnResize()})),this._intersectionObserver=new IntersectionObserver((e=>{e.some((e=>e.isIntersecting))?(this._connectResizeObserver(),this._hasIntersectionObserverConnected&&this._debouncedOnResize()):this._resizeObserver.disconnect()}))}observe(){this._connectResizeObserver(),this._connectIntersectionObserver()}unobserve(){this._debouncedOnResize.cancel(),this._intersectionObserver.disconnect(),this._resizeObserver.disconnect()}_connectResizeObserver(){this._elements.forEach((e=>{this._isResizeObserverConnecting=!0,this._resizeObserver.observe(e)}))}_connectIntersectionObserver(){this._elements.forEach((e=>{this._intersectionObserver.observe(e)})),this._hasIntersectionObserverConnected=!0}}},76446:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(34409);class s extends i{getAssistiveTextFor(){return""}}},59407:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var i=r(49720),s=r(53373),n=r(53811),o=r(22393),a=r(50765);const l="deltaX",u="deltaY",d="increment",c="decrement";class h extends n{constructor(){super(),this._resetState(),this.addKeyDownHandlers([{keyCode:i.KEY_CODE_LEFT,callback:this._arrowPressWork(l,c,a.Direction.LEFT)},{keyCode:i.KEY_CODE_RIGHT,callback:this._arrowPressWork(l,d,a.Direction.RIGHT)},{keyCode:i.KEY_CODE_UP,callback:this._arrowPressWork(u,c,a.Direction.TOP)},{keyCode:i.KEY_CODE_DOWN,callback:this._arrowPressWork(u,d,a.Direction.BOTTOM)},{keyCode:i.KEY_CODE_TAB,callback:this._tabPressWork()},{keyCode:i.KEY_CODE_TAB,modifier:s.MODIFIER_SHIFT,callback:this._tabPressWork()}]),this.addKeyUpHandlers([{keyCode:i.KEY_CODE_LEFT,callback:this._arrowReleaseWork(a.Direction.LEFT)},{keyCode:i.KEY_CODE_RIGHT,callback:this._arrowReleaseWork(a.Direction.RIGHT)},{keyCode:i.KEY_CODE_UP,callback:this._arrowReleaseWork(a.Direction.TOP)},{keyCode:i.KEY_CODE_DOWN,callback:this._arrowReleaseWork(a.Direction.BOTTOM)}])}resetState(){this._moving&&(this.callbackMap[n.Actions.END_MOVE.getName()](this._boundingBox,this._deltas),this._resetState())}_resetState(){this._moving=!1,this._resetDeltas(),this._boundingBox=void 0,this._deltaLimits={min:{deltaX:-1/0,deltaY:-1/0},max:{deltaX:1/0,deltaY:1/0}},this._directionsHeld={top:!1,bottom:!1,left:!1,right:!1},this._resetDeltas()}_resetDeltas(){this._deltas={deltaX:0,deltaY:0,deltasGridBased:!0}}_arrowPressWork(e,t,r){const i=this;return function(s){let a;if(!i._moving){const{selectedWidgets:e,isResize:t,numColumns:r}=i.getInfoCallback(n.Actions.START_MOVE);e&&e.length>0&&(i._resetDeltas(),i._boundingBox=t?e[0]:o.createBoundingBox(e),i._computeLimitDeltas(r,t),i._moving=!0,a=i.callbackMap[n.Actions.START_MOVE.getName()]())}if(i._moving)return i._directionsHeld[r.getClassName()]=!0,i._deltas[e]=t===c?Math.max(i._deltas[e]-1,i._deltaLimits.min[e]):Math.min(i._deltas[e]+1,i._deltaLimits.max[e]),i.callbackMap[n.Actions.MOVE.getName()](i._deltas,i._boundingBox,r,a),s.preventDefault(),!1}}_arrowReleaseWork(e){const t=this;return function(r){return t._directionsHeld[e.getClassName()]=!1,t._directionsHeld.top||t._directionsHeld.bottom||t._directionsHeld.left||t._directionsHeld.right||(t._moving=!1,t.callbackMap[n.Actions.END_MOVE.getName()](t._boundingBox,t._deltas)),r.preventDefault(),!1}}_tabPressWork(){const e=this;return function(t){if(e._moving)return e.callbackMap[n.Actions.BLOCKED_TAB.getName()](),t.preventDefault(),!1}}_computeLimitDeltas(e,t){t?(this._deltaLimits.min.deltaX=-Math.max(0,this._boundingBox.getWidth()-this._boundingBox.getMinWidth()),this._deltaLimits.max.deltaX=Math.min(e-this._boundingBox.getWidth()-this._boundingBox.getColumn(),this._boundingBox.getMaxWidth()-this._boundingBox.getWidth()),this._deltaLimits.min.deltaY=-Math.max(0,this._boundingBox.getHeight()-this._boundingBox.getMinHeight()),this._deltaLimits.max.deltaY=Math.min(1/0,this._boundingBox.getMaxHeight()-this._boundingBox.getHeight())):(this._deltaLimits.min.deltaX=-this._boundingBox.getColumn(),this._deltaLimits.max.deltaX=e-this._boundingBox.getWidth()-this._boundingBox.getColumn(),this._deltaLimits.min.deltaY=-this._boundingBox.getRow(),this._deltaLimits.max.deltaY=1/0)}disallowButtonInteraction(){return!0}}var p=r(87518);class g extends h{constructor(){super(),this.addKeyDownHandlers([{charKey:"d",modifier:s.MODIFIER_CTRL,callback:this._duplicatePressWork()},{charKey:"d",modifier:s.MODIFIER_META,callback:this._duplicatePressWork()},{charKey:"c",modifier:s.MODIFIER_CTRL,callback:this._copyPressWork()},{charKey:"c",modifier:s.MODIFIER_META,callback:this._copyPressWork()},{charKey:"a",modifier:s.MODIFIER_CTRL,callback:this._selectAllPressWork()},{charKey:"a",modifier:s.MODIFIER_META,callback:this._selectAllPressWork()},{keyCode:i.KEY_CODE_BACKSPACE,callback:this._deletePressWork()},{keyCode:i.KEY_CODE_DELETE,callback:this._deletePressWork()},{keyCode:i.KEY_CODE_SHIFT,modifier:s.MODIFIER_SHIFT,callback:this._modifierPressWork(!0)},{keyCode:i.KEY_CODE_ALT,modifier:s.MODIFIER_ALT,callback:this._modifierPressWork(!0)}]),this.addKeyUpHandlers([{keyCode:i.KEY_CODE_SHIFT,callback:this._modifierPressWork()},{keyCode:i.KEY_CODE_ALT,callback:this._modifierPressWork()}])}_duplicatePressWork(){return e=>{if(!this._moving)return this.callbackMap[n.Actions.DUPLICATE.getName()](e)}}_copyPressWork(){return e=>{if(!this._moving)return this.callbackMap[n.Actions.COPY.getName()](e)}}_selectAllPressWork(){return e=>{if(!this._moving)return this.callbackMap[n.Actions.SELECT_ALL.getName()](e)}}_deletePressWork(){return e=>{if(!this._moving)return this.callbackMap[n.Actions.DELETE.getName()](e)}}_modifierPressWork(e=!1){return t=>this.callbackMap[n.Actions.MODIFIER_DOWN.getName()](new p(t),e)}}},79167:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(34809),n=r(53499),o=r(60626);class a{constructor(e){this._renderable=e}getRenderable(){return this._renderable}setFontSize(e){if(null==e)return this;const t=parseInt(e);if(isNaN(t))throw new Error("Font size must be a number.");return this._fontSize=t,this}getFontSize(){return this._fontSize}setColor(e){return null==e||(this._color=this._validateColor(e)),this}getColor(){return this._color}setBackgroundColor(e){return null==e||(this._backgroundColor=this._validateColor(e)),this}getBackgroundColor(){return this._backgroundColor}setTextAlign(e){if(null==e)return this;if(!(0,i.isString)(e)||!s.hasEnumWithName(e))throw new Error("Invalid alignment.");return this._textAlign=e,this}getTextAlign(){return this._textAlign}setBorderStyles(e,t,r){return this._border=o.getBorderStyles(e,t,r),this}getBorderStyles(){return this._border}getStyle(){return(0,i.extend)({fontSize:this._fontSize,textAlign:this._textAlign,color:this._color,backgroundColor:this._backgroundColor},this._border)}_validateColor(e){return(0,n.isHexFormat)(e)||(0,n.isRgbFormat)(e)||(0,n.isRgbaFormat)(e)?e:"#000000"}}},26374:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var i=r(50130),s=r(96486),n=r(42951),o=r(84198),a=r(44215),l=r(32574),u=r.n(l),d=r(16582),c=r(35944);function h(e){let t,r,i,s,l,h=u().buildClassName(`action-bar-action-${e.cId}`,`reportAction report-action-${e.cId}`,e.isToggled?"toggled":void 0);void 0!==e.iconVariant?t=e.iconVariant:null==e.iconName||e.showIconText||(t="border"),null!=e.iconPosition?r=e.iconPosition:e.showIconText&&(r="left"),"icon"===e.variant&&(i=e.displayLabel,l=e.showIconText?void 0:{icon:e.assistiveText??e.label});const p=e.tooltipAlignment?e.tooltipAlignment:"bottom";let g;return("icon"!==e.variant||e.isStatefulButton||e.isDisabled||!i||e.showIconText)&&(s=e.label),e.isStatefulButton?g=(0,c.tZ)(n.Z,{assistiveText:{icon:e.label},label:s,iconName:e.iconName,iconSize:e.iconSize,disabled:e.isDisabled,onClick:e.onClick,iconVariant:t,variant:e.variant,className:h,active:e.isToggled,"aria-pressed":e.ariaPressed},e.id):(h=u().buildClassName(h,e.iconPath?.startsWith(d)?"action-bar-sprite-button":void 0),g=(0,c.tZ)(o.Z,{assistiveText:l,label:s,iconName:e.iconName,iconCategory:e.iconCategory?e.iconCategory:e.iconName?"utility":void 0,iconPath:e.iconPath,iconPosition:r,iconSize:e.iconSize,disabled:e.isDisabled,onClick:e.onClick,iconVariant:t,variant:e.variant,className:h},e.id)),!e.isDisabled&&i?(0,c.tZ)(a.Z,{content:i,position:"overflowBoundaryElement",align:p,children:g},e.id):g}var p=r(67294),g=r(8902),m=r.n(g);class _ extends p.Component{render(){const e=u().buildClassName("action",this.props.id,this.props.isToggled?"toggled":void 0,this.props.isDisabled?"disabled":void 0);let t=this.props.onClick;this.props.isDisabled&&(t=void 0);const r=null==this.props.labelContent?this._getLabelContent():this.props.labelContent;return(0,c.tZ)("div",{className:e,ref:this.props.id,"data-tooltip":this.props.dataTooltip,onClick:t,children:r},this.props.id)}_getLabelContent(){return void 0!==this.props.iconName&&null!==this.props.iconName?"create-story"===this.props.id?(0,c.BX)("div",{className:"create-story-icon-label",children:[(0,c.tZ)(m(),{iconName:this.props.iconName}),this.props.displayLabel]}):(0,c.tZ)(m(),{iconName:this.props.iconName}):this.props.displayLabel}}var f=r(5893),y=r(35368),b=r(53373),C=r(8429),E=r(57182);class S{constructor(e,t,r,i,s,{iconPath:n,iconCategory:o,useSLDS:a=!0,tooltipAlignment:l,iconVariant:u,iconPosition:d,showIconText:c,assistiveText:h}={}){this._id=e,this._label=t,this._iconName=r,this._isStatefulButton=s,this._isDisabled=!1,this._variant=null!=i?i:null!=this._iconName?"icon":"neutral",n&&(this._iconPath=n),o&&(this._iconCategory=o),this._useSLDS=a,l&&(this._tooltipAlignment=l),u&&(this._iconVariant=u),d&&(this._iconPosition=d),c&&(this._showIconText=c),h&&(this._assistiveText=h),this._hotkeys=[],this._assistiveText=h}getId(){return this._id}getLabel(){return this._label}getIconName(){return this._iconName}getTooltip(e){let t=this._getDisplayLabel(e)||"";return this._hotkeyTooltip?t+b.getHotkeyLabel(this._hotkeyTooltip):((0,s.isEmpty)(this.getHotkeys())||this.getHotkeys().forEach((e=>{t+=b.getHotkeyLabel(e.charKey)})),t)}setToggledLabel(e){return this._toggledLabel=e,this}setHotkeyTooltip(e){return this._hotkeyTooltip=e,this}getToggledLabel(){return this._toggledLabel}setHotkey(e,t,r=!0){return this._hotkeys.push({charKey:e,modifier:t}),this._preventDefault=r,this}getHotkeys(){return this._hotkeys}getDisabled(){return this._isDisabled}setDisabled(e){return this._isDisabled=e,this}setShowIconText(e){return this._showIconText=e,this}getExperiencePopoverName(){return this._experiencePopoverName}setExperiencePopoverName(e){return this._experiencePopoverName=e,this}getExperiencePopoverHelpArticle(){return this._experiencePopoverHelpArticle}setExperiencePopoverHelpArticle(e){return this._experiencePopoverHelpArticle=e,this}setIconPath(e){return this._iconPath=e,this}setIconCategory(e){return this._iconCategory=e,this}getIconPosition(){return this._iconPosition}setIconPosition(e){return this._iconPosition=e,this}getIconVariant(){return this._iconVariant}setIconVariant(e){return this._iconVariant=e,this}setIconSize(e){return this._iconSize=e,this}setTooltipAlignment(e){return this._tooltipAlignment=e,this}setVariant(e){return this._variant=e,this}setLabel(e){return this._label=e,this}useSLDS(){return this._useSLDS}getAriaPressed(){}preventDefaultForHotkey(){return this._preventDefault}getActions(){return[this]}makeMenuItem(){return f.Item.newItem(this.getId(),this.getLabel(),this.getIconName(),this.getTooltip(!1),this._isDisabled)}render(e=!1,t,r=!1){if(null!=this._experiencePopoverName){const s=this._experiencePopoverName;return(0,c.tZ)(E.Z,{experienceName:s,align:"right top",position:"overflowBoundaryElement",className:"onboarding-edit-relationship-popover",footer:this._getHelpLinkForExperiencePopover(),icon:(0,c.tZ)(i.Z,{category:"utility",name:"description",size:"small",inverse:!0}),children:this._getButton(r,e,t)},this.getId())}return this._getButton(r,e,t)}_getButton(e,t,r){return e?this._renderSLDS(t,r):this._renderCustom(t,r)}_getHelpLinkForExperiencePopover(){return this._experiencePopoverHelpArticle&&(0,c.tZ)(y.Z,{className:"helpLink",article:this._experiencePopoverHelpArticle,children:C.Z.getLabel("LearnSection","learnMore")})}_getDisplayLabel(e){return e&&null!=this._toggledLabel?this._toggledLabel:this.getLabel()}_getLabelContent(){}_renderSLDS(e,t){return(0,c.tZ)(h,{id:this.getId(),cId:this._id,label:this.getLabel(),assistiveText:this._assistiveText,displayLabel:this._getDisplayLabel(e),iconVariant:this._iconVariant,iconName:this._iconName,iconSize:this._iconSize,iconPath:this._iconPath,iconCategory:this._iconCategory,showIconText:this._showIconText,variant:this._variant,isStatefulButton:this._isStatefulButton,isDisabled:this._isDisabled,tooltipAlignment:this._tooltipAlignment,isToggled:e,onClick:t,ariaPressed:this.getAriaPressed(),iconPosition:this._iconPosition},this.getId())}_renderCustom(e,t){return(0,c.tZ)(_,{id:this.getId(),ref:this.getId(),labelContent:this._getLabelContent(),displayLabel:this._getDisplayLabel(e),iconName:this.getIconName(),dataTooltip:this.getTooltip(e),isDisabled:this._isDisabled,isToggled:e,onClick:t},this.getId())}}},96619:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(26374),s=r(5893);class n extends i.Z{constructor(e,t,r,i){super(e,t,r,void 0,void 0,i),this._actions=[]}addAction(e){this._actions.push(e)}getActions(){return this._actions}getMenuAnchorPosition(){return s.AnchorPosition.AUTOMATIC}}},12205:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(67294),s=r(57715);class n{static forDuration(e){return new Promise((t=>{setTimeout(t,e)}))}}var o=r(35944);const a=200;function l(e,{loadingRenderable:t=(0,o.tZ)(s.Z,{}),renderError:r,render:l,addHackyComponentRef:u=!1}={}){class d extends i.Component{state={isShowingLoadingRenderable:!1};_isMounted=!1;async componentDidMount(){this._isMounted=!0;let t=d.loadingPromise;const r=null==t;t||(t=e(),d.loadingPromise=t),n.forDuration(a).then((()=>{this._isMounted&&this.setState({isShowingLoadingRenderable:!0})}));try{const e=await t,i=e.default??e;r&&(d.displayName=function(e){return`Loadable(${e.displayName||e.name||"Unnamed Component"})`}(i)),this._isMounted&&this.setState({Component:i})}catch(e){this._isMounted&&this.setState({loadingError:e})}}componentWillUnmount(){this._isMounted=!1}render(){if(null!=l)return l(this.state.Component,this.state.loadingError,this.props);if(this.state.Component){const e=u?Object.assign({},this.props,{ref:e=>{this.__unsafeComponentRef=e}}):this.props;return(0,i.createElement)(this.state.Component,e)}return this.state.loadingError?null!=r?r(this.state.loadingError):(0,o.tZ)("span",{children:this.state.loadingError.message}):this.state.isShowingLoadingRenderable?t:(0,o.tZ)("span",{})}}return d}},57244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(69370),s=r(61506),n=r(18111);class o extends i.Z{static has(e){const t=s.Z.get(n).hasPermission(e);return null!=t?t:(console.warn(`Missing permission value for permission "${e.code}".`),!1)}static hasOne(e){return e.some((e=>o.has(e)))}static hasAll(e){return e.every(this.has.bind(this))}}o.add("CAN_USE_WAVE","canUseWave",new o).add("USER_HAS_INSIGHTS_ADMIN","userHasInsightsAdmin",new o).add("IS_IN_PORTAL_CONTEXT","isInPortalContext",new o).add("CAN_USE_DATA_PREP","canUseDataPrep",new o).add("CAN_USE_FULL_DATA_PREP","canUseFullDataPrep",new o).add("ORG_HAS_FIREBIRD_EDITOR","orgHasFirebirdEditor",new o).add("USER_CAN_USE_WAVE_NOTIFICATIONS","userCanUseWaveNotifications",new o).add("USER_CAN_USE_SUBSCRIPTION_EMAILS","userCanUseSubscriptionEmails",new o).add("CAN_USE_WAVE_CHATTER","canUseWaveChatter",new o).add("CAN_SCHEDULE_WORKFLOW","canScheduleWorkflow",new o).add("CAN_VIEW_WORKFLOW_AND_NODES","canViewWorkflowAndNodes",new o).add("CAN_VIEW_DATAFLOWS","canViewDataflows",new o).add("CAN_WRITE_DATAFLOW_VIA_API","canWriteDataflowViaAPI",new o).add("CAN_EXTRACT_SFDC","canExtractSFDC",new o).add("CAN_UPLOAD_EXTERNAL_DATA","canUploadExternalData",new o).add("CAN_UPLOAD_WORKFLOW","canUploadWorkflow",new o).add("CAN_USE_NL_PREDICTION","canUseNLPrediction",new o).add("CAN_USE_NEXT_BEST_GROUPING_PREDICTION","canUseNextBestGroupingPrediction",new o).add("ORG_HAS_WAVE_TREND_REPORTS","orgHasWaveTrendReports",new o).add("USER_CAN_TREND_REPORTS_IN_WAVE","userCanTrendReportsInWave",new o).add("USER_CAN_CREATE_INSIGHTS_APPLICATION","userCanCreateInsightsApplication",new o).add("CAN_CREATE_EDGEMART","canCreateEdgemart",new o).add("USER_CAN_EDIT_EDGE_MARTS","userCanEditEdgeMarts",new o).add("USER_CAN_EDIT_DASHBOARD","userCanEditDashboard",new o).add("USER_CAN_EDIT_LENSES","userCanEditLenses",new o).add("CAN_USE_APP_TEMPLATING_FRAMEWORK","canUseAppTemplatingFramework",new o).add("USER_HAS_FULL_INSIGHTS_APP","userHasFullInsightsApp",new o).add("USER_HAS_CHATTER_ENABLED","userHasChatterEnabled",new o).add("CAN_USE_WAVE_SPARK_ELT","canUseWaveSparkELT",new o).add("ORG_HAS_WAVE_NULL_MEASURES_ENABLED","orgHasWaveNullMeaEnabled",new o).add("ORG_HAS_WAVE_NULL_DIMENSIONS_SAQL_ENABLED","orgHasWaveNullDimensionSAQLEnabled",new o).add("CAN_USE_SENTIMENT_ANALYSIS","canUseSentimentAnalysisRecipes",new o).add("ORG_CAN_USE_WAVE_IFRAME_DASHBOARD","orgCanUseWaveIframeDashboard",new o).add("ORG_HAS_NOTIFICATIONS","orgHasNotifications",new o).add("ORG_HAS_WAVE_NLQ_ENABLED","orgHasWaveNLQ",new o).add("ORG_HAS_WAVE_SHARING","orgHasWaveSharing",new o).add("USER_CAN_RUN_ANALYSIS","userCanRunAnalysis",new o).add("USER_CAN_SAVE_VIEWS","orgHasDashboardSavedView",new o).add("ORG_HAS_ED_ENABLED","orgHasEDEnabled",new o).add("ORG_HAS_ED_UI","orgHasEDUI",new o).add("ORG_HAS_ED_WITH_EINSTEIN_METADATA_ENABLED","orgHasEDWithEinsteinMetadataEnabled",new o).add("ORG_HAS_EDI_ENABLED","orgHasEdiEnabled",new o).add("ORG_HAS_WAVE_TIME_ZONE_ENABLED","orgHasWaveTimeZoneEnabled",new o).add("ORG_HAS_WAVE_ASSETS_NEW_DATE_VERSION","orgHasWaveAssetsNewDateVersion",new o).add("USER_CAN_CREATE_UPDATE_ED_STORY","userCanCreateUpdateEDStory",new o).add("USER_CAN_SHARE_ED_STORY","userCanShareEDStory",new o).add("USER_CAN_USE_ED_UI","userCanUseEDUI",new o).add("USER_CAN_MANAGE_ED_MODELS","userCanManageEDModels",new o).add("ORG_HAS_ED_ON_CORE_PILOT","orgHasEDOnCorePilot",new o).add("ORG_HAS_PREDICTION_IN_RECIPE3","orgHasPredictionInRecipe3",new o).add("USER_CAN_RUN_ZERO_DAY_SCORING_ON_BYOM","userCanRunZeroDayScoringOnBYOM",new o).add("ORG_HAS_ECLAIRNG_API","orgHasEclairNGApi",new o).add("ORG_HAS_CUSTOM_CHOROPLETH","orgHasCustomChoropleth",new o).add("USER_CAN_MANAGE_MAPS","userCanManageMaps",new o).add("ORG_HAS_ONBOARDING_CUSTOMER_RESOURCE_ACCESS","orgHasOnboardingCustomerResourceAccess",new o).add("ORG_HAS_ONBOARDING_VIDEO_ACCESS","orgHasOnboardingExperienceVideoAccess",new o).add("ORG_HAS_ANALYTICS_TRIAL_ACCESS","orgHasAnalyticsTrialAccess",new o).add("ORG_HAS_LIGHTNING_EXPERIENCE_ENABLED","orgHasLightningExperienceEnabled",new o).add("ORG_CAN_SCHEDULE_SUBHOURLY","orgCanScheduleSubHourly",new o).add("ORG_HAS_COMMON_CSP_ENABLED","orgHasCommonCspEnabled",new o).add("ORG_HAS_COMMON_PRM_ENABLED","orgHasCommonPrmEnabled",new o).add("ORG_HAS_WAVE_COMMUNITY_ACCESS","orgHasWaveCommunityAccess",new o).add("USER_CAN_USE_WAVE_TABULAR_DOWNLOAD","userCanUseWaveTabularDownload",new o).add("USER_CAN_SHARE_ANALYTICS_IMAGES","userCanShareAnalyticsImages",new o).add("USER_HAS_VIEW_ALL_DATA","ViewAllData",new o).add("USER_CAN_MANAGE_PRIVATE_ASSETS","userCanManagePrivateAssets",new o).add("USER_CAN_CREATE_WORKFLOW","userCanCreateWorkflow",new o).add("USER_CAN_DELETE_WORKFLOW","userCanDeleteWorkflow",new o).add("ORG_HAS_FAVORITES","orgHasFavorites",new o).add("USER_CAN_ADD_NOTIFICATION_RECIPIENTS","userCanAddNotificationRecipients",new o).add("ORG_HAS_INACCESSIBLE_HELP_RESOURCE","orgHasInaccessibleHelpResource",new o).add("CAN_USE_SEARCH_SUGGESTIONS","canUseSearchSuggestions",new o).add("ORG_HAS_WATCHLIST_ENABLED","orgHasWatchlistEnabled",new o).add("ORG_HAS_BROWSER_RECORD_NAVIGATION","waveRecordNavigationEnabled",new o).add("ORG_HAS_WAVE_IS_YEAR_END_FISCAL_YEAR","orgHasWaveIsYearEndFiscalYear",new o).add("ORG_HAS_WAVE_CUSTOM_FISCAL_ENABLED","orgHasWaveCustomFiscalEnabled",new o).add("ORG_HAS_WAVE_RECIPE_FISCAL_ENABLED","orgHasRecipeFiscal",new o).add("USER_HAS_METALYTICS","userHasMetalytics",new o).add("ORG_HAS_METALYTICS_API","orgHasMetalyticsAPI",new o).add("ORG_HAS_SEMANTIC_GRAPH","orgHasSemanticGraphAPI",new o).add("ORG_HAS_SECURE_IMAGE_SHARING","orgHasSecureImageSharing",new o).add("CAN_USE_DATA_PREP_PILOT_FEATURES","canUseDataPrepPilot",new o).add("CAN_MANAGE_TEMPLATES_IN_STUDIO","canManageTemplatesInStudio",new o).add("ORG_HAS_TCRM_RECOMMENDER_ENABLED","orgHasTCRMProductRecommenderEnabled",new o).add("USER_HAS_SONIC","userHasSonic",new o).add("USER_HAS_INSIGHTS","userHasInsights",new o).add("USER_CAN_USE_INSIGHTS","userCanUseInsights",new o).add("WAVE_QUERY_RESERVED_11","WaveQueryReserved11",new o).add("ORG_CAN_USE_EUCLID","orgHasEuclid",new o).add("ORG_CAN_USE_BUNDLE_CACHING","orgCanUseBundleCaching",new o).add("ORG_HAS_HIGH_UI_REQUEST_CONCURRENCY","orgHasHighUIRequestConcurrency",new o).add("ORG_CAN_USE_QUERY_CACHING","orgCanUseSaqlQueryCaching",new o).add("ORG_HAS_REPLICATION_ENABLED","orgHasReplicationEnabled",new o).add("ORG_HAS_EXTERNAL_DATA_CONNECTORS","orgHasExternalDataConnectors",new o).add("USER_CAN_ADD_ANALYTICS_REMOTE_CONNECTIONS","userCanAddAnalyticsRemoteConnections",new o).add("ORG_HAS_MULESOFT_CONNECTORS","orgHasMulesoftConnectors",new o).add("ORG_HAS_LIVE_CONNECTORS","orgHasLiveConnectors",new o).add("ORG_HAS_EA_WRITE_CONNECTORS","orgHasEAWriteConnectors",new o).add("ORG_HAS_SYNC_OUT","orgHasSyncOut",new o).add("USER_HAS_INSIGHTS_ELT_EDITOR","userHasInsightsEltEditor",new o).add("ORG_HAS_RECIPE_DIRECT_DATA","orgHasRecipeDirectData",new o).add("USER_CAN_ACCESS_SALESFORCE_CDP_OR_CDP_APP","userCanAccessSalesforceCdpOrCdpApp",new o).add("USER_CAN_ACCESS_REMOTE_GENIE_PLATFORM","userCanAccessRemoteGeniePlatform",new o).add("ORG_HAS_ED_BYOM_MODEL_UPLOAD_ENABLED","orgHasEdByomModelUploadEnabled",new o).add("ORG_HAS_ETL_ORCHESTRATION","orgHasEtlOrchestration",new o).add("CAN_ACCESS_ANALYTICS_PUBLIC_GALLERY","canAccessAnalyticsPublicGallery",new o).add("ORG_HAS_ANALYTICS_DATA_CATALOG_UI","orgHasAnalyticsDataCatalogUI",new o).add("CAN_USE_UNIFIED_ANALYTICS","canUseUnifiedAnalytics",new o).add("ORG_HAS_RECIPE_STAGED_DATA","orgHasRecipeStagedData",new o).add("CAN_WRITE_TO_DATA_CLOUD","canWriteToDataCloud",new o).add("CAN_CREATE_REPORTS","canCreateReports",new o).add("CAN_CREATE_DASHBOARDS","canCreateDashboards",new o).add("CAN_CREATE_REPORT_FOLDERS","canCreateReportFolders",new o).add("CAN_CREATE_DASHBOARD_FOLDERS","canCreateDashboardFolders",new o).add("CAN_SHOW_MEDIAN_AGGREGATE","canShowMedianAggregate",new o).add("HAS_DYNAMIC_FILTERING_OA","hasDynamicFilteringOA",new o).add("HAS_IMAGE_AND_RICH_TEXT_COMPONENT","hasImageAndRichTextComponent",new o).add("HAS_FIVE_FILTERS","hasFiveFilters",new o).add("HAS_POST_TO_SLACK","hasPostToSlack",new o).add("CAN_SHOW_SUMMARY_FILTER","canShowSummaryFilter",new o).add("IS_INLINE_EDITING_ENABLED","hasInlineEditing",new o).add("USER_CAN_ACCESS_DATA_MANAGER_3","userCanAccessDataManager3",new o).add("ORG_CAN_VIEW_TABLEAU","orgCanViewTableau",new o).add("ORG_CAN_VIEW_TABLEAU_WORKBOOK","orgCanViewTableauWorkbook",new o).add("WAVE_MULTI_CURRENCY_ENABLED","orgHasWaveMultiCurrencyEnabled",new o).add("EFFECTIVE_DATED_CURRENCY_ENABLED","orgHasEffectiveDatedCurrencyEnabled",new o).add("CAN_SELECT_ACCESSIBLE_THEME","canSelectAccessibleTheme",new o).add("ORG_CAN_ENABLE_SELECT_AND_NAVIGATE","orgCanEnableSelectAndNavigate",new o).add("ORG_CAN_SEE_LIVE_PREVIEWS","canOrgSeeLivePreviews",new o).add("ORG_CAN_SEE_THUMBNAILS_FOR_OA","canOrgViewThumbnailsForOA",new o).add("CAN_USE_EXPLORE_RECOMMENDATION","canUseExploreRecommendation",new o).add("CAN_USE_WATCH_RECOMMENDATION","canUseWatchRecommendation",new o).add("ORG_HAS_WATCH_ENABLED","orgHasWatchEnabled",new o).add("USER_HAS_WATCH_ENABLED","userHasWatchEnabled",new o).add("USER_HAS_EGPT_FORMULA_GENERATION_ENABLED","userHasEGPTFormulaGenerationEnabled",new o).add("USER_HAS_EGPT_REPORT_GENERATION_ENABLED","userHasEGPTReportGenerationEnabled",new o).add("USER_HAS_EGPT_REPORT_QNA_ENABLED","userHasEGPTReportQnaEnabled",new o).add("USER_HAS_EGPT_SERVICE_INTELLIGENCE_ENABLED","userHasEGPTServiceIntelligenceEnabled",new o).add("ORG_HAS_REPORT_COMPONENT_IN_DASHBOARD","orgHasReportComponentInDashboard",new o).add("IS_DATA_CLOUD_ENABLED","isDataCloudEnabled",new o).add("ORG_HAS_TABLEAU_SEAMLESS_AUTH","orgHasTableauSeamlessAuth",new o).add("USER_CAN_USE_SERVICE_INTEL","userCanUseServiceIntelligence",new o).add("USER_CAN_EXPLORE_IN_TABLEAU","userCanExploreInTableau",new o).add("ORG_HAS_TUA_ENABLED","orgHasTUAEnabled",new o).finish()},75380:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});class i{_listeners=new Set;addEventListener(e){this._listeners.add(e)}removeEventListener(e){this._listeners.delete(e)}triggerRefresh(){new Set(this._listeners).forEach((e=>e()))}}const s=new class{signal=new i;refresh(){this.signal.triggerRefresh()}}},68923:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(89370),s=r(21966);class n extends i.Z{constructor(e,t){super(e),this.appInstanceId=t??s.Z.getDeprecatedGlobalSessionId()}isForAppInstance(e){return e===this.appInstanceId}}},16045:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var i=r(18111),s=r(61506),n=r(640),o=r(96486),a=r(57003),l=r(12470);const u=new class{#E=1e4;#S;#T=50;#I;#v=!1;#R=[];setDebounceTime(e){return this.#E=e,this}setMaxBatchSize(e){return this.#T=e,this}log(e){this._clearDebounceTimeout(),this.#R.push(e),this.#v||this._flushOrScheduleLogging()}pause(){this.#v||(this.#v=!0,this._clearDebounceTimeout())}resume(){this.#v||console.warn("Tried to resume logger when not currently paused."),this.#v=!1,this._flushOrScheduleLogging()}flush(e=!1){this._clearDebounceTimeout(),null!=this.#I&&(clearTimeout(this.#I),this.#I=void 0);const t=e?{keepAlive:!0}:void 0;for(const e of(0,o.chunk)(this.#R,this.#T))s.Z.get(l.Z).postLogs(e.map((e=>e.toJson())),t).catch((e=>{s.Z.get(a.Z).reportError(`Failed to log to buoy: ${e.message}`,e).catch((e=>{console.error(`Failed to report error.\n\n${e.stack}`)}))}));this.#R=[]}_clearDebounceTimeout(){null!=this.#S&&(clearTimeout(this.#S),this.#S=void 0)}_flushOrScheduleLogging(){this.#R.length===this.#T?this.#I=setTimeout((()=>{this.flush()})):this.#S=setTimeout(this.flush.bind(this),this.#E)}};var d=r(10357),c=r(87754),h=r(78420),p=r(2265),g=r(57446),m=r(79646);class _ extends m.Z{}_.add("OPEN",new _).add("CLOSE",new _).add("UPDATE",new _).add("RERENDER",new _).finish();var f=r(9376),y=r(64745);class b{constructor(e,t){this._buoy=e,this._appInstanceId=t}onViewEvent({type:e,view:t,startTime:r}){switch(e){case _.OPEN:return this._onOpenTab(t,r);case _.CLOSE:return this._onCloseTab(t);case _.UPDATE:return this._onUpdateTab(t,performance.now());case _.RERENDER:}}_onOpenTab(e,t){const r=e.buildPathForLogging(),i=e.getRouteParametersForLogging();null!=this._currentRoute&&r===this._currentRoute.path&&(0,o.isEqual)(i,this._currentRoute.parameters)||(this._buoy.trigger(new f.e3(this._appInstanceId,e.getTabIdForLogging(),r,e.getInstanceIdForLogging(),t,e.getRenderMode()===y.Z.OMNIPRESENT,i,e.finalizeLogLine.bind(e),e.getUsageTrackingContext.bind(e))),this._currentRoute={path:r,parameters:i})}_onUpdateTab(e,t){e.isSelected()&&this._onOpenTab(e,t)}_onCloseTab(e){this._buoy.trigger(new f.JE(this._appInstanceId,e.getTabIdForLogging(),e.buildPathForLogging(),e.getInstanceIdForLogging()))}}class C extends n.Z{_globalFilters=[];_instanceFilters=new g.Z;_startedAppInstanceIds=new Set;_globalPendingRipples=[];_instancePendingRipples=new g.Z;constructor({level:e=p.Z.INFO}={}){super(),this._level=e}start({appInstanceId:e,viewManager:t,appRootElement:r}){if(this._startedAppInstanceIds.has(e))throw new Error(`Buoy already started for app instance "${e}".`);0===this._startedAppInstanceIds.size&&(this._removeGlobalEvents=this._addGlobalEvents()),this._startedAppInstanceIds.add(e);const i=this._onInteraction.bind(this,e),s=r??window,n=r??("undefined"!=typeof document?document.body:void 0);"undefined"!=typeof document&&(s.addEventListener("focusin",i),s.addEventListener("focusout",i),n?.addEventListener("click",i));const o=new b(this,e),a=t?.subscribe(o.onViewEvent.bind(o));return()=>{this._startedAppInstanceIds.delete(e),0===this._startedAppInstanceIds.size&&this._removeGlobalEvents(),this._instanceFilters.delete(e),this._instancePendingRipples.delete(e),"undefined"!=typeof document&&(s.removeEventListener("focusin",i),s.removeEventListener("focusout",i),n?.removeEventListener("click",i)),a?.()}}addGlobalFilters(e){this._globalFilters.push(...e);const t=this._globalPendingRipples;t&&(t.forEach(((t,r)=>{this._processRipple(e,t)})),this._globalPendingRipples=[])}addInstanceFilters(e,t){this._instanceFilters.getOrSet(e,(()=>[])).push(...t),this._instancePendingRipples.get(e).forEach((r=>{r.forEach(((e,r)=>{this._processRipple(t,e)})),this._instancePendingRipples.delete(e)}))}trigger(e){return this._globalFilters.length>0?this._processRipple(this._globalFilters,e):this._globalPendingRipples.push(e),this._startedAppInstanceIds.forEach((t=>{e.isForAppInstance(t)&&this._instanceFilters.get(t).ifPresentOrElse((t=>{this._processRipple(t,e)}),(()=>{this._instancePendingRipples.getOrSet(t,(()=>[])).push(e)}))})),!1}log(e){e.getLogLevel().ordinal<this._level.ordinal||u.log(e)}logError(e,t,r){e instanceof Error?this.trigger(new c.Z(e,t,r)):console.error("Encountered malformed error"+(null!=t?`: "${t}".`:"."))}_onInteraction(e,t){this.trigger(new d.Z(e,t))}_onFlush(){this._globalFilters.forEach((e=>e.flush(this))),this._instanceFilters.forEach(((e,t)=>{t.forEach((e=>{e.flush(this)}))})),u.flush(!0)}_processRipple(e,t){for(const r of e)if(!r.preTrigger(t,this))return!1;for(const r of e)r.postTrigger(t,this);return!0}_addGlobalEvents(){const e=e=>this.logError(e.reason,void 0,h.Z.LOGGING_ONLY),t=e=>this.logError(e.error,e.message,e.filename?.includes(s.Z.get(i).getStaticResourcePath())?h.Z.SEVERE:h.Z.LOGGING_ONLY),r=this._onFlush.bind(this);return"undefined"!=typeof document&&(window.addEventListener("beforeunload",r),window.addEventListener("error",t,{capture:!0}),window.addEventListener("unhandledrejection",e,{capture:!0})),()=>{"undefined"!=typeof document&&(window.removeEventListener("beforeunload",r),window.removeEventListener("error",t,{capture:!0}),window.removeEventListener("unhandledrejection",e,{capture:!0}))}}}},89370:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this.name=e,this.timestamp=Date.now(),this.pageRelativeTimestamp=performance.now()}isForAppInstance(e){return!0}}},53524:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t,r,i,s){super("COMPONENT",e),this.componentName=t,this.instanceId=r,this.level=i,this.type=s}get componentId(){return`${this.componentName}:${this.instanceId}`}toString(){return`[${this.type.getName()}] ${this.componentId}`}}},67710:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{}s.build(s,["Simple","Full","FullWithPerf"])},54772:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{}s.build(s,["Mount","Unmount","Click","StartRender","FinishRender"])},78420:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("SEVERE",new s).add("DEGRADED",new s).add("LOGGING_ONLY",new s).finish()},87754:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(89370),s=r(78420);class n extends i.Z{constructor(e,t=e.message??"[Missing Error Message]",r=s.Z.SEVERE){super("ERROR"),this.error=e,this.message=t,this.stack=e.stack,this.impact=r,this.line=e.lineNumber,this.column=e.columnNumber}}},45131:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("COMPONENT",new s).add("DASHBOARD",new s).add("DATASET",new s).add("EXPLORER",new s).add("HOME",new s).add("NOTIFICATION",new s).add("ONBOARDING",new s).add("SUBSCRIPTION",new s).add("TABLE",new s).add("WATCHLIST",new s).add("HOME_LEFT_NAV",new s).add("SUGGESTED_CONTENT",new s).add("YOUR_ANALYTICS",new s).add("APPLICATION",new s).add("RECENTS",new s).add("SEARCH",new s).add("SEARCH_TYPEAHEAD",new s).add("COLLECTION",new s).add("EMBEDDED_HOME_COLLECTION",new s).add("TEMPLATES",new s).add("TABLEAU",new s).add("TABLEAU_WORKBOOK",new s).finish()},69008:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(68923),s=r(84938);class n extends i.Z{constructor(e,t,r,{type:i=s.Z.ALL,categories:n=[],appInstanceId:o,deprecatedSubRouteOverride:a,deprecatedContext:l,deprecatedLowerCaseNamespace:u=!1}){super(t,o),this._type=i,this._namespace=e,this._categories=n,this._value=r,this._deprecatedContext=l,this._deprecatedSubRouteOverride=a,this._deprecatedLowerCaseNamespace=u}get type(){return this._type}get namespace(){return this._namespace}get value(){return this._value}get deprecatedContext(){return this._deprecatedContext}get categories(){return this._categories}get deprecatedSubRouteOverride(){return this._deprecatedSubRouteOverride}get deprecatedLowerCaseNamespace(){return this._deprecatedLowerCaseNamespace}get hash(){return[this._namespace.name,this.name].join(".")}}},84938:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("ALL",new s).add("FIRST",new s).add("AGGREGATE",new s).add("AGGREGATE_LAST",new s).add("LAST",new s).add("PARTIAL",new s).add("COMPLETE",new s).finish()},10357:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t){super("INTERACTION",e),this._event=t}getType(){return this._event.type}getParent(){const e=this.getTarget();if(e instanceof HTMLElement)return e.parentElement}getParentSerialized(){const e=this.getParent();return e?this._serializeShortElement(e):"ROOT"}getTarget(){return this._event.target}getTargetSerialized(){return this._serializeShortElement(this.getTarget())}toString(){let e=`[${this.getType()}] `;return e+=this.getTargetSerialized()+" in "+this.getParentSerialized(),e}_serializeShortElement(e){const t=[];for(const r of["id","name","class"])this._serializeAttr(e,r,t);return`<${e instanceof HTMLElement?e.tagName:"window"} ${t.join(" ")}>`}_serializeAttr(e,t,r){let i,s;return e instanceof HTMLElement&&(i=e.getAttribute(t)),null!=i&&(s=`${t}='${i}'`,r&&r.push(s)),s}}},37469:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t,r,i){super("EVENT_PERFORMANCE",e),this.eventName=t,this.duration=r,this.metadata=i}}},94607:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("INITIAL",new s).add("SKELETON",new s).add("PERCEIVED_DONE",new s).add("DONE",new s).finish()},74850:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t,r){super("REQUEST_TAG",e),this.requestName=t,this.tags=r}}},9376:(e,t,r)=>{"use strict";r.d(t,{JE:()=>a,e3:()=>o});var i=r(68923);class s extends i.Z{constructor(e,t,r,i,s){super(e,t);const{route:n,baseRoute:o}=this._getRouteParts(i);this.tabId=r,this.route=n,this.baseRoute=o,this.instanceId=s}_getRouteParts(e){let t,r=e;"/"===r.charAt(0)&&(r=r.substring(1));const i=r.indexOf("/");return t=i>=0?r.substring(0,i):r,{route:r,baseRoute:t}}}const n=async()=>({});class o extends s{constructor(e,t,r,i,s,o,a,l=((e,t)=>t.log(e)),u=n){super("ROUTE_OPEN",e,t,r,i),this.alwaysOpen=o,this.startTime=s,this.routeParameters=a,this.finalizeLogLine=l,this.getUsageTrackingContext=u}}class a extends s{constructor(e,t,r,i){super("ROUTE_CLOSE",e,t,r,i)}}},90251:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{#w;#A;execute(){throw new Error("Not implemented.")}getDescription(){throw new Error("Not implemented.")}setScreenshot(e){this.#w=e}getScreenshot(){return this.#w}addChange(e){this.getChanges().push(e)}getChanges(){return null==this.#A&&(this.#A=[]),this.#A}shouldContinueUndoRedo(){return!1}}},91942:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(31436);class s{#D;_redoStack=new i.Z;#L=!1;#M=0;#N=0;constructor(e=1/0){this.#D=e,this._commandStack=new i.Z(e)}executeCommand(e,t=!0){this.clearRedo(),this.#L||(this.#L=this.getUndoCount()===this.#D);const r=e.execute();t&&(this._commandStack.push({command:e,undo:r}),this.#M=++this.#N)}clearUndo(){this._commandStack.drain()}clearRedo(){this._redoStack.drain()}undo(e=!0){const t=this._commandStack.pop();null!=t&&(this.#M--,t.undo(),e&&this._redoStack.push(t.command),t.command.shouldContinueUndoRedo()&&this.undo(e))}redo(){const e=this._redoStack.pop();if(null==e)return;const t=e.execute();this._commandStack.push({command:e,undo:t}),this.#M++,!this._redoStack.isEmpty()&&this.peekRedo()[0].shouldContinueUndoRedo()&&this.redo()}peekUndo(e=1){return this._commandStack.peek(e).map((e=>e.command))}peekRedo(e=1){return this._redoStack.peek(e)}getUndoCount(){return this._commandStack.size()}getRedoCount(){return this._redoStack.size()}getUndoDescriptions(){const e=this._commandStack.size();return 0===e?[]:this._commandStack.peek(e).map((e=>e.command.getDescription()))}getRedoDescriptions(){const e=this._redoStack.size();return 0===e?[]:this._redoStack.peek(e).map((e=>e.getDescription()))}getLastCommandNumber(){return this.#M}isMaxReached(){return this.#L}canBeUndone(){return this.getUndoCount()>0}}},640:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{}},61506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new class{_services=new Map;register(e,t,r=!1){if(!r&&this.has(e))throw new Error(`Class already registered for service ${e.constructor.name}.`);this._services.set(e,t)}has(e){return this._services.has(e)}get(e){const t=this._services.get(e);if(null==t)throw new Error(`No class registered for service ${e.constructor.name}.`);return t}unregister(e){this._services.delete(e)}reset(){this._services=new Map}}},24585:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(61506),s=r(18111);const n=new class{isOpen(e){return i.Z.get(s).getGates()[e]??!1}getOpenGates(){const e=i.Z.get(s).getGates();return Object.keys(e).filter((t=>e[t]))}}},45772:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{constructor(e){super(),this.path=e}}s.add("DATA_PREP_OVERVIEW",new s("bi_integrate_data_prep_overview")).add("DATA_PREP_DATE_FORMAT",new s("bi_integrate_data_prep_date_format")).add("RECIPE_FORMULA_FIELDS",new s("bi_integrate_data_prep_recipe_formula_field")).add("RECIPE_TO_DATE",new s("bi_integrate_data_prep_recipe_toDate")).add("FLATTEN_LEARN_MORE",new s("bi_integrate_recipe_transformation_flatten")).add("FLATTEN_SYSTEM_FIELD_LEARN_MORE",new s("bi_integrate_system_columns")).add("MULTI_VALUE_LOOKUP",new s("bi_integrate_recipe_join_lookup_multivalue")).add("DATE_NOW_LEARN_MORE",new s("bi_integrate_recipe_now")).add("DATE_DIFFERENCE_LEARN_MORE",new s("bi_integrate_recipe_duration_between_dates")).add("DATE_ADD_SUBTRACT_LEARN_MORE",new s("bi_integrate_recipe_add_subtract_time")).add("SQL_FORMULA_EDITOR_LEARN_MORE",new s("bi_integrate_recipe_transformation_formula")).add("LEGACY_FORMULA_EDITOR_LEARN_MORE",new s("bi_integrate_recipe_transformation_simple_formula")).add("FORMULA_HELP_WITH_DATE_FUNCTION",new s("bi_integrate_recipe_dateFunctions")).add("FORMULA_HELP_WITH_MULTIVALUE_FUNCTION",new s("bi_integrate_recipe_multivalueFunctions")).add("FORMULA_HELP_WITH_NUMERIC_FUNCTION",new s("bi_integrate_recipe_numericFunctions")).add("FORMULA_HELP_WITH_STRING_FUNCTION",new s("bi_integrate_recipe_stringFunctions")).add("FORMULA_HELP_WITH_WINDOW_FUNCTION",new s("bi_integrate_recipe_windowFunctions")).add("FORMULA_HELP_WITH_ADDITIONAL_FUNCTION",new s("bi_integrate_recipe_additionalFunctions")).add("CLUSTERING_LEARN_MORE",new s("bi_integrate_recipe_transformations_cluster")).add("EDIT_ATTRIBUTES",new s("bi_integrate_recipe_transformation_editAttributes")).add("DROP_COLUMNS",new s("bi_integrate_recipe_transformation_dropColumns")).add("BUCKETING",new s("bi_integrate_recipe_transformations_bucket")).add("FORMAT_DATES",new s("bi_integrate_recipe_transformation_FormatDates")).add("SPLIT",new s("bi_integrate_recipe_transformation_split")).add("EXTRACT",new s("bi_integrate_recipe_transformation_date_extract")).add("TIME_SERIES",new s("bi_integrate_recipe_transformation_timeseriesForecasting")).add("EXPORT_TO_CSV_LEARN_MORE",new s("bi_integrate_recipe_output_results_csv")).add("GOVERNOR_LIMITS",new s("bi_integrate_recipe_design")).add("DETECT_SENTIMENT_LEARN_MORE",new s("bi_integrate_recipe_transformation_detectSentiment")).add("PREDICT_MISSING_VAL_LEARN_MORE",new s("bi_integrate_recipe_transformation_predictMissingValues")).add("FILTER",new s("bi_integrate_recipe_filter_rows")).add("UPDATE",new s("bi_integrate_recipe_update")).add("PUSHDOWN_FILTER",new s("bi_integrate_recipe_direct_data")).add("SAMPLING",new s("bi_integrate_recipe_data_sampling")).add("COPY_PASTE",new s("bi_integrate_recipe_copy_paste")).add("DATASET",new s("bi_dataset")).add("DATASET_BUILDER",new s("bi_dataset_builder")).add("DATA_INTEGRATION",new s("bi_integrate_data_integration")).add("COMPUTE_EXPRESSION",new s("bi_integrate_saql_transformation")).add("REPLICATION",new s("bi_integrate_replication")).add("EDIT_STEPS",new s("bi_dashboards_steps_edit")).add("STATIC_STEPS",new s("bi_dashboard_steps_custom_flex")).add("DATA_SOURCE_LINKING",new s("bi_dashboard_data_source_connections")).add("GLOBAL_FILTERS",new s("bi_dashboard_widgets_scope_add_flex")).add("DASHBOARD_PAGES",new s("bi_dashboards_pages")).add("COMPONENT",new s("bi_dashboard_widgets_components")).add("REPEATER",new s("bi_dashboard_repeater_widgets")).add("INPUT",new s("bi_dashboard_input_widgets")).add("INPUT_COLUMN",new s("bi_dashboard_dynamic_input")).add("TECHNICAL_REQUIREMENTS",new s("technical_requirements")).add("DASHBOARD_INSPECTOR",new s("bi_dashboards_inspector")).add("PARAMETERS",new s("bi_dashboard_components_parameters_create")).add("STEP_OPTIMIZE",new s("bi_dashboard_step_optimize")).add("FORMULA_GENERATION",new s("report_formula_generation")).add("CONVERT_CLASSIC_DASHBOARDS",new s("bi_dashboard_flex_convert")).add("EXPLORER",new s("bi_explorer_explore_dataset")).add("DATA_BLENDING",new s("bi_explorer_data_blending")).add("DYNAMIC_INPUT_QUERY_CF",new s("bi_explorer_dynamic_input_query_cf")).add("DYNAMIC_INPUT_QUERY_SAQL",new s("bi_explorer_dynamic_input_query_saql")).add("TOTALS_DOC_URL",new s("bi_explorer_table_properties")).add("MANAGE_DATA_SOURCES",new s("bi_direct_data_datacloud_joinui")).add("SHARING_GETTING_STARTED",new s("bi_security_datasets_sharing_getting_started")).add("CONFIGURE_ACTIONS",new s("bi_dashboards_actions_configure")).add("NOTIFICATIONS",new s("bi_notifications")).add("SUBSCRIPTIONS",new s("bi_subscriptions")).add("SUBSCRIPTIONS_ON_COLLECTIONS",new s("bi_subscriptions_collections")).add("ANNOTATIONS",new s("bi_dashboard_annotations")).add("WATCH",new s("bi_analytics_watch_feed")).add("DATASET_XMD",new s("bi_integrate_dataset_xmd")).add("ACTIONS_CONFIGURE",new s("bi_dashboards_actions_configure")).add("FLAT_FILE_UPLOAD",new s("bi_integrate_upload_csv_ui")).add("DATAFLOW_SCHEDULE",new s("bi_integrate_dataflowjob_reschedule")).add("DISCOVERY",new s("bi_edd")).add("DISCOVERY_WRITEBACK",new s("bi_edd_wb_native")).add("DISCOVERY_PREDICTIONS",new s("bi_edd_prediction")).add("DISCOVERY_MODEL_DEPLOY_VARIABLE",new s("bi_edd_model_deploy_variable")).add("DISCOVERY_PREDICTION_CUSTOM_TEXT",new s("bi_edd_model_deploy_custom_text")).add("DISCOVERY_DEPLOY",new s("bi_edd_model_deploy")).add("DISCOVERY_DEPLOY_MODEL_DETAIL",new s("bi_edd_model_deploy_new_existing")).add("DISCOVERY_DEPLOY_SELECT_OBJECT",new s("bi_edd_model_deploy_object")).add("DISCOVERY_DEPLOY_FIELD_MAPPING",new s("bi_edd_model_deploy_map")).add("DISCOVERY_DEPLOY_FILTER",new s("bi_edd_model_deploy_filter")).add("DISCOVERY_DEPLOY_REVIEW",new s("bi_edd_model_deploy_review")).add("DISCOVERY_DEPLOY_PUSHBACK_FIELD",new s("bi_edd_model_manager_prediction_field")).add("DISCOVERY_BYOM_UPLOAD",new s("bi_edd_model_upload")).add("DISCOVERY_DATA_ALERTS",new s("bi_edd_quality_alert")).add("DISCOVERY_DATA_ALERTS_AUC",new s("bi_edd_quality_alert_auc")).add("DISCOVERY_DATA_ALERTS_R2",new s("bi_edd_quality_alert_r2")).add("DISCOVERY_DATA_ALERTS_IMBALANCED",new s("bi_edd_data_alert_imbalanced")).add("DISCOVERY_DATA_ALERTS_CROSS_VALIDATION",new s("bi_edd_quality_cross_validation")).add("DISCOVERY_DATA_ALERTS_DISPARATE_IMPACT",new s("bi_edd_data_alert_disparate_impact")).add("DISCOVERY_DATA_ALERTS_PROXY_VARIABLE",new s("bi_edd_data_alert_proxy_variables")).add("DISCOVERY_DATA_ALERTS_OUTLIER",new s("bi_edd_data_alert_outliers")).add("DISCOVERY_DATA_ALERTS_STRONGEST_PREDICTOR",new s("bi_edd_data_alert_correlation_high")).add("DISCOVERY_DATA_ALERTS_CONST_OUTCOME",new s("bi_edd_data_alert_values_constant")).add("DISCOVERY_DATA_ALERTS_DUPLICATE",new s("bi_edd_data_alert_collinearity")).add("DISCOVERY_DATA_ALERTS_HIGH_CARDINALITY",new s("bi_edd_data_alert_cardinality")).add("DISCOVERY_DATA_ALERTS_MISSING_VALUE",new s("bi_edd_data_alert_values_missing")).add("DISCOVERY_DATA_ALERTS_MISSING_CATEGORICAL_VALUE",new s("bi_edd_data_alert_values_missing")).add("DISCOVERY_DATA_ALERTS_IDENTICAL_VALUE",new s("bi_edd_data_alert_values_identical")).add("DISCOVERY_DATA_ALERTS_SUGGESTED_BUCKET",new s("bi_edd_data_alert_buckets")).add("DISCOVERY_DATA_ALERTS_DOMINANT_VALUE",new s("bi_edd_data_alert_values_dominant")).add("DISCOVERY_DATA_ALERTS_NO_CORRELATION",new s("bi_edd_data_alert_correlation_no")).add("DISCOVERY_DATA_ALERTS_FALSE_POS_NEG",new s("bi_edd_quality_alert_false")).add("DISCOVERY_MODEL_MANAGER_LIVE_ALERTS",new s("bi_edd_model_manager_live_data_alert")).add("DISCOVERY_MODEL_REFRESH",new s("bi_edd_model_manager_refresh")).add("DISCOVERY_MODEL_NOTIFICATION",new s("bi_edd_model_manager_notify")).add("DISCOVERY_MODEL_BULK_SCORING",new s("bi_edd_model_manager_score")).add("DISCOVERY_MODEL_PERFORMANCE_CONFIG",new s("bi_edd_model_manager_accuracy")).add("DISCOVERY_PROJECT_PREDICTIONS_DATE_FIELD",new s("bi_edd_story_number")).add("DISCOVERY_SMART_SAMPLING",new s("bi_edd_smart_sampling")).add("DISCOVERY_OPTIMIZATION",new s("bi_edd_optimization")).add("DISCOVERY_OPTIMIZATION_OBJECTIVE",new s("bi_edd_optimization_objective")).add("DISCOVERY_OPTIMIZATION_VARIABLE",new s("bi_edd_optimization_configure")).add("DISCOVERY_OPTIMIZATION_FILTER",new s("bi_edd_optimization_filter")).add("DISCOVERY_OPTIMIZATION_REVIEW",new s("bi_edd_optimization_results")).add("NLQ",new s("bi_explore_conversations")).add("ONBOARDING_INTEGRATE_DATA",new s("bi_integrate_data_integration")).add("METRICS_THRESHOLD_EVALUATION",new s("bi_edd_model_metrics_threshold_evaluation_category")).add("METRICS_OVERVIEW_MEASURE",new s("bi_edd_model_metrics_overview_measure")).add("METRICS_OVERVIEW_CATEGORY",new s("bi_edd_model_metrics_overview_category")).add("METRICS_CROSS_VALIDATION_MEASURE",new s("bi_edd_model_metrics_cross_validation_measure")).add("METRICS_CROSS_VALIDATION_CATEGORY",new s("bi_edd_model_metrics_cross_validation_category")).add("METRICS_OVERAL_MEASURE",new s("bi_edd_model_metrics_overall_measure")).add("METRICS_OVERAL_CATEGORY",new s("bi_edd_model_metrics_overall_category")).add("METRICS_COEFFICIENTS_MEASURE",new s("bi_edd_model_metrics_coefficients_measure")).add("METRICS_COEFFICIENTS_CATEGORY",new s("bi_edd_model_metrics_coefficients_category")).add("METRICS_CUMULATIVE_CAPTURE_CATEGORY",new s("bi_edd_model_metrics_cumulative_capture_category")).add("METRICS_PREDICTION_EXAMINATION_MEASURE",new s("bi_edd_model_metrics_prediction_examination_measure")).add("METRICS_PREDICTION_EXAMINATION_CATEGORY",new s("bi_edd_model_metrics_prediction_examination_category")).add("TEMPLATES_PREBUILT",new s("bi_app_prebuilt")).add("TEMPLATES_PREBUILT_GETTING_STARTED",new s("bi_app_prebuilt_getting_started")).add("STORY_CARD_INSIGHT_WHY_IT_HAPPENED",new s("bi_edd_insight_why_average")).add("STORY_CARD_INSIGHT_WHAT_IS_THE_DIFFERENCE",new s("bi_edd_insight_compare_value_value")).add("MODEL_NAV_DESC_ANALYSIS_UPDATE",new s("bi_edd_model_about")).add("SOBJECT_RELATIONSHIP_FACETING",new s("bi_dashboard_sobject_connections")).add("UNIFIED_HOME_ONBOARDING",new s("bi_explorer_orient")).add("DATACLOUD_REPORT_DASHBOARD",new s("datacloud_reports_dashboards_overview")).finish()},21966:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(44709),s=r(57446);const n=new class{#O=(0,i.D)();#P=new s.Z;getDeprecatedGlobalSessionId(){return this.#O}consumeUniqueId(e){return e+this.#P.computeOrSet(e,(e=>e+1),(()=>1))}}},2265:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("FINEST",new s).add("FINE",new s).add("INFO",new s).add("WARNING",new s).add("SEVERE",new s).finish()},33854:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(96486),s=r(52115),n=r(32898),o=r(40651),a=r(90493);class l{static fromPath(e){let t=e.startsWith("/")?e.slice(1):e;const r=t.indexOf("?");r>-1&&(t=t.slice(0,r));const i=t.indexOf("/"),s=t.indexOf("/",i+1),o=(0,n.getQueryParams)(e),u=o.get(a.STATE),d=void 0!==u?atob(u):void 0;let c;if(void 0!==d)try{c=JSON.parse(d)}catch(e){throw new Error(`Invalid state passed in query param. ${d}. Error: ${e}`)}return new l({baseRoute:-1===i?t:t.slice(0,i),instanceId:-1===i?void 0:t.slice(i+1,-1===s?t.length:s),extendedHash:-1===s?void 0:t.slice(s+1),queryParams:o,state:c})}constructor({baseRoute:e,instanceId:t,instance:r,extendedHash:i,queryParams:n=new Map,state:o,replaceState:a=!1,historyState:l,contextFolderId:u,options:d={}}){this._baseRoute=e,this._instanceId=t,this._instance=r,this._extendedHash=i,this._queryParams=n,this._state=o,this._replaceState=a,this._historyState=l,this._contextFolderId=u,this._options=d,this._afterNavigate=new s}getPath(){const e=this.getInstanceId(),t=this.getExtendedHash();return(0,n.appendParams)(`/${this.getBaseRoute()}${e?`/${e}`:""}${t?`/${t}`:""}`,this._queryParams)}isEqual(e,t){const r=this.getBaseRoute()===e.getBaseRoute()&&this.getInstanceId()===e.getInstanceId()&&this.getExtendedHash()===e.getExtendedHash();return t?r&&(0,i.isEqual)(this.getQueryParams(),e.getQueryParams())&&(0,i.isEqual)(this.getInstance(),e.getInstance())&&(0,i.isEqual)(this.getState(),e.getState())&&(0,i.isEqual)(this.getOptions(),e.getOptions())&&(0,i.isEqual)(this.getHistoryState(),e.getHistoryState()):r}hasBaseRoute(){return null!=this._baseRoute||null!=this._instance}getBaseRoute(){const e=null!=this._instance?this._instance.type:this._baseRoute;if(o.Z.hasCode(e))return(0,a.getBaseRoute)(o.Z.fromCode(e));if(null==e)throw new Error("Target requires base route.");return e}getInstanceId(){return this._instanceId??this._instance?.id}getInstance(){return this._instance}getExtendedHash(){return this._extendedHash}getQueryParams(){return this._queryParams}getState(){return this._state}shouldReplaceState(){return this._replaceState}getHistoryState(){return this._historyState}getContextFolderId(){return this._contextFolderId}getOptions(){return this._options}getSourceTarget(){return this._options.sourceTarget}setInstance(e){this._instance=e}setExtendedHash(e){this._extendedHash=e}setState(e){this._state=e}isPreload(){return this._queryParams.has("preload")}normalize(e){return new l({baseRoute:this._baseRoute??e.getBaseRoute(),instanceId:this._instanceId??e.getInstanceId(),instance:this._instance,extendedHash:this._extendedHash??e.getExtendedHash(),queryParams:this._queryParams,state:this._state,replaceState:this._replaceState,contextFolderId:this._contextFolderId,options:this._options,historyState:this._historyState})}setNavigateComplete(e){this._afterNavigate.resolve(e)}getAfterNavigate(){return this._afterNavigate.promise()}cloneWithNewRoute({baseRoute:e,instanceId:t,instance:r,extendedHash:i,queryParams:s,state:n,replaceState:o,contextFolderId:a,options:u,historyState:d}){return new l({baseRoute:e??this._baseRoute,instanceId:t??this._instanceId,instance:r??this._instance,extendedHash:i??this._extendedHash,queryParams:s??this._queryParams,state:n??this._state,replaceState:o??this._replaceState,contextFolderId:a??this._contextFolderId,options:u??this._options,historyState:d??this._historyState})}}},66351:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(15568),s=r(26711),n=r(68776),o=r(33854);class a{_nextSubscriptionId=0;_subscriptions=new Map;constructor(e,t,{appContext:r,appPath:i="",rootPath:s="",handleError:n,shouldOpenInNewWindow:o,openInNewWindow:a,initialRouteError:l,redirects:u=[]}){this._routeDefinitions=e,this._history=t,this._appContext=r,this._appPath=i,this._rootPath=s,this._handleError=n,this._shouldOpenInNewWindow=o,this._openInNewWindow=a,this._initialRouteError=l,this._redirects=u}start(){this._redirectLegacyRoutes(),null==this._initialRouteError?this._onRouteChange(this._history.location):this._handleError(this._initialRouteError);return this._history.listen((({location:e})=>{this._onRouteChange(e)}))}subscribe(e){const t=this._nextSubscriptionId++;return this._subscriptions.set(t,e),()=>{this._subscriptions.delete(t)}}buildPath(e){const t=0===e.indexOf("/")?e:`/${e}`;return`${this._rootPath}${t}`}buildExternalPath(e){return`${this._appPath}${e}`.replace(/\/\/+/g,"/")}back(){this._history.back()}refresh(){this._history.go(0)}preloadCode(e){const t=this._matchRoute(e);null!=t&&this._canAccess(t)&&t?.route.preloadCode?.()}preloadData(e,t){const r=this._matchRoute(e);if(null!=r&&this._canAccess(r))return r?.route.preloadData?.(r.params,t,this._appContext)}route(e,{replace:t=!1,newWindow:r,externalLink:i}={}){const n="string"==typeof e?o.Z.fromPath(e):this._normalizeTarget(e),a=r??this._shouldOpenRouteInNewWindow(n);if(!t&&a)return void this._openInNewWindow(i?this.buildExternalPath.bind(this):this.buildPath.bind(this),n);this._nextTarget=n;const l={search:"",hash:"",...(0,s.cP)(this.buildPath(n.getPath()))};t?this._history.replace(l):this._history.push(l)}getSourceTarget(){return this._currentEntry?.target.getSourceTarget()}async _onRouteChange(e){const t=performance.now(),r=this._nextTarget??o.Z.fromPath(this._normalizePath(e.pathname)+e.search);let i=r;for(const e of this._redirects)if(e.matches(r)){i=await e.getDestination(r);break}const s=this._matchRoute(this._rootPath+i.getPath());if(null!=s&&this._canAccess(s)){const r=this._preload(e,i,s);this._currentEntry={location:e,routeMatch:s,target:i,preloadedData:r},i.isPreload()||this._subscriptions.forEach((e=>{e.onRouteChange({target:i,routeDefinition:s.route,preloadedData:r,startTime:t})}))}else this._handleError(n.Z.invalidRoute(e.pathname));delete this._nextTarget}_preload(e,t,r){for(const e of this._subscriptions.values())if(e.shouldSkipPreload?.(t,r.route))return;return null!=this._currentEntry&&this._currentEntry.target.isPreload()&&this._currentEntry.target.isEqual(t,!1)?this._currentEntry.preloadedData:(this.preloadCode(e.pathname),this.preloadData(e.pathname,t))}_redirectLegacyRoutes(){if(this._history.location.hash){const e=`${this._rootPath}/${this._history.location.hash.slice(1)}`;this._matchRoute(e)&&this._history.replace({pathname:e,hash:""})}else this._history.location.pathname.startsWith(this._rootPath)||this._history.replace({pathname:this._rootPath})}_matchRoute(e){return((0,i.fp)(this._routeDefinitions,e,this._rootPath)??[])[0]}_normalizePath(e){const t=this._rootPath&&e.startsWith(this._rootPath)?e.slice(this._rootPath.length):e;return""===t?"/home":t}_normalizeTarget(e){if(e.hasBaseRoute())return e;if(null==this._currentEntry)throw new Error("Initial route requires base route.");return e.normalize(this._currentEntry.target)}_canAccess(e){return null==e.route.accessCheck||e.route.accessCheck(e.params)}_shouldOpenRouteInNewWindow(e){const t=this._currentEntry?.routeMatch.route,r=this._matchRoute(this.buildPath(e.getPath()))?.route;return null!=t&&null!=r&&this._shouldOpenInNewWindow(e,t,r)}}},39918:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=(0,r(67294).createContext)({get router(){throw new Error("Router must be supplied via context.")}})},68776:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(8429);class s extends Error{static invalidRoute(e){return new s(i.Z.getLabel("CommonErrorMsg","routingError"),i.Z.getLabel("CommonErrorMsg","invalidRoute",e))}constructor(e,t){super(t),this.title=e}}},22058:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(8429),s=r(60745),n=r(10683),o=r(13132),a=r(640);class l extends a.Z{_sObjectToParentMap=new Map;_sObjects=new Map;constructor(e){super(),this._sObjectApi=e}getSObjects(){return null==this._sObjectsPromise&&(this._sObjectsPromise=this._sObjectApi.getAllSObjects().then((e=>e.sobjects.map((e=>{const t=new s(e,this),r=t.getName();return this._sObjects.has(r)||this._sObjects.set(r,Promise.resolve(t)),t}))))),this._sObjectsPromise}getSObject(e){let t=this._sObjects.get(e);return t||(t=this._sObjectApi.describeSObject(e).then((e=>new s(e,this))).catch((t=>{throw t.message=i.Z.getLabel("ErrorMsg","errorGettingSObject",e,t.message),t})),this._sObjects.set(e,t)),t}getParentSObjectsInfo(e,t=!1,r){let i=this._sObjectToParentMap.get(e);if(null!=i)return i=null!=r?i.filter((e=>r.includes(e.sObject))):i,Promise.resolve(t?i.filter((e=>!e.hasMultipleRelationshipsToParent)):i);{const s=new Map;return i=[],this.getSObject(e).then((e=>e.getFields())).then((n=>(n.forEach((t=>{t.getReferenceNames().length>0&&t.getType()===o.REFERENCE&&t.getReferenceNames().forEach((r=>{r!==e&&(s.set(r,(s.get(r)||0)+1),i?.push({sObject:r,relationshipName:t.getRelationshipName(),isPolymorphic:t.isPolymorphic(),hasMultipleRelationshipsToParent:!1}))}))})),this._sObjectToParentMap.set(e,i),i?.forEach((e=>{(s.get(e.sObject)||0)>1&&(e.hasMultipleRelationshipsToParent=!0)})),i=null!=r?i?.filter((e=>r.includes(e.sObject))):i,t?i?.filter((e=>!e.hasMultipleRelationshipsToParent)):i)))}}getFields(e){return this._sObjectApi.describeSObject(e.getName()).then((e=>e.fields.map((e=>new n(e,this)))))}}},22516:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(96486),s=r(53373),n=r(68923);class o extends n.Z{constructor(e,t,r,i,s,n){super("PAGE_LOAD",e),this.tabId=t,this.state=r,this.tabIdWithoutExtendedHash=i,this.assetMetrics=s,this.postLoadMetrics=n}}var a=r(94607),l=r(52115),u=r(61506),d=r(16045);const c=/[?&@\s]|%20/,h=/([?&@\s]|%20).*$/;class p{#x;_hotkeyManager=new s;_isHotkeySuppressed=!1;_removed=!1;_isReady=!1;_ready=new l;#Z;constructor(e,t,r){this._viewConfig=e,this._target=t}_addNotification(e,t){if(null==this.#Z)throw new Error("Add notification is not defined");this.#Z(e,t)}connect(e,t){this._viewManager=e,this.#x=t}didMount(e,t,r){this._parentRC=e,this._ref=t,this.#Z=r}willUnmount(){delete this._parentRC,delete this._ref,this.#Z=void 0}onTabExit(){this.getReactComponent()?.onTabExit?.()}onTabEnter(){this.getReactComponent()?.onTabEnter?.()}getExtendedHash(){return this._target.getExtendedHash()}getTarget(){return this._target}getReactComponent(){return this._parentRC?.refs[this._ref]}getContextualHelp(){return this.getViewConfig().contextualHelp}setHotkeySuppressed(e){this._isHotkeySuppressed=e}getHotkeyManager(){if(!this._isHotkeySuppressed)return this._hotkeyManager}getReadyState(){return this._ready.promise()}isReady(){return this._isReady}async load(){}create(){throw new Error("Not implemented.")}remove(){this._removed=!0}isRemoved(){return this._removed}getInstanceId(){return this._target.getInstanceId()}getName(){throw new Error("Not implemented.")}getRenderMode(){return this.getViewConfig().renderMode}getViewConfig(){return this._viewConfig}buildPath(){let e=this.getViewConfig().baseRoute;const t=this.getInstanceId();t&&(e+=`/${t}`);const r=this.getExtendedHash();return r&&(e+=`/${r}`),e}buildPathForLogging(){return this.buildPath().split(c)[0]}_getTabIdHelper(e=!1,t=!1){const{baseRoute:r,reopenCount:i}=this.getViewConfig();let s=r,n=this.getInstanceId();if(n&&(t&&(n=this.scrubQueryParams(n)),s+=`-${n}`),s=`${s}-${i}`,e){const e=this.buildPathForLogging(),[,,t]=e.split("/");t&&"dashboard"===r&&(s=`${s}-${t}`)}return s}getTabId(e=!1){return this._getTabIdHelper(e)}scrubQueryParams(e){return e?.replace(h,"")}getTabIdForLogging(e=!1){return this._getTabIdHelper(e,!0)}getUniqueId(){return this._uniqueId||(this._uniqueId=(0,i.uniqueId)("view_")),this._uniqueId}getInstanceIdForLogging(){return this.buildPathForLogging().split("/")[1]}getRouteParametersForLogging(){return{}}replaceUrl(e=!1){if(this.isRemoved())return;const t=this._target.cloneWithNewRoute({baseRoute:this.getViewConfig().baseRoute,instanceId:this.getInstanceId(),extendedHash:this.getExtendedHash()});!e&&this._target.isEqual(t,!0)||(this._target.getInstanceId()!==this.getInstanceId()&&(this._target=t),this._route(t,{replace:!0}))}updateTarget(e){this._target=e,this._refreshView()}isSelected(){return null!=this._viewManager&&this._viewManager.isSelectedView(this)}close(){this._viewManager?.closeView(this)}update(){this._viewManager?.updateView(this)}getChromeMode(){return this._viewConfig.getChromeMode()}hasUnsavedChanges(){return!1}getTabClosingWarningDescriptor(){return{}}getFavoriteContext(){}finalizeLogLine(e,t){t.log(e)}async getUsageTrackingContext(){return{}}_rerender(){this._viewManager?.rerenderView(this)}_refreshView(){this.replaceUrl(),this.update()}_setReady(){this._isReady=!0,this._ready.resolve()}_resetReadyState(){this._isReady=!1,this._ready=new l}_onComponentLoaded(e,t,r){e===a.Z.DONE&&this._setReady(),u.Z.get(d.Z).trigger(new o(this._viewConfig.appContext.appInstanceId,this.getTabIdForLogging(!0),e,this.getTabIdForLogging(!1),this._getAssetMetricsForLogging(t),r))}_getAssetMetricsForLogging(e){}_route(e,t){if(null==this.#x)throw new Error("Router not set.");this.#x.route(e,t)}}},72084:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor({baseRoute:e,renderMode:t,category:r,contextualHelp:i,isSingleton:s,accessCheck:n,appContext:o,isOnScreen:a,reopenCount:l}){this.baseRoute=e,this.renderMode=t,this.category=r,this.contextualHelp=i,this.isSingleton=s,this.reopenCount=l,this.appContext=o,this._accessCheck=n,this._isOnScreen=null==a||a}getChromeMode(){return this.appContext.chromeMode}isOnScreen(){return this._isOnScreen}getOpenLocation(){return this.appContext.openLocation}getPageContext(){return this.appContext.pageContext}getShowHeader(){return this.appContext.showHeader}getShowTitle(){return this.appContext.showTitle}getShowSharing(){return this.appContext.showSharing}getShowPostToSlack(){return this.appContext.showPostToSlack}getEnableNotifications(){return this.appContext.enableNotifications}getEnableSubscriptions(){return this.appContext.enableSubscriptions}getAnalyticsMode(){return this.appContext.analyticsMode}clone(e){return new i({baseRoute:e.baseRoute??this.baseRoute,renderMode:this.renderMode,category:this.category,contextualHelp:this.contextualHelp,isSingleton:this.isSingleton,accessCheck:this._accessCheck,appContext:this.appContext,isOnScreen:this._isOnScreen,reopenCount:this.reopenCount})}}},46125:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(64745);class s{constructor({path:e,exact:t=!1,loadView:r,category:s,renderMode:n=i.Z.TAB,accessCheck:o,prepare:a,contextualHelp:l,singleton:u=!1}){this.path=e,this.exact=t,this.loadView=r,this.category=s,this.renderMode=n,this.accessCheck=o,this.contextualHelp=l,this.singleton=u,this._prepare=a}preloadCode(){this.loadView()}preloadData(e,t,r){return this._prepare?.(e,t,r)}}},64745:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("TAB",new s).add("FULL_PAGE",new s).add("OMNIPRESENT",new s).finish()},71761:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(8429);class s{constructor(e,t){this._fromDate=e,this._toDate=t}isOpenEndedFrom(){return null==this._fromDate}isOpenEndedTo(){return null==this._toDate}getFromDate(){return this._fromDate}getToDate(){return this._toDate}isEqual(e,t){const r=e.getFromDate(),i=null==this._fromDate&&null==r||null!=this._fromDate&&null!=r&&this._fromDate.isEqual(r,t),s=e.getToDate(),n=null==this._toDate&&null==s||null!=this._toDate&&null!=s&&this._toDate.isEqual(s,t);return i&&n}getHash(){return(null!=this._fromDate?this._fromDate.getHash():"")+"-"+(null!=this._toDate?this._toDate.getHash():"")}toLocalizedString(){if(null!=this._fromDate&&null!=this._toDate)return i.Z.getLabel("Range",this._getLocalizedStringLabelName(),this._fromDate.toLocalizedString(),this._toDate.toLocalizedString());if(null!=this._fromDate)return i.Z.getLabel("FilterOperatorValueDisplayLabel","dateOperatorGreaterOrEqual",this._fromDate.toLocalizedString());if(null!=this._toDate)return i.Z.getLabel("FilterOperatorValueDisplayLabel","dateOperatorLessOrEqual",this._toDate.toLocalizedString());throw new Error("Invalid date range.")}_getLocalizedStringLabelName(){throw new Error("Not implemented.")}}},28537:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8644),s=r(74978);class n{constructor(e){this._date=new Date(e)}getYear(){return this._date.getUTCFullYear()}getMonth(){return this._date.getUTCMonth()}getDate(){return this._date.getUTCDate()}getEpochMillis(){return this._date.valueOf()}isEqual(e,t=!1){return e instanceof n&&(t?this.toLocalizedString()===e.toLocalizedString():this.getEpochMillis()===e.getEpochMillis())}toLocalizedString(){return i.formatDateInUtc(this._date,i.DATE_SHORT)}toDateString(){return`${this.getYear()}-${this._leftPadZero(this.getMonth()+1,2)}-${this._leftPadZero(this.getDate(),2)}`}getHash(){return this.getEpochMillis().toString()}_leftPadZero(e,t){return s.leftPad(String(e),t,"0")}}},33044:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(71761);class s extends i.Z{constructor(e,t){super(e,t)}_getLocalizedStringLabelName(){return"startDashEnd"}}},11652:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t,r){this._label=e,this._dateRange=t,this._code=r}getLabel(){return this._label.toString()}getCode(){return this._code.toString()}getDateRange(){return this._dateRange}getHash(){return this._dateRange.getHash()}}},5305:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this._label=e,this._presets=t}getLabel(){return this._label.toString()}getPresets(){return this._presets}}},20635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(79646),s=r(8429);class n extends i.Z{constructor({labelName:e,needsInput:t}){super(),this._labelName=e,this._needsInput=t}getLabel(){return s.Z.getLabel("DateRangeSelector",this._labelName)}needsInput(){return this._needsInput}}n.add("BETWEEN",new n({labelName:"operatorBetween",needsInput:!0})).add("LESS_OR_EQUALS",new n({labelName:"operatorLessEqual",needsInput:!0})).add("GREATER_OR_EQUALS",new n({labelName:"operatorGreaterEqual",needsInput:!0})).add("IS_NULL",new n({labelName:"operatorIsNull",needsInput:!1})).add("IS_NOT_NULL",new n({labelName:"operatorIsNotNull",needsInput:!1})).finish()},13728:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(79646),s=r(8429);class n extends i.Z{constructor({singularLabelName:e,pluralLabelName:t,relativeToLabelName:r,fiscalRelativeToLabelName:i}){super(),this._singularLabelName=e,this._pluralLabelName=t,this._relativeToLabelName=r,this._fiscalRelativeToLabelName=i}getMomentKey(){return this.name.toLowerCase()}getEclairNgKey(){return this.getMomentKey()}getLabel(e,t){const r=e?this._singularLabelName:this._pluralLabelName;return t?s.Z.getLabel("DateGrainUpperCase",r):s.Z.getLabel("DateGrain",r)}getRelativeToLabel(e,t){const r=t?"RelativeToDateUpperCase":"RelativeToDateLowerCase";return this._getRelativeToLabel(r,e)}getRelativeToAcronymLabel(e){return this._getRelativeToLabel("RelativeToDateAcronym",e)}getDateLabel(e,t){const r=e?"grainAgo":"grainAhead";return s.Z.getLabel("RelativeDate",r,this.getLabel(t,!1))}_getRelativeToLabel(e,t){const r=t?this._fiscalRelativeToLabelName:this._relativeToLabelName;if(null==r)throw new Error("Missing relative to label for grain.");return s.Z.getLabel(e,r)}}n.add("YEAR",new n({singularLabelName:"year",pluralLabelName:"years",relativeToLabelName:"currentYear",fiscalRelativeToLabelName:"currentFiscalYear"})).add("QUARTER",new n({singularLabelName:"quarter",pluralLabelName:"quarters",relativeToLabelName:"currentQuarter",fiscalRelativeToLabelName:"currentFiscalQuarter"})).add("MONTH",new n({singularLabelName:"month",pluralLabelName:"months",relativeToLabelName:"currentMonth",fiscalRelativeToLabelName:"currentFiscalMonth"})).add("WEEK",new n({singularLabelName:"week",pluralLabelName:"weeks",relativeToLabelName:"currentWeek",fiscalRelativeToLabelName:"currentFiscalWeek"})).add("DAY",new n({singularLabelName:"day",pluralLabelName:"days",relativeToLabelName:"today"})).add("HOUR",new n({singularLabelName:"hour",pluralLabelName:"hours"})).add("MINUTE",new n({singularLabelName:"minute",pluralLabelName:"minutes"})).add("SECOND",new n({singularLabelName:"second",pluralLabelName:"seconds"})).finish()},5082:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(13728),s=r(8644),n=r(8429);class o{constructor(e,t,r){this._grain=e,this._offset=t,this._isFiscal=r}getGrain(){return this._grain}getOffset(){return this._offset}isFiscal(){return this._isFiscal}getEpochMillis(e){const t=new Date,r=this.getGrain().getMomentKey(),i=e?s.startOfInZone(t,r,"UTC"):s.endOfInZone(t,r,"UTC"),n={[r]:this.getOffset()};return s.plusInZone(i,n,"UTC").valueOf()}isEqual(e,t=!1){return e instanceof o&&this.getGrain()===e.getGrain()&&this.getOffset()===e.getOffset()&&this.isFiscal()===e.isFiscal()}toLocalizedString(){const e=Math.abs(this._offset);return 0===this._offset?this._grain===i.Z.DAY?n.Z.getLabel("RelativeToDateLowerCase","today"):this._grain.getRelativeToLabel(this.isFiscal(),!1):e+" "+this._grain.getDateLabel(this._offset<0,1===e)}getHash(){return this.getGrain().name+"-"+this.getOffset()+"-"+String(this.isFiscal())}}},73096:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(71761),s=r(13728);class n extends i.Z{constructor(e,t){super(e,t)}getGrain(){if(null!=this._fromDate&&null!=this._toDate)return this._fromDate.getGrain()===s.Z.DAY?this._toDate.getGrain():this._fromDate.getGrain();if(null!=this._fromDate)return this._fromDate.getGrain();if(null!=this._toDate)return this._toDate.getGrain();throw new Error("Invalid date range.")}isFiscal(){return Boolean(this._fromDate?.isFiscal()||this._toDate?.isFiscal())}_getLocalizedStringLabelName(){return"startToEnd"}}},93892:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{}s.build(s,{COLUMN:"column",ROW:"row",NONE:"none"})},51841:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(723);class s extends i{getCode(){return this._value.value}static getDefaultValue(){return s.ENTERPRISE_EDITION}}s.build(s,{ENTERPRISE_EDITION:{value:"Enterprise Edition"},PROFESSIONAL_EDITION:{value:"Professional Edition"},TEAM_EDITION:{value:"Team Edition"},CONTACT_MANAGER_EDITION:{value:"Contact Manager Edition"},PERSONAL_EDITION:{value:"Personal Edition"},DEVELOPER_EDITION:{value:"Developer Edition"},BASE_EDITION:{value:"Base Edition"},UNLIMITED_EDITION:{value:"Unlimited Edition"}})},51007:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>n});class i{static unapply(...e){return this.u(...e)}static u(...e){const t=this;if(t.C_ARGS.length!==arguments.length)throw new Error("Mismatched argument lengths.");return r=>{if(!(r instanceof this))return!1;const i={};return!!e.every(((e,s)=>{if("string"==typeof e)return i[e]=r[t.C_ARGS[s]],!0;{const n=e(r[t.C_ARGS[s]]);return n instanceof Object&&Object.entries(n).forEach((e=>i[e[0]]=e[1])),!!n}}))&&i}}}class s{static v(e){return t=>e===t}static _(){return!0}static n(e){return null==e}static case(e,t){return(new s).case(e,t)}constructor(){this._cases=[]}case(e,t){return this._cases.push([e,t]),this}match(e){let t=null;if(this._cases.find((r=>{const i=r[0](e);return"boolean"==typeof i?(i&&(t=r[1]({})),i):(t=r[1](i),!0)})),null==t)throw new Error("Inexhaustive match.");return t}}class n extends i{static some(e){return new a(e)}static none(){return new o}get(){return s.case(a.u("v"),(({v:e})=>e)).case(s._,(()=>{throw new Error("Cannot force get an empty option.")})).match(this)}getOrElse(e){return s.case(a.u("v"),(({v:e})=>e)).case(s._,(()=>e())).match(this)}orElse(e){return s.case(a.u("v"),(()=>this)).case(s._,(()=>e())).match(this)}every(e){return this.map(e).getOrElse((()=>!1))}forEach(e){s.case(a.u("v"),(({v:t})=>(e(t),!0))).case(s._,(()=>!1)).match(this)}flatMap(e){return s.case(a.u("v"),(({v:t})=>e(t))).case(s._,(()=>new o)).match(this)}map(e){return s.case(a.u("v"),(({v:t})=>new a(e(t)))).case(s._,(()=>new o)).match(this)}filter(e){return s.case(a.u("v"),(({v:t})=>e(t)?this:new o)).case(s._,(()=>new o)).match(this)}ifPresentOrElse(e,t){s.case(a.u("v"),(({v:t})=>(e(t),!0))).case(s._,(()=>(t(),!1))).match(this)}isEmpty(){return s.case(o.u(),(()=>!0)).case(s._,(()=>!1)).match(this)}}class o extends n{static C_ARGS=[]}class a extends n{static C_ARGS=["value"];constructor(e){super(),this.value=e}}},57446:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(51007);class s{constructor(e){this._map=new Map(e)}has(e){return this._map.has(e)}get(e){return this._map.has(e)?i.ZP.some(this._map.get(e)):i.ZP.none()}getOrSet(e,t){return this.get(e).getOrElse((()=>{const r=t();return this._map.set(e,r),r}))}set(e,t){return this._map.set(e,t),this}computeOrSet(e,t,r){const i=this._map.get(e);if(null!=i){const r=t(i);return this._map.set(e,r),r}{const t=r();return this._map.set(e,t),t}}delete(e){return this.get(e).map((t=>(this._map.delete(e),t)))}forEach(e){for(const t of this._map)e(t[0],t[1])}map(e){const t=new s;for(const r of this._map)t.set(r[0],e(r[0],r[1]));return t}get size(){return this._map.size}entries(){const e=[];return this.forEach(((t,r)=>{e.push([t,r])})),e}[Symbol.iterator](){return this._map[Symbol.iterator]()}keys(){return this._map.keys()}values(){return this._map.values()}}},31399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(67294);function s(e){const t=(0,i.useRef)();return(0,i.useEffect)((()=>{t.current=e}),[e]),t.current}},91025:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(62517);const s=new class{setDragPayload(e){return this._dragPayload=e,this}getDragPayload(){return this._dragPayload}setDragOverPayload(e){return this._dragOverPayload=e,this}getDragOverPayload(){return this._dragOverPayload}setDropped(){return this._dropped=!0,this}isDropped(){return this._dropped}setDropDirection(e){return this._dropDirection=e,this}setActiveZone(e){return this._activeZone=e,this}getActiveZone(){return this._activeZone}getDropDirection(){return this._dropDirection}registerZoneNavigation(e,t){this._zoneNavigation||(this._zoneNavigation={}),this._zoneNavigation[e]=t}navigateToOtherZone(e,t,r){const i=this._zoneNavigation[e];i&&i.onMoveFromOtherZone(t,r)}notifyOtherZoneToCancelMove(e){const t=this._zoneNavigation[e];t&&t.onCancelInOtherZone()}notifyOtherZoneToMove(e){const t=this._zoneNavigation[e];t&&t.onMoveConfirmInOtherZone()}removeZoneNavigation(e){this._zoneNavigation[e]=null}reset(){this._dragPayload=null,this._dragOverPayload=null,this._dropped=!1,this._dropDirection=null}makePayload(e){return Object.assign({name:"",index:-1,originalIndex:-1,interactionZoneName:"",value:"",reportType:"",isCommon:!1,detailIndices:[],blockIndex:NaN,blockId:"",itemSize:0,direction:i.BEFORE,isKeyboard:!1},e)}makeMultiPayload(e){return Object.assign({name:"",reportType:"",direction:i.BEFORE,isKeyboard:!1,items:[]},e)}makePayloadItem(e){return Object.assign({index:-1,originalIndex:-1,interactionZoneName:"",value:"",isCommon:!1,detailIndices:[],blockIndex:NaN,blockId:"",itemSize:0},e)}convertPayloadItemToPayload(e,t){return{name:e.name,index:t.index,originalIndex:t.originalIndex,interactionZoneName:t.interactionZoneName,value:t.value,reportType:e.reportType,isCommon:t.isCommon,detailIndices:t.detailIndices,blockIndex:t.blockIndex,blockId:t.blockId,itemSize:t.itemSize,direction:e.direction,isKeyboard:e.isKeyboard}}getSinglePayloadFromZone(e){if(!e.items)return e;{const t=e;if(t.items&&1===t.items.length)return this.convertPayloadItemToPayload(t,t.items[0])}}getMultiPayloadFromZone(e){if(e.items)return e;{const t=e,r=this.makePayloadItem({index:t.index,originalIndex:t.originalIndex,interactionZoneName:t.interactionZoneName,value:t.value,isCommon:t.isCommon,detailIndices:t.detailIndices,blockIndex:t.blockIndex,blockId:t.blockId,itemSize:t.itemSize});return this.makeMultiPayload({name:t.name,reportType:t.reportType,direction:t.direction,isKeyboard:t.isKeyboard,items:[r]})}}}},53973:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static finish(){return Object.freeze(this)}static fromName(e){const t=this._NAME_TO_ENUM.get(e);if(!t)throw new Error(`Cannot find enum for name '${e}'.`);return t}static hasName(e){return this._NAME_TO_ENUM.has(e)}static fromOrdinal(e){const t=Array.from(this._NAME_TO_ENUM.values())[e];if(!t)throw new Error(`No enum found at ordinal ${e}.`);return t}static[Symbol.iterator](){return this._NAME_TO_ENUM.values()}static enums(){return Array.from(this._NAME_TO_ENUM.values())}}},69370:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(53973);class s extends i.Z{static add(e,t,r){return this._NAME_TO_ENUM&&this._CODE_TO_ENUM||(this._NAME_TO_ENUM=new Map,this._CODE_TO_ENUM=new Map),this._NAME_TO_ENUM.set(e,r),Object.defineProperty(this,e,{value:r,writable:!1}),Object.defineProperties(this[e],{name:{value:e,enumerable:!0,writable:!1},ordinal:{value:this._NAME_TO_ENUM.size-1,enumerable:!0,writable:!1}}),this._CODE_TO_ENUM.set(t,r),Object.defineProperty(this[e],"code",{value:t}),this}static getDefaultValue(){throw new Error("Not implemented.")}static fromCode(e){const t=this._CODE_TO_ENUM.get(e);if(!t)try{return this.getDefaultValue()}catch{throw new Error(`Cannot find enum for code '${e}'.`)}return t}static hasCode(e){return this._CODE_TO_ENUM.has(e)}}},79646:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(53973);class s extends i.Z{static add(e,t){return this._NAME_TO_ENUM||(this._NAME_TO_ENUM=new Map),this._NAME_TO_ENUM.set(e,t),Object.defineProperty(this,e,{value:t,writable:!1}),Object.defineProperties(this[e],{name:{value:e,enumerable:!0,writable:!1},ordinal:{value:this._NAME_TO_ENUM.size-1,enumerable:!0,writable:!1}}),this}}},74364:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(96486);const s=new class{initialize(e){this._staticLabels=e}getRawLabel(e,t){if("undefined"==typeof $A)return"";if(!(0,i.has)($A.get("$Label"),[e,t])){if(null!=this._staticLabels?.[e]?.[t])return this._staticLabels[e][t];console.error(`No label found for section "${e}" and name "${t}".`)}return $A.get(`$Label.${e}.${t}`)}}},8429:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(74364);const n={FieldIcon:{"measure-1":"measure_1"},DataPrep:{"day_-1":"day__1"},ChartTypeLongName:{"time-bar":"time_bar","time-combo":"time_combo"},ChartType:{"time-bar":"time_bar","time-barTooltip":"time_barTooltip","time-combo":"time_combo","time-comboTooltip":"time_comboTooltip"},InvalidChartTypeErrorMessages:{"time-bar":"time_bar","time-combo":"time_combo"},EclairNgMapTypeLabels:{"US States":"US_States","World Countries":"World_Countries","North America":"North_America","South America":"South_America","Central America":"Central_America","Eastern Europe":"Eastern_Europe","Northern Europe":"Northern_Europe","Southern Europe":"Southern_Europe","Western Europe":"Western_Europe","Central Europe":"Central_Europe","South Asia":"South_Asia","South East Asia":"South_East_Asia","East Asia":"East_Asia","East Africa":"East_Africa","Middle Africa":"Middle_Africa","North Africa":"North_Africa","Southern Africa":"Southern_Africa","Western Africa":"Western_Africa"}};class o{static getLabel(e,t,...r){let i="";return e&&t&&(i=s.Z.getRawLabel(e,n[e]?.[t]??t)),r.forEach(((e,t)=>{i=i.replace(new RegExp(`\\{${t}\\}`,"g"),(()=>String(e)))})),i}static getLabelWithArray([e,t,...r]){if("string"!=typeof e||"string"!=typeof t)throw new Error("Invalid section or name.");return this.getLabel(e,t,...r)}static toSentence(e,{isStrict:t=!0,connector:r="and"}={}){const s=Array.isArray(e)?e:Array.from(e);if((0,i.isEmpty)(s)){if(t)throw new Error("At least one label is required.");return""}return 1===s.length?s[0]:2===s.length?s.join(o.getLabel("Language",`${r}TwoTermsConnector`)):s.slice(0,s.length-1).join(o.getLabel("Language","termsConnector")).concat(o.getLabel("Language",`${r}LastTermConnector`),s[s.length-1])}static ordinalize(e){return o.getLabel("OrdinalNumber",o._getOrdinalLabelName(e))}static _getOrdinalLabelName(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:throw new Error(`Unable to ordinalize number ${e}.`)}}}},77889:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(52757),s=r(66018),n=r(35944);class o extends i.Z{render(){return(0,n.tZ)(s,{section:this._section,name:this._name,params:this._parameters})}}},8644:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DATETIME_SHORT:()=>g,DATE_FULL:()=>d,DATE_MED:()=>u,DATE_SHORT:()=>l,TIME_SIMPLE:()=>c,TIME_WITH_LONG_OFFSET:()=>p,TIME_WITH_SECONDS:()=>h,configure:()=>f,daysInMonthInZone:()=>P,diffInZone:()=>O,endOfInZone:()=>L,formatDateInUtc:()=>I,formatDateInZone:()=>T,formatRelativeDateLabel:()=>R,formatRelativeTimestamp:()=>v,getDateTimeFormat:()=>y,getDurationOffset:()=>Z,getDurationOffsetWithUnit:()=>F,getRelativeTimeFormat:()=>b,hasSameInZone:()=>A,minusInZone:()=>N,plusInZone:()=>M,startOfInZone:()=>D,toDateFromUtc:()=>E,toDateFromZone:()=>C,toDateWithFormat:()=>S});var i=r(99490),s=r(51412),n=r(8429);const o=new s.Z,a=new s.Z,l=i.ou.DATE_SHORT,u=i.ou.DATE_MED,d=i.ou.DATE_FULL,c=i.ou.TIME_SIMPLE,h=i.ou.TIME_WITH_SECONDS,p=i.ou.TIME_WITH_LONG_OFFSET,g=i.ou.DATETIME_SHORT;let m="UTC",_="en-US";function f(e,t){m=e,_=t}function y(e){return o.getOrPut(function(e){return`${_}-${JSON.stringify(e)}`}(e),(()=>new Intl.DateTimeFormat(_,e)))}function b(e=null){return a.getOrPut(_,(()=>new Intl.RelativeTimeFormat(_)))}function C(e,t){return w(e,t,{zone:m})}function E(e,t){return w(e,t,{zone:"UTC"})}function S(e,t){return w(e,t)}function T(e,t){return i.ou.fromJSDate(e).setZone(m).setLocale(_).toLocaleString(t)}function I(e,t){return i.ou.fromJSDate(e).toUTC().setLocale(_).toLocaleString(t)}function v(e,t=Date.now()){return n.Z.getLabel("DateFormat","dayTime",(()=>{switch(Z(e,new Date(t))){case 0:return n.Z.getLabel("DateFormat","today");case-1:return n.Z.getLabel("DateFormat","yesterday");case-2:return n.Z.getLabel("DateFormat","twoDaysAgo");default:return T(e,u)}})(),T(e,c))}const R=(e,t=new Date)=>A(e,t,"day")?n.Z.getLabel("DateFormat","today"):A(e,t,"week")?T(e,{weekday:"long"}):A(e,N(t,{days:7}),"week")?n.Z.getLabel("DateFormat","lastWeek"):A(e,N(t,{days:14}),"week")?n.Z.getLabel("DateFormat","twoWeeksAgo"):A(e,N(t,{days:21}),"week")?n.Z.getLabel("DateFormat","threeWeeksAgo"):A(e,t,"year")?T(e,{month:"long"}):T(e,{month:"long",year:"numeric"});function w(e,t,r={}){return"object"==typeof e?i.ou.fromObject({...e,...r}).toJSDate():"object"==typeof t?i.ou.fromFormat(e,function(e){const t=y(e),r=t.resolvedOptions();return t.formatToParts().map((e=>{switch(e.type){case"year":return"2-digit"===r.year?"yy":"yyyy";case"month":return"2-digit"===r.month?"MM":"M";case"day":return"2-digit"===r.day?"dd":"d";case"hour":return"2-digit"===r.hour?"hh":"h";case"minute":return"2-digit"===r.minute?"mm":"m";case"second":return"2-digit"===r.second?"ss":"s";case"dayPeriod":return"a";case"literal":return e.value;default:throw new Error(`Unsupported format part "${e.type}".`)}})).join("")}(t),r).toJSDate():i.ou.fromISO(e,r).toJSDate()}function A(e,t,r,i){return x(e,i).hasSame(x(t,i),r)}function D(e,t,r){return x(e,r).startOf(t).toJSDate()}function L(e,t,r){return x(e,r).endOf(t).toJSDate()}function M(e,t,r){return x(e,r).plus(t).toJSDate()}function N(e,t,r){return x(e,r).minus(t).toJSDate()}function O(e,t,r,i){return x(e,i).diff(x(t,i),r).as(r)}function P(e,t){return x(e,t).daysInMonth}function x(e,t=m){return i.ou.fromJSDate(e).setZone(t)}function Z(e,t,r="days"){const s=i.ou.fromJSDate(e).setZone(m),n=i.ou.fromJSDate(t).setZone(m);if(s.toMillis()<n.toMillis()){return-1*(i.Xp.fromDateTimes(s,n).count(r)-1)}return i.Xp.fromDateTimes(n,s).count(r)-1}function F(e,t,r=!1){const i=Math.abs(Z(e,t,"years")),s=Math.abs(Z(e,t,"months")),n=b();if(r?i>0&&s>=12:i>1||12===s)return n.format(Z(e,t,"years"),"years");const o=Math.abs(Z(e,t,"weeks"));if(r?s>0&&o>=4:s>1||4===o)return n.format(Z(e,t,"months"),"months");const a=Math.abs(Z(e,t,"days"));if(r?o>0&&a>=7:o>1||7===a)return n.format(Z(e,t,"weeks"),"weeks");const l=Math.abs(Z(e,t,"hours"));if(r?a>0&&l>=24:a>1||24===l)return n.format(Z(e,t,"days"),"days");const u=Math.abs(Z(e,t,"minutes"));if(r?l>0&&u>=60:l>1||60===u)return n.format(Z(e,t,"hours"),"hours");const d=Math.abs(Z(e,t,"seconds"));if(r?u>0&&d>=60:u>1||60===d)return n.format(Z(e,t,"minutes"),"minutes");try{return n.format(Z(e,t,"seconds"),"seconds")}catch(e){return""}}},52757:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(8429);class s{constructor(e,t,r=[]){this._section=e,this._name=t,this._parameters=r}toString(){const e=this._parameters.map((e=>"string"==typeof e?e:e.toString()));return i.Z.getLabel(this._section,this._name,...e)}}},11422:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t,r=!0){this._lower=e??-1/0,this._upper=t??1/0,this._inclusive=r}getLower(){return this._lower}getUpper(){return this._upper}isBoundless(){return this._lower===-1/0&&this._upper===1/0}inBounds(e){return this._aboveLowerBound(e)&&this._belowUpperBound(e)}toValueInBounds(e){return this._aboveLowerBound(e)?this._belowUpperBound(e)?e:this._upper:this._lower}doesOverlap(e){return this._aboveLowerBound(e.getUpper())&&this._belowUpperBound(e.getLower())}_aboveLowerBound(e){return this._inclusive?e>=this._lower:e>this._lower}_belowUpperBound(e){return this._inclusive?e<=this._upper:e<this._upper}}},57265:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{constructor(e,t,r){super(),this._labelCode=e,this._displayOperator=t,this._check=r}getLabelCode(){return this._labelCode}getDisplayOperator(){return this._displayOperator}check(e,t){return this._check(e,t)}}s.add("EQUALS","==",new s("equals","=",((e,t)=>e===t))).add("NOT_EQUAL","!=",new s("notEqual","!=",((e,t)=>e!==t))).add("LESS_THAN","<",new s("lessThan","<",((e,t)=>e<t))).add("LESS_THAN_OR_EQUALS","<=",new s("lessThanOrEquals","<=",((e,t)=>e<=t))).add("GREATER_THAN",">",new s("greaterThan",">",((e,t)=>e>t))).add("GREATER_THAN_OR_EQUALS",">=",new s("greaterThanOrEquals",">=",((e,t)=>e>=t))).finish()},58890:(e,t,r)=>{"use strict";r.d(t,{H:()=>n,Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("ASC","ascending",new s).add("DESC","descending",new s).finish();const n=s.DESC},30393:(e,t,r)=>{"use strict";r.d(t,{H:()=>n,Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("MRU","mru",new s).add("NAME","name",new s).add("LAST_MODIFIED","lastmodified",new s).add("LAST_MODIFIED_BY","lastmodifiedby",new s).add("OWNER","owner",new s).add("CREATED_BY","createdby",new s).add("CREATED_DATE","createddate",new s).add("TYPE","type",new s).add("APP","app",new s).add("FOLDER","folder",new s).add("LOCATION","location",new s).add("STATUS","status",new s).add("OUTCOME","outcome",new s).add("REFRESHDATE","refreshdate",new s).add("RUNDATE","rundate",new s).finish();const n=s.MRU},44110:(e,t,r)=>{"use strict";function i(){var e,t="T!T",r="_rawData",i="_label",s="_value",n="005",o="0F9",a=3,l="-",u="",d="labelsValuesFromSmallGroupingInOther",c="xY0xzwqvy"+(window.testMode?"":(new Date).getTime()),h="total",p="~~isGrandtotal~~",g="~~isSubtotal~~",m="~~subtotalLabelIndex~~",_="~~grandTotalLabelIndex~~",f="~~newDownGroup~~",y="~~emptyRow~~",b="~~entityIds~~",C="RowCount",E="#",S=".",T=",",I="int",v="double",R="currency",w="percent",A={AUTO:{label:"auto",multiplier:void 0,symbol:void 0},WHOLE:{label:"whole",multiplier:1,symbol:""},HUNDREDS:{label:"hundreds",multiplier:.01,value:100,symbol:""},THOUSANDS:{label:"thousands",multiplier:.001,value:1e3,symbol:""},MILLIONS:{label:"millions",multiplier:1e-6,value:1e6,symbol:""},BILLIONS:{label:"billions",multiplier:1e-9,value:1e9,symbol:""},TRILLIONS:{label:"trillions",multiplier:1e-12,value:1e12,symbol:""}},D="icon_url",L=-1,M=2,N=0,O={labels:{},labelOnly:!1,valueOnly:!1,allowMultipleLabels:!1,groupAggregatesByField:!1,astroUrl:"",presentationOptions:{},useReportMetadataAggregateOrder:!1,includeEntityIds:!1};function P(){return"undefined"==typeof $A?e:$A.util}function x(e){return e.map((function(e){return e.name}))}function Z(e,t){if(null==e||t<=0)return[];for(var r=[],i=e.map((function(e){return[e]}));i.length;){var s=i.shift();if(s.length===t)r.push(s);else for(var n=s[s.length-1].groupings,o=0;o<n.length;++o){var a=n[o],l=s.slice();l.push(a),i.push(l)}}return r}function F(e){var t=e.split("!");return t[t.length-1]}function k(e,t,n,o,a,l){var u=o[a];if(!u)return!1;var d=t[n]&&t[n].aggregates[a];if(!d)return!1;l||(l="");var c=d?d.label:"0",h=d?d.value:0,p=l+u,g=fe();return g.groupAggregatesByField?(-1!==u.indexOf("!")&&(p=l+F(u)),e[p]||(e[p]=[]),e[p+r]||(e[p+r]=[]),e[p].push(c),e[p+r].push(h)):g.labelOnly?(e[p]=c,e[p+r]=h):g.valueOnly?void 0!==e[p]?e[p]+=h:e[p]=h:void 0!==e[p+s]?(e[p+s]+=h,e[p+i]=e[u+s]+""):(e[p+i]=c,e[p+s]=h),!0}function B(e,t,r,i,s,n,o){for(var a=!1,l=0;l<i.length;++l)n&&-1!==n.indexOf(i[l])||k(e,t,r,s,l,o)&&(a=!0);return a}function W(e,t,i,s){if(t[i]){for(var n=[],o=[],a=i.split("!")[1],l=0;l<s.length;++l){var u=t[i].aggregates[l];u?(n.push(u.label),o.push(u.value)):(n.push(" "),o.push(null))}e[a]=n,e[a+r]=o}}function G(e,t,n,o,a){for(var u=0;u<t.length;++u){var d=t[u],c=n[u],h=o[c].dataType,p="url"===h&&d.value||d.label||l,g=d.value;if(null!==g||"date"!==h&&"datetime"!==h||p===l||(g=p),e[c+r]={label:d.label,value:d.value,parsedLabel:p,parsedValue:g},fe().labelOnly)e[c]=z(h,g,p,d.escapedLabel,void 0,d.photoUrl);else if(fe().valueOnly)e[c]=g;else{e[c+i]=p,e[c+s]=g;var m=xe(e,c,a,h);m&&(e[D]=m)}}}function U(e,t,r,i){if(fe().includeEntityIds)for(var s=0;s<t.length;++s){j(e,t[s],i[r[s]])}}function H(e,t,i,s){for(var n=e[b]?e[b]:{},o=0;o<i.length;o++){var a=i[o],l=t[o];if(l){var u=s[a].dataType,d=$(u,l.label,l.value);e[a]=z(u,l.value,l.label,l.escapedLabel,d,l.photoUrl),e[a+r]={value:l.value,label:l.label},l.escapedLabel&&(e[a+r].escapedLabel=l.escapedLabel),d&&(e[a+r].formattedLabel=d),l.photoUrl&&(e[a+r].photoUrl=l.photoUrl),l.recordId&&(e[a+r].recordId=l.recordId),l.recordTypeId&&(e[a+r].recordTypeId=l.recordTypeId),j(n,l,s[a])}}fe().includeEntityIds&&(e[b]=n)}function V(e){if(!e||!e.entityColumnName||"string"!=typeof e.entityColumnName)return null;var t=e.entityColumnName.split(".");if(!(t&&2===t.length&&t[0]&&t[1]))return null;var r,i,s=null;if((s="id"===e.dataType&&"id"!==t[1].toLowerCase()?{entityName:t[1],fieldName:"id"}:{entityName:t[0],fieldName:t[1]})&&"CustomEntityDataTemplate"===s.entityName){var n=null;if(e.fullyQualifiedName){var o=e.fullyQualifiedName.split(".");if(o&&o.length>=2){var a=o[o.length-2];i="__c",-1!==(r=a).indexOf(i,r.length-i.length)&&(n=a)}}n?s.entityName=n:s=null}return s}function j(e,t,r){if(fe().includeEntityIds){var i=r.dataType;if(q(i,t.value,t.label)||"id"===i){var s=V(r);s&&s.entityName&&(e[s.entityName]=t.value)}}}function q(e,t,r){return"string"===e&&t&&t!==r}function z(e,t,r,i,s,n){return i?{escapedLabel:i,label:r}:fe().allowMultipleLabels&&q(e,t,r)?n?{label:r,id:t,photoUrl:n}:{label:r,id:t}:"string"==typeof s?s:r}function $(e,t,r){return"url"===e?r:t}function Q(e,r,i){var s=e.reportMetadata.aggregates,n={};return B(n,e.factMap,i||t,s,r)?[n]:[]}function Y(e,r){if(!e.reportMetadata)return null;var i=e.reportMetadata.aggregates.indexOf(r);return-1===i?null:e.hasOwnProperty("factMap")?e.factMap[t].aggregates[i]:{label:"",value:null}}function K(e,t,r,i){var s=e.reportMetadata,n=Ze(e,!1),o=e.factMap,a=s.aggregates,l=s.groupingsAcross,u=s.groupingsDown,d=e.reportExtendedMetadata.groupingColumnInfo,c=u.length,h=l.length;if(h+c<t)return[];for(var p=Z(n,Math.min(h,t)),g=x(l),m=[],_=0;_<p.length;++_){var f=p[_],y={};if(G(y,f,g,d),!B(y,o,"T!"+f[f.length-1].key,a,r))return[];if(i&&m.length>=i)return m;m.push(y)}return m}function J(e,t,r,i){var s=e.reportMetadata,n=Ze(e,!0),o=Ze(e,!1),a=e.factMap,l=s.aggregates,u=s.groupingsDown,d=s.groupingsAcross,c=e.reportExtendedMetadata.groupingColumnInfo,h=u.length;if(d.length+h<t)return[];for(var p=Math.min(h,t),g=Math.max(0,t-p),m=Z(n,p),_=Z(o,g),f=x(u),y=x(d),b=[],C=0;C<m.length;++C){var E=m[C];if(_.length)for(var S=0;S<_.length;++S){var T=_[S],I={};if(G(I,E,f,c),G(I,T,y,c),!B(I,a,E[E.length-1].key+"!"+T[T.length-1].key,l,r))return[];if(i&&b.length>=i)return b;b.push(I)}else{var v={};if(G(v,E,f,c),!B(v,a,E[E.length-1].key+"!T",l,r))return[];if(i&&b.length>=i)return b;b.push(v)}}return b}function X(e){return e===R||e===v||e===w||e===I}function ee(e,t,r,i,s,n,o,a,l,u){var d=t[e.key+"!T"],c=d&&d.aggregates&&d.aggregates[r-i];c&&null!=c.value&&te(c,s,n,o,a,l,u)}function te(e,t,r,i,s,n,o){if(e.label&&null!=e.value){var a=null!=e.value.amount?e.value.amount:e.value,l=s===L?function(e,t,r,i){if(!t)return r===w||r===I||i===A.WHOLE.label?N:M;var s=e.indexOf(t);if(-1===s)return N;return e.substr(s+1).split(/\D/)[0].length}(e.label,t.localeNumberDecimalSeparator,r,i):s,u=function(e,t){return{groupingSeparator:e.localeNumberGroupingSeparator||T,decimalSeparator:e.localeNumberDecimalSeparator||S,decimalPlaces:t}}(t,l),d=i===A.AUTO.label?function(e){if(null==e)return;var t;t=(e=Math.abs(e))<A.THOUSANDS.value?A.WHOLE:e<A.MILLIONS.value?A.THOUSANDS:e<A.BILLIONS.value?A.MILLIONS:e<A.TRILLIONS.value?A.BILLIONS:A.TRILLIONS;return t}(a):o.displayUnit,c=n;r===R&&e.value.currency&&(c=e.value.currency+" ");var h=function(e,t,r,i,s,n,o){var a=e*r.multiplier,l=function(e,t){var r=t.groupingSeparator,i=t.decimalSeparator,s=t.decimalPlaces,n=e.toFixed(s).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,r),n.join(i)}(a,i).concat(r.symbol);t===R&&s?l="true"===n.isOrgSingleCurrency&&"-"===l.charAt(0)?l.slice(0,1)+s+l.slice(1):s.concat(l):o&&(l=l.concat("%"));return{value:e,label:l}}(a,r,d,u,c,t,r===w&&!o.removePercentageSymbol);e.label=h.label}}function re(e,t){if(null===e||null==t)return I;for(var r=0;r<t.length;r++){var i=t[r];if(i&&i.apiColumnName===e)return i.dataType}return I}function ie(e,t){var r,i;switch(e){case A.HUNDREDS.label:r=A.HUNDREDS,i=t&&t.hundreds?t.hundreds:"Hundreds";break;case A.THOUSANDS.label:r=A.THOUSANDS,i=t&&t.thousands?t.thousands:"Thousands";break;case A.MILLIONS.label:r=A.MILLIONS,i=t&&t.millions?t.millions:"Millions";break;case A.BILLIONS.label:r=A.BILLIONS,i=t&&t.billions?t.billions:"Billions";break;case A.TRILLIONS.label:r=A.TRILLIONS,i=t&&t.trillions?t.trillions:"Trillions";break;case A.WHOLE.label:default:r=A.WHOLE}return{displayUnit:r,unitLabel:i?" ("+i+")":void 0,removePercentageSymbol:!1}}function se(e,t,r,n){if(!e||0===e.length)return e;for(var o=function(e,t){if(t&&t.groupingColumnInfo){var r=t.groupingColumnInfo[e];if(r)return r.dataType}}(r,n),a={},l=0;l<e.length;l++){var u=e[l],d="";r&&(d="id"===o||"string"===o&&u[r+s]!==u[r+i]?u[r+i]:u[r+s]);var c=a[d];if(c)for(var h=0;h<t.length;h++){var p=t[h],g=p+s,m=c[g]+u[g];u[p+i]=m+"",u[g]=m}a[d]=u}}function ne(e,t,r){var n=function(e,t){var r;if(!e||!t)return;e.dimension&&e.dimension.fields&&(r=ae(e.dimension.fields,t));!r&&e.color&&e.color.fields&&(r=ae(e.color.fields,t));return r}(e,r+i);if(n&&t&&r){for(var o={},a=0;a<t.length;a++){var l=t[a],u=l[r+i];o[l[r+s]]=u}n.valueLabels=o,n.column=r+s}}function oe(e){var t,r,n,o=new RegExp("(.*)"+s+"$");if(e)for(t=0;t<e.length;t++)e[t].valueLabels&&(delete e[t].valueLabels,(r=(n=e[t].column.match(o))&&n[1])&&(e[t].column=r+i))}function ae(e,t){if(e&&P().isArray(e))for(var r=0;r<e.length;r++)if(e[r].column===t)return e[r]}function le(e){Array.isArray(e)||(e=[e]);var t=[];return e.forEach((function(e){"string"==typeof e&&-1!==e.indexOf(",")&&(e='"'+e+'"'),t.push(e)})),t}function ue(e){return JSON.stringify({groupValue:e})}function de(e,t,r,i,s){return{filter:{column:e,operator:t,value:le(r).join(", ")},valueLabel:i,dimLabel:ce(s,e)}}function ce(e,t){var r,s,n,o=t+i;for(r=0;r<e.length;r++)for(s in n=e[r])if(n[s]===o)return n.label}function he(e,t,r,n,o,a){var u,d,c,h,p,g,m,_,f,y,b,C,E=e.length>1,S=new RegExp(s+"$");if(0===e.length)return[];for(u=0;u<t.length;u++)for(d in _=t[u],f=0,b=[],y=e.slice(),_){if(d.match(S)&&(c=_[d],(h=y.indexOf(c))>-1)){f++,y.splice(h,1),g=_[(p=d.substring(0,d.length-i.length))+i];try{m=JSON.parse(c).groupValue}catch(e){m=""}if(r&&r[p])switch(r[p].dataType){case"string":case"reference":g!==l&&(m=(m=g).indexOf(",")>0?"'"+m+"'":m);break;case"currency":m instanceof Object&&(m=m.amount);break;case"multipicklist":m&&m.constructor===Array&&(m=0===m.length?"":m.join("; "));break;case"date":case"datetime":if(!(C=(C=pe(o,p))||pe(n,p)))return void(a&&a($A.get("$Label.DashboardFilterErrors.unknown")));var T;switch(C.dateGranularity){case"None":case"Day":break;case"Week":T=ge(p,m,g,{days:7});break;case"Month":T=ge(p,m,g,{months:1});break;case"Quarter":case"FiscalQuarter":T=ge(p,m,g,{months:3});break;case"Year":case"FiscalYear":T=ge(p,m,g,{years:1});break;default:return void(a&&a($A.get("$Label.POneDrillToReport.ChartNotFilterable")))}if(T){b.push(T[0]),b.push(T[1]);continue}break;case"boolean":m="true"===g?"True":"False";break;case"url":0===m.indexOf("http://")&&(m=[m.substr(7),m])}b.push({dimApiName:p,chartSelectionValue:null==m?"":m,chartSelectionLabel:g})}if(!E&&1===f||2===f)return b}return[]}function pe(e,t){if(e&&P().isArray(e))for(var r=0;r<e.length;r++)if(e[r].name===t)return e[r];return null}function ge(e,t,r,i){if(i.days||i.months||i.years){var s="";return t&&(s=$A.localizationService.parseDateTime(t),i.days&&s.setDate(s.getDate()+i.days),i.months&&s.setMonth(s.getMonth()+i.months),i.years&&s.setFullYear(s.getFullYear()+i.years),s=(s=new Date(s.getTime()-6e4*s.getTimezoneOffset())).toISOString().substring(0,10)),[{dimApiName:e,chartSelectionValue:t,chartSelectionLabel:r,operator:"greaterOrEqual"},{dimApiName:e,chartSelectionValue:s,chartSelectionLabel:r,operator:"lessThan"}]}}function me(e){return e.groupingsDown.concat(e.groupingsAcross).map((function(e){return e.name}))}function _e(e,t,r){for(var i=0;i<e.length;i++){for(var s=e[i],n=[],o=[],a=0;a<s.length;a++){var l=s[a];n.push(l.key),0===a?o.push([l]):o.push(o[a-1].concat([l]))}for(;n.length>0;){var u=n.pop();s=o.pop();var d=t.indexOf(u);d>=0&&(delete t[d],delete r[d]),t.push(u),r.push(s)}}}function fe(){return O}function ye(e){return fe().labels[e]}function be(e,t,r,i){if(!e&&function(e,t,r){return("id"===e||"string"===e)&&t!==r&&t&&[n,o].indexOf(t.substring(0,a))>-1}(t,r,i))return fe().astroUrl}function Ce(e,t,r,i,s,n){var o;if(fe().groupAggregatesByField){e[C]={};for(var a=0;a<t.length;a++)(o=r[t[a].key+"!T"].aggregates[i.indexOf(C)])&&(e[C][s[a]]=o.value)}else{var l=r[t[t.length-1].key+"!T"].aggregates;(o=l[0!==n.length||fe().useReportMetadataAggregateOrder?i.indexOf(C):l.length-1])&&(e[C]=o.value)}}function Ee(e,t,r,i,s,n,o){var a,l,u=!0;if(a=P().copy(e),r.hasDetailRows&&0!==r.detailColumns.length){if(!r.showSubtotals)return null;B(a,i,s,n,n,[C]),l=t.length-1}else{if(!r.showSubtotals&&t.length!==o.length)return null;B(a,i,s,n,n),u=(l=t.length)<o.length,Ce(a,t,i,n,o,r.detailColumns)}return a[m]=l,a[g]=u,a}function Se(e){return e.map((function(e){var t=e.blockId;return e.detailColumns.reduce((function(e,r){return e[r]=t+E+r,e}),{})}))}function Te(e,t){for(var r=[],i=[],s={},n=0,o=e.length;n<o;n++){var a=e[n],l=a.split(E);l.length<2||(l[1]===C?t[l[0]]&&r.push(a):i.push(a),s[a]=n)}return{recordCountAggregates:r,otherAggregates:i,indexByAggregate:s}}function Ie(e,t,i,s,n,o){for(var a=0,l=0,u=n.length;l<u;l++){var d=i[l][t]&&i[l][t].dataCells;if(d&&d.length){for(var c=n[l].detailColumns,h=o[l].detailColumnInfo,p=s[l],g=n[l].blockId+E+b,m=e[g]?e[g]:{},_=0,f=c.length;_<f;_++){var C=c[_],S=d[_],T=h[C].dataType,I=p[C],v=$(T,S.label,S.value);e[I]=z(T,S.value,S.label,S.escapedLabel,v),S.recordId&&(e[I+r]={recordId:S.recordId}),S.recordTypeId&&(e[I+r]={recordTypeId:S.recordTypeId}),j(m,S,h[C])}fe().includeEntityIds&&(e[g]=m)}else e["~~"+n[l].blockId+"~~"]=!1,a++}a===n.length&&(e[y]=!0)}function ve(e,t){for(var r={},i=0,s=e.length;i<s;i++){var n=e[i],o=n.split(E),a=o[0],l=o[1],u=a+E+F(l);r[n]=u}var d=0;for(s=t.length;d<s;d++){var c=t[d];if(c.hasRecordCount){var h=c.blockId+E+c.detailColumns[0];r[c.blockId+E+C]=h}}return r}function Re(e,t){var r,i,s,n={};for(r=0,i=e.length;r<i;r++)n[s=e[r]]=s;for(r=0,i=t.length;r<i;r++)n[s=t[r]]=s;return n}function we(e,t,r,i){return e?ve(r,i):Re(r,t)}function Ae(e,t,r,i,s){for(var n=0,o=t.length;n<o;n++){var a=t[n],l=s[a],u=i[a],d=r[u]&&r[u].label;if(l&&d){if(fe().groupAggregatesByField){var c=e[l];c?c.push(d):e[l]=[d]}else e[l]=d;e[y]=!1}}}function De(e,t,r,i,s,n,o,a){var l=P().copy(e),u=!0,d=t;return r.showSubtotals||!r.hasDetailRows&&t===r.groupingsDown.length?(l[y]=!0,Ae(l,n,i,s,a),Ae(l,o,i,s,a),r.hasDetailRows?d-=1:u=d<r.groupingsDown.length,l[m]=d,l[g]=u,l):null}function Le(e,t,r,i,s,n){var o={};return o[p]=!0,Ae(o,i,t,r,n),Ae(o,s,t,r,n),o}function Me(e){for(var t={},r=0;r<e.length;r++){var i=e[r];t[i.blockId]=i.hasRecordCount}return t}function Ne(e,t){var r;return e&&0!==e.length?1===e.length?(r=Oe(t,e[0])).key:(r=Oe(t,e[0]),Ne(e.slice(1),r.groupings)):"T"}function Oe(e,t){for(var r=0;r<e.length;r++)if(e[r].label===t)return e[r]}function Pe(e,t,r,i,s){for(var n=[],o=0;o<e.length;o++){var a="";if(o<r[t].length){var l=r[t][o],u=s[e[o]].dataType;a="url"===u?l.value:l.label,a=z(u,l.value,l.label,l.escapedLabel,a)}else a=o===i?ye(0===i?"grandTotal":"subtotal"):"";n.push(a)}return n}function xe(e,t,r,n){var o=e[t+s],a=be(r,n,o,e[t+i]);return a||(r&&r[o]?r[o].chatterPhotoUrl:void 0)}function Ze(e,t){var r,i=t?e.groupingsDown:e.groupingsAcross;return i&&(r=i.groupings),r||[]}return"undefined"==typeof $A&&(e={copy:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}}),{lookupEclairRowsByLabels:he,formatAndGetFilterValues:function(e,t,r,i,s,n,o,a){var l,u,d,c,h=[],p=i&&i.dimensions,g=n.groupingColumnInfo,m=s.groupingsDown,_=s.groupingsAcross;if(P().isArray(e)&&0===e.length)return[];if(a)return function(e,t,r,i,s,n){var o,a,l,u,d=[],c=[],h=r&&r.dimensions,p=s.groupingColumnInfo,g=i.groupingsDown,m=i.groupingsAcross,_={};for(o=0;o<e.length;o++)(l=he([e[o]],t,p,g,m,n))&&l.length>0&&d.push(l[0]);if(!d.length)return;for(o=0;o<d.length;o++)a=d[o].dimApiName,u=P().isArray(d[o].chartSelectionValue)?d[o].chartSelectionValue:[d[o].chartSelectionValue],_[a]?_[a]=_[a].concat(u):_[a]=u;1===Object.keys(_).length&&c.push(de(a,"equals",_[a],"Other",h));return[c]}(e,r,i,s,n,o);if(u=he(e,r,g,m,_,o)){for(l=0;l<u.length;l++)d=u[l].dimApiName,c=u[l].operator||"equals",h.push(de(d,c,u[l].chartSelectionValue,u[l].chartSelectionLabel,p));return[h]}},"@test":{getPrefixedDetailColumnMapByBlock:Se,splitMultiBlockAggregates:Te,getColumnAssociatedWithAggregate:F,getAggregateMappingForMultiBlockWithDetails:ve,getAggregateMappingForMultiBlockNoDetails:Re,addDetailsToMultiBlockRow:Ie,addAggregatesToRowWithMapping:Ae,buildMultiBlockTotalRow:Le,buildMultiBlockSubtotalRow:De,getHasRecordCountMap:Me},escapeCommas:le,convertToEclairRows:function(e,t,r,i,n,o,a,l,d,c){var p,g,m,_=e.reportMetadata,f=_.groupingsDown,y=_.groupingsAcross,b=_.aggregates,C=(r||[]).reduce((function(e,t){var r=b.indexOf(t);return r>=0&&(e[r]=t),e}),{}),E=f.length,S=y.length,T=!l&&2===t&&E+S>=2&&r.length>=2;if(t||(t=E+S),0===E&&0===S)return d?Q(e,C):[];if(m=0===S||0===E?function(e,t,r,i,s){for(var n=e.reportMetadata,o=n.aggregates,a=e.factMap,l=e.reportExtendedMetadata.groupingColumnInfo,u=Ze(e,!0),d=Ze(e,!1),c=0!==u.length,h=c?u:d,p=x(n[c?"groupingsDown":"groupingsAcross"]),g=[],m=Z(h,t),_={},f=0;f<m.length;++f){var y,b,C=m[f],E={},S=!1;G(E,C,p,l,s);var T=JSON.stringify(E);if(void 0!==(b=_[T])?(y=g[b],S=!0):(_[T]=g.length,y=E),!B(y,a,c?C[C.length-1].key+"!T":"T!"+C[C.length-1].key,o,r))return[];if(i&&g.length>=i)return g;S||g.push(E)}return g}(e,t,C,i,c):a?K(e,t,C,i):J(e,t,C,i),T&&function(e,t,r,i){for(var s=i.reportMetadata,n=i.factMap,o=i.reportExtendedMetadata.groupingColumnInfo,a=Ze(i,!0),l=Ze(i,!1),u=0!==a.length,d=u?a:l,c=x(s[u?"groupingsDown":"groupingsAcross"]),p=Z(d,1),g=0;g<p.length;g++){var m=p[g],_={};if(G(_,m,c,o),!k(_,n,u?m[0].key+"!T":"T!"+m[0].key,t,r))return e;_.__series__=h,e.push(_)}}(m,C,b.indexOf(r[r.length-1]),e),("string"==typeof n||n instanceof String)&&se(m,b,n,e.reportExtendedMetadata),o){for(g=[],p=0;p<f.length;p++)g.push(f[p].name);for(p=0;p<y.length;p++)g.push(y[p].name);!function(e,t){var r,i,n;for(r=0;r<e.length;r++)for(i=0;i<t.length;i++)n=t[i]+s,null===e[r][n]&&(e[r][n]=u),void 0!==e[r][n]&&(e[r][n]=ue(e[r][n]))}(m,g)}return m},addChatterPhotoUrls:function(e,t,r,i,s,n){var o;if(n[t]&&(o=n[t].dataType),"Bar"!==r||!s)return e;if(s>=e.length)for(var a=0;a<e.length;a++){var l=e[a],u=xe(l,t,i,o);u&&(l[D]=u)}return e},convertToCumulative:se,convertFilterArrayValueToString:function(e){var t,r,i=e,s=0;if(P().isArray(i[0])&&1===i[0].length)for(;s<i[0].length;s++)t=i[0][s].filter.value,r=[],P().isArray(t)&&(t.forEach((function(e){e+="",r.push("'"+e.replace("'","\\'")+"'")})),i[0][s].filter.value=r.join(","));return i},addValueLabels:ne,addValueLabelsForGroups:function(e,t,r){var i;for(i=0;i<r.length;i++)ne(e,t,r[i]);if(e.split&&e.color.fields)for(e.split.fields=[],i=0;i<e.color.fields.length;i++)e.split.fields[i]=e.color.fields[i]},removeValueLabels:function(e){var t,r;if(e)for((r=[]).push(e.dimension&&e.dimension.fields),r.push(e.color&&e.color.fields),t=0;t<r.length;t++)oe(r[t])},normalizeChartSelectionLabelsUsingValueLabels:function(e,t){if(!P().isArray(e))return[];if(0===e.length)return[];if(t){var r;try{r=JSON.parse(e)}catch(e){return[]}return P().isArray(r)?r:e}return e},isChartSelectionOtherBucket:function(e){if(!P().isArray(e)||1!==e.length)return!1;try{return JSON.parse(e[0]).groupValue===c}catch(e){return!1}},combineSmallGroupsToOther:function(e,t,r,n){var o,a=t+i,l=t+s,u=r[0]+i,h=r[0]+s,p=0,g=0,m=[],_={},f=[],y=[];for(o=0;o<e.length;o++)p+=e[o][h];if(p>0){for(o=0;o<e.length;o++)e[o][h]/p>.03?m.push(e[o]):(f.push(e[o][a]),y.push(e[o][l]),g+=e[o][h]);g>0&&(_[a]=n||$A.get("{!$Label.Report.Other}"),_[l]=ue(c),_[u]=g+"",_[h]=g,_[d]={otherGroupLabels:f,otherGroupValues:y},m.push(_))}else m=e;return m},configureSummaryFlexTableUnits:function(e,t,r){var i=e.groupingsDown.groupings;if(!i||0===i.length)return e;var s=t.columns;if(!t.columns||0===t.columns.length)return e;var n,o,a,l,u,d=e.reportMetadata&&e.reportMetadata.groupingsDown&&e.reportMetadata.groupingsDown.length,c=e.factMap,h=t.tableCurrencyPrefix,p=t.labels,g=t.numberUnits,m=null==t.decimalPlaces?L:parseInt(t.decimalPlaces,10),_=ie(g,p),f=s[0].dataType,y=d>1&&s[1].dataType,b=X(f),C=X(y);if(b||C)for(n in i)if((o=i[n])&&(b&&null!=o.value&&te(o,r,f,g,m,h,_),C&&(a=o.groupings)))for(l in a)(u=a[l])&&null!=u.value&&te(u,r,f,g,m,h,_);for(var E=d;E<s.length;E++)if(X(f=s[E].dataType))for(n in i)if(ee(o=i[n],c,E,d,r,f,g,m,h,_),a=o&&o.groupings)for(l in a)ee(u=a[l],c,E,d,r,f,g,m,h,_);var S=e.factMap&&e.factMap["T!T"],T=e.reportMetadata,I=e.reportExtendedMetadata;if(t.showTotal&&S&&S.aggregates&&S.aggregates.length>0)for(var v=0;v<S.aggregates.length;v++){var R=T.aggregates[v],w=I.aggregateColumnInfo[R]&&I.aggregateColumnInfo[R].dataType,A=S.aggregates[v];X(w)&&A&&te(A,r,w,g,m,h,_)}return e},configureFlexTableUnits:function(e,t,r){if(e.factMap["T!T"]&&e.factMap["T!T"].rows&&0!==e.factMap["T!T"].rows.length){for(var i=e.factMap["T!T"].rows,s=t.columns,n=t.numberUnits,o=null==t.decimalPlaces?L:parseInt(t.decimalPlaces,10),a=t.labels,l=t.tableCurrencyPrefix,u=null==i?0:i.length,d=u>0&&i[0].dataCells?i[0].dataCells.length:0,c=ie(n,a),h=0;h<d;h++){var p=s[h].dataType;if(X(p))for(var g=0;g<u;g++){var m=i[g].dataCells[h];null!=m.value&&te(m,r,p,n,o,l,c)}}var _=e.factMap["T!T"].aggregates;if(_&&_.length>0&&t.showTotal)for(var f=0;f<_.length;f++){var y=t.aggregatesDataType&&t.aggregatesDataType[f]&&t.aggregatesDataType[f].dataType;X(y)&&te(_[f],r,y,n,o,l,c)}}},configureTableUnits:function(e,t,r,i){if(e.factMap["T!T"]&&e.factMap["T!T"].rows&&0!==e.factMap["T!T"].rows.length){for(var s,n,o=e.factMap["T!T"].rows,a=t.columns,l=t.numberUnits,u=t.measure&&t.measure.fields&&t.measure.fields.length>1,d=[],c=null==t.decimalPlaces?L:parseInt(t.decimalPlaces,10),h=c,p=t.labels,g=t.tableCurrencyPrefix,m=null==o?0:o.length,_=m>0&&o[0].dataCells?o[0].dataCells.length:0,f=ie(l,p),y=0,b=0;b<_;b++){var C=a[b];if("aggregate"===C.type){s=i&&y<i.length?i[y]:null,y++,n=re(s,t.aggregatesDataType);for(var E=0;E<m;E++){var S=o[E].dataCells[b];if(null!=S.value&&null!=S.label){if(u){var T=S.label;!1===C.isPercent&&T&&-1!==T.indexOf("%")?(S.label=T.replace(/%/g,""),f.removePercentageSymbol=!0):f.removePercentageSymbol=!1,h=null==C.scale?c:C.scale,d.length+1===b&&d.push(h)}te(S,r,n,l,h,g,f)}}}}y=0;var I=e.factMap["T!T"].aggregates;if(I&&I.length>0)for(var v=0;v<I.length;v++)s=i&&y<i.length?i[y]:null,y++,n=re(s,t.aggregatesDataType),I[v]&&I[v].label&&""!==I[v].label&&null!==I[v].value&&X(n)&&(u&&d.length>v&&(h=d[v]),te(I[v],r,n,l,h,g,f))}},getOrderedAxesFromMetadata:function(e,t,r){var n,o,a,l,u;if(t.availableDashboardSettings?(n=t.availableDashboardSettings.names,o=t.availableDashboardSettings.values,a=Object.keys(n),l=Object.keys(o)):(n=t.groupingColumnInfo,o=t.aggregateColumnInfo,a=me(e),l=e.aggregates),r&&r.categories){var d,c,h=r.categories;u=[];for(var p=0;p<h.length;p+=1)for(var g in d=h[p].columns)d.hasOwnProperty(g)&&(c={column:g+i,label:d[g].label,type:d[g].dataType},u.push(c))}var m=a.map((function(e){return{column:e+i,label:n[e]?n[e].label:"",type:n[e]?n[e].dataType:""}})),_="MULTI_BLOCK"==e.reportFormat?"fullLabel":"label";return{dimensions:m,measures:l.map((function(e){return{column:e+s,label:o[e]?o[e][_]:"",type:o[e]?o[e].dataType:""}})),columns:u}},getOrderedGroupingsFromMetadata:me,summaryTotal:Q,getTotalValue:function(e,t){var r=Y(e,t);return r?r.value:null},getTotalLabelAndValue:Y,VALUE_SUFFIX:s,LABEL_SUFFIX:i,LABELS_VALUES_FROM_SMALL_GROUPINGS_IN_OTHER:d,OTHER_GROUPING_SELECTION_KEY:c,stringifyGroupValueObject:ue,flattenTable:function(e){switch(e.reportMetadata.reportFormat){case"TABULAR":return function(e){for(var r=e.reportMetadata,i=r.aggregates,s=r.detailColumns,n=e.reportExtendedMetadata.detailColumnInfo,o=e.factMap,a=[],l=o[t],u=l.rows&&l.rows.length||0,d=0;d<u;d++){var c={};H(c,l.rows[d].dataCells,s,n),a.push(c)}if(i.length>1||i[0]!==C){var h=Q(e,i);if(h.length>0)h[0][p]=!0,a.push(h[0])}return{rows:a}}(e);case"SUMMARY":return function(e){var t=e.reportMetadata,r=t.groupingsDown.length,i=t.aggregates,s=t.detailColumns,n=e.factMap,o=e.reportExtendedMetadata.groupingColumnInfo,a=e.reportExtendedMetadata.detailColumnInfo,l=Ze(e,!0),u=0!==l.length,d=x(t[u?"groupingsDown":"groupingsAcross"]),c=[];if(r){var h,g=[],m=[];_e(Z(l,r),g,m);for(var y=0;y<g.length;y++)if(g[y]){var C=g[y]+"!T",E=m[y],S=n[C],T={factMapKey:C};G(T,E,d,o);var I={};U(I,E,d,o),!t.hasDetailRows&&h&&h[0]!==E[0]&&(T[f]=!0);for(var v=S&&S.rows&&S.rows.length||0,R=0;R<v;R++){var w=P().copy(T);fe().includeEntityIds&&(w[b]=P().copy(I)),H(w,S.rows[R].dataCells,s,a),t.hasDetailRows&&Ce(w,E,n,i,d,t.detailColumns),t.hasDetailRows&&0===R&&h&&h[0]!==E[0]&&(w[f]=!0),c.push(w)}h=E;var A=Ee(T,E,t,n,C,i,d);A&&c.push(A)}}var D=Q(e,i);if(t.showGrandTotal&&D.length>0){var L=D[0];L[p]=!0,L[_]=0,c.push(L),Ce(L,[{key:"T"}],n,i,d,t.detailColumns)}return{rows:c}}(e);case"MATRIX":return function(e){var t=e.reportMetadata,r=Ze(e,!0),i=Ze(e,!1),s=e.factMap,n=t.aggregates,o=t.groupingsDown,a=t.groupingsAcross,l=e.reportExtendedMetadata.groupingColumnInfo,u=(O&&O.presentationOptions||{}).hasStackedSummaries,d=o.length,c=a.length,h=Z(r,d),y=Z(i,c),b=x(o),C=x(a),E=[],S=[],T=[],I=[],v=[];_e(h,E,S),_e(y,T,I),E.push("T"),S.push([]),T.push("T"),I.push([]);for(var R=0;R<E.length;R++)if(E[R]){var w,A={},D=S[R];G(A,D,b,l),w&&w[0]!==D[0]&&(A[f]=!0),w=D;for(var L=0;L<T.length;L++)if(T[L]){var M=E[R]+"!"+T[L],N=T[L]+"~~";u?W(A,s,M,n):B(A,s,M,n,n,null,N)}if(0===D.length){if(!t.showGrandTotal)continue;A[p]=!0,A[_]=D.length}else if(D.length<d){if(!t.showSubtotals)continue;A[g]=!0,A[m]=D.length}v.push(A)}var P=[];for(L in T)if(u){var F=I[L],k={key:T[L],labels:Pe(C,L,I,F.length,l)};if(0===F.length){if(!t.showGrandTotal)continue;k[p]=!0,k[_]=F.length}else if(F.length<c){if(!t.showSubtotals)continue;k[g]=!0,k[m]=F.length}P.push(k)}else for(var U=0;U<n.length;U++){F=I[L],k={key:T[L]+"~~"+n[U],labels:Pe(C,L,I,F.length,l)};if(0===F.length){if(!t.showGrandTotal)continue;k[p]=!0,k[_]=F.length}else if(F.length<c){if(!t.showSubtotals)continue;k[g]=!0,k[m]=F.length}P.push(k)}return{rows:v,columns:P}}(e);case"MULTI_BLOCK":return function(e){return e.reportMetadata.groupingsDown.length?function(e){var r=e.reportMetadata,i=Ze(e,!0),s=e.factMap,n=r.aggregates,o=r.groupingsDown||[],a=r.blocks,l=e.reportExtendedMetadata.groupingColumnInfo,u=e.reportExtendedMetadata.blocks,d=r.hasDetailRows,c=o.length,h=[],p=[],g=[];_e(Z(i,c),p,g);for(var m,C=x(o),S=Se(a),T=Me(a),I=Te(n,T),v=I.recordCountAggregates,R=I.otherAggregates,w=I.indexByAggregate,A=we(d,v,R,a),D={},L=0;L<p.length;L++)if(p[L]){var M=p[L]+"!T",N=g[L],O=s[M],F={factMapKey:M};G(F,N,C,l);var k={};U(k,N,C,l),!r.hasDetailRows&&m&&m[0]!==N[0]&&(F[f]=!0);for(var B=O.blockRows&&d&&O.blockRows.reduce((function(e,t){return Math.max(e,t.length)}),0)||0,W=0;W<B;W++){var H=P().copy(F);if(fe().includeEntityIds)for(var V=0;V<a.length;V++){H[a[V].blockId+E+b]=P().copy(k)}if(Ie(H,W,O.blockRows,S,a,u),!H[y]){r.hasDetailRows&&0===W&&m&&m[0]!==N[0]&&(H[f]=!0),h.push(H);for(var j=0;j<N.length;j++)D[N[j].key]=!0}}if(!d||D[p[L]]){var q=De(F,N.length,r,O.aggregates,w,v,R,A);!q||!d&&q[y]||h.push(q),q&&!d&&q[y]||(m=N)}}if(r.showGrandTotal){var z=Le(r,s[t].aggregates,w,v,R,A);z[_]=0,h.push(z)}return{rows:h}}(e):function(e){for(var r=e.reportMetadata,i=e.factMap,s=r.aggregates,n=r.blocks,o=e.reportExtendedMetadata.blocks,a=r.hasDetailRows,l=Se(n),u=Me(n),d=Te(s,u),c=d.recordCountAggregates,h=d.otherAggregates,p=d.indexByAggregate,g=we(a,c,h,n),m=[],_=i[t],f=_.blockRows&&a&&_.blockRows.reduce((function(e,t){return Math.max(e,t.length)}),0)||0,b=0;b<f;b++){var C={};Ie(C,b,_.blockRows,l,n,o),C[y]||m.push(C)}if(r.showGrandTotal){var E=Le(r,i[t].aggregates,p,c,h,g);m.push(E)}return{rows:m}}(e)}(e)}},flattenMatrixDetails:function(e,t,r){var i,s=e.reportMetadata,n=Ze(e,!0),o=Ze(e,!1),a=e.factMap,l=s.aggregates,u=s.groupingsDown,d=s.groupingsAcross,c=s.detailColumns,h=e.reportExtendedMetadata.detailColumnInfo,g=e.reportExtendedMetadata.groupingColumnInfo,m=x(s.groupingsDown),_=x(s.groupingsAcross),f=u.length,y=d.length,C=Z(n,f),E=Z(o,y),S=[],T=[],I=[],v=[],R=[];t||(t=[]),r||(r=[]);var w=Ne(t,Ze(e,!0))+"!"+Ne(r,Ze(e,!1));_e(C,S,T),_e(E,I,v),S.push("T"),T.push([]),I.push("T"),v.push([]);e:for(var A=0;A<S.length;A++)if(S[A]){var D=T[A];for(i=0;i<t.length;i++)if(!D[i]||D[i].label!==t[i])continue e;t:for(var L=0;L<I.length;L++)if(I[L]){var M=v[L];for(i=0;i<r.length;i++)if(!M[i]||M[i].label!==r[i])continue t;var N=a[S[A]+"!"+I[L]],O=N.rows&&N.rows.length||0,F={};U(F,M,_,g),U(F,D,m,g);for(var k=0;k<O;k++){var B={};fe().includeEntityIds&&(B[b]=P().copy(F)),H(B,N.rows[k].dataCells,c,h),R.push(B)}}}var W=Q(e,l,w);if(W.length>0){var G=W[0];G[p]=!0,R.push(G)}return{rows:R}},SUBTOTAL_SERIES_NAME:h,getCumulativeGroupName:function(e){var t;if(!0===e.__isCumulative__){var r=[""];return e.dimension&&(r=r.concat(e.dimension.fields)),e.color&&(r=r.concat(e.color.fields)),r.length>2&&(t=function(e){if(e&&e.column)return e.column.replace(new RegExp(i+"$"),"")}(r[r.length-1])),t||""}},setConfig:function(e){O=e},IS_GRAND_TOTAL:p,IS_SUBTOTAL:g,RAW_DATA_SUFFIX:r,createDateRangeFilters:ge,ENTITY_IDS:b,BLOCK_ID_SEPARATOR:E,extractEntityAndFieldName:V,matrix:J,matrixTotalToAcrossGroupings:K}}r.d(t,{Z:()=>i})},83993:(e,t,r)=>{"use strict";r.d(t,{IO:()=>o,Oz:()=>s,z6:()=>n});const i="__";function s(e,t){return null!=t&&t.length>0?`${t}${i}${e}`:e}function n(e){const t=e.indexOf(i);return-1===t?{namespace:void 0,devName:e}:{namespace:e.substring(0,t),devName:e.substring(t+i.length)}}function o(e){return s(e.name,e.namespace)}},32898:(e,t,r)=>{"use strict";r.r(t),r.d(t,{appendParams:()=>a,appendQueryString:()=>o,convertDataURItoBlob:()=>m,getBaseUrl:()=>c,getDataFromDataUrl:()=>g,getDataUrlFromData:()=>h,getMimeTypeFromDataUrl:()=>p,getQueryParams:()=>l,isAbsoluteUrl:()=>u,isUrlValid:()=>d});var i=r(74978);const s=["http://","https://"],n="data:image/png;base64,";function o(e,t){return t?[e,t].join((0,i.contains)(e,"?")?"&":"?"):e}function a(e,t){return o(e,(t instanceof Map?Array.from(t.entries()):Object.keys(t).map((e=>[e,t[e]]))).reduce(((e,[t,r])=>(null!=r&&(""!==r?e.push(`${t}=${encodeURIComponent(String(r))}`):e.push(t)),e)),[]).join("&"))}function l(e){if(e.startsWith("/"))return l(`http://localhost${e}`);const t=new Map;let r=e.split("?")[1];return r?(r=r.split("#")[0],r.split("&").forEach((e=>{let[r,i]=e.split("=");return i=i?.replace(/\+/g," "),t.set(r,null!=i?decodeURIComponent(i):"")})),t):t}function u(e){return s.some((t=>(0,i.startsWith)(e,t)))}function d(e,t){return Boolean(e)&&((0,i.startsWith)(e,"/")&&t||u(e))}function c(e){const t=e.indexOf("//")+2;let r=e.indexOf("/",t);return-1===r&&(r=e.indexOf("?",t)),-1!==r?e.substring(0,r):e}function h(e){return e?n+e:e}function p(e){if(e){const t=e.match(":(.*);");if(!t)throw new Error("Expected to find MIME type in URL.");return t[1]}return e}function g(e){return e?e.substring(n.length):e}function m(e,t){const r=atob(g(e)),i=new Uint8Array(r.length);for(let e=0;e<r.length;e++)i[e]=r.charCodeAt(e);let s=p(e);return t&&(s+=t),new Blob([i],{encoding:"ISO-8859-1",type:s})}},39803:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(74978);const s=new RegExp("[\\w~\\-]+");class n{validateUrl(e,t){if(!e)return!1;const r=(0,i.startsWith)(e,"http://"),s=(0,i.startsWith)(e,"https://");if(!r&&!s)return!1;const n=e.split("/").slice(0,3).join("/");return this.validateOrigin(n,t)}validateOrigin(e,t){const r=this._stripProtocolAndPort(e);for(let i of t){if(!this._validateProtocol(i,e))continue;if(i=this._stripProtocolAndPort(i),i===r)return!0;const t=i.split("."),n=r.split(".");let o=t.length-1,a=n.length-1,l=!0;for(;o>-1&&a>-1;){if(t[o]!==n[a]&&("*"!==t[o]||!n[a].match(s))){l=!1;break}o--,a--}if(l){if(a>o)if("*"===t[0])for(;a>-1;){if(!n[a].match(s)){l=!1;break}a--}else l=!1;if(l&&a===o)return!0}}return!1}_validateProtocol(e,t){const r=e.indexOf("://"),i=t.indexOf("://");if(r!==i)return!1;if(-1===r)return!0;return e.substring(0,r)===t.substring(0,i)}_stripProtocolAndPort(e){if(!e)return e;let t=e;t=0===t.indexOf("http://")?t.substring(7):t.substring(8);const r=t.lastIndexOf(":");return r>-1&&(t=t.substring(0,r)),t.toLowerCase()}}},5726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static move(e,t,r){let i=t;const s=r,n=e[i];if(i<s)for(;i<s;)e[i]=e[i+1],i++;else for(;i>s;)e[i]=e[i-1],i--;e[s]=n}static removeByIndices(e,t){const r=[];if(0===t.length)return r;t.sort(((e,t)=>e-t));let i=0,s=0;for(;;){for(;s+i===t[i]&&i<t.length;)r.push(e[s+i]),i++;if(!(s+i<e.length))break;e[s]=e[s+i],s++}return e.splice(s,t.length),r}static moveElementByIndicies(e,t,r){t.sort(((e,t)=>e-t));const i=e.map((e=>e));let s=!0,n=[];if(t[0]<r[0]){const e=this.updateIndices(t,r);n=r.map((t=>t-e)),s=!1}else n=r.map((e=>e));for(let r=0;r<t.length;r++)e[n[r]]=i[t[r]];let o=0,a=0;for(;o<i.length;)n.includes(o)||t.includes(a)?n.includes(o)&&t.includes(a)?(o++,a++):n.includes(o)?o++:t.includes(a)&&a++:(e[o]=i[a],o++,a++);if(s)for(let e=0;e<t.length;e++)n[e]=t[e]+t.length;return n}static updateIndices(e,t){let r=0;for(let i=0;i<e.length;i++)e[i]<t[0]&&r++;return r}static merge(e,t,r){const i=r.map(((e,r)=>[e,t[r]]));i.sort(((e,t)=>e[0]-t[0]));for(const t of i){const r=t;e.splice(r[0],0,r[1])}}}},1026:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(61506),s=r(27994);class n{static transactionStart(e,t,r){const n=this.createMessage("transactionStart","performance",{context:{eventSource:`synthetic-${e}`,eventType:"performance",attributes:t,page:{location:"reports:reportApp",recordId:r,sobjectType:"Report",url:window.parent.location.href}}});i.Z.get(s).postReportBuilderAppMessage(n)}static transactionEnd(e,t){const r={eventSource:`synthetic-${e}`,eventType:"performance",...t},n=this.createMessage("transactionEnd","performance",{context:r});i.Z.get(s).postReportBuilderAppMessage(n)}static markEnd(e,t){const r={eventType:"performance",...t},n=this.createMessage("markEnd",`synthetic-${e}`,r);i.Z.get(s).postReportBuilderAppMessage(n)}static crudTransaction(e,t,r){const n={context:{eventType:"crud",eventSource:t,locator:{target:r,scope:"sfxReportApp"},attributes:{recordId:e,recordType:"Report"},page:{entityType:"Report"}}},o=this.createMessage("transaction","interaction",n);i.Z.get(s).postReportBuilderAppMessage(o)}static createMessage(e,t,r){return{srcApp:"reportBuilderApp",metricService:!0,name:e,action:t,payload:r}}}},3988:(e,t,r)=>{"use strict";function i(e){return navigator.userAgent.toLowerCase().indexOf(e)>-1}function s(){return i("macintosh")}function n(){return i("chrome")}function o(){return i("firefox")}r.d(t,{V5:()=>s,i7:()=>n,vU:()=>o})},37129:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{_isCanceled=!1;constructor(e){this._promise=new Promise(((t,r)=>e.then((e=>this._isCanceled?r({isCanceled:!0}):t(e)),(e=>this._isCanceled?r({isCanceled:!0}):r(e)))))}getPromise(){return this._promise}cancel(){this._isCanceled=!0}}},53499:(e,t,r)=>{"use strict";r.r(t),r.d(t,{alphaHexToPercentage:()=>M,alphaPercentageToHex:()=>L,applyOpacity:()=>R,doHexMatch:()=>A,getBrightnessFromHex:()=>T,getComplementaryColor:()=>E,getDeltaColor:()=>k,getNewColor:()=>D,getOpacityFromRgba:()=>b,hexToRgb:()=>_,hexToRgbElements:()=>m,hexToRgba:()=>v,isEqual:()=>S,isHexAFormat:()=>h,isHexFormat:()=>c,isRgbFormat:()=>p,isRgbaFormat:()=>g,isShortHexFormat:()=>d,normalizeHexCode:()=>I,rgbToHex:()=>f,rgbToHsl:()=>C,rgbaToHex:()=>y,toSixDigitHex:()=>F});var i=r(33648);const s=/^#[0-9A-F]{3}$/i,n=/^(#(?:[0-9A-F]{3}){1,2})$/i,o=/^(#(?:[0-9A-F]{2}){4})$/i,a=/^rgb\(\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])\s*\)$/i,l=/^rgba\(\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])\s*,\s*(0|[1-9]\d?|1\d\d?|2[0-4]\d|25[0-5])\s*,\s*(0?\.[0-9]+|[01])\s*\)\s*$/i;function u(e,t,r){return`rgb(${e}, ${t}, ${r})`}function d(e){return s.test(e)}function c(e){return n.test(e)}function h(e){return o.test(e)}function p(e){return a.test(e)}function g(e){return l.test(e)}function m(e){const t=d(e)?`#${e.slice(1).split("").map((e=>e+e)).join("")}`:e;if(!c(t))throw new Error(`Invalid color code: ${t} is not in hex format`);const r=[];for(let e=1;e<t.length;e+=2)r.push(parseInt(t.slice(e,e+2),16));return r}function _(e){const[t,r,i]=m(e);return u(t,r,i)}function f(e){const t=e.match(a);if(!t)throw new Error(`Invalid color code: ${e} is not in RGB format`);return`#${t.slice(1).map((e=>`0${parseInt(e,10).toString(16)}`.slice(-2))).join("").toUpperCase()}`}function y(e){const t=e.match(l);if(!t)throw new Error(`Invalid color code: ${e} is not in RGB format`);const[r,i,s]=t.slice(1);return f(u(r,i,s))}function b(e){const t=e.match(l);let r;return t&&(r=t[4]),(100*+r).toString()}function C(e){const t=e.match(a);if(!t)throw new Error(`Invalid color code: ${e} is not in RGB format`);const r=t.slice(1).map((e=>Number(e)/255)),[i,s,n]=r,o=Math.min(...r),l=Math.max(...r),u=100*(o+l)/2,d=100*function(e,t,r){return e===t?0:r<50?(t-e)/(t+e):(t-e)/(2-t-e)}(o,l,u),c=60*function(e,t,r,i,s){return t===e?0:t===r?(i-s)/(t-e):t===i?2+(s-r)/(t-e):4+(r-i)/(t-e)}(o,l,i,s,n);return[Math.round(c),Math.round(d),Math.round(u)]}function E(e){let t,r;if(c(e))t=_(e);else if(h(e))t=_(e.slice(0,-2)),r=+M(e.slice(7))/100;else{const i=e.match(l);if(i){let e,s,n;[e,s,n,r]=i.slice(1),t=u(e,s,n)}else t=e}let[i,s,n]=C(t);return n<20?n+=8:n<60?n+=5:n-=5,null!=r?`hsla(${i}, ${s}%, ${n}%, ${r})`:`hsl(${i}, ${s}%, ${n}%)`}function S(e,t){const r=p(e);return r===p(t)?e.toLowerCase()===t.toLowerCase():r?e.toLowerCase()===_(t).toLowerCase():_(e).toLowerCase()===t.toLowerCase()}function T(e){const[t,r,i]=Array.from(m(e));return.2126*t+.7152*r+.0722*i}function I(e){return"#"===e[0]?e:`#${e}`}function v(e,t=0){return`rgba(${m(e).concat([t]).join(", ")})`}function R(e,t=0){const r=e.match(l);let i;if(r){const[e,t,s]=r.slice(1);i=f(u(e,t,s))}else i=p(e)?f(e):e;return v(i,t)}const w=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i;function A(e,t){const[r,i]=[e,t].map((e=>9===e.length&&"ff"===e.slice(-2).toLowerCase()?e.slice(0,7):e));return r.toLowerCase()===i.toLowerCase()}function D(e,t,r){if(e.hex){if(t?!t(e.hex):(n=e.hex)&&!w.test(F(n)))return(0,i.assign)({},r,{hex:e.hex,errors:(0,i.assign)({},r?.errors,{hex:!0}),hsv:{hue:"",saturation:"",value:""},rgb:{red:"",green:"",blue:""}});const o=r?r.alpha:"";return{hex:e.hex||"",hsv:(s=e.hex||"",P(Z(s))),rgb:Z(e.hex||""),alpha:e.alpha?e.alpha:o}}var s,n;if("red"in e||"blue"in e||"green"in e){const t=(0,i.assign)({},r?.rgb,e),s=function(e){const t=e=>isNaN(e)||Math.floor(e)!==Number(e)||e<0||e>=256;return Object.entries(e).reduce(((e,r)=>(e[r[0]]=t(+r[1]),e)),{})}(t);if(Object.values(s).includes(!0))return(0,i.assign)({},r,{rgb:t,errors:(0,i.assign)({},r?.errors,s)});const n=r?r.alpha:"";return{hex:O(t),hsv:P(t),rgb:t,alpha:void 0!==e.alpha?e.alpha:n}}if(void 0!==e.alpha)return(0,i.assign)({},r,{alpha:e.alpha});if("hue"in e||"saturation"in e||"value"in e){const t=(0,i.assign)({},r?.hsv,e);return{hex:N(t),hsv:t,rgb:x(t),alpha:r?r.alpha:""}}return{hex:"",hsv:{hue:0,saturation:0,value:0},rgb:{red:0,green:0,blue:0},alpha:""}}function L(e){return Math.round(255*e/100).toString(16).padStart(2,"0")}function M(e){return Math.round(100/255*parseInt(e,16)).toString()}function N({hue:e,saturation:t,value:r}){return O(x({hue:e,saturation:t,value:r}))}function O({red:e,green:t,blue:r}){function i(e){return`0${Math.round(e).toString(16)}`.substr(-2)}return`#${i(e)}${i(t)}${i(r)}`}function P({red:e,green:t,blue:r}){const i=e/255,s=t/255,n=r/255,o=Math.max(i,s,n),a=Math.min(i,s,n),l=o-a;let u;return o===a?u=0:(u=i===o?(s-n)/l+(s<n?6:0):s===o?(n-i)/l+2:(i-s)/l+4,u*=60),{hue:u,saturation:0===o?0:l/o*100,value:100*o}}function x({hue:e,saturation:t,value:r}){const i=e/360,s=t/100,n=r/100;let o,a,l;const u=Math.floor(6*i),d=6*i-u,c=n*(1-s),h=n*(1-d*s),p=n*(1-(1-d)*s);switch(u%6){case 0:o=n,a=p,l=c;break;case 1:o=h,a=n,l=c;break;case 2:o=c,a=n,l=p;break;case 3:o=c,a=h,l=n;break;case 4:o=p,a=c,l=n;break;default:o=n,a=c,l=h}return{red:Math.round(255*o),blue:Math.round(255*l),green:Math.round(255*a)}}function Z(e){const t=w.exec(F(e));return t?{red:parseInt(t[1],16),green:parseInt(t[2],16),blue:parseInt(t[3],16)}:{red:-1,green:-1,blue:-1}}function F(e){let t=e;9===e.length&&(t=e.slice(0,7));const r=/^#([a-f\d])([a-f\d])([a-f\d])$/i.exec(t);return r?`#${r[1]}${r[1]}${r[2]}${r[2]}${r[3]}${r[3]}`:t}function k(e,t,r){const i=e=>Math.min(Math.max(+e,0),100);return D({saturation:i(r.hsv.saturation+(e.saturation||0)),value:i(r.hsv.value+(e.value||0))},t,r)}},11227:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486),s=r(8429);class n{static MAX_ACTIVE_GROUPS=6;static MAX_CATEGORIES_PER_GROUP=500;static FILTER_LIMIT=n.MAX_ACTIVE_GROUPS*n.MAX_CATEGORIES_PER_GROUP;static filterOptions({inputValue:e,limit:t=10,options:r}){const s=new RegExp(i.escapeRegExp(e),"ig");return r.forEach((t=>{const r=!!t.label&&t.label.match(s);t.highlight=!(!r||""===e)})),r.slice(0,t)}static getDataCategoryOperators(){const e="reportBuilder";return[{label:s.Z.getLabel(e,"at"),value:"at",id:"at"},{label:s.Z.getLabel(e,"above"),value:"av",id:"av"},{label:s.Z.getLabel(e,"below"),value:"be",id:"be"},{label:s.Z.getLabel(e,"aboveOrBelow"),value:"ab",id:"ab"}]}static getCategoryValuesDFS(e,t,r){for(let i=0;i<t.length;i++){const s=!!t[i].childNodes;e.push({label:t[i].categoryName,value:t[i].categoryId,id:t[i].categoryId,depth:r,hasChildNodes:s}),s&&n.getCategoryValuesDFS(e,t[i].childNodes,r+1)}}static getCategoryGroupOperators(e,t,r){const i=t[r];if(!i)return"ALL";const s=i[0];return 1===i.length&&e.categoryGroupId===s.categoryGroupId&&e.categoryValueId===s.categoryId&&e.operator===s.operation?"ALL":s.operation}}},90554:(e,t,r)=>{"use strict";r.r(t),r.d(t,{deepContains:()=>C,deepCopy:()=>_,deepDefaults:()=>b,deepExtend:()=>y,deepIntersection:()=>E,deleteNullValues:()=>S,isMap:()=>f,isSubset:()=>p,mapES6Map:()=>m,mapObject:()=>g,removeFromArray:()=>c,sameElements:()=>h,toES6Map:()=>a,toES6Set:()=>n,toHistogram:()=>u,toIdentityMap:()=>l,toKeyValuePair:()=>d,toMap:()=>o,toSet:()=>s});var i=r(96486);function s(e,t=!1,r=(e=>String(e))){const i={};for(const s of e){const e=r(s);if(t&&i[e])throw new Error("Duplicate value in set.");i[e]=!0}return i}function n(e,t){const r=new Set;return e.forEach((e=>{const i=t(e);if(r.has(i))throw new Error("Attempted to add duplicate value to set.");return r.add(i)})),r}function o(e,t){const r={};for(const i of e){const e=t(i);if(null!=r[e])throw new Error("Duplicate value in set.");r[e]=i}return r}function a(e,t){const r=new Map;return e.forEach((e=>{const i=t(e);if(r.has(i))throw new Error("Attempted to add value with duplicate hash to map.");return r.set(i,e)})),r}function l(e,t=!1){const r={};for(const i of e){if(t&&null!=r[i])throw new Error("Duplicate value in set.");r[i]=i}return r}function u(e){const t={};for(const r of e){const e=String(r);t[e]=(t[e]||0)+1}return t}function d(e,t){return{[e]:t}}function c(e,t){const r=e.indexOf(t);return r<0?void 0:e.splice(r,1)}function h(e,t){if(e.length!==t.length)return!1;const r=u(e);for(const e of t){const t=String(e);if(null==r[t])return!1;0===--r[t]&&delete r[t]}return 0===(0,i.size)(r)}function p(e,t){const r=Array.isArray(e)?s(e):e,i=Array.isArray(t)?s(t):t;for(const e of Object.keys(r))if(null==i[e])return!1;return!0}function g(e={},t){const r={};for(const i of Object.keys(e))r[i]=t(e[i],i,e);return r}function m(e,t){const r=new Map;for(const[i,s]of e.entries())r.set(i,t(s,i,e));return r}function _(e){if(null==e)return e;const t=JSON.stringify(e);if(null==t)throw new Error("Failed to deep copy.");return JSON.parse(t)}function f(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}function y(e,...t){for(const r of t)if(null!=r)for(const t of Object.keys(r)){const i=r[t],s=e[t];f(s)&&f(i)?y(s,i):e[t]=i}return e}function b(e,t){for(const r of Object.keys(t)){const i=t[r],s=e[r];null!=s?f(i)&&f(s)&&b(s,i):e[r]=i}}function C(e,t){return e.some((0,i.partial)(i.isEqual,t))}function E(e,...t){const r=[];for(const i of e)C(r,i)||t.some((e=>!C(e,i)))||r.push(i);return r}function S(e,t=!1){for(const r of Object.keys(e)){const i=e[r];if(f(i))S(i);else if(Array.isArray(i)&&t)for(const e of i)f(e)&&S(e);else null==i&&delete e[r]}return e}},69499:(e,t,r)=>{"use strict";function i(e){return e.getBoundingClientRect().width}function s(e){return e.clientHeight}function n(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0}r.r(t),r.d(t,{getClientHeight:()=>s,getWidth:()=>i,isVisible:()=>n})},30077:(e,t,r)=>{"use strict";r.r(t),r.d(t,{get$:()=>o,isOrIn:()=>a,to$:()=>n});var i=r(70351),s=r(73935);function n(e,t=!1){if(e.jquery){if(t&&1!==e.length)throw new Error("Must be a single element.");return e}return e.isReactComponent?i(s.findDOMNode(e)):i(e)}function o(e,t){const r=t?e.refs[t]:e;return r?n(r):i()}function a(e,t){const r=e.jquery?e:i(e),s=t.jquery?t[0]:t;return r.is(s)||r.find(s).length>0}},49720:(e,t,r)=>{"use strict";r.r(t),r.d(t,{KEY_CODE_ALT:()=>a,KEY_CODE_BACKSPACE:()=>i,KEY_CODE_DELETE:()=>g,KEY_CODE_DOWN:()=>p,KEY_CODE_ENTER:()=>n,KEY_CODE_ESCAPE:()=>l,KEY_CODE_LEFT:()=>d,KEY_CODE_RIGHT:()=>h,KEY_CODE_SHIFT:()=>o,KEY_CODE_SHIFT_D:()=>m,KEY_CODE_SPACE:()=>u,KEY_CODE_TAB:()=>s,KEY_CODE_UP:()=>c,isArrowKey:()=>y,isDeleteKey:()=>C,isLetterKey:()=>S,isModifierKey:()=>b,isNumericKey:()=>E,toCharacter:()=>I,toKeyCode:()=>f,toNumber:()=>T});const i=8,s=9,n=13,o=16,a=18,l=27,u=32,d=37,c=38,h=39,p=40,g=46,m=68;function _(e){return 48<=e&&e<=57}function f(e){if("string"!=typeof e||1!==e.length)return;const t=e.charCodeAt(0);return t>=48&&t<=57||t>=65&&t<=90?t:t>=97&&t<=122?t-32:void 0}function y(e){return e===d||e===c||e===h||e===p}function b(e){return e===o||e===a}function C(e){return e===i||e===g}function E(e){return _(e)||function(e){return 96<=e&&e<=105}(e)}function S(e){return 65<=e&&e<=90}function T(e){if(!E(e))throw new Error(`Key code ${e} is for non-numeric key.`);return _(e)?e-48:e-96}function I(e){if(!S(e))throw new Error(`Key code ${e} is for non-letter key.`);return String.fromCharCode(e)}},93404:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static LTR="ltr";static RTL="rtl";static getDirection(){if(!i.direction){const e=document.querySelector("html");e&&(i.direction=e.dir)}return i.direction&&i.direction.toLowerCase()===i.RTL?i.RTL:i.LTR}static isRTL(){return i.getDirection()===i.RTL}}},17237:(e,t,r)=>{"use strict";r.d(t,{_m:()=>o,fp:()=>n});const i=new Set;let s="";function n(e){const t=localStorage.getItem(a(e));return null!=t?JSON.parse(t):null}function o(e,t){i.add(e),localStorage.setItem(a(e),JSON.stringify(t))}function a(e){return`"${s}" | ${e}`}},31058:(e,t,r)=>{"use strict";r.d(t,{He:()=>o,NM:()=>n});const i=/^0b[01]+$/i,s=/^0o[0-7]+$/i;function n(e,t){const r=e<0,i=Math.abs(e);let s;if(0===t)s=Math.round(i);else{const e=Math.pow(10,t);s=Math.round(i*e)/e}return r&&0!==s?-s:s}function o(e){let t=e;return"number"==typeof t?t:"symbol"==typeof t?NaN:(a(t)&&(t="function"==typeof t.valueOf?t.valueOf():t,t=a(t)?t+"":t),"string"!=typeof t?0===t?t:+t:(t=t.trim(),i.test(t)?parseInt(t.slice(2),2):s.test(t)?parseInt(t.slice(2),8):+t))}function a(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)}},925:(e,t,r)=>{"use strict";r.d(t,{CH:()=>o,Gb:()=>d,Q7:()=>c,X3:()=>l,Z2:()=>a,pn:()=>s,pw:()=>n});var i=r(54175);function s(e){if(null!=e&&null!=e.ops&&Array.isArray(e.ops))return[...e.ops]}function n(e){if(null==e||0===e.length||!Array.isArray(e))return new i;return e.reduce(((e,t)=>e.insert(String(t.insert),{...t.attributes})),new i)}const o=["10px","12px","13px","14px","16px","18px","20px","24px","28px","32px","42px","48px","52px","64px","72px","96px","128px"],a="16",l=[...Array(500)].map(((e,t)=>`${t+1}px`)),u=new RegExp("px$","i"),d=e=>{const t=e.trim();return t.match(u)?t.slice(0,-2):t},c=e=>{if(!e)return!1;const t=d(e.toString());if(isNaN(t))return!1;const r=parseFloat(t);return!!Number.isInteger(r)&&(r>=1&&r<=500)}},64259:(e,t,r)=>{"use strict";function i(e,t,r,i){switch(e){case 0:return t&r^~t&i;case 1:case 3:return t^r^i;case 2:return t&r^t&i^r&i;default:throw new Error("Invalid input")}}function s(e,t){return e<<t|e>>>32-t}function n(e){let t="",r=8;for(;--r;){t+=(e>>>4*r&15).toString(16)}return t}function o(e,t=!0){let r=t?e.replace(/[\u0080-\u07ff]/g,(function(e){const t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|63&t)})).replace(/[\u0800-\uffff]/g,(function(e){const t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|63&t)})):e;const o=[1518500249,1859775393,2400959708,3395469782];r+=String.fromCharCode(128);const a=r.length/4+2,l=Math.ceil(a/16),u=new Array(l);let d=-1;for(;++d<l;){u[d]=new Array(16);let e=-1;for(;++e<16;)u[d][e]=r.charCodeAt(64*d+4*e)<<24|r.charCodeAt(64*d+4*e+1)<<16|r.charCodeAt(64*d+4*e+2)<<8|r.charCodeAt(64*d+4*e+3)}u[l-1][14]=Math.floor(8*(r.length-1)/Math.pow(2,32)),u[l-1][15]=8*(r.length-1)&4294967295;let c=1732584193,h=4023233417,p=2562383102,g=271733878,m=3285377520;const _=new Array(80);for(d=-1;++d<l;){let e=-1;for(;++e<16;)_[e]=u[d][e];for(e=15;++e<80;)_[e]=s(_[e-3]^_[e-8]^_[e-14]^_[e-16],1);let t=c,r=h,n=p,a=g,l=m;for(e=-1;++e<80;){const u=Math.floor(e/20),d=s(t,5)+i(u,r,n,a)+l+o[u]+_[e]&4294967295;l=a,a=n,n=s(r,30),r=t,t=d}c=c+t&4294967295,h=h+r&4294967295,p=p+n&4294967295,g=g+a&4294967295,m=m+l&4294967295}return n(c)+n(h)+n(p)+n(g)+n(m)}r.d(t,{a:()=>o})},74978:(e,t,r)=>{"use strict";r.r(t),r.d(t,{camelCase:()=>c,capitalizeFirst:()=>u,contains:()=>s,decodeHTMLString:()=>C,encodeHTMLString:()=>E,endsWith:()=>o,escapeBackslash:()=>f,escapeQuotes:()=>_,escapeQuotesAndBackslash:()=>y,isEqual:()=>l,leftPad:()=>h,leftTrim:()=>a,quoteValue:()=>b,repeat:()=>p,reverse:()=>g,splice:()=>m,startsWith:()=>n,toUpperCaseFirstN:()=>d,trim:()=>S,trimEnd:()=>T});const i={decodeMap:{"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#92;":"\\"},encodeMap:{}};for(const e of Object.keys(i.decodeMap)){const t=i.decodeMap[e];"\\"!==t?i.encodeMap[t]=e:i.encodeMap[`\\${t}`]=e}function s(e,t){return e.indexOf(t)>=0}function n(e,t){return 0===e.indexOf(t)}function o(e,t){const r=e.lastIndexOf(t);return!(r<0)&&e.length-t.length===r}function a(e){return e.replace(/^\s+/,"")}function l(e,t){return!e&&!t||e===t}function u(e,t=!1){let r=e.substr(1);return t&&(r=r.toLowerCase()),e.charAt(0).toUpperCase()+r}function d(e,t=1){return e.substr(0,t).toUpperCase()+e.substr(t)}function c(e,t="-"){const r=new RegExp(t+"(.)","g");return e.toLowerCase().replace(r,((e,t)=>t.toUpperCase()))}function h(e,t,r){let i=e.toString();for(;i.length<t;)i=r+i;return i}function p(e,t){return new Array(t+1).join(e)}function g(e){let t=e.length,r="";if(t>0)for(;t--;)r+=e.charAt(t);return r}function m(e,t,r){if(t>e.length)throw new Error(`Invalid position (${t}) and replacement ("${r}") for string "${e}".)`);return e.slice(0,t)+r+e.slice(t+r.length)}function _(e,t=!1){return t?e.replace(/'/g,"\\'"):e.replace(/"/g,'\\"')}function f(e){return e.replace(/\\/g,"\\\\")}function y(e,t=!1){return _(f(e),t)}function b(e,t=!1){return"string"!=typeof e?e:t?`'${y(e,t)}'`:`"${y(e,t)}"`}function C(e){if(!e)return e;const t=Object.keys(i.decodeMap);return e.replace(new RegExp(`(${t.join("|")})`,"g"),(e=>i.decodeMap[e]))}function E(e){if(!e)return e;const t=Object.keys(i.encodeMap);return e.replace(new RegExp(`(${t.join("|")})`,"g"),(e=>"\\"!==e?i.encodeMap[e]:i.encodeMap["\\\\"]))}function S(e){return e?e.trim():""}function T(e){return e?e.trimEnd():""}},79529:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var i=r(49720),s=r(51141);function n(e,t,r,n,o,a){switch(a.keyCode){case i.KEY_CODE_TAB:s.trap(a),function(e){if(e.shiftKey){const e=document.querySelector(".report-type-scope-filter");e?e?.querySelector("button")?.focus():document.querySelector(".slds-input")?.focus()}else{const e=document.querySelector(".scopeFilterShowMore");if(e&&!e.hasAttribute("disabled"))e?.focus();else{const e=document.querySelector("#detail-panel-close-btn");e?e?.focus():document.querySelector(".slds-modal__close")?.focus()}}}(a);break;case i.KEY_CODE_LEFT:if(t>0){const r=a.currentTarget?.previousElementSibling;s.trap(a),r&&o(e,t-1)}break;case i.KEY_CODE_RIGHT:t<n-1&&(s.trap(a),o(e,t+1));break;case i.KEY_CODE_DOWN:e<r-1&&(s.trap(a),2!==t&&o(e+1,t));break;case i.KEY_CODE_UP:e>0&&(s.trap(a),o(e-1,t))}}},17599:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(723);class s extends i{getCode(){return this._value}}s.build(s,{EDIT_REPORT:"Edit-Report",RUN_REPORT:"Run-Report",CREATE_NEW_REPORT:"Create-New-Report",SAVE_REPORT:"Save-Report",SELECT_REPORT_TYPE:"Select-Report-Type",REPORT_TYPE_FIELD_PANEL:"Report-Type-Field-Panel",REPORT_TYPE_RECENTLY_USED:"Report-Type-Recently-Used",SAVE_AND_RUN_REPORT:"Save-And-Run-Report",SWITCH_TO_RUN_MODE:"Switch-to-Run-Report",SWITCH_TO_EDIT_MODE:"Swich-to-Edit-Report",INLINE_EDIT_REPORT:"Inline-Edit-Report",USE_EINSTEIN_FORMULA_GENERATOR:"Use-Einstein-Formula-Generator",ASK_EINSTEIN_FORMULA_GENERATOR:"Ask-Einstein-Formula-Generator",SUBMIT_POSITIVE_FEEDBACK_EINSTEIN_FORMULA_GENERATOR:"Submit-Positive-Feedback-Einstein-Formula-Generator",SUBMIT_NEGATIVE_FEEDBACK_EINSTEIN_FORMULA_GENERATOR:"Submit-Negative-Feedback-Einstein-Formula-Generator",USE_EINSTEIN_REPORT_GENERATOR:"Use-Einstein-Report-Generator",USE_EINSTEIN_REPORT_GENERATOR_ASK_QUESTION:"Use-Einstein-Report-Generator-Ask-Question",USE_EINSTEIN_REPORT_GENERATOR_WITH_SUGGESTED_TYPE:"Use-Einstein-Report-Generator-with-Suggested-Type",SUBMIT_POSITIVE_FEEDBACK_EINSTEIN_REPORT_GENERATOR:"Submit-Positive-Feedback-Einstein-Report-Generator",SUBMIT_NEGATIVE_FEEDBACK_EINSTEIN_REPORT_GENERATOR:"Submit-Negative-Feedback-Einstein-Report-Generator"})},44709:(e,t,r)=>{"use strict";r.d(t,{D:()=>s});const i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");function s(){let e=(new Date).getTime(),t="";for(const r of i){if("x"!==r&&"y"!==r){t+=r;continue}let i=16*(e+Math.random())%16|0;e=Math.floor(e/16),"y"===r&&(i=3&i|8),t+=i.toString(16)}return t}},18277:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t,r,i){this.lensState=e,this.datasetReferences=t,this.label=r,this.lensAssetOnlyXmdJson=i}}},65757:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var i=r(16154),s=r(32479),n=r(60626),o=r(8429),a=r(90394),l=r(79167),u=r(38241),d=r(21318),c=r(31550);function h(e=!1){return c.getColorOptions(e)}const p="useDefaults";class g{static isUseDefaultsField(e){return e===p}static createStylesInputDefinitions(e){const t=[{type:i.CUSTOM_COLOR,name:"backgroundColor",label:o.Z.getLabel("DashboardPropertiesPanel","backgroundColor"),options:{inputOptions:h().setDefault(u.Property.backgroundColor.getDefaultValue()),showAlpha:!0}},{type:i.TOGGLE_BORDER,name:"borderEdges",label:o.Z.getLabel("DashboardPropertiesPanel","borderEdge"),options:{inputOptions:(new s).addOptionsToCategory("",n.enums()).setDefault(u.Property.borderEdges.getDefaultValue())}},{type:i.CUSTOM_COLOR,name:"borderColor",label:o.Z.getLabel("DashboardPropertiesPanel","borderColor"),options:{inputOptions:h().setDefault(u.Property.borderColor.getDefaultValue()),showAlpha:!0}},{type:i.SELECT,name:"borderWidth",label:o.Z.getLabel("DashboardPropertiesPanel","borderWidth"),className:"short",options:{dataSource:()=>(new a).addAll([1,2,4,8]).setDefaultById(u.Property.borderWidth.getDefaultValue())}},{type:i.SELECT,name:"borderRadius",label:o.Z.getLabel("DashboardPropertiesPanel","borderRadius"),className:"short",options:{dataSource:()=>(new a).addAll([0,4,8,16]).setDefaultById(u.Property.borderRadius.getDefaultValue())}}];return e&&t.unshift(this._createUseDefaultsInputDefinition()),t}static _createUseDefaultsInputDefinition(){return{type:i.CHECKBOX,name:p,label:o.Z.getLabel("DashboardPropertiesPanel",p),options:{default:!0,infoTooltip:o.Z.getLabel("DashboardPropertiesPanel","useDefaultWidgetStyleTooltip")}}}static createSelectedStyleSection(){return{type:i.NAMED_SECTION,name:"selectedTab",label:o.Z.getLabel("DashboardPropertiesPanel","selectedTab"),options:{items:[{type:i.CUSTOM_COLOR,name:"textColor",label:o.Z.getLabel("DashboardPropertiesPanel","textColor"),options:{inputOptions:h(),showAlpha:!0}},{type:i.CUSTOM_COLOR,name:"backgroundColor",label:o.Z.getLabel("DashboardPropertiesPanel","backgroundColor"),options:{inputOptions:h(),showAlpha:!0}},{type:i.TOGGLE_BORDER,name:"borderEdges",label:o.Z.getLabel("DashboardPropertiesPanel","borderEdge"),options:{inputOptions:(new s).addOptionsToCategory("",n.enums())}},{type:i.CUSTOM_COLOR,name:"borderColor",label:o.Z.getLabel("DashboardPropertiesPanel","borderColor"),options:{inputOptions:h(),showAlpha:!0}},{type:i.SELECT,name:"borderWidth",label:o.Z.getLabel("DashboardPropertiesPanel","borderWidth"),options:{dataSource:()=>(new a).addAll([0,1,2,4,8])}}]}}}static getFilterStyleSection(){return{type:i.SECTION,name:"filterStyles",label:o.Z.getLabel("DashboardPropertiesPanel","filterStyleSection"),options:{items:[{type:i.RADIO,name:"displayMode",label:o.Z.getLabel("DashboardPropertiesPanel","displayMode"),options:{dataSource:this.getDisplayModeOptions,infoTooltip:o.Z.getLabel("DashboardPropertiesPanel","displayModeInfo")}},{type:i.NAMED_SECTION,name:"filterStyle",options:{inline:!0,items:[{type:i.CUSTOM_COLOR,name:"titleColor",label:o.Z.getLabel("DashboardPropertiesPanel","fieldColor"),options:{inputOptions:h().setDefault()}},{type:i.CUSTOM_COLOR,name:"valueColor",label:o.Z.getLabel("DashboardPropertiesPanel","valueColor"),options:{inputOptions:h().setDefault()}}]}}]}}}static createTextSizeInput(){return{type:i.SELECT,name:"fontSize",label:o.Z.getLabel("DashboardPropertiesPanel","textSize"),options:{dataSource:()=>(new a).addAll([10,12,14,16,18,20,24,32,48,64])}}}static createTextColorInput(){return{type:i.CUSTOM_COLOR,name:"textColor",label:o.Z.getLabel("DashboardPropertiesPanel","textColor"),options:{inputOptions:h()}}}static getDisplayModeOptions(){const e=new a;return e.add(d.Z.FILTER.code,o.Z.getLabel("DashboardPropertiesPanel",d.Z.FILTER.code)),e.add(d.Z.COMBO.code,o.Z.getLabel("DashboardPropertiesPanel",d.Z.COMBO.code)),e}static getItemStyle(e){return(new l.Z).setColor(e.getParameter("textColor")).setFontSize(e.getParameter("fontSize"))}static getSelectedItemsStyle(e){const t=e.getParameter("selectedTab");return(new l.Z).setFontSize(e.getParameter("fontSize")).setColor(t.textColor).setBackgroundColor(t.backgroundColor).setBorderStyles(t.borderEdges,t.borderColor,t.borderWidth)}}},52955:(e,t,r)=>{"use strict";r.d(t,{Z:()=>H});var i=r(96486),s=r(8429),n=r(90554),o=r(54180),a=r(1806),l=r(87418),u=r(56861),d=r(33581);class c extends d.Z{constructor(e,t,r=!1){super(),this._fieldSection=e,this._fieldName=t,this._shouldKeepLabel=r}mutate(e){const t=this._fieldSection.getSection(e),r=this._fieldSection.getField(t,this._fieldName);if(null==r)throw new Error(`Field with field name '${this._fieldName}' doesn't exist.`);const s=(0,i.findIndex)(t,(e=>e[this._fieldSection.getIdentifier()]===this._fieldName));this._shouldKeepLabel?t[s]={field:r.field,label:r.label}:(0,i.remove)(t,r)}}var h=r(78406),p=r(79587),g=r(99095),m=r(88652);class _ extends g.Z{uploadTableauDataSource(e){return this._makeRequest(this._buildFullPath("tableau/upload-datasource"),{method:m.Z.POST,body:JSON.stringify({dmoNameOrId:e})})}}const f=new _;var y=r(86866),b=r(21891),C=r(47688),E=r(89769),S=r(3475),T=r(96900),I=r(62373),v=r(94170),R=r(12698),w=r(83458),A=r(40651),D=r(63594),L=r(79070),M=r(82370);class N extends M{constructor({stepMetadata:e,query:t,datasetMetadatas:r,lastResultMetadata:i,assetExtendedMetadata:s,dateVersion:n}){super(),this._stepMetadata=e,this._query=t,this._datasetMetadatas=r,this._lastResultMetadata=i,this._assetExtendedMetadata=s,this._dateVersion=n}_getLensAssetId(){return"clone:step"}_getStepId(){const e=y.Z.fromCode(this._stepMetadata.getType());return e!==y.Z.SAQL&&(0,i.isEmpty)(this._stepMetadata.getJson().query?.pigql)?e===y.Z.SOQL||e===y.Z.SQL||e===y.Z.CDP?e.getCode():y.Z.AGGREGATE_WITH_NEW_BINDINGS.getCode():y.Z.SAQL.getCode()}_getLensJson(){return{id:this._getLensAssetId(),type:A.Z.LENS.getCode(),label:s.Z.getLabel("QueryBuilder","cloneTitle",this._stepMetadata.getLabel()??this._stepMetadata.getId()),dateVersion:this._dateVersion.getCode(),folder:{id:this._stepMetadata.getDashboardFolderId()}}}_getVisualizationType(){return this._getVisualizationTypeFromStep(this._stepMetadata)}_getDashboardStepId(){return this._stepMetadata.getId()}_getDatasetMetadatas(){return this._datasetMetadatas}_getAssetExtendedMetadata(){return this._assetExtendedMetadata}_getAssetDateVersion(){return this._dateVersion}_getWidgetType(){return this._stepMetadata.getWidgetType()}_getWidgetParameters(){return(0,n.deepCopy)(this._stepMetadata.getWidgetVisualizationParameters())||{}}_buildLensState(){const e=(0,n.deepCopy)(this._stepMetadata.getJson()),t=this._getStepId();e.type=t;const r=y.Z.fromCode(this._stepMetadata.getType());if(r===y.Z.SAQL)this._updateSaqlStep(e,this._datasetMetadatas,this._lastResultMetadata,this._query);else if((0,i.isEmpty)(this._stepMetadata.getJson().query.pigql))e.query=this._query;else{const t=this._query,r=t.pigql;this._updatePigqlStep(e,t,this._datasetMetadatas,this._lastResultMetadata,r)}const s=this._getWidgetType(),o=this._getWidgetParameters();e.visualizationParameters&&(delete e.visualizationParameters.parameters,delete e.visualizationParameters.type),delete e.start;let a={};if(null!=s)a={type:s,parameters:o};else{const e=this._stepMetadata.getVisualizationType();null==e||e!==D.COMPARISON_TABLE.getCode()&&e!==D.PIVOT_TABLE.getCode()?(o.visualizationType=e||D.HBAR.getCode(),a={type:b.Z.CHART.getCode(),parameters:o}):(e===D.PIVOT_TABLE.getCode()&&(o.pivoted=!0),a={type:b.Z.TABLE.getCode(),parameters:o})}t===y.Z.SAQL.getCode()||t===y.Z.SOQL.getCode()||t===y.Z.SQL.getCode()?a.type=b.Z.QUERY_EDITOR.getCode():r===y.Z.GRAIN&&(a.type=b.Z.TABLE.getCode()),null==a.parameters&&(a.parameters={}),a.parameters.step=t;const l={steps:{},widgets:{}};return l.steps[t]=e,l.widgets[L.Z.buildWidgetId(t,a.type)]=a,l}}var O=r(56279),P=r(3185),x=r(45771),Z=r(82957);class F extends Z.Z{constructor(e,t){super(),this._lensId=e,this._values=t}mutate(e){e.dashboardJson.state.steps[this._lensId]=this._values}}class k extends M{constructor({stepMetadata:e,query:t,datasetMetadatas:r,lastResultMetadata:i,selectedWidget:s,assetExtendedMetadata:n,dateVersion:o}){super(),this._stepMetadata=e,this._query=t,this._datasetMetadatas=r,this._lastResultMetadata=i,this._selectedWidget=s,this._assetExtendedMetadata=n,this._dateVersion=o}_getLensAssetId(){return"edit:step"}_getStepId(){const e=y.Z.fromCode(this._stepMetadata.getType());return(0,i.isEmpty)(this._stepMetadata.getJson().query?.pigql)?e===y.Z.AGGREGATE||e===y.Z.GRAIN?y.Z.AGGREGATE_WITH_NEW_BINDINGS.getCode():e.getCode():y.Z.SAQL.getCode()}_getLensJson(){return{id:this._getLensAssetId(),type:A.Z.LENS.getCode(),label:this._stepMetadata.getLabel()??this._stepMetadata.getId(),dateVersion:this._dateVersion.getCode(),folder:{id:this._stepMetadata.getDashboardFolderId()}}}_getVisualizationType(){return this._selectedWidget?this._getVisualizationTypeFromWidget(this._stepMetadata.getJson(),this._selectedWidget?.getJson()):this._getVisualizationTypeFromStep(this._stepMetadata)}_getDashboardStepId(){return this._stepMetadata.getId()}_getDatasetMetadatas(){return this._datasetMetadatas}_getAssetExtendedMetadata(){return this._assetExtendedMetadata}_getAssetDateVersion(){return this._dateVersion}_buildLensState(){const e=(0,n.deepCopy)(this._stepMetadata.getJson()),t=this._getStepId();if(e.type=t,this._stepMetadata.getType()===y.Z.SAQL.getCode())this._updateSaqlStep(e,this._datasetMetadatas,this._lastResultMetadata,this._query);else if((0,i.isEmpty)(this._stepMetadata.getJson().query?.pigql))e.query=this._query;else{const t=this._query;this._updatePigqlStep(e,t,this._datasetMetadatas,this._lastResultMetadata,t.pigql)}const r=this._stepMetadata.getWidgetType(),s=(0,n.deepCopy)(this._stepMetadata.getWidgetVisualizationParameters())||{};let o,a=this._getVisualizationTypeFromStep(this._stepMetadata);if(null==e.visualizationParameters&&(e.visualizationParameters={}),e.visualizationParameters.visualizationType=a.getCode(),delete e.start,null!=this._selectedWidget&&[b.Z.TABLE.getCode(),b.Z.CHART.getCode()].includes(this._selectedWidget?.getType())){const e=this._selectedWidget;o=(0,n.deepCopy)(e.getJson())}else null!=r?o={type:r,parameters:s}:(a=this._stepMetadata.getVisualizationType(),[D.COMPARISON_TABLE.getCode(),D.PIVOT_TABLE.getCode()].includes(a)?(a===D.PIVOT_TABLE.getCode()&&(s.pivoted=!0),o={type:b.Z.TABLE.getCode(),parameters:s}):(s.visualizationType=a||D.HBAR.getCode(),o={type:b.Z.CHART.getCode(),parameters:s}));[y.Z.SAQL.getCode(),y.Z.SQL.getCode(),y.Z.SOQL.getCode()].includes(t)&&null==this._selectedWidget?o.type=b.Z.QUERY_EDITOR.getCode():this._stepMetadata.getType()===y.Z.GRAIN.getCode()&&(o.type=b.Z.TABLE.getCode()),null==o.parameters&&(o.parameters={}),o.parameters.step=t;const l={steps:{},widgets:{}};return l.steps[t]=e,l.widgets[L.Z.buildWidgetId(t,o.type)]=o,l}}var B=r(96487),W=r(84351);const G="fittocontainer";class U extends N{constructor({stepMetadata:e,queryWithoutFilters:t,datasetMetadatas:r,lastResultMetadata:i,dateVersion:s,widgetType:n}){super({stepMetadata:e,query:t,datasetMetadatas:r,lastResultMetadata:i,dateVersion:s}),this._selectedWidgetType=n}_getLensAssetId(){return"tooltip:step"}_getVisualizationType(){let e={};return this._selectedWidgetType.getCode()===this._stepMetadata.getWidgetType()&&(e=this._stepMetadata.getWidgetVisualizationParameters()),this._getVisualizationTypeFromWidget(this._stepMetadata.getJson(),{type:this._selectedWidgetType?.getCode(),parameters:e})}_getWidgetType(){return this._selectedWidgetType.getCode()}_getWidgetParameters(){if(this._selectedWidgetType.getCode()===this._stepMetadata.getWidgetType()){const e=(0,n.deepCopy)(this._stepMetadata.getWidgetVisualizationParameters())??{};return this._selectedWidgetType===b.Z.TABLE&&(e.mode=G),e}{const e=this._selectedWidgetType.getDefinition().getDefaultParameters();return this._selectedWidgetType===b.Z.TABLE&&(e.mode=G),e}}}class H{constructor({metadataHolder:e,metadataProvider:t,getLastResult:r,getWidget:i,getCurrentLayoutName:s,executeMutators:n,getQuery:o,onLensActionComplete:a,onExploreAsLens:l=(()=>{})}){this._metadataHolder=e,this._metadataProvider=t,this._getLastResult=r,this._getWidget=i,this._getCurrentLayoutName=s,this._executeMutators=n,this._getQuery=o,this._onLensActionComplete=a,this._onExploreAsLens=l}buildLensForExplorer(e,t,r,i){const s=this._getLensAssetBuilder(e,r,t,i);if(s)return new W.Z(r.getId(),s.buildLens(),e,t?.getId(),s.getMetadataProvider(this._metadataProvider))}edit(e,t,r,s,n,o=[],a,l){let u=[];const d=e.getId(),c=this._hasLensTypeChanged(e.getLensMetadata().getType(),r.type);let h,p=t?.getId();if(c)this._purgeStepJsonIfNeeded(e,r),u.push(new F(d,r));else{u.push(new F(d,r));const e=t?.getType();if(null!=t&&[b.Z.TABLE.getCode(),b.Z.CHART.getCode()].includes(e)){const r=t.getParameters();null!=r.theme&&t.getType()===s.type&&(s.parameters.theme=r.theme),r.tooltip?.content?.widget&&(s.parameters.tooltip.content.widget=r.tooltip.content.widget),s.parameters.step=r.step,null!=r.exploreLink&&(s.parameters.exploreLink=r.exploreLink),u.push(e===b.Z.CHART.getCode()?new S.Z(p,s.parameters,!0):new E.Z(p,s.parameters,!0)),h=!0}}this.shouldGenerateNewWidgetId(t,s)?(s.parameters.step=d,p=l??this._metadataHolder.generateWidgetId(b.Z.fromCode(s.type)),u.push(...this._getReplaceWidgetMutators(t,this._getWidget(t.getId()),t.getId(),this._getCurrentLayoutName(),p,s))):!h&&null!=s&&[b.Z.TABLE.getCode(),b.Z.CHART.getCode()].includes(t?.getType())&&(s.parameters.step=d,u.push(new E.Z(t.getId(),s.parameters,!0))),o?.length>0&&u.unshift(new I.Z(!0,o.map((e=>e.getJson())))),null!=n&&this._addAssetOnlyXmdMutators(u,d,r.type,n,!0),a&&(u=u.concat(a));const g=this._metadataHolder.getMetadata().getLens(d);this._executeMutators(u);const m=this._metadataHolder.getMetadata().getLens(d),_=["filters","limit","order"];this._onLensActionComplete({stepId:d,widgetId:p,didQueryChange:c||!(0,i.isEqual)((0,i.omit)(y.Z.fromCode(g.getType()).getDefinition().getQueryRefreshingParts(g),_),(0,i.omit)(y.Z.fromCode(m.getType()).getDefinition().getQueryRefreshingParts(m),_))})}clone(e,t,r,i){const s=this._metadataHolder.generateStepId(t),n=[new O.Z(!0,[new a(s,t,this._metadataHolder.getMetadata())],this._metadataHolder)];this._hasLensTypeChanged(e.getLensMetadata().getType(),t.type)&&(this._purgeStepJsonIfNeeded(e,t),n.push(new F(s,t))),null!=i&&this._addAssetOnlyXmdMutators(n,s,t.type,i),this._takeAction(n)}editStaticFlexStep(e,t,r=[]){const i=[];r?.length>0&&i.push(new I.Z(!0,r.map((e=>e.getJson())))),i.push(new F(e,t)),this._takeAction(i)}exploreAsLens(e,t){const r=t.getLens(),i=this._getWidget(t.getId()).getLastWidget().getJson();e.goToExplorer(r,i,!0,this._metadataHolder.getAssetExtendedMetadata(),this._metadataHolder.getMetadata().getDateVersion()),this._onExploreAsLens()}async exploreInTableau(e,t){try{const e=await f.uploadTableauDataSource(t);window.open(e.routingUrl)}catch(t){e({title:s.Z.getLabel("ExploreInTableau","errorTitle"),message:s.Z.getLabel("ExploreInTableau","errorMessage")})}}shouldShowWarning(e){const t=this._metadataHolder.getDependencyAnalyzer(),r=e.getId();return t.getDependentLensIds(r).length>0||t.getDependentWidgetIds(r).length>1}shouldShowSAQLUpgradeWarning(e){return[y.Z.AGGREGATE_WITH_NEW_BINDINGS.getCode(),y.Z.AGGREGATE.getCode()].includes(e.getLensMetadata().getType())&&null!=e.getLensMetadata().getJson().query.pigql}delete(e=[]){this._takeAction(this.getDeleteMutators(e),!0)}getDeleteMutators(e=[]){const t={},r=[new O.Z(!1,e)];for(const i of e){const e=y.Z.fromCode(i.getType()),s=e.getDefinition().hasLegacyDatasetsArray?i.getDatasets():e===y.Z.SAQL?this._metadataHolder.getMetadata().getDatasetReferences():[];for(const e of s)null==t[e.getName()]&&(t[e.getName()]=e.getJson());const n=new o.Z(this._metadataHolder.getAssetExtendedMetadata());for(const e of n.getAllFieldsForStep(i.getId()))r.push(new w.Z(new c(u.get(e),e.getName())))}return r.push(new I.Z(!1,(0,i.values)(t))),r}add(e,t,r=[],i,s,n){let o=[new O.Z(!0,[new a(e,t,this._metadataHolder.getMetadata())],this._metadataHolder)];r?.length>0&&o.unshift(new I.Z(!0,r.map((e=>e.getJson()))));const l=s??t.type;null!=i&&this._addAssetOnlyXmdMutators(o,e,l,i),n&&(o=o.concat(n)),this._takeAction(o)}addFromExplorer(e,t,r,s){const n=e.steps;for(const o in n)if(Object.prototype.hasOwnProperty.call(n,o)){const a=n[o],l=(new v.Z).scrubStepParameters(a,(0,i.values)(e.widgets)[0]);(0,i.isEmpty)(r)||"directreport"===l.type||(l.label=r);const u=this._metadataHolder.generateStepId(l);this.add(u,l,t,s,o)}}attachToWidgets(e,t,r){const i=[];for(const s of t)i.push(...(new v.Z).getMutatorsToAttachStepToWidget(e,this._metadataHolder.getMetadata().getWidget(s),r));this._takeAction(i)}_shouldLoadAssetOnlyXmd(e){return[B.Z.EDIT,B.Z.CLONE,B.Z.EXPLORE].includes(e)}_addAssetOnlyXmdMutators(e,t,r,i,s=!1){e.push(new w.Z(new h.Z(r,t,i,s)))}_getReplaceWidgetMutators(e,t,r,i,s,n){const o=new l.Z(s,n,this._metadataHolder.getMetadata()),a=[new P.Z(!1,e),new P.Z(!0,o)];for(const t of e.getLayouts())a.push(this._getDeleteGridLayoutWidgetMutator(t),this._getAddGridLayoutWidgetMutator(t,s));return a}_getLensAssetBuilder(e,t,r,i){const n=t.getId(),o=this._getLastResult(n);if(!(o instanceof R.Z))return;let a;switch(e){case B.Z.EXPLORE:a=new C.Z({lensId:t.getDashboardId()+":"+n,lensName:s.Z.getLabel("DashboardLinkWidgetDestination","explore")+": "+n,folderId:t.getDashboardFolderId(),stepId:n,stepJson:t.getJson(),widgetJson:r.getJson(),queryJson:this._getQuery(n,!0),finalQuery:o?.getQueryInfo().finalQuery,datasetMetadatas:o?.getQueryInfo().datasetMetadatas,lastResultMetadata:o?.getMetadata(),assetExtendedMetadata:this._cleanseAssetOnlyXmd(o,this._metadataHolder.getAssetExtendedMetadata(),n),dateVersion:this._metadataHolder.getMetadata().getDateVersion()});break;case B.Z.EDIT:a=new k({stepMetadata:t,query:o?.getQueryInfo().originalQuery,datasetMetadatas:o?.getQueryInfo().datasetMetadatas,lastResultMetadata:o?.getMetadata(),selectedWidget:r,assetExtendedMetadata:this._cleanseAssetOnlyXmd(o,this._metadataHolder.getAssetExtendedMetadata(),n),dateVersion:this._metadataHolder.getMetadata().getDateVersion()});break;case B.Z.CLONE:a=new N({stepMetadata:t,query:o?.getQueryInfo().originalQuery,datasetMetadatas:o?.getQueryInfo().datasetMetadatas,lastResultMetadata:o?.getMetadata(),assetExtendedMetadata:this._cleanseAssetOnlyXmd(o,this._metadataHolder.getAssetExtendedMetadata(),n),dateVersion:this._metadataHolder.getMetadata().getDateVersion()});break;case B.Z.TOOLTIP:a=new U({stepMetadata:t,queryWithoutFilters:o.getQueryInfo().queryWithoutFilters,datasetMetadatas:o.getQueryInfo().datasetMetadatas,lastResultMetadata:o.getMetadata(),dateVersion:this._metadataHolder.getMetadata().getDateVersion(),widgetType:i??t.getWidgetType()});break;default:throw new Error("Unknown lens action type")}return a}_hasLensTypeChanged(e,t){return e!==t||t===y.Z.AGGREGATE_WITH_NEW_BINDINGS.getCode()&&e===y.Z.AGGREGATE.getCode()}shouldGenerateNewWidgetId(e,t){if(null==e||null==t)return!1;const r=e.getType(),i=t.type;return["chart","table"].includes(r)&&r!==i&&![r,i].includes("queryeditor")}_takeAction(e,t=!1){this._executeMutators(e),this._onLensActionComplete({clearSelectedWidget:t})}_purgeStepJsonIfNeeded(e,t){const r=e.getLensMetadata(),i=y.Z.fromCode(r.getType()),s=i.getDefinition(),n=y.Z.fromCode(t.type);if(i===y.Z.GRAIN)n===y.Z.SAQL&&"directreport"!==t.type&&(t.isGlobal=void 0,t.datasets=void 0),n!==y.Z.GRAIN&&("directreport"!==t.type&&(t.isFacet=void 0),"directreport"!==t.type&&Object.assign(t,{broadcastFacet:s.isBroadcastingFaceting(r),receiveFacetSource:{mode:s.getReceiveFacetMode(r).getCode(),steps:[]}}));else{i===y.Z.AGGREGATE_WITH_NEW_BINDINGS&&n===y.Z.SAQL&&"directreport"!==t.type&&(t.isGlobal=void 0,t.datasets=void 0);const e=s.isBroadcastingFaceting(r)&&s.getReceiveFacetMode(r)===T.Z.ALL;n===y.Z.GRAIN&&"directreport"!==t.type&&(t.broadcastFacet=void 0,t.receiveFacetSource=void 0,Object.assign(t,{isFacet:e}))}}_getDeleteGridLayoutWidgetMutator(e){return new x.Z(!1,e.getGridLayoutPage().getLayoutName(),e.getGridLayoutPage().getIndex(),e.getWidgetId(),e.getPosition())}_getAddGridLayoutWidgetMutator(e,t){return new x.Z(!0,e.getGridLayoutPage().getLayoutName(),e.getGridLayoutPage().getIndex(),t,e.getPosition())}_cleanseAssetOnlyXmd(e,t,r){if(!(e&&e instanceof R.Z))return t;const i=(0,n.deepCopy)(t.getJson());return this._cleanseAssetOnlyXmdJson(e,i,r),new p.Z(i,t.getDateVersion())}_cleanseAssetOnlyXmdJson(e,t,r){if(!e)return t;let i=e.getMetadata().getColumnNames().concat("ALL").map(o.Z.getFullyFormedFieldName.bind(void 0,r));i=new Set(i);for(const e of u.enums()){const s=e.getSection(t),n=e.getIdentifier();if(!s)continue;let a=s.length-1;for(;a>=0;)o.Z.getStepIdForField(s[a][n])!==r||i.has(s[a][n])||s.splice(a,1),a--}return t}}},96487:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{constructor(e){super(),this._name=e}getName(){return this._name}}s.add("EDIT",new s("EDIT")).add("CLONE",new s("CLONE")).add("EXPLORE",new s("EXPLORE")).add("DELETE",new s("DELETE")).add("ADD",new s("ADD")).add("ATTACH_TO_WIDGET",new s("ATTACH_TO_WIDGET")).add("CREATE",new s("CREATE")).add("TOOLTIP",new s("TOOLTIP")).finish()},84351:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t,r,i,s){this._id=e,this._assetJson=t,this._action=r,this._attachedWidgetId=i,this._metadataProvider=s}getId(){return this._id}getAsset(){return this._assetJson}getAction(){return this._action}getAttachedWidgetId(){return this._attachedWidgetId}getMetadataProvider(){return this._metadataProvider}}},43121:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(16045),s=r(45131),n=r(69008),o=r(61506);function a({name:e,deprecatedContext:t,appInstanceId:r}){o.Z.get(i.Z).trigger(new n.Z(s.Z.DASHBOARD,`dashboardIde${e}`,1,{categories:["DASHBOARD_IDE"],deprecatedContext:t,appInstanceId:r}))}},81428:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getMeasureColumn:()=>n});var i=r(1611);const s="none";function n(e,t,r,n){const o=t.getParameter("measureField");if(n&&o===s)return;const a=e.getColumn(o);let l=null!=a&&a.getType()===i.Z.MEASURE?a:void 0;return r&&null==l&&(l=null!=a?a:e.getColumns(i.Z.MEASURE)[0]),l}},17369:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var i=r(96486),s=r(59495),n=r(8429),o=r(22393),a=r(63594),l=r(1806),u=r(86866),d=r(21891),c=r(94170),h=r(42737);class p{constructor({executeMutators:e}){this._executeMutators=e}didMoveWidgets(e,t,r){r(e,t)}didResizeWidget(e,t,r){r(e,t)}didAddWidget(e,t,r){r(e,t),this._dropTargetWidget=null,this._draggingWidget=null,this._draggingWidgetType=null}didMouseEnterWidget(e,t){this._dropTargetWidget=t}didMouseLeaveWidget(e,t){this._dropTargetWidget=void 0}setDraggingWidget(e){this._draggingWidget=e}getDraggingWidget(){return this._draggingWidget}setDraggingWidgetType(e){this._draggingWidgetType=e}getDraggingWidgetType(){return this._draggingWidgetType}setDraggingLensMetadata(e){this._draggingLensMetadata=e}getDraggingLensMetadata(){return this._draggingLensMetadata}setDraggingRuntimeLens(e){this._draggingRuntimeLens=e}getDraggingRuntimeLens(){return this._draggingRuntimeLens}setDropTargetWidget(e){this._dropTargetWidget=e}getDropTargetWidget(){return this._dropTargetWidget}setDraggingStartItems({widget:e,widgetType:t,lensMetadata:r,runtimeLens:i},s,n){if(this._draggingWidget=e,this._draggingWidgetType=t,this._draggingLensMetadata=r,this._draggingRuntimeLens=i,null!=s){s.dataTransfer.effectAllowed="move","undefined"!=typeof InstallTrigger&&s.dataTransfer.setData("text/html",null);let e=n;null==e&&(e=s.currentTarget),null!=s.dataTransfer.setDragImage&&s.dataTransfer.setDragImage(e,e.offsetWidth,e.offsetHeight)}}setLensAsGlobal(e,t,r,i=!0,s=!1,n=!1){t.getType()===d.Z.GLOBAL_FILTER.getCode()&&r.push(new h.Z(e.getId(),{isGlobal:i,useGlobal:s,isFacet:n}))}}var g=r(3863),m=r(82409),_=r(82206);class f extends _.Z{isNewWidget(){return!0}getWidgetStyle(){return{}}canDropOnWidget(e){if(!this.shouldProxyFitToTarget(e))return!1;const t=this.getWidget().getRuntimeLens();return d.Z.fromCode(e.getWidget().getType()).getDefinition().getLensConstraint().isValidForLens(t.getLensMetadata(),t.getLastResult()?.getMetadata(),t.getLastResult()?.getFormatter())}shouldProxyFitToTarget(e){return!this.isPlaceholder()&&e.isPlaceholder()&&d.Z.fromCode(e.getWidget().getType()).getDefinition().hasStep()}isPlaceholder(){return!this.getWidget().hasLens()}}var y=r(54324);class b extends y.Z{mutate(e){const t=this._getGridLayoutPage(e.dashboardJson).getWidgetLayout(this._widgetId);Object.assign(t.getJson(),this._getDimensionJson())}}var C=r(45771),E=r(3185),S=r(76358),T=r(56279),I=r(53466);class v extends s.Z{constructor({getCurrentLayoutName:e,getCurrentPageIndex:t,executeMutators:r,onDeleteWidget:i,onDuplicateWidget:s,onCopyWidget:n,onDidAttachLensToWidget:o,generateWidgetId:a,beginEditingStepAndWidget:l,showConvertModalForGlobalFilters:u,bindingsTraverserProvider:d,setModal:c,metadataHolder:h}){super(),this._getCurrentLayoutName=e,this._getCurrentPageIndex=t,this._executeMutators=r,this._onDeleteWidget=i,this._onDuplicateWidget=s,this._onCopyWidget=n,this._onDidAttachLensToWidget=o,this._generateWidgetId=a,this._beginEditingStepAndWidget=l,this._showConvertModalForGlobalFilters=u,this._bindingsTraverserProvider=d,this._setModal=c,this._gridLayoutDelegate=new p({executeMutators:r}),this._metadataHolder=h}didMoveWidgets(e,t){this._gridLayoutDelegate.didMoveWidgets(e,t,this._handleWidgetChanges.bind(this))}didResizeWidget(e,t){this._gridLayoutDelegate.didResizeWidget(e,t,this._handleWidgetChanges.bind(this))}didDragEnter(e,t,r,i){const s=this._getDashboardMetadata().getLayout(this._getCurrentLayoutName()).getRowHeight(),n=this._gridLayoutDelegate.getDraggingWidgetType();if(!n)return;const o=n.getDefinition().getDefaultWidth(i.getNumColumns()),a=n.getDefinition().getDefaultHeight(s),l={column:Math.round(e/i.getColumnWidth(0)-o/2),row:Math.round(t/(i.getRowHeight()+r)-a/2),columnSpan:o,rowSpan:a},u=null!=this._gridLayoutDelegate.getDraggingWidget()?this._gridLayoutDelegate.getDraggingWidget():new m.Z(n).setId(this._generateWidgetId(n)).setDashboardMetadata(this._getDashboardMetadata()).setLensMetadata(this._gridLayoutDelegate.getDraggingLensMetadata()).setRuntimeLens(this._gridLayoutDelegate.getDraggingRuntimeLens()).build();return new f(new g(u,this._getCurrentLayoutName(),this._getCurrentPageIndex(),l))}didAddWidget(e,t){this._gridLayoutDelegate.didAddWidget(e,t,this._handleWidgetChanges.bind(this))}didPressDeleteWidget(e){return this._onDeleteWidget(e)}didPressDuplicateWidget(e){return this._onDuplicateWidget(e)}didPressCopyWidget(e){return this._onCopyWidget(e)}didMouseEnterWidget(e,t){this._gridLayoutDelegate.didMouseEnterWidget(e,t)}didMouseLeaveWidget(e,t){this._gridLayoutDelegate.didMouseLeaveWidget(e,t)}didDoubleClickWidget(e){const t=e.getWidget();if(!t.hasLens())return;const{isEnabled:r,message:i}=S.Z.canPerform(t,this._bindingsTraverserProvider);r?this._beginEditingStepAndWidget(t,t.getLens()):this._setModal({title:n.Z.getLabel("InsightsConfirmDialog","warningTitle"),message:i,additionalClassName:"edit-step-warning-modal"})}setDraggingLens(e,t,r,i){let s=d.Z.CHART;if(null!=e.getWidgetType())s=d.Z.fromCode(e.getWidgetType());else switch(u.Z.fromCode(e.getType())){case u.Z.LEGACY_STATIC:case u.Z.STATIC:s=e.getJson().values.length>3?d.Z.LIST:d.Z.TOGGLE;break;case u.Z.DIRECT_REPORT:s=d.Z.TABLE;break;default:switch(a.getEnumByCode(e.getVisualizationType())){case a.VALUES_TABLE:case a.COMPARISON_TABLE:case a.PIVOT_TABLE:s=d.Z.TABLE;break;default:s=d.Z.CHART}}this._gridLayoutDelegate.setDraggingStartItems({widgetType:s,lensMetadata:e,runtimeLens:t},r,i)}setDraggingWidgetType(e,t,r){this._gridLayoutDelegate.setDraggingStartItems({widgetType:e},t,r)}setDraggingWidget(e,t,r){const i=d.Z.fromCode(e.getType());this._gridLayoutDelegate.setDraggingStartItems({widget:e,widgetType:i},t,r)}getAdditionalWidgetContainerClassName(e){if(e.getWidget().isOnMultiplePages(e.getWidgetLayout().getGridLayout()))return"is-on-multiple-pages"}setWidgetLayoutPosition(e,t){this._executeMutators([this._buildUpdateWidgetLayoutMutator(e,t)])}_getDashboardMetadata(){return this._metadataHolder.getMetadata()}_handleWidgetChanges(e,t){if(!e.hasChanges())return;if(null!=this._gridLayoutDelegate.getDropTargetWidget())for(const t of Array.from(e.getTriggeringWidgets())){if(!e.getResultingBoundingBox(t).hitTest(e.getResultingBoundingBox(this._gridLayoutDelegate.getDropTargetWidget()))){this._gridLayoutDelegate.setDropTargetWidget(null);break}}const[r,i]=e.getWidgets().reduce(((t,r)=>{const i=r.getWidgetLayout(),s=e.getNewPosition(r);return t[r.isNewWidget()?0:1].push({widgetLayout:i,position:s}),t}),[[],[]]),s=[];r.forEach((e=>{const t=this._gridLayoutDelegate.getDropTargetWidget();if(null==t||t.isContainer()){const t=this._appendAddWidgetMutators(s,e);i.push(...t)}this._handleDraggingLens(s,e.widgetLayout.getWidget())})),i.forEach((e=>{this._appendUpdateWidgetMutators(s,e)})),this._executeMutators(s)}_appendAddWidgetMutators(e,{widgetLayout:t,position:r}){const i=this._getDashboardMetadata(),s=this._getCurrentLayoutName(),n=this._getCurrentPageIndex(),o=t.getWidget(),a=d.Z.fromCode(o.getType());if(!i.hasWidget(o.getId())){if(a===d.Z.FILTER_PANEL&&this._isLegacyFiltersUsedInDashboard())return this._showConvertModalForGlobalFilters(r),[];e.push(new E.Z(!0,o)),a===d.Z.INPUT&&this._appendCreateInputWidgetStepMutators(e,o.getId())}e.push(new C.Z(!0,s,n,o.getId(),r,a.getDefinition().getDefaultWidgetStyle()));return this._getDashboardMetadata().isLayoutAutoSyncEnabled()?this._appendLayoutSyncingAddWidgetMutators(e,o,r):[]}_appendLayoutSyncingAddWidgetMutators(e,t,r){const i=this._getDashboardMetadata(),s=i.getLayout(this._getCurrentLayoutName()),n=d.Z.fromCode(t.getType()).getDefinition();return this._getOtherPagesForSyncing(t.getId(),s).reduce(((o,a)=>{const l=this._calculatePositionOnOtherLayout(s,i.getLayout(a.getLayoutName()),r,n);return e.push(new C.Z(!0,a.getLayoutName(),a.getIndex(),t.getId(),l,n.getDefaultWidgetStyle())),o.concat(this._calculateReflowChanges(a,t.getId(),l))}),[])}_getOtherPagesForSyncing(e,t){const r=this._getDashboardMetadata(),s=t.getPage(this._getCurrentPageIndex()).getName();return i.flatMap(r.getLayouts(),(e=>e.getPages())).filter((t=>t.getLayoutName()!==this._getCurrentLayoutName()&&t.getName()===s&&!t.hasWidgetLayout(e)))}_calculatePositionOnOtherLayout(e,t,r,s){const n={...r};if(e.getRowHeight()!==t.getRowHeight()){const o=e.getRowHeight().getRowSpec().getValue()/t.getRowHeight().getRowSpec().getValue();n.row=i.round(o*r.row);const a=i.round(o*r.height);n.height=i.max([s.getMinHeight(t.getRowHeight()),a])}if(e.getNumColumns()!==t.getNumColumns()){const o=t.getNumColumns()/e.getNumColumns(),a=i.round(o*r.width);n.width=i.clamp(a,s.getMinWidth(),t.getNumColumns());const l=i.round(o*r.column);n.column=i.clamp(l,0,i.max([t.getNumColumns()-n.width,0]))}return n}_calculateReflowChanges(e,t,r){const i=e.getAllContainedWidgetLayouts().map((e=>e.getWidgetId())),s=e.getWidgetLayouts().filter((e=>!i.includes(e.getWidgetId()))).map((e=>new o.PlaceholderItem(e.getPosition(),e.getWidgetId())));if(s.length>0){const i=new o.PlaceholderItem(r,t),{changedLayout:n}=new o(!1).moveAndGetProxyLocation(s,i,r,!1,!0);return n.map((t=>({widgetLayout:e.getWidgetLayout(t.getUID()),position:t.getPosition()})))}return[]}_appendUpdateWidgetMutators(e,{widgetLayout:t,position:r}){e.push(this._buildUpdateWidgetLayoutMutator(t,r));const i=t.getContainedWidgetLayouts();if(i.length>0){const s=t.getPosition(),n=r.row-s.row,o=r.column-s.column;for(const t of i)e.push(this._buildUpdateWidgetLayoutMutator(t,{row:t.getRow()+n,column:t.getColumn()+o}))}}_buildUpdateWidgetLayoutMutator(e,t){const r=e.getGridLayoutPage();return new b(r.getLayoutName(),r.getIndex(),e.getWidgetId(),t)}_appendCreateInputWidgetStepMutators(e,t){const r={...u.Z.INPUT.getDefaultParameters()},i=this._metadataHolder.generateStepId(r);e.push(new T.Z(!0,[new l(i,r,this._getDashboardMetadata())],this._metadataHolder),new I.Z(t,i))}_handleDraggingLens(e,t){if(null!=this._gridLayoutDelegate.getDraggingLensMetadata()){const r=this._gridLayoutDelegate.getDropTargetWidget();let i;r&&r.isPlaceholder()&&(i=r.getWidget()),e.push(...(new c.Z).getMutatorsToAttachStepToWidget(this._gridLayoutDelegate.getDraggingRuntimeLens(),i||t)),this._onDidAttachLensToWidget(this._gridLayoutDelegate.getDraggingLensMetadata().getId()),this._gridLayoutDelegate.setLensAsGlobal(this._gridLayoutDelegate.getDraggingLensMetadata(),i||t,e)}}_isLegacyFiltersUsedInDashboard(){for(const e of Array.from(this._getDashboardMetadata().getWidgets()))if(e.getType()===d.Z.GLOBAL_FILTER.getCode())return!0;return!1}}},5945:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var i=r(67294),s=r(96486),n=r(8429),o=r(57234),a=r(74104),l=r(21891),u=r(86866),d=r(82206),c=r(12698),h=r(93323),p=r(15422),g=r(32574);class m{constructor(e,t,r,i,s,n=!1){this._onClick=e,this._label=t,this._iconName=r,this._className=i,this._id=s,this._showExperiencePopover=n}getId(){return this._id}getDropDownMenuItem(){return new p({linkType:"jsHandler",link:this._onClick,title:this._label,icon:this._iconName,className:g.buildClassName("action",this._className),id:this._id,showExperiencePopover:this._showExperiencePopover})}getLabel(){return this._label}isShowExperiencePopover(){return this._showExperiencePopover}}var _=r(62627),f=r(35944);class y extends d.Z{constructor({widgetLayout:e,runtimeSubscriber:t,gridCellSpacing:r,deepLinker:i,viewConfig:s,widgetRCProvider:n,dashboardPluginManager:o,showWidgetActions:a,isTooltipMode:u,imageManagerDelegate:d,layoutSwitcher:c,renderOnWidgetError:h,viewportRendering:p,handlers:g,cellContentProvider:m,isAccessible:_,dashboardTheme:f,delegate:y}){super(e),this._runtimeSubscriber=t,this._gridCellSpacing=r,this._deepLinker=i,this._viewConfig=s,this._widgetRCProvider=n,this._dashboardPluginManager=o,this._showWidgetActions=a,this._isTooltipMode=u,this._imageManagerDelegate=d,this._layoutSwitcher=c,this._renderOnWidgetError=h,this._viewportRendering=p,this._handlers=g,this._widgetType=l.Z.fromCode(this.getWidget().getType()),this._cellContentProvider=m,this._isAccessible=_,this._dashboardTheme=f,this._delegate=y,this._themedStyle=this._widgetType.getDefinition().getThemedStyle(f),this._onLoaded=this.isPlaceholder()?this._runtimeSubscriber.onWidgetReady.bind(this._runtimeSubscriber):null,this._startStepCreation=this._handlers.startStepCreation?.bind(null,this.getUID(),!0)}isPlaceholder(){return this._widgetType.getDefinition().isPlaceholder(this.getWidget())}render(e,t){return this._dimensionStyle=t,this.isPlaceholder()?(0,f.tZ)(_.Z,{widgetType:this._widgetType,onClick:this._handlers.startStepCreation.bind(null,this.getUID(),!0),isViewMode:e,widgetRowSpan:this._widgetLayout.getRowSpan(),widgetColumnSpan:this._widgetLayout.getColumnSpan(),onLoaded:this._onLoaded}):(0,i.createElement)(h.Z,Object.assign({width:t?.width,height:t?.height,widget:this.getWidget(),widgetLayout:this._widgetLayout,widgetType:this._widgetType,chromeMode:this._viewConfig.getChromeMode(),viewMode:this.getViewMode(this._widgetLayout.getGridLayout().getRowHeight(),this._widgetLayout.getGridLayout().getNumColumns()),isTooltipMode:this._isTooltipMode,isViewMode:e,runtimeSubscriber:this._runtimeSubscriber,renderOnWidgetError:this._renderOnWidgetError,viewportRendering:this._viewportRendering,delegate:this._delegate,startStepCreation:this._startStepCreation,deepLinker:this._deepLinker,containedWidgets:this._containedWidgets,gridCellSpacing:this._gridCellSpacing,showFilterCreationWizard:this._handlers.showFilterCreationWizard,imageManagerDelegate:this._imageManagerDelegate,layoutSwitcher:this._layoutSwitcher,executeMutators:this._handlers.executeMutators,getCurrentRightPanelMode:this._handlers.getCurrentRightPanelMode,updateRightPanel:this._handlers.updateRightPanel,toggleRightPanel:this._handlers.toggleRightPanel,dashboardMetadata:this._handlers.getMetadata(),metadataProvider:this._handlers.getMetadataProvider(),getCurrentLayout:this._handlers.getCurrentLayout,showModal:this._handlers.showModal,closeModal:this._handlers.closeModal,dashboardDescribe:this._handlers.dashboardDescribe,widgetProvider:this._widgetRCProvider,pluginManager:this._dashboardPluginManager,componentWidgetDelegate:this._handlers.componentWidgetDelegate,sdk:this._handlers.sdk,isAccessible:this._isAccessible,dashboardTheme:this._dashboardTheme,contextualHelp:this._viewConfig.contextualHelp,cellContentProvider:this._cellContentProvider,themedStyle:this._themedStyle}))}renderActions(e){if(!e||this.isPlaceholder()||!this._viewConfig.getChromeMode().isDisplayNewPageLinks)return;let t=this._delegate?.getWidgetActions(this.getWidget(),this._dashboardPluginManager)??this._dashboardPluginManager.getWidgetActions(this.getWidget());const r=this.getWidget().getParameter("showActionMenu");if(this._showWidgetActions&&r&&this._viewConfig.getPageContext()!==o.Z.LWR&&this.getWidget().getParameter("exploreLink")&&this.getWidget().hasLens()&&u.Z.fromCode(this.getWidget().getLens().getType()).getDefinition().canExplore()){const e=new m(this._handlers.openStepAsLens.bind(this,this.getWidget()),n.Z.getLabel("DashboardWidgetAction","openAsLens"),"work_forecast","explore");let r,i=[];const o=this.getWidget().getLens(),l=this._handlers.dashboardDescribe?.getLensLastResult(o.getId());l instanceof c.Z&&(i=l.getQueryInfo().datasetMetadatas,r=this._handlers.getMetadataProvider().getDMOFromDataset(i[0]?.getId())),!(0,a.w)()||(0,s.isEmpty)(i)||(0,s.isUndefined)(r)?o.getType()===u.Z.DIRECT_REPORT.getCode()?t.unshift(new m(this._handlers.openStepAsReport.bind(this,this.getWidget().getLens()),n.Z.getLabel("DashboardWidgetAction","openAsLens"),"work_forecast","explore")):t.unshift(e):t.unshift(e,new m((()=>this._handlers.openStepInTableau(r)),n.Z.getLabel("DashboardWidgetAction","openInTableau"),"tableau","explore-in-tableau"))}return(0,s.isEmpty)(t)?void 0:(t=t.map((e=>e.getDropDownMenuItem())),this._handlers.widgetActionDelegate.renderActions(t))}getWidgetPixelStyle(){return this._dimensionStyle}getType(){return this._widgetType}recycle({widgetLayout:e,runtimeSubscriber:t,gridCellSpacing:r,renderOnWidgetError:i,viewportRendering:n,delegate:o,dashboardTheme:a}){return this._runtimeSubscriber===t&&n===this._viewportRendering&&(0,s.isEqual)(this._gridCellSpacing,r)&&this.getWidget().isEqual(this.getWidgetLayout().getWidget())&&(0,s.isEqual)(this.getWidgetLayout().getJson(),e.getJson())&&this._areContainedWidgetsEqual(this.getWidgetLayout(),e)&&a===this._dashboardTheme?(this._widgetLayout=e,this._containedWidgets=null,this._setPosition(this._widgetLayout),this._delegate=o,this):new y({widgetLayout:e,runtimeSubscriber:t,gridCellSpacing:r,deepLinker:this._deepLinker,viewConfig:this._viewConfig,isTooltipMode:this._isTooltipMode,widgetRCProvider:this._widgetRCProvider,dashboardPluginManager:this._dashboardPluginManager,showWidgetActions:this._showWidgetActions,imageManagerDelegate:this._imageManagerDelegate,layoutSwitcher:this._layoutSwitcher,renderOnWidgetError:i,viewportRendering:n,handlers:this._handlers,delegate:o,cellContentProvider:this._cellContentProvider,dashboardTheme:a,isAccessible:this._isAccessible})}getWidgetStyle(){return this._widgetLayout.getWidgetStyle()}getMinWidth(){return this._widgetType.getDefinition().getMinWidth()}getMinHeight(){return this._widgetType.getDefinition().getMinHeight(this._widgetLayout.getGridLayout().getRowHeight())}getViewMode(e,t){return this._widgetType.getDefinition().getViewMode(e,t,this.getWidth(),this.getHeight())}getLastWidget(){return this._runtimeSubscriber.getWidget(this.getWidget())}getLensConnector(){return this._runtimeSubscriber.getLensConnector()}getDimensionOverride(){return this._widgetRCProvider.getDimensionOverride(this.getWidget(),this._handlers.getCurrentLayout())}getCellContentProvider(){return this._cellContentProvider}_areContainedWidgetsEqual(e,t){const r=e.getContainedWidgetLayouts(),i=t.getContainedWidgetLayouts();return r.length===i.length&&r.every(((e,t)=>(0,s.isEqual)(e.getJson(),i[t].getJson())))}}},88919:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(13652);class s extends i.Z{static getDefaultValue(){return s.VIEW}}s.add("EDIT","edit",new s).add("VIEW","",new s("view")).add("JSON","json",new s).add("PRESENTATION","present",new s).add("PICK_INITIAL_VALUES","values",new s).add("PRINT","print",new s).finish()},82409:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(87418);class s extends i.Z{constructor(e,t,r,i,s){super(e,t,s),this._lensMetadata=r,this._runtimeLens=i}getLensId(){return this._lensMetadata?.getId()}getLens(){return this._lensMetadata}getRuntimeLens(){return this._runtimeLens}isEqual(e){return!!e&&this.isEqual(e)}}class n{constructor(e){this._type=e,this._parameters={}}setId(e){return this._id=e,this}setLensMetadata(e){return this._lensMetadata=e,this}setRuntimeLens(e){return this._runtimeLens=e,this}setParameters(e){return this._parameters=e,this}getJson(){return{type:this._type.getCode(),parameters:Object.assign({},this._type.getDefinition().getDefaultParameters(this._runtimeLens),this._parameters)}}setDashboardMetadata(e){return this._dashboardMetadata=e,this}build(){return new s(this._id,this.getJson(),this._lensMetadata,this._runtimeLens,this._dashboardMetadata)}}},8158:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(90554),s=r(44709),n=r(51548),o=r(82957);class a extends o.Z{constructor(e,t,r,i){super(),this._layoutName=e,this._newPageLabel=t,this._currentPageIndex=r,this._newPageIndex=i}mutate(e){const{pages:t}=new n.Z(e.dashboardJson).getLayout(this._layoutName).getJson();t[this._newPageIndex]=(0,i.deepCopy)(t[this._currentPageIndex]),t[this._newPageIndex].label=this._newPageLabel,t[this._newPageIndex].name=(0,s.D)()}}},34050:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(51548),s=r(82957),n=r(18869);class o extends s.Z{constructor(e,t,r,i){super(),this._isCreate=e,this._layoutName=t,this._pageIndex=r,this._pageLabel=i}mutate(e){const t=new i.Z(e.dashboardJson).getLayout(this._layoutName).getPagesJson();if(this._isCreate)null==this._pageIndex&&(this._pageIndex=t.length),t.splice(this._pageIndex,0,n.setGridLayoutPageDefaults({label:this._pageLabel},this._pageIndex));else{if(null!=this._pageIndex&&(this._pageIndex<0||this._pageIndex>=t.length))throw new Error(`Page index ${this._pageIndex} does not exist.`);t.splice(this._pageIndex,1)}}}},54324:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51548),s=r(82957);class n extends s.Z{constructor(e,t,r,{row:i,column:s,height:n,width:o}){super(),this._layoutName=e,this._pageIndex=t,this._widgetId=r,this._row=i,this._column=s,this._height=n,this._width=o}_getLayoutName(){return this._layoutName}_getPageIndex(){return this._pageIndex}_getWidgetId(){return this._widgetId}_getDimensionJson(){const e={};return null!=this._row&&(e.row=this._row),null!=this._column&&(e.column=this._column),null!=this._height&&(e.rowspan=this._height),null!=this._width&&(e.colspan=this._width),e}_toPosition(e){return{column:e.getColumn(),row:e.getRow(),width:e.getColumnSpan(),height:e.getRowSpan()}}_getGridLayoutPage(e){return new i.Z(e).getLayout(this._layoutName).getPage(this._pageIndex)}}},56279:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(96486),s=r(51548),n=r(1806),o=r(82957),a=r(86866);class l extends o.Z{constructor(e,t,r,i){super(),this._isCreate=e,this._steps=t,this._metadataHolder=r,this._updateReceiveFacetMap=i}mutate(e){const t=[];this._isCreate||(this._updateReceiveFacetMap=new Map,this._dependentStepMap=this._buildDependentStepMap(e.dashboardJson.state.steps));const r=new s.Z(e.dashboardJson);for(let s=0;s<this._steps.length;s++){let o=this._steps[s],a=o.getId();if(this._isCreate)null==a&&(a=this._metadataHolder.generateStepId(o.getJson()),o=new n(a,o.getJson()),this._steps.splice(s,1,o)),t.push(o);else{if(!r.hasLens(a))throw new Error(`Step ${a} does not exist.`);delete e.dashboardJson.state.steps[a];const t=this._cleanReceiveFacetSteps(e.dashboardJson.state.steps,a,this._dependentStepMap);i.isEmpty(t)||this._updateReceiveFacetMap.set(a,t)}}if(!i.isEmpty(t)){const s=r.getLenses();e.dashboardJson.state.steps={};for(const r of t.reverse())e.dashboardJson.state.steps[r.getId()]=r.getJson();for(const t of s)e.dashboardJson.state.steps[t.getId()]=t.getJson();this._isCreate&&null!=this._updateReceiveFacetMap&&this._updateReceiveFacetMap.forEach(((r,s)=>{if(!i.isEmpty(r)&&t.some((e=>s===e.getId())))return(()=>{const t=[];for(const i of r){const r=e.dashboardJson.state.steps[i];if(r?.receiveFacetSource?.steps){const e=r?.receiveFacetSource?.steps;e.includes(s)?t.push(void 0):t.push(e.push(s))}else t.push(void 0)}return t})()}))}}_buildDependentStepMap(e){const t=new Map;if(i.isEmpty(e))return t;for(const r of Object.keys(e)){const i=e[r];if(this._isTargetedReceiveFacetingSupported(i.type)&&null!=i.receiveFacetSource?.steps)for(const e of i.receiveFacetSource.steps){let i=t.get(e);null==i&&(i=new Set,t.set(e,i)),i.add(r)}}return t}_cleanReceiveFacetSteps(e,t,r){const s=[],n=r.get(t);return null==n||n.forEach((r=>{let n;const o=e[r],a=o?.receiveFacetSource?.steps;if(null!=a&&(n=i.remove(a,(e=>e===t))),!i.isEmpty(n))return s.push(r)})),s}_isTargetedReceiveFacetingSupported(e){return a.Z.fromCode(e).getDefinition().isTargetedReceiveFacetingSupported}getDescription(){return"DashboardCreateDeleteLensesMutator"}}},45771:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(54324);class s extends i.Z{constructor(e,t,r,i,s,n={},o){super(t,r,i,s),this._isCreate=e,this._widgetStyle=n,this._index=o}mutate(e){const t=this._getGridLayoutPage(e.dashboardJson);let r;if(this._isCreate){if(t.hasWidgetLayout(this._getWidgetId()))throw new Error(`Layout for widget ${this._getWidgetId()} already exists.`);const e={...this._getDimensionJson(),name:this._getWidgetId(),widgetStyle:this._widgetStyle},r=t.getWidgetsJson();null!=this._index?r.splice(this._index,0,e):r.push(e)}else{r=t.getWidgetLayout(this._getWidgetId()).getIndex(),t.getWidgetsJson().splice(r,1)}}}},3185:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51548),s=r(82957);class n extends s.Z{constructor(e,t){super(),this._isCreate=e,this._widget=t}mutate(e){const t=new i.Z(e.dashboardJson),r=this._widget.getId();if(this._isCreate){if(t.hasWidget(r))throw new Error(`Widget ${r} already exists.`);t.getWidgetsJson()[r]=this._widget.getJson()}else{if(!t.hasWidget(r))throw new Error(`Widget ${r} does not exist.`);delete t.getWidgetsJson()[r]}}}},53466:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(38588);class s extends i.Z{constructor(e,t,r=!0){super(e,r),this._widgetId=e,this._lensId=t}mutateLayout(e,t,r,i=!1){const s=this._getWidgetJsonForLayout(e.dashboardJson,t,r,i);if(null==s)throw new Error(`Invalid widgetId ${this._widgetId}.`);null==this._lensId&&s.parameters?delete s.parameters.step:s.parameters?s.parameters.step=this._lensId:s.parameters={step:this._lensId}}}},42737:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(96486),s=r(90554),n=r(51548),o=r(1806),a=r(82957),l=r(95072),u=r(89176);class d extends a.Z{constructor(e,t){super(),this._stepId=e,this._values=t}mutate(e){const t=new n.Z(e.dashboardJson).getLens(this._stepId),r=t.getJson(),a=o.SelectMode.getEnumByCode(r.selectMode),d=t.getStart();if((0,i.has)(this._values,"selectMode")&&!(0,i.isEmpty)(d)&&!new l.Z(u.Z).containsBindings(d)){const e=o.SelectMode.getEnumByCode(this._values.selectMode);e===o.SelectMode.RANGE||a===o.SelectMode.RANGE?this._values.start=void 0:e.isSingle()&&a.isMultiple()&&(0,i.size)(d)>1&&(this._values.start=d.slice(0,1))}(0,s.deepExtend)(r,this._values)}getDescription(){return"DashboardStepPropertiesMutator"}}},34154:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(8429),s=r(51548),n=r(82957);class o extends n.Z{constructor(e,t,r,i,s={}){super(),this._layoutName=e,this._pageIndex=t,this._widgetId=r,this._useDefaults=i,this._overrideValues=s}mutate(e){const t=new s.Z(e.dashboardJson).getLayout(this._layoutName).getPages(),r=t[this._pageIndex].getWidgetLayout(this._widgetId);this._updateWidgetStyles(r,this._overrideValues,this._useDefaults);for(const e of t)e.getIndex()!==this._pageIndex&&e.hasWidgetLayout(this._widgetId)&&this._updateWidgetStyles(e.getWidgetLayout(this._widgetId),this._overrideValues,this._useDefaults)}getDescription(){return this._useDefaults?i.Z.getLabel("DashboardMutators","widgetDefaultStylesEnabled"):i.Z.getLabel("DashboardMutators","widgetDefaultStylesDisabled")}_updateWidgetStyles(e,t,r){e.getJson().widgetStyle=r?{}:t}}},53069:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51548),s=r(82957);class n extends s.Z{constructor(e,t,r){super(),this._layoutName=e,this._oldPageIndex=t,this._newPageIndex=r}mutate(e){const t=new i.Z(e.dashboardJson).getLayout(this._layoutName),{pages:r}=t.getJson(),s=r[this._newPageIndex];r[this._newPageIndex]=r[this._oldPageIndex],r[this._oldPageIndex]=s}}},87085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51548),s=r(82957);class n extends s.Z{constructor(e,t,r){super(),this._layoutName=e,this._pageIndex=t,this._newPageName=r}mutate(e){const t=new i.Z(e.dashboardJson).getLayout(this._layoutName),{pages:r}=t.getJson();r[this._pageIndex].label=this._newPageName}}},70527:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51548),s=r(82957);class n extends s.Z{constructor(e,t,r){super(),this._layoutName=e,this._pageIndex=t,this._navigationHidden=r}mutate(e){new i.Z(e.dashboardJson).getLayout(this._layoutName).getPage(this._pageIndex).getJson().navigationHidden=this._navigationHidden}}},13894:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(90554);class s{static transitionParameters(e,t){if((0,i.isMap)(e)&&(0,i.isMap)(t)){const r={};for(const t of Object.keys(e))r[t]=void 0;for(const n of Object.keys(t)){const o=t[n],a=e[n];null!=a?r[n]=s.transitionParameters(a,o):null!=o&&(r[n]=(0,i.isMap)(o)?(0,i.deleteNullValues)((0,i.deepCopy)(o)):o)}return r}return e}static removeNullsInSections(e){for(const t of Object.keys(e)){const r=e[t];(0,i.isMap)(r)&&(0,i.deleteNullValues)(r)}}}},35241:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(52570),s=r(51548),n=r(82957);class o extends n.Z{constructor(e,t,r,i){super(),this._isCreate=e,this._filterBuilder=t,this._filterId=r,this._filterIndex=i}mutate(e){const t=new s.Z(e.dashboardJson),r=t.getFiltersJson();if(this._isCreate){const e=this._buildDashboardFilter(this._filterBuilder.build(),t),i=null!=this._filterIndex?this._filterIndex:r.length;r.splice(i,0,e.getJson())}else{let e;this._filterId||(this._filterId=new i(this._filterBuilder.build(),t).getId()),e=this._getFilterIndexById(this._filterId,r,t),r.splice(e,1)}}_buildDashboardFilter(e,t){return new i(e,t)}_getFilterIndexById(e,t,r){return t.findIndex((t=>new i(t,r).getId()===e))}}},93165:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(21568);const s={STEP_LIST:new i.Z("stepList",!1),DASHBOARD_PROPERTIES:new i.Z("dashboardProperties",!1),LAYOUT_PROPERTIES:new i.Z("layoutProperties",!1),STEP_PROPERTIES:new i.Z("stepProperties",!1),WIDGET_PROPERTIES:new i.Z("widgetProperties",!1),TOOLTIP_WIDGET_PROPERTIES:new i.Z("tooltipWidgetPanel",!1),FILTER_MANAGER:new i.Z("filterManager",!1),STEP_SELECTION:new i.Z("stepSelection",!1),INTERACTION_PROPERTIES:new i.Z("interactionProperties",!1),PARAMETER_PROPERTIES:new i.Z("parameterProperties",!1),SERVICE_INTELLIGENCE:new i.Z("serviceIntelligence",!0)}},19991:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var i=r(96486),s=r(46747),n=r(28388),o=r(40604),a=r(8429),l=r(32574),u=r(59816),d=r(21891),c=r(3185),h=r(45771),p=r(42790),g=r(35241),m=r(51548),_=r(82957);class f extends _.Z{constructor(e){super(),this._filters=e}mutate(e){new m.Z(e.dashboardJson).getStateJson().filters=this._filters||[]}}class y extends _.Z{constructor(e,t){super(),this._widgetId=e,this._filters=t}mutate(e){const t=new m.Z(e.dashboardJson),r=t.getWidget(this._widgetId).getJson(),i=this._filters;r.parameters.filters=r.parameters.filters.filter((e=>{const r=new p.Z(e,t);return!i.some((e=>e.getId()===r.getId()))}))}}class b{#F;constructor(e){this.#F=e}static getDashboardFilterFromReference(e,t){const r=t.getFilters(),i=[];return e.forEach((e=>{r.forEach((r=>{r.getId()===new p.Z(e,t).getId()&&i.push(r)}))})),i}static getDeleteAllMutators(e){let t=[];return t.push(new f([])),t=t.concat(b._getUpdateWidgetPropertiesMutatorsForFilters(e,e.getFilters())),t}static getDeleteMutators(e,t){let r=[];return t.forEach((e=>{r.push(new g.Z(!1,void 0,e.getId()))})),r=r.concat(b._getUpdateWidgetPropertiesMutatorsForFilters(e,t)),r}static _getUpdateWidgetPropertiesMutatorsForFilters(e,t){const r=[];return e.getWidgets().filter((e=>e.getType()===d.Z.FILTER_PANEL.getCode())).forEach((e=>{r.push(new y(e.getId(),t))})),r}getMutatorsForDeletingWidgets(e){let t=[];const r=this.#F.getMetadata(),i=r.getFilters();if(0===i.length)return t;if(e.some((e=>e.getParameter("showAllFilters"))))t=t.concat(b.getDeleteAllMutators(r));else{const s=[];e.forEach((e=>{e.getParameter("filters").forEach((e=>{const t=new p.Z(e,r);s.some((e=>e.getId()===t.getId()))||s.push(t)}));const n=this._mapFilterReferenceToFilterInMetadata(s,i);t=t.concat(b.getDeleteMutators(r,n))}))}return t}_mapFilterReferenceToFilterInMetadata(e,t){return e.map((e=>t.find((t=>t.getId()===e.getId()))))}}var C=r(35944);class E{#k;#B;#W;#G;#U;#H;#V;#F;#j;constructor({numOfLayouts:e,getRuntimeLens:t,executeMutators:r,onDeleteComplete:i,showModal:s,closeModal:n,numOfFilters:o,metadataHolder:a,lensActions:l}){this.#k=e,this.#B=t,this.#W=r,this.#G=i,this.#U=s,this.#H=n,this.#V=o,this.#F=a,this.#j=l}deleteWidgets(e){0!==e.length&&(this.#F.getMetadata().isLayoutAutoSyncEnabled()?this.#q(e):this.#z(e))}#z(e){const t=e.map((e=>{const t=e.getWidget(),r=[e.getWidgetLayout()],i=!t.isOnMultiplePages();return{widgetMetadata:t,widgetLayoutsToDelete:r,shouldDeleteMetadata:i}}));this.#$(t)}#q(e){const t=e.map((e=>{const t=e.getWidget(),r=e.getWidgetLayout().getGridLayoutPage().getName(),i=[];let s=!0;return t.getLayouts().forEach((e=>{e.getGridLayoutPage().getName()===r?i.push(e):s=!1})),{widgetMetadata:t,widgetLayoutsToDelete:i,shouldDeleteMetadata:s}}));this.#$(t)}#$(e){if(this.#k>1&&this.#Q(e)){const t=e.length>1?"multipleDeleteWidgetsConfirmationMessage":"singleDeleteWidgetConfirmationMessage";this.#U(this.#Y(this.#K(e,a.Z.getLabel("DashboardWidgetDelete","deleteFromDashboard")),this.#H,a.Z.getLabel("DashboardWidgetDelete",t)))}else this.#J(e)?this.#U(this.#Y(this.#X(e),this.#H,a.Z.getLabel("DashboardWidgetDelete","deleteFilterWidget"),!1,"delete-global-filter-widget",a.Z.getLabel("DashboardWidgetDelete","deleteFilterModalTitle"))):this.#ee(this.#te(e))}#Q(e){if(e.length>1)return e.some((e=>e.shouldDeleteMetadata));{const t=e[0];return t.widgetMetadata.getType()!==d.Z.FILTER_PANEL.getCode()&&t.shouldDeleteMetadata}}#J(e){return 0!==this.#V&&e.map((e=>e.widgetMetadata)).some((e=>e.getType()===d.Z.FILTER_PANEL.getCode()&&this.#re(e.getParameters())))}#re(e){return e.showAllFilters||e.filters.length>0}#X(e){return[n.makeButton(this.#ie.bind(this,e),a.Z.getLabel("DashboardWidgetDelete","deleteGlobalFilters"),1,o.Secondary,"filtersAndWidget"),n.makeButton(this.#ee.bind(this,this.#te(e)),a.Z.getLabel("DashboardWidgetDelete","removeFromLayoutFiltersPanel"))]}#K(e,t){return[n.makeButton(this.#ee.bind(this,this.#te(e)),t)]}#Y(e,t,r,i=!0,n,o=a.Z.getLabel("DashboardWidgetDelete","deleteWidgetModalTitle")){return(0,C.tZ)(s,{fullPage:!0,hasCancel:i,onBlur:t,buttons:e,title:o,className:l.buildClassName("delete-widget-modal",n),children:(0,C.tZ)("div",{className:"warning-text",children:r})})}#ie(e){const t=e.map((e=>e.widgetMetadata)).filter((e=>e.getType()===d.Z.FILTER_PANEL.getCode())),r=new b(this.#F).getMutatorsForDeletingWidgets(t);this.#ee(r.concat(this.#te(e)))}#ee(e=[]){this.#W(e),this.#G()}#te(e){const t=[],r={},s={};for(const i of e){const e=i.widgetMetadata;i.widgetLayoutsToDelete.forEach((r=>{t.push(new h.Z(!1,r.getGridLayout().getName(),r.getGridLayoutPage().getIndex(),e.getId(),r.getPosition()))})),i.shouldDeleteMetadata&&this.#se(e,t,r,s)}for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)){const t=this.#B(e);if(!t.hasValidLastResult())continue;if(t.callCapabilityMethod(u.LENS_STATE,"resetLensState"),!t.getLensMetadata().getAttachedWidgets().every((e=>(0,i.has)(r,e.getId()))))continue;t.callCapabilityMethod(u.SELECTION,"dontFireInitialSelection"),t.callCapabilityMethod(u.SELECTION,"removeAllSelections")}return t}#se(e,t,r,i){t.push(new c.Z(!1,e));const s=this.#F.getMetadata(),n=d.Z.fromCode(e.getType()).getDefinition(),o=new Set;if(n.getDynamicReferencesToRemove(e.getParameters()).forEach((r=>{const{widget:i,deleteStep:n}=r,a=s.hasWidget(i)?s.getWidget(i):void 0;if(!a||!n||a.isOnAnyPage())return;const l=a.getLens();if(!l)return;const u=this.#F.getDependencyAnalyzer().getDependentWidgetIds(l.getId());if(2===u.length)o.add(l),t.push(new c.Z(!1,a));else{u.some((t=>{if(t===e.getId())return!1;const r=s.getWidget(t);return d.Z.fromCode(r.getType()).getDefinition().getUsedWidgetIds(r.getParameters()).some((e=>e===i))}))||t.push(new c.Z(!1,a))}})),o.size>0&&t.push(...this.#j.getDeleteMutators([...o])),r[e.getId()]=!0,e.hasLens()){const t=e.getLensId();i[t]||(i[t]=!0)}}}},57220:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(21891),s=r(71529);class n extends s.Z{getWidgetToHighlightId(){return this._widgetToHighlightId}_canPerform(e){return!0}_hasWidgetPresent(e,t){return!1}_addWidgetManeuverMutators(e,t,r,i,s){}_getWidgetPositionRow(e){throw new Error("Not implemented.")}_getNewWidgetMetadata(e){throw new Error("Not implemented.")}_takeAction(e,t,r){const s=[],n=this._getContainerIds(e);for(const o of e){if(!this._canPerform(o)){this._isInvalidOperation=!0;continue}const e=o.getContainer();if(null!=e&&n.has(e.getUID())||this._hasWidgetPresent(o,r))continue;const a={row:this._getWidgetPositionRow(o),column:this._getWidgetPositionColumn(o),width:this._getWidgetWidth(o),height:this._getWidgetHeight(o)},l=this._getNewWidgetMetadata(o);null==this._widgetToHighlightId&&(this._widgetToHighlightId=l.getId()),this._seenWidgetIds.add(l.getId()),this._addWidgetManeuverMutators(s,l,a,o,r),o.getType()===i.Z.CONTAINER&&(this._topMostWidgetRow=Math.min(this._getMinimumRowOfSelectedWidgets(o.getContainedWidgets()),this._topMostWidgetRow),this._addMutatorsForWidgetsInsideContainer(s,o,t,r,this._takeAction.bind(this)))}return s}_getWidgetHeight(e){return e.getHeight()}_getWidgetWidth(e){return e.getWidth()}_getWidgetPositionColumn(e){return e.getColumn()}}},52042:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var i=r(96486),s=r(16045),n=r(45131),o=r(69008),a=r(8429),l=r(61506),u=r(40651),d=r(1806),c=r(78406),h=r(89769),p=r(21891),g=r(83458),m=r(57220),_=r(82409),f=r(3185),y=r(45771),b=r(53466),C=r(51548),E=r(82957);class S extends E.Z{constructor(e,t){super(),this._widgetId=e,this._lensId=t}mutate(e){const t=new C.Z(e.dashboardJson).getWidget(this._widgetId).getParameter("cellProperties")??{};Object.keys(t).forEach((e=>{const r=t[e];let i,s;switch(p.Z.fromCode(r.type)){case p.Z.TEXT:i=r.parameters.content?.values??{},Object.keys(i).forEach((e=>{const t=i[e];this._replaceStepId(t)}));break;case p.Z.CHART:s=r.parameters.referenceLines??[],s.forEach((e=>{[e.value??{},e.label??{}].forEach((e=>{Object.keys(e).forEach((t=>{const r=e[t];this._replaceStepId(r)}))}))}))}}))}_replaceStepId(e){Object.prototype.hasOwnProperty.call(e,"step")&&null!=this._lensId&&(e.step=this._lensId)}}var T=r(34154),I=r(56279);class v extends m.Z{static canPerform(e){for(const t of e)if(p.Z.fromCode(t.getType())===p.Z.COMPONENT){const e=t.getParameter("source");if(null!=e&&u.Z.fromCode(e.type)===u.Z.COMPONENT)return{isEnabled:!1,message:a.Z.getLabel("DashboardWidgetAction","duplicateDisabledForComponent")}}return{isEnabled:!0,message:a.Z.getLabel("DashboardWidgetAction","duplicateWidgetTooltip")}}perform(){const e=this._getCurrentLayout()?.getPage(this._getCurrentPageIndex()).getLabel();this._startingRow=this._getLastRowUsedInPage(this._newPageIndex);const t=this._selectedGridLayoutWidgets.length>1?a.Z.getLabel("DashboardWidgetAction","duplicatedMultipleWidgets",e??""):a.Z.getLabel("DashboardWidgetAction","duplicatedSingleWidget",e??"");return l.Z.get(s.Z).trigger(new o.Z(n.Z.DASHBOARD,"dashboardDuplicateWidgetAction",this._selectedGridLayoutWidgets.length,{categories:["WIDGET_ACTIONS"],appInstanceId:this._appInstanceId})),this._performOperation(t)}_performOperation(e){const t=this._takeAction(this._selectedGridLayoutWidgets,this._newPageIndex,this._newPageIndex);return this._layoutSwitcher.switchAndUseMutators(this._getLayoutName(),this._newPageIndex,t,void 0),this._onPerformOperationComplete(this._isInvalidOperation,e)}_onPerformOperationComplete(e=this._isInvalidOperation,t){return super._onPerformOperationComplete(e,e?a.Z.getLabel("DashboardWidgetAction","duplicateErrorMessage"):t)}_canPerform(e){return v.canPerform([e.getWidget()]).isEnabled}_hasWidgetPresent(){return!1}_getNewWidgetMetadata(e){const t=e.getWidget(),r=p.Z.fromCode(t.getType()),i=t.getLens();let s;if(i){const e=i.getJson();this._sourceLensId=i.getId();const t=this._getMetadataHolder().generateStepId(e,Array.from(this._excludeLensIds));this._excludeLensIds.add(t),s=new d(t,e,this._getMetadata())}return new _.Z(r).setId(this._getMetadataHolder().generateWidgetId(r,Array.from(this._seenWidgetIds))).setDashboardMetadata(this._getMetadata()).setLensMetadata(s).setParameters(t.getParameters()).build()}_addWidgetLayoutMutators(e,t,r,s,n){e.push(new f.Z(!0,t),new y.Z(!0,this._getLayoutName(),n,t.getId(),r),new b.Z(t.getId(),t.getLensId()),new h.Z(t.getId(),t.getParameters()),new T.Z(this._getLayoutName(),n,t.getId(),(0,i.isEmpty)(s.getWidgetLayout().getWidgetStyleJson()),s.getWidgetStyle().getCollatedStyle())),p.Z.fromCode(t.getType())===p.Z.REPEATER&&e.push(new S(t.getId(),t.getLensId()))}_addWidgetManeuverMutators(e,t,r,i,s){t.hasLens()&&e.push(new I.Z(!0,[t.getLens()],this._getMetadataHolder()),new g.Z(new c.Z(this._sourceLensId,t.getLens().getId()))),this._addWidgetLayoutMutators(e,t,r,i,s)}_getWidgetPositionRow(e){return this._startingRow-this._topMostWidgetRow+e.getRow()}}},76358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(8429),s=r(40651),n=r(86866),o=r(21891);class a{static canPerform(e,t){if(o.Z.fromCode(e.getType())===o.Z.COMPONENT){const t=e.getParameter("source");if(null==t)return{isEnabled:!1,message:i.Z.getLabel("DashboardWidgetAction","editDisabledNoComponent")};if(s.Z.fromCode(t.type)===s.Z.COMPONENT)return{isEnabled:!0,message:i.Z.getLabel("DashboardWidgetAction","editComponent")}}if(e.hasLens()){const t=e.getLens(),r=t?n.Z.fromCode(t.getType()).getDefinition():void 0;return r&&!r.canEdit(t)?{isEnabled:!1,message:r.getEditDisabledMessage()}:{isEnabled:!0,message:i.Z.getLabel("DashboardWidgetAction","editStepAndWidget")}}return{isEnabled:!1,message:i.Z.getLabel("DashboardWidgetAction","editDisabledNoStep")}}}},71529:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486);class s{constructor(e,t){this._hasError=e,this._message=t}hasError(){return this._hasError}getMessage(){return this._message}}class n{constructor(e,t,r,i,s,n){this._layoutSwitcher=e,this._pageActions=t,this._dashboardDescribe=r,this._selectedGridLayoutWidgets=i,this._newPageIndices=s,this._startingRow=0,this._topMostWidgetRow=this._getMinimumRowOfSelectedWidgets(this._selectedGridLayoutWidgets),this._seenWidgetIds=new Set,this._excludeLensIds=new Set,this._isInvalidOperation=!1,this._newPageIndex=this._newPageIndices[0],this._appInstanceId=n}perform(e){throw new Error("Not implemented.")}getWidgetToHighlightId(){}_onPerformOperationComplete(e=this._isInvalidOperation,t){return new s(e,t)}_getContainerIds(e){return e.reduce(((e,t)=>(t.isContainer()&&e.add(t.getUID()),e)),new Set)}_canPlaceAllWidgetsInPage(e){const t=this._getMetadata().getLayout(this._getLayoutName());return!t.hasPage(e)||this._selectedGridLayoutWidgets.every((r=>t.getPage(e).canPlaceWidgetInPage(r)))}_addMutatorsForWidgetsInsideContainer(e,t,r,i,s){const n=t.getContainedWidgets();if(0===n.length)return;const o=s(n,r,i);0!==o.length&&e.push(...o)}_getMinimumRowOfSelectedWidgets(e){return 0===e.length?this._topMostWidgetRow:(0,i.minBy)(e,(e=>e.getRow())).getRow()}_getLastRowUsedInPage(e){const t=this._getMetadata().getLayout(this._getLayoutName());return t.hasPage(e)?t.getPage(e).getLastRowUsed():0}_isWidgetPresentInPage(e,t){const r=this._getMetadata().getLayout(this._getLayoutName());return!!r.hasPage(t)&&r.getPage(t).hasWidgetLayout(e)}_getWidgetPositionRow(e){throw new Error("Not implemented.")}_getMetadataHolder(){return this._dashboardDescribe.getMetadataHolder()}_getMetadata(){return this._getMetadataHolder().getMetadata()}_getCurrentLayout(){return this._dashboardDescribe.getCurrentLayout()}_getLayoutName(){return this._dashboardDescribe.getCurrentLayoutName()}_getCurrentPageIndex(){return this._dashboardDescribe.getCurrentPageIndex()}}},98481:(e,t,r)=>{"use strict";r.d(t,{Z:()=>$});var i=r(79646),s=r(96486),n=r(8429),o=r(21891),a=r(57220),l=r(82409),u=r(45771),d=r(34154);class c extends a.Z{perform(){const e=[],t=[];for(const r of this._newPageIndices)this._allWidgetsCanBeInPage=this._canPlaceAllWidgetsInPage(r),this._startingRow=this._allWidgetsCanBeInPage?0:this._getLastRowUsedInPage(r),this._topMostWidgetRow=this._getMinimumRowOfSelectedWidgets(this._selectedGridLayoutWidgets),e.push(...this._takeAction(this._selectedGridLayoutWidgets,this._getCurrentPageIndex(),r)),t.push(this._getCurrentLayout()?.getPage(r).getLabel());const r=1===this._newPageIndices.length?this._newPageIndices[0]:this._getCurrentPageIndex();return this._widgetToHighlightId=this._selectedGridLayoutWidgets[0].getUID(),this._layoutSwitcher.switchAndUseMutators(this._getLayoutName(),r,e,void 0),this._onPerformOperationComplete(this._isInvalidOperation,n.Z.getLabel("DashboardWidgetAction","cloneToPages",t.join(", ")))}_onPerformOperationComplete(e=this._isInvalidOperation,t){return super._onPerformOperationComplete(e,e?n.Z.getLabel("DashboardWidgetAction","cloneErrorMessage"):t)}_hasWidgetPresent(e,t){return this._isWidgetPresentInPage(e.getWidget().getId(),t)}_getNewWidgetMetadata(e){const t=e.getWidget(),r=o.Z.fromCode(t.getType());return new l.Z(r).setId(t.getId()).setDashboardMetadata(this._getMetadata()).setLensMetadata(t.getLens()).setParameters(t.getParameters()).build()}_addWidgetManeuverMutators(e,t,r,i,n){e.push(new u.Z(!0,this._getLayoutName(),n,t.getId(),r),new d.Z(this._getLayoutName(),n,t.getId(),(0,s.isEmpty)(i.getWidgetLayout().getWidgetStyleJson()),i.getWidgetStyle().getCollatedStyle()))}_getWidgetPositionRow(e){return this._allWidgetsCanBeInPage?e.getRow():this._startingRow-this._topMostWidgetRow+e.getRow()}}var h=r(16045),p=r(45131),g=r(69008),m=r(61506),_=r(77955),f=r(86866),y=r(1209),b=r(24617);class C{constructor(e){this._json=e}getGridLayoutWidgets(){return this._json.gridLayoutWidgets}getSteps(){return this._json.steps}getDatasetReferences(){return this._json.datasetReferences}getAssetExtendedMetadataJson(){return this._json.assetExtendedMetadataJson}getLoggingId(){return this._json.loggingId}}const E=new class{addToClipboard(e){this._dashboardClipboard=e}getFromClipboard(){return this._dashboardClipboard}};var S=r(71529);class T extends S.Z{perform(){this._widgets=[],this._steps=new Map;const e=new Map;this._bindingsTraverser=this._dashboardDescribe.getBindingsTraverserProvider().getTraverser(!0);for(const t of this._selectedGridLayoutWidgets)if(this._canCopy(t)){this._widgets.push(t);const r=(0,s.isEmpty)(t.getContainedWidgets())?[t]:t.getContainedWidgets();for(const t of r){const r=this._resolveParameters(t.getWidget());if(r.hasLens()){this._executeLensBindings(r.getLens());const t=this._resolveParameters(r.getLens());this._steps.get(t.getId())||(this._steps.set(t.getId(),t),e.set(t.getId(),this._getDatasetReferences(t.getId())))}}}const t=(0,s.uniqueId)("COPY_ACTION_");E.addToClipboard(new C({gridLayoutWidgets:this._widgets,steps:this._steps,datasetReferences:e,assetExtendedMetadataJson:this._getAssetExtendedMetadataJson(),loggingId:t}));const r=this._widgets.length>1?n.Z.getLabel("DashboardWidgetAction","copiedMultipleWidgets"):n.Z.getLabel("DashboardWidgetAction","copiedSingleWidget");return m.Z.get(h.Z).trigger(new g.Z(p.Z.DASHBOARD,"dashboardCopyWidgetAction",this._widgets.length,{categories:["WIDGET_ACTIONS",t],appInstanceId:this._appInstanceId})),this._onPerformOperationComplete(this._isInvalidOperation,r)}_canCopy(e){return!0}_getWidgetPositionRow(e){return this._startingRow-this._topMostWidgetRow+e.getRow()}_getAssetExtendedMetadataJson(){return this._dashboardDescribe.getMetadataHolder().getAssetExtendedMetadata().getJson()}_getDataSources(e){const t=this._dashboardDescribe.getLensLastResult(e);if(!t||t instanceof _.Z)throw new Error("Can't evaluate lens without a valid last result.");return t.getQueryInfo().dataSources}_getDatasetReferences(e){const t=[];return this._getDataSources(e).forEach((e=>{e.getType()===y.Z.DATASET&&t.push(this._dashboardDescribe.getMetadataHolder().getMetadata().getDatasetReferenceByName(e.getName()))})),t}_resolveParameters(e){if(0===b.Z.getParametersTokens(e.getJson()).length)return e;const t=(0,s.cloneDeep)(e.getJson());return b.Z.resolveParameters(t,this._dashboardDescribe.getMessageProvider().getMessagesByTopic(b.Z.getParametersTopics(this._dashboardDescribe.getMetadataHolder().getMetadata(),t))),(0,s.defaultsDeep)(t,e.getJson()),e.shard(t)}_executeLensBindings(e,t=[]){if(!this._bindingsTraverser.containsBindings(e))return e;const r=f.Z.fromCode(e.getType()).getDefinition(),i=(0,s.cloneDeep)(r.getQueryBindableJson(e)),n=Array.prototype.concat.apply([],this._bindingsTraverser.getRuntimeTopics(i,this._dashboardDescribe.getRuntime().getNamespace()));return this._resolveBindings(i,this._dashboardDescribe.getMessageProvider().getMessagesByTopic(n),t),(0,s.defaultsDeep)(i,e.getJson()),e.shard(i)}_resolveBindings(e,t,r){this._bindingsTraverser.executeBindings(e,t,r,{namespace:this._dashboardDescribe.getRuntime().getNamespace()})}}class I extends l.Z{getJson(){return{type:this._type.getCode(),parameters:this._parameters}}}var v=r(51548),R=r(54324);class w extends R.Z{constructor(e,t,r){super(void 0,void 0,t,r),this._repeaterWidgetId=e,this._cellWidgetId=t}_toPosition(e){return{column:e.column,row:e.row,width:e.colspan,height:e.rowspan}}}class A extends w{constructor(e,t,r,i,s){super(t,r,i),this._isCreate=e,this._widgetStyle=s}mutate(e){const t=new v.Z(e.dashboardJson).getWidget(this._repeaterWidgetId).getParameter("cellProperties");if(!t[this._cellWidgetId])throw new Error(`Cell widget ${this._cellWidgetId} does not exist`);this._isCreate?t[this._cellWidgetId].position={...this._getDimensionJson(),widgetStyle:this._widgetStyle}:delete t[this._cellWidgetId].position}}var D=r(82957);class L extends D.Z{constructor(e,t,r){super(),this._isCreate=e,this._repeaterWidgetId=t,this._widget=r}mutate(e){const t=new v.Z(e.dashboardJson).getWidget(this._repeaterWidgetId).getParameter("cellProperties");this._isCreate?t[this._widget.getId()]=this._widget.getJson():delete t[this._widget.getId()]}}class M extends a.Z{perform({layout:e,executeMutators:t,repeaterWidgetId:r}){return this._layout=e,this._executeMutators=t,this._repeaterWidgetId=r,this._startingRow=e.getPage(0).getLastRowUsed(),this._performOperation(n.Z.getLabel("CellWidgetActions","duplicateSuccessMessage"))}_performOperation(e){const t=this._takeAction(this._selectedGridLayoutWidgets,0,0);return this._executeMutators(t),this._onPerformOperationComplete(this._isInvalidOperation,e)}_onPerformOperationComplete(e=this._isInvalidOperation,t){return super._onPerformOperationComplete(e,e?n.Z.getLabel("CellWidgetActions","duplicateErrorMessage"):t)}_getNewWidgetMetadata(e){const t=e.getCellContentProvider();if(!t)throw new Error("Cannot duplicate the cell widget without the correct content provider");const r=t.getCellWidgetType(),i=t.getCellWidgetParameters();return new I(r).setId(this._getMetadataHolder().generateWidgetId(r,Array.from(this._seenWidgetIds))).setDashboardMetadata(this._getMetadata()).setParameters(i).build()}_addWidgetManeuverMutators(e,t,r,i,s){e.push(new L(!0,this._repeaterWidgetId,t),new A(!0,this._repeaterWidgetId,t.getId(),r,i.getCellContentProvider()?.getCellWidgetStyle()??{}))}_getWidgetPositionRow(e){return this._startingRow-this._topMostWidgetRow+e.getRow()}}var N=r(52042);class O extends S.Z{constructor(e,t,r,i,s,n){super(e,t,r,i,s,n),this._isPartialOperation=!1}perform(){this._allWidgetsCanBeInPage=this._canPlaceAllWidgetsInPage(this._newPageIndex),this._startingRow=this._allWidgetsCanBeInPage?0:this._getLastRowUsedInPage(this._newPageIndex),this._topMostWidgetRow=this._getMinimumRowOfSelectedWidgets(this._selectedGridLayoutWidgets);const e=this._moveAction(this._selectedGridLayoutWidgets,this._getCurrentPageIndex(),this._newPageIndex);this._newPageIndex===this._getCurrentLayout()?.getPages().length?this._pageActions.addPageAndUseMutators(void 0,e):this._layoutSwitcher.switchAndUseMutators(this._getLayoutName(),this._newPageIndex,e,void 0),this._widgetToHighlightId=this._selectedGridLayoutWidgets[0].getUID();const t=this._isPartialOperation?"moveToPagePartial":"moveToPage";return this._onPerformOperationComplete(this._isInvalidOperation,n.Z.getLabel("DashboardWidgetAction",t,this._getCurrentLayout()?.getPage(this._newPageIndex).getLabel()??""))}getWidgetToHighlightId(){return this._widgetToHighlightId}_moveAction(e,t,r){const i=[],n=this._getContainerIds(e);for(const a of e){const e=a.getContainer();if(null!=e&&n.has(e.getUID()))continue;const l=a.getPosition(),c=Object.assign(l,{row:this._getWidgetPositionRow(a)});this._isWidgetPresentInPage(a.getWidget().getId(),r)?this._isPartialOperation=!0:i.push(new u.Z(!0,this._getLayoutName(),r,a.getUID(),c),new d.Z(this._getLayoutName(),r,a.getUID(),(0,s.isEmpty)(a.getWidgetLayout().getWidgetStyleJson()),a.getWidgetStyle().getCollatedStyle())),i.push(new u.Z(!1,this._getLayoutName(),t,a.getUID(),l));o.Z.fromCode(a.getWidget().getType())===o.Z.CONTAINER&&(this._topMostWidgetRow=Math.min(this._getMinimumRowOfSelectedWidgets(a.getContainedWidgets()),this._topMostWidgetRow),this._addMutatorsForWidgetsInsideContainer(i,a,t,r,this._moveAction.bind(this)))}return i}_getWidgetPositionRow(e){return this._allWidgetsCanBeInPage?e.getRow():this._startingRow-this._topMostWidgetRow+e.getRow()}}var P=r(90554),x=r(83993),Z=r(40651),F=r(1806),k=r(78406),B=r(62373),W=r(41556),G=r(96900),U=r(83458),H=r(35241),V=r(56279);const j="referenceLines";class q extends N.Z{perform({steps:e,datasetReferences:t,assetExtendedMetadataJson:r,loggingId:i}){return this._steps=e,this._datasetReferences=t,this._assetExtendedMetadataJson=r,this._pastedWidgetIds=[],this._startingRow=this._getLastRowUsedInPage(this._newPageIndex),m.Z.get(h.Z).trigger(new g.Z(p.Z.DASHBOARD,"dashboardPasteWidgetAction",this._selectedGridLayoutWidgets.length,{categories:["WIDGET_ACTIONS",i],appInstanceId:this._appInstanceId})),this._performOperation(n.Z.getLabel("DashboardWidgetAction","pastedSuccessSingleWidget"))}getPastedWidgetIds(){return this._pastedWidgetIds}_addWidgetManeuverMutators(e,t,r,i,s){if(t.hasLens())e.push(this._addNewDatasetReference(this._datasetReferences.get(i.getWidget().getLens().getId())||[]),new V.Z(!0,[t.getLens()],this._getMetadataHolder()),new U.Z(new k.Z(this._sourceLensId,t.getLens().getId(),this._assetExtendedMetadataJson)));else if(o.Z.fromCode(t.getType())===o.Z.FILTER_PANEL){const t=i.getWidget(),r=t.getDashboardMetadata().getFilters(),s=t.getParameter("showAllFilters");if(s)r.forEach((t=>{const r=t.getDataset(),i=this._addNewFilterReference(t,r);i&&e.push(this._addNewDatasetReference([r]),i)}));else if(!1===s&&1===t.getParameter("filters").length){const i=r.filter((e=>e.getFullyQualifiedAssetName()===(0,x.Oz)(t.getParameter("filters")[0].dataset.name,t.getParameter("filters")[0].dataset.namespace)&&e.getFields()[0]===t.getParameter("filters")[0].field))[0],s=i.getDataset(),n=this._addNewFilterReference(i,s);n&&e.push(this._addNewDatasetReference([s]),n)}}this._pastedWidgetIds.push(i.getWidget().getId()),this._addWidgetLayoutMutators(e,t,r,i,s)}_getNewWidgetMetadata(e){const t=this._updateResolvedWidgetParameters(e.getLastWidget()),r=o.Z.fromCode(t.getType());let i;if(t.hasLens()){const e=this._steps.get(t.getLens().getId());if(e){this._sourceLensId=e.getId();let t=e.getJson();f.Z.fromCode(e.getType()).getDefinition().isTargetedReceiveFacetingSupported&&(t={...e.getJson(),...this._defaultFacetSource()});const r=this._getMetadataHolder().generateStepId(t,Array.from(this._excludeLensIds));this._excludeLensIds.add(r),i=new F(r,t,this._getMetadata())}}let s=t.getParameters();return t.getType()===o.Z.NUMBER.getCode()?s.tooltip?.customizeTooltip&&(s=(0,P.deepCopy)(s),s.tooltip.customizeTooltip=!1,delete s.tooltip.content):t.getType()===o.Z.CHART.getCode()&&s.tooltip?.content?.widget&&(s=(0,P.deepCopy)(s),delete s.tooltip.content.widget),new l.Z(r).setId(this._getMetadataHolder().generateWidgetId(r,Array.from(this._seenWidgetIds))).setDashboardMetadata(this._getMetadata()).setLensMetadata(i).setParameters(s).build()}_addNewDatasetReference(e){const t=this._getMetadata().getDatasetIds(),r=[];return e.forEach((e=>{t.includes(e.getId())||r.push(e.getJson())})),new B.Z(!0,r)}_addNewFilterReference(e,t){if(!this._getMetadata().getFilters().some((t=>t.getFullyQualifiedAssetName()===e.getFullyQualifiedAssetName()&&(0,s.isEqual)(t.getFields(),e.getFields())))){const r=this._createFilterBuilder(e,t);return new H.Z(!0,r)}}_canPerform(e){return this._getMetadata().getType()===Z.Z.COMPONENT?this._canPerformOnComponent(e.getWidget()):e.getWidget().getType()!==o.Z.COMPONENT.getCode()||!this._doesComponentExist(e.getWidget())}_doesComponentExist(e){return this._getMetadata().getComponentNames().has(e.getSourceName())}_canPerformOnComponent(e){return o.Z.fromCode(e.getType())!==o.Z.COMPONENT}_createFilterBuilder(e,t){return(new W.Filter).setFields(e.getFields()).setOperator(e.getOperator()).setLocked(e.isLocked()).setDependent(e.isDependent()).setDataset((new W.Dataset).setName(t.getName()).setNamespace(t.getNamespace()))}_defaultFacetSource(){return{receiveFacetSource:{mode:G.Z.ALL.getCode(),steps:[]}}}_updateResolvedWidgetParameters(e){for(const t of Object.keys(e.getParameters())){if("tooltip"===t){const t=e.getParameter("tooltip");if(t.customizeTooltip&&Array.isArray(t.content?.description)){let e="";t.content.description.forEach((t=>{"string"==typeof t?e+=t:t.value&&(e+=t.value)})),t.content.description={displayTemplate:e},t.content.body=null}}if(e.getParameter(t)&&(Object.prototype.hasOwnProperty.call(e.getParameter(t),j)||t===j)){(e.getParameter(t).referenceLines??e.getParameter(t)).forEach((e=>{if(!isNaN(e.value)){const t={type:"static",data:e.value};e.value=t}if("string"==typeof e.label){const t={type:"static",data:e.label};e.label=t}}))}}return e}_getWidgetHeight(e){return Math.ceil(e.getHeight()*(e.getWidgetLayout().getGridLayout().getRowHeight().getRowSpec().getValue()/this._dashboardDescribe.getCurrentLayout().getRowHeight().getRowSpec().getValue()))}_getWidgetWidth(e){return Math.floor(e.getWidth()*this._getWidgetRelativeColumn(e))}_getWidgetPositionColumn(e){return Math.floor(e.getColumn()*this._getWidgetRelativeColumn(e))}_getWidgetRelativeColumn(e){return this._dashboardDescribe.getCurrentLayout().getNumColumns()/e.getWidgetLayout().getGridLayout().getNumColumns()}}class z extends N.Z{perform(){return this._performOperation(n.Z.getLabel("DashboardWidgetAction","unlinkFromOtherPages"))}_getNewWidgetMetadata(e){const t=e.getWidget(),r=o.Z.fromCode(t.getType());return new l.Z(r).setId(this._getMetadataHolder().generateWidgetId(r,Array.from(this._seenWidgetIds))).setDashboardMetadata(this._getMetadata()).setLensMetadata(t.getLens()).setParameters(t.getParameters()).build()}_addWidgetManeuverMutators(e,t,r,i,s){this._addWidgetLayoutMutators(e,t,r,i,s),e.push(new u.Z(!1,this._getLayoutName(),s,i.getUID(),i.getPosition()))}_getWidgetPositionRow(e){return e.getRow()}}class $ extends i.Z{constructor(e,t,r){super(),this._clazz=e,this._errorClassName=t,this._doesCreateNewStep=r}make(e,t,r,i,s,n){return new this._clazz(e,t,r,i,s,n)}getErrorClass(){return this._errorClassName}createsNewStep(){return this._doesCreateNewStep}}$.add("MOVE",new $(O,"move-widget-modal",!1)).add("DUPLICATE",new $(N.Z,"duplicate-widget-modal",!0)).add("COPY",new $(T,"copy-widget-modal",!1)).add("CLONE",new $(c,"clone-widget-modal",!1)).add("UNLINK",new $(z,"unlink-widget-modal",!1)).add("PASTE",new $(q,"paste-widget-modal",!0)).add("CELL_DUPLICATE",new $(M,"duplicate-cell-widget-modal",!0)).finish()},75503:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var i=r(31436),s=r(8429),n=r(90104);class o{constructor(e,t){this._binding=e,this._rootError=t,this._errors=new Map}getRootError(){return this._rootError}addError(e){this._errors.set(e.getId(),e)}getFunctionWithErrors(){return Array.from(this._errors.values())}getErrorMessage(){if(null!=this._rootError){const e=this._rootError.message;return`${s.Z.getLabel("BindingValidationError","parseError")}\n${e}`}if(this._errors.size>0)return this._serializeStatementErrors(this._binding.getRootFunction())}_serializeStatementErrors(e,t=0,r){let i="";null!=r&&(i=r+"\n");for(let e=0;e<t;e++)i+="\t";if(e.isValid())i+=e.toString(1);else{const t=e.getValidationError()||"";i+=`**${e.toString(1)}** => `+t}for(const r of e.getArguments())r instanceof n.Z&&(i=this._serializeStatementErrors(r,t+1,i));return i}isValid(){return null==this._rootError&&0===this._errors.size}}var a=r(19280);class l{#ne;#oe;#ae;#le;constructor(e,t,r,i){this.#ne=e,this.#oe=t,this.#ae=r,this.#le=i}getValue(){return this.#ne}getBindingFunction(){return this.#oe}getExecutionContext(){return this.#ae}getExecutionDetails(){return this.#le}serializeExecutionDetails(){return this._serializeExecutionDetails(this.#le)}_serializeExecutionDetails(e,t=0,r){if(null==e)return"";let i="";null!=r&&(i=r+"\n");for(let e=0;e<t;e++)i+="\t";if(i+=e.execution,void 0!==e.result){const t=a.NO_DATA.isOf(e.result)?null:e.result;i+=" => "+JSON.stringify(t)}for(const r of e.children)i=this._serializeExecutionDetails(r,t+1,i);return i}}var u=r(72984),d=r(90456);class c{constructor(e,t,r){this._bindingString=e,this._messages=new Map,this._namespace=r,this._results=new Map,t.forEach((e=>{this._messages.set(this._getMessageKey(e.getPublisherId(),e.getType()),e)}))}getMessage(e,t){const r=this._getMessageKey((0,d.$)(e,this._namespace),t),i=this._messages.get(r);if(null==i)throw new Error("Message not in execution context.");return i}addResult(e,t){if(this._results.has(e.getId()))throw new Error(`Statement ${e.getId()} result already exists.`);this._results.set(e.getId(),t)}removeResult(e){if(!this._results.has(e.getId()))throw new Error(`Statement ${e.getId()} result does not exist.`);const t=this._results.get(e.getId());return this._results.delete(e.getId()),t}throwWithLabel(e,t,...r){throw new u.Z(this._bindingString,e,s.Z.getLabel("BindingExecutionError",t,...r),this)}_getMessageKey(e,t){return`[${e}]${t.name}`}}var h=r(89443),p=r(7516);class g{constructor(e){this._bindingString=e,this._statementMap=new Map}_parseRootFunction(){throw new Error("Not implemented.")}_getBindingString(){return this._bindingString}parseAndValidate(){if(null!=this._validationResult)return this._validationResult;try{const e=new o(this);this._rootFunction=this._addToStatementMap(this._parseRootFunction()),this._validate(this._rootFunction,e),this._validationResult=e}catch(e){this._validationResult=new o(this,e)}return this._validationResult}getRootFunction(){return this._rootFunction}getSteps(){if(null!=this._steps)return this._steps;const e=new i.Z;for(e.push(this._rootFunction),this._steps=[];!e.isEmpty();){const t=e.pop();if(t instanceof n.Z)for(const r of t.getArguments())r instanceof n.Z?e.push(r):r instanceof h.Z&&this._steps.push(r)}return this._steps}getStatement(e){return this._statementMap.get(e)}execute(e,t=!1,r){if(null==this._validationResult&&!this._validationResult.isValid())throw new Error("Binding has not been parsed or has validation errors");const i=new c(this._bindingString,e,r),s=t?{execution:this._rootFunction.toString(),children:[],result:void 0}:void 0;this._execute(this._rootFunction,i,s);const n=i.removeResult(this._rootFunction);return null!=s&&(s.result=n),new l(n,this._rootFunction,i,s)}_execute(e,t,r){if(e instanceof n.Z){let i;null!=r&&(i={execution:e.toString(1),children:[],result:void 0},r.children.push(i)),e.getArguments().forEach((e=>{this._execute(e,t,i)}));const s=e.execute(t);null!=i&&(i.result=s),t.addResult(e,s)}else e instanceof h.Z||e instanceof p.Z&&t.addResult(e,e.getValue())}_validate(e,t){if(!(e instanceof n.Z))throw new Error("Statement is not a BaseBindingFunction");e.isValid()||t.addError(e);for(const r of e.getArguments())r instanceof n.Z&&this._validate(r,t);return t}_addToStatementMap(e){if(null!=this._statementMap.get(e.getId()))throw new Error(`Statement of id ${e.getId()} already exists.`);return this._statementMap.set(e.getId(),e),e}toString(e){return null==this._validationResult?"Not parsed yet.":this._validationResult.isValid()?this._rootFunction.toString(e):this._validationResult.getErrorMessage()}}},90104:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(36796);class s extends i.Z{constructor(e,t,r,i,s){super(e,t,r),this._methodName=i,this._args=s,this._validationError=this.getMethod().validate(this._args)}getMethod(){throw new Error("Not implemented.")}isValid(){return null==this._validationError}isNestable(){return!1}getValidationError(){return this._validationError}getMethodName(){return this._methodName}getArguments(){return this._args}getArgument(e){return this._args[e]}execute(e){if(!this.isValid())throw new Error("Invalid binding function.");return this.getMethod().execute(this,e)}toString(e=Number.POSITIVE_INFINITY){const t=this._args.map((t=>e>0?t.toString(e-1):"*"));return`${this._methodName}(${t.join(", ")})`}}},68623:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(67110);class n{constructor(e,t=!0){this._expectedClasses=null!=e?Array.isArray(e)?e:[e]:void 0,this._required=t}validate(e,t){if(t>=e.length)return this._required?new s.Z(!1,t,t,i.Z.getLabel("BindingValidationError","requiredArgument",t)):new s.Z(!0,t,t);const r=e[t];let n,o=!1;if(null!=this._expectedClasses)for(const e of this._expectedClasses)if(r instanceof e){o=!0;break}return o||(n=i.Z.getLabel("BindingValidationError","invalidArgument",t)),new s.Z(o,t,t+1,n)}}},99328:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(69370),n=r(8429);class o extends s.Z{#ue;#de;constructor(e,t){super(),this.#ue=e,this.#de=t}getArgs(){return this.#ue}validate(e){if((0,i.isFunction)(this.#ue))return this.#ue(e);if((0,i.isEmpty)(this.#ue))return(0,i.isEmpty)(e)?void 0:n.Z.getLabel("BindingValidationError","tooManyArguments",0,e.length);let t=0;for(const r of this.#ue){const i=r.validate(e,t);if(!i.isValid())return i.getMessage();t=i.getNextIndex()}return t<e.length?n.Z.getLabel("BindingValidationError","tooManyArguments",t,e.length):void 0}execute(e,t){return this.#de.bind(this)(e,t)}}},7516:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(36796);class s extends i.Z{#ne;constructor(e,t,r,i){super(e,t,r),this.#ne=i}getValue(){return this.#ne}}},89176:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var i=r(75503),s=r(63321),n=r(90104),o=r(58986);class a extends n.Z{getMethod(){return null==this._method&&(this._method=o.Z.fromCode(this.getMethodName())),this._method}isNestable(){return!0}}var l=r(7994),u=r(16640),d=r(84888),c=r(23442),h=r(9080),p=r(93861),g=r(89443);s.parser.yy.parseError=function(e,t){throw new Error(e.split("\n").slice(1).join("\n"))};const m={manipulation:a,selection:u.Z,serialization:l.Z};class _ extends i.Z{#ce;constructor(e){super(e)}_parseRootFunction(){const e=s.parser.parse(this._getBindingString());return this._parseNested(e.serialization,[].concat(e.base,e.serialization.args),-1,this._buildFunctionStatement)}_buildFunctionStatement({ast:e,functionId:t,parentId:r,nestedStatements:i}){return new m[e.type](this,t,r,e.function,i)}_buildArrayFunctionStatement({ast:e,functionId:t,parentId:r,nestedStatements:i}){return new p.Z(this,t,r,i)}_parseNested(e,t,r,i){null==this.#ce&&(this.#ce=-1);const s=++this.#ce,n=[];return t.forEach((e=>{let t;if(null!=m[e.type])t=this._parseNested(e,e.args,s,this._buildFunctionStatement);else switch(e.type){case"integer":t=new d.Z(this,++this.#ce,s,Number(e.value));break;case"string":t=new c.Z(this,++this.#ce,s,String(e.value));break;case"boolean":t=new h.Z(this,++this.#ce,s,"true"===e.value);break;case"array":t=this._parseNested(e,e.values,s,this._buildArrayFunctionStatement);break;case"reference":t=new g.Z(this,++this.#ce,s,e.step,e.messageType)}if(null==t)throw new Error("Unknown statement type");this._addToStatementMap(t),n.push(t)})),i({functionId:s,parentId:r,ast:e,nestedStatements:n})}}},9080:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(7516);class s extends i.Z{toString(e=Number.POSITIVE_INFINITY){return this.getValue().toString()}}},72984:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(8429);class s extends Error{#he;#oe;#ae;constructor(e,t,r,s){super(),this.name="BindingError",this.message=i.Z.getLabel("BindingExecutionError","bindingExecutionErrorMessage",e,r),this.originalMessage=r,this.#he=e,this.#oe=t,this.#ae=s}getBindingString(){return this.#he}getBindingFunction(){return this.#oe}getExecutionContext(){return this.#ae}}},67110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{#pe;#ge;#me;#_e;constructor(e,t,r,i){this.#pe=e,this.#ge=t,this.#me=r,this.#_e=i}isValid(){return this.#pe}getStartIndex(){return this.#ge}getNextIndex(){return this.#me}getMessage(){return this.#_e}}},87480:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(8429),s=r(90104),n=r(68623),o=r(67110);class a extends n.Z{#fe;#ye;constructor(e,t=!0){super(void 0,t),this.#fe=e,this.#ye=t}validate(e,t){if(t>=e.length)return this.#ye?new o.Z(!1,t,t,i.Z.getLabel("BindingValidationError","requiredArgument",t)):new o.Z(!0,t,t);const r=e[t];let n=!1;if(r instanceof s.Z&&r.isNestable()&&(n=!0),n||null==this.#fe){let e;return n||(e=i.Z.getLabel("BindingValidationError","invalidArgument",t)),new o.Z(n,t,t+1,e)}return this.#fe.validate(e,t)}}},24959:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(8429),s=r(68623),n=r(67110);class o extends s.Z{#fe;#ye;constructor(e,t=!0){super(void 0,t),this.#fe=e,this.#ye=t}validate(e,t){let r=t;for(;;){const t=this.#fe.validate(e,r);if(!t.isValid())break;r=t.getNextIndex()}return this.#ye&&r===t?new n.Z(!1,t,t,i.Z.getLabel("BindingValidationError","requiredArgument",t)):new n.Z(!0,t,r)}}},84888:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(7516);class s extends i.Z{toString(e=Number.POSITIVE_INFINITY){return this.getValue().toString()}}},58986:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(96486),s=r(99328),n=r(19280),o=r(68623),a=r(87480),l=r(24959),u=r(23442),d=r(84888);class c extends s.Z{}c.add("FLATTEN","flatten",new c([new a.Z],(function(e,t){const r=t.removeResult(e.getArgument(0));return null==r||n.NO_DATA.isOf(r)?null:(n.TWO_DIM.isOf(r,e,t),Array.prototype.concat.apply([],r))}))).add("CONCAT","concat",new c([new l.Z(new a.Z)],(function(e,t){let r=null;const i=[];for(const s of e.getArguments()){const o=t.removeResult(s);if(null==o||n.NO_DATA.isOf(o))continue;const a=n.from(o,e,t);null==r&&(r=a),a===n.SCALAR?t.throwWithLabel(e,"scalarConcatSource"):a!==r&&t.throwWithLabel(e,"inconsistentConcatSourceShape"),i.push(o)}return Array.prototype.concat.apply([],i)}))).add("JOIN","join",new c([new a.Z,new a.Z(new o.Z([u.Z]))],(function(e,t){let r=t.removeResult(e.getArgument(0));if(null==r||n.NO_DATA.isOf(r))return null;n.SCALAR.isNotOf(r,e,t);const s=t.removeResult(e.getArgument(1));return(0,i.isString)(s)||t.throwWithLabel(e,"invalidJoinToken"),r=n.TWO_DIM.isOf(r)?r.map((e=>e.join(s))):r,r.join(s)}))).add("COALESCE","coalesce",new c([new l.Z(new a.Z(new o.Z([u.Z,d.Z])))],(function(e,t){for(const r of e.getArguments()){const e=t.removeResult(r);if(null!=e&&!n.NO_DATA.isOf(e))return e}return null}))).add("SLICE","slice",new c([new a.Z,new a.Z(new o.Z([d.Z])),new a.Z(new o.Z([d.Z]),!1)],(function(e,t){const r=t.removeResult(e.getArgument(0));n.SCALAR.isNotOf(r,e,t);const s=t.removeResult(e.getArgument(1));(0,i.isNumber)(s)||t.throwWithLabel(e,"invalidSliceStart");const o=e.getArgument(2);let a;return null!=o&&(a=t.removeResult(o),(0,i.isNumber)(a)||t.throwWithLabel(e,"invalidSliceEnd")),null!=a&&a<=s&&t.throwWithLabel(e,"invalidSliceIndices"),r.slice(s,a)}))).add("VALUE_AT","valueAt",new c([new a.Z,new a.Z(new o.Z([d.Z]))],(function(e,t){const r=t.removeResult(e.getArgument(0));n.SCALAR.isNotOf(r,e,t);let s=t.removeResult(e.getArgument(1));return(0,i.isNumber)(s)||t.throwWithLabel(e,"invalidValueAtIndex"),s<0&&(s+=r.length),s<0||s>=r.length?null:r[s]}))).add("TO_ARRAY","toArray",new c([new l.Z(new a.Z(new o.Z([d.Z,u.Z])))],(function(e,t){const r=[];for(const i of e.getArguments()){const e=t.removeResult(i);null==e||n.NO_DATA.isOf(e)||r.push(e)}return r}))).finish()},89443:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(36796),s=r(99689);class n extends i.Z{#be;#Ce;constructor(e,t,r,i,n){switch(super(e,t,r),this.#be=i,n){case"selection":this.#Ce=s.Z.SELECTION;break;case"result":this.#Ce=s.Z.RESULT}}getStep(){return this.#be}getType(){return this.#Ce}toString(e=Number.POSITIVE_INFINITY){return this.#be+(null!=this.#Ce?`.${this.#Ce.name.toLowerCase()}`:"")}}},16640:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(90104),s=r(21322);class n extends i.Z{getMethod(){return null==this._method&&(this._method=s.Z.fromCode(this.getMethodName())),this._method}isNestable(){return!0}}},21322:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i=r(96486),s=r(99328),n=r(23442),o=r(19280),a=r(84888),l=r(68623),u=r(87480),d=r(8429),c=r(67110),h=r(93861);class p extends l.Z{#Ee;#Se;constructor(e,t,r=!0){super(h.Z,t),this.#Ee=e,this.#Se=r}validate(e,t){const r=super.validate(e,t);if(!r.isValid()||r.getStartIndex()===r.getNextIndex())return r;const s=e[t];if(!(s instanceof h.Z))throw new Error("Statement is not a BindingValueArray");if((0,i.isEmpty)(s.getStatements())&&this.#Se)return new c.Z(!1,t,t+1,d.Z.getLabel("BindingValidationError","requiredArgument",t));for(const e of s.getStatements())if(!(e instanceof this.#Ee))return new c.Z(!1,t,t+1,d.Z.getLabel("BindingValidationError","invalidArrayArgument"));return r}}var g=r(89443);class m extends s.Z{_getMessageData(e,t){const r=e.getArgument(0);if(!(r instanceof g.Z))throw new Error("Argument is not an instance of BindingReference");return t.getMessage(r.getStep(),r.getType()).getData()}_hasColumnInMetadataOrData(e,t,r){const i=t.getArgument(0);if(!(i instanceof g.Z))throw new Error("Argument is not an instance of BindingReference");const s=r.getMessage(i.getStep(),i.getType()),n=s.getMetadata();if(null==n)throw new Error("Metadata is null");return n.hasColumn(e)||s.getData().some((t=>Object.prototype.hasOwnProperty.call(t,e)))}}m.add("ROW","row",new m([new l.Z(g.Z),new u.Z(new p(a.Z,!0,!1)),new u.Z(new p(n.Z,!0),!1)],(function(e,t){const r=this._getMessageData(e,t),s=t.removeResult(e.getArgument(1));if(o.ONE_DIM.isOf(s,e,t),(0,i.isEmpty)(r))return o.NO_DATA_SENTINEL;let n,a;if(null!=e.getArgument(2)){n=t.removeResult(e.getArgument(2)),o.ONE_DIM.isOf(n,e,t);for(const r of n)this._hasColumnInMetadataOrData(r,e,t)||t.throwWithLabel(e,"invalidColumnName",r)}else n=(0,i.keys)(r[0]);a=(0,i.isEmpty)(s)?r:s.map((i=>(i>=r.length&&t.throwWithLabel(e,"invalidRowIndex",i),r[i])));const l=a.map((e=>n.map((t=>null!=e[t]?e[t]:null))));return null!=s&&1===s.length?l[0]:l}))).add("COLUMN","column",new m([new l.Z(g.Z),new u.Z(new p(n.Z,!0))],(function(e,t){const r=this._getMessageData(e,t),s=t.removeResult(e.getArgument(1));if(o.ONE_DIM.isOf(s,e,t),(0,i.isEmpty)(r))return o.NO_DATA_SENTINEL;const n=[];return s.forEach((i=>{this._hasColumnInMetadataOrData(i,e,t)||t.throwWithLabel(e,"invalidColumnName",i),n.push(r.map((e=>null!=e[i]?e[i]:null)))})),1===s.length?n[0]:n}))).add("CELL","cell",new m([new l.Z(g.Z),new u.Z(new l.Z(a.Z)),new u.Z(new l.Z(n.Z))],(function(e,t){const r=this._getMessageData(e,t),s=t.removeResult(e.getArgument(1));o.SCALAR.isOf(s,e,t);const n=t.removeResult(e.getArgument(2));return o.SCALAR.isOf(n,e,t),(0,i.isEmpty)(r)?o.NO_DATA_SENTINEL:((s>=r.length||!this._hasColumnInMetadataOrData(n,e,t))&&t.throwWithLabel(e,"invalidCell",s,n),null!=r[s][n]?r[s][n]:null)}))).finish()},7994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(90104),s=r(38764);class n extends i.Z{getMethod(){return null==this._method&&(this._method=s.Z.fromCode(this.getMethodName())),this._method}toString(e=Number.POSITIVE_INFINITY){const t=this.getArguments(),r=t[0],i=[];if(t.length>1)for(let r=1;r<t.length;r++)i.push(e>0?t[r].toString(e-1):"*");return`${r.toString(e-1)}.${this.getMethodName()}(${i.join(", ")})`}}},38764:(e,t,r)=>{"use strict";r.d(t,{Z:()=>L});var i=r(96486),s=r(74978),n=r(33524),o=r(66537),a=r(92425),l=r(99328),u=r(23442),d=r(9080),c=r(19280),h=r(93861),p=r(68623),g=r(87480),m=r(24959),_=r(69370);class f extends _.Z{}f.add("BETWEEN","BETWEEN",new f).add("IN","IN",new f).add("NOT_IN","NOT IN",new f).add("EQUALS","=",new f).add("NOT_EQUALS","!=",new f).add("LESS_THAN","<",new f).add("LESS_THAN_OR_EQUALS","<=",new f).add("GREATER_THAN",">",new f).add("GREATER_THAN_OR_EQUALS",">=",new f).add("GREATER_THAN_AND_LESS_THAN","><",new f).add("GREATER_THAN_OR_EQUALS_AND_LESS_THAN_OR_EQUALS",">=<=",new f).finish();var y=r(23634),b=r(17537),C=r(62154);function E(e,t){if(null!=t)switch(e){case a.Z.SOBJECT:return t;case a.Z.BIGQUERY:return`\`${t}\``;default:return`"${t}"`}}function S(e,t,r){const i=E(e,t);if(null!=i)return r?`${i} ${r}`:i}function T(e,t,r,i,s,n){let o,l;if(s){const e=new Date(t);o=null!=t?R([e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate()]):null;const i=new Date(r);l=null!=r?R([i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate()]):null}else o=R(t),l=R(r);const u=[i,[o,l],"between"],d=new b.Z(u);return e===a.Z.SOBJECT?(0,C.j)(...d.json):new y.Z(d,e.sqlQueryFormatter).buildAbsoluteDatePredicate()}function I(e,t,r,i,s){let n;switch(n=null==t&&null!=r?new b.Z([i,[["day",0],r],"between"]):null!=t&&null==r?new b.Z([i,[t,["day",0]],"between"]):new b.Z([i,[t,r],"between"]),e){case a.Z.SOBJECT:return(0,C.j)(...n.json);case a.Z.DATASET:return s("sqlOnTCRMDatasetRelativeDateNotSupport"),"";default:return new y.Z(n,e.sqlQueryFormatter).buildRelativeDatePredicate()}}function v(e,t,r,i){const s=new b.Z([r,t,i.toLowerCase()]);return e===a.Z.SOBJECT?(0,C.j)(...s.json):new y.Z(s,e.sqlQueryFormatter).buildDimensionPredicate()}function R(e){return null==e||"string"==typeof e?e:e.map((e=>(0,s.leftPad)(String(e),2,"0"))).join("-")}var w=r(86866);const A=[n.OPEN_ENDED_DATE_RANGE_LOWER_BOUND,n.OPEN_ENDED_DATE_RANGE_UPPER_BOUND],D=[w.Z.SQL,w.Z.SOQL,w.Z.CDP];class L extends l.Z{static forLensType(e){return e?L.enums().filter((t=>null==t.#Te||t.#Te.has(e))):L.enums()}constructor(e,t,r){super(e,t),this.#Te=r}#Te;_getNonNullResult(e,t){const r=t.removeResult(e.getArgument(0));return null!=r&&r!==c.NO_DATA_SENTINEL||t.throwWithLabel(e,"cannotSerializeNull"),r}_throwInvalidSQLTypeError(e,t){t.throwWithLabel(e,"invalidSQLType",a.Z.enums().map((e=>`"${e.code}"`)).join(", "))}}L.add("AS_OBJECT","asObject",new L([new g.Z],(function(e,t){const r=t.removeResult(e.getArgument(0));return r===c.NO_DATA_SENTINEL?null:r}))).add("AS_STRING","asString",new L([new g.Z],(function(e,t){const r=t.removeResult(e.getArgument(0));return null==r||c.from(r,e,t)===c.NO_DATA?"null":(0,i.isObject)(r)?n.stringValue(r):r.toString()}))).add("AS_EQUALITY","asEquality",new L([new g.Z,new m.Z(new g.Z(new p.Z([u.Z,h.Z])))],(function(e,t){const r=t.removeResult(e.getArgument(0)),s=[];for(let r=1;r<e.getArguments().length;r++){const a=t.removeResult(e.getArgument(r));Array.isArray(a)?2===a.length&&o.hasCode(a[0])?s.push(`${o.getEnumByCode(a[0]).getAccessFunction()}('${a[1]}')`):t.throwWithLabel(e,"invalidAsEqualityFieldName"):(0,i.isString)(a)?s.push(n.fieldName(a)):t.throwWithLabel(e,"invalidAsEqualityFieldName")}const a=c.from(r,e,t);if(a===c.NO_DATA)return`${s[0]} in all`;if(1!==s.length){c.TWO_DIM.isOf(r,e,t),s.length!==r[0].length&&t.throwWithLabel(e,"invalidAsEqualityDataShape");const i=[];for(const e of r){const t=[];for(let r=0;r<s.length;r++)t.push(n.createSingleFieldEqualityFilter(s[r],e[r]));i.push(`(${t.join(" && ")})`)}return i.join(" || ")}switch(a){case c.SCALAR:return n.createSingleFieldEqualityFilter(s[0],r);case c.ONE_DIM:{const e=(0,i.remove)(r,(e=>null==e));if(r.length>0){const t=1===r.length?`${s[0]} == ${n.stringValue(r[0])}`:`${s[0]} in ${n.stringValue(r)}`;return e.length>0?`(${t} || ${s[0]} is null)`:t}return e.length>0?`${s[0]} is null`:`${s[0]} in all`}default:return t.throwWithLabel(e,"expectedNot2DArray")}}),new Set([w.Z.SAQL]))).add("AS_RANGE","asRange",new L([new g.Z,new g.Z(new p.Z([u.Z]))],(function(e,t){const r=t.removeResult(e.getArgument(0)),s=t.removeResult(e.getArgument(1));(0,i.isString)(s)||t.throwWithLabel(e,"invalidAsRangeFieldName");const o=n.fieldName(s);return null==r||c.from(r,e,t)===c.NO_DATA?`${o} in all`:(c.ONE_DIM.isOf(r,e,t),r.length<2&&t.throwWithLabel(e,"invalidAsRangeDataShape"),`${o} >= ${r[0]} && ${o} <= ${r[1]}`)}),new Set([w.Z.SAQL]))).add("AS_DATE_RANGE","asDateRange",new L([new g.Z,new g.Z(new p.Z([u.Z]))],(function(e,t){const r=t.removeResult(e.getArgument(0));let s=t.removeResult(e.getArgument(1));(0,i.isString)(s)||t.throwWithLabel(e,"invalidAsDateRangeFieldName"),(0,i.startsWith)(s,"date(")&&(0,i.endsWith)(s,")")||(s=n.fieldName(s));const o=c.from(r,e,t);if(null==r||o===c.NO_DATA)return`${s} in all`;c.SCALAR.isNotOf(r,e,t),2!==r.length&&t.throwWithLabel(e,"invalidAsDateRangeDataShape");let a="";switch(o){case c.ONE_DIM:if([0,1].some((e=>"number"==typeof r[e]))){const e=[];for(let t=0;t<=1;t++)if(null!=r[t]){const i=new Date(r[t]);e.push(n.stringValue([i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate()]))}else e.push(JSON.stringify(A[t]));a=`dateRange(${e[0]}, ${e[1]})`}else a="..",null!=r[0]&&(a=`"${r[0]}"`+a),null!=r[1]&&(a+=`"${r[1]}"`);break;case c.TWO_DIM:3===r[0].length&&3===r[1].length?a=`dateRange(${n.stringValue(r[0])}, ${n.stringValue(r[1])})`:2===r[0].length&&2===r[1].length?a=`${n.relativeDateString(r[0])}..${n.relativeDateString(r[1])}`:t.throwWithLabel(e,"invalidAsDateRangeDataShape")}return`${s} in [${a}]`}),new Set([w.Z.SAQL]))).add("AS_PROJECTION","asProjection",new L([new g.Z],(function(e,t){let r=this._getNonNullResult(e,t);c.SCALAR.isNotOf(r,e,t),c.from(r,e,t)===c.ONE_DIM&&(r=[r]);return r.map((e=>`${e[0]} as ${n.fieldName(e[1])}`)).join(", ")}),new Set([w.Z.SAQL]))).add("AS_DATE_PROJECTION","asDateProjection",new L([new g.Z],(function(e,t){const r=this._getNonNullResult(e,t);r.length>3&&t.throwWithLabel(e,"invalidAsDateProjectionDataShape"),c.ONE_DIM.isOf(r,e,t);return`${r.map((e=>n.fieldName(e))).join(' + "~~~" + ')} as ${n.fieldName(r.join("~~~"))}`}),new Set([w.Z.SAQL]))).add("AS_GROUPING","asGrouping",new L([new g.Z],(function(e,t){const r=this._getNonNullResult(e,t);switch(c.from(r,e,t)){case c.SCALAR:return n.fieldName(r);case c.ONE_DIM:if(r.length>0){return`(${r.map((e=>n.fieldName(e))).join(", ")})`}return"all";default:t.throwWithLabel(e,"expectedNot2DArray")}}),new Set([w.Z.SAQL]))).add("AS_ORDER","asOrder",new L([new g.Z],(function(e,t){const r=this._getNonNullResult(e,t);let i=[];switch(c.from(r,e,t)){case c.SCALAR:return n.fieldName(r);case c.ONE_DIM:i=r.map((e=>n.fieldName(e)));break;case c.TWO_DIM:i=r.map((e=>`${n.fieldName(e[0])} ${e[1]}`))}return`(${i.join(", ")})`}),new Set([w.Z.SAQL]))).add("AS_SQL_SELECT","asSQLSelect",new L([new g.Z,new g.Z(new p.Z(u.Z))],(function(e,t){let r=this._getNonNullResult(e,t);c.SCALAR.isNotOf(r,e,t),c.from(r,e,t)===c.ONE_DIM&&(r=[r]);const i=t.removeResult(e.getArgument(1));a.Z.hasCode(i)||this._throwInvalidSQLTypeError(e,t);const s=a.Z.fromCode(i);return r.map((([e,t])=>function(e,t,r){switch(e){case a.Z.SOBJECT:return null!=r?`${t} ${r}`:t;case a.Z.BIGQUERY:return null!=r?`\`${t}\` AS \`${r}\``:`\`${t}\``;default:return null!=r?`${t} AS "${r}"`:t}}(s,e,t))).join(", ")}),new Set(D))).add("AS_SQL_WHERE","asSQLWhere",new L([new g.Z,new g.Z(new p.Z(u.Z)),new g.Z(new p.Z(d.Z),!1)],(function(e,t){let r=t.removeResult(e.getArgument(0));const i=t.removeResult(e.getArgument(1));a.Z.hasCode(i)||this._throwInvalidSQLTypeError(e,t);const n=e.getArguments().length>2&&t.removeResult(e.getArgument(2)),o=a.Z.fromCode(i),l=[];if(Array.isArray(r)){Array.isArray(r[0])||(r=[r]);for(let i=0;i<r.length;i++){const[n,a,u]=r[i];if(("string"!=typeof n||"string"!=typeof a||null!=u&&!Array.isArray(u))&&t.throwWithLabel(e,"invalidSQLFilterInput"),f.hasCode(a)||t.throwWithLabel(e,"unsupportedOperator",a),null==u||!u?.length||u.every((e=>void 0===e)))continue;const d=E(o,n);switch(f.fromCode(a)){case f.BETWEEN:if(null!=d){let r;Array.isArray(u)&&2===u.length||t.throwWithLabel(e,"invalidSQLDateFilterValues");const i=u[0],s=u[1];if(null==i&&null==s)continue;if(null!=i&&null!=s&&typeof i!=typeof s&&t.throwWithLabel(e,"invalidSQLDateFilterValues"),Array.isArray(i)||Array.isArray(s))if(3===i?.length||3===s?.length)r=`(${T(o,i,s,n,!1,t.throwWithLabel.bind(t,e))})`;else if(2===i?.length||2===s?.length){const a=`${I(o,i,s,n,t.throwWithLabel.bind(t,e))}`;r=a.startsWith("(")?a:`(${a})`}else t.throwWithLabel(e,"invalidSQLDateFilterValues");else"number"==typeof i||"number"==typeof s?r=`(${T(o,i,s,n,!0,t.throwWithLabel.bind(t,e))})`:"string"==typeof i||"string"==typeof s?r=`(${T(o,i,s,n,!1,t.throwWithLabel.bind(t,e))})`:t.throwWithLabel(e,"invalidSQLDateFilterValues");null!=r&&l.push(r)}break;case f.NOT_IN:case f.IN:u.every((e=>"string"==typeof e||null==e))||t.throwWithLabel(e,"invalidSQLDimensionFilterValues",a),null!=d&&l.push(v(o,u,n,a));break;case f.EQUALS:null!=d&&(null!=u[0]?l.push(`${d} ${a} ${"number"==typeof u[0]?u[0]:`${(0,s.quoteValue)(u[0],!0)}`}`):l.push(`${d} IS NULL`));break;case f.NOT_EQUALS:null!=d&&(null!=u[0]?l.push(`${d} ${a} ${"number"==typeof u[0]?u[0]:`${(0,s.quoteValue)(u[0],!0)}`}`):l.push(`${d} IS NOT NULL`));break;case f.LESS_THAN:case f.LESS_THAN_OR_EQUALS:case f.GREATER_THAN:case f.GREATER_THAN_OR_EQUALS:null!=d&&("number"!=typeof u[0]&&t.throwWithLabel(e,"invalidSQLMeasureFilterValues",a),l.push(`${d} ${a} ${u[0]}`));break;case f.GREATER_THAN_AND_LESS_THAN:null!=d&&("number"==typeof u[0]&&"number"==typeof u[1]||t.throwWithLabel(e,"invalidSQLMeasureRangeFilterValues",a),l.push(`(${d} > ${u[0]} AND ${d} < ${u[1]})`));break;case f.GREATER_THAN_OR_EQUALS_AND_LESS_THAN_OR_EQUALS:null!=d&&("number"==typeof u[0]&&"number"==typeof u[1]||t.throwWithLabel(e,"invalidSQLMeasureRangeFilterValues",a),l.push(`(${d} >= ${u[0]} AND ${d} <= ${u[1]})`))}}return l.length?""+(n?` WHERE ${l.join(" AND ")}`:l.length>1?` AND (${l.join(" AND ")})`:` AND ${l[0]}`):""}}),new Set(D))).add("AS_SQL_GROUPING","asSQLGrouping",new L([new g.Z,new g.Z(new p.Z(u.Z)),new g.Z(new p.Z(d.Z),!1)],(function(e,t){let r=t.removeResult(e.getArgument(0));if(null==r||r===c.NO_DATA_SENTINEL)return"";const i=t.removeResult(e.getArgument(1));a.Z.hasCode(i)||this._throwInvalidSQLTypeError(e,t);const s=a.Z.fromCode(i),n=e.getArguments().length>2&&t.removeResult(e.getArgument(2));switch(c.from(r,e,t)){case c.SCALAR:r=[E(s,r)];break;case c.ONE_DIM:r=r.map((e=>E(s,e)));break;case c.TWO_DIM:r=r.map((e=>E(s,e.length>1?e[1]:e[0])))}return r=r.filter(Boolean),n?r.length>0?`GROUP BY ${r.join(", ")}`:"":r.join(", ")}),new Set(D))).add("AS_SQL_HAVING","asSQLHaving",new L([new g.Z,new g.Z(new p.Z(u.Z)),new g.Z(new p.Z(d.Z),!1)],(function(e,t){const r=t.removeResult(e.getArgument(0)),i=t.removeResult(e.getArgument(1));a.Z.hasCode(i)||this._throwInvalidSQLTypeError(e,t);a.Z.fromCode(i);return function(e,t,r,i){if(Array.isArray(e)){const t=[];let s=e;Array.isArray(e[0])||(s=[e]);for(let e=0;e<s.length;e++){const[r,n,o]=s[e];if(("string"!=typeof r||"string"!=typeof n||null!=o&&!Array.isArray(o))&&i("invalidSQLFilterInput"),f.hasCode(n)||i("unsupportedOperator",n),null!=o&&o?.length&&!o.every((e=>void 0===e)))switch(f.fromCode(n)){case f.EQUALS:null!=o[0]?t.push(`${r} ${n} ${o[0]}`):t.push(`${r} IS NULL`);break;case f.NOT_EQUALS:null!=o[0]?t.push(`${r} ${n} ${o[0]}`):t.push(`${r} IS NOT NULL`);break;case f.LESS_THAN:case f.LESS_THAN_OR_EQUALS:case f.GREATER_THAN:case f.GREATER_THAN_OR_EQUALS:t.push(`${r} ${n} ${o[0]}`);break;case f.BETWEEN:case f.NOT_IN:case f.IN:i("unsupportedOperator",n)}}return t.length?r?` HAVING ${t.join(" AND ")}`:t.length>1?` AND (${t.join(" AND ")})`:` AND ${t[0]}`:""}}(r,0,e.getArguments().length>2&&t.removeResult(e.getArgument(2)),t.throwWithLabel.bind(t,e))}),new Set(D))).add("AS_SQL_ORDER","asSQLOrder",new L([new g.Z,new g.Z(new p.Z(u.Z)),new g.Z(new p.Z(d.Z),!1)],(function(e,t){let r=t.removeResult(e.getArgument(0));if(null==r||r===c.NO_DATA_SENTINEL)return"";const i=t.removeResult(e.getArgument(1));a.Z.hasCode(i)||this._throwInvalidSQLTypeError(e,t);const s=a.Z.fromCode(i),n=e.getArguments().length>2&&t.removeResult(e.getArgument(2));switch(c.from(r,e,t)){case c.SCALAR:r=[S(s,r)];break;case c.ONE_DIM:r=r.map((e=>S(s,e)));break;case c.TWO_DIM:r=r.map((([e,t])=>S(s,e,t)))}return r=r.filter(Boolean),n?r.length>0?`ORDER BY ${r.join(", ")}`:"":r.join(", ")}),new Set(D))).finish()},36796:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{#Ie;#ve;#Re;constructor(e,t,r){this.#Ie=e,this.#ve=t,this.#Re=r}getId(){return this.#ve}getParentStatement(){return this.#Ie.getStatement(this.#Re)}toString(e=Number.POSITIVE_INFINITY){throw new Error("Not implemented.")}}},23442:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(7516);class s extends i.Z{toString(e=Number.POSITIVE_INFINITY){return`"${this.getValue()}"`}}},93861:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(7516);class s extends i.Z{constructor(e,t,r,i){super(e,t,r,i)}getValue(){return super.getValue().map((e=>e.getValue()))}getStatements(){return super.getValue()}toString(e=Number.POSITIVE_INFINITY){return`[${super.getValue().map((t=>e>0?t.toString(e-1):"*")).join(", ")}]`}}},95072:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(96486),s=r(90456),n=r(95435);const o=/{{(.*?)}}/g,a=/({{.*?}})/g;class l{constructor(e,t=0){this._BindingClass=e,this._parsedBindingsCacheSize=t,this._parsedBindingsCacheSize>0&&(this._parsedBindingsCache=new Map),this._lastValuesCacheHits=0,this._parsedCacheHits=0,this._parsedCacheEvictions=0}isBinding(e){if("string"!=typeof e)return!1;const t=e.split(a);return 3===t.length&&t[1]===e}containsBindings(e){try{return!(0,i.isEmpty)(this.getBoundReferences(e))}catch(e){return!0}}getBoundReferences(e){return this.traverse(e,(0,i.bind)(this._extractBoundReferences,this))}getRuntimeTopics(e,t){const r=new Set,i=[];for(const o of this.getBoundReferences(e))for(const e of o){const o=new n.Z((0,s.$)(e.getStep(),t),e.getType());r.has(o.getHash())||(r.add(o.getHash()),i.push(o))}return i}executeBindings(e,t,r,{namespace:i,useBindingsValueCache:s=!0}){let n;return s&&(n=new Map),this.traverse(e,this._executeBoundString.bind(this,t,r,n,i))}traverse(e,t,r=[],i=[]){if("string"==typeof e)this._traversePart(e,e,null,t,r,i);else if(Array.isArray(e))for(let s=0;s<e.length;s++){const n=e[s];i.push(s),this._traversePart(e,n,s,t,r,i),i.pop()}else if(e&&"object"==typeof e)for(const s of Object.keys(e)){const n=e[s];i.push(s),this._traversePart(e,n,s,t,r,i),i.pop()}return r}getParsedCacheHits(){return this._parsedCacheHits}getParsedCacheEvictions(){return this._parsedCacheEvictions}getLastValuesCacheHits(){return this._lastValuesCacheHits}_traversePart(e,t,r,i,s,n=[]){if("string"!=typeof t)return this.traverse(t,i,s,n);{if(o.lastIndex=0,!o.test(t))return;const a=i(t,s,"string"==typeof r?r:void 0,n.slice());if(void 0!==a)return"string"==typeof e||(e[r]=a),a}}_extractBoundReferences(e,t){(e.match(o)??[]).forEach((e=>{const r=this._getParsedBinding(this._removeBindingCurlys(e)),i=r.parseAndValidate();if(!i.isValid())throw i;t.push(r.getSteps())}))}_executeBoundString(e,t,r,s,n=""){this._lastValuesCacheHits=0;const o=n.split(a);for(let i=1,n=o.length;i<n;i+=2){const n=o[i],a=this._removeBindingCurlys(n).trim();o[i]=(()=>{const i=r?.get(a);if(i)return this._lastValuesCacheHits+=1,i;{const i=this._getParsedBinding(a).execute(e,null!=t,s);return null!=t&&t.push(i),r&&r.set(a,i?.getValue()),i?.getValue()}})()}return 3===o.length&&(0,i.isEmpty)(o[0])&&(0,i.isEmpty)(o[2])?o[1]:o.join("")}_removeBindingCurlys(e){return e.substring(2,e.length-2)}_getParsedBinding(e){if(this._parsedBindingsCacheSize>0){let t,r="",i=Number.NEGATIVE_INFINITY;if(this._parsedBindingsCache.forEach(((s,n)=>{n===e?(s.ageSinceUsed=0,this._parsedCacheHits+=1,t=s.parsedBinding):(s.ageSinceUsed>i&&(i=s.ageSinceUsed,r=n),s.ageSinceUsed+=1)})),t)return t;this._parsedBindingsCache.size===this._parsedBindingsCacheSize&&(this._parsedBindingsCache.delete(r),this._parsedCacheEvictions+=1)}const t=new this._BindingClass(e);return t.parseAndValidate(),this._parsedBindingsCacheSize>0&&this._parsedBindingsCache.set(e,{ageSinceUsed:0,parsedBinding:t}),t}}},56379:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(89176),s=r(95072),n=r(3775);class o{constructor(e=20,t=40){this._legacyTraverser=new s.Z(n.Z,e),this._newTraverser=new s.Z(i.Z,t)}getTraverser(e){return e?this.getNewTraverser():this.getLegacyTraverser()}getLegacyTraverser(){return this._legacyTraverser}getNewTraverser(){return this._newTraverser}}},3775:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var i=r(75503),s=r(32702),n=r(96486),o=r(8429),a=r(90104),l=r(99328),u=r(99689),d=r(68623),c=r(89443),h=r(23442),p=r(84888),g=r(61055);class m extends a.Z{getMethod(){return null==this._method&&(this._method=_.fromCode(this.getMethodName())),this._method}}class _ extends l.Z{#we;constructor(e,t,r){super(e,t),this.#we=r}getMessageType(){if(null==this.#we)throw new Error("Function does not support message types.");return this.#we}_serializeSingleQuote(e){return`'${e.replace(/'/g,"\\'")}'`}}_.add("RESULTS","results",new _([new d.Z(c.Z),new d.Z([h.Z,m],!1)],(function(e,t){const r=t.getMessage(e.getArgument(0).getStep(),u.Z.RESULT);let i;if(null!=e.getArgument(1))i=t.removeResult(e.getArgument(1));else{const e=r.getMetadata();if(null==e)throw new Error("Metadata is null");i=0===e.getGroupings().length?e.getColumns()[0].getName():e.getGroupings()[0].getName()}return r.getData().map((e=>e[i]))}),u.Z.RESULT)).add("SELECTION","selection",new _([new d.Z(c.Z)],(function(e,t){const r=t.getMessage(e.getArgument(0).getStep(),u.Z.SELECTION),i=r.getMetadata();if(null==i)throw new Error("Metadata is null");const s=i.getGroupings().length,o=r.getData();if(o.length){if(r.getFilterOperator()===g.Z.BETWEEN)return[[o[0].min,o[0].max]];if(0===s){const e=[];if(2===(0,n.size)(i.getColumns())&&null!=i.getColumn("display"))for(const t of i.getColumns())if("display"!==t.getName()){for(const r of o){const i=r[t.getName()];(0,n.isArray)(i)?i.forEach((t=>{e.push(t)})):e.push(i)}return e}return o}return o.map((e=>1===s?e[i.getGroupings()[0].getName()]:i.getGroupings().map((t=>e[t.getName()]))))}return[]}),u.Z.SELECTION)).add("VALUE","value",new _([new d.Z(m),new d.Z(p.Z,!1)],(function(e,t){const r=t.removeResult(e.getArgument(0));if(null==r)return r;if((0,n.isArray)(r)){const t=e.getArgument(1);let i;return i=null!=t&&null!=t.getValue()?t.getValue():0,r[i]}return r}))).add("FIELD","field",new _([new d.Z(m),new d.Z([h.Z,m])],(function(e,t){const r=t.removeResult(e.getArgument(0)),i=t.removeResult(e.getArgument(1));return null==r?r:(0,n.isArray)(r)?r.map((e=>e[i])):r[i]}))).add("COALESCE","coalesce",new _((function(e){if((0,n.isEmpty)(e))return o.Z.getLabel("BindingValidationError","requiredArgument",0)}),(function(e,t){for(const r of e.getArguments()){const e=t.removeResult(r);if(null!=e)return e}return null}))).add("SINGLE_QUOTE","single_quote",new _([new d.Z(m)],(function(e,t){const r=t.removeResult(e.getArgument(0));if(null==r)return"null";if((0,n.isArray)(r)){if((0,n.isEmpty)(r))return"null";return`(${r.map((e=>this._serializeSingleQuote(e))).join(", ")})`}return this._serializeSingleQuote(r)}))).add("NO_QUOTE","no_quote",new _([new d.Z(m)],(function(e,t){const r=t.removeResult(e.getArgument(0));return null==r?"null":(0,n.isArray)(r)?`[${r.join(", ")}]`:r}))).finish(),s.parser.yy.parseError=e=>{throw new Error(e)};class f extends i.Z{#he;#ce;constructor(e){super(e)}_parseRootFunction(){return this._parseFunction(s.parser.parse(this._getBindingString()))}_parseFunction(e,t){null==this.#ce&&(this.#ce=-1);const r=++this.#ce,i=[];return null!=e.args&&e.args.forEach((e=>{let t;switch(e.type){case"function":t=this._parseFunction(e,r);break;case"identifier":t=new c.Z(this,++this.#ce,r,e.name);break;case"integer":t=new p.Z(this,++this.#ce,r,Number(e.value));break;case"string":t=new h.Z(this,++this.#ce,r,e.value)}if(null==t)throw new Error("Unknown statement type");this._addToStatementMap(t),i.push(t)})),new m(this,r,t,e.function,i)}}},7372:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(8429),s=r(25174),n=r(32029),o=r(50566),a=r(56386),l=r(52364),u=r(32238);class d extends s{constructor(){super("wave-bullet-chart")}supportsGradientBin(){return!0}supportsLabelInBin(){return!1}getDefaultChartProperties(){const e=new o([n.GENERAL.buildProperty(),a.SECTION.of("chart").setLabel(i.Z.getLabel("ChartTypeLongName","bullet")).setItems([n.VALUE_TYPE.buildProperty(),a.NUMBER.of("rangeWeight",20).setMin(4),a.NUMBER.of("barWeight",4).setMin(1),a.COLOR.of("barColor","black"),n.REFERENCE_LINES.buildProperty()]),n.BREAKPOINTS.buildProperty()]);return this.supportsCustomTooltips()&&e.addProperty(n.TOOLTIP.buildProperty()),e}_getPreferredTrellisSize(){return[150,80]}_buildConfig({widgetMetadata:e}){const t=super._buildConfig(...arguments),{referenceLines:r,rangeWeight:i,barWeight:s,barColor:n}=e.getParameters();return t.referenceLines=r,t.rangeWeight=i,t.barWeight=s,t.barColor=n,t}_updateProperties(e,t,r,i,s,n,o){super._updateProperties(e,t,r),u.Z.updateRefLineInputProperties(["chart"],e,s,t,n,o)}resolveParams(e,t,r){return l.Z.getResolvedWidgetParams(e,[],t,r)}constructFromResolvedParams(e){return l.Z.constructFromResolvedParams(e,[])}}},52364:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(76950),n=r(99689),o=r(90456);class a{static getResolvedWidgetParams(e,t,r,i){const s=e.parameters;return 0===t.length&&s.referenceLines&&(s.referenceLines=this.resolveReferenceLine(s.referenceLines,r,i)),t.forEach((e=>{s[e]&&s[e].referenceLines&&(s[e].referenceLines=this.resolveReferenceLine(s[e].referenceLines,r,i))})),e}static getResolvedWidgetParametersByIndex(e,t,r,i){return e.referenceLines&&(e.referenceLines=this.resolveReferenceLine(e.referenceLines,t,r,i)),e}static resolveReferenceLine(e,t=[],r,i=0){return Array.isArray(e)?e.map((e=>(e.value&&(e.value=this._resolveValueParam(e.value,t,r,i)),e.label&&(e.label=this._resolveLabelParam(e.label,t,r,i)),e.time&&(e.time=this._resolveTimeParam(e.time)),e))):e}static _resolveValueParam(e,t,r,i){return"object"==typeof e&&e&&"static"===e.type?e.data:"object"==typeof e&&e&&"dynamic"===e.type&&t.length>0?this._resolveValue(e,t,r,i):e}static _resolveLabelParam(e,t,r,i){return"object"==typeof e&&e&&"static"===e.type?e.data:"object"==typeof e&&e&&"dynamic"===e.type&&t.length>0?this._resolveLabel(e,t,r,i):e}static _resolveTimeParam(e){return"object"==typeof e&&e&&"static"===e.type?e.data:e}static _resolveValue(e,t,r,s){let a="";return t.forEach((t=>{if(t.getPublisherId()===(0,o.$)(e.data.step,r)&&t.getType()===n.Z.fromName(e.data.sourceType.toUpperCase())){const r=t.getData();if((0,i.isEmpty)(r))return void(a=e.data?.noResultsLabel??a);a=r[s][e.data.field]}})),a}static _resolveLabel(e,t,r,a){let l="";return t.forEach((t=>{if(t.getPublisherId()===(0,o.$)(e.data.step,r)&&t.getType()===n.Z.fromName(e.data.sourceType.toUpperCase())){const r=e.data.compact,n=t.getData();if((0,i.isEmpty)(n))return void(l=e.data?.noResultsLabel??"");l=s.getDisplayLabel(n[a],e.data.displayTemplate,t.getMetadata(),t.getFormatter(),r)}})),l}static constructFromResolvedParams(e,t){(0,i.isEmpty)(t)&&e.parameters.referenceLines?this._constructStaticRefLine(e.parameters.referenceLines):(0,i.isEmpty)(t)||t.forEach((t=>{e.parameters[t]&&e.parameters[t].referenceLines&&this._constructStaticRefLine(e.parameters[t].referenceLines)}))}static _constructStaticRefLine(e){Array.isArray(e)&&e.map((e=>{const t=e.value,r=e.label,i=e.time;return t&&(e.value={type:"static",data:String(t)}),i&&(e.time={type:"static",data:String(i)}),e.label={type:"static",data:r?String(r):""},e}))}}},84137:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(8429);class n extends i.Z{getLabel(){return s.Z.getLabel("ChartCategory",this.code)}getValue(){return this.code}}n.add("BAR","bar",new n).add("LINE","line",new n).add("TIME","time",new n).add("GAUGE","gauge",new n).add("DOT","dot",new n).add("GRID","grid",new n).add("MAP","map",new n).add("PIPELINE","pipeline",new n).add("OTHER","other",new n).finish()},32238:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static mergePlots(e,t){t&&e&&e.forEach((e=>{if(e.column&&e.column[0]){const r=e.column[0];t[r]&&Object.assign(e,t[r])}}))}static updateRefLineInputProperties(e,t,r,i,s,n){e.forEach((e=>{const o=t.getProperty(e)&&t.getProperty(e).getItem("referenceLines");o&&["value","time"].forEach((t=>{o.getItem(t)&&o.getItem(t).setOnClickCallback(r).setWidgetMetadata(i).setExecuteMutators(s).setCanEditDynamicRefLine(!n||n()).setWidgetConfigName(e)}))}))}}},84103:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(69370);class n extends s.Z{constructor(e){super(),this._label=e}get label(){return i.Z.getLabel("EclairNgChartOptions",this._label)}}n.add("NONE","none",new n("valueTypeNone")).add("COMPACT_NUMBER","compactNumber",new n("valueTypeCompactNumber")).add("NUMBER","number",new n("valueTypeNumber")).add("PERCENT","percent",new n("valueTypePercentage")).finish()},62230:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(32029),s=r(7372);class n extends s.Z{supportsCustomTooltips(){return!1}getDefaultChartProperties(){const e=super.getDefaultChartProperties();return e.addProperty(i.BANDS.buildProperty()),e.addProperty(i.TRELLIS.buildProperty(this._getPreferredTrellisSize())),e}}},71961:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(32029),s=r(83114);class n extends s{getDefaultChartProperties(){const e=super.getDefaultChartProperties();return e.addProperty(i.BANDS.buildProperty()),e.addProperty(i.TRELLIS.buildProperty(this._getPreferredTrellisSize())),e.addProperty(i.MARKERS.buildProperty()),e}}},65113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(8429),s=r(32029),n=r(43759);class o extends n{supportsCustomTooltips(){return!1}getDefaultChartProperties(){const e=super.getDefaultChartProperties();e.addProperty(s.BANDS_WITH_LABELS.buildProperty()),e.addProperty(s.TRELLIS.buildProperty(this._getPreferredTrellisSize()));const t=e.getProperty("bands").setInline(!1).setLabel(i.Z.getLabel("EclairNgChartOptions","bandColors"));return t.getItem("binRanges").setHidden(!0),t.getItem("low").getItem("label").setDefaultValue(i.Z.getLabel("EclairNgChartOptions","low")),t.getItem("medium").getItem("label").setDefaultValue(i.Z.getLabel("EclairNgChartOptions","medium")),t.getItem("high").getItem("label").setDefaultValue(i.Z.getLabel("EclairNgChartOptions","high")),e}}},56504:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(32029),s=r(52285);class n extends s{getDefaultChartProperties(){const e=super.getDefaultChartProperties();return e.addProperty(i.BANDS.buildProperty()),e.addProperty(i.TRELLIS.buildProperty(this._getPreferredTrellisSize())),e.addProperty(i.MARKERS.buildProperty()),e}}},16479:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(8429),s=r(74179),n=r(32029),o=r(21456),a=r(56386);class l extends o{getDefaultChartProperties(){const e=super.getDefaultChartProperties();return e.addProperty(a.NAMED_SECTION.of("colors").setLabel(i.Z.getLabel("EclairNgChartOptions","bandColors")).setItems([a.COLOR.of("lowColor1","#1674D9").setClassName("sideBySide left").setLabel(i.Z.getLabel("EclairNgChartOptions","lowBand")).setTooltip(i.Z.getLabel("EclairNgChartOptions","ratingLowBandTooltip")),a.COLOR.of("highColor1","#1674D9").setClassName("sideBySide right").setLabel(i.Z.getLabel("EclairNgChartOptions","highBand")).setDropdownType(s.DropdownRight).setTooltip(i.Z.getLabel("EclairNgChartOptions","ratingHighBandTooltip"))])),e.addProperty(n.TRELLIS.buildProperty(this._getPreferredTrellisSize())),e}}},89120:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var i=r(96486),s=r(49655),n=r(83993),o=r(1806),a=r(87418),l=r(93367),u=r(73414),d=r(18001),c=r(40651),h=r(90456),p=r(86866),g=r(21891),m=r(67427),_=r(7302),f=r(99689);const y=new Map([[f.Z.RESULT,d.Z.RESULT_BINDING],[f.Z.SELECTION,d.Z.SELECTION_BINDING]]);class b{constructor(e,t,r=new Map){this._dashboardMetadata=e,this._dependencyGraph=new s.Z,this._dashboardComponentsLensIds=new Set;for(const e of this._dashboardMetadata.getLenses())this._dependencyGraph.addNode(e.getId(),e);r.forEach(((e,r)=>{this._dependencyGraph.addNode(r,new b(e,t));for(const t of e.getLenses()){const e=(0,h.$)(t.getId(),r);this._dashboardComponentsLensIds.add(e),this._dependencyGraph.addNode(e,t)}}));for(const e of this._dashboardMetadata.getWidgets()){const t=this._getWidgetNodeId(e.getId());this._dependencyGraph.addNode(t,e)}for(const e of this._dashboardMetadata.getWidgets()){const i=this._getWidgetNodeId(e.getId()),s=g.Z.fromCode(e.getType()).getDefinition(),o=s.getUsedLensId(e);if(e.getType()===g.Z.COMPONENT.getCode()){const t=e.getParameter("source");if(t&&t.type===c.Z.COMPONENT.getCode()&&t.name){const e=(0,n.Oz)(t.name,t.namespace);this._addEdgeToComponent(i,e,r)}const o=s.getParameterAttributeReferences(e.getParameters());for(const e of o)this._addEdgeToLens(i,e.getStepId(),e.getDependencyEdgeType())}null!=o&&this._addEdgeToLens(i,o,d.Z.ATTACHED_STEP);const a=s.getDynamicReferences(e.getParameters(),e.getDashboardMetadata());for(const e of a)this._addDynamicEdges(i,e);const l=t.getNewTraverser();let u;try{u=l.getBoundReferences(e.getParameters())}catch(e){u=[]}for(const e of u)this._addBindingEdges(i,e);for(const t of this._dashboardMetadata.getLayouts()){const r=t.getFirstWidgetLayout(e.getId());if(!r)continue;let s;try{s=l.getBoundReferences(r.getWidgetStyleJson())}catch(e){s=[]}s.forEach((e=>{this._addBindingEdges(i,e)}))}}for(const e of this._dashboardMetadata.getLenses()){const r=p.Z.fromCode(e.getType()).getDefinition();this._addBindingEdges(e.getId(),r.getBoundQueryReferences(t,e).concat(r.getBoundStartValueReferences(t,e)))}}getLensIdsToStart(e,t,r,i){return this.getReferencedLensIds(this._dashboardMetadata.getPage(e,t).getSortedWidgetIds(),r,i)}getReferencedLensIds(e,t,r,i=!1){const s=this._getDescendantLenses(e).map((e=>e.getId())),n=new Set(s);return new _.Z(this._dashboardMetadata,t,r).extract().forEach(((e,t)=>{e.isEmpty()||n.add(t)})),i&&this.getReferencedComponents(e).forEach((e=>{const t=e.getValue(),r=e.getId();t.getActiveLenses().forEach((e=>n.add((0,h.$)(e.getId(),r))))})),Array.from(n)}getReferencedComponents(e){const t=e.map(this._getWidgetNodeId.bind(this));return this._getDescendants(t,b)}getUsedLensIds(e,t){return this._getDescendantLenses(this._dashboardMetadata.getPage(e,t).getSortedWidgetIds()).map((e=>e.getId()))}getUnusedLensIds(e,t){return(0,i.difference)(this._dashboardMetadata.getLensIds(),this.getUsedLensIds(e,t))}getActiveLenses(){if(this._activeLenses)return this._activeLenses;const e=this._dashboardMetadata.getWidgetIds().map(this._getWidgetNodeId.bind(this));return this._activeLenses=this._getDescendants(e,o).reduce(((e,t)=>(this._dashboardComponentsLensIds.has(t.getId())||e.push(this._dashboardMetadata.getLens(t.getId())),e)),[]),this._activeLenses}getDependentWidgetIds(e){return this._getDependents((0,i.castArray)(e),a.Z).map((e=>e.getValue().getId()))}getDependentLensIds(e,t){return this._getDependents((0,i.castArray)(e),o,t).map((e=>e.getValue().getId()))}getDescendantLensIds(e){return this._dependencyGraph.getDescendants([e]).map((e=>e.getId()))}getDirectDependencies(e){const t=this._dependencyGraph.getNode(e),r=new Map;return t.getDestinationEdges().forEach((e=>{r.set(e.getDestination().getId(),e.getValue())})),r}getWidgetLazyLoadDependencies(e,t){const r=this._dependencyGraph.getNode(this._getWidgetNodeId(e)),i=new Map;return r.getDestinationEdges().forEach((e=>{if(m.Z.isWidgetRuntimeId(e.getDestination().getId())){if(t){this._dependencyGraph.getNode(e.getDestination().getId()).getDestinationEdges().filter((e=>e.getDestination().getValue()instanceof o&&Array.from(e.getValue()).some((e=>e!==d.Z.LAZY_LOAD)))).forEach((e=>{m.Z.isWidgetRuntimeId(e.getDestination().getId())||i.set(e.getDestination().getId(),e.getValue())}))}}else Array.from(e.getValue()).some((e=>e===d.Z.LAZY_LOAD))&&i.set(e.getDestination().getId(),e.getValue())})),i}_addEdgeToLens(e,t,r){if(!this._dashboardMetadata.hasLens(t)&&!this._dashboardComponentsLensIds.has(t))return;const i=new Set([r]),s=this._dependencyGraph.getNode(e).getDestinationEdge(t);s&&(s.getValue().forEach(i.add.bind(i)),this._dependencyGraph.deleteEdge(e,t)),this._dependencyGraph.addEdge(e,t,i)}_addEdgeToWidget(e,t,r){if(!this._dashboardMetadata.hasWidget(t))return;const i=new Set([r]),s=this._getWidgetNodeId(t),n=this._dependencyGraph.getNode(e).getDestinationEdge(s);n&&(n.getValue().forEach(i.add.bind(i)),this._dependencyGraph.deleteEdge(e,s)),this._dependencyGraph.addEdge(e,s,i)}_addEdgeToComponent(e,t,r){r.has(t)&&this._dependencyGraph.addEdge(e,t,new Set([d.Z.ATTACHED_COMPONENT]))}_addBindingEdges(e,t){t.forEach((t=>{const r=t.getType()||t.getParentStatement().getMethod().getMessageType(),i=y.get(r);if(!i)throw new Error(`No dependency type specified for message type '${r.name}'.`);this._addEdgeToLens(e,t.getStep(),i)}))}_addDynamicEdges(e,t){if(!t.edgeType)throw new Error(`No dependency type specified for message type '${t.sourceType}'.`);t instanceof u.Z?this._addEdgeToWidget(e,t.id,t.edgeType):t instanceof l.Z&&this._addEdgeToLens(e,t.id,t.edgeType)}_getDependents(e,t,r){return this._dependencyGraph.getAncestors(e,r).filter((e=>e.getValue()instanceof t))}_getDescendants(e,t,r){return this._dependencyGraph.getDescendants(e,r).filter((e=>e.getValue()instanceof t))}_getDescendantLenses(e){return this._getDescendants(e.map(this._getWidgetNodeId.bind(this)),o,{filterEdges:e=>e.filter((e=>Array.from(e.getValue()).some((e=>e!==d.Z.LAZY_LOAD))))})}_getWidgetNodeId(e){return m.Z.getWidgetRuntimeId(e)}}},37724:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(96486),s=r(90456),n=r(76950),o=r(99689);const a=/\[([^\[\]]*)\]/g;class l{static getResolvedWidgetParams(e,t,r,s=0){if(null!=e?.displayTemplate)return"string"==typeof e||e instanceof Array?[""]:e.values&&"object"==typeof e.values&&!(0,i.isEmpty)(e.values)?this._resolveDynamic(e,t,r,s):(0,i.isEmpty)(e.values)?[e.displayTemplate??""]:[""]}static _resolveDynamic(e,t,r,i=0){const s=e.displayTemplate.split(a),n=this._getResolvedValueMap(e,t,r,i);for(let e=1;e<s.length;e+=2){const t=n.has(s[e])?n.get(s[e]):void 0;s[e]=null!=t?t:`[${s[e]}]`}return s}static _getResolvedValueMap(e,t,r,i=0){const a=new Map;return e.values&&Object.keys(e.values).forEach((l=>{const u=e.values[l],d={};t.forEach((e=>{if(e.getPublisherId()===(0,s.$)(u.step,r)&&e.getType()===o.Z.fromName(u.sourceType.toUpperCase())){const t=e.getData(),r=e.getMetadata();if(t&&r&&t.length>i){const s=u.field,o=u.compact;d.value=n.formatColumnValue(r.getColumn(s),t[i][s],e.getFormatter(),o);const a=e.getFormatter()?.getConditionalFormattingStyles(t[i],r.getColumn(s));d.color=a?.color,d.backgroundColor=a?.backgroundColor}}})),a.set(l,d)})),a}}},61760:(e,t,r)=>{"use strict";r.d(t,{Jn:()=>a,ZP:()=>u,nf:()=>l});var i=r(96486),s=r(90456),n=r(99689);const o="\\[([^\\[\\]]*)\\]",a=new RegExp(o,"g"),l=new RegExp(`^${o}$`);class u{static getResolvedValueMap(e,t,r,o=0,a){const l=new Map;if((0,i.isEmpty)(e))return l;for(const u of Object.keys(e)){const d=e[u];let c={};const h=(0,s.$)(d.step,r),p=n.Z.fromName(d.sourceType.toUpperCase()),g=t.find((e=>e.getPublisherId()===h&&e.getType()===p)),m=g?.getData();if((0,i.isEmpty)(m))(0,i.isEmpty)(m)&&null!=d.noResultsLabel&&(c.value=d.noResultsLabel);else{const e=d.field,t=d.compact,r=m[o][e];"function"==typeof a&&g?c=a(g,e,r,t,o):c.value=r}l.set(u,c)}return l}}},5783:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(90456),n=r(95435),o=r(61760),a=r(99689),l=r(95192);class u{getDynamicDataBlockingTopics(e,t){const r=[],o=new Set;if((0,i.isEmpty)(e)||(0,i.isEmpty)(e.values))return r;const{values:l={}}=e;for(const e of Object.keys(l)){const i=l?.[e]??{},u=i.step,d=i.sourceType;if(null==u||null==d)continue;const c=a.Z.fromName(d.toUpperCase()),h=new n.Z((0,s.$)(u,t),c);o.has(h.getHash())||(o.add(h.getHash()),r.push(h))}return r}resolveDynamicData(e,t,r,s){const n=o.ZP.getResolvedValueMap(t?.values??{},r,s);if((0,i.isEmpty)(n))return;const a=new Map;return n.forEach(((e,t)=>{a.set(t,e.value)})),l.Z.traverse(e,l.Z.replaceTokenWithResolvedValue.bind(this,o.Jn,a),o.Jn)}}},95192:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static traverse(e,t,r,s=[]){if(Array.isArray(e)&&e.length>0)for(let n=0;n<e.length;n++){const o=e[n];i.#Ae(e,o,n,t,r,s)}else if(e&&"object"==typeof e)for(const n of Object.keys(e)){const o=e[n];i.#Ae(e,o,n,t,r,s)}else e&&"string"==typeof e&&i.#Ae(e,e,null,t,r,s);return s}static#Ae(e,t,r,s,n,o){if("string"!=typeof t)return i.traverse(t,s,n,o);{if(null==t.match(n))return;const i=s(t,o);null!=i&&e&&"object"==typeof e&&(e[r]=i)}}static containsToken(e,t,r){const i=Array.from(t.matchAll(e));for(const e of i)r.push(e[1])}static replaceTokenWithResolvedValue(e,t,r,i){if(null==r.match(e))return;let s=r;const n=Array.from(r.matchAll(e));for(const e of n){const r=e[0],n=e[1];if(t.has(n)){const e=String(t.get(n)??"");s=s.replace(r,e)}i.push(n)}return s}}},87945:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(61760),n=r(76950);function o(e,t,r,n,o=0){if(null==e?.richTextContent)return;let d;return"string"==typeof e||Array.isArray(e)||(0,i.isEmpty)(e.richTextContent)?d=[]:Array.isArray(e.richTextContent)&&(d=e.values&&"object"==typeof e.values&&!(0,i.isEmpty)(e.values)?function(e,t,r,i,n){const o=e.richTextContent??{},d=s.ZP.getResolvedValueMap(e?.values??{},t,r,i,u),c=o.reduce(((t,r)=>{if(null==r.insert?.match(s.Jn))return t.push(r),t;const i=[],o=r.insert.split(s.Jn);for(let t=0;t<o.length;t++){const s=o[t];if(t%2!=0)if(d.has(s)){const t=a(d.get(s));l(i,{insert:String(d.get(s).value??""),attributes:{...r.attributes,...t,...n?.get(e.values[s].field)&&{link:s}}})}else l(i,{insert:`[${s}]`,attributes:{...r.attributes}});else s&&l(i,{insert:s,attributes:{...r.attributes}})}return t.push(...i),t}),[]);return c}(e,t,r,o,n):(0,i.isEmpty)(e.values)?e.richTextContent:[]),d}function a(e){const t={};return e?.color&&(t.color=e.color),e?.backgroundColor&&(t.background=e.backgroundColor),t}function l(e,t){const r=e.length-1;e.length>0&&(0,i.isEqual)(e[r].attributes,t.attributes)?e[r].insert=e[r].insert+t.insert:e.push(t)}function u(e,t,r,i,s){const o=e.getData(),a=e.getMetadata(),l=e.getFormatter()?.getConditionalFormattingStyles(o[s],a?.getColumn(t));return{value:n.formatColumnValue(a?.getColumn(t),r,e.getFormatter(),i),color:l?.color,backgroundColor:l?.backgroundColor}}},82206:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(2541),s=r(21891);class n extends i{constructor(e){super(e.getWidgetId()),this._widgetLayout=e,this._setPosition(this._widgetLayout)}getWidgetLayout(){return this._widgetLayout}getWidget(){return this._widgetLayout.getWidget()}getRow(){return this._row}getColumn(){return this._column}getWidth(){return this._width}getHeight(){return this._height}_setPosition(e){this._row=e.getRow(),this._column=e.getColumn(),this._height=e.getRowSpan(),this._width=e.getColumnSpan()}isNewWidget(){return!1}isPlaceholder(){return!1}canDropOnWidget(e){return!1}shouldProxyFitToTarget(e){return!1}isContainer(){return s.Z.fromCode(this.getWidget().getType())===s.Z.CONTAINER}getContainedWidgets(){return this._containedWidgets}setContainedWidgets(e){this._containedWidgets=e}getContainer(){return this._container}setContainer(e){this._container=e}getLayoutName(){return this._widgetLayout.getGridLayout().getName()}getLayoutPageIndex(){return this._widgetLayout.getGridLayoutPage().getIndex()}getPosition(){return{column:this.getColumn(),row:this.getRow(),height:this.getHeight(),width:this.getWidth()}}}},62271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(96486),s=r(90251);class n extends s.Z{#De;#Le;#Me;#Ne;#Oe;#Pe;constructor(e,t,r,i,s,n){super(),this.#De=e,this.#Le=t,this.#Me=r,this.#Ne=i,this.#Oe=s,this.#Pe=n}execute(){return this.#De(this.#Me,this.#Oe??this.#Ne,this.#Pe),()=>{this.#De(this.#Le,this.#Ne,this.#Pe)}}getDescription(){return"Command for switching the layout which can be executed and undone."}}class o extends s.Z{#xe;#Ze;constructor(e,t){super(),this.#xe=e,this.#Ze=t}execute(){const e=this.#xe.map((e=>e.execute()));return()=>{for(let t=e.length-1;t>=0;t--)e[t]()}}getChanges(){let e=super.getChanges();for(const t of this.#xe)e=e.concat(t.getChanges());return e}getDescription(){return this.#Ze}}var a=r(12982);class l{#De;#Fe;#ke;constructor({switchLayoutPage:e,mutateDashboard:t,dashboardDescribe:r}){this.#De=e,this.#Fe=t,this.#ke=r}switchTo({layoutName:e=this._getCurrentLayoutName(),pageIndex:t=this._getCurrentPageIndex(),addToHistory:r=!0}){r?this.#ke.getCommandInvoker().executeCommand(new n(this.#De,this._getCurrentLayoutName(),e,this._getCurrentPageIndex(),t,!1),!0):this.#De(e,t)}switchAndUseMutators(e=this._getCurrentLayoutName(),t=this._getCurrentPageIndex(),r,i,s){const l=[];null!=r&&l.push(new a.Z(this.#Fe,r),new n(this.#De,this._getCurrentLayoutName(),e,this._getCurrentPageIndex(),t,!0)),null!=s&&l.push(s),l.length>0&&this.#ke.getCommandInvoker().executeCommand(new o(l,i),!0)}switchToAvailable(e=this._getCurrentLayoutName(),t=this._getCurrentPageIndex()){this.switchTo({layoutName:e,pageIndex:(0,i.inRange)(t,0,this._getLayout(e).getPages().length)?t:0,addToHistory:!0})}_getCurrentLayoutName(){return this.#ke.getCurrentLayoutName()}_getCurrentPageIndex(){return this.#ke.getCurrentPageIndex()}_getLayout(e){return this.#ke.getMetadataHolder().getMetadata().getLayout(e)}}},3979:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(69370),s=r(42333),n=r(1611);class o extends i.Z{static getType(e,t,r){return e===o.MEASURE_NAME.code?o.MEASURE_NAME:null!=e&&r.getColumn(e)?.getType()===n.Z.MEASURE?o.fromCode(t??o.GRADIENT.code):o.CATEGORICAL}}o.add("NONE","none",new o).add("MEASURE_NAME","measureName",new o).add("BIN",s.MULTI.getCode(),new o).add("GRADIENT",s.GRADIENT.getCode(),new o).add("CATEGORICAL",s.CATEGORIES.getCode(),new o).finish()},5394:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(42799),s=r(50933);class n{constructor({commandInvoker:e,getCurrentLayoutName:t,getCurrentPageIndex:r,metadataHolder:i,runtime:s,isEditMode:n,getComponentRuntime:o,getComponentInitialPageIndex:a,getComponentDescribes:l,getCurrentLayout:u,getSelectedGridLayoutWidgets:d,gridLayoutDelegate:c,bindingsTraverserProvider:h,getRightPanelMode:p,getExtendedHash:g,messageProvider:m}){this._commandInvoker=e,this._getCurrentLayoutName=t,this._getCurrentPageIndex=r,this._metadataHolder=i,this._runtime=s,this._isEditMode=n,this._getComponentRuntime=o,this._getComponentInitialPageIndex=a,this._getCurrentLayout=u,this._getComponentDescribes=l,this._getSelectedGridLayoutWidgets=d,this._gridLayoutDelegate=c,this._bindingsTraverserProvider=h,this._getRightPanelMode=p,this._getExtendedHash=g,this._messageProvider=m}getCommandInvoker(){return this._commandInvoker}getMetadataHolder(){return this._metadataHolder}getCurrentLayoutName(){return this._getCurrentLayoutName()}getCurrentPageIndex(){return this._getCurrentPageIndex()}getLensLastResult(e){return this._runtime.getLens(e).getLastResult()}getRuntimeState(e=!1,t=!0){return new s.Z(this._runtime,i.Z.DATA_SOURCE_STATES_FILTER_ID,this.getComponentDescribes()).getState(e,t)}getRuntime(){return this._runtime}getMessageProvider(){return this._messageProvider}isEditMode(){return this._isEditMode()}getComponentRuntime(e){return this._getComponentRuntime(e)}getComponentInitialPageIndex(e){return this._getComponentInitialPageIndex(e)}getComponentDescribes(){return this._getComponentDescribes()}getCurrentLayout(){return this._getCurrentLayout()}getSelectedGridLayoutWidgets(){return this._getSelectedGridLayoutWidgets()}getGridLayoutDelegate(){return this._gridLayoutDelegate}getBindingsTraverserProvider(){return this._bindingsTraverserProvider}getRightPanelMode(){return this._getRightPanelMode()}getCurrentPageName(){return this.getCurrentLayoutPage().getName()}getCurrentLayoutPage(){return this._getCurrentLayout().getPage(this._getCurrentPageIndex())}getExtendedHash(){return"function"==typeof this._getExtendedHash?this._getExtendedHash():void 0}}},73896:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var i=r(96486),s=r(87219),n=r(31436),o=r(90554),a=r(61506),l=r(18111),u=r(8429),d=r(26499),c=r(51548),h=r(79587),p=r(38588),g=r(90456),m=r(89120);class _{constructor(e){this.unmutateStack=e}}var f=r(67181),y=r(82957);class b extends y.Z{#Be;constructor(e){super(),this.#Be=e}mutate(e){Object.assign(e,this.#Be)}}const C=/[^a-zA-Z0-9]/g;class E{_mutation=0;_uidCounters=new Map;constructor(e,t,r,i=new Map,s=new Map,n,o=!0){this._metadata=e,this._assetExtendedMetadata=t,this._bindingsTraverserProvider=r,this._componentMetadatas=i,this._componentAssetExtendedMetadatas=s,this._parentMetadata=n,this._useImmutableMetadata=o}getMetadata(){return this._metadata}getAssetExtendedMetadata(){return this._assetExtendedMetadata}getBindingsTraverserProvider(){return this._bindingsTraverserProvider}hasComponentMetadata(e){return this._componentMetadatas.has(e)}getComponentMetadata(e){const t=this._componentMetadatas.get(e);if(null==t)throw new Error(`No component "${e}" found.`);return t}getComponentMetadatas(){return this._componentMetadatas}getParentMetadata(){return this._parentMetadata}getComponentIds(){const e=[];return this._componentMetadatas.forEach((t=>{this._metadata.getComponentNames(!1).has(t.getFullyQualifiedName())&&e.push(t.getId())})),e}getComponentWidgets(){const e=new Map;return this._componentMetadatas.forEach((t=>{const r=t.getFullyQualifiedName();t.getWidgetIds().forEach((t=>{e.set((0,g.$)(t,r),{componentFqn:r,widgetId:t})}))})),e}getComponentLenses(){const e=new Map;return this._componentMetadatas.forEach((t=>{const r=t.getFullyQualifiedName();t.getLensIds().forEach((t=>{e.set((0,g.$)(t,r),{componentFqn:r,lensId:t})}))})),e}getComponentAssetExtendedMetadata(e){return this._componentAssetExtendedMetadatas.get(e)}getDependencyAnalyzer(){return this._dependencyAnalyzer||(this._dependencyAnalyzer=new m.Z(this._metadata,this._bindingsTraverserProvider,this._componentMetadatas)),this._dependencyAnalyzer}mutate(e,t,r,a){const l=new n.Z,u={dashboardJson:this._metadata.getJson(),assetExtendedMetadataJson:this._assetExtendedMetadata.getJson(),componentJsons:o.mapObject(Object.fromEntries(this._componentMetadatas.entries()),(e=>e.getJson())),componentXmdJsons:o.mapObject(Object.fromEntries(this._componentAssetExtendedMetadatas.entries()),(e=>e.getJson()))},g=this._useImmutableMetadata?e=>s.Uy(u,e):e=>{const t=(0,o.deepCopy)(u);return e(t),t},m=g((i=>{for(const s of e){if(s instanceof f.Z){const e=s.mutate(i,t);l.push(e)}else s instanceof p.Z?s.mutateLayout(i,r,a,!1):s.mutate(i),l.push(new b(u));this._mutation++}}));m.dashboardJson!==u.dashboardJson&&(this._metadata=new c.Z(m.dashboardJson),delete this._dependencyAnalyzer),m.assetExtendedMetadataJson!==u.assetExtendedMetadataJson&&(this._assetExtendedMetadata=new h.Z(m.assetExtendedMetadataJson)),this._componentMetadatas=new Map;for(const e of Object.keys(m.componentJsons)){const t=m.componentJsons[e];(0,i.isEmpty)(t)||this._componentMetadatas.set(e,new d.Z(t))}this._componentAssetExtendedMetadatas=new Map;for(const e of Object.keys(m.componentXmdJsons)){const t=m.componentXmdJsons[e];(0,i.isEmpty)(t)||this._componentAssetExtendedMetadatas.set(e,new h.Z(t))}return new _(l)}getMutation(){return this._mutation}generateWidgetId(e,t=[]){const r=e.getCode(),i=new Set(t),s=this._getNextUID("widget",r,(e=>{const t=`${r}_${e}`;return this._metadata.hasWidget(t)||i.has(t)}));return`${r}_${s}`}generateStepId(e,t=[]){const r=this._getStepIdPrefix(e).substring(0,20).replace(C,"_"),i=new Set(t),s=this._getNextUID("step",r,(e=>{const t=`${r}_${e}`;return this._metadata.hasLens(t)||i.has(t)}));return`${r}_${s}`}generateDefaultPageLabel(){return u.Z.getLabel("DashboardPage","untitledPageName")}getCurrentFolderId(){return this._metadata.isNew()?this._metadata.getFolderId()??a.Z.get(l).getAppUser().getId():this._metadata.getFolderId()}_getNextUID(e,t,r){const i=`[${e}]${t}`;let s=this._uidCounters.get(i)||1;for(;r(s);)s++;return this._uidCounters.set(i,s+1),s}_getStepIdPrefix(e){if(Object.prototype.hasOwnProperty.call(e,"label")&&e.label)return e.label;switch(e.type){case"aggregateflex":case"aggregate":{const t=e.query;if(t.groups&&t.groups.length)return t.groups.join("_");if(t.measures&&t.measures.length)return t.measures.map((e=>{const t=e[1];return"*"===t?"all":t})).join("_");break}case"staticflex":return"static";case"input":return"input"}return"lens"}}},12982:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(90251);class s extends i.Z{#We;#Ge;#Ze;#Le;#Me;#Ue;constructor(e,t,r,i,s,n=!1){super(),this.#We=e,this.#Ge=t,this.#Ze=r??t.map((e=>e.getDescription())).join("\n"),this.#Le=i,this.#Me=s,this.#Ue=n}execute(){const e=this.#We(this.#Ge,this.#Me,this).drain();return()=>{this.#We(e,this.#Le,this)}}getDescription(){return this.#Ze}shouldContinueUndoRedo(){return this.#Ue}}},10591:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var i=r(96486),s=r(90554),n=r(83993),o=r(42333),a=r(47475),l=r(54180),u=r(56861),d=r(93367),c=r(54370),h=r(40651),p=r(38325),g=r(53018),m=r(86866),_=r(21891),f=r(67427),y=r(1209),b=r(59816),C=r(99689),E=r(95435),S=r(24556),T=r(24617);class I extends p{constructor(e,t,r,i,s){super("__reconciler__"),this._lensProvider=e,this._metadataProvider=t,this._executeMutators=r,this._bindingsTraverserProvider=i,this._idManager=s}getTopics(){return[]}mutate(e,t,r,o,l,u){const d=o.getMetadataHolder(),c=o.getCurrentPageIndex(),p=o.getCurrentLayoutName(),m=o.getCurrentLayout()?.getIndex(),C=d.getMetadata(),E=d.getAssetExtendedMetadata(),S=d.mutate(e,t,m??0,c??0),I=d.getMetadata(),v=["label"];for(const e of C.getWidgets())I.hasWidget(e.getId())||t.removePublisher(f.Z.getWidgetRuntimeId(e.getId()));for(const e of I.getLenses())if(C.hasLens(e.getId())){const r=C.getLens(e.getId());this._areSameParameterTopics(r.getQuery(),e.getQuery(),I)&&this._areSameParameters(C,I)||t.getParameterManager().updateParameters({metadata:I,parameterNames:T.Z.getParametersTokens(e.getQuery())}),r.getType()===e.getType()&&this._areSameLensBindingTopics(r,e)&&this._areSameDynamicDataTopics(r,e)&&this._areSameParameterTopics(r.getQuery(),e.getQuery(),I)?(0,i.isEqual)((0,i.omit)(r.getJson(),v),(0,i.omit)(e.getJson(),v))||(this._sendEmulatedResultIfAny(t,e),this._updateLensState(t,e,r,u)):this._addNewLensToRuntime(t,d,l,e.getId(),!0)}else this._addNewLensToRuntime(t,d,l,e.getId(),!1);for(const e of C.getLenses())I.hasLens(e.getId())||t.removeLens(e.getId());for(const[e,r]of this._getStepIdsOfChangedFields(E,d.getAssetExtendedMetadata(),I))t.getLens(e).refresh({refreshOnceWithoutConditionalFormattingRules:r});for(const e of Array.from(I.getWidgets())){let s,l;const g=e.getLayoutWidget(p,c),m=g.getId();C.hasWidget(m)&&(l=C.getWidget(m),l=l.getLayoutWidget(p,c)),null==u||(0,i.isEqual)(g.getJson(),null!=l?l.getJson():void 0)||u.addChange(a.Type.WIDGET.of(m));const y=f.Z.getWidgetRuntimeId(m);let E=null;if(t.hasSubscriber(y)&&(E=t.getSubscriber(y)),g.hasLens()&&(s=t.getLens(g.getLensId())),!l||this._areSameParameterTopics(l.getJson(),g.getJson(),I)&&this._areSameParameters(C,I)||t.getParameterManager().updateParameters({metadata:I,parameterNames:T.Z.getParametersTokens(g.getJson())}),!E||!l||this._areSameWidgetParamRuntimeTopics(l,g)&&this._areSameParameterTopics(l.getJson(),g.getJson(),I)||t.updateSubscriptions(y),!E||!l||E.hasLens()===g.hasLens()&&this._areSameWidgetBindingTopics(l.getJson(),g.getJson())||(E.getLensConnector()&&E.getLensConnector().callCapabilityMethod(b.LENS_STATE,"resetLensState"),t.removePublisher(y),E=null),null==E&&(E=new f.Z(m,d,o.getCurrentLayoutName(),o.getCurrentPageIndex(),this._bindingsTraverserProvider),t.addPublisher(E),g.hasLens()&&s&&(r.startLens(s.getId()),E.setLensConnector(s.createLensConnector()))),g.hasLens()&&s&&s.callCapabilityMethod(b.LENS_STATE,"updateLensState",[{enablePaging:"table"===e.getType()&&!e.getParameter("pivoted")&&!e.getParameter("disablePaging"),widgetType:g.getType()}]),g.getType()===_.Z.LINK.getCode()){const t=_.Z.LINK.getDefinition().getUsedLensId(e);I.hasLens(t)&&r.startLens(t)}else if(g.getType()===_.Z.COMPONENT.getCode()&&l&&!this._areSameWidgetAttributesTopics(l,e)&&g.getParameter("source")?.type===h.Z.COMPONENT.getCode()){const e=g.getParameter("attributes")??{},r=g.getParameter("source"),i=(0,n.Oz)(r.name,r.namespace);if(d.hasComponentMetadata(i)){const r=d.getComponentMetadata(i);t.getParameterManager().updateAttributes({metadata:r,attributes:e,runtime:t})}}else if(g.getType()===_.Z.COMPONENT.getCode()&&l&&!this._areSameWidgetDynamicAttributesTopics(l,e)&&g.getParameter("source")?.type===h.Z.TABLEAU_DASHBOARD.getCode()){const e=g.getParameter("dynamicAttributes")??{};t.getTableauParameterManager().updateAttributes({componentName:g.getId(),attributes:e,runtime:t})}g.getType()===_.Z.FILTER_PANEL.getCode()&&null==E.getFilterConnector()&&E.setFilterConnector(t.getGlobalFilterManager().createFilterConnector())}const R=s.toMap(I.getDataSourceLinks(),(e=>e.getName()));for(const e of C.getDataSourceLinks()){const t=e.getName();(0,i.has)(R,t)&&R[t].isEqual(e)?delete R[t]:this._runtimeConnector.publish(new g.Z(this.getId(),e.getFields().map(y.Z.fromLinkedField.bind(y.Z)),t))}return this._didGlobalFiltersChange(C,I)&&r.resetGlobalFilters(),S.unmutateStack}_updateLensState(e,t,r,i){const s=e.getLens(t.getId());if(this._wasUseGlobalToggled(r,t)||this._wasReceiveFacetChanged(r,t))e.updateSubscriptions(t.getId()),s.refresh();else{if(this._wasBroadcastFacetingDisabled(r,t))return s.callCapabilityMethod(b.SELECTION,"refireSelectionWithoutFilters");this._wasBroadcastFacetingEnabled(r,t)||this._didSelectModeChange(r,t)?s.callCapabilityMethod(b.SELECTION,"fireDefaultSelections",[!0]):(this._didQueryChange(r,t)&&s.hasValidLastResult()&&s.callCapabilityMethod(b.SELECTION,"removeAllSelections"),null!=i&&i.addChange(a.Type.STEP.of(t.getId())),s.refresh())}}_sendEmulatedResultIfAny(e,t){e.getLens(t.getId()).callCapabilityMethod(b.RESULT_EMULATION,"sendEmulatedResultMessage")}_addNewLensToRuntime(e,t,r,i,s=!1){const n=this._lensProvider.provide(i,t,this._metadataProvider,r,this._executeMutators,this._bindingsTraverserProvider,void 0,this._idManager);e.addLens(n,s),e.startLens(n);for(const r of t.getMetadata().getLens(n.getId()).getAttachedWidgets()){const t=f.Z.getWidgetRuntimeId(r.getId());e.hasSubscriber(t)&&e.getSubscriber(t).setLensConnector(n.createLensConnector())}}_wasUseGlobalToggled(e,t){return e.useGlobal()!==t.useGlobal()}_wasReceiveFacetChanged(e,t){return e.getReceiveFacetMode()!==t.getReceiveFacetMode()||!(0,i.isEqual)(e.getReceiveFacetSteps(),t.getReceiveFacetSteps())}_wasBroadcastFacetingDisabled(e,t){return e.canBroadcastFacet()&&!t.canBroadcastFacet()}_wasBroadcastFacetingEnabled(e,t){return!e.canBroadcastFacet()&&t.canBroadcastFacet()}_didSelectModeChange(e,t){return e.getSelectMode()!==t.getSelectMode()}_didQueryChange(e,t){const r=m.Z.fromCode(t.getType()).getDefinition();return!(0,i.isEqual)(r.getQueryRefreshingParts(e),r.getQueryRefreshingParts(t))}_didGlobalFiltersChange(e,t){const[r,s]=[e,t].map((e=>e.getFilters().concat(S.getLegacyFilters(e)).map((e=>e.getJson()))));return!(0,i.isEqual)(r,s)}_getStepIdsOfChangedFields(e,t,r){const s=new Map,n=(e,t)=>{(0,i.differenceWith)(e,t,i.isEqual).forEach((e=>{const t=l.Z.getStepIdForField(e.field);r.hasLens(t)&&s.set(t,this._hasRawConditionalFormattingRule(e))}))},o=e.getJson(),a=t.getJson();for(const e of u.enums()){const t=e.getCode();n(a[t],o[t]),n(o[t],a[t])}return s}_hasRawConditionalFormattingRule(e){return!!e.conditionalFormatting&&Object.values(e.conditionalFormatting).some((e=>o.getEnumByCode(e.type)===o.RAW))}_areSameLensBindingTopics(e,t){const[r,s]=[e,t].map((e=>new Set(m.Z.fromCode(e.getType()).getDefinition().getBoundQueryReferences(this._bindingsTraverserProvider,e).map((e=>e.toString())))));return(0,i.isEqual)(r,s)}_areSameWidgetBindingTopics(e,t){const[r,s]=[e,t].map((e=>{let t;try{t=this._bindingsTraverserProvider.getNewTraverser().getRuntimeTopics(e)}catch(e){t=[]}return new Set(t.map((e=>e.getHash())))}));return(0,i.isEqual)(r,s)}_areSameParameterTopics(e,t,r){const[s,n]=[e,t].map((e=>new Set(T.Z.getParametersTopics(r,e).map((e=>e.getHash())))));return(0,i.isEqual)(s,n)}_areSameParameters(e,t){return(0,i.isEqual)(e.getParameters(),t.getParameters())}_areSameWidgetParamRuntimeTopics(e,t){const[r,s]=[e,t].map((e=>{let t=_.Z.fromCode(e.getType()).getDefinition().getDynamicReferences(e.getParameters(),e.getDashboardMetadata());t=t.filter((e=>e instanceof d.Z)),t=(0,i.uniqBy)(t,(e=>e.identifier));const r=t.map((e=>new E.Z(e.id,C.Z.fromName(e.sourceType.toUpperCase()))));return new Set(r.map((e=>e.getHash())))}));return(0,i.isEqual)(r,s)}_areSameDynamicDataTopics(e,t){const r=new Set(m.Z.fromCode(e.getType()).getDefinition().getDynamicValueQueryReferences(e).map((e=>e.toString()))),s=new Set(m.Z.fromCode(t.getType()).getDefinition().getDynamicValueQueryReferences(t).map((e=>e.toString())));return(0,i.isEqual)(r,s)}_areSameWidgetAttributesTopics(e,t){const[r,s]=[e,t].map((e=>{const t=e.getParameter("attributes")??{};return new Set(Object.keys(t).map((e=>new c.Z(e,t[e]).getHash())))}));return(0,i.isEqual)(r,s)}_areSameWidgetDynamicAttributesTopics(e,t){const[r,s]=[e,t].map((e=>{const t=e.getParameter("dynamicAttributes")??{};return new Set(Object.keys(t).map((e=>new c.Z(e,t[e]).getHash())))}));return(0,i.isEqual)(r,s)}}},94170:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(90554),n=r(86866),o=r(21891),a=r(53466);const l=["exploreLink","step"];class u{canClip(e,t,r,i){const s=n.Z.fromCode(e.getType());return t.getDateVersion()===r||s!==n.Z.SAQL&&!(s===n.Z.AGGREGATE_WITH_NEW_BINDINGS&&!i)}scrubStepParameters(e,t){const r=(0,i.omit)((0,s.deepCopy)(e),["selectMode","broadcastFacet","receiveFacetSource","isFacet"]);if(null!=r.visualizationParameters&&delete r.visualizationParameters.visualizationType,null!=t){null!=r.visualizationParameters?r.visualizationParameters.type=t.type:r.visualizationParameters={type:t.type};for(const e of l)delete t.parameters[e];r.visualizationParameters.parameters=(0,s.deepCopy)(t.parameters)}return n.Z.setDefaults(r),r}setPreviousParameters(e,t){const r=n.Z.fromCode(e.type).getDefaultParameters(),o=(0,i.pickBy)(t,((e,t)=>(0,i.has)(r,t)));(0,s.deepExtend)(e,o)}getMutatorsToAttachStepToWidget(e,t,r){const s=t.getType(),n=o.Z.fromCode(s).getDefinition();return[n.getPropertiesMutatorAfterQueryUpdate(t,e,null!=r?r:s===e.getLensMetadata().getWidgetType()&&(!n.isPlaceholder(t)||(0,i.isEmpty)(t.getParameters()))),new a.Z(t.getId(),e.getLensMetadata().getId())]}}},47688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var i=r(96486),s=r(90554),n=r(40651),o=r(63594),a=r(99212),l=r(72713),u=r(82370),d=r(86866),c=r(21891),h=r(79070),p=r(41556);class g extends u{constructor({lensId:e,lensName:t,folderId:r,stepId:i,stepJson:s,widgetJson:n,queryJson:o,finalQuery:a,datasetMetadatas:l,lastResultMetadata:u,assetExtendedMetadata:d,dateVersion:c}){super(),this._lensId=e,this._lensName=t,this._folderId=r,this._stepId=i,this._stepJson=s,this._widgetJson=n,this._queryJson=o,this._finalQuery=a,this._datasetMetadatas=l,this._lastResultMetadata=u,this._assetExtendedMetadata=d,this._dateVersion=c}buildLensJson(){const e=super.buildLensJson();return e.permissions=new p.Permissions(!0,!0,!0).build(),e}_getLensAssetId(){return this._lensId}_getStepId(){const e=d.Z.fromCode(this._stepJson.type);return null==this._queryJson.pigql||(0,i.isEmpty)(this._queryJson.pigql)?e===d.Z.AGGREGATE||e===d.Z.GRAIN?d.Z.AGGREGATE_WITH_NEW_BINDINGS.getCode():e.getCode():d.Z.SAQL.getCode()}_getLensJson(){return{id:this._getLensAssetId(),type:n.Z.LENS.getCode(),label:this._lensName,dateVersion:this._dateVersion.getCode(),folder:{id:this._folderId}}}_getVisualizationType(){return this._getVisualizationTypeFromWidget(this._stepJson,this._widgetJson)}_getDashboardStepId(){return this._stepId}_getDatasetMetadatas(){return this._datasetMetadatas}_getAssetExtendedMetadata(){return this._assetExtendedMetadata}_getAssetDateVersion(){return this._dateVersion}_isCompoundStrFilter(e){return Array.isArray(e)&&l.isCompoundStr(e[0])}_hasCompoundStrFilter(e){return Array.isArray(e.filters)&&e.filters.some(this._isCompoundStrFilter.bind(this))}_dropCompoundStrFilters(e){if(Array.isArray(e.filters))for(let t=0;t<e.filters.length;t++)this._isCompoundStrFilter(e.filters[t])&&e.filters.splice(t,1)}_buildLensState(){const e=(0,s.deepCopy)(this._stepJson),t=this._getStepId(),r=d.Z.fromCode(this._stepJson.type);let n;e.type=t,r===d.Z.SAQL?this._updateSaqlStep(e,this._datasetMetadatas,this._lastResultMetadata,this._finalQuery):r===d.Z.SOQL||r===d.Z.SQL?e.query=this._queryJson:null==this._queryJson.pigql||(0,i.isEmpty)(this._queryJson.pigql)?(e.query=this._queryJson,!e.query.sources&&this._hasCompoundStrFilter(e.query)&&(e.query=(0,s.deepCopy)(e.query),this._dropCompoundStrFilters(e.query)),this._getVisualizationType()!==o.COMPARISON_TABLE||e.query.sources||(e.query=a.Z.makeColumnQuery(e.query))):this._updatePigqlStep(e,this._queryJson,this._datasetMetadatas,this._lastResultMetadata,this._finalQuery),r!==d.Z.AGGREGATE&&r!==d.Z.GRAIN||null==this._stepJson.isFacet||delete e.isFacet,null==e.visualizationParameters&&(e.visualizationParameters={parameters:{},type:"",visualizationType:""}),e.visualizationParameters.visualizationType=this._getVisualizationType().getCode(),delete e.visualizationParameters.parameters,delete e.visualizationParameters.type,e.start&&delete e.start,null!=e.query.sources&&delete e.query.filters,delete e.values,r===d.Z.GRAIN?null!=this._widgetJson&&this._widgetJson?.type===c.Z.TABLE.getCode()?n=(0,s.deepCopy)(this._widgetJson):(n={type:c.Z.TABLE.getCode()},null!=this._stepJson.visualizationParameters&&this._stepJson.visualizationParameters.parameters&&(n.parameters=(0,s.deepCopy)(this._stepJson.visualizationParameters.parameters))):null==this._widgetJson||this._widgetJson?.type!==c.Z.CHART.getCode()&&this._widgetJson?.type!==c.Z.TABLE.getCode()?n=null!=this._stepJson.visualizationParameters&&this._stepJson.visualizationParameters.parameters?{type:this._stepJson.visualizationParameters.type,parameters:(0,s.deepCopy)(this._stepJson.visualizationParameters.parameters)}:this._getVisualizationType()===o.COMPARISON_TABLE?{type:c.Z.TABLE.getCode()}:this._getVisualizationType()===o.PIVOT_TABLE?{type:c.Z.TABLE.getCode(),parameters:{pivoted:!0}}:{type:c.Z.CHART.getCode(),parameters:{visualizationType:this._getVisualizationType().getCode()}}:(c.Z.fromCode(this._widgetJson.type).getDefinition().constructFromResolvedParams(this._widgetJson),n=(0,s.deepCopy)(this._widgetJson)),null==n.parameters&&(n.parameters={}),n.parameters.step=t;const l={steps:{},widgets:{}};return l.steps[t]=e,l.widgets[h.Z.buildWidgetId(t,n.type)]=n,l}}},79070:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var i=r(79646),s=r(57244),n=r(63594),o=r(86866),a=r(21891);const l=[0,0,12,9],u=[.5,10,11,39],d=[.5,10,1,39],c=[2,11,9,37],h=[.5,38,1,11],p=[.5,10,1,27],g=[.5,1,11,48],m=[.5,1,1,48],_=[1.5,2,5,46],f=[7,2,4,46],y="_edit";class b extends i.Z{static TABLE_COLUMN_EDIT_PANEL_SUFFIX="_editColumn";constructor(e,t,r,i){super(),this.step=e,this.visualizationWidgetType=t,this.isEdit=r,this._layoutWidgets=i}static buildWidgetId(e,t){return e+"_"+t}static getLayout(e,t,r){const i=n.getEnumByCode(e);return t?r===o.Z.SOQL.code?i.isTable()?b.SOQL_TABLE:b.SOQL_CHART:r===o.Z.SQL.code?i.isTable()?b.SQL_TABLE:b.SQL_CHART:r===o.Z.CDP.code?i.isTable()?b.CDP_TABLE:b.CDP_CHART:i.isTable()?b.SAQL_TABLE:b.SAQL_CHART:i.isTable()?b.TABLE:b.CHART}static getQueryModeLayout(e){switch(e){case o.Z.AGGREGATE_WITH_NEW_BINDINGS:return b.AGGFLEXEDIT;case o.Z.SQL:return b.SQLEDIT;case o.Z.SOQL:return b.SOQLEDIT;case o.Z.CDP:return b.CDPEDIT;default:return b.SAQLEDIT}}static getChartLayouts(){return[b.CHART,b.SAQL_CHART,b.SOQL_CHART,b.SQL_CHART,b.CDP_CHART]}getVisualizationWidgetId(){return b.buildWidgetId(this.step.code,this.visualizationWidgetType.code)}getWidgets(e){const t=[];let r=this._layoutWidgets;const i=new Set([b.CHART.name,b.TABLE.name,b.SAQL_CHART.name,b.SAQL_TABLE.name]);s.Z.has(s.Z.ORG_HAS_WAVE_NLQ_ENABLED)&&i.has(this.name)&&(r=this._updateExplorerWidgetDimensions(r));for(const i of r)(null==e||i.widgetType===e&&i.id===e.code)&&(i.widgetType!==a.Z.EXPLORER_NLQ||s.Z.has(s.Z.ORG_HAS_WAVE_NLQ_ENABLED))&&t.push({id:b.buildWidgetId(this.step.code,i.id),widgetType:i.widgetType,dimension:i.dimension});return t}getWidgetId(e){for(const t of this._layoutWidgets)if(e===t.widgetType)return b.buildWidgetId(this.step.code,t.id);return null}getColumnMapSupportedWidgetIds(){return this._getWidgetIdsByType([a.Z.EXPLORER_QUERY_BUILDER,a.Z.CHART,a.Z.MODE_SWITCHER])}getColumnsSupportedWidgetIds(){return this._getWidgetIdsByType([a.Z.EXPLORER_QUERY_BUILDER,this.visualizationWidgetType,a.Z.MODE_SWITCHER])}getChartSupportedWidgetIds(){return this._getWidgetIdsByType([a.Z.EXPLORER_QUERY_BUILDER,a.Z.CHART,a.Z.MODE_SWITCHER])}_getWidgetIdsByType(e){return e.map((e=>this.getWidgetId(e))).filter(Boolean)}_updateExplorerWidgetDimensions(e){for(const t of e)t.widgetType===a.Z.MODE_SWITCHER&&(t.dimension=h);return e}}b.add("CHART",new b(o.Z.AGGREGATE_WITH_NEW_BINDINGS,a.Z.CHART,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.CHART.code,widgetType:a.Z.CHART,dimension:c},{id:a.Z.EXPLORER_NLQ.code,widgetType:a.Z.EXPLORER_NLQ,dimension:p}])).add("TABLE",new b(o.Z.AGGREGATE_WITH_NEW_BINDINGS,a.Z.TABLE,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.TABLE.code,widgetType:a.Z.TABLE,dimension:c},{id:a.Z.EXPLORER_NLQ.code,widgetType:a.Z.EXPLORER_NLQ,dimension:p}])).add("TABLE_COLUMN_EDIT_PANEL",new b(o.Z.AGGREGATE_WITH_NEW_BINDINGS,a.Z.TABLE,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:[.5,1,11,48]},{id:a.Z.TABLE.code+b.TABLE_COLUMN_EDIT_PANEL_SUFFIX,widgetType:a.Z.TABLE,dimension:[1,2,10,46]}])).add("AGGFLEXEDIT",new b(o.Z.AGGREGATE_WITH_NEW_BINDINGS,a.Z.QUERY_EDITOR,!0,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:g},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:m},{id:a.Z.QUERY_EDITOR.code,widgetType:a.Z.QUERY_EDITOR,dimension:_},{id:a.Z.TABLE.code+y,widgetType:a.Z.TABLE,dimension:f}])).add("SAQLEDIT",new b(o.Z.SAQL,a.Z.QUERY_EDITOR,!0,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:g},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:m},{id:a.Z.QUERY_EDITOR.code,widgetType:a.Z.QUERY_EDITOR,dimension:_},{id:a.Z.TABLE.code+y,widgetType:a.Z.TABLE,dimension:f}])).add("SAQL_CHART",new b(o.Z.SAQL,a.Z.CHART,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.CHART.code,widgetType:a.Z.CHART,dimension:c},{id:a.Z.EXPLORER_NLQ.code,widgetType:a.Z.EXPLORER_NLQ,dimension:p}])).add("SAQL_TABLE",new b(o.Z.SAQL,a.Z.TABLE,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.TABLE.code,widgetType:a.Z.TABLE,dimension:c},{id:a.Z.EXPLORER_NLQ.code,widgetType:a.Z.EXPLORER_NLQ,dimension:p}])).add("SOQLEDIT",new b(o.Z.SOQL,a.Z.QUERY_EDITOR,!0,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:g},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:m},{id:a.Z.QUERY_EDITOR.code,widgetType:a.Z.QUERY_EDITOR,dimension:_},{id:a.Z.TABLE.code+y,widgetType:a.Z.TABLE,dimension:f}])).add("SOQL_CHART",new b(o.Z.SOQL,a.Z.CHART,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.CHART.code,widgetType:a.Z.CHART,dimension:c}])).add("SOQL_TABLE",new b(o.Z.SOQL,a.Z.TABLE,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.TABLE.code,widgetType:a.Z.TABLE,dimension:c}])).add("SQLEDIT",new b(o.Z.SQL,a.Z.QUERY_EDITOR,!0,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:g},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:m},{id:a.Z.QUERY_EDITOR.code,widgetType:a.Z.QUERY_EDITOR,dimension:_},{id:a.Z.TABLE.code+y,widgetType:a.Z.TABLE,dimension:f}])).add("SQL_CHART",new b(o.Z.SQL,a.Z.CHART,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.CHART.code,widgetType:a.Z.CHART,dimension:c}])).add("SQL_TABLE",new b(o.Z.SQL,a.Z.TABLE,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.TABLE.code,widgetType:a.Z.TABLE,dimension:c}])).add("CDPEDIT",new b(o.Z.CDP,a.Z.QUERY_EDITOR,!0,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:g},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:m},{id:a.Z.QUERY_EDITOR.code,widgetType:a.Z.QUERY_EDITOR,dimension:_},{id:a.Z.TABLE.code+y,widgetType:a.Z.TABLE,dimension:f}])).add("CDP_CHART",new b(o.Z.CDP,a.Z.CHART,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.CHART.code,widgetType:a.Z.CHART,dimension:c}])).add("CDP_TABLE",new b(o.Z.CDP,a.Z.TABLE,!1,[{id:a.Z.CONTAINER.code,widgetType:a.Z.CONTAINER,dimension:u},{id:a.Z.MODE_SWITCHER.code,widgetType:a.Z.MODE_SWITCHER,dimension:d},{id:a.Z.EXPLORER_QUERY_BUILDER.code,widgetType:a.Z.EXPLORER_QUERY_BUILDER,dimension:l},{id:a.Z.TABLE.code,widgetType:a.Z.TABLE,dimension:c}])).finish()},62373:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(83993),s=r(51548),n=r(86060),o=r(82957),a=r(86866),l=r(66462);class u extends o.Z{constructor(e,t){super(),this._isAdd=e,this._datasetJsons=t}mutate(e){for(const t of this._datasetJsons){const r=new s.Z(e.dashboardJson),o=r.getDatasetsJson(),u=(0,i.IO)(t);if(this._isAdd)null==r.getDatasetReferenceByName(u)&&o.push(t);else{let e=!0;for(const t of r.getLenses()){const r=a.Z.fromCode(t.getType());if(r.getDefinition().hasLegacyDatasetsArray){for(const r of t.getDatasets())if(r.getFullyQualifiedName()===u){e=!1;break}}else if(r===a.Z.SAQL){if(n.Z.getDatasetIdentifiers(t.getQuery()).has(u))return}else if(r===a.Z.SQL){if(new l.Z(t.getQuery()).getTableNames().has(u))return}if(!e)break}for(const t of r.getFilters())if(t.getDataset().getFullyQualifiedName()===u){e=!1;break}if(!e)continue;for(const[e,t]of Array.from(r.getDatasetReferences()).entries())if(t.getFullyQualifiedName()===u){o.splice(e,1);break}}}}}},82957:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(33581);class s extends i.Z{}},89769:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(8429),n=r(38588),o=r(95072);class a extends n.Z{constructor(e,t,r=!1,i=!0){super(e,i),this._values=t,this._override=r}mutateLayout(e,t,r,s=!1){const n=this._getWidgetJsonForLayout(e.dashboardJson,t,r,s),a=new o.Z;if(this._override)n.parameters=this._values;else for(const e of Object.keys(this._values)){let t=this._values[e];const r=n.parameters[e];i.isString(r)&&"text"!==e&&a.isBinding(r)&&(t=n.parameters[e]),i.isUndefined(t)?delete n.parameters[e]:n.parameters[e]=t}}getDescription(){return s.Z.getLabel("DashboardMutators","widgetPropertiesMutated")}getValues(){return this._values}}},83458:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(82957);class s extends i.Z{constructor(e){super(),this.xmdMutator=e}mutate(e){this.xmdMutator.mutate(e.assetExtendedMetadataJson)}}},67181:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(82957);class s extends i.Z{mutate(e,t){throw new Error("Not implemented.")}}},8357:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i=r(96486),s=r(8429),n=r(44110),o=r(51548),a=r(11715),l=r(15523),u=r(12107),d=r(82957),c=r(44426);class h extends d.Z{constructor(e,t,r,i,s){super(),this._filterValue=e[0],this._reportResultUtil=t,this._reportResultTransformService=(0,n.Z)(),this._reportMetadata=r,this._onErrorCallback=i,this._error=!1,this._oldHighlight=s}mutate(e){return this._mutate(e.dashboardJson,new o.Z(e.dashboardJson))}_mutate(e,t){const r=this._getChartFilters();let s,n=[];for(const e of c.getStepIds()){const i=t.getLens(e).getJson().query;e!==c.CHART.getValue()&&(n=i.chartFilters,i.chartFilters=r,this._oldHighlight?i.highlight=this._oldHighlight:(s=i.highlight,i.highlight=void 0))}return t.getWidget("chart").getParameters()._selection=i.isEmpty(r)?r:[this._filterValue],new h([n],this._reportResultUtil,this._reportMetadata,this._onErrorCallback,s)}_getChartFilters(){if(i.isEmpty(this._filterValue))return[];let e=[];const t=this._filterValue.labelsValuesFromSmallGroupingInOther;for(const r of Object.keys(this._filterValue))if(this._isGrouping(r)){if(!this._isFilterable(r))return this._showNotification(s.Z.getLabel("reportBuilder","ChartNotFilterable")),[];{const s=r;let n;if(n=t?this._getOthersFilter(s,t.otherGroupValues,t.otherGroupLabels):this._getFilter(s,this._filterValue[r]),this._error)return[];e=i.concat(e,n)}}return e}_getGroupingColumnInfo(e){return this._reportMetadata.getReportExtendedMetadata().getGroupingColumnInfo(e)}_isGrouping(e){return void 0!==this._getGroupingColumnInfo(e)}_isFilterable(e){return this._getGroupingColumnInfo(e).filterable}_isDateType(e){return"date"===e||"dateTime"===e||"datetime"===e}_getDataType(e){return this._getGroupingColumnInfo(e).dataType}_getFilterValue(e,t,r){return u.getEnumByCode(e).getFilterValue(JSON.parse(t).groupValue,r)}_getFilter(e,t){const r=this._getDataType(e);let i;if(this._isDateType(r)){const r=this._getGroupingInfo(e);if(!r)return this._showNotification(s.Z.getLabel("reportBuilder","chartNotFilterable")),[];const n=r.dateGranularity;if("None"!==n&&"Day"!==n){let r;i=JSON.parse(t).groupValue;const o=l.Z.getEnumByCode(n);if(!o)return this._showNotification(s.Z.getLabel("reportBuilder","chartNotFilterable")),[];if(r=o.createDateRangeFilters(e,i),r)return[this._createFilter(e,r[0].operator,r[0].chartSelectionValue),this._createFilter(e,r[1].operator,r[1].chartSelectionValue)]}}return i=this._getFilterValue(r,t,this._reportResultUtil.getGroupingValueLabelsMappings()[e][t]),[this._createFilter(e,"equals",i)]}_getOthersFilter(e,t,r){const n=this._getDataType(e);if(this._isDateType(n)){const t=this._getGroupingInfo(e);if(!t||"None"!==t.dateGranularity&&"Day"!==t.dateGranularity)return this._showNotification(s.Z.getLabel("reportBuilder","chartNotFilterable")),[]}let o=[];for(let e=0;e<t.length;e++)o=i.concat(o,this._getFilterValue(n,t[e],r[e]));return[this._createFilter(e,"equals",o)]}_createFilter(e,t,r){return{type:a.CHART.getName(),filter:{column:e,operator:t,value:this._reportResultTransformService.escapeCommas(r).join(", ")}}}_getGroupingInfo(e){const t=this._reportMetadata.getGroupingColumns(),r=i.findIndex(t,(t=>t.name===e));return-1!==r?t[r]:null}_showNotification(e){this._onErrorCallback(e),this._error=!0}}},59017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(1611),s=r(38588);class n extends s.Z{}class o extends n{constructor(e,t,r){super(e),this._data=t,this._resultsMetadata=r}_getDefaultMarkerProps(){const e=this._resultsMetadata.getColumns(i.Z.DIMENSION),t=this._resultsMetadata.getColumns(i.Z.MEASURE);return{backgroundColor:"#193F61",borderColor:"#193F61",dimensions:e.map((e=>e.getName())),measures:t.map((e=>e.getName())),showDimensions:!0,showMeasures:!0,defaultShow:!0,isBlinking:!1,customText:[]}}mutateLayout(e,t,r,i=!1){const s=this._getWidgetJsonForLayout(e.dashboardJson,t,r,i);s.parameters.markers??=[],this._data&&s.parameters.markers.push({row:this._data.row,measure:this._data.measure,properties:this._getDefaultMarkerProps()})}}},3475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(90554),s=r(38588),n=r(19422),o=r(89769),a=r(13894);class l extends s.Z{constructor(e,t={},r){super(e),this._values=t,this._replace=r}mutateLayout(e,t,r,i=!1){const{parameters:s}=this._getWidgetJsonForLayout(e.dashboardJson,t,r,i),a=n.getEnumByCode(s.visualizationType),l=null!=this._values.visualizationType?n.getEnumByCode(this._values.visualizationType):a;if(this._replace){const n={};for(const e of Object.keys(s))n[e]=void 0;Object.assign(n,this._values),new o.Z(this._widgetId,n).mutateLayout(e,t,r,i)}else if(a!==l){const n=this._getUpdatedParameters(a,l,s);new o.Z(this._widgetId,n).mutateLayout(e,t,r,i)}else this._values&&new o.Z(this._widgetId,this._values).mutateLayout(e,t,r,i)}_getUpdatedParameters(e,t,r){const s=e.getDefinition().getDefaultParameters(!0,!!r.applyConditionalFormatting);for(const e of Object.keys(s))null!=r[e]&&(s[e]=r[e]);const n=t.getDefinition(),o=a.Z.transitionParameters(s,n.getDefaultParameters(!0,!!r.applyConditionalFormatting));return this._values&&(0,i.deepExtend)(o,this._values),o.visualizationType=t.getCode(),a.Z.removeNullsInSections(o),o.valueType=t.getDefinition().getDefaultParameters().valueType,o}getDescription(){return"update chart widget properties"}getValues(){return this._values}}},71865:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(82957);class s extends i.Z{constructor(e,t){super(),this._json=e,this._componentName=t}mutate(e){null!=this._json?null==e.componentJsons[this._componentName]?e.componentJsons[this._componentName]=this._json:Object.assign(e.componentJsons[this._componentName],this._json):delete e.componentJsons[this._componentName]}}},38994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(82957);class s extends i.Z{constructor(e,t){super(),this._json=e,this._componentName=t}mutate(e){null!=this._json?null==e.componentXmdJsons[this._componentName]?e.componentXmdJsons[this._componentName]=this._json:Object.assign(e.componentXmdJsons[this._componentName],this._json):delete e.componentXmdJsons[this._componentName]}}},99934:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("DIMENSION",new s).add("MEASURE",new s).add("TIME",new s).add("COLUMN",new s).finish()},34659:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486);class s{constructor({name:e,label:t,type:r,tooltip:i,allowsDuplicate:s,minItems:n,maxItems:o,isArray:a,zIndex:l}){if(this._name=e,this._label=t,this._type=r,this._tooltip=i,this._allowsDuplicate=Boolean(s),this._minItems=null!=n?n:0,this._maxItems=null!=o?o:1/0,this._isArray=Boolean(a),this._zIndex=null!=l?l:0,this._minItems>this._maxItems)throw new Error(`minItems ${this._minItems} can not be larger than maxItems ${this._maxItems} for section ${this._name}`)}getName(){return this._name}getLabel(){return this._label}getTooltip(){return this._tooltip}getColumnType(){return this._type}getMinItems(){return this._minItems}getMaxItems(){return this._maxItems}isArray(){return this._isArray}getZIndex(){return this._zIndex}allowsDuplicate(){return this._allowsDuplicate}}var n=r(99934);class o{constructor(e){this._sectionDefinitions=e.map((e=>new s(e)));const[t,r]=(0,i.partition)(this._sectionDefinitions,(e=>e.getColumnType()===n.Z.MEASURE));this._sortedMeasureSections=this._sortByZIndex(t).map((e=>e.getName())),this._sortedDimensionSections=this._sortByZIndex(r).map((e=>e.getName()))}getSections(e){return null==e?this._sectionDefinitions:this._sectionDefinitions.filter((t=>t.getColumnType()===e))}columnMapToConfig(e){const t={};for(const r of this.getSections()){const i=r.getName(),s=r.isArray(),n=null!=e[i]?e[i]:[];t[i]=s&&Array.isArray(n)?n.map((e=>({column:[e]}))):{column:n}}return t}columnMapToQuery(e){const t=this._sortedDimensionSections,r=this._sortedMeasureSections;return{dimensions:(0,i.uniq)((0,i.filter)((0,i.flatten)(t.map((t=>e[t]))))),measures:(0,i.uniq)((0,i.filter)((0,i.flatten)(r.map((t=>e[t])))))}}_sortByZIndex(e){return(0,i.sortBy)(e,(e=>e.getZIndex()))}}},98891:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(6597);class s{constructor(e,t,r){this._resultsMetadata=e,this._columnMap=t,this._data=r}getDataForCompoundDates(){let e=[];const t=new i.ZP(this._resultsMetadata);return this._resultsMetadata.getCompoundTimeColumnNames().forEach((r=>{if(e=this._resultsMetadata.getCompoundColumnParts(r),t.isValidCombinedTimeColumn(e))for(const r of this._data)r[t.getCombinedDateGrainColumnName(e)]=e.map((e=>r[e])).join(i.RY)})),this._data}}},74703:(e,t,r)=>{"use strict";r.d(t,{Z:()=>M});var i=r(37129),s=r(23561),n=r(1607),o=r(14079),a=r(90554),l=r(53941),u=r(43887),d=r(47333),c=r(1732),h=r(25945),p=r(41992),g=r(12815),m=r(1);class _{constructor(e){this.warnings=e}}class f extends Error{constructor(e,t){super(),this.errors=e,this.warnings=t}}var y=r(84893),b=r(18253);class C{publish(){}updateSubscriptions(){}}var E=r(24617),S=r(96486),T=r(54370),I=r(81513),v=r(26378),R=r(25883);const w="static",A="filter",D="dashboard";class L extends I{#He;#Ve;#je;constructor(){super("TABLEAU_PARAMETER_MANAGER"),this.#He=new Map,this.#Ve=new Map,this.#je=new Map}addTableauComponent(e,t){this.#Ve.set(e,t),t&&t.getSheetType()===D&&this.#je.get(e)?.forEach(((e,r)=>t.applyFilterAsyncOnActiveSheet(r,e)))}removeTableauComponent(e){this.#Ve.delete(e),this.#je.delete(e)}getFilters(){return this.#je}getTableauComponentSdks(){return this.#Ve}addParameters(e,t={}){this.#He.set(e,Object.keys(t).reduce(((e,r)=>e.set(r,new T.Z(r,t[r]))),new Map)),this.#He.get(e)?.forEach(((t,r)=>{t.getType()===w&&this._addFilterWithStaticValue(t,e)}))}getTopics(){return(0,v.BB)()}updateAttributes({componentName:e,attributes:t={},runtime:r}){this.#He.set(e,Object.keys(t).reduce(((e,r)=>e.set(r,new T.Z(r,t[r]))),new Map)),this.#He.get(e)?.forEach(((t,i)=>{if(t.getType()===w){this._addFilterWithStaticValue(t,e);const r=this.#Ve.get(e);r&&this.#je.get(e)?.forEach(((e,t)=>r.applyFilterAsyncOnActiveSheet(t,e)))}else if("dynamic"===t.getType()){const i=t.getDynamicDataSourceId(),s=(0,v.dT)(i,r,t);s instanceof R.Z&&!(0,S.isEmpty)(s.getData())&&this._addAndApplyFilterWithDynamicValue({attribute:t,message:s,widgetId:e,tableauComponentSdk:this.getTableauComponentSdks().get(e)})}}))}_addFilter(e,t,r){if(this.#je.get(e)?.get(t))this.#je.get(e)?.set(t,r);else{const i=new Map;i.set(t,r),this.#je.set(e,i)}}_onFulfilled(e){this.#Ve.forEach(((t,r)=>{this.#He.get(r)?.forEach((i=>{this._addAndApplyFilterWithDynamicValue({attribute:i,message:e,widgetId:r,tableauComponentSdk:t})}))}))}_addFilterWithStaticValue(e,t){const r=e.getData();if(e.getParameter()?.type===A&&e.getParameter()?.sourceField){const i=e.getParameter()?.sourceField;let s=[r];e.getUseAsArray()&&(s=r.toString().split(",")),i&&this._addFilter(t,i,s)}}_addAndApplyFilterWithDynamicValue({attribute:e,message:t,widgetId:r,tableauComponentSdk:i}){if(!i||i.getSheetType()!==D)return;let s;e.getDynamicDataSourceId()===t.getPublisherId()&&(s=(0,v.TO)(e,t));const n=e.getParameter()?.sourceField;if(null!=n)if(null!=s){if(e.getParameter()?.type===A){if(Array.isArray(s)&&0===s.length)return void i.removeFilterAsync(n);let e;"string"==typeof s||"boolean"==typeof s||"number"==typeof s?(e=[s],this._addFilter(r,n,e)):Array.isArray(s)&&(e=s,this._addFilter(r,n,e)),e&&i.applyFilterAsyncOnActiveSheet(n,e)}}else i.removeFilterAsync(n)}}class M{static CACHE_FILTER_ID="cache";_hasStarted=!1;constructor(e=new h.Z){this._state=m.Z.STOPPED,this._subscribers=new s.Z,this._publishers=new s.Z,this._lenses=new s.Z,this._messageQueue=new o.Z,this._messageFilterChain=new s.Z(!0),this._cacheFilter=e,this._messageFilterChain.put(M.CACHE_FILTER_ID,e),this._topics=new Map,this._topicSubscribers=new n.Z,this._prioritizedLensIds=new Set,this._globalFilterManager=new g,this.addPublisher(this._globalFilterManager),this._parameterManager=new E.Z,this._tableauParameterManager=new L,this.addSubscriber(this._parameterManager,!0,!0),this.addSubscriber(this._tableauParameterManager,!0,!0)}async start(e=this._lenses.getKeys(),t=!1,r=new Map,s=new Map,n=[],o=[]){const a=this._hasStarted;this._hasStarted=!0,this._whenRuntimeStarted=Date.now();const l=this.validate(t);return this._setState(m.Z.RUNNING),this._globalFilterManager.addFilters(n,!0),this._globalFilterManager.setSavedViewFilters(o),await this._globalFilterManager.start(),this._parameterManager.publishInitialValues(),await this.startLenses(e,r,s),this._readyPromise=new i.Z((0,b.Z)(e.map(this.getLens.bind(this)))),this._readyPromise.getPromise().then((e=>{if(null==this._whenRuntimeStarted)throw new Error("Expected runtime start time to be set.");this._publish(new c.Z(this._whenRuntimeStarted,e,a))}),(e=>{if(!e.isCanceled)throw e})),l}stop(){this._readyPromise&&this._readyPromise.cancel(),this._setState(m.Z.STOPPED),this._messageQueue=new o.Z}reset(e,t,r,i,s,n,o){for(const e of this.getLenses())e.isStarted()&&e.reset();if(this._globalFilterManager.stop(),this.stop(),this._messageFilterChain.eachValue((e=>e.reset())),s)for(const[e,t]of s)this.addFilter(e,t,{shouldReplace:!0});return this.start(e,t,r,i,n,o)}pause(){this._setState(m.Z.PAUSED)}resume(){if(this._isRunning())throw new Error("Runtime already running.");this._setState(m.Z.RUNNING),this._flushMessageQueue()}setStartedLenses(e,t=new Map){const r=new Set(e);for(const e of this.getLenses()){const t=e.getId(),i=e.getStatus(),s=r.has(t);s&&!i.canStart?r.delete(t):!s&&i.isRunning&&e.pause()}return Promise.all(Array.from(r).map((e=>{const r=this.getLens(e);return r.getStatus()===p.Z.PAUSED?r.resume():this._startLens(r,[],t.get(e))})))}stopAndResetLenses(e){e.forEach((e=>this.getLens(e).reset()))}validate(e){const t=[],r=[];if(t.length||!e&&r.length)throw new f(t,r);return new _(r)}getState(){return this._state}_setState(e){if(this._state===e)throw new Error(`Runtime already ${e.name}.`);const t=this._state;this._state=e,this._processMessage(new d.Z(u.Z.SYSTEM_PUBLISHER_ID,t,e))}addFilter(e,t,{shouldReplace:r=!1,cachedMessageTopics:i=[]}={}){if(this._messageFilterChain.containsKey(e)&&!r)throw new Error(`Filter '${e}' already registered.`);this._messageFilterChain.put(e,t,r),(0,y.Z)(i,this._cacheFilter).forEach((e=>{t.pre(e),t.post(e)}))}removeFilter(e){const t=this._messageFilterChain.remove(e);if(!t)throw new Error(`Filter '${e}' does not exist.`);return t}getFilter(e){return this._messageFilterChain.get(e)}getCacheFilter(){return this._cacheFilter}_processFilterActions(e){const t=[];this._messageFilterChain.eachValue(((r,i)=>{if(e(r,i)===l.Z.REMOVE_FILTER)t.push(i);return!0}));for(const e of t)this.removeFilter(e)}addLens(e,t=!1){if(this._lenses.containsKey(e.getId())&&!t)throw new Error(`Lens '${e.getId()}' already registered.`);this._lenses.put(e.getId(),e,!0),this.addPublisher(e,!1)}startLens(e){return this._startLens(e)}startLenses(e,t,r){return Promise.all(e.map((e=>{const i=this.getLens(e);return this._startLens(i,t.get(e),r.get(i.getId(!1)))})))}_startLens(e,t=[],r){const i=e.start(t,r);return i.then((t=>{if(t)return this._sendCachedMessages(e)})),i}_sendCachedMessages(e){const t=(0,y.Z)(e.getTopics(),this._cacheFilter);for(const r of t)e.onMessage(r,!0)}removeLens(e){this.getLens(e).disconnect(),this._lenses.remove(e),this.removePublisher(e)}getLenses(){return this._lenses.getValues()}getLens(e){const t=this._lenses.get(e);if(!t)throw new Error(`Lens '${e}' does not exist.`);return t}getSubscriptions(){return this._topicSubscribers.getPairs()}_publish(e){switch(this._state){case m.Z.RUNNING:return void this._processMessage(e);case m.Z.STOPPED:throw new Error("Runtime is stopped.");case m.Z.PAUSED:this._messageQueue.add(e)}}addSubscriber(e,t=!0,r=!0){if(this._subscribers.put(e.getId(),e),t){for(const t of e.getTopics())this._addSubscription(e.getId(),t);this._isRunning()&&r&&this._sendCachedMessages(e)}}_addSubscription(e,t){const r=t.getHash();this._topics.has(r)||this._topics.set(r,t),this._topicSubscribers.put(t.getHash(),e,this._topics.get(t.getHash()))}addPublisher(e,t){this.addSubscriber(e,t),this._publishers.put(e.getId(),e),e.connect({publish:this._publish.bind(this),updateSubscriptions:this.updateSubscriptions.bind(this,e.getId())})}getParameterManager(){return this._parameterManager}getTableauParameterManager(){return this._tableauParameterManager}removeSubscriber(e){this._removeSubscriber(this.getSubscriber(e))}_removeSubscriber(e){this._subscribers.remove(e.getId()),this._topicSubscribers.removeTo(e.getId()),this._cleanUpTopics()}removePublisher(e){const t=this.getPublisher(e);t.connect(new C),this._publishers.remove(e),this._removeSubscriber(t)}updateSubscriptions(e,t=!0){const r=this.getSubscriber(e),i=(0,a.toES6Map)(r.getTopics(!0),(e=>e.getHash()));for(const t of this._topicSubscribers.getFroms(e))i.has(t)?i.delete(t):this._topicSubscribers.remove(t,e);for(const t of i.values())this._addSubscription(e,t);t&&this._sendCachedMessages(r),this._cleanUpTopics()}setPrioritizedLenses(e){this._prioritizedLensIds=new Set(e)}_cleanUpTopics(){const e=new Set;for(const t of this._topicSubscribers.getAllFroms())e.add(t);for(const t of this._topics.keys())e.has(t)||this._topics.delete(t)}getSubscriber(e){const t=this._subscribers.get(e);if(!t)throw new Error(`Subscriber '${e}' does not exist.`);return t}hasSubscriber(e){return this._subscribers.containsKey(e)}getPublisher(e){const t=this._publishers.get(e);if(null==t)throw new Error(`Publisher '${e}' does not exist.`);return t}hasPublisher(e){return this._publishers.containsKey(e)}getGlobalFilterManager(){return this._globalFilterManager}getNamespace(){}_processMessage(e){this._messageFilterChain.eachValue((t=>t.pre(e)));const t=new Set;for(const[r,i]of this._topics)if(i.isOfTopic(e))for(const e of this._topicSubscribers.getTos(r))t.add(e);this._sortedSubscribers(t).forEach((t=>{t!==e.getPublisherId()&&this.getSubscriber(t).onMessage(e,!1)})),this._processFilterActions((t=>t.post(e)))}_sortedSubscribers(e){return Array.from(e).sort(((e,t)=>this._prioritizedLensIds.has(e)?-1:1))}_flushMessageQueue(){let e;for(;e=this._messageQueue.poll();)this._processMessage(e)}_isRunning(){return this._state===m.Z.RUNNING}}},90970:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i=r(96486),s=r(83993),n=r(56379),o=r(21891),a=r(67427),l=r(73896),u=r(59816),d=r(42799),c=r(95783),h=r(26815),p=r(7302),g=r(18253);class m{constructor({runtime:e,dashboardDescribe:t,bindingsTraverserProvider:r,initialExternalState:i}){this._runtime=e,this._dashboardDescribe=t,this._bindingsTraverserProvider=r,this._metadataHolder=this._dashboardDescribe.getMetadataHolder(),this._initialExternalState=i}reset({runtime:e=this._runtime,metadata:t=this._metadataHolder.getMetadata(),dependencyAnalyzer:r=this._metadataHolder.getDependencyAnalyzer(),layoutName:i=this._getCurrentLayoutName(),pageIndex:s=this._getCurrentPageIndex(),savedView:n}){const o=this._dashboardDescribe.getCurrentLayout(),a=n?.getPageId(),l=a&&o?.hasPageWithId(a)?o?.getPageById(a).getIndex():s,u=null==n?this._initialExternalState:void 0;let d=[],c=[];null!=n?c=n.getState().getDashboardFilters(t):u&&!u.isEmpty()&&(d=u.getDashboardFilters(t)),this._addComponentFiltersToGlobalFilter();const h=this._resetRuntime({runtime:e,metadata:t,dependencyAnalyzer:r,layoutName:i,pageIndex:l??0,savedView:n,externalState:u,externalFilters:d,savedViewFilters:c});return this._resetComponents(n,u),h}setStartedLenses(e,t,r,i){const s=[this._setStartedLenses({runtime:this._runtime,metadataHolder:this._metadataHolder,layoutName:e,pageIndex:t,externalState:r,savedView:i})];for(const[o,a]of this._getComponentWidgets(e,t)){const e=this._dashboardDescribe.getComponentRuntime(o);if(e){const t=this._metadataHolder.getComponentMetadata(o);s.push(this._setStartedLenses({runtime:e,metadataHolder:new l.Z(t,this._metadataHolder.getComponentAssetExtendedMetadata(o),new n.Z),layoutName:t.getLayout().getName(),pageIndex:t.getPageIndex(r?.getComponentPageName(o)||i?.getComponentPageName()||a.getParameter("pageName")),externalState:r?.getComponentState(o),savedView:i?.getComponentSavedView(o)}))}}return Promise.all(s)}setPrioritizedLenses(e,t,r){const i=this._metadataHolder.getDependencyAnalyzer().getReferencedLensIds(e,t,r,!0);this._runtime.setPrioritizedLenses(i)}resetGlobalFilters(){this._runtime.getGlobalFilterManager().resetFilters(),this._addComponentFiltersToGlobalFilter()}getGlobalFilters(e){return this._runtime.getGlobalFilterManager().getFilters(e)}removeGlobalFilters(e,t){this._runtime.getGlobalFilterManager().removeFilters(e,t)}updateWidgetSubscribers(e,t){const r=this._metadataHolder.getMetadata();r.getPage(e,t).getWidgets().forEach((r=>{this._runtime.getSubscriber(a.Z.getWidgetRuntimeId(r.getId())).setLayoutAndPage(e,t)}));const i=new Set(this._metadataHolder.getDependencyAnalyzer().getUsedLensIds(e,t));for(const e of r.getLensIds()){const t=this._runtime.getLens(e);t.hasCapability(u.SELECTION)&&t.callCapabilityMethod(u.SELECTION,i.has(e)?"doFireInitialSelection":"dontFireInitialSelection")}for(const[r]of this._getComponentWidgets(e,t)){const e=this._dashboardDescribe.getComponentRuntime(r);if(e)for(const t of e.getLenses())t.hasCapability(u.SELECTION)&&t.callCapabilityMethod(u.SELECTION,"doFireInitialSelection")}}async startAllLenses(){return this._startLenses(this._metadataHolder.getMetadata().getLensIds())}async startLens(e){await this._startLenses([e].concat(this._dashboardDescribe.getMetadataHolder().getDependencyAnalyzer().getDescendantLensIds(e))),await(0,g.Z)([this._dashboardDescribe.getRuntime().getLens(e)])}async _startLenses(e){const t=this._getLensIdsToStart(e);this._setDoFireInitialSelectionOnLensIds(t,this._runtime),await this._runtime.startLenses(t,new Map,new Map)}_setDoFireInitialSelectionOnLensIds(e,t){e.forEach((e=>{let r;this._dashboardDescribe.getMetadataHolder().getMetadata().hasLens(e)?r=this._dashboardDescribe.getRuntime().getLens(e):t&&(r=t.getLens(e)),r&&r.hasCapability(u.SELECTION)&&r.callCapabilityMethod(u.SELECTION,"doFireInitialSelection")}))}_getLensIdsToStart(e){const t=[];return e.forEach((e=>{this._dashboardDescribe.getRuntime().getLens(e).isStarted()||t.push(e)})),t}_getCurrentLayoutName(){return this._dashboardDescribe.getCurrentLayoutName()}_getCurrentPageIndex(){return this._dashboardDescribe.getCurrentPageIndex()}_isEditMode(){return this._dashboardDescribe.isEditMode()}_addComponentFiltersToGlobalFilter(){for(const e of this._metadataHolder.getMetadata().getComponentNames(!0))if(this._metadataHolder.hasComponentMetadata(e)){const t=this._metadataHolder.getComponentMetadata(e),r=t?.getFilters();(0,i.isEmpty)(r)||this._runtime.getGlobalFilterManager().addFilters(r,!1)}}_setStartedLenses({runtime:e,metadataHolder:t,layoutName:r,pageIndex:i,externalState:s,savedView:n}){const o=t.getDependencyAnalyzer().getLensIdsToStart(r,i,s,n),a=new p.Z(t.getMetadata(),s,n).extract();return e.setStartedLenses(o,a)}_getComponentWidgets(e,t){if(this._metadataHolder.getMetadata().hasLayout(e)){const r=this._metadataHolder.getMetadata().getLayout(e);if(r.hasPage(t))return r.getPage(t).getWidgets().reduce(((e,t)=>{if(t.getType()===o.Z.COMPONENT.getCode()){const r=t.getParameter("source"),i=(0,s.Oz)(r?.name,r?.namespace);e.set(i,t)}return e}),new Map)}return new Map}_resetComponents(e,t){const r=this._metadataHolder.getMetadata();for(const i of r.getComponentNames()){if(!this._metadataHolder.hasComponentMetadata(i))continue;const r=this._metadataHolder.getComponentMetadata(i),s=this._dashboardDescribe.getComponentRuntime(i),n=new l.Z(r,this._metadataHolder.getComponentAssetExtendedMetadata(i),this._bindingsTraverserProvider,new Map),o=t?.getComponentPageName(i)||e?.getComponentPageName(i),a=o?r.getPageIndex(o):this._dashboardDescribe.getComponentInitialPageIndex(i),u=t?.getComponentState(i),d=e?.getComponentSavedView(i);s&&this._resetRuntime({runtime:s,metadata:r,dependencyAnalyzer:n.getDependencyAnalyzer(),layoutName:r.getLayout().getName(),pageIndex:a,savedView:d,externalState:u})}}_resetRuntime({runtime:e,metadata:t,dependencyAnalyzer:r,layoutName:i,pageIndex:s,savedView:n,externalState:o,externalFilters:a,savedViewFilters:l}){const u=r.getLensIdsToStart(i,s,o,n),g=new p.Z(t,o,n).extract(),m=new h.Z(this._bindingsTraverserProvider).optimize(t,u,g);return this._setDoFireInitialSelectionOnLensIds(u,e),e.reset(u,!1,m.getCountdownLatchTopics(e.getNamespace()),g,new Map([[d.Z.DATA_SOURCE_STATES_FILTER_ID,new c.Z(m.getInitialDataSourceStates())]]),a,l)}}},1:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("STOPPED",new s).add("RUNNING",new s).add("PAUSED",new s).finish()},7302:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(13134),s=r(1611),n=r(86866);class o{constructor(e,t,r){this._dashboard=e,this._externalState=t,this._savedView=r}extract(){const e=new Map;let t;if(this._externalState&&!this._externalState.isEmpty())t=this._externalState;else{if(!this._savedView)return e;t=this._savedView.getState()}const r=t.getStepSelections();return Object.keys(r).forEach((t=>{if(!this._dashboard.hasLens(t))return;const s=r[t],o=this._dashboard.getLens(t),a=n.Z.fromCode(o.getType()).getDefinition();e.set(t,new i.Z(this._getInitialExternalSelectionFilterColumns(s,a.inRangeSelectMode(o)),s.values))})),e}_getInitialExternalSelectionFilterColumns(e,t){return e.metadata.groups.map(((r,i)=>this._getFilterColumnType(e,t,i).of(r)))}_getFilterColumnType(e,t,r){if(t)return Array.isArray(e.values[0])&&Array.isArray(e.values[0][0])?s.Z.DIMENSION:s.Z.MEASURE;return"number"==typeof(Array.isArray(e.values[0])?e.values[0][r]:e.values[0])?s.Z.MEASURE:s.Z.DIMENSION}}},18253:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(41992);const n=100;async function o(e){for(;e.some((e=>!e.isStarted()||e.getStatus()===s.Z.QUERYING));)await new Promise((e=>setTimeout(e,n)));return e.length>0?(0,i.max)(e.map((e=>(0,i.last)(e.getPerformanceStats().statusHistory).time))):Date.now()}},42799:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var i=r(96486),s=r(83993),n=r(40651),o=r(73896),a=r(50933),l=r(74703),u=r(59816),d=r(67427),c=r(21891);const h="dataSourceStatesFilter";class p{constructor(e,t,r,i,s,n,o){this._lensProvider=e,this._metadataProvider=t,this._bindingsTraverserProvider=r,this._executeMutators=i,this._layoutName=s,this._pageIndex=n,this._idManager=o}build({metadataHolder:e,externalState:t,savedView:r,filters:i,subscribers:s,publishers:n,cacheFilter:o}){if(null==this._metadataProvider)throw new Error("Metadata provider not provided");const a=new l.Z(o);return s.forEach((e=>{a.addSubscriber(e)})),n.forEach((e=>{a.addPublisher(e)})),i.forEach(((e,t)=>{a.addFilter(t,e)})),a.getGlobalFilterManager().setMetadataHolder(e).setMetadataProvider(this._metadataProvider),this.registerLensAndFilters(a,e),a}registerLensAndFilters(e,t){const r=new a.Z(e,h);e.getGlobalFilterManager().setDataSourceStateProvider(r);for(const i of t.getMetadata().getLenses())e.addLens(this._lensProvider.provide(i.getId(),t,this._metadataProvider,r,this._executeMutators,this._bindingsTraverserProvider,e.getNamespace(),this._idManager));for(const r of t.getMetadata().getWidgets()){const i=new d.Z(r.getId(),t,this._layoutName,this._pageIndex,this._bindingsTraverserProvider,e.getNamespace());if(e.addPublisher(i),r.hasLens()){const t=e.getLens(r.getLensId());t.callCapabilityMethod(u.LENS_STATE,"updateLensState",[{enablePaging:"table"===r.getType()&&!r.getParameter("pivoted")&&!r.getParameter("enableAllDataFetch"),widgetType:r.getType()}]),i.setLensConnector(t.createLensConnector())}r.getType()===c.Z.FILTER_PANEL.getCode()&&i.setFilterConnector(e.getGlobalFilterManager().createFilterConnector())}}}class g{constructor(e,t,r,i,s){this._runtime=e,this._componentRuntimeBuilderResults=t,this._countdownLatchTopics=r,this._initialExternalSelections=i,this._pageIndex=s}getRuntime(){return this._runtime}getComponentRuntimeBuilderResults(){return this._componentRuntimeBuilderResults}getCountdownLatchTopics(){return this._countdownLatchTopics}getInitialExternalSelections(){return this._initialExternalSelections}getPageIndex(){return this._pageIndex||0}}var m=r(95783),_=r(26815),f=r(9462),y=r(94969),b=r(7302),C=r(37129),E=r(90456),S=r(41992),T=r(38325);class I extends T{publish(e){this._getRuntimeConnector()?.publish(e)}}var v=r(18253),R=r(33277),w=r(43887);class A{_lenses=new Map;_subscribers=new Map;_publishers=new Map;constructor(e,t){this._namespace=e,this._runtime=t,this._componentRuntimePublisher=new I(`component_runtime_${e}`),this._runtime.addPublisher(this._componentRuntimePublisher,!1)}async start(e=this._getNamespacedLensIds(),t=!1,r=new Map,i=new Map){await this.startLenses(e,r,i);const s=this.validate(t);return this._readyPromise=new C.Z((0,v.Z)(e.map(this.getLens.bind(this)))),this._readyPromise.getPromise().then((()=>{this._componentRuntimePublisher.publish(new R.Z(w.Z.SYSTEM_PUBLISHER_ID))})),s}stop(){for(const e of this._lenses.values())this._runtime.removeLens(e.getId());for(const e of this._publishers.values())this.removePublisher(e.getId());for(const e of this._subscribers.values())this.removeSubscriber(e.getId());this.getGlobalFilterManager().resetFilters(),this._readyPromise&&this._readyPromise.cancel()}reset(e,t,r,i,s){for(const e of this._lenses.values())e.isStarted()&&e.reset();return this.start(e,t,r,i)}pause(){throw new Error("Namespaced runtime is not allowed to pause the runtime")}resume(){throw new Error("Namespaced runtime is not allowed to resume the runtime")}setStartedLenses(e){const t=e.reduce(((e,t)=>(e.set(this._namespaceifyId(t),t),e)),new Map);for(const e of this.getLenses()){const r=e.getId(),i=e.getStatus(),s=t.has(r);s&&!i.canStart?t.delete(r):!s&&i.isRunning&&e.pause()}return Promise.all(Array.from(t.values()).map((e=>{const t=this.getLens(e);return t.getStatus()===S.Z.PAUSED?t.resume():this.startLens(t)})))}stopAndResetLenses(e){this._runtime.stopAndResetLenses(e.map((e=>this._namespaceifyId(e))))}validate(e){return this._runtime.validate(e)}getState(){return this._runtime.getState()}getFilter(e){return this._runtime.getFilter(e)}getCacheFilter(){return this._runtime.getCacheFilter()}addLens(e,t=!1){this._lenses.set(e.getId(),e),this._runtime.addLens(e,t)}startLens(e){return this._runtime.startLens(e)}startLenses(e,t,r){return this._runtime.startLenses(e.map((e=>this._namespaceifyId(e))),t,r)}removeLens(e){}getLenses(){return Array.from(this._lenses.values())}getLens(e){return this._lenses.get((0,E.$)(e,this._namespace))}addSubscriber(e,t=!0,r=!0){this._subscribers.set(e.getId(),e),this._runtime.addSubscriber(e,t,r)}addPublisher(e,t){this._publishers.set(e.getId(),e),this._subscribers.set(e.getId(),e),this._runtime.addPublisher(e,t)}hasPublisher(e){return this._publishers.has(e)}getParameterManager(){return this._runtime.getParameterManager()}getTableauParameterManager(){return this._runtime.getTableauParameterManager()}removeSubscriber(e){this._subscribers.delete(e),this._runtime.removeSubscriber(e)}removePublisher(e){this._publishers.delete(e),this._subscribers.delete(e),this._runtime.removePublisher(e)}updateSubscriptions(e,t=!0){this._runtime.updateSubscriptions(e,t)}setPrioritizedLenses(e){this._runtime.setPrioritizedLenses(e.map((e=>this._namespaceifyId(e))))}getSubscriber(e){return this._runtime.getSubscriber(this._namespaceifyId(e))}hasSubscriber(e){return this._runtime.hasSubscriber(this._namespaceifyId(e))}getGlobalFilterManager(){return this._runtime.getGlobalFilterManager()}getNamespace(){return this._namespace}addFilter(e,t,{shouldReplace:r=!1,cachedMessageTopics:i=[]}={}){this._runtime.addFilter(e,t,{shouldReplace:r,cachedMessageTopics:i})}removeFilter(e){return this._runtime.removeFilter(e)}_namespaceifyId(e){return(0,E.$)(e,this._namespace)}_getNamespacedLensIds(){return Array.from(this._lenses.keys())}}var D=r(25945),L=r(61506),M=r(16045),N=r(69008),O=r(45131);class P{#qe;#ze;#$e;constructor(e,t,r){this.#qe=e,this.#ze=t,this.#$e=r}hasConflicts(e=!1){const t=this.lookupConflictingSteps().length>0;let r=t,i=!1;return e||(i=this.lookupConflictingWidgets().length>0,r=t||i),r&&this._logConflicts({hasConflictingSteps:t,hasConflictingWidgets:i}),r}lookupConflictingSteps(){return this._getConflicts(this.#qe.getLensIds(),this.#ze.getLensIds())}lookupConflictingWidgets(){return this._getConflicts(this.#qe.getWidgetIds(),this.#ze.getWidgetIds())}_getConflicts(e,t){const r=[],i=new Set(e);for(const e of t)i.has(e)&&r.push(e);return r}_logConflicts({hasConflictingSteps:e,hasConflictingWidgets:t}){let r="";e&&t?r="BothStepsAndWidgets":e?r="Steps":t&&(r="Widgets"),L.Z.get(M.Z).trigger(new N.Z(O.Z.DASHBOARD,`sharedRuntimeConflictsOn${r}`,1,{appInstanceId:this.#$e.appContext.appInstanceId}))}}var x=r(1);class Z{static DATA_SOURCE_STATES_FILTER_ID=h;constructor(e,t,r,i,s,n,o){this._lensProvider=e,this._metadataProvider=t,this._bindingsTraverserProvider=r,this._executeMutators=i,this._getCurrentLayoutName=s,this._getCurrentPageIndex=n,this._idManager=o}build({metadataHolder:e,externalState:t,savedView:r,filters:i,subscribers:s,publishers:n,parentRuntime:o}){const a=e.getMetadata(),l=this._getInitialExternalSelections(a,t,r),u=this._getOptimizationResult(e,t,r,this._getCurrentLayoutName,this._getCurrentPageIndex),d=[],c=e.getParentMetadata();let h;if(o&&c&&!new P(c,a,this._idManager).hasConflicts(!0)){for(const e of o.getLenses())for(const t of o.getCacheFilter().getByPublisher(e.getId()))d.push(t);h=new D.Z(d)}const p=this._buildRuntime({metadataHolder:e,optimizationResult:u,externalState:t,savedView:r,getCurrentLayoutName:this._getCurrentLayoutName,getCurrentPageIndex:this._getCurrentPageIndex,filters:i,subscribers:s,publishers:n,cacheFilter:h});return p.getParameterManager().addParameters(e.getMetadata(),p),this._initializeTableauComponentParameter(p,e),new g(p,this._buildComponentRuntimes(p,e,t,r),u.getCountdownLatchTopics(),l)}buildComponentRuntime({componentMetadataHolder:e,pageName:t,isShared:r,dashboardRuntime:s,componentExternalState:n,componentSavedView:o,componentWidgetAttributes:a,layoutName:l,pageIndex:u,namespace:d}){const c=e.getMetadata(),h=void 0===u?c.getPageIndex(t):u,p=()=>l||c.getLayout(t).getName(),m=()=>h,_=this._getOptimizationResult(e,n,o,p,m);let f;if(r){if(f=this._buildNamespacedRuntime(d||c.getFullyQualifiedName(),s,e,p,m),s.getState()===x.Z.RUNNING){const e=c.getFilters();(0,i.isEmpty)(e)||s.getGlobalFilterManager().addFilters(e,!1)}}else f=this._buildRuntime({metadataHolder:e,optimizationResult:_,externalState:n,savedView:o,getCurrentLayoutName:p,getCurrentPageIndex:m});return c.hasParameters()&&s.getParameterManager().addParameters(c,f,a),new g(f,new Map,_.getCountdownLatchTopics(),this._getInitialExternalSelections(c,n,o),h)}_initializeTableauComponentParameter(e,t){for(const r of t.getMetadata().getWidgets()){if(c.Z.fromCode(r.getType())!==c.Z.COMPONENT||(0,i.isEmpty)(r.getParameters()))continue;const t=r.getParameter("source");n.Z.fromCode(t.type)===n.Z.TABLEAU_DASHBOARD&&e.getTableauParameterManager().addParameters(r.getId(),r.getParameter("dynamicAttributes"))}}_buildComponentRuntimes(e,t,r,n){const a=new Map;for(const l of t.getMetadata().getWidgets()){if(c.Z.fromCode(l.getType())!==c.Z.COMPONENT||(0,i.isEmpty)(l.getParameters()))continue;const u=l.getParameter("source"),d=u?(0,s.Oz)(u.name,u.namespace):"";if(!t.hasComponentMetadata(d))continue;if(a.has(d))continue;const h=t.getComponentMetadata(d),p=r?.getComponentState(d),g=n?.getComponentSavedView(d),m=new o.Z(h,t.getComponentAssetExtendedMetadata(d),this._bindingsTraverserProvider,new Map,new Map,t.getMetadata());a.set(d,this.buildComponentRuntime({componentMetadataHolder:m,pageName:r?.getComponentPageName(d)||n?.getComponentPageName(d)||l.getParameter("pageName"),isShared:this._isSharedComponent(l),dashboardRuntime:e,componentExternalState:p,componentSavedView:g,componentWidgetAttributes:l.getParameter("attributes")}))}return a}_buildRuntime({metadataHolder:e,externalState:t,savedView:r,optimizationResult:i,getCurrentLayoutName:s,getCurrentPageIndex:n,filters:o=new Map,subscribers:a=[],publishers:l=[],cacheFilter:u}){o.set(Z.DATA_SOURCE_STATES_FILTER_ID,new m.Z(i.getInitialDataSourceStates())),l.push(new f.Z("__dataSourceLinkManager__",e),new y.Z("__globalFilterOptimizer__",e,s,n));return new p(this._lensProvider,this._metadataProvider,this._bindingsTraverserProvider,this._executeMutators,s(),n(),this._idManager).build({metadataHolder:e,externalState:t,savedView:r,filters:o,subscribers:a,publishers:l,cacheFilter:u})}_buildNamespacedRuntime(e,t,r,i,s){const n=new A(e,t);return new p(this._lensProvider,this._metadataProvider,this._bindingsTraverserProvider,this._executeMutators,i(),s(),this._idManager).registerLensAndFilters(n,r),n}_getInitialExternalSelections(e,t,r){return new b.Z(e,t,r).extract()}_getOptimizationResult(e,t,r,i,s){return new _.Z(this._bindingsTraverserProvider).optimize(e.getMetadata(),e.getDependencyAnalyzer().getLensIdsToStart(i(),s(),t,r),this._getInitialExternalSelections(e.getMetadata(),t,r))}_isSharedComponent(e){return e.getParameter("shareState")}}},56412:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i=r(83993),s=r(79587),n=r(56379),o=r(73896),a=r(59816),l=r(68726),u=r(3694),d=r(21891),c=r(7302);class h{async initRuntime(e,t,r,a,l,u){this._applyExternalSelections(e,t,r);const h=this._getInitialPageLensIds(t,r,a,l,u),p=t.getMetadata();let g=[],m=[];r&&!r.isEmpty()?g=r.getDashboardFilters(p):a&&(m=a.getState().getDashboardFilters(p));const _=[this._startRuntime({runtimeBuilderResult:e,metadataHolder:t,initialPageLensIds:h.filter((e=>p.hasLens(e))),externalFilters:g,savedViewFilters:m})],f=t.getMetadata().getPage(l,u).getWidgets().reduce(((e,t)=>{if(t.getType()===d.Z.COMPONENT.getCode()){const r=t.getParameter("source");r&&e.add((0,i.Oz)(r.name,r.namespace))}return e}),new Set);return e.getComponentRuntimeBuilderResults().forEach(((e,i)=>{const l=t.getComponentMetadata(i),u=new o.Z(l,new s.Z,new n.Z,new Map),d=e.getRuntime(),p=r?.getComponentState(i);let g=[];f.has(i)&&(g=this._getInitialPageLensIds(u,p,a?.getComponentSavedView(i),l.getLayouts()[0].getName(),e.getPageIndex())),d.getNamespace()&&(f.has(i)||new c.Z(l,p,a?.getComponentSavedView(i)).extract().forEach(((e,t)=>{e.isEmpty()||g.push(t)})),d.getLenses().forEach((e=>{h.includes(e.getId())&&!g.includes(e.getId(!1))&&g.push(e.getId(!1))}))),this._applyExternalSelections(e,u,p),_.push(this._startRuntime({runtimeBuilderResult:e,metadataHolder:u,initialPageLensIds:g}))})),Promise.all(_)}_startRuntime({runtimeBuilderResult:e,metadataHolder:t,initialPageLensIds:r,externalFilters:i,savedViewFilters:s}){const n=e.getRuntime(),o=t.getMetadata(),l=new Set(r);for(const e of o.getLensIds())l.has(e)||n.getLens(e).callCapabilityMethod(a.SELECTION,"dontFireInitialSelection");return n.start(r,!1,e.getCountdownLatchTopics(),e.getInitialExternalSelections(),i,s)}_applyExternalSelections(e,t,r){if(null==r)return;new l.Z(t,e.getRuntime()).applyExternalSelections(new u.Z(r,!1))}_getInitialPageLensIds(e,t,r,i,s){return e.getDependencyAnalyzer().getLensIdsToStart(i,s,t,r)}}},1209:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(723);class s{constructor(e,t){this._type=e,this._name=t}getType(){return this._type}getName(){return this._name}getHash(){return`${this._type.getName()}.${this._name}`}doesSupportFaceting(){return this.getType().doesSupportFaceting()}isEqual(e){return e.getType()===this._type&&e.getName()===this._name}}class n extends i{static fromLinkedField(e){return this.getEnumByCode(e.getDataSourceType()).make(e.getDataSourceFullyQualifiedName())}getCode(){return this._value.code}make(e){return new s(this,e)}doesSupportFaceting(){return this._value.supportsFaceting}getStateKey(){if(!this.doesSupportFaceting())throw new Error("Data source types which don't support faceting have no state key.");return this._value.stateKey}}n.build(n,{DATASET:{code:"dataset",supportsFaceting:!0,stateKey:"datasets"},SOBJECT:{code:"sobject",supportsFaceting:!0,stateKey:"sObjects"},APEX:{code:"apex",supportsFaceting:!1},STATIC:{code:"static",supportsFaceting:!1},DISCOVERY:{code:"discovery",supportsFaceting:!1},REPORT:{code:"reporttype",supportsFaceting:!0,stateKey:"reports"},CDP:{code:"cdp",supportsFaceting:!0,stateKey:"cdpObjects"},HIERARCHY:{code:"hierarchy",supportsFaceting:!1},INPUT:{code:"input",supportsFaceting:!1},FORECASTING:{code:"forecasting",supportsFaceting:!1}})},68955:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(96486);class s{constructor(e,t,r,s,n){if(this._operator=e,this._dataSource=t,this._columns=r,this._hidden=Boolean(n?.hidden),this._locked=Boolean(n?.locked),this._sequenceNumber=Number(n?.sequenceNumber),null==s?this._values=[]:Array.isArray(s)?Array.isArray(s[0])?this._values=s:this._values=(0,i.sortBy)(s):this._values=[s],!this._operator.validate(this))throw new Error("Operator is not valid for the current filter.")}getOperator(){return this._operator}getDataSource(){return this._dataSource}getColumns(){return this._columns}getValues(){return this._values}getSequenceNumber(){return this._sequenceNumber}getSenderHash(e){return e+this.getHash()}getHash(){return[this.getColumnHash(),this.getOperator().name].join("~~~")}getColumnHash(){return[this.getDataSource().getName(),this.getSequenceNumber()].concat(this.getColumns().map((e=>e.getName())).sort()).join("~~~")}isOfDataType(e){return!0}isHidden(){return this._hidden}isLocked(){return this._locked}}},61055:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(69370),s=r(1611),n=r(81693),o=r(1209),a=r(68955);class l extends i.Z{of(e,t,r,i,s,n){return new a.Z(this,e,t,r,{hidden:i,locked:s,sequenceNumber:n})}validate(e){throw new Error("Not implemented.")}getCode(){return this.code}}class u extends l{validate(e){return!0}}class d extends l{validate(e){const t=e.getValues();return e.getDataSource().getType()===o.Z.REPORT&&1===e.getColumns().length||1===e.getColumns().length&&Array.isArray(t)&&Array.isArray(t[0])&&1===t[0].length}}class c extends l{validate(e){const t=e.getValues();return e.getDataSource().getType()===o.Z.REPORT&&1===e.getColumns().length||1===e.getColumns().length&&Array.isArray(t)&&Array.isArray(t[0])&&(1===t[0].length||2===t[0].length)}}class h extends c{validate(e){return e.getDataSource().getType()===o.Z.REPORT&&1===e.getColumns().length||super.validate(e)&&e.isOfDataType(s.Z.MEASURE)}}class p extends l{validate(e){return 1===e.getColumns().length&&e.isOfDataType(s.Z.MEASURE)}}l.add("IN",n.Z.IN.code,new u).add("NOT_IN",n.Z.NOT_IN.code,new u).add("EQUALS",n.Z.EQUALS.code,new d).add("NOT_EQUALS",n.Z.NOT_EQUALS.code,new d).add("BETWEEN",n.Z.BETWEEN.code,new class extends l{validate(e){const t=e.getValues();return 1===e.getColumns().length&&(!t.length||2===t[0].length)&&((e.isOfDataType(s.Z.DIMENSION)||e.isOfDataType(s.Z.DATE))&&(!t.length||Array.isArray(t)&&Array.isArray(t[0]))||e.isOfDataType(s.Z.MEASURE)&&(!t.length||Array.isArray(t)&&Array.isArray(t[0])))}}).add("GREATER",n.Z.GREATER.code,new h).add("GREATER_OR_EQUALS",n.Z.GREATER_OR_EQUALS.code,new c).add("LESSER",n.Z.LESS.code,new h).add("LESSER_OR_EQUALS",n.Z.LESS_OR_EQUALS.code,new c).add("MATCHES",n.Z.MATCHES.code,new class extends l{validate(e){const t=e.getValues();return e.getDataSource().getType()===o.Z.REPORT&&1===e.getColumns().length||1===e.getColumns().length&&e.isOfDataType(s.Z.DIMENSION)&&Array.isArray(t)&&!Array.isArray(t[0])}}).add("IS_NULL",n.Z.IS_NULL.code,new p).add("IS_NOT_NULL",n.Z.IS_NOT_NULL.code,new p).add("NOT_CONTAINS",n.Z.NOT_CONTAINS.code,new u).add("STARTS_WITH",n.Z.STARTS_WITH.code,new class extends l{validate(e){const t=e.getValues();return 1===e.getColumns().length&&e.isOfDataType(s.Z.DIMENSION)&&Array.isArray(t)&&1===t.length}}).finish()},46841:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(61055),s=r(86866);class n{static determine(e,t){return s.Z.fromCode(e.getType()).getDefinition().inRangeSelectMode(e)?Array.isArray(t[0])&&null==t[0][0]&&null==t[0][1]?i.Z.IS_NULL:Array.isArray(t[0])&&null===t[0][0]?i.Z.LESSER_OR_EQUALS:Array.isArray(t[0])&&null===t[0][1]?i.Z.GREATER_OR_EQUALS:i.Z.BETWEEN:i.Z.IN}}},9462:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var i=r(38325),s=r(68831),n=r(96470),o=r(99689),a=r(2843),l=r(29717),u=r(84749),d=r(4429),c=r(53018),h=r(70974),p=r(68955),g=r(70352),m=r(69985),_=r(76133),f=r(42669),y=r(29388);class b extends i{constructor(e,t){super(e),this._metadataHolder=t}getTopics(){return[new s.Z(o.Z.SELECTION),new s.Z(o.Z.GLOBAL_FILTER_PREFLIGHT),..._.Z.enums().map((e=>new n.Z(e,!1)))]}_onFulfilled(e,t,r){if(e instanceof a.Z)this._handleSelectionMessage(e);else if(e instanceof y.Z)this._handleTargetedFiltersMessage(e);else if(e instanceof l.Z)this._handleUpdateFiltersMessage(e);else if(e instanceof u.Z)this._handleRemoveFilterGroupMessage(e);else{if(!(e instanceof h.Z))throw new Error(`Unexpected message type: '${e.getType().name}'.`);this._handleFilterPreflightMessage(e)}}_handleSelectionMessage(e){if(e.getSelectionType()===m.Z.PRIMING)return;const t=e.getFilterColumns(),r=new f.Z(this._metadataHolder.getMetadata(),t);e.getDataSources().forEach((i=>{r.traverse(i,((r,i,s,n)=>this._runtimeConnector.publish(new d.Z(this.getId(),new p.Z(e.getFilterOperator(),i,[s],(new g.Z).getFilterValues(e.getFilterValues(),t.length,n)),_.Z.FACETING,e.isFilterable(),r,e.getPublisherId()))))}))}_handleTargetedFiltersMessage(e){const t=e.getFilters()[0];new f.Z(this._metadataHolder.getMetadata(),t.getColumns()).traverse(t.getDataSource(),((r,i,s,n)=>this._runtimeConnector.publish(new d.Z(this.getId(),new p.Z(t.getOperator(),i,[s],t.getValues()),_.Z.TEMPORARY,e.shouldApplyFilter(),r,e.getPublisherId(),e.getTargetedLensIds()))))}_handleUpdateFiltersMessage(e){e.getFilters().forEach((t=>{new f.Z(this._metadataHolder.getMetadata(),t.getColumns()).traverse(t.getDataSource(),((r,i,s,n)=>{this._runtimeConnector.publish(new d.Z(this.getId(),new p.Z(t.getOperator(),i,[s],t.getValues()),e.getFilterType(),e.shouldApplyFilter(),r,e.getPublisherId()))}))}))}_handleRemoveFilterGroupMessage(e){const t=new f.Z(this._metadataHolder.getMetadata(),e.getFilterColumns());e.getDataSources().forEach((e=>t.traverse(e,((e,t,r,i)=>{this._runtimeConnector.publish(new c.Z(this.getId(),[t],e))}))))}_handleFilterPreflightMessage(e){const t=[];e.filters.forEach((e=>{new f.Z(this._metadataHolder.getMetadata(),e.getColumns()).traverse(e.getDataSource(),((r,i,s,n)=>{t.push(new p.Z(e.getOperator(),i,[s],e.getValues()))}))})),this._runtimeConnector.publish(new h.Z(this.getId(),t))}}},42669:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i=r(57446),s=r(6597),n=r(1209),o=r(61506),a=r(22058),l=r(86473),u=r(12035),d=r(84985),c=r(86866);const h=["Alias","Email","FirstName","IsActive","LastName","LastReferencedDate","LastViewedDate","Name","Phone","ProfileId","Title","Type","Username","UserRoleId"];class p{constructor(e){this._dashboardMetadata=e}async getLinks(){const e=this._dashboardMetadata.getLenses().filter((e=>null!=e.getSObject()||e.getType()===c.Z.SOQL.code)),t=[...new Set(e.map((e=>c.Z.fromCode(e.getType()).getDefinition().getDataSources(e)[0]?.getName())).filter(Boolean))],r=[];for(const e of t||[]){(await o.Z.get(a.Z).getParentSObjectsInfo(e,!0,t)||[]).forEach((async t=>{if(this._isRelationshipExcluded(t.sObject,e))return;(await new l.Z(t.sObject).getXMD()).getFields().forEach((i=>{if(i.getType()!==d.Dimension&&i.getType()!==d.Date||null==t.relationshipName)return;if(t.isPolymorphic&&!h.includes(i.getName()))return;const s=`${t.sObject}__${e}__${i.getName()}`,n=new u.Z({name:s,label:`${t.sObject}: ${i.getName()}, ${e}: ${t.relationshipName}.${i.getName()}`,fields:[{fieldName:i.getName(),dataSourceName:t.sObject,dataSourceType:"sobject"},{fieldName:`${t.relationshipName}.${i.getName()}`,dataSourceName:e,dataSourceType:"sobject"}]});r.push(n)}))}))}return Promise.resolve(r)}_isRelationshipExcluded(e,t){return(this._dashboardMetadata.getExcludedDataSourceRelationships()||[]).some((r=>r.getFromDataSource()===e&&r.getToDataSource()===t))}}class g{constructor(e){this._dashboardMetadata=e}async getLinks(){return new p(this._dashboardMetadata).getLinks()}}class m{constructor(e,t){this._dashboardMetadata=e,this._filterColumns=t,this._filterColumnNames=new Set,this._filterColumnMap=new Map,this._filterColumnIndexMap=new i.Z;for(let e=0;e<this._filterColumns.length;e++){const t=this._filterColumns[e],r=t.getName();this._filterColumnNames.add(s.ZP.isNewDate(t)&&s.ZP.getDateFieldName(t)||r),this._filterColumnMap.set(r,t),this._filterColumnIndexMap.set(r,e)}}async traverse(e,t){const r=e.getType().getCode(),i=e.getName();let s=this._dashboardMetadata.getDataSourceLinks();if(this._dashboardMetadata.isAutomaticLinkingEnabled()){const e=await new g(this._dashboardMetadata).getLinks();s=s.concat(e)}for(const o of s){const s=o.getField(r,i,this._filterColumnNames,!1);if(null==s)continue;const a=s.getFieldName();for(const s of o.getFields())if(s.getDataSourceType()!==r||s.getDataSourceFullyQualifiedName()!==i){const r=n.Z.fromLinkedField(s);if(e.isEqual(r))continue;if(!r.doesSupportFaceting())continue;this._getLinkedFilterColumns(a,s).forEach(((e,i)=>{t(o.getName(),r,e,this._filterColumnIndexMap.get(i).getOrElse((()=>{throw new Error(`Expected filter column index to be set for filter column "${a}".`)})))}))}}}_getLinkedFilterColumns(e,t){const r=new Map;return this._filterColumnMap.forEach(((i,n)=>{if(s.ZP.getDateFieldName(i)===e){const e=s.ZP.getDateGrain(i),o=t.getFieldName();e&&r.set(n,i.getType().of(`${e}_${o}`,[e,o]))}else n===e&&r.set(e,i.getType().of(t.getFieldName()))})),r}}},84052:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(57446),n=r(96900),o=r(76133);const a=new Set([o.Z.GLOBAL,o.Z.EXTERNAL]);class l{constructor(e,t,r,i,s=!1,n,o){this._senderHash=e,this._filterType=t,this._filter=r,this._isLinked=i,this._isExternal=s,this._originalPublisherId=n,this._filterReceiverIds=o}getSenderHash(){return this._senderHash}getType(){return this._filterType}isLinked(){return this._isLinked}isGlobal(){return a.has(this._filterType)}isExternal(){return this._filterType===o.Z.EXTERNAL||this._isExternal}getOriginalPublisherId(){return this._originalPublisherId}getFilter(){return this._filter}getFilterReceiverIds(){return this._filterReceiverIds}}class u{constructor(e){this._dataSource=e,this._senderFilters=new Map,this._groupSenders=new s.Z,this._senderGroups=new s.Z}getDataSource(){return this._dataSource}set(e,t,r,i,s,n,o,a){this._groupSenders.getOrSet(t,(()=>new Set)).add(e),this._senderGroups.set(e,t),this._senderFilters.set(e,new l(e,r,i,s,n,o,a))}clear(e){if(!this._senderFilters.has(e))return!1;this._senderFilters.delete(e);const t=this._senderGroups.get(e).getOrElse((()=>{throw new Error(`Expected group to exist for sender "${e}".`)})),r=this._groupSenders.get(t).getOrElse((()=>{throw new Error(`Expected senders to exist for group "${t}".`)}));return r.delete(e),0===r.size&&this._groupSenders.delete(t),this._senderGroups.delete(e),!0}clearGroup(e){this._groupSenders.get(e).getOrElse((()=>new Set)).forEach(this.clear.bind(this))}isEmpty(){return 0===this._senderFilters.size}getFilterEntries(e,{excludedPublisherIds:t,excludeLinked:r=!1,excludeExternal:s=!1,receiveFacetMode:a=n.Z.NONE,receiveFacetSteps:l=new Set}={}){const u=new Set(e),d=[];return this._senderFilters.forEach(((e,n)=>{if(((0,i.isEmpty)(t)||!t.includes(e.getOriginalPublisherId()))&&u.has(e.getType())&&(!s||!e.isExternal())&&(!r||!e.isLinked())&&(e.getType()!==o.Z.FACETING||a.shouldFilter(e.getOriginalPublisherId(),l))&&(e.getType()!==o.Z.TEMPORARY||!t||e.getFilterReceiverIds()?.includes(t[0])))return d.push(e)})),d}collate(e,t,r,i,s){const a=[],l=r?this.getFilterEntries([o.Z.EXTERNAL],{excludedPublisherIds:e}):[];t&&a.push(...this.getGlobalFilterEntries({excludedPublisherIds:e}));const u=this.getFilterEntries([o.Z.TEMPORARY],{excludedPublisherIds:e,receiveFacetMode:i,receiveFacetSteps:s})[0];return u&&e&&e.push(u.getOriginalPublisherId()),i!==n.Z.NONE&&a.push(...this.getFilterEntries([o.Z.FACETING],{excludedPublisherIds:e,receiveFacetMode:i,receiveFacetSteps:s})),u&&a.push(u),a.push(...l),a.map((e=>e.getFilter()))}getGlobalFilterEntries({excludedPublisherIds:e,excludeLinked:t=!1,excludeExternal:r=!0}={}){const i=this.getFilterEntries([o.Z.EXTERNAL],{excludedPublisherIds:e,excludeLinked:t}),s=new Set(i.map((e=>e.getFilter().getColumnHash()))),n=r?[]:i;return this.getFilterEntries([o.Z.GLOBAL],{excludedPublisherIds:e,excludeLinked:t}).forEach((e=>{s.has(e.getFilter().getColumnHash())||n.push(e)})),n}}},70352:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{getFilterValues(e,t,r){if(!Array.isArray(e[0])||e[0].length!==t)return e;const i=new Set;for(const t of e)i.add(t[r]);return Array.from(i)}}},72063:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(90456),s=r(2843);class n{constructor(e){this._dataSource=e}isOfTopic(e){return e instanceof s.Z&&e.isFilterable()&&e.hasDataSource(this._dataSource)}getHash(){return`FACETING:${this._dataSource.getHash()}`}}var o=r(96470),a=r(29388);class l{#Qe;constructor(e){this.#Qe=e}isOfTopic(e){return e instanceof a.Z&&e.getTargetedLensIds().includes(this.#Qe)}getHash(){return`TARGETED_FILTER:${this.#Qe}`}}var u=r(76133),d=r(96900);class c{static getTopics(e,t,r){const i=t.isUsingGlobalFilters(r),s=t.getReceiveFacetMode(r),a=[];for(const t of e)s!==d.Z.NONE&&a.push(new n(t),new o.Z(u.Z.FACETING,!0,t)),s===d.Z.ALL&&a.push(new o.Z(u.Z.EXTERNAL,!0,t)),i&&a.push(new o.Z(u.Z.GLOBAL,!0,t));return a.push(new l(r.getId())),a}static getDataSourceFilters(e,t,r,s,n,o){const a=t.getReceiveFacetMode(r),l=o?new Set(Array.from(t.getReceiveFacetSteps(r),(e=>(0,i.$)(e,o)))):t.getReceiveFacetSteps(r);return e.getCollatedFilters(s,[n],t.isUsingGlobalFilters(r),a===d.Z.ALL,a,l)}}},96900:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(69370);class n extends s.Z{constructor(e,t){super(),this._shouldFilter=e,this._individualStepsEnabled=t}getLabel(){return i.Z.getLabel("ReceiveFacetMode",this.code)}getCode(){return this.code}shouldFilter(e,t=new Set){return this._shouldFilter(e,t)}areIndividualStepsEnabled(){return this._individualStepsEnabled}}n.add("ALL","all",new n((()=>!0),!1)).add("INCLUDE","include",new n(((e,t)=>t.has(e)),!0)).add("EXCLUDE","exclude",new n(((e,t)=>!t.has(e)),!0)).add("NONE","none",new n((()=>!1),!1)).finish()},10894:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._dataSourceFilter=e}toJson(){const e=this._dataSourceFilter.getColumns().map((e=>e.getValue()));return[1===e.length?String(e[0]):e,this._dataSourceFilter.getValues(),this._dataSourceFilter.getOperator().code]}}},85434:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i=r(96486),s=r(14201),n=r(32024),o=r(81693),a=r(72713),l=r(59958),u=r(68955),d=r(61055),c=r(1209);class h{getCompactFormFilters(e,t){return e.filter(this._isFilterValid.bind(this)).map((e=>this._getCompactFormFilter(e,t)))}getCompactFormSourceFilters(e,t,r,i){let o=[];if(t.length>0){const e=t[0],r=e[0],i=e[1][0],s=e[3];o=r.map((e=>new u.Z(d.Z.MATCHES,s,[e],i)))}const a={};if(o.concat(e).forEach((e=>{if(this._isFilterValid(e)){const t=e.getDataSource().getName(),s=i?.getSourceFilterKey(t)??t;null==a[s]&&(a[s]={filters:[]});const o=r.get(t),l=this._getCompactFormFilter(e,o,t,i),u=l[0],d=l[2];this._isFilterConversionNeeded(o,u,d)&&(l[1]=l[1][0],this._isDateRangeFilter(o,u,d)&&(l[2]=n.Z.DATE_BETWEEN.code)),a[s].filters.push(l)}})),o.length>1){const t=o.length,r=new s.ZP;r.validate(r.getDefaultOR(t),t),e.forEach(((e,i)=>r.insert(t+i+1))),a[o[0].getDataSource().getName()].booleanFilterLogic=r.stringify()}return a}_getCompactFormFilter(e,t,r,i){const s=e.getColumns().map((e=>i?.isJoined?(0,l.Zs)(e.getValue(),i.getDataSourceAliasBySourceName(r)):e.getValue())),n=1===s.length?s[0]:s,o=e.getOperator().code;let a;return a=t?.isDateDimension(n)&&this._isNullFilter(o)?[]:this._normalizeFilterValues(s,e.getValues()),[n,a,o]}_normalizeFilterValues(e,t){const r=e.some((e=>Array.isArray(e)));return t.map((t=>r?Array.isArray(t)?t.map(((t,r)=>this._normalizeFilterValue(e[r],t))).flat():this._normalizeFilterValue(e[0],t):t))}_normalizeFilterValue(e,t){return Array.isArray(e)&&e.length>1&&null==t?Array(e.length).fill(null):a.isCompoundStr(t)?a.compoundStrToCompoundDim(t):t}_isFilterValid(e){return(!(0,i.isEmpty)(e.getValues())||this._isNullFilter(e.getOperator().getCode()))&&(e.getDataSource().getType()!==c.Z.REPORT||(void 0===e.getSequenceNumber()||isNaN(e.getSequenceNumber())))}_isNullFilter(e){return e===o.Z.IS_NULL.getCode()||e===o.Z.IS_NOT_NULL.getCode()}_isFilterConversionNeeded(e,t,r){return e.isMeasure(t)||this._isDateRangeFilter(e,t,r)}_isDateRangeFilter(e,t,r){return e.isDateDimension(t)&&o.Z.fromCode(r).isRange()}}},76133:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("FACETING",new s).add("GLOBAL",new s).add("EXTERNAL",new s).add("TEMPORARY",new s).finish()},25945:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(57446),s=r(53941);class n{constructor(e){this._message=e}getMessage(){return this._message}}var o=r(41992),a=r(47333);class l{constructor(e=[]){this.reset();for(const t of e){const e=t.getMessage(),r=e.getPublisherId();this._publisherCache.getOrSet(r,(()=>new i.Z)).set(e.getType().name,t),this._messageTypeCache.getOrSet(e.getType(),(()=>new i.Z)).set(r,t)}}getByPublisher(e){return Array.from(this._publisherCache.get(e).getOrElse((()=>new i.Z)).values())}getByMessageType(e){return Array.from(this._messageTypeCache.get(e).getOrElse((()=>new i.Z)).values())}reset(){this._publisherCache=new i.Z,this._messageTypeCache=new i.Z}pre(e){const t=e.getPublisherId();return e instanceof a.Z&&e.getNewStatus()===o.Z.DISCONNECTING?(this._publisherCache.delete(t),this._messageTypeCache.forEach(((e,r)=>{r.has(t)&&r.delete(t)}))):(this._publisherCache.getOrSet(t,(()=>new i.Z)).set(e.getType().name,new n(e)),this._messageTypeCache.getOrSet(e.getType(),(()=>new i.Z)).set(t,new n(e))),!0}post(e){return s.Z.ALL_GOOD}}},95783:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var i=r(96486),s=r(81693),n=r(53941),o=r(84052),a=r(2843),l=r(29717),u=r(47333),d=r(29388),c=r(65219),h=r(53018),p=r(4429),g=r(41992),m=r(69985),_=r(76133);class f{static getSenderGroupHash(e,t){return e+"#"+t.name}static getSenderHash(e,t,r){return this.getSenderGroupHash(e,t)+"#"+r.getColumnHash()}static getLinkedSenderGroupHash(e,t){return`dataSourceLinking#${e}#${t.name}`}static getLinkedSenderHash(e,t,r,i){return this.getLinkedSenderGroupHash(e,t)+"#"+r+"#"+i.getColumnHash()}constructor(e=new Map){this._states=e}hasStateForDataSource(e){return this._states.has(e.getHash())}getStates(){return this._states}getState(e){const t=e.getHash(),r=this._states.get(t);if(null==r)throw new Error(`No state for data source with hash ${t}.`);return r}reset(){this._states=new Map}pre(e){return e instanceof a.Z?this._handleSelectionMessage(e):e instanceof d.Z?this._handleTargetedFiltersMessage(e):e instanceof l.Z?this._handleUpdateFiltersMessage(e):e instanceof c.Z?this._handleRemoveFilterGroupMessage(e):e instanceof u.Z&&this._handleStatusChangeMessage(e),!0}post(e){return n.Z.ALL_GOOD}_handleSelectionMessage(e){if(e.getSelectionType()===m.Z.PRIMING)return;const t=e.getPublisherId(),r=_.Z.FACETING,n=f.getSenderGroupHash(t,r);e.getDataSources().forEach((o=>{const a=this._getState(o);if(a.clearGroup(n),!e.isFilterable()||(0,i.isEmpty)(e.getFilterValues())&&s.Z.fromCode(e.getFilterOperator().code).isRange())a.isEmpty()&&this._states.delete(o.getHash());else{const i=e.getFilterOperator().of(o,e.getFilterColumns(),e.getFilterValues(),!1,!1);a.set(f.getSenderHash(t,r,i),n,r,i,!1,e.getSelectionType()===m.Z.EXTERNAL,t)}}))}_handleTargetedFiltersMessage(e){const t=e.getFilters()[0],r=_.Z.TEMPORARY,i=t.getDataSource(),s=this._getState(i);e.shouldApplyFilter()?s.set(this._getSenderHash(e,r,t),this._getSenderGroupHash(e,r),r,t,e instanceof p.Z,!1,e.getPublisherId(),e.getTargetedLensIds()):(s.clear(this._getSenderHash(e,r,t)),s.isEmpty()&&this._states.delete(i.getHash()))}_handleUpdateFiltersMessage(e){e.getFilters().forEach((t=>{const r=e.getFilterType(),i=t.getDataSource(),s=this._getState(i);e.shouldApplyFilter()?s.set(this._getSenderHash(e,r,t),this._getSenderGroupHash(e,r),r,t,e instanceof p.Z,!1,e instanceof p.Z?e.getOriginalPublisherId():e.getPublisherId(),e instanceof p.Z?e.getTargetedLensIds():void 0):(s.clear(this._getSenderHash(e,r,t)),s.isEmpty()&&this._states.delete(i.getHash()))}))}_handleRemoveFilterGroupMessage(e){e.getDataSources().forEach((t=>{if(!this.hasStateForDataSource(t))return;const r=this.getState(t);e.getFilterTypes().forEach((t=>{r.clearGroup(this._getSenderGroupHash(e,t))})),r.isEmpty()&&this._states.delete(t.getHash())}))}_handleStatusChangeMessage(e){if(e.getNewStatus()!==g.Z.DISCONNECTING)return;const t=e.getPublisherId();this._states.forEach(((e,r)=>{e.clearGroup(f.getSenderGroupHash(t,_.Z.FACETING)),e.isEmpty()&&this._states.delete(r)}))}_getState(e){const t=e.getHash();let r=this._states.get(t);return null==r&&(r=new o.Z(e),this._states.set(t,r)),r}_getSenderGroupHash(e,t){return e instanceof h.Z||e instanceof p.Z?f.getLinkedSenderGroupHash(e.getLinkName(),t):f.getSenderGroupHash(e.getPublisherId(),t)}_getSenderHash(e,t,r){return e instanceof p.Z?f.getLinkedSenderHash(e.getLinkName(),t,e.getOriginalPublisherId(),r):f.getSenderHash(e.getPublisherId(),t,r)}}},53941:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{}s.build(s,["ALL_GOOD","REMOVE_FILTER"])},70804:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(53941),s=r(1732),n=r(57840);class o{constructor(e,t){this._widgetIds=new Set(e),this._onReady=t}reset(){}pre(e){return!0}post(e){return e instanceof n.Z&&this._widgetIds.delete(e.getWidgetId()),(e instanceof n.Z||e instanceof s.Z)&&0===this._widgetIds.size?(this._onReady(),i.Z.REMOVE_FILTER):i.Z.ALL_GOOD}}},84893:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(95435),s=r(68831);function n(e,t){const r=[];for(const n of e)if(n instanceof i.Z)for(const e of t.getByPublisher(n.getPublisherId()))n.isOfTopic(e.getMessage())&&r.push(e.getMessage());else if(n instanceof s.Z)for(const e of t.getByMessageType(n.getMessageType()))n.isOfTopic(e.getMessage())&&r.push(e.getMessage());return r}},99891:(e,t,r)=>{"use strict";r.d(t,{C3:()=>n});var i=r(69370);class s{constructor(e){this._interactionType=e}getInteractionType(){return this._interactionType}getInteractionColumn(){throw new Error("Not Implemented")}getEvent(){throw new Error("Not Implemented")}getHandler(e){throw new Error("Not Implemented")}getExtra(){throw new Error("Not Implemented")}}class n extends s{constructor(e,{widgetMetadata:t,interactionColumn:r,event:i,handlers:s,extra:n={}}){super(e),this._widgetMetadata=t,this._interactionColumn=r,this._event=i,this._handlers=s,this._extra=n}getWidgetMetadata(){return this._widgetMetadata}getInteractionColumn(){return this._interactionColumn}getInteractionData(){return this._interactionData}getEvent(){return this._event}getHandler(e){return null!=this._handlers?this._handlers[e.getCode()]:()=>{}}getExtra(){return this._extra}setInteractionData(e){this._interactionData=e}}class o extends i.Z{getCode(){return this.code}}o.add("BEGIN_INTERACTION","begin_interaction",new o).add("END_INTERACTION","end_interaction",new o).finish()},70100:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{getCode(){return this.code}}s.add("HEADER","header",new s).add("VALUE","value",new s).add("SUMMARY","summary",new s).add("COLUMN_SELECTION","column_selection",new s).add("RECORD_ACTION","record_action",new s).add("SHOW_GROUPS","show_groups",new s).add("HIDE_GROUPS","hide_groups",new s).add("FREEZE_COLUMNS","freeze_columns",new s).add("RESIZE_COLUMN","resize_column",new s).add("MARKER","marker",new s).add("ADD_TOOLTIP_WIDGET","add_tooltip_widget",new s).add("EDIT_TOOLTIP_WIDGET","edit_tooltip_widget",new s).add("DELETE_TOOLTIP_WIDGET","delete_tooltip_widget",new s).add("REMOVE_COLUMN","remove_column",new s).add("MOVE_COLUMN","move_column",new s).add("SORT","sort",new s).add("PANEL_UPDATE","panel_update",new s).add("OTHER","other",new s).finish()},46144:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(81720);class s extends i.Z{select(e,t){return{}}}},49171:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486),s=r(81720);class n extends s.Z{#Ye;#Ke;select(e,t){let r={};if(!this._hasGroupings()&&!this._hasMeasure())return r;if(this._hasGroupings()&&!this._hasMeasure())(0,i.extend)(r,this.#Ye);else if(!this._hasGroupings()&&this._hasMeasure())r={...r,[this.#Ke]:e[0][this.#Ke]};else if(this._hasGroupings()&&this._hasMeasure()){(0,i.extend)(r,this.#Ye);for(const t of Array.from(e)){(0,i.every)((0,i.keys)(this.#Ye),(e=>t[e]===this.#Ye[e]))&&(r={...r,[this.#Ke]:t[this.#Ke]})}}return r}setGroupings(e){this.#Ye=e}get groupings(){return this.#Ye}setMeasureName(e){this.#Ke=e}get measureName(){return this.#Ke}_hasGroupings(){return!(0,i.isEmpty)(this.#Ye)}_hasMeasure(){return!(0,i.isEmpty)(this.#Ke)}}},44458:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486),s=r(83732);class n{constructor(e,t){this._data=e,this._metadata=t}getFilteredData(e){const t={},r=Array.isArray(e)?e:[e];return this.getColumns(r).forEach((e=>Object.defineProperty(t,e.getName(),{value:this._data[e.getName()],enumerable:!0}))),t}getColumns(e){const t=[],r=Array.isArray(e)?e:[e];return Object.keys(this._data).forEach((e=>{const i=this.getColumn(e);i&&r.includes(i.getType())&&t.push(i)})),t}getColumn(e){return this._metadata.getColumn(e)}getColumnValue(e){const t=e instanceof s.Z?e.getName():e;return this._data[t]}hasColumn(e){const t=Array.isArray(e)?e:[e],r=this.getColumns(t);return!(0,i.isEmpty)(r)}}},81720:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{select(e,t){throw new Error("Not implemented")}setGroupings(e){throw new Error("Not implemented")}setMeasureName(e){throw new Error("Not implemented")}}},86866:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var i=r(69370),s=r(90554),n=r(1806),o=r(96486),a=r(61506),l=r(22058),u=r(1611),d=r(61818),c=r(66537),h=r(72713),p=r(78190),g=r(8429),m=r(8644),_=r(62133),f=r(81693),y=r(84985);class b{constructor(e,t,r=!1,i=null){this._filters=e,this._extendedMetadata=t,this._isCompactFormV2=r,this._sourceName=i}describe(){try{const e=[];return this._filters.forEach((t=>{const r=t[0],i=this._sanitizeFilterValues(t[1]),s=null!=t[2]?f.Z.fromCode(t[2]):this._getDefaultOperator(i),n=_.fullDimensionOrMeasureText(this._extendedMetadata,r);switch(s){case f.Z.IS_NULL:e.push(g.Z.getLabel("CompactFormFilterDescriber","isNullFilter",n));break;case f.Z.IS_NOT_NULL:e.push(g.Z.getLabel("CompactFormFilterDescriber","isNotNullFilter",n));break;default:{const t=this._getFilterFieldType(r);e.push(g.Z.getLabel("CompactFormFilterDescriber","filter",n,s.getNaturalLanguageText(t,{numValues:this._getNumValues(s,i),isPastDateRange:this._isPastDateRange(s,i)}),this._serializeFilterValues(r,s,i)))}}})),this._sourceName?`${this._sourceName}: ${e.join(", ")}`:e.join(", ")}catch(e){return""}}_sanitizeFilterValues(e){return(null!=e?(0,o.castArray)(e):[]).map((e=>h.isCompoundDim(e)?h.compoundDimToCompoundStr(e):e))}_getDefaultOperator(e){return Array.isArray(e[0])?null!=e[0][0]&&null==e[0][1]?f.Z.GREATER_OR_EQUALS:null==e[0][0]&&null!=e[0][1]?f.Z.LESS_OR_EQUALS:f.Z.BETWEEN:f.Z.IN}_getFilterFieldType(e){const t=this._extendedMetadata.getField(e);if(null!=t)return t.getType();if("string"==typeof e)throw new Error(`Field ${JSON.stringify(e)} does not exist.`);const r=e.map((e=>{const t=this._extendedMetadata.getDateTimeFieldGrain(e);if(null!=t)return t.getDateTimeField();{const t=this._extendedMetadata.getField(e);if(null==t)throw new Error(`Field ${JSON.stringify(e)} does not exist.`);return t}}));if(0===r.length)throw new Error("Invalid empty set of filter fields.");return r[0]}_serializeFilterValues(e,t,r){if(t.isRange()){const t=this._getFilterFieldType(e),i=this._getRangeValues(r);if(!Array.isArray(i)||t!==y.Measure&&t!==y.Date)throw new Error("Invalid filter values.");return this._formatRange(e,i)}return 0===r.length?g.Z.getLabel("InsightsSelector","all"):g.Z.toSentence(r.map((t=>_.fullKeyText(this._extendedMetadata,h.ensureCompoundStr(e),t))),{connector:"or"})}_formatRange(e,[t,r]){if(null==t){if(null==r)throw new Error("Invalid filter.");return this._formatRangePart(e,r)}return null==r||(0,o.isEqual)(t,r)?this._formatRangePart(e,t):g.Z.getLabel("FilterValuesNaturalLanguage","to",this._formatRangePart(e,t),this._formatRangePart(e,r))}_formatRangePart(e,t){if(this._getFilterFieldType(e)===y.Measure){if("number"!=typeof t)throw new Error(`Invalid value for measure filter: ${String(t)}.`);return _.formatNumber(this._extendedMetadata,e,t)}return Array.isArray(t)?_.getDateLabel(t[0],t[1]):m.formatDateInUtc(new Date(t),m.DATE_SHORT)}_getNumValues(e,t){if(e.isRange()){const e=this._getRangeValues(t);if(!Array.isArray(e))throw new Error("Invalid filter values.");let r=0;return null!==e[0]&&r++,null===e[1]||(0,o.isEqual)(e[0],e[1])||r++,r}return t.length}_isPastDateRange(e,t){if(!e.isRange())return!1;const r=this._getRangeValues(t);if(!Array.isArray(r))throw new Error("Invalid filter values.");const i=r[1];return Array.isArray(i)?i[1]<0:"number"==typeof i&&i<Date.now()}_getRangeValues(e){return this._isCompactFormV2?e:e[0]}}var C=r(33524),E=r(36836),S=r(96900);class T{#be;#Ce;constructor(e,t){this.#be=e,this.#Ce=t}getStep(){return this.#be}getType(){return this.#Ce}toString(){return`${this.#be}.${this.#Ce}`}}class I{hasLegacyRangeBehavior=!1;hasLegacyDatasetsArray=!1;canQueryContainUserTokens=!0;isBroadcastingFacetingEditable=!0;isReceivingFacetingEditable=!0;isTargetedReceiveFacetingSupported=!1;supportsSqlQuery=!0;isQueryBindable=!0;usesNewBindings=!0;canHaveStartValueBindings=!0;isEveryQueryResultPublished=!0;canSelectModes=!1;canBeDragged=!0;canConfigureConditionalFormatting=!0;canQueryContainDynamicData=!1;_queryBindablePaths=["query","visualizationParameters.parameters.columnMap"];_queryDynamicDataPaths=["query"];_dynamicDataValuesPaths=["values"];canUseGlobalFilters(e){return!1}canEdit(e){return!1}canClone(e){return this.canEdit(e)}getDataSourceType(e){throw new Error("Not implemented.")}canExplore(){return!1}canModifyActions(){return!0}canDetermineInitialDataSources(e,t){return!0}getDataSources(e){throw new Error("Not implemented.")}getParentDataSources(e){return Promise.resolve(void 0)}hasLegacyGlobalFilterBehavior(e){return!1}getQuery(e){return e.getQuery()}getQueryRefreshingParts(e){return e.getQuery()}hasQueryBindings(e,t){return!!this.isQueryBindable&&this._getBindingsTraverser(e).containsBindings(this.getQueryBindableJson(t))}getQueryBindableJson(e){return(0,o.pick)(e.getJson(),this._queryBindablePaths)}getQueryDynamicDataJson(e){return(0,o.pick)(e.getJson(),this._queryDynamicDataPaths)}getDynamicDataValuesJson(e){return(0,o.pick)(e.getJson(),this._dynamicDataValuesPaths)}shardWithNewQuery(e,t){return e.shard((0,o.defaults)({query:t},e.getJson()))}getBoundQueryReferences(e,t){if(!this.isQueryBindable)return[];try{return Array.prototype.concat.apply([],this._getBindingsTraverser(e).getBoundReferences(this.getQueryBindableJson(t)))}catch(e){return[]}}sanitizeOriginalQuery(e){return String(e)}sanitizeFinalQuery(e){return String(e)}normalizeQuery(e){return e}isBroadcastingFaceting(e){return!1}getReceiveFacetMode(e){return S.Z.NONE}getReceiveFacetSteps(e){return new Set}isUsingGlobalFilters(e){return!1}getValidSelectModes(){return n.SelectMode.enums().slice(0,-1)}getDefaultParameters(e=n.SelectMode.SINGLE){return this._getDefaultParameters(e)}inRangeSelectMode(e){return e.getSelectMode()===n.SelectMode.RANGE}hasStartValueBindings(e,t){return e.getNewTraverser().containsBindings(t.getStart())}getBoundStartValueReferences(e,t){if(!this.canHaveStartValueBindings)return[];try{return Array.prototype.concat.apply([],e.getNewTraverser().getBoundReferences(t.getStart()))}catch(e){return[]}}isInputSelectMode(){return!1}getInitialFilterValues(e){return e.getStart()}getStartValues(e){return e.getFilterValues()}canDetermineFilteringColumns(e,t){return!1}getFilteringColumns(e){throw new Error("Cannot determine filtering columns.")}canDetermineQueryFilters(e){return!1}getRawFilters(e){return new Map}getFilters(e){return[]}getOrder(e,t,r){}getLimit(e){}getEditDisabledMessage(){return g.Z.getLabel("DashboardWidgetAction","editDisabledInvalidStepType")}getFinalQueryEditorLanguage(e){}_getDefaultParameters(e){return{}}_getBindingsTraverser(e){return e.getTraverser(this.usesNewBindings)}canWatch(e){return!1}canAddNotification(e){return!1}canSubscribe(e){return!1}canDownloadTabular(e){return!0}getDynamicValueQueryReferences(e){if(!this.canQueryContainDynamicData)return[];const t=this.getDynamicDataValuesJson(e);if((0,o.isEmpty)(t)||(0,o.isEmpty)(t.values))return[];const r=[],{values:i={}}=t;for(const e of Object.keys(i)){const t=i[e],s=t.step,n=t.sourceType;r.push(new T(s,n))}return r}}var v=r(1209);class R extends I{getDataSourceType(e){return v.Z.DATASET}canUseGlobalFilters(e){return!0}canExplore(){return!0}getFinalQueryEditorLanguage(e){return"saql"}canEdit(e){return!0}sanitizeFinalQuery(e){return C.toSanitizedString(e)}normalizeQuery(e){return E.T(e)}}class w extends R{hasLegacyDatasetsArray=!0;originalQueryEditorLanguage="json";canHaveStartValueBindings=!1;canDetermineInitialDataSources(e,t){return null!=t.getDataset(0)}sanitizeOriginalQuery(e){return JSON.stringify(e,null,4)}isUsingGlobalFilters(e){return e.useGlobal()}canDetermineFilteringColumns(e,t){return!this.hasQueryBindings(e,t)&&!this.inRangeSelectMode(t)}canDetermineQueryFilters(e){return!this._hasPigql(this.getQuery(e))}getRawFilters(e){const t=(e.queryWithFilters.filters||[]).filter((e=>Array.isArray(e))),r=new Map;return(0,o.isEmpty)(t)||r.set(e.dataSources[0].getName(),t),r}getFilters(e){const t=[];return this.getRawFilters(e).forEach(((r,i)=>{if(r.length>0){null!=e.queryWithFilters.sources?t.push(new b(r,e.extendedMetadatas[e.dataSources.findIndex((e=>e.getName()===i))],!0,i).describe()):r.forEach((r=>{t.push(new b([r],e.extendedMetadatas[e.dataSources.findIndex((e=>e.getName()===i))]).describe())}))}})),t}getOrder(e,t,r){const i=e.queryWithFilters,s=t.getColumns(u.Z.MEASURE);if(!this._hasPigql(i)&&null!=i.order&&s.length)return g.Z.getLabel("DashboardStepDetails","sort",g.Z.getLabel("DashboardStepDetails",i.order&&i.order.length>0&&i.order[0][1].ascending?"sortAscOn":"sortDescOn",r.formatMeasureName(s[0])))}getLimit(e){const t=e.queryWithFilters;if(!this._hasPigql(t)&&null!=t.limit)return g.Z.getLabel("DashboardStepDetails","limit",t.limit)}getDataSources(e){return e.getDatasets().map((e=>v.Z.DATASET.make(e.getFullyQualifiedName())))}_hasPigql(e){return!1}}class A extends w{hasLegacyRangeBehavior=!0;canQueryContainDynamicData=!0;hasLegacyGlobalFilterBehavior(e){return e.isGlobal()&&this._isAttachedToWidgetOfType(e,["globalfilters"])}inRangeSelectMode(e){return super.inRangeSelectMode(e)||this._isAttachedToWidgetOfType(e,["dateselector","rangeselector"])}canDetermineFilteringColumns(e,t){return!this.hasQueryBindings(e,t)&&!this._isDateTimeGrain(t)}getFilteringColumns(e){if(this._isAttachedToWidgetOfType(e,["rangeselector"]))return e.getQueryParameter("sources")?[u.Z.MEASURE.of(e.getQueryParameter("sources")[0].columns[0].field)]:[u.Z.MEASURE.of(e.getQueryParameter("measures")[0][1])];{let t;if(e.getQueryParameter("sources")){const r=(0,p.makeImmutableQuery)(e.getQuery());t=r.isGroupedByAll?[]:r.getSource(0).groups.map((e=>e.json))}else t=e.getQueryParameter("groups")||[];const r=t.map((e=>u.Z.DIMENSION.of(d.getRawAlias(e))));if(!this._isAttachedToWidgetOfType(e,["dateselector"]))return r;const i=r[0],s=h.getInnerStrs(i.getName());return s.length>1?[u.Z.DIMENSION.of(s[0])]:[i]}}getRawFilters(e){const t=e.queryWithFilters;if(this._hasPigql(t))return new Map;if(null!=t.sourceFilters){const e=new Map;for(const r of Object.keys(t.sourceFilters))Array.isArray(t.sourceFilters[r].filters)&&e.set(r,t.sourceFilters[r].filters);return e}if(null!=t.columns){const r=new Map;for(const e of t.columns)if(e.query.filters)for(const t of e.query.filters)Array.isArray(t)&&r.set(JSON.stringify(t),t);const i=new Map;return i.set(e.dataSources[0].getName(),Array.from(r.values())),i}return super.getRawFilters(e)}getDataSourceType(e){return e.getSObject()?v.Z.SOBJECT:e.getCDPObjects()?v.Z.CDP:v.Z.DATASET}getDataSources(e){return e.getSObject()?[v.Z.SOBJECT.make(e.getSObject())]:e.getCDPObjects()?e.getCDPObjects().map((e=>v.Z.CDP.make(e))):super.getDataSources(e)}getFinalQueryEditorLanguage(e){const t=this.getDataSourceType(e);return t===v.Z.SOBJECT||t===v.Z.CDP?"sql":super.getFinalQueryEditorLanguage(e)}getParentDataSources(e){return e.getSObject()?a.Z.get(l.Z).getParentSObjectsInfo(e.getSObject()).then(((e=[])=>e?.map((e=>v.Z.SOBJECT.make(e.sObject)))??[])):Promise.resolve([])}_hasPigql(e){return!(0,o.isEmpty)(e.pigql)}_isAttachedToWidgetOfType(e,t){const r=new Set(t);return e.getAttachedWidgets().some((e=>r.has(e.getType())))}_isDateTimeGrain(e){return(e.getQueryParameter("groups")||[]).some((e=>Array.isArray(e)&&c.hasCode(e[0])))}canWatch(e){return!e.getSObject()&&!e.getConnectionName()&&(0,o.isEmpty)(e.getCDPObjects())}canAddNotification(e){return!e.getSObject()&&!e.getConnectionName()&&(0,o.isEmpty)(e.getCDPObjects())}canSubscribe(e){return!e.getSObject()&&!e.getConnectionName()&&(0,o.isEmpty)(e.getCDPObjects())}canDownloadTabular(e){return!e.getSObject()&&!e.getConnectionName()&&(0,o.isEmpty)(e.getCDPObjects())}}var D=r(86060);var L=r(734);var M=r(66462);class N extends I{isBroadcastingFacetingEditable=!0;isReceivingFacetingEditable=!0;isTargetedReceiveFacetingSupported=!0;canQueryContainDynamicData=!0;_queryBindablePaths=["query","strings","numbers","groups"];canUseGlobalFilters(e){return!0}canEdit(e){return!0}canExplore(){return!0}getDataSourceType(e){return v.Z.DATASET}canDetermineInitialDataSources(e,t){return!this.hasQueryBindings(e,t)}normalizeQuery(e){return e.replace(/;[\n\s]*/g,";")}isBroadcastingFaceting(e){return e.getParameter("broadcastFacet")}getReceiveFacetMode(e){return e.getReceiveFacetMode()?S.Z.fromCode(e.getReceiveFacetMode()):S.Z.ALL}getReceiveFacetSteps(e){return new Set(e.getReceiveFacetSteps())}isUsingGlobalFilters(e){return e.useGlobal()}canDetermineFilteringColumns(e,t){return t.hasUserDefinedMetadata()&&!this._getBindingsTraverser(e).containsBindings((0,o.pick)(t.getJson(),["strings","numbers","groups"]))}getFilteringColumns(e){const t=new Set(e.getParameter("strings")),r=new Set(e.getParameter("numbers"));return e.getParameter("groups").map((function(e){let i;if(t.has(e))i=u.Z.DIMENSION;else{if(!r.has(e))throw new Error(`Unable to determine column type for column "${e}".`);i=u.Z.MEASURE}return i.of(e)}))}getDataSources(e){return Array.from(new M.Z(this.getQuery(e)).getTableNames()).map((e=>v.Z.DATASET.make(e)))}_getDefaultParameters(e){return{broadcastFacet:!0,receiveFacetSource:{mode:S.Z.ALL.getCode(),steps:[]},numbers:[],strings:[],groups:[],selectMode:e.getCode(),useGlobal:!0}}canDownloadTabular(e){return!1}}const O=new Set(["dateselector","rangeselector"]);var P=r(57244);class x extends i.Z{static setDefaults(e,t){return(0,s.deepDefaults)(e,this.fromCode(new n(null,e).getType()).getDefinition().getDefaultParameters(t))}static getDefinitionFromQueryInfo(e,t){return this.fromCode(e.getType()).getDefinition()}constructor(e){super(),this._definition=e}getCode(){return this.code}getDefinition(){return this._definition}getDefaultParameters(e){return Object.assign({type:this.code},this._definition.getDefaultParameters(e))}}x.add("AGGREGATE","aggregate",new x(new class extends A{usesNewBindings=!1;isBroadcastingFacetingEditable=!1;isReceivingFacetingEditable=!1;isBroadcastingFaceting(e){return e.getParameter("isFacet")}getReceiveFacetMode(e){return e.getParameter("isFacet")&&(null==e.getQueryParameter("pigql")||e.getQueryParameter("autoFilter"))?S.Z.ALL:S.Z.NONE}getValidSelectModes(){return[n.SelectMode.NONE,n.SelectMode.SINGLE,n.SelectMode.MULTI,n.SelectMode.SINGLE_REQUIRED,n.SelectMode.MULTI_REQUIRED]}_getDefaultParameters(e){return{isFacet:!0,isGlobal:!1,useGlobal:!0,datasets:[],selectMode:e.getCode(),visualizationParameters:{options:{}}}}canWatch(e){return!0}canAddNotification(e){return!0}canSubscribe(e){return!0}})).add("AGGREGATE_WITH_NEW_BINDINGS","aggregateflex",new x(new class extends A{isTargetedReceiveFacetingSupported=!0;isBroadcastingFaceting(e){return e.getParameter("broadcastFacet")}getReceiveFacetMode(e){return e.getReceiveFacetMode()?S.Z.fromCode(e.getReceiveFacetMode()):S.Z.ALL}getReceiveFacetSteps(e){return new Set(e.getReceiveFacetSteps())}_getDefaultParameters(e){return{broadcastFacet:!0,receiveFacetSource:{mode:S.Z.ALL.getCode(),steps:[]},isGlobal:!1,useGlobal:!0,datasets:[],selectMode:e.getCode(),visualizationParameters:{options:{}}}}})).add("GRAIN","grain",new x(new class extends w{usesNewBindings=!1;isBroadcastingFacetingEditable=!1;isReceivingFacetingEditable=!1;isBroadcastingFaceting(e){return!1}getReceiveFacetMode(e){return e.getParameter("isFacet")?S.Z.ALL:S.Z.NONE}getValidSelectModes(){throw new Error("Selection is not supported for grain lenses.")}getInitialFilterValues(e){throw new Error("Selection is not supported for grain lenses.")}getStartValues(e){throw new Error("Selection is not supported for grain lenses.")}_getDefaultParameters(e){return{isFacet:!0,isGlobal:!1,useGlobal:!0,datasets:[],visualizationParameters:{options:{}}}}})).add("LEGACY_STATIC","static",new x(new class extends I{hasLegacyDatasetsArray=!0;isQueryBindable=!1;canQueryContainUserTokens=!1;isBroadcastingFacetingEditable=!1;isReceivingFacetingEditable=!1;canHaveStartValueBindings=!1;getDataSourceType(e){return v.Z.STATIC}getDataSources(e){return[this._hasDatasetsAndDimensions(e)?v.Z.DATASET.make(e.getDataset(0).getFullyQualifiedName()):v.Z.STATIC.make(e.getId())]}getQuery(e){return e.getValues()}isBroadcastingFaceting(e){return e.getParameter("isFacet")}getValidSelectModes(){return[n.SelectMode.NONE,n.SelectMode.SINGLE,n.SelectMode.MULTI,n.SelectMode.SINGLE_REQUIRED,n.SelectMode.MULTI_REQUIRED]}_getDefaultParameters(e){return{isFacet:!0,selectMode:e.getCode(),datasets:[],dimensions:[]}}_hasDatasetsAndDimensions(e){return!o.isEmpty(e.getDatasets())&&!o.isEmpty(e.getDimensions())}})).add("SAQL","saql",new x(new class extends R{isTargetedReceiveFacetingSupported=!0;originalQueryEditorLanguage="saql";canQueryContainDynamicData=!0;_queryBindablePaths=["query","strings","numbers","groups"];canDetermineInitialDataSources(e,t){return!this.hasQueryBindings(e,t)}sanitizeOriginalQuery(e){return C.toSanitizedString(e)}isBroadcastingFaceting(e){return e.getParameter("broadcastFacet")}getReceiveFacetMode(e){return e.getReceiveFacetMode()?S.Z.fromCode(e.getReceiveFacetMode()):S.Z.ALL}getReceiveFacetSteps(e){return new Set(e.getReceiveFacetSteps())}isUsingGlobalFilters(e){return e.useGlobal()}canDetermineFilteringColumns(e,t){return t.hasUserDefinedMetadata()&&!this._getBindingsTraverser(e).containsBindings(o.pick(t.getJson(),["strings","numbers","groups"]))}getFilteringColumns(e){const t=new Set(e.getParameter("strings")),r=new Set(e.getParameter("numbers"));return e.getParameter("groups").map((function(e){let i;if(t.has(e))i=u.Z.DIMENSION;else{if(!r.has(e))throw new Error(`Unable to determine column type for column "${e}".`);i=u.Z.MEASURE}return i.of(e)}))}getDataSources(e){return Array.from(D.Z.getDatasetIdentifiers(this.getQuery(e))).map((e=>v.Z.DATASET.make(e)))}_getDefaultParameters(e){return{selectMode:e.getCode(),broadcastFacet:!0,receiveFacetSource:{mode:S.Z.ALL.getCode(),steps:[]},useGlobal:!0,numbers:[],groups:[],strings:[]}}canWatch(e){return!0}canAddNotification(e){return!0}canSubscribe(e){return!0}})).add("SOQL","soql",new x(new class extends I{canQueryContainDynamicData=!0;_queryBindablePaths=["query","strings","numbers","groups"];canEdit(e){return!0}canExplore(){return!0}canUseGlobalFilters(e){return!0}getDataSourceType(e){return v.Z.SOBJECT}normalizeQuery(e){return E.T(e)}isBroadcastingFaceting(e){return e.getParameter("broadcastFacet")}getReceiveFacetMode(e){return e.getReceiveFacetMode()?S.Z.fromCode(e.getReceiveFacetMode()):S.Z.ALL}getReceiveFacetSteps(e){return new Set(e.getReceiveFacetSteps())}isUsingGlobalFilters(e){return e.useGlobal()}getDataSources(e){return Array.from(new L.Z(this.getQuery(e)).getSObjectNames()).map((e=>v.Z.SOBJECT.make(e)))}getParentDataSources(e){return a.Z.get(l.Z).getParentSObjectsInfo(this.getDataSources(e)[0].getName()).then(((e=[])=>e?.map((e=>v.Z.SOBJECT.make(e.sObject)))??[]))}_getDefaultParameters(e){return{broadcastFacet:!0,receiveFacetSource:{mode:S.Z.ALL.getCode(),steps:[]},numbers:[],strings:[],groups:[],selectMode:e.getCode(),useGlobal:!0}}canDownloadTabular(e){return!1}})).add("SQL","sql",new x(new N)).add("CDP","cdp",new x(new class extends N{canQueryContainDynamicData=!0;canUseGlobalFilters(e){return!1}getDataSourceType(e){return v.Z.CDP}isUsingGlobalFilters(e){return e.useGlobal()}getDataSources(e){return Array.from(new M.Z(this.getQuery(e)).getTableNames()).map((e=>v.Z.CDP.make(e)))}})).add("STATIC","staticflex",new x(new class extends I{hasLegacyDatasetsArray=!0;isQueryBindable=!1;canQueryContainUserTokens=!1;canBroadcastFaceting=!0;isReceivingFacetingEditable=!1;supportsSqlQuery=!1;getDataSourceType(e){return v.Z.STATIC}canEdit(e){return this._hasValidColumnMetadata(e)}canClone(e){return!1}getDataSources(e){return[v.Z.STATIC.make(e.getId())]}getQuery(e){return e.getValues()}isBroadcastingFaceting(e){return e.getParameter("broadcastFacet")}getEditDisabledMessage(){return g.Z.getLabel("DashboardWidgetAction","editDisabledInvalidStaticFlexStepType")}_hasValidColumnMetadata(e){const t=e.getValues();if((0,o.isEmpty)(t))return!0;const r=e.getColumns();if((0,o.isEmpty)(r))return!1;const i=new Set;for(const[e,t]of Object.entries(r))(0,o.isEmpty)(t)||("aggregate"===t.type?(i.add(t.field),i.add(t.aggregateFunction)):i.add(e));for(const e of Object.keys(t[0]))if(!i.has(e))return!1;return!0}inRangeSelectMode(e){return super.inRangeSelectMode(e)||e.getAttachedWidgets().some((e=>O.has(e.getType())))}getInitialFilterValues(e){const t=e.getStart();return t[Object.keys(t)[0]]}getStartValues(e){return{[e.getFilterColumns()[0].getName()]:e.getFilterValues()}}canDetermineFilteringColumns(e,t){return!0}getFilteringColumns(e){const t=e.getParameter("values")[0];for(const[e,r]of Object.entries(t))if("string"==typeof r)return[u.Z.DIMENSION.of(e)];return[u.Z.MEASURE.of(Object.keys(t)[0])]}_getDefaultParameters(e){return{numbers:[],strings:[],groups:[],columns:{},broadcastFacet:!0,selectMode:e.getCode()}}})).add("APEX","apex",new x(new class extends I{originalQueryEditorLanguage="json";isBroadcastingFacetingEditable=!1;isReceivingFacetingEditable=!1;_queryBindablePaths=[["query","body"]];getDataSourceType(e){return v.Z.APEX}getFinalQueryEditorLanguage(e){return"json"}sanitizeOriginalQuery(e){return JSON.stringify(e,null,4)}sanitizeFinalQuery(e){return JSON.stringify(e,null,4)}isBroadcastingFaceting(e){return!1}getDataSources(e){return[v.Z.APEX.make(e.getId())]}normalizeQuery(e){return JSON.stringify(e)}})).add("REPORT","report",new x(new class extends I{isQueryBindable=!1;canQueryContainUserTokens=!1;isEveryQueryResultPublished=!1;getDataSourceType(e){return v.Z.SOBJECT}isBroadcastingFaceting(e){return!1}getDataSources(e){return[v.Z.SOBJECT.make(e.getDashboardId())]}})).add("CONDITIONAL","conditional",new x(new class extends I{getDataSourceType(e){return v.Z.STATIC}isBroadcastingFaceting(e){return!1}getDataSources(e){return[v.Z.STATIC.make(e.getId())]}})).add("WATCHLIST","watchlist",new x(new class extends I{getDataSourceType(e){return v.Z.SOBJECT}getDataSources(e){return[v.Z.SOBJECT.make(e.getId())]}_getDefaultParameters(e){return{numbers:[],strings:[],groups:[],selectMode:e.getCode()}}})).add("REFERENCE","lens",new x(new class extends I{getDataSourceType(e){return v.Z.DATASET}getDataSources(e){return[v.Z.DATASET.make(e.getId())]}})).add("DISCOVERY","discovery",new x(new class extends I{originalQueryEditorLanguage="json";isBroadcastingFacetingEditable=!1;isReceivingFacetingEditable=!1;isTargetedReceiveFacetingSupported=!1;getDataSourceType(e){return v.Z.DISCOVERY}getReceiveFacetMode(e){return S.Z.NONE}canEdit(e){return!1}getDataSources(e){return[]}getQuery(e){return e.getQuery()}isBroadcastingFaceting(e){return!1}getEditDisabledMessage(){return g.Z.getLabel("DashboardWidgetAction","editDisabledInvalidStepType")}getInitialFilterValues(e){throw new Error("Selection is not supported for discovery lenses.")}getStartValues(e){throw new Error("Selection is not supported for discovery lenses.")}canDetermineFilteringColumns(e,t){return!1}getFilteringColumns(e){return[]}_getDefaultParameters(e){return{}}})).add("DIRECT_REPORT","directreport",new x(new class extends I{isReceivingFacetingEditable=!1;canSelectModes=!0;canConfigureConditionalFormatting=!1;supportsSqlQuery=!1;canEdit(e){return P.Z.has(P.Z.CAN_USE_UNIFIED_ANALYTICS)}canExplore(){return P.Z.has(P.Z.CAN_USE_UNIFIED_ANALYTICS)}canDownloadTabular(e){return!1}canModifyActions(){return!1}canClone(e){return!1}isBroadcastingFaceting(e){return!0}getReceiveFacetMode(e){return S.Z.ALL}getDataSourceType(){return v.Z.REPORT}getDataSources(e){return[v.Z.REPORT.make(e.getQuery().reportId)]}isUsingGlobalFilters(e){return!0}_getDefaultParameters(e){return{}}sanitizeOriginalQuery(e){return JSON.stringify(e,null,4)}sanitizeFinalQuery(e){return JSON.stringify(e,null,4)}})).add("HIERARCHY","hierarchy",new x(new class extends I{isBroadcastingFacetingEditable=!1;isReceivingFacetingEditable=!1;canEdit(e){return!0}getDataSourceType(e){return v.Z.HIERARCHY}canExplore(){return!1}isBroadcastingFaceting(e){return!0}getDataSources(e){return[v.Z.HIERARCHY.make(e.getId())]}canDownloadTabular(e){return!1}})).add("INPUT","input",new x(new class extends I{isBroadcastingFacetingEditable=!1;isReceivingFacetingEditable=!1;isQueryBindable=!0;canSelectModes=!1;canBeDragged=!1;supportsSqlQuery=!1;_queryBindablePaths=["values",["min","max"],"start"];canEdit(e){return!1}getDataSourceType(e){return v.Z.INPUT}canExplore(){return!1}isBroadcastingFaceting(e){return!0}getDataSources(e){return[v.Z.INPUT.make(e.getId())]}canDownloadTabular(e){return!1}getQuery(e){return e.getValues()}getValidSelectModes(){return[n.SelectMode.NONE]}isInputSelectMode(){return!0}_getDefaultParameters(e){return{label:"",valueType:"number",values:[{min:1,max:100}],start:[1]}}})).add("FORECASTING","forecasting",new x(new class extends I{originalQueryEditorLanguage="json";isBroadcastingFacetingEditable=!1;isReceivingFacetingEditable=!1;isTargetedReceiveFacetingSupported=!1;getDataSourceType(e){return v.Z.FORECASTING}getReceiveFacetMode(e){return S.Z.NONE}canEdit(e){return!1}getDataSources(e){return[]}getQuery(e){return e.getQuery()}isBroadcastingFaceting(e){return!1}getEditDisabledMessage(){return g.Z.getLabel("DashboardWidgetAction","editDisabledInvalidStepType")}getInitialFilterValues(e){throw new Error("Selection is not supported for forecasting lenses.")}getStartValues(e){throw new Error("Selection is not supported for forecasting lenses.")}canDetermineFilteringColumns(e,t){return!1}getFilteringColumns(e){return[]}_getDefaultParameters(e){return{}}})).finish()},41992:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{constructor(e,t,r,i){super(),this.canStart=e,this.isRunning=t,this.canReceiveMessages=r,this._validNextStates=i}isValidNextStatus(e){return this._validNextStates.has(e.name)}}s.add("NOT_STARTED",new s(!0,!1,!1,new Set(["PRIMING_THE_PUMP","DISCONNECTING"]))).add("PRIMING_THE_PUMP",new s(!1,!0,!1,new Set(["WAITING","QUERYING","DISABLED","NOT_STARTED"]))).add("IDLE",new s(!1,!0,!0,new Set(["QUERYING","PAUSED","NOT_STARTED","DISCONNECTING","WAITING"]))).add("PAUSED",new s(!0,!1,!0,new Set(["IDLE","QUERYING","NOT_STARTED"]))).add("QUERYING",new s(!1,!0,!0,new Set(["IDLE","PAUSED","NOT_STARTED","DISCONNECTING"]))).add("WAITING",new s(!1,!0,!0,new Set(["QUERYING","PAUSED","NOT_STARTED","DISCONNECTING"]))).add("DISABLED",new s(!1,!1,!1,new Set(["NOT_STARTED","DISCONNECTING"]))).add("DISCONNECTING",new s(!1,!1,!1,new Set)).finish()},69985:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("PRIMING",new s).add("INITIAL",new s).add("USER",new s).add("EXTERNAL",new s).add("SYSTEM",new s).finish()},1281:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(57446),n=r(41992);class o{constructor(e,t,r){this.statusHistory=e,this.serverDurationHistory=r,this.statusAggregates=new s.Z,this.startTime=null!=this.statusHistory[1]?this.statusHistory[1].time:void 0;const o=[];if(this.statusHistory.length>1){let t,r=-1,i=!1,s=this.statusHistory[0].time;for(let a=1;a<e.length;a++){const{status:e,time:l}=this.statusHistory[a],u=this.statusHistory[a-1].status;e===n.Z.QUERYING?(o.push(a),i||(t=l)):e===n.Z.IDLE&&(r=a,null==this.startTime||null==t||i||(this.initialWaitDuration=l-this.startTime,this.firstQueryDuration=l-t,i=!0));const d=this.statusAggregates.getOrSet(u,(()=>0));this.statusAggregates.set(u,d+(l-s)),s=l}for(let e=o.length-1;e>=0;e--){const t=o[e];if(t<r){this.lastQueryDuration=this.statusHistory[r].time-this.statusHistory[t].time;break}}}for(let e=r.length-1;e>=0;e--)if(r[e]){this.latestServerDuration=r[e];break}const a=[];for(let e=0;e<t.length;e++){const r=o[e],i=this.statusHistory[r+1].time-this.statusHistory[r].time;t[e]||a.push(i),(null==this.maxQueryDuration||i>this.maxQueryDuration)&&(this.maxQueryDuration=i)}a.length&&(this.averageQueryDuration=(0,i.mean)(a)),this.numUncachedQueries=a.length}getStatusCount(e){return(0,i.sumBy)(this.statusHistory,(t=>Number(t.status===e)))}getStatusAggregate(e){return this.statusAggregates.get(e).getOrElse((()=>0))}getMaxRuntime(){const e=this.getMaxDuration();return(0,i.isNumber)(e)&&!(0,i.isNaN)(e)?e:this.maxQueryDuration}getMaxDuration(){return(0,i.max)(this.serverDurationHistory)}}class a{constructor(){this._statusHistory=[],this._queryCacheHistory=[],this._serverDurationHistory=[],this.addStatus(n.Z.NOT_STARTED)}addStatus(e){this._statusHistory.push({status:e,time:(new Date).getTime()})}addQuery(e){this._queryCacheHistory.push(e)}addServerDuration(e){this._serverDurationHistory.push(e)}getStats(){return new o(this._statusHistory.slice(),this._queryCacheHistory.slice(),this._serverDurationHistory.slice())}}},86968:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(86866);class s{constructor(e){this._lenses=e}provide(e,t,r,s,n,o,a,l){const u=i.Z.fromCode(t.getMetadata().getLens(e).getType()),d=this._lenses.get(u);if(!d)throw new Error(`No runtime lens class specified for type "${u.name}".`);return new d(e,u.getDefinition(),t,r,s,n,o,a,l)}}},97535:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(31835);class s{constructor(e,t,r,s,n,o,a,l,u,d,c=[],h=[]){this.dataSources=e,this.originalQuery=t,this.bindingExecutionResults=r,this.dataSourceFilters=s,this.queryWithoutFilters=n,this.queryWithFilters=o,this.rawQuery=a,this.finalQuery=l,this.finalQueryWithOriginalLimit=u,this.isQueryPaginated=u!==l,this.datasetMetadatas=d,this.extendedMetadatas=c,this.dataSourceTypeDelegate=d?.[0]?i.Z.getDelegateFromAssetMetadata(d[0]):void 0,this.boundReferences=h}}},77955:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this._error=e,this._errorMessage=t}getError(){return this._error}getErrorMessage(){return this._errorMessage}}},25997:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(77955);class s extends i.Z{constructor(e,t,r){super(e,t),this.originalQuery=r}}},91780:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(77955);class s extends i.Z{constructor(e,t){super(e,e.message),this.error=e,this.originalQuery=t}}},21949:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(2057),s=r(77955);class n extends s.Z{constructor(e,t){super(e,e.message),this.errorCode=e instanceof i.Z?e.errorCode:void 0,this._queryInfo=t}getQueryInfo(){return this._queryInfo}}},65798:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(77955);class s extends i.Z{constructor(e,t){super(e,e.message),this.originalQuery=t}}},12698:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t,r,i,s){this._queryResult=i?.dataSourceTypeDelegate?i.dataSourceTypeDelegate.updateResultOnResultMetadata(e,t):e,this._metadata=t,this._formatter=r,this._queryInfo=i,this._wasCached=s}getData(){return this._queryResult.getData()}getMetadata(){return this._metadata}getFormatter(){return this._formatter}getQueryInfo(){return this._queryInfo}getQueryResult(){return this._queryResult}wasCached(){return this._wasCached}}},15648:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(1611),n=r(75137);class o extends n.Z{constructor(e,t){super(),this._selectedRows=e,this._clickedRow=t}_select(e,t,r){return this._isClickedRowAlreadySelected(t)?r.isRequired()&&1===this._selectedRows.length?this._selectedRows:this._selectedRows.filter((e=>!this._doesMatchClickedRow(t,e))):r.isSingle()?[this._clickedRow]:this._selectedRows.concat(this._clickedRow)}_isClickedRowAlreadySelected(e){return i.some(this._selectedRows,this._doesMatchClickedRow.bind(this,e))}_doesMatchClickedRow(e,t){const r=e.getGroupings();return(r.length?r:e.getColumns(s.Z.DIMENSION).slice(0,1)).every((e=>i.isEqual(t[e.getName()],this._clickedRow[e.getName()])))}}},33793:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(75137);class s extends i.Z{static _makeSelectedValueHash(e){return JSON.stringify(e)}constructor(){super(),this._selectedValues=new Set}addSelectedValue(e){this._selectedValues.add(this.constructor._makeSelectedValueHash(e))}_selectFromColumns(e,t){const r=[],i=new Map;return 0===this._selectedValues.size?[]:(e.forEach((e=>{const r=t.map((t=>e[t.getName()])),s=this.constructor._makeSelectedValueHash(r),n=i.get(s);n?n.push(e):i.set(s,[e])})),this._selectedValues.forEach((e=>{const t=i.get(e);t&&r.push(...t)})),r)}}},2355:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(75137);class s extends i.Z{_select(e,t,r){return[]}}},53581:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(33793);class s extends i.Z{_select(e,t,r){return this._selectFromColumns(e,t.getGroupings())}}},47466:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(75137);class s extends i.Z{constructor(e){super(),this._indexes=e}_select(e,t,r){return this._indexes.filter((t=>t<e.length)).map((t=>e[t]))}}},58815:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(75137);class s extends i.Z{#ne;constructor(e){super(),this.#ne=e}_select(e,t,r){const i={input:this.#ne},{min:s,max:n}=e[0];return null!=s&&(i.min=s),null!=n&&(i.max=n),[i]}}},75137:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(27223);class s{select(e,t,r){const i=this._select(e,t,r);return r.isSingle()&&i.length>1?i.slice(0,1):r.isRequired()&&0===i.length&&e.length>0?e.slice(0,1):i}_select(e,t,r){return i.checkImplemented()}}},30386:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(33793);class s extends i.Z{constructor(e){super(),this._columns=e}_select(e,t,r){return this._selectFromColumns(e,this._columns)}}},86170:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(75137);class s extends i.Z{constructor([[e,t]]){super(),this._min=e,this._max=t}_select(e,t,r){return[{min:this._min,max:this._max}]}}},25883:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(27223),s=r(54079);class n extends s.Z{constructor(e,t,r,i,s){super(e,t,r),this._data=i,this._metadata=s}getData(){return this._data}getMetadata(){return this._metadata}getFormatter(){return i.checkImplemented()}}},54079:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(43887);class s extends i.Z{constructor(e,t,r){super(e,t),this._dataSources=r}getDataSources(){return this._dataSources}hasOfType(e,t=!1){return t?this._dataSources.every((t=>t.getType()===e)):this._dataSources.some((t=>t.getType()===e))}hasDataSource(e){return this._dataSources.some(e.isEqual.bind(e))}_toDataSourcesString(){return this._dataSources.map((e=>e.getHash())).join(", ")}}},60803:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486),s=r(54079);class n extends s.Z{constructor(e,t,r,i){super(e,t,r),this._filterTypes=i}isOfFilterType(e){return i.includes(this._filterTypes,e)}}},65219:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(60803),s=r(99689);class n extends i.Z{constructor(e,t,r){super(s.Z.REMOVE_FILTER_GROUP,e,t,r)}getFilterTypes(){return this._filterTypes}}},33277:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(43887),s=r(99689);class n extends i.Z{constructor(e){super(s.Z.COMPONENT_RUNTIME_READY,e)}toStringDetails(){return"Component runtime is ready"}}},1732:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(43887),s=r(99689);class n extends i.Z{constructor(e,t,r){super(s.Z.DASHBOARD_READY,i.Z.SYSTEM_PUBLISHER_ID),this.startTime=e,this.endTime=t,this.isReset=r}get loadDuration(){return this.endTime-this.startTime}toStringDetails(){return`Dashboard ${this.isReset?"reset":"initially loaded"} in ${this.loadDuration}ms`}}},43887:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(27223);let s=0;class n{static SYSTEM_PUBLISHER_ID="__SYSTEM__";constructor(e,t){this._id=s++,this._type=e,this._publisherId=t}getId(){return this._id}getType(){return this._type}isOfType(...e){return e.includes(this._type)}getPublisherId(){return this._publisherId}toString(){return`[${this._type.name}] ${this._publisherId}: `+this.toStringDetails()}toStringDetails(){return i.checkImplemented()}}},48835:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(74703),s=r(25945),n=r(84893);class o{constructor(e){this._runtime=e}getMessagesByTopic(e){const t=this._runtime.getFilter(i.Z.CACHE_FILTER_ID);if(!(t instanceof s.Z))throw new Error("Expected runtime cache to be set.");return(0,n.Z)(e,t)}}},99689:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("RESULT",new s).add("SELECTION",new s).add("UPDATE_FILTERS",new s).add("REMOVE_FILTER_GROUP",new s).add("STATUS_CHANGE",new s).add("DASHBOARD_READY",new s).add("WIDGET_READY",new s).add("INTERACTION",new s).add("GLOBAL_FILTER_PREFLIGHT",new s).add("UPDATE_COUNTDOWN_LATCH",new s).add("DASHBOARD_COMPONENT_UPDATED",new s).add("COMPONENT_RUNTIME_READY",new s).add("INLINE_EDIT_INTERACTION",new s).add("INLINE_EDIT_STATE",new s).add("UPDATE_PARAMETER",new s)},70974:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(43887),s=r(99689);class n extends i.Z{constructor(e,t){super(s.Z.GLOBAL_FILTER_PREFLIGHT,e),this.filters=t}get dataSources(){const e=new Set;return this.filters.reduce(((t,r)=>{const i=r.getDataSource();return e.has(i.getHash())||t.push(i),t}),[])}toStringDetails(){return""}}},3704:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(43887),s=r(99689);class n extends i.Z{constructor(e,t){super(s.Z.INTERACTION,e),this._context=t}getContext(){return this._context}toStringDetails(){return`Interacted with type: ${this._context.getInteractionType().name}`}}},53018:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(65219),s=r(76133);class n extends i.Z{constructor(e,t,r){super(e,t,s.Z.enums()),this._linkName=r}getLinkName(){return this._linkName}toStringDetails(){return`Removing data source link filters from link ${this._linkName}`}}},84749:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(65219);class n extends s.Z{constructor(e,t,r,i){super(e,t,r),this._filterColumns=i}getFilterColumns(){return this._filterColumns}toStringDetails(){return`Removing ${i.Z.toSentence(this._filterTypes.map((e=>e.name)))} filters from [${this._toDataSourcesString()}]`}}},591:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(25883),s=r(99689),n=r(12698),o=r(77955),a=r(21949);class l extends i.Z{constructor(e,t,r,i){const[o,a]=r instanceof n.Z?[r.getData(),r.getMetadata()]:[];super(s.Z.RESULT,e,t,o,a),this._result=r,this._searchSubscriberId=i}isError(){return this._result instanceof o.Z}getResult(){return this._result}getFormatter(){return this._result instanceof n.Z?this._result.getFormatter():void 0}getQueryInfo(){return this._result instanceof n.Z||this._result instanceof a.Z?this._result.getQueryInfo():void 0}getErrorMessage(){return this._result instanceof o.Z?this._result.getErrorMessage():void 0}getSearchSubscriberId(){return this._searchSubscriberId}toStringDetails(){return this._result instanceof o.Z?this._result.getErrorMessage():`Queried ${this._result.getData().length} rows from [${this._toDataSourcesString()}]`}}},2843:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(25883),s=r(99689);class n extends i.Z{constructor(e,t,r,i,n,o,a,l,u,d){super(s.Z.SELECTION,e,t,r,i),this._selectionType=n,this._isFilterable=o,this._filterColumns=a,this._filterValues=l,this._filterOperator=u,this._formatter=d}getSelectionType(){return this._selectionType}isFilterable(){return this._isFilterable}getFilterColumns(){return this._filterColumns}getFilterValues(){return this._filterValues}getFilterOperator(){return this._filterOperator}getFormatter(){return this._formatter}cloneAsUnfilterable(){return new n(this.getPublisherId(),this.getDataSources(),this.getData(),this.getMetadata(),this.getSelectionType(),!1,this.getFilterColumns(),this.getFilterValues(),this.getFilterOperator(),this.getFormatter())}toStringDetails(){const e=this._data.length;return`Selected ${e} ${1===e?"row":"rows"} from [${this._toDataSourcesString()}]`}}},47333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(43887),s=r(99689);class n extends i.Z{constructor(e,t,r){super(s.Z.STATUS_CHANGE,e),this._oldStatus=t,this._newStatus=r}getOldStatus(){return this._oldStatus}getNewStatus(){return this._newStatus}toStringDetails(){return`${this._newStatus.name} from ${this._oldStatus.name}`}}},29388:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(29717);class s extends i.Z{constructor(e,t,r,i,s){super(e,t,r,i),this.targetedLensIds=s}getTargetedLensIds(){return this.targetedLensIds}}},16892:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(43887),s=r(99689);class n extends i.Z{constructor(e,t,r){super(s.Z.UPDATE_COUNTDOWN_LATCH,e),this.lensId=t,this.countdownLatchTopics=r}toStringDetails(){return`Updating countdown latch of lens '${this.lensId}' to ${this.countdownLatchTopics.length} topics.`}}},4429:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(29717);class s extends i.Z{constructor(e,t,r,i,s,n,o){super(e,[t],r,i),this._linkName=s,this._originalPublisherId=n,this._targetedLensIds=o}getTargetedLensIds(){return this._targetedLensIds}getLinkName(){return this._linkName}getOriginalPublisherId(){return this._originalPublisherId}toStringDetails(){return`${this.shouldApplyFilter()?"Applied":"Removed"} data source link filter from link ${this._linkName} to ${this._toDataSourcesString()}`}}},29717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(60803),s=r(99689);class n extends i.Z{constructor(e,t,r,i){if(0===t.length)throw new Error("Must provide filters to apply or remove.");const n=new Map;t.forEach((function(e){const t=e.getDataSource();n.set(t.getHash(),t)})),super(s.Z.UPDATE_FILTERS,e,Array.from(n.values()),[r]),this._filters=t,this._filterType=r,this._shouldApplyFilter=i}getFilters(){return this._filters}getFilterType(){return this._filterType}shouldApplyFilter(){return this._shouldApplyFilter}toStringDetails(){const e=this.shouldApplyFilter()?"Applied":"Removed",t=1===this._filters.length?"filter":"filters";return`${e} ${this._filters.length} ${this._filterType.name.toLowerCase()} ${t} from [${this._toDataSourcesString()}]`}}},3528:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(43887),s=r(99689);class n extends i.Z{#Je;#Xe;constructor(e,t,r){super(s.Z.UPDATE_PARAMETER,`${e}_${t}`),this.#Je=t,this.#Xe=r}getParameterName(){return this.#Je}getParameterValue(){return this.#Xe}toStringDetails(){return`Parameter '${this.#Je}' is updated.`}}},57840:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(43887),s=r(99689);class n extends i.Z{constructor(e,t,r){super(s.Z.WIDGET_READY,e),this._widgetId=t,this._message=r}getWidgetId(){return this._widgetId}getMessage(){return this._message}toStringDetails(){return`Widget '${this._widgetId}' is ready.`}}},26815:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var i=r(61506),s=r(18111),n=r(13134),o=r(57446),a=r(84052),l=r(95783),u=r(76133);class d{_dataSources=new o.Z;_dataSourceFilters=new o.Z;_dataSourceLinkMessageSources=new Set;_senderLensIds=new o.Z;_dataSourceFacetingLenses=new o.Z;_filterSenderGroups=new o.Z;addFacetingLensDataSources(e,t){for(const r of t){const t=r.getHash();this._dataSources.set(t,r);const i=this._dataSourceFacetingLenses.getOrSet(t,(()=>new Set));if(i.has(e))throw new Error(`Lens "${e}" added multiple times for data source "${t}".`);i.add(e)}}addFacetingFilter(e,t,r){const i=l.Z.getSenderHash(t,u.Z.FACETING,r);this._addFilter(e,i,l.Z.getSenderGroupHash(t,u.Z.FACETING),r,t)}addDataSourceLinkFilter(e,t,r,i){const s=l.Z.getLinkedSenderHash(r,u.Z.FACETING,e,i);this._addFilter(t,s,l.Z.getLinkedSenderGroupHash(r,u.Z.FACETING),i,e),this._dataSourceLinkMessageSources.add(s)}getDataSourceStates(){const e=new Map;return this._dataSourceFilters.forEach(((t,r)=>{if(0===r.size)return;const i=new a.Z(this._dataSources.get(t).getOrElse((()=>{throw new Error(`Data source expected to be set for data source hash "${t}".`)})));r.forEach(((e,t)=>{i.set(t,this._filterSenderGroups.get(t).getOrElse((()=>{throw new Error(`Sender groups expected to be set for sender with hash "${t}".`)})),u.Z.FACETING,e,this._dataSourceLinkMessageSources.has(t),!1,this._senderLensIds.get(t).getOrElse((()=>{throw new Error(`Sender lens expected to be set for filter with sender hash "${t}".`)})))})),e.set(t,i)})),e}getFacetingLensIds(e){const t=new Set;for(const r of e)if(this._dataSources.has(r.getHash())){const e=r.getHash();this._dataSourceFilters.getOrSet(e,(()=>new Map)).forEach(((e,r)=>{t.add(this._senderLensIds.get(r).getOrElse((()=>{throw new Error(`Sender lens expected to be set for filter with sender hash "${r}".`)})))})),this._dataSourceFacetingLenses.getOrSet(e,(()=>new Set)).forEach((e=>t.add(e)))}return t}_addFilter(e,t,r,i,s){this._dataSources.set(e.getHash(),e);const n=this._dataSourceFilters.getOrSet(e.getHash(),(()=>new Map));if(n.has(t))throw new Error(`Duplicate filter added for sender "${t}".`);n.set(t,i),this._filterSenderGroups.set(t,r),this._senderLensIds.set(t,s)}}var c=r(90456),h=r(96900),p=r(86866),g=r(69985),m=r(591),_=r(2843);const f=new Set([g.Z.INITIAL,g.Z.EXTERNAL]);class y{constructor(e){this._lensId=e}isOfTopic(e){return e.getPublisherId()===this._lensId&&(e instanceof m.Z&&e.isError()||e instanceof _.Z&&f.has(e.getSelectionType()))}getHash(){return`LENS_READY:${this._lensId}`}}class b{constructor(e,t,r){this._tracker=e,this._dashboardMetadata=t,this._bindingsTraverserProvider=r}getInitialDataSourceStates(){return this._tracker.getDataSourceStates()}getCountdownLatchTopics(e){const t=new Map;for(const r of this._dashboardMetadata.getLenses())t.set(r.getId(),this._getFacetingLensIds(r).map((t=>new y((0,c.$)(t,e)))));return t}_getFacetingLensIds(e){const t=p.Z.fromCode(e.getType()).getDefinition(),r=t.getReceiveFacetMode(e),i=t.getReceiveFacetSteps(e);if(r===h.Z.NONE)return[];if(!t.canDetermineInitialDataSources(this._bindingsTraverserProvider,e))return[];const s=this._tracker.getFacetingLensIds(t.getDataSources(e));return s.size>0&&r!==h.Z.ALL&&s.forEach((e=>{r.shouldFilter(e,i)||s.delete(e)})),s.delete(e.getId()),Array.from(s)}}var C=r(70352),E=r(46841),S=r(42669),T=r(31889);class I{constructor(e){this._bindingsTraverserProvider=e}optimize(e,t,r){const i=new Set(t),s=new d;for(const t of e.getLenses()){const n=this._getLensTypeDefinition(t),o=t.getId();if(!i.has(o))continue;if(!n.isBroadcastingFaceting(t))continue;if(!n.canDetermineInitialDataSources(this._bindingsTraverserProvider,t))continue;const a=n.getDataSources(t).slice(0,1),l=this._getLensSelection(s,r,e,t,a);if(!l)continue;const u=l.getFilterValues();if(!u.length)continue;const d=E.Z.determine(t,u),c=l.getFilterColumns(),h=new S.Z(e,c);for(const e of a){const t=d.of(e,c,u,!1,!1);s.addFacetingFilter(e,o,t),h.traverse(e,((e,t,r,i)=>s.addDataSourceLinkFilter(o,t,e,d.of(t,[r],(new C.Z).getFilterValues(u,c.length,i),!1,!1))))}}return new b(s,e,this._bindingsTraverserProvider)}_getLensSelection(e,t,r,o,a){const l=this._getLensTypeDefinition(o),u=o.getId();if(t.has(u))return t.get(u);if(null!=o.getStart())if(l.canDetermineFilteringColumns(this._bindingsTraverserProvider,o)){const t=l.getFilteringColumns(o);if(!l.canHaveStartValueBindings||!l.hasStartValueBindings(this._bindingsTraverserProvider,o)){const e=new T.Z(i.Z.get(s).getAppUser());return new n.Z(t,e.tokenize(l.getInitialFilterValues(o),!1))}{e.addFacetingLensDataSources(u,a);const i=new S.Z(r,t);for(const t of a)i.traverse(t,((t,r)=>e.addFacetingLensDataSources(u,[r])))}}else e.addFacetingLensDataSources(u,a)}_getLensTypeDefinition(e){return p.Z.fromCode(e.getType()).getDefinition()}}},24617:(e,t,r)=>{"use strict";r.d(t,{Z:()=>S});var i=r(96486),s=r(54370),n=r(81513),o=r(1),a=r(99689),l=r(68831),u=r(95435),d=r(3528);class c extends u.Z{#Je;constructor(e,t){super(`${e}_${t}`,a.Z.UPDATE_PARAMETER),this.#Je=t}isOfTopic(e){return super.isOfTopic(e)&&e instanceof d.Z&&e.getParameterName()===this.#Je}getHash(){return`PUBLISHER:${this.getPublisherId()}.${a.Z.UPDATE_PARAMETER.name}`}}var h=r(95192),p=r(25883),g=r(43887),m=r(38325),_=r(47333);class f extends m{#et=[];#tt;constructor(e,t){super(e),this.#tt=t}publish(e){this.#tt?this._getRuntimeConnector().publish(e):this.#et.push(e)}getTopics(){return[new u.Z(g.Z.SYSTEM_PUBLISHER_ID,a.Z.STATUS_CHANGE)]}async _onFulfilled(e){this.#tt||e instanceof _.Z&&e.getNewStatus()!==o.Z.STOPPED&&(this.#tt=!0,this.#et.forEach((e=>this._getRuntimeConnector().publish(e))),this.#et=[])}}var y=r(26378);const b=new RegExp("\\[\\[([^\\[\\]]*)\\]\\]","g"),C="PARAMETER_MANAGER",E="static";class S extends n{#rt=!1;#He;#it;#st;static getParametersTopics(e,t,r){if(!e.hasParameters()||null==t)return[];const s=[],n=S.getParametersTokens(t);return(0,i.isEmpty)(n)||e.getParameters().forEach((e=>{n.includes(e.name)&&s.push(new c(S.getParameterPublisherId(r),e.name))})),s}static getParametersTokens(e){return h.Z.traverse(e,h.Z.containsToken.bind(this,b),b)}static resolveParameters(e,t=[]){if(e&&!(0,i.isEmpty)(t)){const r=new Map;t.forEach((e=>{const t=e.getParameterValue(),i=e.getParameterName();r.set(i,t)})),h.Z.traverse(e,h.Z.replaceTokenWithResolvedValue.bind(this,b,r),b)}}static getParameterPublisherId(e){return`${C}_${e||"parent"}`}constructor(){super(C),this.#He=new Map,this.#it=new Map,this.#st=new Map}publishInitialValues(){this.#st.forEach(((e,t)=>{this._publishInitialValues(e,t)}))}addParameters(e,t,r={}){const i=e.getId();this.#He.set(i,Object.keys(r).reduce(((e,t)=>e.set(t,new s.Z(t,r[t]))),new Map)),this.#it.set(i,e.getParameters().reduce(((e,t)=>e.set(t.name,t.defaultValue)),new Map));const n=new f(S.getParameterPublisherId(t.getNamespace()),t.getState()!==o.Z.STOPPED);this.#st.set(i,n),t.addPublisher(n,!0),this._publishInitialValues(n,i)}updateParameters({metadata:e,parameterNames:t}){this.#it.set(e.getId(),e.getParameters().reduce(((e,t)=>e.set(t.name,t.defaultValue)),new Map));const r=this.#it.get(e.getId()),i=this.#st.get(e.getId());t.forEach((e=>{r?.has(e)&&i?.publish(new d.Z(i.getId(),e,r?.get(e)))}))}updateAttributes({metadata:e,attributes:t={},runtime:r}){const n=e.getId(),o=new Map;Object.keys(t).forEach((e=>{o.set(e,new s.Z(e,t[e]))}));const a=new Map(this.#He.get(n));this.#He.set(n,o),this.#it.get(n)?.forEach(((e,t)=>{if((0,i.isEqual)(a.get(t)?.getData(),o.get(t)?.getData()))return;let s=e;const l=o.get(t);if(null!=l)if(l.getType()===E){s=l.getData();l.getUseAsArray()&&(s=s.toString().split(","))}else{const e=l.getDynamicDataSourceId(),t=(0,y.dT)(e,r,l);t instanceof p.Z&&!(0,i.isEmpty)(t.getData())&&(s=(0,y.TO)(l,t))}if(null!=s){const e=this.#st.get(n);e?.publish(new d.Z(e.getId(),t,s))}}))}getTopics(){return(0,y.BB)()}getParameterPublishers(){return this.#st}_onFulfilled(e){this.#st.forEach(((t,r)=>{this.#He.get(r)?.forEach((i=>{const s=i.getSourceMessageType();if(i.getDynamicDataSourceId()===e.getPublisherId()&&s===e.getType()){const s=(0,y.TO)(i,e)||this.#it.get(r)?.get(i.getName());null!=s&&t?.publish(new d.Z(t.getId(),i.getName(),s))}}))}))}_getInitialValuesToPublish(e){const t=[],r=this.#He.get(e);return r&&this.#it.get(e)?.forEach(((e,i)=>{if(r.has(i)){const e=r.get(i);e&&e.getType()===E&&t.push({name:e.getName(),data:e.getData()})}else t.push({name:i,data:e})})),t}_publishInitialValues(e,t){this._getInitialValuesToPublish(t).forEach((t=>{e.publish(new d.Z(e.getId(),t.name,t.data))}))}_getAttributeMessageTopic(e){let t;return"selection"===e.getDynamicDataSourceType()?t=new l.Z(a.Z.SELECTION):"result"===e.getDynamicDataSourceType()&&(t=new l.Z(a.Z.RESULT)),t}}},26378:(e,t,r)=>{"use strict";r.d(t,{BB:()=>d,TO:()=>c,TQ:()=>p,dT:()=>h});var i=r(68831),s=r(99689),n=r(84893),o=r(25945),a=r(26378);const l="selection",u="result";function d(){return[new i.Z(s.Z.RESULT),new i.Z(s.Z.SELECTION)]}function c(e,t){const r=e.getDynamicDataSourceType();if(!r)return;if(s.Z.fromName(r.toUpperCase())===t.getType()){const r=e.getDynamicDataIncludeAll(),i=e.getDynamicDataFiled();let s;return r?(s=t.getData(),Array.isArray(s)&&i?s.map((e=>e[i])):void 0):(s=t.getData()[0],s&&i?s[i]:void 0)}}function h(e,t,r){const d=a.TQ(e,t),c=new o.Z(d),h=function(e){let t;e.getDynamicDataSourceType()===l?t=new i.Z(s.Z.SELECTION):e.getDynamicDataSourceType()===u&&(t=new i.Z(s.Z.RESULT));return t}(r);return null!=h?(0,n.Z)([h],c)[0]:void 0}function p(e,t){const r=t.getLens(e),i=[];for(const e of t.getCacheFilter().getByPublisher(r.getId()))i.push(e);return i}},67427:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var i=r(96486),s=r(90554),n=r(38241),o=r(93367),a=r(90456),l=r(37073),u=r(99689),d=r(38325),c=r(21891),h=r(3704),p=r(95435),g=r(2843),m=r(69985);class _ extends p.Z{constructor(e){super(e)}isOfTopic(e){return super.isOfTopic(e)&&e instanceof g.Z&&e.getSelectionType()!==m.Z.PRIMING}getHash(){return`NON_PRIMING_SELECTION:${this._publisherId}`}}var f=r(591),y=r(47333),b=r(57840),C=r(68831),E=r(99891),S=r(70100),T=r(24617),I=r(29365);class v extends d{static getWidgetRuntimeId(e){return`widget_${e}`}static isWidgetRuntimeId(e){return e.startsWith("widget_")}_widgetSpecificTopics=new Map;_onResultCallbacks=new Set;_onInlineEditStateUpdateCallbacks=new Set;_onSelectionCallbacks=new Set;_onInteractionCallbacks=new Set;_onStatusChangeCallbacks=new Set;_onWidgetBindingsCallbacks=new Set;constructor(e,t,r,s,n,o){if(super(v.getWidgetRuntimeId(e),!0),this._widgetId=e,this._metadataHolder=t,this._layoutName=r,this._pageIndex=s,this._traverser=n.getNewTraverser(),this._namespace=o,null!=this._layoutName&&null!=this._pageIndex){let e;try{e=this._traverser.getRuntimeTopics(this._getWidget().getParameters(),this._namespace)}catch(t){e=[]}this._hasWidgetParamBindings=!(0,i.isEmpty)(e);const t=this._getWidgetStyle(),r=t?t.getCollatedStyle():{};let s;try{s=this._traverser.getRuntimeTopics(r,this._namespace)}catch(e){s=[]}this._hasWidgetCollatedStyleBindings=!(0,i.isEmpty)(s),this._blockingTopics=l.Z.unique(Array.prototype.concat.apply([],e.concat(s))),this._hasLens=this._getWidget().hasLens()}else this._hasWidgetParamBindings=!1,this._hasWidgetCollatedStyleBindings=!1,this._blockingTopics=[]}getTopics(e=!1){if(e||!this._topics){const e=this._getWidget(),t=[...this._blockingTopics,...this._getWidgetRuntimeTopics(e),...this._getWidgetUpdateParameterRuntimeTopics(e)],r=e.getLens();if(null!=r){const e=(0,a.$)(r.getId(),this._namespace);this._resultTopic=new p.Z(e,u.Z.RESULT),this._selectionTopic=new _(e),this._interactionTopic=new p.Z(e,u.Z.INTERACTION),this._statusChangeTopic=new p.Z(e,u.Z.STATUS_CHANGE);const i=new C.Z(u.Z.INLINE_EDIT_STATE);t.push(this._resultTopic,this._selectionTopic,this._interactionTopic,this._statusChangeTopic,i)}for(const e of this._widgetSpecificTopics.keys())t.push(...e);(0,i.isEmpty)(this._getWidgetUpdateParameterRuntimeTopics(e))||t.push(new C.Z(u.Z.UPDATE_PARAMETER)),this._topics=l.Z.unique(t)}return this._topics}hasLens(){return this._hasLens}setLayoutAndPage(e,t){this._layoutName=e,this._pageIndex=t}setLensConnector(e){this._lensConnector=e}getLensConnector(){return this._lensConnector}attachWidget({onResult:e,onStatusChange:t}){return this._onResultCallbacks.add(e),this._onStatusChangeCallbacks.add(t),this._flushBuffer(this._resultTopic,e),this._flushBuffer(this._statusChangeTopic,t),this.detachWidget.bind(this,{onResult:e,onStatusChange:t})}detachWidget({onResult:e,onStatusChange:t,onWidgetBindings:r}){this._onResultCallbacks.delete(e),this._onStatusChangeCallbacks.delete(t),this._onWidgetBindingsCallbacks.delete(r)}addWidgetBindingsHandler(e){return this._onWidgetBindingsCallbacks.add(e),e(),()=>{this._onWidgetBindingsCallbacks.delete(e)}}addSelectionHandler(e){return this._onSelectionCallbacks.add(e),this._flushBuffer(this._selectionTopic,e),()=>{this._onSelectionCallbacks.delete(e)}}addInteractionHandler(e){return this._onInteractionCallbacks.add(e),this._flushBuffer(this._interactionTopic,e),()=>{this._onInteractionCallbacks.delete(e)}}addInlineEditStateUpdateHandler(e){return this._onInlineEditStateUpdateCallbacks.add(e),()=>{this._onInlineEditStateUpdateCallbacks.delete(e)}}subscribe(e,t){return this._widgetSpecificTopics.set(e,t),this._runtimeConnector.updateSubscriptions(!0),this.unsubscribe.bind(this,e)}unsubscribe(e){this._widgetSpecificTopics.delete(e),this._runtimeConnector.updateSubscriptions(!1)}getWidget(e){JSON.stringify(e.getJson())!==this._lastEvaluatedWidget&&delete this._lastBoundWidget;const t=c.Z.fromCode(e.getType()).getDefinition();if(!this._lastBoundWidget){const r=(0,s.deepCopy)(e.getJson()),i=this._getWidgetUpdateParameterRuntimeTopics(e);i.length>0&&T.Z.resolveParameters(r,this._getMessagesForTopics(i));const n=t.resolveWidgetParams(r,e,this._getMessagesForTopics(this._getWidgetRuntimeTopics(e)),this._namespace);if(this._hasWidgetParamBindings){const r=t.getResolvedValueDefaults(e);this._executeBindings(n,((e,t,i)=>Object.prototype.hasOwnProperty.call(r,i)?r[i]:null))}this._lastEvaluatedWidget=JSON.stringify(n),this._lastBoundWidget=n}const r=(0,s.deepCopy)(this._lastBoundWidget);return this._applyDefaults(r,t),e.shard(r)}getWidgetCollatedStyle(){const e=this._getWidgetStyle(),t=e?e.getCollatedStyle():{};return this._hasWidgetCollatedStyleBindings?(JSON.stringify(t)!==this._lastEvaluatedCollatedStyle&&delete this._lastBoundCollatedStyle,this._lastBoundCollatedStyle?this._lastBoundCollatedStyle:(this._lastBoundCollatedStyle=t,this._lastEvaluatedCollatedStyle=JSON.stringify(t),this._executeBindings(t),t)):t}setFilterConnector(e){if("filterpanel"===this._getWidget().getType())return this._filterConnector=e}getFilterConnector(){return this._filterConnector}getWidgetInlineStyle(){return new n(null,null,this.getWidgetCollatedStyle()).getInlineStyle()}onMessage(e,t){super.onMessage(e,t),(this._getWidget().hasLens()&&e.getPublisherId()===(0,a.$)(this._getWidget().getLensId(),this._namespace)||"__inlineEditManager__"===e.getPublisherId())&&(e instanceof f.Z?this._onResultCallbacks.forEach((t=>t(e))):e instanceof g.Z?this._onSelectionCallbacks.forEach((t=>t(e))):e instanceof h.Z?this._onInteractionCallbacks.forEach((t=>t(e))):e instanceof y.Z?this._onStatusChangeCallbacks.forEach((t=>t(e))):e instanceof I.Z&&this._onInlineEditStateUpdateCallbacks.forEach((t=>t(e)))),this._widgetSpecificTopics.forEach(((t,r)=>{r.some((t=>t.isOfTopic(e)))&&t(e)}))}onWidgetReady(e){this._runtimeConnector.publish(new b.Z(this.getId(),this._widgetId,e))}publishInteractionMessage(e){const t=new E.C3(S.Z.VALUE,{widgetMetadata:e});this._runtimeConnector.publish(new h.Z(this.getId(),t))}_onFulfilled(e,t,r){const s=this._getWidget();!this._hasWidgetParamBindings&&!this._hasWidgetCollatedStyleBindings&&(0,i.isEmpty)(this._getWidgetRuntimeTopics(s))&&(0,i.isEmpty)(this._getWidgetUpdateParameterRuntimeTopics(s))||(delete this._lastBoundWidget,delete this._lastBoundCollatedStyle,this._onWidgetBindingsCallbacks.forEach((e=>e())))}_flushBuffer(e,t){if(!e)return;const r=this._messageBuffer[e.getHash()];r&&t(r)}_getBlockingTopics(){return this._blockingTopics}_getWidget(){const e=this._metadataHolder.getMetadata().getLayout(this._layoutName).getFirstWidgetLayoutPage(this._widgetId);return e?e.getWidgetLayout(this._widgetId).getWidget():this._metadataHolder.getMetadata().getWidget(this._widgetId)}_getWidgetStyle(){const e=this._metadataHolder.getMetadata().getLayout(this._layoutName).getFirstWidgetLayoutPage(this._widgetId);if(e)return e.getWidgetLayout(this._widgetId).getWidgetStyle()}_executeBindings(e,t=(()=>null)){if(this._isFulfilled())try{this._traverser.executeBindings(e,this._getMessagesForTopics(this._getBlockingTopics()),void 0,{namespace:this._namespace})}catch(r){this._traverser.traverse(e,t)}else this._traverser.traverse(e,t)}_getWidgetRuntimeTopics(e){let t=c.Z.fromCode(e.getType()).getDefinition().getDynamicReferences(e.getParameters(),e.getDashboardMetadata());return t=t.filter((e=>e instanceof o.Z)),t=(0,i.uniqBy)(t,(e=>e.identifier)),t.map((e=>new p.Z((0,a.$)(e.id,this._namespace),u.Z.fromName(e.sourceType.toUpperCase()))))}_getWidgetUpdateParameterRuntimeTopics(e){return T.Z.getParametersTopics(this._metadataHolder.getMetadata(),e.getParameters(),this._namespace)}_applyDefaults(e,t){[t.getResolvedValueDefaults(),t.getDefaultParameters()].forEach((t=>{for(const[r,i]of Object.entries(t))null==e.parameters[r]&&(e.parameters[r]=i)}))}}},94969:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(1607),s=r(18001),n=r(38325),o=r(99689),a=r(16892),l=r(70974),u=r(591),d=r(68831),c=r(95435),h=r(86866);class p extends n{_dataSourcesToLenses=i.Z.kv();constructor(e,t,r,i){super(e),this._metadataHolder=t,this._getCurrentLayoutName=r,this._getCurrentPageIndex=i}getTopics(){return[new d.Z(o.Z.RESULT),new d.Z(o.Z.GLOBAL_FILTER_PREFLIGHT)]}_onFulfilled(e,t,r){if(e instanceof u.Z)this._handleResultMessage(e);else{if(!(e instanceof l.Z))throw new Error(`Unexpected message type: '${e.getType().name}'.`);this._handleFilterPreflightMessage(e)}}_handleResultMessage(e){const t=e.getPublisherId();this._dataSourcesToLenses.removeTo(t),e.getDataSources().forEach((e=>{this._dataSourcesToLenses.put(e.getHash(),t)}))}_handleFilterPreflightMessage(e){const t=this._metadataHolder.getMetadata(),r=this._metadataHolder.getDependencyAnalyzer(),i=new Set(r.getUsedLensIds(this._getCurrentLayoutName(),this._getCurrentPageIndex())),n=t.getLenses().filter((e=>i.has(e.getId()))),l=new Set(n.reduce(((e,t)=>(h.Z.fromCode(t.getType()).getDefinition().isUsingGlobalFilters(t)&&e.push(t.getId()),e)),[])),u=new Set;e.dataSources.forEach((e=>{this._dataSourcesToLenses.getTos(e.getHash()).forEach((e=>{l.has(e)&&u.add(e)}))})),r.getDependentLensIds(Array.from(u),{filterEdges:e=>e.filter((e=>e.getValue().has(s.Z.RESULT_BINDING)))}).forEach((e=>u.add(e))),n.forEach((e=>{const t=e.getId(),i=Array.from(r.getDirectDependencies(t).entries()).reduce(((e,[t,r])=>(u.has(t)&&r.has(s.Z.RESULT_BINDING)&&e.push(new c.Z(t,o.Z.RESULT)),e)),[]);i.length&&this._runtimeConnector.publish(new a.Z(this.getId(),t,i))}))}}},734:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const i=/\s+FROM\s+([\w_]+)(?:\s+|$|\))/gi;class s{constructor(e){let t;for(this._sObjectNames=new Set,i.lastIndex=0;t=i.exec(e);)this._sObjectNames.add(t[1])}getSObjectNames(){return this._sObjectNames}}},4973:(e,t,r)=>{"use strict";r.r(t),r.d(t,{COMMENT_REG_EXP:()=>d,EXTRACT_REG_EXP:()=>c,SEMANTIC_SEARCH_REG_EXP:()=>h,default:()=>p});var i=r(7938),s=r(52014),n=r(70603),o=r(96486),a=r(32717);class l extends a.Z{result={};exitFrom_clause(e){this.result.fromClause={start:e.start.start,end:e.stop.stop}}exitWhere_clause(e){this.result.whereClause={start:e.start.start,end:e.stop.stop}}enterAlias(e){!this.result.alias&&this._isPrimaryQuery(e)&&(this.result.alias=(0,o.trim)(e.start.text,'"'))}enterJoin_clause(e){!this.result.alias&&this._isPrimaryQuery(e)&&(this.result.alias=e.children[0].start.text)}_isPrimaryQuery(e){let t=e;for(;t&&(t=t.parentCtx,!(t instanceof n.Z.Select_stmtContext)););return t.parentCtx instanceof n.Z.Query_primaryContext}}class u extends i.error.ErrorListener{errors=[];syntaxError(e,t,r,i,s,n){this.errors.push({message:`line ${r}, col ${i}: ${s}`,location:{line:r,column:i}})}}const d=/(--[^\r\n]*)|(\/\/[^\r\n]*)|(\/\*[\w\W]*?(?=\*)\*\/)/gi,c=/EXTRACT\(.*?\)(?:\s+AS\s+"\w+?")?,?/gi,h=/(?:semantic_search\(')([\w.]+)'/i;class p{parse(e){const t=new i.InputStream(e),r=new s.Z(t),o=new i.CommonTokenStream(r),a=new n.Z(o),d=new l,c=new u;if(a.removeErrorListeners(),a.addErrorListener(c),i.tree.ParseTreeWalker.DEFAULT.walk(d,a.root()),c.errors?.length)throw new Error(JSON.stringify(c.errors));return d.result}}},66462:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(4973);const s=/\s+(?!FROM FILL)(?!FROM TIMESERIES)(?!FROM SEMANTIC_SEARCH)(?:FROM|JOIN)\s+"?([\w.]+)"?/gi;class n{#nt;constructor(e){this.#nt=new Set,s.lastIndex=0;const t=e.replace(i.COMMENT_REG_EXP,"").replace(i.EXTRACT_REG_EXP,""),r=i.SEMANTIC_SEARCH_REG_EXP.exec(t);let n;for(null!=r&&r.length>0&&this.#nt.add(r[1]);n=s.exec(t);)this.#nt.add(n[1])}getTableNames(){return this.#nt}}},3694:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this.state=e,this.isReplace=t}isEqual(e){return this.isReplace===e.isReplace&&this.state.isEqual(e.state)}}},68726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(57446),s=r(59816),n=r(86866);class o{constructor(e,t){this._metadataHolder=e,this._runtime=t}async applyExternalState(e){!e.isReplace&&e.state.isEmpty()||(await this._applyExternalFilters(e),this.applyExternalSelections(e))}applyExternalSelections(e){const t=e.state.getStepSelections(),r=e.state.getDataSourceSelections();for(const o of this._runtime.getLenses()){const a=t[o.getId()];if(null!=a){o.callCapabilityMethod(s.SELECTION,"setExternalSelection",[a]);continue}const l=o.getLensMetadata(),u=n.Z.fromCode(l.getType()).getDefinition().getDataSourceType(l);!o.callCapabilityMethod(s.SELECTION,"setExternalSelectionByDataSource",[r.get(u).getOrElse((()=>new i.Z))])&&o.hasValidLastResult()&&e.isReplace&&o.callCapabilityMethod(s.SELECTION,"fireDefaultSelections",[!1])}}async _applyExternalFilters(e){const t=this._runtime.getGlobalFilterManager();return e.isReplace&&await t.resetFilters(!0),t.addFilters(e.state.getDashboardFilters(this._metadataHolder.getMetadata()),!0)}}},50933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(96486),s=r(67399);class n extends s.Z{describe({includeSteps:e=!1,includeGlobalFilterSettings:t=!1,includeFacetingFilters:r=!1}={}){const i=super.describe({includeSteps:e,includeGlobalFilterSettings:t,includeFacetingFilters:r});return this._getDataSourceTypes().forEach((e=>{const t=e.getStateKey();Object.keys(this._json[t]).forEach((e=>{this._json[t][e]=this._json[t][e].filter((e=>!e.isExternal))}))})),i}}var o=r(96900),a=r(95783),l=r(59816),u=r(76133),d=r(1209);class c{constructor(e,t,r){this._runtime=e,this._dataSourceStateFilterId=t,this._componentDescribes=r}getCollatedFilters(e,t,r=!1,i=!1,s=o.Z.NONE,n=new Set){const a=this._getDataSourceStateFilter(),l=[];for(const o of e)a.hasStateForDataSource(o)&&Array.prototype.push.apply(l,a.getState(o).collate(t,r,i,s,n));return l}getState(e,t=!0){const r=this._getStateJson(this._runtime,e,t);if(this._componentDescribes&&this._componentDescribes.size){const i={};this._componentDescribes.forEach(((r,s)=>{i[s]={state:this._getStateJson(r.getRuntime(),e,t),pageId:r.getCurrentPageName()}})),r.components=i}return e?new n(r):new s.Z(r)}_getStateJson(e,t,r){const s={...i.fromPairs(d.Z.enums().filter((e=>e.doesSupportFaceting())).map((e=>[e.getStateKey(),{}]))),steps:{}};this._getDataSourceStateFilter(e).getStates().forEach((e=>{const i=e.getDataSource(),n=i.getType();if(!n.doesSupportFaceting())return;const a=i.getName(),l=e.getGlobalFilterEntries({excludeLinked:r,excludeExternal:t}).map(this._buildGlobalFilterEntryJson.bind(this,t));e.getFilterEntries([u.Z.FACETING],{excludeLinked:r,excludeExternal:t,receiveFacetMode:o.Z.ALL}).forEach((e=>{l.push(this._buildFacetingFilterEntryJson(t,e))})),l.length&&(s[n.getStateKey()][a]=l)}));for(const t of e.getLenses())t.getNamespace()===e.getNamespace()&&t.hasCapability(l.SELECTION)&&t.hasValidLastResult()&&(s.steps[t.getId(!1)]=t.getLastSelectionState().describe());return s}_buildGlobalFilterEntryJson(e,t){const r=t.getFilter();return{...this._buildEntryJson(e,t),type:"global",hidden:r.isHidden(),locked:r.isLocked(),filter:{operator:r.getOperator().code,values:r.getValues()}}}_buildFacetingFilterEntryJson(e,t){return{...this._buildEntryJson(e,t),type:"faceting",selection:t.getFilter().getValues()}}_buildEntryJson(e,t){const r={fields:this._getFilterColumns(t.getFilter())};return e&&t.isExternal()&&(r.isExternal=!0),r}_getFilterColumns(e){return e.getColumns().map((e=>e.getValue()))}_getDataSourceStateFilter(e=this._runtime){const t=e.getFilter(this._dataSourceStateFilterId);if(!(t instanceof a.Z))throw new Error("Expected data source state filter to be set.");return t}}},91046:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(81513),n=r(68831),o=r(47333),a=r(99689),l=r(41992);class u extends s{constructor(e,t){super(e),this._pendingQueriesCount=0,this._debouncedOnUpdateLoadingState=(0,i.debounce)(t,100)}getTopics(){return[new n.Z(a.Z.STATUS_CHANGE)]}_onFulfilled(e,t,r){if(!(e instanceof o.Z))throw new Error("Received unexpected message type.");{const t=this._pendingQueriesCount;switch(e.getNewStatus()){case l.Z.QUERYING:this._pendingQueriesCount++;break;case l.Z.IDLE:case l.Z.PAUSED:case l.Z.NOT_STARTED:case l.Z.DISCONNECTING:this._pendingQueriesCount--}t!==this._pendingQueriesCount&&this._debouncedOnUpdateLoadingState(this._pendingQueriesCount>0)}}}},83977:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(81513),s=r(99689),n=r(95435);class o extends i{constructor(e,t,r){super(e+"_"+t),this._lensId=t,this._onMessageFulfilled=r}getTopics(){return[new n.Z(this._lensId,s.Z.RESULT)]}_onFulfilled(e,t,r){this._onMessageFulfilled()}}},91088:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(81513),s=r(99689),n=r(68831),o=r(591);class a extends i{attach(e){this._onResult=e}detach(){this._onResult=null}getTopics(){return[new n.Z(s.Z.RESULT)]}_onFulfilled(e,t,r){if(!(e instanceof o.Z))throw new Error("Unexpected non-result message received by result error subscriber.");this._onResult&&this._onResult(e)}}},37073:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(96486);class s{static unique(e){return i.uniqBy(e,(e=>e.getHash()))}}},96470:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(60803),s=r(53018),n=r(4429);class o{constructor(e,t,r){this._filterType=e,this._includeLinked=t,this._dataSource=r}isOfTopic(e){return e instanceof i.Z&&e.isOfFilterType(this._filterType)&&(this._includeLinked||!(e instanceof s.Z||e instanceof n.Z))&&(null==this._dataSource||e.hasDataSource(this._dataSource))}getHash(){let e=`FILTER_TYPE:${this._filterType.name}.${this._includeLinked?"INCLUDE":"EXCLUDE"}_LINKED`;return this._dataSource&&(e+=`[${this._dataSource.getHash()}]`),e}}},68831:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._messageType=e}getMessageType(){return this._messageType}isOfTopic(e){return e.getType()===this._messageType}getHash(){return`MESSAGE_TYPE:${this._messageType.name}`}}},95435:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this._publisherId=e,this._messageType=t}getPublisherId(){return this._publisherId}getMessageType(){return this._messageType}isOfTopic(e){return e.getPublisherId()===this._publisherId&&(null==this._messageType||e.getType()===this._messageType)}getHash(){let e=`PUBLISHER:${this._publisherId}`;return this._messageType&&(e+=`.${this._messageType.name}`),e}}},64848:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(16892);class s{constructor(e){this._lensId=e}isOfTopic(e){return e instanceof i.Z&&e.lensId===this._lensId}getHash(){return`UPDATE_COUNTDOWN_LATCH:${this._lensId}`}}},31889:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(90554);const n=/(!{[a-zA-Z]+[.][a-zA-Z]+})/g,o=new Map([["!{user.name}",e=>e.getName()],["!{user.id}",e=>e.getId()],["!{user.rolename}",e=>e.getRoleName()],["!{user.roleid}",e=>e.getRoleId()]]);class a{_tokenValues=new Map;constructor(e){for(const[t,r]of o.entries())this._tokenValues.set(t,r(e)||null)}tokenize(e,t,r=!0){return(0,i.isEmpty)(e)?e:Array.isArray(e)?this._tokenizeArray(e,t,r):"object"==typeof e?this._tokenizeObject(e,t,r):"string"==typeof e?this._tokenizeString(e,t):e}_tokenizeObject(e,t,r){return(0,s.mapObject)(e,(e=>this.tokenize(e,t,r)))}_tokenizeArray(e,t,r){const i=[];for(const s of e)if("string"!=typeof s)i.push(s);else{const e=this._tokenizeString(s,t);if(null===e){if(r)continue;i.push("")}else i.push(e)}return i}_tokenizeString(e,t){if(t)return this._tokenizePartialString(e);{const t=this._tokenValues.get(e.toLowerCase());return void 0!==t?t:e}}_tokenizePartialString(e,t=""){const r=e.split(n);if(r.length<3)return e;for(let e=1,i=r.length;e<i;e+=2){const i=r[e].toLowerCase(),s=this._tokenValues.get(i);void 0!==s&&(r[e]=null!=s?s:t)}return r.join("")}}},70210:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(31550);class n extends i.Z{constructor(e){super(),this._displayName=e}getCode(){return this.code}getDisplayName(){return this._displayName}getDefaultStyle(){let e={};return this._displayName===n.HIGH_CONTRAST.getCode()&&(e={dashboardBackgroundColor:"#E6ECF2",titleColor:"#091A3E",numberColor:"#091A3E",backgroundColor:"#FFFFFF",borderLeftColor:"#091A3E",borderRightColor:"#091A3E",borderTopColor:"#091A3E",borderBottomColor:"#091A3E",borderColor:"#091A3E",color:"#091A3E"}),e}getDefaultTableStyle(){let e={};return this._displayName===n.HIGH_CONTRAST.getCode()&&(e={...this.getDefaultStyle(),borderColor:"#C6D3E1",borderWidth:1,cell:{backgroundColor:"#f2f6fa",fontColor:"#16325c"},header:{backgroundColor:"#C6D3E1",fontColor:"#091A3E",innerMinorBorderColor:"#7D98B3"},innerMajorBorderColor:"#335779",innerMinorBorderColor:"#7D98B3",fixedRowDividerColor:"#335779",fixedColumnDividerColor:"#335779",numberOfLines:1,oddRowColor:"#ffffff",evenRowColor:"#f2f6fa"}),e}getDefaultChartThemeOverride(){return this._displayName===n.ORIGINAL.getCode()?null:this._displayName===n.HIGH_CONTRAST.getCode()?"colorblindEnhanced":void 0}getDefaultRepeaterStyle(){let e={};return this._displayName===n.HIGH_CONTRAST.getCode()&&(e={...this.getDefaultStyle(),cardStyles:{backgroundColor:"#FFFFFF",borderColor:"#C6D3E1"},selectedStyles:{backgroundColor:"#FFFFFF",borderColor:"#0070D2"},cellStyles:{backgroundColor:"#FFFFFF",borderColor:"#E6ECF2",fontColor:"#091A3E"}}),e}getDefaultToggleStyle(){let e={};return this._displayName===n.HIGH_CONTRAST.getCode()&&(e={...this.getDefaultStyle(),selectedColor:s.WHITE.getHexCode(),selectedBackground:s.SKY.getHexCode()}),e}}n.add("ORIGINAL","original",new n("Original")).add("HIGH_CONTRAST","highContrast",new n("High Contrast")).finish()},70526:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getDateFieldName:()=>s});var i=r(96486);function s({queryWithoutFilters:e}){const t=null!=e.sources?e.sources[0].groups[0]:e.groups?.[0];if(null==t)throw new Error("Invalid date field for legacy date widget.");return Array.isArray(t)?(0,i.last)(t):t}},90456:(e,t,r)=>{"use strict";function i(e,t){return t?`${t}__${e}`:e}function s(e,t){const r=`${t}__`;return e.startsWith(r)?e.slice(r.length):e}r.d(t,{$:()=>i,V:()=>s})},43677:(e,t,r)=>{"use strict";r.d(t,{B:()=>i});const i="isPausable"},13822:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("IDLE",new s).add("QUERYING",new s).add("PAUSED",new s).finish()},21891:(e,t,r)=>{"use strict";r.d(t,{Z:()=>J});var i=r(69370),s=r(45772),n=r(8429),o=r(29655),a=r(76438);var l=r(59922),u=r(40651),d=r(18001),c=r(99689);class h{#ot;#at;constructor(e,t){switch(this.#ot=e,c.Z.fromName(t.toUpperCase())){case c.Z.RESULT:this.#at=d.Z.RESULT_DYNAMIC;break;case c.Z.SELECTION:this.#at=d.Z.SELECTION_DYNAMIC;break;default:throw new Error(`Invalid source type ${t}`)}}getStepId(){return this.#ot}getDependencyEdgeType(){return this.#at}}var p=r(73612),g=r(18948),m=r(70210);var _=r(61946),f=r(79973),y=r(95235),b=r(34809),C=r(31550),E=r(38241),S=r(68017);class T extends a{constructor(){super((new a.Builder).setDefaultWidth(2).setDefaultHeight(o.NORMAL,1).setDefaultHeight(o.FINE,4).setMinHeight(o.FINE,3).setHasStep(!1).setIcon("filter").setShouldRenderWidgetOnNoData(!0).setPlaceholderClickable(!0))}getDefaultWidgetStyle(){return S.Z.getFilterStyleWidgetDefaults()}static getPanelModeDefaultWidgetStyle(){return E.Property.getDefaults()}static getDefaultTitleParameters(){return{itemsPerRow:2,title:{visible:!1,text:{label:n.Z.getLabel("DashboardFilterPanel","defaultTitle"),color:C.BLACK.getHexCode(),fontSize:16,align:b.LEFT.getCode()},separatorColor:C.BLACK2.getHexCode()}}}static getDefaultFilterItemOptions(){return{propertyColor:C.BLUE4.getHexCode(),valueColor:C.BLUE3.getHexCode()}}getThemedStyle(e){return new m.Z(e).getDefaultStyle()}_getDefaultParameters(){return{showAllFilters:!1,filters:[],filterItemOptions:T.getDefaultFilterItemOptions()}}}var I=r(35214),v=r(42196);var R=r(4759),w=r(29457),A=r(80226),D=r(37987),L=r(41245),M=r(30836),N=r(56191);var O=r(22451),P=r(91989),x=r(54955),Z=r(34750),F=r(7561),k=r(20955),B=r(97168),W=r(783);var G=r(22855),U=r(44315),H=r(36832),V=r(82632),j=r(77173),q=r(96486),z=r(64271),$=r(63411),Q=r(89769);var Y=r(86866);class K extends g{_isValidForLens(e,t,r){return Y.Z.fromCode(e.getType())===Y.Z.INPUT}}class J extends i.Z{static getEnabledTypes(e){return(()=>{const t=[];for(const r of this.enums())!r.getDefinition().isInternal()&&r.getDefinition().isEnabled(e)&&t.push(r);return t})()}constructor(e,t,r){super(),this._definition=e,this._experiencePopoverName=t,this._experiencePopoverHelpArticle=r}getCode(){return this.code}getDefinition(){return this._definition}getLabel(){return n.Z.getLabel("DashboardWidgetType",this.getCode())}getExperiencePopoverName(){return this._experiencePopoverName}getExperiencePopoverHelpArticle(){return this._experiencePopoverHelpArticle}}J.add("CHART","chart",new J(new l)).add("TABLE","table",new J(new G)).add("REPEATER","repeater",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(3).setDefaultHeight(o.NORMAL,4).setDefaultHeight(o.FINE,8).setMinHeight(o.FINE,4).setMinHeight(o.NORMAL,2).setHasStep(!0).setCanSort(!0).setIcon("widget-repeater").setShouldRenderWidgetOnNoData(!1).setPlaceholderClickable(!0))}getLensConstraint(){return new g}getDynamicReferences(e){let t=[];if(e.cellProperties)for(const r of Object.keys(e.cellProperties)){const i=e.cellProperties[r];t=t.concat($.Z.fromCode(i.type).getDefinition().getDynamicReferences(e.cellProperties[r].parameters))}return t}getPropertiesMutatorAfterQueryUpdate(e,t,r){return new Q.Z(e.getId(),(0,q.isEmpty)(e.getParameters())?this.getDefaultParameters(t,e):e.getParameters())}getThemedStyle(e){return new m.Z(e).getDefaultRepeaterStyle()}canHaveInteractions(){return!0}getInteractionEventTypes(){return[z.Z.CLICK,z.Z.SELECT]}_getDefaultParameters(e,t){return{itemsPerRow:1,showActionMenu:!0,exploreLink:!0,cardProperties:{numColumns:12,rowHeight:"normal",cellSpacingX:1,cellSpacingY:1,styles:{backgroundColor:C.WHITE.getHexCode(),borderEdges:["all"],borderColor:C.GRAY.getHexCode(),borderWidth:1,borderRadius:4,leftPadding:2,rightPadding:4,topPadding:5,bottomPadding:6},selectedStyles:{backgroundColor:C.WHITE.getHexCode(),borderEdges:["all"],borderColor:C.SCIENCE_BLUE.getHexCode(),borderWidth:1,borderRadius:4}},cellProperties:{},sortableColumns:"all"}}},"repeater-dashboard-popover",s.Z.REPEATER)).add("TEXT","text",new J(new H.Z)).add("NUMBER","number",new J(new M)).add("LINK","link",new J(new R)).add("COMPONENT","component",new J(new class extends p{constructor(){super((new a.Builder).setDefaultWidth(6).setDefaultHeight(o.NORMAL,6).setDefaultHeight(o.FINE,12).setMinHeight(o.FINE,2).setMinHeight(o.NORMAL,1).setHasStep(!0).setIcon("view-tile").setShouldRenderWidgetOnNoData(!0).setPlaceholderClickable(!0))}isEnabled(e){return e!==u.Z.COMPONENT}isPlaceholder(e){return!1}getLensConstraint(){return new g}shouldUpdateInstantly(){return!0}_getDefaultParameters(){return{}}getThemedStyle(e){return new m.Z(e).getDefaultStyle()}getParameterAttributeReferences(e){const t=e.attributes??{},r=[];return Object.keys(t).forEach((e=>{const i=t[e];if(i&&"dynamic"===i.type&&null!==i.data&&"object"==typeof i.data){const{sourceId:e,sourceType:t}=i.data;r.push(new h(e,t))}})),r}})).add("CONTAINER","container",new J(new _)).add("IMAGE","image",new J(new v)).add("GLOBAL_FILTER","globalfilters",new J(new I)).add("FILTER_PANEL","filterpanel",new J(new T)).add("LIST","listselector",new J(new w)).add("INPUT","input",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(2).setDefaultHeight(o.NORMAL,2).setDefaultHeight(o.FINE,3).setViewModeMaxRows(o.NORMAL,N.SINGLE_LINE,1).setViewModeMaxRows(o.NORMAL,N.COMPACT,2).setViewModeMaxRows(o.FINE,N.SINGLE_LINE,4).setViewModeMaxRows(o.FINE,N.COMPACT,8).setMinHeight(o.FINE,3).setHasStep(!0).setIcon("widget-input").setShouldRenderWidgetOnNoData(!1).setExclusiveLensUser(!1).setPlaceholderClickable(!0))}getLensConstraint(){return new K}isPlaceholder(e){return!1===e?.hasLens()}getThemedStyle(e){return new m.Z(e).getDefaultStyle()}_getDefaultParameters(e,t){return{inputType:"slider",displayFormat:"number",titleFontSize:14,titleAlignment:"left",increments:1,showCurrentValue:!0,valuesRangeColor:"#747474",showValuesRange:!0,showActionMenu:!1}}},"input-dashboard-popover",s.Z.INPUT)).add("TOGGLE","pillbox",new J(new V)).add("DATE_SELECTOR","dateselector",new J(new f)).add("RANGE","rangeselector",new J(new P)).add("NAVIGATION","navigation",new J(new L)).add("EXPLORER_NLQ","explorerNlq",new J(new y)).add("EXPLORER_QUERY_BUILDER","explorerquerybuilder",new J(new j)).add("MODE_SWITCHER","modeswitcher",new J(new A)).add("QUERY_BUILDER","querybuilder",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(6).setDefaultHeight(o.NORMAL,3).setDefaultHeight(o.FINE,11).setViewModeMaxRows(o.NORMAL,N.COMPACT,3).setViewModeMaxRows(o.FINE,N.COMPACT,11).setIsInternal(!0).setIcon("data-play").setShouldRenderWidgetOnNoData(!0))}_getDefaultParameters(e){return{}}getLensConstraint(){return(new g).setIsInternal(!0)}_getSummaryDescription(e){return"Query Builder"}})).add("QUERY_EDITOR","queryeditor",new J(new O)).add("FIELDS_PANEL","fieldsPanel",new J(new F)).add("REPORT_CHART_PANEL","reportchartpanel",new J(new x)).add("REPORT_CHATTER","reportchatter",new J(new Z)).add("REPORT_METRICS","reportmetrics",new J(new k)).add("REPORT_TABLE","reporttable",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(6).setDefaultHeight(o.NORMAL,2).setDefaultHeight(o.FINE,2).setShouldRenderWidgetOnNoData(!0).setIsInternal(!0).setIcon("chart-thumb-valuestable"))}_getDefaultParameters(e,t){return{}}})).add("REPORT_WARNING_BANNER","reportwarning",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(6).setDefaultHeight(o.NORMAL,2).setDefaultHeight(o.FINE,2).setShouldRenderWidgetOnNoData(!0).setIsInternal(!0))}_getDefaultParameters(e,t){return{}}})).add("SETTINGS_FOOTER","settings",new J(new B)).add("INLINE_EDIT_FOOTER","ieditfooter",new J(new W)).add("AUTO","auto",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(6).setDefaultHeight(o.NORMAL,2).setDefaultHeight(o.FINE,2).setHasStep(!0).setShouldRenderWidgetOnNoData(!0).setIsInternal(!0).setCanShare(!0))}getValidConditionalFormattingTypes(){return[]}getSupportedConditionalFormattingStyles(){return[]}_getDefaultParameters(e,t){return{}}})).add("INHERIT","inherit",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(6).setDefaultHeight(o.NORMAL,2).setDefaultHeight(o.FINE,2).setHasStep(!0).setShouldRenderWidgetOnNoData(!0).setCanShare(!0).setIsInternal(!0))}getValidConditionalFormattingTypes(){return[]}getSupportedConditionalFormattingStyles(){return[]}_getDefaultParameters(e,t){return{}}})).add("NLQ_INPUT","nlqInput",new J(new D)).add("TETRIS","tetris",new J(new U)).add("CELL","cell",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(4).setDefaultHeight(o.NORMAL,1).setDefaultHeight(o.FINE,3).setMinHeight(o.FINE,2).setMinHeight(o.NORMAL,1).setHasStep(!1).setShouldRenderWidgetOnNoData(!0).setPlaceholderClickable(!1).setIsInternal(!0).setViewModeMaxRows(o.NORMAL,N.SINGLE_LINE,1).setViewModeMaxRows(o.NORMAL,N.COMPACT,2).setViewModeMaxRows(o.FINE,N.SINGLE_LINE,4).setViewModeMaxRows(o.FINE,N.COMPACT,8))}getDefaultParameters(e,t){return t?t.getDefinition()._getDefaultParameters(e):{}}getThemedStyle(e){return new m.Z(e).getDefaultStyle()}})).add("TABLEAU","tableau",new J(new class extends a{constructor(){super((new a.Builder).setDefaultWidth(12).setDefaultHeight(o.NORMAL,2).setDefaultHeight(o.FINE,2).setHasStep(!1).setShouldRenderWidgetOnNoData(!0).setCanShare(!0).setIsInternal(!0))}getValidConditionalFormattingTypes(){return[]}getSupportedConditionalFormattingStyles(){return[]}_getDefaultParameters(e,t){return{}}})).finish()},88353:(e,t,r)=>{"use strict";r.r(t),r.d(t,{buildSelectedRange:()=>c,getDefaultAbsoluteRange:()=>d,getWidgetDefaultRelativeRange:()=>h});var i=r(96486),s=r(33044),n=r(73096),o=r(5082),a=r(28537),l=r(77114),u=r(16011);function d(e){const t=e.getData()[0];if("number"==typeof t.min&&"number"==typeof t.max)return new s.Z(new a.Z(t.min),new a.Z(t.max))}function c(e,t,r){if((0,i.isEmpty)(r))return e.getParameter("presetsEnabled")||e.getParameter("absoluteModeEnabled")?this.getDefaultAbsoluteRange(t):this.getWidgetDefaultRelativeRange(e);{let e,t;const i=r[0];if(Array.isArray(i.min)||Array.isArray(i.max))return[e,t]=Array.from(["min","max"],(e=>{const t=i[e];if(Array.isArray(t)){const e=l.getEnumByCode(t[0]);return new o.Z(e.getDateTimeGrain(),t[1],e.isFiscal())}return null})),new n.Z(e,t);{const e="string"==typeof i.min?Date.parse(i.min):i.min,t="string"==typeof i.max?Date.parse(i.max):i.max,r="number"==typeof e?new a.Z(e):null,n="number"==typeof t?new a.Z(t):null;return new s.Z(r,n)}}}function h(e,t=e.getParameter("defaultFiscalMode"),r){return u.getDefaultRelativeRange(t,r)}},21318:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}["combo","filter"].forEach((e=>{s.add(e.toUpperCase(),e,new s)})),s.finish()},63411:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var i=r(69370),s=r(8429),n=r(96486),o=r(90554),a=r(1611),l=r(42333),u=r(38241);function d(){return{backgroundColor:u.Property.backgroundColor.getDefaultValue(),borderEdges:u.Property.borderEdges.getDefaultValue(),borderColor:u.Property.borderColor.getDefaultValue(),borderWidth:u.Property.borderWidth.getDefaultValue(),borderRadius:u.Property.borderRadius.getDefaultValue()}}var c=r(74577),h=r(59922),p=r(36263);var g=r(56977),m=r(42064),_=r(29682),f=r(37253),y=r(42196);var b=r(31550),C=r(30836);var E=r(36832);class S extends E.Z{_getDefaultParameters(e){return{content:{richTextContent:[{insert:s.Z.getLabel("DashboardPropertiesPanel","addText"),attributes:{color:b.BLACK.getHexCode().toLowerCase(),size:"16px"}},{insert:"\n",attributes:{align:"left"}}]}}}getDefaultWidgetStyle(){return d()}}class T extends i.Z{constructor(e){super(),this._definition=e}getDefinition(){return this._definition}getCode(){return this.code}getLabel(){return s.Z.getLabel("RepeaterCellWidgetType",this.getCode())}}T.add("TEXT","text",new T(new S)).add("NUMBER","number",new T(new class extends C{_getDefaultParameters(e){return{title:this._getDefaultTitle(e),measureField:this._getDefaultMeasureField(e),textAlignment:"left",compact:!1,titleColor:b.BLACK.getHexCode(),titleSize:16,numberColor:b.BLACK.getHexCode(),numberSize:16}}getDefaultWidgetStyle(){return d()}hasInvalidConfigurationState(e,t){const{measureField:r}=e;return null!=r&&!t?.hasColumn(r)}isPlaceHolder(e){return!e.measureField}})).add("IMAGE","image",new T(new class extends y{_getDefaultParameters(){return{fit:g.Z.ORIGINAL.getCode(),alignmentX:m.Z.LEFT.getCode(),alignmentY:_.Z.TOP.getCode()}}getDefaultWidgetStyle(){return d()}hasInvalidConfigurationState(e,t){const{source:r}=e;return null!=r&&!t?.hasColumn(r)}getSupportedConditionalFormattingStyles(){return[f.Z.BACKGROUND_COLOR,f.Z.BORDER_COLOR,f.Z.SYMBOL,f.Z.SYMBOL_COLOR]}getValidConditionalFormattingTypes(){return[l.SINGLE,l.MULTI,l.CATEGORIES,l.RAW]}})).add("CHART","chart",new T(new class extends h{_getDefaultParameters(e){const t=p.Z.FLAT_GAUGE,r={visualizationType:t.getCode(),columnMap:this._getDefaultColumnMap(e),valueType:"compactNumber",step:e.getId()},i=t.getDefinition();return Object.assign(r,i.getDefaultParameters()),(0,o.deleteNullValues)(r)}_getDefaultMeasureField(e){if(null==e)return null;const t=e.getLastResult().getMetadata().getColumns(a.Z.MEASURE)?.[0];return t?.getName()}_getDefaultColumnMap(e){const t=this._getDefaultMeasureField(e);return{plots:t?[t]:[]}}getDefaultWidgetStyle(){return d()}hasInvalidConfigurationState(e,t){const{columnMap:r}=e;return null!=r&&!c.isValid(r,t)}_getChartType(e){return p.Z.fromCode(e.parameters.visualizationType)}isPlaceHolder(e){const{columnMap:t}=e;return(0,n.isEmpty)(t)||(0,n.isEmpty)(t.plots)}getValidConditionalFormattingTypes(){return[l.MULTI]}})).finish()},68017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(31550),s=r(60626),n=r(21318);class o{static getDefaultSelectorWidgetsParameters(e=!0){return{instant:e,showActionMenu:!0,displayMode:n.Z.FILTER.code,filterStyle:this.getFilterModeFilterStyleDefaults()}}static getComboModeFilterStyleDefaults(){return{titleColor:i.BLACK.getHexCode(),valueColor:i.BLACK.getHexCode()}}static getFilterModeFilterStyleDefaults(){return{titleColor:i.GRAY7.getHexCode(),valueColor:i.BLUE3.getHexCode()}}static getFilterStyleDefaults(e){return"filter"===e?this.getFilterModeFilterStyleDefaults():this.getComboModeFilterStyleDefaults()}static getWidgetStyleDefaults(e){return"filter"===e?this.getFilterStyleWidgetDefaults():this._getComboStyleWidgetDefaults()}static getFilterStyleWidgetDefaults(){return{backgroundColor:i.WHITE.getHexCode(),borderEdges:[s.ALL_BORDERS.getCode()],borderColor:i.GRAY7.getHexCode(),borderWidth:1,borderRadius:4}}static _getComboStyleWidgetDefaults(){return{backgroundColor:i.WHITE.getHexCode(),borderEdges:[],borderColor:i.BLACK2.getHexCode(),borderWidth:1,borderRadius:0}}}},36832:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var i=r(96486),s=r(31550),n=r(8429),o=r(93367),a=r(29655),l=r(37253),u=r(42333),d=r(64271),c=r(76438),h=r(37724),p=r(87945),g=r(90456),m=r(70210),_=r(99689);class f extends c{constructor(){super((new c.Builder).setDefaultWidth(2).setDefaultHeight(a.NORMAL,1).setDefaultHeight(a.FINE,3).setHasStep(!1).setIcon("widget-text").setCanAnnotate(!0))}getResolvedValueDefaults(e){const t=e?.getParameter("content")??{},r=Object.keys(t);return r.includes("displayTemplate")?{content:{displayTemplate:[""]}}:r.includes("richTextContent")?{content:{richTextContent:[]}}:{}}resolveWidgetParams(e,t,r,i){return this.resolveConditionalFormattingStyles(e,r,i),this.resolveDynamicData(e,r,i),this.resolveTooltipDynamicData(e,r,i),e}resolveConditionalFormattingStyles(e,t,r){const s=e.parameters.conditionalFormattingSource;if(null==s)return;const n=(0,g.$)(s.step,r),o=e.parameters.content.values;let a;if(null!=o){const e=(0,i.findLast)(Object.values(o),(e=>e.field===s.field));if(null!=e){const r=_.Z.fromName(e.sourceType.toUpperCase());a=t.find((e=>e.getPublisherId()===n&&e.getType()===r&&null!=e.getData()))}}if(null!=a){const e=a.getMetadata()?.getColumn(s.field),t=a.getData()[0];s.styles=a.getFormatter()?.getConditionalFormattingStyles(t,e,this.getSupportedConditionalFormattingStyles())}}resolveDynamicData(e,t,r){const i=(0,p.Z)(e.parameters.content,t,r),s=h.Z.getResolvedWidgetParams(e.parameters.content,t,r);let n={};s?n={displayTemplate:s}:i&&(n={richTextContent:i}),e.parameters.content=n}resolveTooltipDynamicData(e,t,r){if(e.parameters.tooltip?.content?.description?.displayTemplate){const i=h.Z.getResolvedWidgetParams(e.parameters.tooltip?.content?.description,t,r);e.parameters.tooltip.content.description=i}}getDynamicReferences(e,t){const r=[];return this._retrieveTooltipDynamicReferences(e,r,[],t),this._retrieveData(e,r,[]),r}getSupportedConditionalFormattingStyles(){return[l.Z.TEXT_COLOR,l.Z.BACKGROUND_COLOR,l.Z.BORDER_COLOR]}getValidConditionalFormattingTypes(){return[u.SINGLE,u.MULTI,u.CATEGORIES,u.RAW]}getThemedStyle(e){return new m.Z(e).getDefaultStyle()}canHaveInteractions(){return!0}canHaveFlowInteractions(){return!0}getInteractionEventTypes(){return[d.Z.CLICK]}_retrieveData(e,t,r){Object.keys(e).filter((e=>"tooltip"!==e)).forEach((i=>{r.push(i);const s=e[i];s instanceof Object&&(s.values&&"object"==typeof s.values?Object.keys(s.values).forEach((e=>{s.values[e].step&&s.values[e].field&&s.values[e].sourceType&&t.push(new o.Z(s.values[e],r.slice()))})):this._retrieveData(s,t,r),r.pop())}))}_getDefaultParameters(){return{content:{richTextContent:[{insert:n.Z.getLabel("DashboardPropertiesPanel","addText"),attributes:{color:s.BLACK.getHexCode().toLowerCase(),size:"16px"}},{insert:"\n",attributes:{align:"left"}}]},showActionMenu:!0}}_getSummaryDescription(e){return e.getParameter("content").displayTemplate}}},33590:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(22771);class s extends i{setOnAddCallback(e){return this._onAddCallback=e,this}getOnAddCallback(){return this._onAddCallback}setOnEditCallback(e){return this._onEditCallback=e,this}getOnEditCallback(){return this._onEditCallback}setEditLabel(e){return this._editLabel=e,this}getEditLabel(){return this._editLabel}}},24769:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(22771);class s extends i{setVideo(e){return this._video=e,this}getVideo(){return this._video}}},13938:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(22771);class s extends i{setInputType(e){return this._inputType=e,this}getInputType(){return this._inputType}setOnClickCallback(e){return this._onClickCallback=e,this}getOnClickCallback(){return this._onClickCallback}setWidgetMetadata(e){return this._widgetMetadata=e,this}getWidgetMetadata(){return this._widgetMetadata}setExecuteMutators(e){return this._executeMutators=e,this}getExecuteMutators(){return this._executeMutators}setWidgetConfigName(e){return this._widgetConfigName=e,this}getWidgetConfigName(){return this._widgetConfigName}getCanEditDynamicRefLine(){return this._canEditDynamicRefLine}setCanEditDynamicRefLine(e){return this._canEditDynamicRefLine=e,this}}},36215:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(22771);class s extends i{constructor(){super(...arguments),this._columns=[]}setColumns(e){return this._columns=e,this}setMarkTypes(e){return this._markTypes=e,this}getColumns(){return this._columns}getMarkTypes(){return this._markTypes}}},36263:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(69370),s=r(7372),n=r(83114),o=r(43759),a=r(52285),l=r(21456);class u extends i.Z{#lt;constructor(e){super(),this.#lt=e}getCode(){return this.code}getDefinition(){return this.#lt}getIconName(){return`chart-thumb-${this.getCode()}`}}u.add("GAUGE","gauge",new u(new o)).add("POLAR_GAUGE","polargauge",new u(new a)).add("FLAT_GAUGE","flatgauge",new u(new n)).add("BULLET","bullet",new u(new s.Z)).add("RATING","rating",new u(new l)).finish()},2120:(e,t,r)=>{"use strict";r.d(t,{b:()=>n,v:()=>s});var i=r(96486);const s="tooltip-widget-popover";function n(e){return(0,i.isEmpty)(e.description)&&(null!=(t=e.legend)&&!0===t.customizeLegend&&(!t.showDimensions||(0,i.isEmpty)(t.dimensions))&&(!t.showMeasures||(0,i.isEmpty)(t.measures)))&&(0,i.isEmpty)(e.widget?.name);var t}},64726:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(32350),s=r(33854),n=r(40651),o=r(71865),a=r(38994);class l{constructor({getComponentWidgetSdk:e,removeDashboardComponent:t,getComponentRuntime:r,executeMutators:i}){this._getComponentWidgetSdk=e,this._removeDashboardComponent=t,this._getComponentRuntime=r,this._executeMutators=i}updateComponentPage(e,t){this._getComponentWidgetSdk(e)?.setComponentPage(t)}refreshComponent(e){this._getComponentWidgetSdk(e)?this._getComponentWidgetSdk(e)?.refreshComponent():this._getComponentRuntime(e)?.stop(),this._removeDashboardComponent(e)}refreshReportComponent(e){this._getComponentWidgetSdk(e)?.refreshComponent()}deleteComponent(e){this._executeMutators([new o.Z(void 0,e),new a.Z(void 0,e)],{undoEnabled:!1}),this._getComponentRuntime(e)?.stop(),this._removeDashboardComponent(e)}editComponent(e){i.trigger("DEPRECATED:router:go-to-route",new s.Z({baseRoute:n.Z.COMPONENT.getCode(),instanceId:this._getComponentWidgetSdk(e)?.getComponentMetadata().getId()}))}}},64805:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var i=r(93640),s=r(48457);class n{constructor(e,t){this.mainActions=e,this.menuActions=t}}var o=r(67294),a=r(70917),l=r(96486),u=r.n(l),d=r(76126),c=r(84198),h=r(50130),p=r(97761),g=r(32574),m=r.n(g),_=r(8902),f=r.n(_),y=r(49720),b=r(8644),C=r(8429),E=r(74978),S=r(64138),T=r(85414),I=r(57843),v=r.n(I),R=r(82957);class w extends R.Z{constructor(e){super(),this._newName=e}mutate(e){e.dashboardJson.label=this._newName}}r(84213);var A=r(35944);const D=p.spacingMedium,L=p.spacingSmall,M=(0,a.iv)("padding:",p.spacingMedium," ",L,"!important;",""),N=(0,a.iv)("padding:",D,"!important;","");function O(e){const[t,r]=(0,o.useState)(!1),[i,s]=(0,o.useState)(!1),n=(0,o.useRef)(null),a=(0,o.useRef)(null),l=e.delegate,p=l.isNameEditable(),g=l.useSLDS,_=l.getEditNameTooltip(),I=l.getTag(),R=e.labelIconName,O=e.dashboardLabel,P=e.executeMutators,{showVideo:x}=(0,o.useContext)(T.Z),Z=(0,o.useCallback)((e=>{n.current=e}),[]),F=(0,o.useCallback)((e=>{a.current=e}),[]),k=(0,o.useCallback)((()=>{p&&r(!0)}),[p,r]);let B;if(p){const e="editIcon";B=g?(0,A.tZ)(d.Z,{content:_,align:"bottom",position:"overflowBoundaryElement",children:(0,A.tZ)(c.Z,{assistiveText:{icon:_},className:e,variant:"base",iconCategory:"utility",iconName:"edit",iconSize:"small",onClick:k})}):(0,A.tZ)(f(),{iconName:"edit",onclick:k,tooltip:_,additionalClassName:e})}const W=(0,o.useCallback)((e=>{r(!1),u().isEmpty((0,E.trim)(e))||e===O||P([new w(e)])}),[r,O,P]),G=(0,o.useCallback)((e=>W(e.target.value)),[W]),U=(0,o.useCallback)((e=>{if(e.charCode===y.KEY_CODE_ENTER)return W(n.current?.value)}),[W]),H=(0,o.useCallback)((e=>{const t=e.target,r=t.value,i=l.shouldSelectAllText(r)?0:r.length;return t.setSelectionRange(i,r.length)}),[l]);let V,j,q;if((0,o.useEffect)((()=>{const e=new ResizeObserver(u().debounce((e=>{const t=e[0];if(null==t||0===t.contentRect.width&&0===t.contentRect.height)return;const r=t.contentRect.width/16,n=i?parseFloat(L):parseFloat(D);s(r+2*n<65)}),200));return a.current&&e.observe(a.current),function(){e.disconnect()}}),[i]),e.showActionBar){const t=e.toggledActions?.map((e=>e.getId()));V=(0,A.tZ)(v(),{mainActions:e.actionSet.mainActions,menuActions:e.actionSet.menuActions,delegate:e.delegate,toggledActionIds:t,hotkeyManager:e.hotkeyManager,isEmbedded:e.isEmbedded})}if(e.showLastRefreshDate&&0!==e.lastRefreshDate){const t=b.formatRelativeTimestamp(new Date(e.lastRefreshDate)),r=C.Z.getLabel("DashboardHeader","updatedDate",t);q=(0,A.tZ)(d.Z,{triggerClassName:"refresh-date-tooltip",content:r,align:"bottom right",hasStaticAlignment:!0,hoverOpenDelay:500,children:(0,A.tZ)("div",{className:"refreshDate",children:r})})}if(e.showLastRefreshDate&&e.hasLiveData){const e=C.Z.getLabel("DashboardHeader","liveIndicator");j=(0,A.tZ)("div",{className:"liveIndicator",children:(0,A.tZ)(d.Z,{content:e,align:"bottom",position:"overflowBoundaryElement",children:(0,A.tZ)("div",{children:(0,A.tZ)(h.Z,{category:"utility",name:"record",className:"slds-icon-text-success slds-icon_x-small"})})})})}const z=(0,A.tZ)("h1",{className:"labelText",children:e.dashboardLabel}),$=R?(0,A.BX)("div",{className:"labelComp",children:[(0,A.tZ)(f(),{iconName:R}),z]}):z,Q=(0,A.tZ)(d.Z,{triggerClassName:"label-tooltip",content:e.dashboardLabel,align:"bottom left",hasStaticAlignment:!0,hoverOpenDelay:500,children:$}),Y=e.delegate.getVideo();let K;if(e.showTitle)if(t&&p){const t=m().buildClassName("name",e.delegate.useSLDS?"slds-input":"");K=(0,A.tZ)("input",{className:t,type:"text",maxLength:e.delegate.getNameMaxLength(),placeholder:e.delegate.getNamePlaceholder(),defaultValue:e.dashboardLabel,onBlur:G,autoFocus:!0,onKeyPress:U,onFocus:H,ref:Z})}else{const t=m().buildClassName("sub-label",p?"":"hide"),r=m().buildClassName("name",p?"":"preview");K=(0,A.BX)("div",{className:r,children:[(0,A.BX)("div",{className:t,children:[e.delegate.getHeaderLabel(),null!=Y&&(0,A.tZ)(S.Z,{showVideo:x.bind(null,Y)})]}),(0,A.BX)("div",{className:"dash-title",children:[(0,A.tZ)("div",{className:"label",onClick:k,role:"presentation",children:Q}),B,I&&(0,A.tZ)("span",{className:"slds-badge dash-tag",children:I})]})]})}return(0,A.BX)("div",{className:"headerPanel",css:i?M:N,onMouseDown:e.onMouseDown,role:"presentation",ref:F,children:[(0,A.tZ)("div",{className:"breadcrumb",children:e.pluginManager.getTitleRenderables()}),(0,A.BX)("div",{className:"headerPanelItems",children:[(0,A.BX)("div",{className:"panelItemGroup leftPanelItems",children:[K,(0,A.tZ)("div",{className:"header-renderables",children:e.pluginManager.getHeaderRenderables(i)})]}),(0,A.BX)("div",{className:"panelItemGroup rightPanelItems",children:[q,j,V]})]})]})}class P{renderHeader(e){const{getMetadata:t,dashboard:r,viewConfig:i,showModal:s,closeModal:n,viewManager:o,closeViewInCRMA:a,getRuntimeLens:l,isEditMode:u,...d}=e,c=this._getActionBarDelegate({executeMutators:e.executeMutators,showModal:s,closeModal:n,dashboard:r,getMetadata:t,getRuntimeLens:l,isEditMode:u,isEmbeddedInTCRMStudio:this._isEmbeddedInTCRMStudio(e.viewConfig),isEmbeddedInCRM:this._isEmbeddedInTCRM(e.viewConfig),viewManager:o,closeViewInCRMA:a});return(0,A.tZ)(O,{dashboardLabel:r.getLabel(),isEmbedded:i.getChromeMode().isEmbedded,showTitle:i.getShowTitle(),toggledActions:e.pluginManager.getToggledHeaderActions(),lastRefreshDate:r.getRefreshDate(),hasLiveData:r.getLenses().some((e=>e.getSObject()||e.getConnectionName())),delegate:c,...d})}getHeaderActions(e,t,r,i,s){const o=new Map,a=s.getDisabledHeaderActionIds();for(const e of s.getHeaderActions()){const t=e.getId();if(null==t)throw new Error("No ID specified for plugin action.");if(o.has(t))throw new Error(`Multiple plugin actions found with ID "${t}".`);a.has(t)&&e.setDisabled(!0),o.set(t,e)}const l=[];for(const n of this._getMainActions(e,t,s)){const e=[];for(const s of n){const n=s.getAction(t,r,i,o);n&&(e.push(n),a.has(n.getId())&&n.setDisabled(!0))}e.length&&l.push(e)}const u=[];for(const s of this._getMenuActions(e,t)){const e=s.getAction(t,r,i,o);e&&(u.push(e),a.has(e.getId())&&e.setDisabled(!0))}return new n(l,u)}getWidgetActions(e,t){const r=t.getWidgetActions(e),i=this._getWidgetActionIds();if(null==i||0===i.length)return r;const s=new Map;for(const e of r){const t=s.get(e.getId())??[];t.push(e),s.set(e.getId(),t)}const n=[];for(const e of i){const t=s.get(e);t&&n.push(...t)}return n}_getMainActions(e,t,r){return[]}_getMenuActions(e,t){return[]}_getWidgetActionIds(){return[]}_getActionBarDelegate({isEditMode:e}){return new s.Z({isEditMode:e})}_isEmbeddedInTCRMStudio(e){return e.getChromeMode().analyticsMode===i.Z.ANALYTICS_STUDIO}_isEmbeddedInTCRM(e){const t=e.getChromeMode().analyticsMode;return t===i.Z.ANALYTICS_TAB||t===i.Z.ANALYTICS_STUDIO}getMinRowHeight(){}}},26612:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(67294),s=r(41553),n=r(86441),o=r(84198),a=r(8429),l=r(70917),u=r(97761);function d(e){return(0,l.iv)("display:flex;opacity:",e?1:0,";align-items:center;justify-content:center;position:absolute;width:1.25rem;height:1.25rem;background-color:#ffffff;border:1px solid ",u.paletteBlue90,";border-radius:",u.borderRadiusMedium,";transition:",u.durationPromptly," border-color;z-index:10!important;cursor:pointer;right:0.5rem;top:0.5rem;","")}var c=r(35944);function h({actions:e}){const t=e.map((e=>({label:e.title,value:e.title,leftIcon:{name:e.icon,category:"utility"},record:e}))),[r,l]=(0,i.useState)(!1);return(0,c.tZ)("div",{className:"widget-action-dropdown",css:d(r),"data-html2canvas-ignore":"true",children:(0,c.tZ)(s.Z,{align:"right",position:"overflowBoundaryElement",onSelect:(e,t)=>e.record.link(t),options:t,className:"action-dropdown-item-options-menu",width:"xx-small",children:(0,c.tZ)(n.Z,{children:(0,c.tZ)(o.Z,{className:"slds-global-actions__item-action","aria-haspopup":"true",iconCategory:"utility",iconName:"down",iconSize:"small",variant:"icon",assistiveText:{icon:a.Z.getLabel("DashboardWidgetAction","chevronDown")},onFocus:()=>l(!0),onBlur:e=>{e.relatedTarget instanceof HTMLElement&&"menuitem"===e.relatedTarget.getAttribute("role")||l(!1)}})})})})}class p{renderActions(e){return(0,c.tZ)(h,{actions:e})}}},6137:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(10967);class s extends i{constructor(e){super(),this._showWidgetProperties=e}selectWidget(e,t,r){const i=super.selectWidget(...arguments);return i.length>0&&this._showWidgetProperties(),i}selectAllWidgets(e,t){const r=super.selectAllWidgets(e,t);return this._showWidgetProperties(),r}didAddWidget(e,t){let r;return null!=this._existingWidgetUID?(r=this._updateSelectedWidget(this._existingWidgetUID,t),delete this._existingWidgetUID):(r=super.didAddWidget(e,t),this._showWidgetProperties()),r}didMouseEnterWidget(e){this._existingWidgetUID=e}didMouseLeaveWidget(e){delete this._existingWidgetUID}}},48457:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(26734);class n extends s.Z{constructor({isEditMode:e}){super(),this._isEditMode=e}useSLDS(){return!0}isNameEditable(){return this._isEditMode()}getTag(){}getNameMaxLength(){return 80}getNamePlaceholder(){return i.Z.getLabel("DashboardHeader","namePlaceholder")}getEditNameTooltip(){return i.Z.getLabel("DashboardHeader","editName")}shouldSelectAllText(e){return!1}getHeaderLabel(){return i.Z.getLabel("DashboardHeader","label")}getVideo(){}}},34754:(e,t,r)=>{"use strict";r.d(t,{Ho:()=>l,L6:()=>a,Py:()=>i,ij:()=>s,uy:()=>o,vc:()=>n});const i="dashboard-left-panel",s="crma-rightPanel",n="handle",o="hasHandle",a="open",l="wide"},21568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this.id=e,this.isWide=t}}},40811:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=new(r(21568).Z)("empty",!1)},9673:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{constructor(e){super(),this._value=e}getValue(){return this._value}}s.add("MARKER",new s("marker")).add("CONDITIONAL_FORMATTING",new s("conditionalFormatting")).add("STEP_SELECTION",new s("stepSelection")).add("REFERENCE_LINE",new s("referenceLine")).add("DYNAMIC_WIDGET_PANEL",new s("dynamicWidgetPanel")).add("TOOLTIP_WIDGET_PANEL",new s("tooltipWidgetPanel")).add("PARAMETER_PANEL",new s("parameterPanel")).finish()},91019:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._name=e}getName(){return this._name}canRegister(e){return!0}bootstrap(e,t){this._sdk=e,this._stateDelegate=t}setup(){}tearDown(){}setPublisher(e){this._publisher=e}setLensConnector(e){this._lensConnector=e}getInitialState(){return{}}didChangeMode(){}getRuntimeStepId(){}onRuntimeStepResult(e){}onRuntimeStepSelection(e){}onRuntimeStepInteraction(e){}getRuntimeTopics(){return[]}onRuntimeMessage(e,t){}onMetadataChange(e,t){}onUpdateLoadingState(e){}getHeaderRenderable(e){}getTitleRenderable(){}areHeaderActionsHidden(){return!1}getHeaderActions(){return[]}getDisabledHeaderActionIds(e){return new Set}getButtonBarActions(){return[]}getToggledHeaderActions(){return[]}shouldAddWidgetActions(e){const t=e.getParameter("showActionMenu");return!0===t||null==t}getWidgetActions(e){return[]}getWidgetDecorationRenderable(e,t,r){}getRightPanelModeIds(){return[]}canRenderRightPanel(e){return!0}getRightPanelRenderable(){}getLeftPanelMode(){}getLeftPanelRenderable(){}getFloatingRenderable(){}getInjectedWidgetProps(e){return{}}_isCurrentRightPanelMode(){const e=this._sdk.getOverlappingRightPanelMode()||this._sdk.getRightPanelMode();return this.getRightPanelModeIds().some((t=>t===e.id))}}},55647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(38927);class s{constructor(e,t,r){this._pluginName=e,this._getPluginState=t,this._setPluginState=r}getState(){return this._getPluginState(this._pluginName)}setState(e,t){this._setPluginState(this._pluginName,e,t)}}var n=r(40811),o=r(8429),a=r(91019),l=r(35944);class u extends a.Z{constructor(e,t,r){super(e),this._parentPanelMode=t,this._rightPanelModeId=r}getRightPanelModeIds(){return[this._rightPanelModeId]}getInjectedWidgetProps(e){return{}}getRightPanelRenderable(){return(0,l.tZ)("div",{className:"propertiesPanel widget-properties-panel advancedProperties",children:this._getRightPanelRenderable()})}getWidgetDecorationRenderable(e,t){}tearDown(){this._isCurrentRightPanelMode()&&this._sdk.updateRightPanel(this._parentPanelMode)}setParentMode(e){this._parentPanelMode=e}_onExit(e=[]){this._sdk.updateRightPanel(this._parentPanelMode,{mutators:e,commandDescription:o.Z.getLabel("PropertiesPanel","exitAdvancedPanel")})}_getRightPanelRenderable(){}}class d{_registeredPlugins=new Map;_pluginPublishers=new Map;constructor(e,t,r){this._sdk=e,this._getPluginState=t,this._setPluginState=r}registerPlugins(e,t){e.forEach((e=>this.registerPlugin(e,t)))}registerPlugin(e,t){if(!e.canRegister(this._sdk.viewConfig))return;const r=e.getName();if(this._registeredPlugins.get(r))throw new Error(`Plugin ${r} already registered.`);const i=new s(r,this._getPluginState,this._setPluginState);e.bootstrap(this._sdk,i),e.setup(),null==i.getState()?i.setState(e.getInitialState(),this._registerPluginPublisher.bind(this,e,t)):this._registerPluginPublisher(e,t),this._registeredPlugins.set(r,e)}tearDownPlugins(e){for(const t of this._registeredPlugins.values())this.tearDownPlugin(t.getName(),e)}tearDownPlugin(e,t){const r=this._registeredPlugins.get(e);if(!r)return;this._registeredPlugins.delete(e);const i=this._pluginPublishers.get(e);i&&t.removeSubscriber(i.getId()),r.tearDown()}setPluginOrder(e){const t=new Map;for(const r of e){const e=r.getName(),i=this._registeredPlugins.get(e);i&&t.set(e,i)}this._registeredPlugins=t}getHeaderRenderables(e){const t=[];for(const r of this._registeredPlugins.values()){const i=r.getHeaderRenderable(e);null!=i&&t.push(i)}return t}getTitleRenderables(){const e=[];for(const t of this._registeredPlugins.values()){const r=t.getTitleRenderable();null!=r&&e.push(r)}return e}areHeaderActionsHidden(){return Array.from(this._registeredPlugins.values()).some((e=>e.areHeaderActionsHidden()))}getHeaderActions(){const e=[];for(const t of this._registeredPlugins.values())Array.prototype.push.apply(e,t.getHeaderActions());return e}getDisabledHeaderActionIds(){const e=new Set,t=[];for(const e of this.getHeaderActions())t.push(e.getId());for(const r of this._registeredPlugins.values())r.getDisabledHeaderActionIds(t)?.forEach(e.add,e);return e}getButtonBarActions(){const e=[];for(const t of this._registeredPlugins.values())Array.prototype.push.apply(e,t.getButtonBarActions());return e}getToggledHeaderActions(){const e=[];for(const t of this._registeredPlugins.values())Array.prototype.push.apply(e,t.getToggledHeaderActions());return e}getWidgetActions(e){const t=[];for(const r of this._registeredPlugins.values())r.shouldAddWidgetActions(e)&&Array.prototype.push.apply(t,r.getWidgetActions(e));return t}getWidgetDecorationRenderables(e,t,r){const i=[];for(const s of this._registeredPlugins.values()){const n=s.getWidgetDecorationRenderable(e,t,r);null!=n&&i.push(n)}return i}canRenderRightPanel(e){const t=this._sdk.getRightPanelMode();return!!t&&!Array.from(this._registeredPlugins.values()).some((r=>this._isRightPanelModeSupported(r,t)&&!r.canRenderRightPanel(e)))}getRightPanelRenderable(){return this._getPanelRenderable(this._sdk.getRightPanelMode())}getOverlappingPanelRenderable(){return this._getPanelRenderable(this._sdk.getOverlappingRightPanelMode())}setOverlappingPanelParentMode(e){const t=this._getPanelPlugin(e);t instanceof u&&t.setParentMode(this._sdk.getRightPanelMode())}_getPanelPlugin(e){if(e&&e!==n.Z)for(const t of this._registeredPlugins.values())if(this._isRightPanelModeSupported(t,e))return t}_getPanelRenderable(e){const t=this._getPanelPlugin(e);if(t)return t.getRightPanelRenderable()}getLeftPanelRenderable(){const e=this._sdk.getLeftPanelMode();if(e&&e!==n.Z)for(const t of this._registeredPlugins.values()){const r=t.getLeftPanelMode();if(r&&r.id===e.id)return t.getLeftPanelRenderable()}}getFloatingRenderables(){const e=[];for(const t of this._registeredPlugins.values()){const r=t.getFloatingRenderable();null!=r&&e.push(r)}return e}getPlugin(e){return this._registeredPlugins.get(e)}_registerPluginPublisher(e,t){const r=new i.Z(e);t.addPublisher(r),this._pluginPublishers.set(e.getName(),r);const s=e.getRuntimeStepId();if(null!=s){const r=t.getLens(s);r&&e.setLensConnector(r.createLensConnector())}e.setPublisher(r)}getInjectedWidgetProps(e){const t={};for(const r of this._registeredPlugins.values())Object.assign(t,r.getInjectedWidgetProps(e));return t}didChangeMode(){for(const e of this._registeredPlugins.values())e.didChangeMode()}onMetadataUpdate(e,t){for(const r of this._registeredPlugins.values())r.onMetadataChange(e,t)}onUpdateLoadingState(e){for(const t of this._registeredPlugins.values())t.onUpdateLoadingState(e)}_isRightPanelModeSupported(e,t){return e.getRightPanelModeIds().some((e=>t.id===e))}}},38927:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(95435),s=r(37073),n=r(38325),o=r(99689),a=r(591),l=r(2843),u=r(3704);class d extends n{constructor(e){super(`plugin__${e.getName()}`,!1),this._plugin=e;let t=this._plugin.getRuntimeTopics()||[];const r=this._plugin.getRuntimeStepId();if(null!=r){const e=new i.Z(r,o.Z.RESULT),s=new i.Z(r,o.Z.SELECTION),n=new i.Z(r,o.Z.INTERACTION);t=[...t,e,s,n],this._resultTopic=e,this._selectionTopic=s,this._interactionTopic=n}this._topics=s.Z.unique(t)}getTopics(){return this._topics}publishMessage(e){this._getRuntimeConnector().publish(e)}_onFulfilled(e,t,r){this._resultTopic&&e instanceof a.Z&&this._plugin.onRuntimeStepResult(e),this._selectionTopic&&e instanceof l.Z&&this._plugin.onRuntimeStepSelection(e),this._interactionTopic&&e instanceof u.Z&&this._plugin.onRuntimeStepInteraction(e),this._plugin.onRuntimeMessage(e,r)}}},24359:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this.viewConfig=e.viewConfig,this.getDashboardMetadata=e.getDashboardMetadata,this.metadataHolder=e.metadataHolder,this.metadataProvider=e.metadataProvider,this.getGridLayoutWidget=e.getGridLayoutWidget,this.getCurrentLayout=e.getCurrentLayout,this.getCurrentLayoutPage=e.getCurrentLayoutPage,this.getRuntimeLens=e.getRuntimeLens,this.getRightPanelMode=e.getRightPanelMode,this.getOverlappingRightPanelMode=e.getOverlappingRightPanelMode,this.updateRightPanel=e.updateRightPanel,this.toggleRightPanel=e.toggleRightPanel,this.getLeftPanelMode=e.getLeftPanelMode,this.setLeftPanelMode=e.setLeftPanelMode,this.layoutSwitcher=e.layoutSwitcher,this.commandInvoker=e.commandInvoker,this.executeMutators=e.executeMutators,this.resetRuntime=e.resetRuntime,this.stateApplicator=e.stateApplicator,this.getWidgetContainerDomNode=e.getWidgetContainerDomNode,this.getDashboardDomNode=e.getDashboardDomNode,this.getDashboardFilterManagerId=e.getDashboardFilterManagerId,this.removeDashboardFilters=e.removeDashboardFilters,this.dataSourceStateProvider=e.dataSourceStateProvider,this.messageProvider=e.messageProvider,this.getHotkeyManager=e.getHotkeyManager,this.dashboardDescribe=e.dashboardDescribe,this.imageManagerDelegate=e.imageManagerDelegate,this.lensActionsDelegate=e.lensActionsDelegate,this.deepLinker=e.deepLinker,this.getWidgetsReadyPromise=e.getWidgetsReadyPromise,this.openSaveModal=e.openSaveModal,this.removeComponent=e.removeComponent,this.getComponentSdk=e.getComponentSdk,this.getComponentWidgetDelegate=e.getComponentWidgetDelegate,this.lensActions=e.lensActions,this.getTooltipWidget=e.getTooltipWidget,this.setPluginState=e.setPluginState,this.getPluginManager=e.getPluginManager,this.getWidgetProvider=e.getWidgetProvider,this.addNotification=e.addNotification,this.appServices=e.appServices,this.startAllLenses=e.startAllLenses,this.startLens=e.startLens,this.router=e.router,this.captureUsageTracking=e.captureUsageTracking,this.getTableauComponentSdk=e.getTableauComponentSdk,this.getDashboardScrollContainerDomNode=e.getDashboardScrollContainerDomNode}}},61476:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(64259),s=r(47475),n=r(41992),o=r(13822),a=r(43677);class l{#ut;#dt;#ct;#ht;#pt;#gt;#mt;#_t;#ft=o.Z.IDLE;constructor(e,t){this.#ut=e.getId(),this.#dt=t,this.onUpdateWidget(e)}onUpdateResults(e){this.#yt(),this.#pt=e.getId()}onUpdateWidget(e){this.#yt(),this.#gt=i.a(JSON.stringify(e.getJson()))}onUpdateStatus(e,t){const r=e.isPausableSubscriberPaused?.()??!1;return t.getParameter(a.B)&&r?this.#ft=o.Z.PAUSED:e.getNewStatus()===n.Z.QUERYING||e.getNewStatus()===n.Z.WAITING?this.#ft=o.Z.QUERYING:this.#ft=o.Z.IDLE,this.#ft}hasAllUpdates(e=!0){const t=this.#ct;if(!t)return!0;const r=t.getChanges(),i=r.some((e=>e.getType()===s.Type.STEP)),n=r.some((e=>e.getType()===s.Type.WIDGET&&e.getId()===this.#ut)),a=this.#mt!==this.#pt,l=this.#_t!==this.#gt;return(!i||a)&&(!e||!n||l)&&this.#ft!==o.Z.PAUSED}#yt(){const e=this.#dt.getLastCommandNumber();e!==this.#ht&&(null==this.#ht||e>this.#ht?this.#ct=this.#dt.peekUndo()[0]:this.#ct=this.#dt.peekRedo()[0],this.#ht=e,this.#mt=this.#pt,this.#_t=this.#gt)}}},5817:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{static fromSizeThreshold(e){return e<s.XSMALL.sizeThreshold?s.XSMALL:e<s.SMALL.sizeThreshold?s.SMALL:s.MEDIUM}constructor(e){super(),this.sizeThreshold=e}}s.add("MEDIUM","medium",new s(300)).add("SMALL","small",new s(200)).add("XSMALL","x-small",new s(70)).finish()},50003:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._widgetTypeToComponentMap=new Map,e.forEach((([e,t])=>{this._widgetTypeToComponentMap.set(e,t)}))}getComponentClass(e){const t=this._widgetTypeToComponentMap.get(e);if(t)return t;throw new Error("No React component class specified for widget type.")}getDimensionOverride(e,t){}}},69876:(e,t,r)=>{"use strict";r.d(t,{V:()=>o});var i=r(67294),s=r(96486),n=r(35944);function o(e){return function(t){const{imageUrl:r,isImageNotFound:o,fetchImageUrl:a}=function(e){const[t,r]=(0,i.useState)(),[n,o]=(0,i.useState)(!1);return{imageUrl:t,isImageNotFound:n,fetchImageUrl:async t=>{if((0,s.isEmpty)(t.name))return r(void 0),void o(!1);try{const i=await e.getImageManager().fetchImageInfo(t,!0),s=new Image;return s.onload=()=>{r(i.url),o(!1)},s.onerror=()=>{r(i.url),o(!0)},s.src=i.url,i.url}catch(e){return r(void 0),void o(!0)}}}}(t.imageManagerDelegate);return(0,n.tZ)(e,{...t,imageUrl:r,isImageNotFound:o,fetchImageUrl:a})}}},27911:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var i=r(67294),s=r(35944);function n(e){return function(t){const r=function(e){const[t,r]=(0,i.useState)();return(0,i.useEffect)((()=>e.addInlineEditStateUpdateHandler((e=>{r(e.getState())}))),[e]),t}(t.runtimeSubscriber);return(0,s.tZ)(e,{...t,inlineEditState:r})}}},72009:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{constructor(e,t){super(),this._isNumeric=e,this._iconName=t}isNumeric(){return this._isNumeric}getIconName(){return this._iconName}static fromIgnoreCaseCode(e){return super.hasCode(e)?super.fromCode(e):super.hasCode(e.toLowerCase())?super.fromCode(e.toLowerCase()):super.hasCode(e.toUpperCase())?super.fromCode(e.toUpperCase()):null}static isTextField(e){return this.fromIgnoreCaseCode(e)===s.TEXT}static isNumberField(e){return this.fromIgnoreCaseCode(e)===s.NUMBER}static isDateField(e){return this.fromIgnoreCaseCode(e)===s.DATE}}s.add("TEXT","text",new s(!1,"text")).add("COUNT","count",new s(!1,"topic2")).add("DATE","date",new s(!1,"event")).add("DATETIME","datetime",new s(!1,"event")).add("CURRENCY","Currency",new s(!0,"currency")).add("NUMBER","number",new s(!0,"topic2")).add("IDLOOKUP","IdLookup",new s(!1,"user")).finish()},57636:(e,t,r)=>{"use strict";r.d(t,{BW:()=>_,kh:()=>y,ls:()=>g,a4:()=>m,A6:()=>p,ej:()=>b,H:()=>C,Kz:()=>c,T9:()=>f});var i=r(61506),s=r(16045),n=r(40454),o=r(57587),a=r(91848),l=r(16283),u=r(78978);class d extends u{}function c(e,t){i.Z.get(s.Z).trigger(new n.Z(void 0,e,t))}function h(e,t){return new a.Z(void 0,e,Date.now(),t)}function p(e){i.Z.get(s.Z).trigger(e)}function g(e){i.Z.get(s.Z).trigger(new o.Z(void 0,e))}function m(e){i.Z.get(s.Z).trigger(e)}function _(e){return h(d.LOAD_SETUP,{datasetId:e})}function f(e,t){return h(d.LOAD_STORY,{analysisId:e,isFromDataset:t})}function y(e){return h(d.GET_SEARCH_INSIGHTS,{analysisId:e})}function b(e,t,r,i=!1){return c(l.Z.CREATE_STORY,{containerId:e,sourceId:t,isFromDataset:r,isUsingStoryApi:i})}function C(e,t){return c(l.Z.API_ERROR,{status:e,message:t})}d.build(d,["LOAD_STORY","CREATE_STORY_TIME","GET_SEARCH_INSIGHTS","GET_INSIGHT","GET_GOALS","LOAD_SETUP","CREATE_STORY_VERSION_TIME","MODEL_MANAGER"])},16283:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{}s.build(s,["OPEN_STORY","CREATE_STORY","API_ERROR","LOAD_SETUP_ERROR","UPDATE_STORY_NAME","UPDATE_OUTCOME","SET_NUMERIC_MIN","SET_NUMERIC_MAX","SET_DATE_MIN","SET_DATE_MAX","SET_INCLUDE_OTHER","SET_BUCKETING_STRATEGY","CLOSE_SETUP","OPEN_SETUP","OPEN_MODEL_MANAGER","GET_WATERFALL","SET_PREVIEW_CARD","PLAY_BRIEFING","OPEN_CONTEXT_MENU","ADD_PINNED_CARD","REMOVE_PINNED_CARD","OPEN_DEPLOY","EDIT_DEPLOY","DEPLOY_STORY","DEPLOY_SUCCESS","DEPLOY_FAIL","DEPLOY_SELECT_TYPE","DEPLOY_NO_SEGMENT","DEPLOY_ADD_FILTER","DEPLOY_ADD_ACTIONABLE_VAR","CREATE_STORY_VERSION","COMPARE_VERSION","FIELD_NAV_INSIGHTS_DESCRIPTIVE","FIELD_NAV_SEARCH","INSIGHTS_OVERVIEW","INSIGHTS_DESCRIPTIVE","INSIGHTS_DESCRIPTIVE_FIELD_VALUE","INSIGHTS_DIAGNOSTIC","INSIGHTS_PREDICTIVE_DIFFERENCE","OPEN_INSIGHTS","OPEN_PREDICTION","OPEN_MODEL","MODEL_OVERVIEW","MODEL_EVALUATION","THRESHOLD_EVALUATION","PREDICTION_EXAMINATION","VALUES_ASSESSMENT","OPEN_PINNED_INSIGHTS","OPEN_CHANGE_OUTCOME","OPEN_VERSION_HISTORY","OPEN_IMPROVEMENTS","CARD_LINK_CLICK","SUMMARY_CARD_CLICK","COEFFICIENTS_REQUERY","FEATURE_IMPORTANCES","DATA_SEGMENTS","EDI_ANALYZE","EDI_CREATE","EDI_REFRESH","EDI_DELETE","EDI_CORRELATION_CLICK","EDI_INSIGHTS","EDI_LOAD_MORE_INSIGHTS","EDI_FILTER_INSIGHTS","EDI_COLUMN_PROFILE_ANALYZE_FURTHER","EDI_COLUMN_PROFILE_CARD_CLICK"])},40454:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t,r){super("SMART_DATA_DISCOVERY_ACTION_RIPPLE",e),this.action=t,this._message=JSON.stringify(r)}getMessage(){return this._message}}},91848:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t,r,i){super("SMART_DATA_DISCOVERY_PERFORMANCE_RIPPLE",e),this.action=t,this.startTime=r,this._message=i}addOptions(e){this._message={...this._message,...e}}getMessage(){return JSON.stringify(this._message)}}},82104:(e,t,r)=>{"use strict";var i=r(43916),s=r(73935),n=r(19247),o=r(28469),a=r(71496),l=r(61506),u=r(18111),d=r.n(u),c=r(32898),h=r(50656),p=r(27994),g=r.n(p),m=r(96486),_=r.n(m),f=r(68923),y=r(93640);class b extends f.Z{constructor({appContext:e,browser:t,windowSize:r,screenSize:i,networkConditions:s,hardwareSpecs:n,openGateNames:o}){super("CONTEXT",e.appInstanceId),this.browser=t,this.windowSize=r,this.screenSize=i,this.networkConditions=s,this.hardwareSpecs=n,this.openGateNames=o,this.appInstanceId=e.appInstanceId,this.appStartTime=e.appStartTime,this.analyticsMode=e.analyticsMode,this.referrer=e.referrer,this.pageContext=e.pageContext,this.embeddedContext=e.embeddedContext,this.staticResourceMode=e.staticResourceMode,this.wasBackgroundedPreRender=e.wasBackgroundedPreRender,this.isInitialRender=e.isInitialRender}get isMobile(){return this.browser.isMobile||this.analyticsMode===y.Z.MOBILE_NATIVE}}var C=r(24585);class E{constructor(e,t){this._appContext=e,this._appConfig=t}build(){return new b({appContext:this._appContext,browser:{name:this._appConfig.getBrowserName(),version:this._appConfig.getBrowserVersion(),isMobile:this._appConfig.isMobileBrowser()},windowSize:{width:window.innerWidth,height:window.innerHeight},screenSize:{width:window.screen.width,height:window.screen.height},networkConditions:{protocol:(0,m.get)(window.performance.getEntriesByType("navigation")[0],"nextHopProtocol"),isUsingCdn:this._appConfig.isCdnEnabled(),roundTripTime:window.navigator.connection?.rtt,downlink:window.navigator.connection?.downlink,effectiveConnectionType:window.navigator.connection?.effectiveType},hardwareSpecs:{deviceMemory:window.navigator.deviceMemory,hardwareConcurrency:window.navigator.hardwareConcurrency},openGateNames:C.Z.getOpenGates()})}}var S=r(9376),T=r(32350),I=r.n(T),v=r(16045),R=r(93404),w=r(44709),A=r(10444),D=r(66351),L=r(39918),M=r(8160),N=r(29946),O=r.n(N),P=r(24293),x=r(93748),Z=r(17636),F=r.n(Z);class k{preTrigger(e,t){return!0}postTrigger(e,t){}flush(e){}}class B{constructor(e){this._initialRipple=e,this._clicks=0,this._hasPerf=!1}trackClick(e){null==this._firstClickTime&&(this._firstClickTime=e.pageRelativeTimestamp),this._lastClickTime=e.pageRelativeTimestamp,this._clicks++}didMount(e){this._didMountTime=e.pageRelativeTimestamp}startRender(e){this._initPerf(),this._startRenderTime=e.pageRelativeTimestamp}finishRender(e){const t=e?e.pageRelativeTimestamp:performance.now();if(null==this._startRenderTime)return!1;const r=t-this._startRenderTime;if(0===this._renderedCount&&(this._initialRenderTime=r),null==this._totalRenderTime||null==this._renderedCount)throw new Error("Expected perf tracking metrics to be initialized.");return this._totalRenderTime+=r,this._renderedCount++,!0}_initPerf(){this._hasPerf||(this._hasPerf=!0,this._renderedCount=0,this._totalRenderTime=0)}finish(e){const t=e?e.pageRelativeTimestamp:performance.now();if(null!=this._didMountTime&&(this._mountedTime=t-this._didMountTime),null!=this._firstClickTime){if(null==this._lastClickTime)throw new Error("Expected last click time to be set.");this._interactionTime=this._lastClickTime-this._firstClickTime}return this._hasPerf&&this.finishRender(e),this}getInitialRipple(){return this._initialRipple}getClicks(){return this._clicks}getMountedTime(){return null!=this._mountedTime?this._mountedTime:-1}getInteractionTime(){return null!=this._interactionTime?this._interactionTime:-1}hasPerf(){return this._hasPerf}getInitialRenderTime(){return this._initialRenderTime}getTotalRenderTime(){return this._totalRenderTime}getRenderedCount(){return this._renderedCount}}var W=r(53524),G=r(67710),U=r(54772),H=r(2265);class V{static extend(e,t){this._FIELDS=new Set([...e._FIELDS||[],...t])}_fieldValues=new Map;constructor(e){this._code=e}getLogLevel(){return H.Z.INFO}getCode(){return this._code}getFields(){return this.constructor._FIELDS||new Set}toString(){return this.getCode()+": "+JSON.stringify(this.toJson().fields)}toCompact(){const e=[this.getCode()];for(const t of this.getFields()){const r=this._fieldValues.get(t);e.push(null!=r?r:null)}return e}toJson(){const e={};return this._fieldValues.forEach(((t,r)=>{e[r]=t})),{logLineCode:this.getCode(),fields:e}}_setField(e,t){return!!this.getFields().has(e)&&(this._fieldValues.set(e,t),!0)}}var j=r(21966);class q extends V{constructor(e,t){super(e),this._setField("sessionId",t??j.Z.getDeprecatedGlobalSessionId())}setTimestamp(e){return this._setField("timestamp",e),this}}q.extend(V,["timestamp","sessionId"]);class z extends q{constructor(e){super("iebcp",e)}setComponent(e){return this.setTimestamp(e.timestamp),this._setField("componentName",e.componentName),this._setField("instanceId",e.instanceId),this._setField("eventType",e.type.getName()),this}setInteractions(e){return this._setField("clicks",e.getClicks()),this._setField("mountedTime",e.getMountedTime()),this._setField("interactionTime",e.getInteractionTime()),e.hasPerf()&&(this._setField("initialRenderTime",e.getInitialRenderTime()),this._setField("totalRenderTime",e.getTotalRenderTime()),this._setField("renderedCount",e.getRenderedCount())),this}}z.extend(q,["componentName","instanceId","eventType","clicks","mountedTime","interactionTime","initialRenderTime","totalRenderTime","renderedCount"]);var $=r(57446);class Q extends k{#bt;constructor(e,t=50){super(),this.#bt=e,this._maxTrackedComponents=t,this._componentsInteractions=new $.Z}postTrigger(e,t){if(e instanceof W.Z)if(e.level===G.Z.Simple||!this._componentsInteractions.has(e.componentId)&&this._componentsInteractions.size>=this._maxTrackedComponents){if(e.type!==U.Z.Mount)return;t.log(new z(this.#bt).setComponent(e))}else{const r=this._componentsInteractions.getOrSet(e.componentId,(()=>new B(e)));switch(e.type){case U.Z.Click:r.trackClick(e);break;case U.Z.Mount:r.didMount(e),t.log(new z(this.#bt).setComponent(e));break;case U.Z.Unmount:t.log(new z(this.#bt).setComponent(e).setInteractions(r.finish(e))),this._componentsInteractions.delete(e.componentId);break;case U.Z.StartRender:e.level===G.Z.FullWithPerf&&r.startRender(e);break;case U.Z.FinishRender:e.level===G.Z.FullWithPerf&&r.finishRender(e)}}}flush(e){for(const t of this._componentsInteractions.values())e.log(new z(this.#bt).setComponent(t.getInitialRipple()).setInteractions(t.finish()));this._componentsInteractions=new $.Z}}var Y=r(87754),K=r(10357);const J="<NO BASE ROUTE>";class X extends q{setRoute(e){return this.setRouteParts(e.baseRoute,e.instanceId,e.tabId),this.setRouteParameters(e.routeParameters),this}setRouteParts(e,t,r){return this._setField("baseRoute",e),this._setField("subRoute",t),this._setField("tabId",r),this}setMissingRoute(){return this.setRouteParts(J,"",J),this}setRouteParameters(e){return this._setField("viewMode",e?.viewMode),this}setHasState(e){return this._setField("hasState",e),this}setTemplateContext(e,t,r){return this._setField("templateSourceId",r||e),this._setField("templateAssetSourceName",t),this}}X.extend(q,["baseRoute","subRoute","viewMode","tabId","hasState","templateSourceId","clonedTemplateOrigin","templateAssetSourceName"]);class ee extends X{constructor(e){super("ieber",e)}setError(e){return this.setTimestamp(e.timestamp),this._setField("message",e.message),this._setField("url",e.url),this._setField("line",e.line),this._setField("column",e.column),this._setField("stack",e.stack),this}setLastInteractions(e){return this._setField("lastInteractions",e),this}}ee.extend(X,["message","url","line","column","stack","lastInteractions"]);var te=r(12470),re=r(57003),ie=r(31436);const se="<NO BASE ROUTE>";class ne extends k{#bt;constructor(e,t=10){super(),this.#bt=e,this._lastN=t,this._ripples=new ie.Z(this._lastN)}postTrigger(e,t){if(e instanceof K.Z)return void this._ripples.push(e);if(e instanceof S.e3)return void(this._currentRoute=e);if(!(e instanceof Y.Z))return;const r=this._ripples.peek(this._lastN).map((e=>e.toString()));l.Z.get(re.Z).reportError(e.message,e.error,r).catch((e=>{console.error(`Failed to report error.\n\n${e.stack}`)})),C.Z.isOpen("einstein.analytics.metric.suppressLoggingErrorForMetrics")||l.Z.get(te.Z).publishMetric(e.error.name).catch((e=>{console.error(`Failed to publish metric.\n\n${e.stack}`)}));const i=new ee(this.#bt).setError(e).setLastInteractions(r.join("; "));null!=this._currentRoute?i.setRoute(this._currentRoute):i.setRouteParts(se,"",se),t.log(i)}}var oe=r(7931),ae=r(72236),le=r(99095);class ue{constructor(e,t){this._data=e,this._query=t}getData(){return this._data}getRecords(){return this._data.records}getTotalRecords(){return this._data.totalSize}getQuery(){return this._query}_getStringValue(e){return null!=e?String(e):""}_castValue(e,t){if(null==t)return t;switch(e.getType()){case"double":case"currency":case"percent":case"int":return t;case"boolean":return Number(t);case"date":case"datetime":return new Date(t).getTime();default:return String(t)}}getRows(e,t){let r;const i=this._query.buildFields(!0);t&&(r=this._query.buildFieldMetadata());const s=[];return this.getRecords().forEach(((t,n)=>{const o=e?[n]:[],a={};i.forEach(((e,i)=>{let s=t;for(const t of e){if(null==s)break;s=s[t]}s=r?this._castValue(r[i],s):this._getStringValue(s),a[Array.isArray(e)?e.join("."):e]=s,o.push(s)})),s.push(o)})),s}}var de=r(74850);class ce extends le.Z{async getRecords(e,t){return new ue(await this._makeQueryRequest(e.build(),t),e)}getRecordsData(e,t){return this._makeQueryRequest(e,t)}async getRecordsRaw(e,t){const r=t?.loggingContext;return r&&r.tags.length>0&&l.Z.get(v.Z).trigger(new de.Z(r.appContext.appInstanceId,r.requestName,r.tags)),(await this._makeQueryRequest(e,t)).records}_makeQueryRequest(e,{loggingContext:t}={}){return this._makeRequest((0,c.appendParams)(this._buildFullPath("query"),{q:e}),{loggingContext:t})}_disableConnectEncoding(e){return!1}}var he=r(57929),pe=r(88652);class ge extends le.Z{getAllSObjects(){return this._makeRequest(this._buildFullPath("sobjects"))}getSObject(e,t){return this._makeRequest(this._buildFullPath(`sobjects/${e}/${t}`))}describeSObject(e){return this._makeRequest(this._buildFullPath(`sobjects/${e}/describe`))}describeSObjectLayout(e,t){return this._makeRequest(this._buildFullPath(`sobjects/${e}/describe/layouts/${t}`))}createSObject(e,t){return this._makeRequest(this._buildFullPath(`sobjects/${e}`),{method:pe.Z.POST,body:JSON.stringify(t)})}updateSObject(e,t,r){return this._makeRequest(this._buildFullPath(`sobjects/${e}/${t}`),{method:pe.Z.PATCH,body:JSON.stringify(r)})}updateSObjectCollection(e,t=!1){return this._makeRequest(this._buildFullPath("composite"),{method:pe.Z.POST,body:JSON.stringify({allOrNone:t,compositeRequest:e})})}_disableConnectEncoding(e){return!1}}class me{constructor(e,t){this._auraInstance=e,this._appConfig=t}async reportError(e,t,r){const i=new Error(t.message);Object.assign(i,{stack:t.stack,handled:!0,additionalData:{gates:this._appConfig.getGates(),lastInteractions:r}}),this._auraInstance.error(e,i)}}var _e=r(97589),fe=r(8644),ye=r(39947),be=r(640);class Ce extends be.Z{}var Ee=r(50482),Se=r(14792);class Te{constructor(e,t){this.code=e,this.json=t}getId(){return this.json?this.json.id:null}isError(){return"ERROR"===this.code}isFavorite(){return!!this.json}}class Ie extends le.Z{async migratePinnedAppToFavorites(e,t){const r=this._generateBatchRequests(e),i=[];r.forEach((e=>{i.push(this._makeRequest(this._buildFullPath("connect/batch"),{method:pe.Z.POST,body:JSON.stringify(e)}))})),await Promise.all(i),this._updateGlobalFavorites(t)}overrideGlobalFavoriteContext(e,t){this._sendFavoriteEvent({action:"contextOverride",favorite:e},t)}async getFavorite(e){return function(e,t){try{if(Array.isArray(t.favorites)&&t.favorites.length)for(const r of t.favorites)if(e===r.target)return new Te("SUCCESS",r);return new Te("SUCCESS",null)}catch(e){return new Te("ERROR",e)}}(e,await this._getFavorites())}async postFavorite(e,t){const r={target:e,targetType:"Record"};return this._makeRequest(this._buildFullPath("ui-api/favorites"),{method:pe.Z.POST,body:JSON.stringify(r)}).then((e=>(this._updateGlobalFavorites(t),e)))}async deleteFavorite(e,t){return this._makeRequest(this._buildFullPath(`ui-api/favorites/${e}`),{method:pe.Z.DELETE}).then((e=>(this._updateGlobalFavorites(t),e)))}async _getFavorites(){return this._makeRequest(this._buildFullPath("ui-api/favorites"))}_updateGlobalFavorites(e){this._sendFavoriteEvent({action:"loadFavorites"},e)}_sendFavoriteEvent(e,t){t?.sendAlohaEventToParent("force:favoriteEvent",e)}_generateBatchRequests(e){const t=[];for(let r=0;r<e.length;r+=25){const i=e.slice(r,r+25),s=this._generateBatchRequest(i);t.push(s)}return t}_generateBatchRequest(e){const t=[];return e.forEach((e=>{t.push({method:"POST",url:"/v47.0/ui-api/favorites",richInput:e})})),{batchRequests:t,haltOnError:!1}}_disableConnectEncoding(e){return!1}}var ve=r(45455),Re=r(97957),we=r(69370);class Ae{constructor(e){this.seenCount=e.seenCount}}class De{constructor(e){this.json=e,this.name=e.name,this.type=e.type,this.metrics=new Ae(e.metrics)}hasBeenSeenOnce(){return this.hasBeenSeen(1)}hasBeenSeen(e){return this.metrics.seenCount>=e}isActive(){return this.json.isActive}}var Le=r(8429),Me=r(79368);r(80276);const Ne="insights";const Oe=new class{startEvent(e){this._walkthroughId=e,this._walkthroughId&&(this.createPlayer().then((()=>l.Z.get(Me.Z).fireEvent("runtime_all_walkthroughs:startEvent",{wtId:this._walkthroughId,wtModule:Ne}))),l.Z.get(Re.Z).seeExperience(this._walkthroughId))}stopEvent(){this._walkthroughId&&l.Z.get(Me.Z).fireEvent("runtime_all_walkthroughs:stopEvent",{wtId:this._walkthroughId,wtModule:Ne})}nextStepEvent(e,t){e&&l.Z.get(Me.Z).fireEvent("runtime_all_walkthroughs:nextStepEvent",{wtId:e,wtModule:Ne,fromStep:t})}async createPlayer(){if(this._createComponentPromise)return this._createComponentPromise;const e=document.getElementById("walkthrough-player");if(null==e)throw new Error("Walkthough container missing.");this._createComponentPromise=await l.Z.get(Me.Z).createComponent("runtime_all_walkthroughs:player",{},e).catch((e=>T.trigger("DEPRECATED:notification:error",Le.Z.getLabel("Walkthrough","errorOnComponentLoad"))))}};var Pe=r(91718),xe=r(52254);class Ze{constructor(e){this.experienceId=e.experienceId,this.completed=e.completed}}class Fe extends Ze{constructor(e){super(e),this.id=e.id}}class ke extends Ze{constructor(e){super(e),this.appViewHash=e.appViewHash}}class Be extends we.Z{constructor(e){super(),this.actionClass=e}static toTileAction(e){return new(this.fromCode(e.type).actionClass)(e.action)}}Be.add("VIDEO","VideoTile",new Be(class extends Ze{constructor(e){super(e),this.title=e.title,this.id=e.id,this.type=e.type,this.playlist=!!e.playlist}})).add("LINK","LinkTile",new Be(class extends Ze{constructor(e){super(e),this.url=e.url}})).add("WALKTHROUGH","WalkthroughTile",new Be(Fe)).add("TRAILHEAD","TrailheadTile",new Be(class extends Ze{constructor(e){super(e),this.url=e.url}})).add("INAPPROUTING","InAppRoutingTile",new Be(ke)).finish();class We{constructor(e,t){this.experienceName=t,this.id=e.id,this.title=e.title,this.subtitle=e.subtitle,this.description=e.description,this.buttonLabel=e.buttonLabel,this.icon=e.iconName,this.type=Be.fromCode(e.type),this.action=Be.toTileAction(e),this.trailheadBadge=e.trailheadBadge}get completed(){return!!this.action.completed}async onClick(){if(Pe.ZP.logTileClick(this.experienceName,xe.Z.TILE_CLICKED,Pe.A1,this.id),this.action instanceof ke){const{experienceId:e,appViewHash:t}=this.action,r=(0,c.appendParams)(window.location.origin+window.location.pathname,{onboardingExperienceId:e});window.open(`${r}${t}`,"_blank")}else if(this.action instanceof Fe){const{id:e}=this.action;Oe.startEvent(e)}else this.action.url&&window.open(this.action.url,"_blank");const e=this.action instanceof ke?this.action.experienceId:this.id;await l.Z.get(Re.Z).seeExperience(e)}}class Ge{constructor(e,t){this.title=e.title,this.subtitle=e.subtitle,this.description=e.description,this.backgroundImageURL=e.backgroundImageURL,this.trailheadBadge=e.trailheadBadge,this.tiles=e.tiles.map((e=>e.tiles?new Ge(e,t):new We(e,t)))}get percentComplete(){if(!this.tiles||!this.tiles.length)return 100;const e=this.tiles.filter((e=>e.completed));return Math.floor(e.length/this.tiles.length*100)}get completed(){return this.tiles.every((e=>e.completed))}}class Ue{constructor(e){this.title=e.title,this.subtitle=e.subtitle}}class He extends De{constructor(e){super(e),this.tile=new We(e.definition,e.definition.id)}}var Ve=r(53164),je=r(69133);class qe extends we.Z{static toExperience(e){return new(this.fromCode(e.type).clazz)(e)}constructor(e){super(),this.clazz=e}}qe.add("TILE_COLLECTION","TileCollection",new qe(class extends De{constructor(e,t){super(e),this.definition=new Ge(e.definition,t||this.name)}})).add("POPOVER","Popover",new qe(class extends De{constructor(e){super(e),this.definition=new Ue(e.definition)}})).add("WALKTHROUGH","Walkthrough",new qe(class extends De{})).add("VIDEO_TILE","VideoTile",new qe(class extends De{constructor(e){super(e),this.video=new Ve.Z(e.definition.action.id,e.definition.title,je.Z.fromCode(e.definition.action.type),e.definition.action.playlist)}})).add("LINK_TILE","LinkTile",new qe(He)).add("TRAILHEAD_TILE","TrailheadTile",new qe(He)).add("WALKTHROUGH_TILE","WalkthroughTile",new qe(He)).finish();class ze extends le.Z{async getExperience(e){return qe.toExperience(await this._makeRequest(this._buildFullPath(`onboarding/experiences/${e}`)))}async seeExperience(e){return qe.toExperience(await this._makeRequest(this._buildFullPath(`onboarding/experiences/${e}/see`),{method:pe.Z.POST,body:JSON.stringify({})}))}}var $e=r(90493);class Qe extends we.Z{static getSessionType(e){return(0,m.startsWith)(e,"1Y3")?Qe.STORY:(0,m.startsWith)(e,"9B4")?Qe.ANALYSIS:(0,m.includes)(e,"0Fb")?Qe.DATASET:null}}Qe.add("DATASET","dataset",new Qe).add("STORY","story",new Qe).add("ANALYSIS","analysis",new Qe).finish();var Ye=r(79646);class Ke extends Ye.Z{}Ke.add("POLL_STORY_START",new Ke).add("POLL_STORY_END",new Ke).add("STORY_LOADED",new Ke);class Je extends q{setDuration(e){return this._setField("duration",e),this}setAction(e){return this._setField("action",e),this}setMessage(e){return this._setField("message",e),this}}Je.extend(q,["action","message","duration"]);class Xe extends Je{constructor(e){super("eduls",e)}setStoryId(e){this._setField("storyId",e)}setAnalysisId(e){this._setField("analysisId",e)}setStatus(e){this._setField("status",e)}setIsLatestVersion(e){this._setField("isLatestVersion",e)}setIsLoading(e){this._setField("isLoading",e)}setPollStartTime(e){this._setField("pollStartTime",e)}setPollTime(e){this._setField("pollTime",e)}setStoryLoadTime(e){this._setField("storyLoadTime",e)}}Xe.extend(Je,["storyId","analysisId","status","isLatestVersion","isLoading","pollStartTime","pollTime","storyLoadTime"]);class et{constructor(e){this._ripple=e}track(e){switch(e.action){case Ke.POLL_STORY_START:this._pollStartTimestamp=e.pageRelativeTimestamp;break;case Ke.POLL_STORY_END:this._pollEndTimestamp=e.pageRelativeTimestamp;break;case Ke.STORY_LOADED:this._storyLoadedTimestamp=e.pageRelativeTimestamp,this._status=e.status,this._isLatestVersion=e.isLatestVersion}}log(e){const t=new Xe(this._ripple.appInstanceId);let r,i;t.setTimestamp(Date.now()),t.setAction("LOAD_STORY_ED"),t.setStoryId(this._ripple.instanceId),t.setAnalysisId(this._ripple.route.split("/")[3]),this._status&&t.setStatus(this._status.code),t.setIsLoading(null==this._storyLoadedTimestamp),null!=this._isLatestVersion&&t.setIsLatestVersion(this._isLatestVersion),this._pollStartTimestamp&&(r=this._pollStartTimestamp-this._ripple.pageRelativeTimestamp,t.setPollStartTime(r)),this._pollStartTimestamp&&this._pollEndTimestamp?t.setPollTime(this._pollEndTimestamp-this._pollStartTimestamp):t.setPollTime(0),this._storyLoadedTimestamp&&(i=this._storyLoadedTimestamp-this._ripple.pageRelativeTimestamp,t.setStoryLoadTime(i)),t.setDuration(r??i??this._getDefaultDuration()),e.log(t)}_getDefaultDuration(){return performance.now()-this._ripple.pageRelativeTimestamp}}class tt extends f.Z{constructor(e,t,r,i,s){super("LoadStoryRipple",e),this.action=r,this.tabId=t,this.status=i,this.isLatestVersion=s}}var rt=r(40454),it=r(91848);class st extends Je{constructor(e,t){super("eduac",e),t&&(this.setTimestamp(t.timestamp),this._setField("action",t.action.getName()),this._setField("message",t.getMessage()))}}var nt=r(46579),ot=r(57587);class at extends k{#bt;_storyLoadTrackers=new Map;_countTrackers=new Set;constructor(e){super(),this.#bt=e}postTrigger(e,t){if(e instanceof rt.Z)t.log(new st(this.#bt,e));else if(e instanceof it.Z)t.log(new st(this.#bt,e).setDuration(Date.now()-e.startTime));else if(e instanceof nt.Z)this._countTrackers.add(e);else if(e instanceof ot.Z){const r=e.getWrappedRipple();t.log(new st(this.#bt,r)),this._countTrackers.delete(e.getWrappedRipple())}else if((e instanceof S.e3||e instanceof S.JE)&&e.baseRoute===$e.STORY&&Qe.getSessionType(e.instanceId)!==Qe.DATASET)if(e instanceof S.JE)this.logAndDelete(e,t);else{this._storyLoadTrackers.get(e.tabId)||this._storyLoadTrackers.set(e.tabId,new et(e))}else e instanceof tt&&(this._storyLoadTrackers.get(e.tabId)?.track(e),e.action===Ke.STORY_LOADED&&this.logAndDelete(e,t))}logAndDelete(e,t){const r=this._storyLoadTrackers.get(e.tabId);r?.log(t),this._storyLoadTrackers.delete(e.tabId)}flush(e){this._storyLoadTrackers.forEach((t=>{t.log(e)})),this._storyLoadTrackers=new Map,this._countTrackers.forEach((t=>{e.log(new st(this.#bt,t))})),this._countTrackers=new Set}}class lt extends le.Z{async getAll(){return(await this._makeRequest(this._getMapPath())).maps.map(ve.F3)}async post(e){const t=await this._makeRequest(this._getMapPath(),{method:pe.Z.POST,body:JSON.stringify((0,ve.Xb)(e))});return(0,ve.F3)(t)}async patch(e){const t=await this._makeRequest(`${this._getMapPath()}/${e.id}`,{method:pe.Z.PATCH,body:JSON.stringify((0,ve.pK)(e))});return(0,ve.F3)(t)}delete(e){return this._makeRequest(`${this._getMapPath()}/${e}`,{method:pe.Z.DELETE})}_getMapPath(){return this._buildFullPath("eclair/maps")}}class ut extends lt{getAll(){return Promise.resolve([])}}class dt{async getFile(e,t){throw new Error("Not implemented.")}async getFilesInBatch(e,t){throw new Error("Not implemented.")}async getContentDocumentId(e,t,r){throw new Error("Not implemented.")}async getContentDocumentIdFromContentVersion(e,t){throw new Error("Not implemented.")}async getFilesLinkedToUser(e){throw new Error("Not implemented.")}async deleteFile(e,t){throw new Error("Not implemented.")}async createContentVersion(e,t,r){throw new Error("Not implemented.")}async getFileLinks(e,t){throw new Error("Not implemented.")}async getImageUrl(e,t,r){throw new Error("Not implemented.")}}class ct{postLogs(e){return h.Z.postPowerInsightsLogs(e)}async publishMetric(e){console.error(e)}}class ht{static registerServices(e,t){const r=e?e.auraApp:null,i=e?e.parentAuraApp:null,s=e?e.sitePrefix:null,n=e?e.isInCommunityContext:null,o=e?e.isOnConsole:null,{timezone:a,lang:d}=window.$A.get("$Locale");fe.configure(a,d);const c=new Ee;l.Z.register(u,c),c.updateConfig({core:{auraApp:r,cmsMode:!0,sldsIconPath:r?"/_slds/icons":"/node_modules/@salesforce-ux/design-system/assets/icons",sitePrefix:s,isOnConsole:o},isInCommunityContext:n});const h=new oe(25);l.Z.register(oe,h);const g=new ce;l.Z.register(ae.Z,g);const m=new ge;let _;l.Z.register(he.Z,m),ye.initialize(r,i),_=new p(e?e.parentOrigin:null,i),l.Z.register(p,_),l.Z.register(ve.ZP,new ut),l.Z.register(Se.Z,new dt),l.Z.register(te.Z,new ct),l.Z.register(re.Z,new me($A,c)),l.Z.register(Ce,new Ie),l.Z.register(Re.Z,new ze);const f=new v.Z;f.addInstanceFilters(t,[new Q(t),new at(t),new ne(t)]),l.Z.register(v.Z,f),l.Z.register(_e,new _e($A,!r))}}var pt=r(67294),gt=r(45697),mt=r.n(gt),_t=r(2931);class ft{#Ct=0;constructor(e){this.appContext=e}getTabIdForLogging(){return"<MISSING>"}getQuerySequenceId(){return 0}makeQueryId(){return this.#Ct++}}var yt=r(57244),bt=r(80012),Ct=r(33854),Et=r(39803),St=r(57234);class Tt extends be.Z{_crossWindowMessages=new Map;constructor(e,t){super(),this._appConfig=e,this._appContext=t}getAppContext(){return this._appContext}start(e=!1){const t=this._onMessage.bind(this),r=()=>{this.sendMessageToParent({action:"beforeunload"})};return window.addEventListener("message",t),window.addEventListener("beforeunload",r),e||this.sendMessageToParent({action:"child-window-ready"}),null!=window.opener&&window.opener.postMessage({action:"opened-window-ready",windowName:window.name},"*"),()=>{window.removeEventListener("message",t),window.removeEventListener("beforeunload",r)}}sendErrorToParent(){return this.sendMessageToParent({action:"error"})}sendMessageToParent(e){if(!this._appContext.chromeMode.isEmbedded)return!1;const t=this._appContext.embeddedContext?.instanceId,r=new URL(this._appConfig.getSanitizedInitialRoute(),window.location.origin).pathname.indexOf("collection")>-1;return(yt.Z.has(yt.Z.ORG_CAN_USE_WAVE_IFRAME_DASHBOARD)||r||this._appContext.analyticsMode===y.Z.ANALYTICS_TAB||this._appContext.pageContext===St.Z.VISUALFORCE||this._appContext.pageContext===St.Z.ALOHA||this._appContext.pageContext===St.Z.LIGHTNING_OUT?window.parent:window).postMessage(t?{...e,embeddedInstanceId:t}:e,"*"),!0}sendLightningEventToParent(e,t){return this.sendMessageToParent({action:"lightning-event",eventName:e,eventParams:t})}sendAlohaEventToParent(e,t){return window.parent!==window&&(window.parent.postMessage(JSON.stringify({event:e,arguments:t}),"*"),!0)}sendMessageToChild(e,t){this._crossWindowMessages.set(e,t)}sendRouterReadyToParent(){return this.sendMessageToParent({action:"router-ready"})}sendReadyToParent(e){return this.sendMessageToParent({...e,action:"ready"})}sendResizeToParent({width:e,height:t}){return this.sendMessageToParent({action:"resize",width:`${e}px`,height:`${t}px`})}validateOrigin(e){return null!=e&&(new Et.Z).validateOrigin(e,(this._appConfig.getCrossOrigins()||[]).concat(window.location.origin))}reportFilterCardMessageHandler(e){"reportFilterCardAction"===e.action&&T.trigger("reports:roleHierarchyChange",e)}_onMessage(e){const{data:t}=e;if(!t||"object"!=typeof t||!this.validateOrigin(e.origin))return;this.reportFilterCardMessageHandler(t);const{action:r,assetType:i,assetId:s,instance:n,initialState:o,replaceState:a,extendedHash:l,savedViewId:u,pageId:d,windowName:c,options:h,embeddedInstanceId:p}=t;if(p===this._appContext.appInstanceId||e.source!==window)if("navigation"===r){const e=new Map;"string"==typeof d&&e.set($e.PAGE_ID_QUERY_PARAM,d),"string"==typeof u&&e.set($e.SAVED_VIEW_ID_QUERY_PARAM,u),T.trigger("DEPRECATED:router:go-to-route",new Ct.Z({baseRoute:"string"==typeof i?i:void 0,instanceId:"string"==typeof s?s:void 0,instance:null!=n?n:void 0,state:null!=o?o:void 0,replaceState:"boolean"==typeof a?a:void 0,extendedHash:"string"==typeof l?l:void 0,queryParams:e,options:h}),{newWindow:!1},this._appContext.appInstanceId)}else if("opened-window-ready"===r&&"string"==typeof c&&null!=e.source){const t=this._crossWindowMessages.get(c);t&&(e.source.postMessage(t,e.origin),this._crossWindowMessages.delete(c))}}}var It=r(84198),vt=r(41172),Rt=r(30820),wt=r(50130),At=r(64587),Dt=r(32574),Lt=r.n(Dt),Mt=r(49720),Nt=r(51141),Ot=r.n(Nt),Pt=r(8666),xt=r.n(Pt),Zt=r(1026),Ft=r(17599),kt=r(31574),Bt=r(35944);class Wt extends pt.Component{static defaultProps={isOpen:!0,isAddBlock:!1,reportTypes:[]};state={error:null,reportTypeSectionList:[],reportTypeList:[],reportTypeListInitialized:!1,reportType:null,searchTerm:"",isSubmitEnabled:!0,isJoinable:!0,infoMessage:"",areDefaultColumnsIncluded:!0,prevReportTypeList:[],prevReportType:null};_selectedReportSectionIndex=0;_prevSelectedReportSectionIndex=0;_allReportTypeList=[];_reportTypeResult=[];_currentReportTypeList=[];_typeElements=[];_sectionElements=[];componentDidMount(){return this._queryReportType()}componentDidUpdate(e){this.props.isAddBlock&&!e.isOpen&&this.props.isOpen&&(this._queryCommonObjects(this.state.reportType),this.setState({areDefaultColumnsIncluded:!0}))}_hasInfoPanel(){return this.state.infoMessage||!this.state.isJoinable}render(){if(this.state.error)return(0,Bt.tZ)(kt.Z,{id:"error-modal",isOpen:!!this.state.error,error:this.state.error,onClose:this._onErrorModalClose});const e=Lt().classSet({"report-type-picker-container":!0,"has-info-panel":this._hasInfoPanel()});return(0,Bt.tZ)(xt(),{id:this.props.id,isOpen:this.props.isOpen,heading:Le.Z.getLabel("reportBuilder","reportTypeTitle"),containerClassName:e,contentClassName:"report-type-picker-content",disableClose:!1,dismissOnClickOutside:!1,onRequestClose:this._onClickCancel,footer:this._getFooter(),children:(0,Bt.BX)("div",{className:"report-type-picker slds-grid",children:[this._renderReportTypeSectionList(),this._renderReportTypeList(),this._renderInfoPanel()]})})}_renderReportTypeSectionList(){const e=[];this.state.reportTypeSectionList.forEach(((t,r)=>{const i=Lt().classSet({"slds-is-active":t.selected});e.push((0,Bt.tZ)("li",{className:i,role:"presentation",children:(0,Bt.tZ)("a",{className:"slds-navigation-list-vertical__action slds-text-link_reset report-section-text",href:"#",onClick:this._handleSectionClick.bind(this,r),role:"option",onKeyDown:this._onKeyDown.bind(this,r,!0),ref:this._getSectionRef.bind(this,r),tabIndex:t.selected?0:-1,"aria-selected":t.selected,children:t.label})},r))}));const t="slds-size_1-of-"+(this._hasInfoPanel()?4:3);return(0,Bt.tZ)("div",{className:`slds-col ${t} report-type-section-list`,children:(0,Bt.tZ)("div",{className:"slds-grid slds-grid_vertical slds-navigation-list_vertical reportType-section-list",children:(0,Bt.tZ)("ul",{role:"listbox",children:e})})})}_handleSectionClick(e,t){t.preventDefault(),t.stopPropagation();const r=parseInt(e),{reportTypeSectionList:i}=this.state;if(r===this._selectedReportSectionIndex)return;i[r].selected=!0,i[this._selectedReportSectionIndex].selected=!1,this._currentReportTypeList=0===r?this._allReportTypeList:this._reportTypeResult[r-1].reportTypes,this._selectedReportSectionIndex=r,this._typeElements=[];const s=this._currentReportTypeList[0].type;return this.setState({reportTypeSectionList:i,reportTypeList:this._currentReportTypeList,reportType:s}),this._queryCommonObjects(s)}_renderReportTypeList(){const e=this._renderSearchInput(),t=this.state.reportTypeListInitialized?this._renderReportTypeListContent():(0,Bt.tZ)("div",{}),r="slds-size_2-of-"+(this._hasInfoPanel()?4:3);return(0,Bt.BX)("div",{className:`slds-col ${r} report-type-list-form`,children:[(0,Bt.tZ)("form",{autoComplete:"off",children:e}),(0,Bt.tZ)("div",{className:"slds-scrollable_y",children:t})]})}_renderReportTypeListContent(){const e=[];return this.state.reportTypeList.forEach(((t,r)=>{const i=t.type===this.state.reportType,s=Lt().classSet({"slds-list__item":!0,"slds-is-selected":i});e.push((0,Bt.tZ)("li",{className:s,role:"presentation",children:(0,Bt.tZ)("a",{className:"slds-text-link_reset report-type-text",href:"#",onClick:this._handleSelectReportType.bind(this,t),role:"option",onKeyDown:this._onKeyDown.bind(this,r,!1),ref:this._getTypeRef.bind(this,r),"aria-selected":i,"aria-describedby":this._getMessageElementId(),children:t.label})},r))})),_().isEmpty(e)?this._renderNoResultMessage():(0,Bt.tZ)("ul",{className:"slds-list_vertical slds-has-dividers slds-has-list-interactions",role:"listbox",children:e})}_renderNoResultMessage(){return(0,Bt.tZ)("div",{className:"no-reportType",children:(0,Bt.tZ)("span",{className:"no-reportType-message",children:Le.Z.getLabel("reportBuilder","noReportTypeMessage",this.state.searchTerm)})})}_handleSelectReportType(e,t){return t.preventDefault(),this.setState({reportType:e.type}),this._queryCommonObjects(e.type)}_renderSearchInput(){const e=!_().isEmpty(this.state.searchTerm),t=Lt().classSet({"slds-button":!0,"slds-button_icon":!0,"slds-input__icon":!0,"slds-input__icon_right":!0,"clear-search-report-type":!0,"slds-hide":!e}),r=(0,Bt.tZ)(It.Z,{onClick:this._onClearSearch,className:t,iconName:"clear",iconCategory:"utility",iconVariant:"bare",variant:"icon",assistiveText:{icon:Le.Z.getLabel("reportBuilder","clear")},onKeyDown:e?this._onSearchKeyDown:void 0,buttonRef:this._getClearButtonRef});return(0,Bt.tZ)(vt.Z,{id:"modal-search-input",placeholder:Le.Z.getLabel("reportBuilder","searchReportType"),assistiveText:{label:Le.Z.getLabel("reportBuilder","searchReportType")},onChange:this._onSearchInputChange,type:"search",className:"report-type-search",iconLeft:(0,Bt.tZ)(Rt.Z,{category:"utility",name:"search"}),iconRight:r,value:this.state.searchTerm,inputRef:this._getSearchRef,onKeyDown:e?void 0:this._onSearchKeyDown,autoComplete:"off"})}_renderInfoPanel(){if(this.props.isAddBlock){let e,t;const r=Lt().classSet({"report-type-info-message":!0,"report-type-error-message":!this.state.isJoinable});if(this.state.isJoinable?this.state.infoMessage&&(e=this.state.infoMessage,t=(0,Bt.tZ)(wt.Z,{category:"utility",name:"info",size:"x-small"})):(e=Le.Z.getLabel("reportBuilder","commonObjectError"),t=(0,Bt.tZ)(wt.Z,{category:"utility",colorVariant:"error",name:"warning",size:"x-small"})),e)return(0,Bt.BX)("div",{className:"slds-col slds-size_1-of-4 report-type-info",children:[t,(0,Bt.tZ)("span",{id:this._getMessageElementId(),className:r,children:e})]})}}_getMessageElementId(){return`${this.props.id||""}_report_type_message`}_getFooter(){return[this._renderIncludeColumnsCheckbox(),this._renderCancel(),this._renderNextButton()]}_renderIncludeColumnsCheckbox(){if(this.props.isAddBlock)return(0,Bt.tZ)(At.Z,{id:this.props.id?`${this.props.id}_defaultColumnsCheckbox`:void 0,className:"report-type-default-columns",labels:{label:Le.Z.getLabel("reportBuilder","includeDefaultColumns")},checked:this.state.areDefaultColumnsIncluded,onChange:(e,{checked:t})=>this._onChangeIncludeColumns(t),onKeyDown:this._onCheckboxKeyDown},"defaultColumns")}_renderCancel(){return(0,Bt.tZ)(It.Z,{className:"report-type-cancel",label:Le.Z.getLabel("reportBuilder","cancel"),onClick:this._onClickCancel,buttonRef:this._getCancelButtonRef,onKeyDown:this._onCancelKeyDown},"cancel")}_renderNextButton(){const e=!this.state.reportType||this.props.isAddBlock&&!this.state.isSubmitEnabled;return(0,Bt.tZ)(It.Z,{className:"report-type-continue",label:Le.Z.getLabel("reportBuilder",this.props.isAddBlock?"addBlock":"next"),variant:"brand",onClick:this._onClickNext,disabled:e},"continue")}_queryReportType(){const e=[{label:Le.Z.getLabel("reportBuilder","all"),selected:!0}],t=[],r=[];return h.Z.loadReportTypes().then((i=>{for(let s=0;s<i.length;s++){const n=i[s];if(n.reportTypes=n.reportTypes.filter((e=>!e.isHidden&&(!this.props.isAddBlock||e.supportsJoinedFormat))),!_().isEmpty(n.reportTypes)){e.push({label:n.label,selected:!1});for(let e=0;e<n.reportTypes.length;e++){const r=n.reportTypes[e];t.push(r)}r.push(n)}}this._reportTypeResult=r,this._currentReportTypeList=t,this._allReportTypeList=t,this._selectedReportSectionIndex=0,this._prevSelectedReportSectionIndex=0;const s=this.props.principalReportType||t[0].type;return this.setState({error:null,reportTypeList:t,reportTypeSectionList:e,reportTypeListInitialized:!0,reportType:s,prevReportTypeList:t,prevReportType:s}),this._queryCommonObjects(s)}),(e=>{this._handleApiError(e)}))}_queryCommonObjects(e){if(this.props.isAddBlock&&this.props.isOpen&&e){const t=this.props.reportTypes;if(!_().isEmpty(t)&&-1===t.indexOf(e))return this.setState({isSubmitEnabled:!1}),h.Z.getCommonObjects(this.props.principalReportType,_().concat(t,e)).then((e=>{const t=!_().isEmpty(e);this.setState({isJoinable:t,infoMessage:t?Le.Z.getLabel("reportBuilder","commonObjectDescription",_().map(e,"name").join(", ")):"",isSubmitEnabled:t})}),(e=>{this._handleApiError(e)}));this.setState({isSubmitEnabled:!0,isJoinable:!0,infoMessage:""})}}_handleApiError(e){const t=e.responseJson&&e.responseJson[0]||e;this.setState({error:t.message}),this.props.onCancel()}_onSearchInputChange=e=>{const t=_().get(e,"target.value");if(this._typeElements=[],_().isEmpty(t))this._onClearSearch();else{const e=this._currentReportTypeList.filter((e=>-1!==e.label.toLowerCase().indexOf(t.toLowerCase())));this.setState({reportTypeList:e,searchTerm:t})}};_onClearSearch=()=>{this.setState({reportTypeList:this._currentReportTypeList,searchTerm:""}),this._searchBox&&this._searchBox.focus()};_onChangeIncludeColumns=e=>{this.setState({areDefaultColumnsIncluded:e})};_onClickCancel=()=>{if(this.props.onCancel(),this.props.isAddBlock){const e=this.state.reportTypeSectionList;e&&(e[this._selectedReportSectionIndex].selected=!1,e[this._prevSelectedReportSectionIndex].selected=!0),this._selectedReportSectionIndex=this._prevSelectedReportSectionIndex,this.setState({reportTypeSectionList:e,reportTypeList:this.state.prevReportTypeList,reportType:this.state.prevReportType}),this._onClearSearch()}else this._navigateToHome()};_onClickNext=()=>{if(this.props.isAddBlock)this.setState({prevReportTypeList:this.state.reportTypeList,prevReportType:this.state.reportType}),this._prevSelectedReportSectionIndex=this._selectedReportSectionIndex,this.props.onSelectReportType(this.state.reportType,this.state.areDefaultColumnsIncluded);else{this.props.onSelectReportType(this.state.reportType);const e=this.state.reportTypeList.find((e=>e.type===this.state.reportType).bind(this));Zt.Z.markEnd(Ft.Z.CREATE_NEW_REPORT.getValue(),{reportType:this.state.reportType,isHistorical:e&&e.isHistorical}),Zt.Z.transactionStart(Ft.Z.SELECT_REPORT_TYPE.getValue())}};_onErrorModalClose=()=>{this.setState({error:null}),this.props.isAddBlock||this._navigateToHome()};_navigateToHome(){if(!this.props.isEmbeddedInTCRM)return l.Z.get(g()).navigateToObjectHome("Report")}_onKeyDown(e,t,r){const i=parseInt(e),s=t?this._sectionElements:this._typeElements;switch(r.keyCode){case Mt.KEY_CODE_DOWN:if(i>=s.length-1)break;Ot().trap(r),s[i+1].focus();break;case Mt.KEY_CODE_UP:if(i<=0)break;Ot().trap(r),s[i-1].focus();break;case Mt.KEY_CODE_TAB:if(t&&r.shiftKey)break;Ot().trap(r),t?this._searchBox.focus():r.shiftKey?_().isEmpty(this.state.searchTerm)?this._searchBox.focus():this._clearButton.focus():this.props.isAddBlock?document.querySelector(".report-type-picker-container .slds-checkbox input").focus():this._cancelButton.focus();break;case Mt.KEY_CODE_SPACE:Ot().trap(r),t?this._handleSectionClick(i,r):this._handleSelectReportType(this.state.reportTypeList[i],r)}}_onCancelKeyDown=e=>{this._shouldTabIntoReportTypes(e)&&e.shiftKey&&!this.props.isAddBlock&&(Ot().trap(e),this._typeElements[0].focus())};_onCheckboxKeyDown=e=>{this._shouldTabIntoReportTypes(e)&&e.shiftKey&&(Ot().trap(e),this._typeElements[0].focus())};_onSearchKeyDown=e=>{this._shouldTabIntoReportTypes(e)&&!e.shiftKey&&(Ot().trap(e),this._typeElements[0].focus())};_shouldTabIntoReportTypes(e){return e.keyCode===Mt.KEY_CODE_TAB&&this._typeElements[0]}_getSectionRef(e,t){this._sectionElements||(this._sectionElements=[]),t&&(this._sectionElements[e]=t)}_getTypeRef(e,t){this._typeElements||(this._typeElements=[]),t&&(this._typeElements[e]=t,"true"===t.getAttribute("aria-selected")&&t.scrollIntoView())}_getSearchRef=e=>{e&&(this._searchBox=e)};_getCancelButtonRef=e=>{e&&(this._cancelButton=e)};_getClearButtonRef=e=>{e&&(this._clearButton=e)}}var Gt=r(45656),Ut=r(2391),Ht=r.n(Ut),Vt=r(90554),jt=r(17237),qt=r(95929),zt=r(67746),$t=r(49842),Qt=r.n($t),Yt=r(67883),Kt=r.n(Yt),Jt=r(1098),Xt=r.n(Jt),er=r(29551),tr=r(91019);class rr extends tr.Z{static UNDO_HEADER_ACTION_ID="undo";static REDO_HEADER_ACTION_ID="redo";constructor(){super("UndoRedoPlugin")}getHeaderActions(){const e=this._sdk.commandInvoker.getUndoCount(),t=this._sdk.commandInvoker.canBeUndone(),r=this._sdk.commandInvoker.isMaxReached();return[new er.Z(rr.UNDO_HEADER_ACTION_ID,Le.Z.getLabel("DashboardAction","undo"),"undo",this._undo.bind(this)).setDisabled(!r&&(0===e||!t)||r&&1===e).setHotkey("z"),new er.Z(rr.REDO_HEADER_ACTION_ID,Le.Z.getLabel("DashboardAction","redo"),"redo",this._redo.bind(this)).setDisabled(0===this._sdk.commandInvoker.getRedoCount()).setHotkey("x")]}_undo(){this._sdk.commandInvoker.undo()}_redo(){this._sdk.commandInvoker.redo()}}var ir=r(27779);class sr extends er.Z{constructor(e,t,r,i,s){super(e,t,r,i),this._onClip=s}render(e,t,r=!1){const i=super.render(e,t,r);return e?(0,Bt.tZ)(ir,{onClip:this._onClip,onBlur:t,children:i}):i}}var nr=r(86866),or=r(40651),ar=r(18869),lr=r(88919);class ur{_isViewDashboardView(e){return e.getViewConfig().baseRoute===$e.DASHBOARD}static async clipToNewDashboard(e){const t={id:"new",type:or.Z.DASHBOARD.getCode(),dateVersion:e.getCode()};ar.setDefaults(t);const r=new Ct.Z({instance:t,extendedHash:lr.Z.EDIT.code});T.trigger("DEPRECATED:router:go-to-route",r),await r.getAfterNavigate()}static switchToFlexBuilder(e,t,r,i){for(const s of e._viewManager?.getOpenViews()||[])if(e._isViewDashboardView(s)){s.getReadyState().then((()=>{e._publishAddStepEvent(t,r,i)}));break}}static hasNoOpenDashboard(e){return!e._viewManager||!e._viewManager.getOpenViews().some((t=>e._isViewDashboardView(t)))}}class dr extends tr.Z{static CLIP_REPORT="clip-report-to-designer";constructor(e){super("ClipReportActionPlugin"),this._viewManager=e}canRegister(e){return yt.Z.has(yt.Z.USER_CAN_EDIT_DASHBOARD)&&!e.getChromeMode().isEmbedded}getInitialState(){return{isToggled:!1}}getHeaderActions(){return[this._getHeaderAction()]}getToggledHeaderActions(){return this._isToggled()?[this._getHeaderAction()]:[]}_getHeaderAction(){return new sr(dr.CLIP_REPORT,Le.Z.getLabel("DashboardAction","clipToDesigner"),"cut",this._toggleState.bind(this),this._clip.bind(this)).setHotkey("l")}areHeaderActionsDisabled(){const e=this._getReportMetadata()?.reportFormat,t=this._sdk.viewConfig.getAnalyticsMode()===y.Z.ANALYTICS_STUDIO,r=null!==this._getReportId(),i=e===Yt.TABULAR.getCode()||e===Yt.SUMMARY.getCode();return!t||!r||!i}_isToggled(){return this._stateDelegate.getState().isToggled}_toggleState(){this._stateDelegate.setState({isToggled:!this._stateDelegate.getState().isToggled})}_getReportMetadata(){return this._getReport().getParameter("reportMetadata").reportMetadata}_getReportId(){return this._getReportMetadata()?.id}_getReport(){return this._sdk.getDashboardMetadata().getLens("defaultReportStep")}async _clip(e){const t=this._sdk.getDashboardMetadata().getDateVersion();ur.hasNoOpenDashboard(this)?(await ur.clipToNewDashboard(t),ur.switchToFlexBuilder(this,e,t,!0)):this._publishAddStepEvent(e,t,!0)}_isViewDashboardView(e){return e.getViewConfig().baseRoute===$e.DASHBOARD}_publishAddStepEvent(e,t,r){const i=this._getReportId(),s={steps:{test:{type:nr.Z.DIRECT_REPORT.code,query:{reportId:i,mode:"details"}}},widgets:{}};T.trigger("dashboard:add-step",s,this._sdk.getDashboardMetadata().getDatasetReferences(),e,{},t,r),T.trigger("DEPRECATED:notification:success",Le.Z.getLabel("InsightsAssetSaveDialog","clippingLabel"),!0)}}var cr=r(12205),hr=r(64933),pr=r(12698),gr=r(44426),mr=r(591),_r=r(21568),fr=r(40811),yr=r(17176);const br=(0,cr.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(474)]).then(r.bind(r,44882))));class Cr extends tr.Z{static HEADER_ACTION_ID="insightsPanelHeaderAction";constructor(e,t,r){super("RecommenderPlugin"),this._initialReportMetadata=e,this._toggleInsightsPanel=t,this._initialReportExtendedMetadata=r,this._rightPanelMode=new _r.Z("insightsRecommender",!0)}getInitialState(){return{reportMetadata:this._initialReportMetadata,invalidReportMsgs:[],reportExtendedMetadata:this._initialReportExtendedMetadata}}setup(){this._sdk.updateRightPanel(fr.Z)}getRuntimeStepId(){return gr.TABLE.getValue()}getRowCount(e,t){if(e.hasRecordCount){const e=t.getResult();if(e instanceof pr.Z){const t=e.getQueryResult();if(!t.hasError())return t.getTotalLabelAndValue(hr.ROW_COUNT).value}}return t.getData().length}onRuntimeMessage(e){if(e instanceof mr.Z){const t=e.getMetadata(),r=t&&t.getReportMetadataWrapper().getReportMetadata(),i=t&&t.getReportMetadataWrapper().getReportExtendedMetadata();if(r&&r.hasDetailRows&&!(0,m.isEqual)(r,this._stateDelegate.getState().reportMetadata)){const s=this.getRowCount(r,e);this._stateDelegate.setState({reportMetadata:r,invalidReportMsgs:this.getInvalidReportMsgs(t,s),reportExtendedMetadata:i})}}}getHeaderActions(){return[this._getHeaderAction()]}getRightPanelRenderable(){if(this._isCurrentRightPanelMode())return(0,Bt.tZ)(br,{reportMetadata:this._stateDelegate.getState().reportMetadata,invalidReportMsgs:this._stateDelegate.getState().invalidReportMsgs,reportExtendedMetadata:this._stateDelegate.getState().reportExtendedMetadata})}getRightPanelModeIds(){return[this._rightPanelMode.id]}_openInsights(){(0,yr.zx)(this._initialReportMetadata.id,!0),this._toggleInsightsPanel(!0),this._sdk.updateRightPanel(this._rightPanelMode),this._sdk.toggleRightPanel(!0)}_closeInsights(){(0,yr.zx)(this._initialReportMetadata.id,!1),this._toggleInsightsPanel(!1),this._sdk.updateRightPanel(fr.Z),this._sdk.toggleRightPanel(!1)}_getHeaderAction(){let e;return e=this._isCurrentRightPanelMode()?new er.Z(Cr.HEADER_ACTION_ID,Le.Z.getLabel("ReportsPage","buttonLabel"),"einstein",this._closeInsights.bind(this)).setShowIconText(!0).setVariant("brand"):new er.Z(Cr.HEADER_ACTION_ID,Le.Z.getLabel("ReportsPage","buttonLabel"),"einstein",this._openInsights.bind(this)).setShowIconText(!0).setVariant("neutral"),e}getInvalidReportMsgs(e,t){const r=[];if(null!=e){const i=l.Z.get(u),s=i.getMinEdiColumns(),n=i.getMaxEdiColumns(),o=i.getMinEdiRows(),a=i.getMaxEdiRows(),d=e.getColumns().length;d<s&&r.push(Le.Z.getLabel("InvalidEdiReport","columnsMin",s-d,s)),d>n&&r.push(Le.Z.getLabel("InvalidEdiReport","columnsMax",d-n,n)),t<o&&r.push(Le.Z.getLabel("InvalidEdiReport","rowsMin",o-t,o)),t>a&&r.push(Le.Z.getLabel("InvalidEdiReport","rowsMax",t-a,a))}return r}}var Er=r(92763),Sr=r(3988),Tr=r(90249),Ir=r(64805);class vr{constructor(e){this._action=e}getAction(e,t,r,i){return this._action.getAction(e,t,r)}}class Rr extends vr{constructor(e,t){super(e),this._shouldShow=t}getAction(e,t,r,i){if(this._shouldShow)return super.getAction(e,t,r,i)}}class wr{constructor(e){this._actionId=e}getAction(e,t,r,i){return i.get(this._actionId)}}var Ar=r(50568),Dr=r(34528),Lr=r(57843),Mr=r.n(Lr);class Nr extends pt.Component{_onRenderActions=()=>{if(this.props.showActionBar){const e=this.props.toggledActions.map((e=>e.getId()));return(0,Bt.tZ)(Ar.Z,{children:(0,Bt.tZ)(Mr(),{mainActions:this.props.actionSet.mainActions,menuActions:this.props.actionSet.menuActions,delegate:this.props.delegate,toggledActionIds:e,hotkeyManager:this.props.hotkeyManager,isEmbedded:this.props.isEmbedded})})}};render(){const e=this.props.delegate.getTag(),t=e?Le.Z.getLabel("reportBuilder","reportTitle",e):Le.Z.getLabel("reportBuilder","joinedReport"),r=Lt().classSet({"report-header":!0,"report-header-with-description":this.props.dashboardDescription});return(0,Bt.tZ)(Dr.ZP,{className:r,onRenderActions:this.props.showActionBar?this._onRenderActions:null,icon:(0,Bt.tZ)(wt.Z,{assistiveText:{label:t},category:"standard",name:"report"}),info:this.props.dashboardDescription,label:t,title:this.props.dashboardLabel,variant:"object-home"})}}var Or=r(26374);class Pr extends Or.Z{getAction(e,t,r){throw new Error("Not implemented")}}var xr=r(96619),Zr=r(83784),Fr=r(16582);class kr extends we.Z{constructor(e){super(),this._action=e}getCode(){return this._action.getId()}getAction(e,t,r){return this._action instanceof Pr?this._action.getAction(e,t,r):this._action}}var Br=r(57999);const{BLOCKS:Wr,DETAILCOLUMNS:Gr}=Zr;class Ur extends kr{static getEnumByAction(e){return this.fromCode(e.getId())}static getDefaultValue(){}static addAction(e,t){return this.add(e,t.getId(),new Ur(t))}}const Hr="LightningReportEditAction",Vr="ReportEditAction",jr="ReportClipAction",qr={toggleChart:{section:"reportBuilder",name:"toggleChart"},addChart:{section:"reportBuilder",name:"addChart"},ReportCopyToClipboardAction:{section:"reportBuilder",name:"copyToClipboard"},ReportSaveAction:{section:"reportBuilder",name:"save"},reportProperties:{section:"DashboardStepPanel",name:"propertiesLabel"},runReport:{section:"reportBuilder",name:"runReportWithoutSave"},[Hr]:{section:"reportBuilder",name:"edit"},[Vr]:{section:"Buttons",name:"reporteditactioninclassic"},ReportCloneAction:{section:"reportBuilder",name:"saveAsButton"},[jr]:{section:"Buttons",name:"reportclipaction"},SaveAndRunReportAction:{section:"reportBuilder",name:"saveAndRunButton"},trendReport:{section:"reportBuilder",name:"trendReport"},viewTrend:{section:"reportBuilder",name:"viewTrend"},viewTrendingDetails:{section:"reportBuilder",name:"viewTrendingDetails"},stopTrending:{section:"reportBuilder",name:"stopTrending"},toggleFilter:{section:"reportBuilder",name:"toggleFilter"},ReportExportAction:{section:"ReportBuilder",name:"export"},refreshReport:{section:"SFXReportHeader",name:"refresh"},inlineEditReport:{section:"reportBuilder",name:"inlineEditReport"},toggleInlineEditClicked:{section:"reportBuilder",name:"toggleInlineEditReport"},toggleChatter:{section:"SFXReportHeader",name:"feed"},searchTable:{section:"reportBuilder",name:"searchButtonTooltip"},ReportOpenInQuipAction:{section:"Buttons",name:"reportopeninquipaction"},ReportDeleteAction:{section:"Buttons",name:"delete"},SelectFolder:{section:"reportBuilder",name:"selectFolder"},PrivateReports:{section:"reportBuilder",name:"privateReports"},PublicReports:{section:"reportBuilder",name:"publicReports"},ReportCloseAction:{section:"Buttons",name:"close"},ReportDrillAction:{section:"reportBuilder",name:"drillDown"},drillWithFilterCount:{section:"reportBuilder",name:"drillWithFilterCount"},ReportScheduleAction:{section:"reportBuilder",name:"subscribe"},MassAddToCampaign:{section:"reportBuilder",name:"reportAddToCampaign"},MassAddToCadence:{section:"reportBuilder",name:"reportAddToCadence"},MassRemoveFromCadence:{section:"reportBuilder",name:"reportRemoveFromCadence"}},zr=function(e,...t){if(m.isEmpty(this._label)||t.length>0){const r=e||this.getId(),i=qr[r];this._label=Le.Z.getLabel(i.section,i.name,...t)}return this._label},$r=function(e){const t=e.getQuery()[Wr.getValue()];if(m.isEmpty(t))return!0;const r=m.uniq(m.map(e.getQuery()[Gr.getValue()],(e=>m.split(e,hr.BLOCK_ID_SEPARATOR)[0])));return t.length>r.length},Qr=function(e){const t=e&&e.peekCommandErrorHistory&&e.peekCommandErrorHistory(),r=e&&e.hasNoResult&&e.hasNoResult();return!!t||r};class Yr extends Or.Z{getLabel(){return zr.apply(this)}}class Kr extends Pr{getAction(e,t,r){return this.setIsMultiBlock(Yt.getEnumByName(this.getReportMetadata(e).reportMetadata.reportFormat)===Yt.MULTI_BLOCK).setIsMatrix(Yt.getEnumByName(this.getReportMetadata(e).reportMetadata.reportFormat)===Yt.MATRIX).setDisabled(this.isDisabled(e,r))}getDefaultStep(e){return e.getLens("defaultReportStep")}getReportMetadata(e){return this.getDefaultStep(e).getParameter("reportMetadata")}setIsMultiBlock(e){return this._isMultiBlock=e,this}isMultiBlock(){return this._isMultiBlock}setIsMatrix(e){return this._isMatrix=e,this}isMatrix(){return this._isMatrix}getDisabled(){return this._isDisabled}getLabel(){const e=this.getLabelKeyOverride();return zr.call(this,e)}getLabelKeyOverride(){}isDisabled(e,t){throw new Error("not implemented")}}class Jr extends Kr{getAction(e,t,r){return this.setDisabled(this.isDisabled(e)),this.setIconPath(`${Fr}#add-chart`)}getAriaPressed(){return Br.Z.hasAppClass(Br.Z.APP_CLASS.CHART_OPEN)}isDisabled(e){const t=new $t(this.getReportMetadata(e)),r=t.getReportTypeMetadata();if(r.isCalculatedInsight()){const e=r.getAvailableCIDimensionNames(),i=r.getAvailableCIMeasures("AGGREGATABLE");if(e.length>2&&(0===i.length||!t.getDetailColumns().some((e=>i.includes(e)))))return!0}const i=this.getDefaultStep(e).getQuery();return 0===i.groupingDownColumns.length||0===i.measureColumns.length}}class Xr extends Kr{isDisabled(e){return!1}}class ei extends Kr{setMultiBlockDisabled(e){return this._isMultiBlockDisabled=e,this}setMatrixDisabled(e){return this._isMatrixDisabled=e,this}isDisabled(e,t){const r=this.getId(),i=this.getDefaultStep(e),s=this.isMultiBlock()&&this._isMultiBlockDisabled||this.isMatrix()&&this._isMatrixDisabled||!i.getParameter("reportActions").includes(r);if(!s&&(r===Hr||r===Vr)){const e=t&&t.peekCommandErrorHistory?t.peekCommandErrorHistory():void 0;return!!e&&e.shouldRedirectToRunPage()}return s}}class ti extends ei{isDisabled(e,t){let r=super.isDisabled(e);return this.isMultiBlock()&&(r=r||$r(this.getDefaultStep(e))),r}}class ri extends Kr{isDisabled(e,t){return this.isMultiBlock()&&$r(this.getDefaultStep(e))}}class ii extends Kr{getAction(e,t,r){return this.setIconPath(`${Fr}#analytics-new`),this.setDisabled(this.isDisabled())}isDisabled(){return!N.trendConfig||N.trendConfig.trendDisabled}}const si=new Yr("viewTrendingDetails"),ni=new Yr("stopTrending");class oi extends xr.Z{constructor(e){super(e),this.addAction(si),this.addAction(ni)}getLabel(){return zr.apply(this)}}Ur.addAction("TOGGLE_CHART",new Jr("toggleChart",void 0,"chart","icon",!0)).addAction("ADD_CHART",new Jr("addChart",void 0,"chart","neutral").setShowIconText(!0)).addAction("SAVE_REPORT",new ti("ReportSaveAction")).addAction("EDIT_REPORT",new ei(Hr)).addAction("EDIT_REPORT_IN_CLASSIC",new ei(Vr)).addAction("COPY_TO_CLIPBOARD",new class extends Kr{isDisabled(e,t){return Qr(t)}}("ReportCopyToClipboardAction")).addAction("EXPORT",new class extends ei{isDisabled(e,t){const r=this.getReportMetadata(e);return this.isMultiBlock()&&!r.reportMetadata.id}}("ReportExportAction")).addAction("SAVE_AS",new ti("ReportCloneAction")).addAction("ADD_TO_DASHBOARD",new class extends ei{isDisabled(e,t){const r=this.getReportMetadata(e);return this.isMultiBlock()&&r&&m.isEmpty(r.reportMetadata.chart)}}("ReportClipAction")).addAction("ADD_TO_CAMPAIGN",new ei("MassAddToCampaign").setMultiBlockDisabled(!0)).addAction("ADD_TO_CADENCE",new ei("MassAddToCadence").setMultiBlockDisabled(!0).setMatrixDisabled(!0)).addAction("REMOVE_FROM_CADENCE",new ei("MassRemoveFromCadence").setMultiBlockDisabled(!0).setMatrixDisabled(!0)).addAction("SUBSCRIBE",new ei("ReportScheduleAction").setMultiBlockDisabled(!0)).addAction("QUIP",new ei("ReportOpenInQuipAction").setMultiBlockDisabled(!0)).addAction("PROPERTIES",new ri("reportProperties")).addAction("RUN_REPORT",new ri("runReport",void 0,void 0,"brand")).addAction("SAVE_AND_RUN_REPORT",new ri("SaveAndRunReportAction")).addAction("TOGGLE_FILTER",new class extends Kr{getAriaPressed(){return Br.Z.hasAppClass(Br.Z.APP_CLASS.FILTER_OPEN)}isDisabled(e){return!1}}("toggleFilter",void 0,"filterList","icon",!0)).addAction("REFRESH",new class extends Kr{isDisabled(e){return!1}}("refreshReport",void 0,"refresh","icon")).addAction("INLINE_EDIT",new Xr("inlineEditReport",void 0,"edit","neutral",!1).setShowIconText(!0)).addAction("TOGGLE_INLINE_EDIT",new Xr("toggleInlineEditClicked",void 0,"check","brand",!1).setShowIconText(!0)).addAction("DELETE",new ei("ReportDeleteAction")).addAction("CLOSE",new Yr("ReportCloseAction")).addAction("DRILL",new class extends Pr{getAction(e,t,r){return this._drillFilters=e.getLens("defaultReportStep").getParameter("query").drillFilters,this.setIconPath(`${Fr}#data-view`).setDisabled(!1)}getLabel(){let e;return this._drillFilters&&(e=this._drillFilters.length),e?zr.apply(this,["drillWithFilterCount",e>100?"*":e]):zr.apply(this)}}("ReportDrillAction").setShowIconText(!0)).addAction("CHATTER",new class extends Kr{getAriaPressed(){return Br.Z.hasAppClass(Br.Z.APP_CLASS.CHATTER_OPEN)}isDisabled(e){return!1}}("toggleChatter",void 0,"comments","icon",!0)).addAction("SEARCH_TABLE",new class extends Kr{isDisabled(e,t){return Qr(t)}}("searchTable",void 0,"search","icon")).addAction("TREND_REPORT",new ii("trendReport").setShowIconText(!0)).addAction("VIEW_TREND",new ii("viewTrend").setShowIconText(!0)).addAction("VIEW_TREND_SUB_MENU",new oi("viewTrendDropdown")).addAction("VIEW_TRENDING_DETAILS",si).addAction("STOP_TRENDING",ni).finish();var ai=r(70351),li=r(57950),ui=r(27327),di=r(34533),ci=r(76126),hi=r(74978),pi=r(84499),gi=r(70917),mi=r(97761);const _i=(0,gi.iv)("margin-right:0;.select-folder{font-size:",mi.fontSize2,";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}",""),fi=new RegExp("^_+|_+$","g"),yi=new RegExp("[_]{2,}","g"),bi=new RegExp("[^a-zA-Z0-9_]+","g"),Ci=new RegExp("[ _]+","g"),Ei=new RegExp("^[_0-9]|_$|[^a-zA-Z0-9_]|_{2,}","i");class Si extends pt.Component{static defaultProps={folderType:pi.Z.REPORTS};static contextTypes={appContext:mt().instanceOf(P.Z).isRequired};state={reportName:"",reportUniqueName:this.props.reportUniqueName,reportDescription:this.props.reportDescription,selectedItem:{id:this.props.reportFolderId,label:""},folderNameErrorMessage:void 0,reportNameError:null,reportUniqueNameError:null,disableSave:!1};constructor(e){super(e),this._selectFolderButtonRef=null}UNSAFE_componentWillMount(){const e=this._getInitialReportName();this.props.isSaveAs?this.setState({reportName:e,reportUniqueName:""}):this.setState({reportName:e})}componentDidMount(){if((0,m.get)(this.state,"selectedItem.id")){const e=this.state.selectedItem.id.slice(0,3);"00D"===e?this.setState({selectedItem:{id:this.state.selectedItem.id,label:Le.Z.getLabel("reportBuilder","publicReports")}}):"005"===e?this.setState({selectedItem:{id:this.state.selectedItem.id,label:Le.Z.getLabel("reportBuilder","privateReports")}}):h.Z.describeFolder(this.state.selectedItem.id).then((e=>{this.setState({selectedItem:e})}),(e=>{}))}this._returnFocusTo=document.activeElement}_launchFolderDialog=()=>{const e=this.props.isCreate||this.props.isSaveAs;h.Z.selectFolder((0,m.get)(this.state,"selectedItem.id"),this.state.reportName,e,void 0,this.context.appContext.analyticsMode===y.Z.ANALYTICS_STUDIO,this.props.folderType?.code).then((e=>{(0,m.get)(e,"id")&&this.onSelectFolder(e)}),this._onError).finally((()=>{setTimeout((()=>this._focusOnSelectFolderButton()),500)}))};onSelectFolder(e){this.setState({selectedItem:e},(()=>{this._validateFolder()}))}_focusOnSelectFolderButton(){this._selectFolderButtonRef&&this._selectFolderButtonRef.focus()}_onCancel=()=>{this.props.onCancel(),this._returnFocusTo.focus()};_onSave=()=>{this.setState({disableSave:!0}),this.props.onSave((0,hi.trimEnd)(this.state.reportName),(0,hi.trimEnd)(this.state.reportUniqueName),this.state.reportDescription,this.state.selectedItem.id,this.props.isSaveAs,this._onError)};_onError=e=>{this.setState({disableSave:!1}),e&&this.setState({reportUniqueNameError:e.responseJson&&e.responseJson[0]?e.responseJson[0].message:e.message})};_onReportNameChange=e=>{this.setState({reportName:e.target.value,reportNameError:null})};_onReportDevNameChange=e=>{this.setState({reportUniqueName:e.target.value,reportUniqueNameError:""})};_onReportDescriptionChange=e=>{this.setState({reportDescription:e.target.value})};_validateFolder(){let e;e=(0,m.get)(this.state,"selectedItem.id")?void 0:(0,m.get)(this.state,"selectedItem.label.length")?Le.Z.getLabel("reportBuilder","saveModalSelectFolder"):Le.Z.getLabel("reportBuilder","saveModalFolderRequired"),this.setState({folderNameErrorMessage:e})}_getValidDevName(e){return`${this._getDevNamePrefix(e)}_${this._randomAlphanumeric(3)}`}_getDevNamePrefix(e){let t=e.replace(Ci,"_").replace(bi,"").replace(fi,"").replace(yi,"_");""===t&&(t="new_report");const r=t.charAt(0);return r>="0"&&r<="9"?"X"+t:t}_randomAlphanumeric(e){let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let i=0;for(;i<e;)t+=r.charAt(Math.floor(62*Math.random())),i++;return t}_isValidDevName(){return!Ei.test(this.state.reportUniqueName)&&!(0,m.isEmpty)(this.state.reportUniqueName)}_isEmptyReportName(e){return(0,m.isEmpty)((0,hi.trim)(e))}_isReportNameTooLong(e){return e.length>40}_validateAndSetDevName=()=>{if(this.state.reportNameError)return;let e=null;(0,m.isEmpty)(this.state.reportUniqueName)?this.setState({reportUniqueName:this._getValidDevName(this.state.reportName)}):this._isValidDevName()||(e=Le.Z.getLabel("Global_Entity","InvalidDeveloperNameOnEntity","Report Unique Name")),this.setState({reportUniqueNameError:e})};_validateReportName=()=>{let e=null;this._isEmptyReportName(this.state.reportName)?e=Le.Z.getLabel("AnalyticsAPIValidation","nullReportName"):this._isReportNameTooLong(this.state.reportName)&&(e=Le.Z.getLabel("AnalyticsAPIValidation","reportNameTooLong",40)),e||this._validateAndSetDevName(),this.setState({reportNameError:e})};_getInitialFocus(e){setTimeout((()=>{e&&(e.focus(),e.select())}),0)}_renderReportNameError(){if(this.state.reportNameError)return this._renderErrorText(this.state.reportNameError)}_renderDevNameError(){if(this.state.reportUniqueNameError)return this._renderErrorText(this.state.reportUniqueNameError)}_renderErrorText(e){return(0,Bt.tZ)("span",{className:"error-text",children:e})}_getInitialReportName(){let e=this.props.isSaveAs?Le.Z.getLabel("LightningDashboard","copyOfDashboard",this.props.reportName):this.props.reportName;return this._isReportNameTooLong(e)&&(e=(0,m.truncate)(e,{length:40,omission:""})),(0,hi.trimEnd)(e)}_getFooter(){const e=(0,Bt.tZ)(It.Z,{className:"report-cancel",label:Le.Z.getLabel("reportBuilder","cancel"),onClick:this._onCancel},"cancel"),t=this.state.disableSave||!(0,m.isEmpty)(this.state.reportUniqueNameError)||(0,m.isEmpty)((0,hi.trim)(this.state.reportName))||this.state.folderNameErrorMessage;return[e,(0,Bt.tZ)(It.Z,{className:"report-save",label:Le.Z.getLabel("reportBuilder","save"),variant:"brand",onClick:this._onSave,disabled:t},"save")]}_setSelectFolderButtonRef(e){e&&(this._selectFolderButtonRef=e)}_getFolderInput(){return(0,Bt.BX)("div",{children:[(0,Bt.BX)("div",{className:"slds-form-element folderInput",children:[(0,Bt.tZ)("label",{className:"slds-form-element__label",title:Le.Z.getLabel("reportBuilder","folder"),htmlFor:"folderInput",children:Le.Z.getLabel("reportBuilder","folder")}),(0,Bt.BX)("div",{className:"slds-form-element slds-input-has-fixed-addon",children:[(0,Bt.tZ)("span",{id:"folderInput",className:"slds-input",title:Le.Z.getLabel("reportBuilder","folder"),children:this.state.selectedItem&&this.state.selectedItem.label||""}),(0,Bt.tZ)("span",{className:"slds-form-element__addon",css:[_i,"",""],children:(0,Bt.tZ)(It.Z,{name:"edit",className:"slds-button slds-button_neutral select-folder",title:Le.Z.getLabel("reportBuilder","selectFolder"),onClick:this._launchFolderDialog,label:Le.Z.getLabel("reportBuilder","selectFolder"),assistiveText:{icon:Le.Z.getLabel("reportBuilder","selectFolder")},buttonRef:this._setSelectFolderButtonRef.bind(this)})})]})]}),this.state.folderNameErrorMessage?(0,Bt.tZ)("div",{id:"folderNameError",className:"errorMessage",children:this.state.folderNameErrorMessage}):null]})}render(){const e=this._getFolderInput();return(0,Bt.tZ)(xt(),{isOpen:this.props.isOpen,heading:this.props.title,size:"medium",footer:this._getFooter(),disableClose:!1,dismissOnClickOutside:!1,onRequestClose:this._onCancel,children:(0,Bt.BX)("section",{className:"slds-p-around_large",children:[(0,Bt.tZ)("abbr",{className:"slds-required",title:"required",children:"*"}),(0,Bt.tZ)("label",{className:"slds-form-element__label",htmlFor:"reportName",variant:"static",children:Le.Z.getLabel("reportBuilder","reportNameField")}),(0,Bt.tZ)(vt.Z,{id:"reportName",className:"slds-m-bottom_large",onChange:this._onReportNameChange,onBlur:this._validateReportName,value:this.state.reportName,assistiveText:{label:Le.Z.getLabel("reportBuilder","reportNameAria")},"aria-describedby":"reportName-error",errorText:this._renderReportNameError(),required:!0,"aria-required":!0,maxLength:"40",inputRef:this._getInitialFocus}),(0,Bt.tZ)("div",{className:"slds-form-element__control slds-m-bottom_large",children:(0,Bt.tZ)(vt.Z,{id:"reportUniqueName",label:Le.Z.getLabel("ReportBuilder","reportDeveloperName"),onChange:this._onReportDevNameChange,onBlur:this._validateAndSetDevName,value:this.state.reportUniqueName||"",errorText:this._renderDevNameError(),maxLength:"80",fieldLevelHelpTooltip:(0,Bt.tZ)(ci.Z,{align:"top",content:Le.Z.getLabel("reportBuilder","reportUniqueNameInfo"),assistiveText:{triggerLearnMoreIcon:Le.Z.getLabel("reportBuilder","reportUniqueNameInfo")}}),"aria-describedby":"reportUniqueName-error"})}),(0,Bt.BX)("div",{className:"slds-form-element slds-m-bottom_large",children:[(0,Bt.tZ)("label",{className:"slds-form-element__label",htmlFor:"reportDescription",children:Le.Z.getLabel("reportBuilder","reportDescriptionField")}),(0,Bt.tZ)("div",{className:"slds-form-element__control",children:(0,Bt.tZ)("textarea",{id:"reportDescription",className:"slds-textarea",onChange:this._onReportDescriptionChange,maxLength:"255",value:this.state.reportDescription||""})})]}),e]})})}}var Ti=r(21922),Ii=r(62816),vi=r(48457),Ri=r(80023),wi=r(34271),Ai=r(99522),Di=r(51548),Li=r(3005),Mi=r(14201),Ni=r(82957);const{GROUPINGDOWN:Oi,FILTER:Pi,DRILL_FILTERS:xi,BOOLEANFILTER:Zi,DETAILCOLUMNS:Fi,MEASURES:ki,SORTBY:Bi}=Zr;class Wi extends Ni.Z{constructor(e,t,r,i,s,n,o){super(),this._drillFilters=e,this._filters=t,this._groupingDownColumns=r,this._detailColumns=i,this._aggregates=s,this._sortBy=n,this._reportBooleanFilter=o,this._cacheService=l.Z.get(oe)}mutate(e){return this._mutate(e.dashboardJson,new Di.Z(e.dashboardJson))}_mutate(e,t){const r=t.getLens("defaultReportStep").getQuery(),i=r[Oi.getValue()],s=r[Fi.getValue()],n=r[Pi.getValue()],o=r[xi.getValue()],a=r[Zi.getValue()],u=r[ki.getValue()],d=r[Bi.getValue()],c=t.getLensesJson();for(const e in c)if(Object.prototype.hasOwnProperty.call(c,e)){const r=c[e];if(null!=this._groupingDownColumns&&(r.query[Oi.getValue()]=this._groupingDownColumns,i&&this._handleDeleteGroupingsAfterMeasureUpdate(t.getLens(e),i,t,Ii)),this._detailColumns&&(r.query[Fi.getValue()]=this._detailColumns),this._aggregates&&(r.query[ki.getValue()]=this._aggregates),this._sortBy&&(r.query[Bi.getValue()]=this._sortBy),null!=this._filters&&(r.query[Pi.getValue()]=this._filters),this._drillFilters&&(r.query[xi.getValue()]=this._drillFilters),this._reportBooleanFilter){r.query[Zi.getValue()]=this._reportBooleanFilter;const e=r.query[Pi.getValue()].filter((function(e){return"CUSTOM"===e.type})).length,t=new Mi.ZP;t.validate(this._reportBooleanFilter,e),l.Z.get(oe).setBooleanFilter(t)}}return new Wi(o,n,i,s,u,d,a)}}Ai.mix(Wi,[Li]);const Gi=Wi;var Ui=r(58100),Hi=r(42653),Vi=r(53227),ji=r(8504);class qi extends pt.Component{_returnFocusTo=null;constructor(e){super(e);const t=ji.Z.getOuterMostGrouping(this.props.reportMetadata),r=ji.Z.getColumnFromGroupingId(t?t.name:null,this.props.reportTypeMetadata);this.state={columnSearchValue:"",columnSelectedValue:t&&r?[{id:t.name,label:r.label,type:0}]:[]}}componentDidMount(){this._returnFocusTo=document.activeElement}_onCancel=()=>{this.props.onCancel(),this._returnFocusTo&&this._returnFocusTo.focus()};_applyDrill=()=>{let e;if(this.state.columnSelectedValue){const t=this.state.columnSelectedValue[0];t&&(e=t.id)}this.props.onDrill(e,this.props.drillFilters),this._returnFocusTo&&this._returnFocusTo.focus()};_comboBoxChange=(e,t)=>{this.setState({columnSearchValue:t.value})};_comboBoxSelect=(e,t)=>{this.setState({columnSearchValue:"",columnSelectedValue:t.selection})};_comboBoxKeyDown=e=>{this.state.columnSelectedValue&&this.state.columnSelectedValue.length&&e.keyCode===Mt.KEY_CODE_BACKSPACE&&(e.stopPropagation(),e.preventDefault())};_prepareComboBoxOptions(){const e={},t={},r=[],i=[{id:0,label:Le.Z.getLabel("reportBuilder","drillExistingColumns"),type:"separator"}];this.props.reportMetadata.detailColumns.forEach((t=>e[t]=!0));const{groupingsDown:s}=this.props.reportMetadata,{groupingsAcross:n}=this.props.reportMetadata,o=!!s.length,a=!!n.length;s.forEach(((r,i)=>{e[r.name]=!1,t[r.name]=!(0===i&&!a)})),n.forEach(((r,i)=>{e[r.name]=!1,t[r.name]=0!==i||!o}));const l=new di.Z(this.props.reportTypeMetadata);return l.isCalculatedInsight()&&l.getAvailableCIMeasures().forEach((e=>t[e]=!0)),this.props.reportTypeMetadata.categories.forEach(((s,n)=>{i.push({id:n+1,label:s.label,type:"separator"}),Object.keys(s.columns).filter((e=>!t[e])).forEach((t=>r.push({id:t,label:s.columns[t].label,type:e[t]?0:n})))})),(0,Ui.Z)({subheadings:i,filteredOptions:(0,Hi.Z)({inputValue:this.state.columnSearchValue,options:r,selection:this.state.columnSelectedValue,limit:1/0})})}_prepareDrillFilterSummary(){if("html"===ji.Z.getOuterMostGroupingColumn(this.props.reportMetadata,this.props.reportTypeMetadata).dataType){const e=this.props.drillFilters.slice(0,5).map((function(e,t){const r=e.value.split(/_IM._/),i=r&&r[1],s=r&&r[2];return i?(0,Bt.tZ)("img",{src:i,label:s,style:{maxWidth:48,maxHeight:48}},t):(0,Bt.tZ)("span",{children:e.label},t)}));return 6===this.props.drillFilters.length?e.push((0,Bt.tZ)("span",{children:Le.Z.getLabel("reportBuilder","drillFilterOneOther")},6)):this.props.drillFilters.length>5&&e.push((0,Bt.tZ)("span",{children:Le.Z.getLabel("reportBuilder","drillFilterOthers",this.props.drillFilters.length-5)},6)),e}const e=Le.Z.getLabel("reportBuilder","drillFilterDelimiter")||", ";let t=this.props.drillFilters.slice(0,5).map((e=>e.parsedLabel||e)).join(e);return 6===this.props.drillFilters.length?t+=e+Le.Z.getLabel("reportBuilder","drillFilterOneOther"):this.props.drillFilters.length>5&&(t+=e+Le.Z.getLabel("reportBuilder","drillFilterOthers",this.props.drillFilters.length-5)),t}_renderDrillFilters(){if(!this.props.drillFilters||0===this.props.drillFilters.length)return null;const e=ji.Z.getOuterMostGroupingColumn(this.props.reportMetadata,this.props.reportTypeMetadata),t=e?e.label:"",r=this._prepareDrillFilterSummary();return(0,Bt.BX)("section",{className:"slds-m-bottom_large",children:[(0,Bt.tZ)("div",{className:"slds-form-element__label",children:Le.Z.getLabel("reportBuilder","drillFilterByField",t)}),(0,Bt.tZ)("div",{className:"slds-text-body_regular",children:r})]})}_renderGroupingSelector(e,t){return(0,Bt.tZ)("section",{onKeyDown:this._comboBoxKeyDown,role:"presentation",children:(0,Bt.tZ)(Vi.Z,{labels:{label:Le.Z.getLabel("reportBuilder","drillGroupBy")},events:t,options:e,selection:this.state.columnSelectedValue,value:this.state.columnSearchValue,variant:"inline-listbox",menuPosition:"overflowBoundaryElement",classNameMenu:"report-combobox-listbox"})})}_renderFooter(){const e=ji.Z.getOuterMostGrouping(this.props.reportMetadata);let t;if(this.state.columnSelectedValue){const e=this.state.columnSelectedValue;e[0]&&(t=e[0].id)}const r=t&&e&&e.name!==t,i=!t&&e&&e.name,s=r||i||this.props.drillFilters&&this.props.drillFilters.length>0;return[(0,Bt.tZ)(It.Z,{label:Le.Z.getLabel("reportBuilder","cancel"),onClick:this.props.onCancel},"close"),(0,Bt.tZ)(It.Z,{variant:"brand",label:Le.Z.getLabel("reportBuilder","apply"),onClick:this._applyDrill,disabled:!s},"apply")]}render(){const e=this._prepareComboBoxOptions(),t={onChange:this._comboBoxChange,onSelect:this._comboBoxSelect,onRequestRemoveSelectedOption:this._comboBoxSelect},r=this._renderGroupingSelector(e,t),i=this._renderDrillFilters(),s=this._renderFooter();return(0,Bt.tZ)(xt(),{isOpen:this.props.isOpen,heading:Le.Z.getLabel("reportBuilder","drillDown"),size:"medium",disableClose:!1,dismissOnClickOutside:!1,onRequestClose:this._onCancel,footer:s,children:(0,Bt.BX)("section",{className:"slds-p-around_large",children:[i,r]})})}}var zi=r(63687),$i=r(14488);class Qi extends pt.PureComponent{render(){return(0,Bt.tZ)(xt(),{containerClassName:"close-modal",disableClose:!1,dismissOnClickOutside:!1,footer:this._getFooter(),isOpen:this.props.isOpen,onRequestClose:this._onCancel,size:"medium",heading:Le.Z.getLabel("reportBuilder","closeModalTitle"),children:(0,Bt.BX)("div",{className:"content",children:[(0,Bt.tZ)("div",{children:Le.Z.getLabel("reportBuilder","closeModalWarningMessage")}),(0,Bt.tZ)("div",{children:Le.Z.getLabel("reportBuilder","closeModalActionMessage")})]})})}_getFooter(){return[(0,Bt.tZ)(It.Z,{className:"report-cancel",label:Le.Z.getLabel("reportBuilder","cancel"),onClick:this._onCancel},"cancel"),(0,Bt.tZ)(It.Z,{className:"report-discard",label:Le.Z.getLabel("reportBuilder","discard"),onClick:this._onDiscard},"discard"),(0,Bt.tZ)(It.Z,{className:"report-save-and-close",label:Le.Z.getLabel("reportBuilder","saveAndClose"),onClick:this._onSave,variant:"brand"},"save")]}_onCancel=()=>{this.props.onCancel()};_onDiscard=()=>{this.props.onDiscard()};_onSave=()=>{this.props.reportId?this.props.onSave():this.props.onSaveAs()}}var Yi=r(85887),Ki=r(22877);class Ji extends vi.Z{constructor({executeMutators:e,showModal:t,closeModal:r,getMetadata:i,getRuntimeLens:s,isEditMode:n,isEmbeddedInTCRMStudio:o,isEmbeddedInCRM:a,viewManager:l,closeViewInCRMA:u}){super({isEditMode:n}),this._executeMutators=e,this._showModal=t,this._closeModal=r,this._getMetadata=i,this._getRuntimeLens=s,this._isEmbeddedInTCRMStudio=o,this._isEmbeddedInCRM=a,this._viewManager=l,this._closeViewInCRMA=u}_onCustomAction(e){switch(Ur.getEnumByAction(e)){case Ur.SAVE_REPORT:this._saveReport();break;case Ur.PROPERTIES:this._saveReport({forceShowSaveModal:!0});break;case Ur.RUN_REPORT:this._navigateToReportRun(!0);break;case Ur.ADD_CHART:case Ur.TOGGLE_CHART:this._toggleChartVisibility();break;case Ur.TOGGLE_FILTER:this._toggleFilter();break;case Ur.SAVE_AS:this._saveAs({shouldRunReportAfterSave:this._getReportMode()===Z.VIEW});break;case Ur.EDIT_REPORT:this._editReport();break;case Ur.EDIT_REPORT_IN_CLASSIC:this._editClassicReport();break;case Ur.SAVE_AND_RUN_REPORT:this._saveReport({shouldRunReportAfterSave:!0});break;case Ur.TREND_REPORT:this._trendReport();break;case Ur.VIEW_TREND:this._viewTrend();break;case Ur.VIEW_TRENDING_DETAILS:this._viewTrendingDetails();break;case Ur.STOP_TRENDING:this._stopTrending();break;case Ur.EXPORT:this._exportReport();break;case Ur.REFRESH:this._refreshReport();break;case Ur.INLINE_EDIT:this._inlineEditReport();break;case Ur.TOGGLE_INLINE_EDIT:break;case Ur.CHATTER:this._toggleChatter();break;case Ur.DELETE:this._deleteReport();break;case Ur.QUIP:this._openInQuip();break;case Ur.CLOSE:this._closeReport();break;case Ur.ADD_TO_DASHBOARD:this._addToDashboard();break;case Ur.ADD_TO_CAMPAIGN:this._addToCampaign();break;case Ur.ADD_TO_CADENCE:this._addToCadence();break;case Ur.REMOVE_FROM_CADENCE:this._removeFromCadence();break;case Ur.SUBSCRIBE:this._subscribeToReport();break;case Ur.DRILL:this._openDrillDialog();break;case Ur.SEARCH_TABLE:this._toggleSearch();break;case Ur.COPY_TO_CLIPBOARD:this._copyToClipboard();break;default:N.reportConfig&&!0===N.reportConfig.isPreviewAutoRefresh?(l.Z.get(p).showSpinner(!0),setTimeout((()=>{super._onCustomAction(e,!1)}),100)):super._onCustomAction(e,!1)}}_saveReport(e={}){const{shouldRunReportAfterSave:t,forceShowSaveModal:r}=e;this._getReportId()&&!r?this._onSaveReport({shouldRunReportAfterSave:t}):this._showModal(this._getSaveReportModal(!1,{shouldRunReportAfterSave:t}))}_saveAs(e={}){const{shouldCloseReportAfterSave:t,shouldRunReportAfterSave:r}=e;this._showModal(this._getSaveReportModal(!0,{shouldCloseReportAfterSave:t,shouldRunReportAfterSave:r}))}_closeReport(){const e=new $t(this._getLensMetadata().getParameter("originalMetadata")).getQuery(),t=this._getLensMetadata().getQuery();Br.Z.isMetadataEqualToOriginal(e,t)?this._isEmbeddedInCRM?this._closeViewInCRMA():this._navigateBack():this._showModal(this._getCloseReportModal())}_openDrillDialog(){this._showModal(this._getDrillModal())}_navigateToReportRun(e,t){this._shouldUseNewRunPage()||Br.Z.unregisterHandlers(),this._callRunReportEvent(e,t)}_callRunReportEvent(e,t){let r;t?r=Ft.Z.SAVE_AND_RUN_REPORT.getValue():(r=e?Ft.Z.SWITCH_TO_RUN_MODE.getValue():Ft.Z.SWITCH_TO_EDIT_MODE.getValue(),Zt.Z.transactionStart(r,null,this._getReportId()));const i=(0,Vt.deepCopy)(this._getLensReportMetadata());i.reportMetadata=Ti.get().mixReportMetadata(this._getLensMetadata(),!0,!1);const s=this._getReportId(),n=l.Z.get(p);if(Br.Z.toggleAppClass("reportBuilder-switching-state",!0),s&&n.isInAuraContext())n.navigateToReportRun(s,i,e);else{const{reportMetadata:t}=this._getLensReportMetadata();Br.Z.toggleAppClass("reportBuilder-view",e),Br.Z.toggleAppClass("reportBuilder-with-description",!!t.description),Br.Z.toggleAppClass("reportBuilder-switching-state",this._isInEditMode()===e),this._executeMutators([new zi.Z(!e,r)],{undoEnabled:!1})}}_navigateBack(){Br.Z.unregisterHandlers(),Br.Z.navigateBack(!1)}_editReport(){this._useNewRunPage=!0,this._navigateToReportRun(!1)}_editClassicReport(){Br.Z.unregisterHandlers();const e=this._getLastQueryResult();let t;e&&!e.hasError()&&(t=Ti.get().mixReportMetadata(this._getLensMetadata(),!0)),l.Z.get(p).postReportBuilderAppMessage({srcApp:"reportBuilderApp",switchMode:!0,mode:Z.EDIT.getValue(),reportId:this._getReportId(),reportMetadata:t,newReportBuilder:!1})}_toggleChartVisibility(){if(Br.Z.hasAppClass(Br.Z.APP_CLASS.CHART_OPEN))return void Br.Z.toggleAppClass(Br.Z.APP_CLASS.CHART_OPEN,!1,!0);const{reportMetadata:e,reportExtendedMetadata:t,reportTypeMetadata:r}=this._getLensReportMetadata();this._getChartLensReportMetadata().reportTypeMetadata=r;const i=Ii.get(),s=i.getOrderedAxesFromMetadata(e,t,r),n=i.getPalettes(),o=i.getColors(),a=i.getSecondaryColors(),l=m.isEmpty(e.chart)?i.generateSuggestedEclairChartConfig(s,o,a,n,new di.Z(r),e):i.generateEclairChartConfig(e,t),{definition:u}=l,d=l.config,c=i.getChartSerializationService().convertChartConfigToMetadata(u,d);Br.Z.toggleAppClass(Br.Z.APP_CLASS.CHART_OPEN,!0,!0),this._executeMutators([new wi.Z(gr.getStepIds(),c)])}_toggleFilter(){Br.Z.closeSearchBox(),!1===Br.Z.isAppClassSet(Br.Z.APP_CLASS.FILTER_OPEN)&&ai(".report-action-toggleFilter").attr("aria-pressed",!0),Br.Z.toggleAppClass(Br.Z.APP_CLASS.FILTER_OPEN),Br.Z.toggleAppClass(Br.Z.APP_CLASS.CHATTER_OPEN,!1,!0),Br.Z.handleFilterPanelFocusTransfer()}_toggleChatter(){Br.Z.closeSearchBox(),Br.Z.isAppClassSet(Br.Z.APP_CLASS.CHATTER_OPEN)||T.trigger("reports:chatter",{showChatter:!0,reportId:this._getReportId()}),Br.Z.toggleAppClass(Br.Z.APP_CLASS.CHATTER_OPEN),Br.Z.toggleAppClass(Br.Z.APP_CLASS.FILTER_OPEN,!1,!0)}_toggleSearch(){Br.Z.toggleAppClass(Br.Z.APP_CLASS.FILTER_OPEN,!1),Br.Z.toggleAppClass(Br.Z.APP_CLASS.CHATTER_OPEN,!1),Br.Z.openSearchBox()}_copyToClipboard(){Br.Z.dispatchSyntheticEvent("copyToClipboard")}_getFeedbackUrl(){return`https://www.getfeedback.com/r/${this._isInEditMode()?"T44sH7KY":"itxNrmbk"}?Source=Prompted&Version=${2*(li._C+64)}`}_exportReport(){const e=Ti.get().mixReportMetadata(this._getLensMetadata(),!0,!1);let t=!1,r=!1;const{reportTypeMetadata:i}=this._getLensReportMetadata(),s=new di.Z(i).isCalculatedInsight(),n=!this._isMultiBlock()&&!s;N.reportConfig&&(t=N.reportConfig.isFormattedExportSupported,r=N.reportConfig.isXlsExportOptionHidden),this._isEmbeddedInTCRMStudio?h.Z.exportReport(e.id,e,t,n,r,this._isEmbeddedInTCRMStudio):l.Z.get(p).postReportBuilderAppMessage({srcApp:"reportBuilderApp",showExport:!0,isFormattedExportSupported:t,isDetailsOnlySupported:n,reportId:e.id,reportMetadata:e,isXlsExportOptionHidden:r})}_deleteReport(){const e=Le.Z.getLabel("udd_Report","Entity"),t=(0,Bt.tZ)(ui,{onClose:this._onCloseModal.bind(this),onConfirm:this._onConfirmDelete.bind(this),title:Le.Z.getLabel("Entity","deleteTitleEntity",e),message:Le.Z.getLabel("Entity","deleteMessageEntityAsText",e)});return this._showModal(t)}_addToDashboard(){if(this._isEmbeddedInCRM){const e=new Map,t=this._getReportId();e.set("displayMode","addReport"),e.set("referrerId",t),e.set("dashboardOriginator","analyticsNewReportRunPage"),T.trigger("DEPRECATED:router:go-to-route",new Ct.Z({baseRoute:$e.LIGHTNING_DASHBOARD,extendedHash:Z.EDIT.getName().toLowerCase(),instanceId:j.Z.consumeUniqueId("new"),queryParams:e}))}else{const e={displayMode:"addReport",referrerId:this._getReportId(),dashboardOriginator:"newReportRunPage"};l.Z.get(p).navigateToComponent("desktopDashboards:dashboard",e)}}_addToCampaign(){const{reportMetadata:e}=this._getLensReportMetadata();l.Z.get(p).postReportBuilderAppMessage({srcApp:"reportBuilderApp",addToCampaign:!0,reportId:e.id,recordCount:this._getRecordCount(),reportMetadata:e})}_addToCadence(){const{reportMetadata:e}=this._getLensReportMetadata();l.Z.get(p).postReportBuilderAppMessage({srcApp:"reportBuilderApp",addToCadence:!0,reportId:e.id,recordCount:this._getRecordCount(),reportMetadata:e})}_removeFromCadence(){const{reportMetadata:e}=this._getLensReportMetadata();l.Z.get(p).postReportBuilderAppMessage({srcApp:"reportBuilderApp",removeFromCadence:!0,reportId:e.id,recordCount:this._getRecordCount(),reportMetadata:e})}_subscribeToReport(){let e=!1,t=!1,r=!1;const{reportMetadata:i}=this._getLensReportMetadata();N.reportConfig&&(e=N.reportConfig.subscribeToOthersEnabled,t=N.reportConfig.runAsEnabled,r=N.reportConfig.subscriptionAttachmentEnabled),this._isEmbeddedInTCRMStudio?h.Z.subscribeReport(i.id,i,e,t,r,this._isEmbeddedInTCRMStudio):l.Z.get(p).postReportBuilderAppMessage({srcApp:"reportBuilderApp",subscribeToReport:!0,reportId:i.id,subscribeToOthersEnabled:e,runAsEnabled:t,reportMetadata:i,subscriptionAttachmentEnabled:r})}_onConfirmDelete(){const{reportMetadata:e}=this._getLensReportMetadata();h.Z.deleteReport(e.id).then((t=>{this._showNotification(Le.Z.getLabel("ModernRptPage","deletedToast",e.name)),this._onCloseModal(),l.Z.get(p).navigateToObjectHome()}),(e=>{const t=Ri.Z.getMessage(e),r=(0,Bt.tZ)(kt.Z,{isOpen:!0,prompt:"warning",error:t,onClose:this._closeModal});this._showModal(r)}))}_refreshReport(){l.Z.get(oe).reset(!1),this._executeMutators([new $i.Z],{undoEnabled:!1})}_inlineEditReport(){Br.Z.toggleAppClass(Br.Z.APP_CLASS.INLINE_EDIT_ENABLED,!0,!0),this._getRuntimeLens(gr.TABLE.getValue())._getRuntimeConnector().publish(new Ki.Z(this._getRuntimeLens(gr.TABLE.getValue()).getId(),{type:Yi.Z.EDIT_FIELDS}))}_getSaveReportModal(e,t={}){const{shouldRunReportAfterSave:r,shouldCloseReportAfterSave:i}=t,{reportMetadata:s}=this._getLensReportMetadata(),n=e?Le.Z.getLabel("reportBuilder","saveAs"):Le.Z.getLabel("reportBuilder","saveReport"),o=!this._getReportId();return(0,Bt.tZ)(Si,{isOpen:!0,onSave:this._onSaveReport.bind(this,{shouldRunReportAfterSave:r,shouldCloseReportAfterSave:i}),onCancel:this._onCloseModal.bind(this),reportName:this._getLensMetadata().getDashboardLabel(),reportUniqueName:s.developerName,reportDescription:s.description,reportFolderId:s.folderId,isSaveAs:e,isCreate:o,title:n})}_getCloseReportModal(){const e=this._getReportActions().includes(Ur.SAVE_REPORT.code);return(0,Bt.tZ)(Qi,{isOpen:!0,onCancel:this._onCloseModal.bind(this),onDiscard:this._onDiscardModal.bind(this),onSave:this._onSaveReport.bind(this,{shouldCloseReportAfterSave:!0}),onSaveAs:this._saveAs.bind(this,{shouldCloseReportAfterSave:!0}),reportId:e?this._getReportId():void 0})}_getDrillModal(){const e=this._getReportActions().includes(Ur.SAVE_REPORT.code),t=this._getLensReportMetadata();return(0,Bt.tZ)(qi,{isOpen:!0,onCancel:this._onCloseModal.bind(this),onDrill:this._applyDrill.bind(this),reportMetadata:t.reportMetadata,reportTypeMetadata:t.reportTypeMetadata,drillFilters:this._getDrillFilters(),hasSaveReportPermission:e})}_applyDrill(e,t){const{reportMetadata:r,reportTypeMetadata:i}=this._getLensReportMetadata(),s=this._getLensMetadata().getQuery(),{groupingsDown:n,detailColumns:o,filters:a,aggregates:l,reportBooleanFilter:u,sortBy:d,drillError:c}=ji.Z.getDrillMutatorValues(r,i,s,e,t);this._executeMutators([new Gi([],a,n,o,l,d,u)],{undoEnabled:!1}),c&&this._showNotification(c),this._onCloseModal()}_onCloseModal(){this._closeModal()}_onDiscardModal(){this._closeModal(),this._isEmbeddedInCRM&&this._closeViewInCRMA(),this._navigateBack()}_onSaveReport(e={},t,r,i,s,n,o){let a;const{shouldRunReportAfterSave:l,shouldCloseReportAfterSave:u}=e;if(!this._getReportId()||n||l){const e=this._getReportMode()===Z.VIEW;a=this._navigateToReportRun.bind(this,e||l,l)}else u&&(this._isEmbeddedInCRM?this._closeViewInCRMA():a=this._navigateBack.bind(this));Br.Z.onSaveReport({closeModal:this._closeModal,executeMutators:this._executeMutators,folderId:s,isSaveAs:n,onError:o,navigateCallback:a,metadata:this._getMetadata(),reportDescription:i,reportName:t,reportUniqueName:r,shouldRunReportAfterSave:l})}_getLensMetadata(){return this._getMetadata().getLens("defaultReportStep")}_getReportId(){return this._getLensReportMetadata().reportMetadata.id}_getChartLensMetadata(){return this._getMetadata().getLens("reportChartStep")}_getChartLensReportMetadata(){return this._getChartLensMetadata().getParameter("reportMetadata")}_getLensReportMetadata(){return this._getLensMetadata().getParameter("reportMetadata")}_getLensOriginalReportMetadata(){return this._getLensMetadata().getParameter("originalMetadata")}_getReportActions(){return this._getLensMetadata().getParameter("reportActions")}_getHighlight(){return this._getLensMetadata().getQuery().highlight}_getDrillFilters(){return this._getLensMetadata().getQuery().drillFilters}_getReportMode(){return this._isInEditMode()?Z.EDIT:Z.VIEW}_getLastQueryResult(){const e=this._getRuntimeLens(gr.TABLE.getValue()).getLastResult();return e instanceof pr.Z?e.getQueryResult():null}_getRecordCount(){try{const e=this._getLastQueryResult();return e?e.getTotalLabelAndValue("RowCount").value:0}catch(e){return 0}}_showNotification(e){l.Z.get(p).showToastMessage(e)}_showError(e){l.Z.get(p).showToastMessage(e,"error")}_isMultiBlock(){return Yt.getEnumByName(this._getLensReportMetadata().reportMetadata.reportFormat)===Yt.MULTI_BLOCK}_openInQuip(){if(N.reportConfig.openInQuipUrl){const e=`${N.reportConfig.openInQuipUrl}${this._getReportId()}`;window.open(e,"_blank")}}getMenuGroupIndex(){return this._getReportMode()===Z.VIEW?1:3}_trendReport(){const e=Ti.get().mixReportMetadata(this._getLensMetadata());h.Z.trendReport(e.id,e)}_viewTrend(){const e=Ti.get().mixReportMetadata(this._getLensMetadata());h.Z.viewTrend(e.id,e)}_viewTrendingDetails(){const e=Ti.get().mixReportMetadata(this._getLensMetadata());h.Z.viewTrendingDetails(e.id,e)}_stopTrending(){const e=Ti.get().mixReportMetadata(this._getLensMetadata());h.Z.stopTrending(e.id,e)}_shouldUseNewRunPage(){return this._useNewRunPage||l.Z.get(p).shouldUseNewRunPage()}_isInEditMode(){return this._getLensMetadata().getParameter("isPreview")}useSLDS(){return!0}getSLDSDropdownAlign(){return"right"}isNameEditable(){return this._isInEditMode()}getTag(){if(!this._isMultiBlock())return this._getLensReportMetadata().reportMetadata.reportType.label}getNameMaxLength(){return 40}getNamePlaceholder(){return Le.Z.getLabel("reportBuilder","reportNameField")}getEditNameTooltip(){return Le.Z.getLabel("reportBuilder","editReportName")}shouldSelectAllText(e){const t=this._getLensReportMetadata().reportMetadata.name,r=this._getLensReportMetadata().reportMetadata.reportType.label;return Le.Z.getLabel("reportBuilder","newReport",r)===e&&!t}}class Xi extends Ji{getMenuGroupIndex(){return 1}}const es="ReportInlineEditPlugin";class ts extends Ir.Z{constructor(e=[],t,r,i,s){super(),this._reportActions=e,this._isInsightsPluginEnabled=t,this._isInsightsPanelOpen=r,this._extraViewHeaderActionIds=i,this._viewManager=s}renderHeader(e){if(this._isEditMode(e.dashboard))return super.renderHeader(e);const t=this._getActionBarDelegate({executeMutators:e.executeMutators,showModal:e.showModal,closeModal:e.closeModal,dashboard:e.dashboard,getMetadata:e.getMetadata,getRuntimeLens:e.getRuntimeLens,isEditMode:e.isEditMode,isEmbeddedInTCRMStudio:this._isEmbeddedInTCRMStudio(e.viewConfig),isEmbeddedInCRM:this._isEmbeddedInTCRM(e.viewConfig),viewManager:this._viewManager,closeViewInCRMA:e.closeViewInCRMA});return(0,Bt.tZ)(Nr,{dashboardLabel:e.dashboard.getLabel(),dashboardDescription:e.dashboard.getDescription(),delegate:t,hotkeyManager:e.hotkeyManager,showActionBar:e.showActionBar,actionSet:e.actionSet,toggledActions:e.pluginManager.getToggledHeaderActions()})}_isEmbeddedInTCRM(e){const t=e.appContext.chromeMode.analyticsMode;return t===y.Z.ANALYTICS_TAB||t===y.Z.ANALYTICS_STUDIO}_isEmbeddedInTCRMStudio(e){return e.appContext.chromeMode.analyticsMode===y.Z.ANALYTICS_STUDIO}_isDataCloudReport(e){return new $t(this._getReportMetadata(e)).isDataCloudReport()}_isCalculatedInsight(e){return new $t(this._getReportMetadata(e)).getReportTypeMetadata().isCalculatedInsight()}_getInlineEditButton(e,t){return this._isMultiBlock(t)||this._isDataCloudReport(t)||!N.reportConfig?.hasInlineEditing?[]:e?[new vr(Ur.TOGGLE_INLINE_EDIT)]:[new vr(Ur.INLINE_EDIT)]}_isInlineEditEnabled(e){const t=e.getPlugin(es);return t._stateDelegate?.getState().isInlineEditToggled}_getMainActions(e,t,r){const i=this._isInlineEditEnabled(r),s=r.getPlugin(es);if(this._isEditMode(t))return s._stateDelegate?.getState().isInlineEditToggled&&s._stateDelegate?.setState({isInlineEditToggled:!1}),[[new wr(dr.CLIP_REPORT)],[new wr(rr.UNDO_HEADER_ACTION_ID),new wr(rr.REDO_HEADER_ACTION_ID)],this._getChartActions(t),[new Rr(Ur.SAVE_AND_RUN_REPORT,this._hasSaveReportPermission())],[new vr(Ur.SAVE_REPORT)],[new vr(Ur.CLOSE)],[new vr(Ur.RUN_REPORT)]];{const r=[[new wr(dr.CLIP_REPORT)],this._isInsightsPluginEnabled?[new wr(Cr.HEADER_ACTION_ID)]:[],[new Rr(Ur.DRILL,!this._isMultiBlock(t)&&this._hasDrillFilters(t))],[new Rr(Ur.TREND_REPORT,this._canStartTrend()&&!this._isMultiBlock(t)&&!this._isHistoricalTracking(t)&&!this._isDataCloudReport(t))],[new Rr(Ur.VIEW_TREND,this._canViewTrend()),new Rr(Ur.VIEW_TREND_SUB_MENU,this._canViewTrend())],this._getInlineEditButton(i,t),[new vr(Ur.SEARCH_TABLE)],this._getChartActions(t),[new vr(Ur.TOGGLE_FILTER)],[new Rr(Ur.CHATTER,this._canChatter(t)&&!this._isEmbeddedInTCRM(e))],[new vr(Ur.REFRESH)],this._getMainPlatformActions(t)];return this._extraViewHeaderActionIds.forEach((e=>{r.splice(1,0,[new wr(e)])})),r}}_getMenuActions(e,t){let r;return this._isEditMode(t)?(r=this._filterActions([Ur.SAVE_AS]),this._hasSaveReportPermission()&&r.push(Ur.PROPERTIES)):r=this._isNewReport(t)?this._isCalculatedInsight(t)?this._filterActions([Ur.SAVE_REPORT]):this._filterActions([Ur.SAVE_REPORT,Ur.EXPORT]):this._getMenuPlatformActions(),this._shouldEnableCopyToClipboardAction(t)&&r.push(Ur.COPY_TO_CLIPBOARD),r.map((e=>new vr(e)))}_filterActions(e){return e.filter((e=>this._reportActions.indexOf(e.code)>-1))}_getMainPlatformActions(e){if(this._isNewReport(e))return[new vr(Ur.EDIT_REPORT)];const t=[],r=this._reportActions.find((e=>Ur.hasCode(e)));return r&&t.push(new vr(Ur.fromCode(r))),t}_getMenuPlatformActions(){const e=[];let t=!1;for(let r=0;r<this._reportActions.length;r++){const i=this._reportActions[r];Ur.hasCode(i)&&(t?e.push(Ur.fromCode(i)):t=!0)}return e}_getChartActions(e){return m.isEmpty(this._getChartMetadata(e))?[new vr(Ur.ADD_CHART)]:[new vr(Ur.TOGGLE_CHART)]}_getChartMetadata(e){return e.getLens(gr.TABLE.getValue()).getQuery().chart}_isEditMode(e){return e.getLens(gr.TABLE.getValue()).getParameter("isPreview")}_getReportMetadata(e){return e.getLens(gr.TABLE.getValue()).getParameter("reportMetadata")}_isNewReport(e){return!this._getReportMetadata(e).reportMetadata.id}_canChatter(e){return!!N.reportConfig&&!(!N.reportConfig.isChatterEnabled||this._isNewReport(e))}_isMultiBlock(e){return Yt.getEnumByName(this._getReportMetadata(e).reportMetadata.reportFormat)===Yt.MULTI_BLOCK}_isHistoricalTracking(e){const t=this._getReportMetadata(e);return Tr.ZP.getHistoricalTrackingMetadata(t).isHistoricalReport()}_hasDrillFilters(e){const t=e.getLens(gr.TABLE.getValue()).getQuery().drillFilters;return!(!t||!t.length)}_canStartTrend(){return!!N.trendConfig&&!(!N.trendConfig.canTrend||N.trendConfig.trendedReport)}_canViewTrend(){return!!N.trendConfig&&!(!N.trendConfig.canTrend||!N.trendConfig.trendedReport)}_hasSaveReportPermission(){return this._reportActions.indexOf(Ur.SAVE_REPORT.code)>-1}_shouldEnableCopyToClipboardAction(e){return l.Z.get(p).shouldEnableCopyToClipboardAction()&&!this._isMultiBlock(e)&&!(0,Sr.vU)()}_getActionBarDelegate(e){return new(this._isInsightsPanelOpen?Xi:Ji)(e)}}var rs=r(62325),is=r(27702),ss=r(68831),ns=r(99689),os=r(78453),as=r(29365);class ls extends tr.Z{constructor(e=[]){super("ReportLayoutSwitcherPlugin"),this._hideSettingFooter=!1,this._inInlineEditMode=!1,this._isChartPanelFirstInit=!0,this.setReportActions(e),l.Z.get(p).registerBeforeFunctions(),l.Z.get(p).setCallback(this._handleMessage.bind(this),"navigateAway"),N.core.auraApp&&l.Z.get(p).beforeUnload(this._handleBeforeUnload.bind(this),"navigateAway")}setReportActions(e){this._reportActions=e}getRuntimeTopics(){return[new ss.Z(ns.Z.INLINE_EDIT_STATE)]}onRuntimeMessage(e){e instanceof as.Z&&(this._inInlineEditMode=e.getState()?.isInEditMode(),this._inInlineEditMode?(Br.Z.toggleAppClass("hide-settings-footer",!0),Br.Z.toggleAppClass("show-inline-edit-footer",!0),Br.Z.closeSearchBox(),Br.Z.toggleAppClass(Br.Z.APP_CLASS.FILTER_OPEN,!1),Br.Z.toggleAppClass(Br.Z.APP_CLASS.CHATTER_OPEN,!1),this._sdk.updateRightPanel(fr.Z),this._sdk.toggleRightPanel(!1)):(Br.Z.toggleAppClass("hide-settings-footer",this._hideSettingFooter),Br.Z.toggleAppClass("show-inline-edit-footer",!1)))}onRuntimeStepResult(e){if(e.isError())return void this._handleErrorMessage(e);this._handleMetadataErrorMessage(e);const t=this._getMetadata(e);if(!t)return;const{reportMetadata:r}=t.getReportMetadata();this._reportId=r.id;const i=this._isPreview(),s=!m.isEmpty(r.chart)&&(i||this._hasData(e));this._isChartPanelFirstInit&&s?Br.Z.toggleAppClass("chart-open",!0,!0):s||Br.Z.toggleAppClass("chart-open",!1,!0),this._isChartPanelFirstInit=!1;const n=this._getNewLayout(s,t.isMatrix()&&!!t.getHighlight(),i),o=this._sdk.getCurrentLayout().getName()!==n;this._hideSettingFooter=!i&&0===r.groupingsDown.length,Br.Z.toggleAppClass("hide-settings-footer",this._hideSettingFooter),this._sdk.commandInvoker.saveNoResult(!this._hasData(e));const a=m.get(this._stateDelegate.getState(),"lastIsPreview"),l=this._getCurrentReportMetadata().isPausableSubscriberPaused&&i&&a;this._setState({lastIsPreview:i}),o&&!l&&(this._sdk.layoutSwitcher&&this._sdk.layoutSwitcher.switchTo({layoutName:n,addToHistory:!1}),Br.Z.toggleAppClass("reportBuilder-switching-state",!1))}_isPreview(){return this._sdk.getDashboardMetadata().getLens(this.getRuntimeStepId()).getParameter("isPreview")}_hasData(e){return!(!e||1===e.getData().length&&e.getData()[0]["~~isGrandtotal~~"])&&e.getData().length>0}_getNewLayout(e,t,r){const i=this._getLayoutName(r,e,t);return Er.ZP[i].getLayoutName()}_getLayoutName(e,t,r){return`${e?"EDIT":"RUN"}${r?"_MATRIX_DETAILS":""}_${t?"CHART":"NO_CHART"}`}getRuntimeStepId(){return"defaultReportStep"}_getOriginalReportMetadata(){return new $t(this._sdk.getDashboardMetadata().getLens(this.getRuntimeStepId()).getParameter("originalMetadata")).getQuery()}_getCurrentReportMetadata(){return this._sdk.getDashboardMetadata().getLens(this.getRuntimeStepId()).getParameter("query")}getFloatingRenderable(){const e=this._stateDelegate.getState(),t=m.get(e,"errorMessage"),r=m.get(e,"showTransitionDialog"),i=m.get(e,"showSaveDialog"),{reportMetadata:s}=this._sdk.getDashboardMetadata().getLens(this.getRuntimeStepId()).getParameter("reportMetadata"),n=this._sdk.getDashboardMetadata().getLens(this.getRuntimeStepId()).getDashboardLabel();return(0,Bt.BX)("div",{children:[(0,Bt.tZ)(kt.Z,{isOpen:!!t,error:t,onClose:this._closeErrorModal.bind(this)},this.getRuntimeStepId()),(0,Bt.tZ)(Qi,{isOpen:!!r,onCancel:this._closeTransitionDialog.bind(this),onDiscard:this._handleDiscard.bind(this),onSave:this._handleSave.bind(this,n,s.developerName,s.description,s.folderId,!1,void 0),onSaveAs:this._handleSaveAs.bind(this),reportId:this._hasSaveReportPermission()?this._reportId:void 0}),(0,Bt.tZ)(Si,{isOpen:!!i,onSave:this._handleSave.bind(this),onCancel:this._handleCancelSaveDialog.bind(this),reportName:n,reportDescription:s.description,reportFolderId:s.folderId,isSaveAs:!0,title:Le.Z.getLabel("reportBuilder","saveAs")})]},"floatingRenderable")}_hasSaveReportPermission(){return this._reportActions.includes(Ur.SAVE_REPORT.code)}_handleBeforeUnload(e){let t;return this._isPreview()&&!Br.Z.isMetadataEqualToOriginal(this._getOriginalReportMetadata(),this._getCurrentReportMetadata())?(t=Le.Z.getLabel("reportBuilder","closeModalWarningMessage"),e.returnValue=t):t=void 0,t}_handleMessage(e){"onBeforeNavigate"===m.get(e,"data.eventType")&&(!this._isPreview()||Br.Z.isAppClassSet("reportBuilder-switching-state")||Br.Z.isMetadataEqualToOriginal(this._getOriginalReportMetadata(),this._getCurrentReportMetadata())?this._inInlineEditMode||(Br.Z.toggleAppClass("reportBuilder-switching-state",!1),this._navigateBack()):this._setState({showTransitionDialog:!0}))}_closeTransitionDialog(){this._setState({showTransitionDialog:!1})}_handleCancelSaveDialog(){this._setState({showSaveDialog:!1})}_handleDiscard(){this._navigateBack()}_handleSave(e,t,r,i,s,n){Br.Z.onSaveReport({closeModal:this._closeTransitionDialog.bind(this),folderId:i,isSaveAs:s,navigateCallback:this._afterSaveCallback.bind(this),metadata:this._sdk.getDashboardMetadata(),reportUniqueName:t,reportDescription:r,reportName:e,onError:n})}_handleSaveAs(){this._setState({showSaveDialog:!0})}_afterSaveCallback(){this._handleCancelSaveDialog(),this._navigateBack()}_navigateBack(){Br.Z.unregisterHandlers(),Br.Z.navigateBack(!0)}_hasMetadataError(e){const t=this._getMetadata(e);return t&&t.hasError&&t.hasError()}_handleErrorMessage(e){e.getErrorMessage()!==m.get(this._stateDelegate.getState(),"errorMessage")&&(this._setState({errorMessage:e.getErrorMessage()}),this._sdk.commandInvoker.saveErrorToHistory(),this._sdk.commandInvoker.undo())}_handleMetadataErrorMessage(e){if(this._hasMetadataError(e)){const t=this._getMetadata(e);if(!t)return;const r=os.Z.getEnumByCode(t.getSpecificErrorCode());r.shouldShowErrorModal()||this._sdk.commandInvoker.saveErrorToHistory(r)}}_closeErrorModal(){this._setState({errorMessage:null})}_getMetadata(e){return e.getMetadata()}_setState(e){const t=this._stateDelegate.getState();m.isMatch(t,e)||this._stateDelegate.setState(e)}}var us=r(44988),ds=r(6343);const cs="joinedReport",hs="report-format-switcher",ps=`${hs}-trigger`,gs=`${hs}-button`,ms=`${hs}-popover`,_s=`${hs}-option-group`;class fs extends pt.Component{static contextType=o.Z;static defaultProps={isMultiBlock:!1,isEnabled:!0,onChange(){}};state={isOpen:!1,isMultiBlockSelected:this.props.isMultiBlock};componentDidMount(){this._adjustSwitcherMargin()}componentDidUpdate(){this._adjustSwitcherMargin()}_adjustSwitcherMargin(e=0){let t=document.querySelector(".headerPanel .name .label"),r=40;t||(t=document.querySelector(".headerPanel input.name"),r=20);const i=document.querySelector(`.${ps}`);if(t&&i){const e=Math.max(0,t.offsetWidth+r-i.offsetWidth);this.context===R.Z.RTL?i.style.marginLeft=`${e}px`:i.style.marginRight=`${e}px`}}_handleTriggerClick=()=>{this.props.isEnabled&&this.setState({isOpen:!this.state.isOpen,isMultiBlockSelected:this.props.isMultiBlock},(()=>{if(this.state.isOpen){this.optionNodes[this.state.isMultiBlockSelected?1:0].focus();const e=document.querySelector(`.${ms}`),t=document.querySelector(`.${_s}`);e&&t&&(e.style.width=`calc(${t.offsetWidth}px + 2 * 0.75rem)`)}}))};_handleApply=()=>{this.setState({isOpen:!1}),this.props.onChange(this.state.isMultiBlockSelected)};_handleClose=()=>{this.setState({isOpen:!1})};_handleChange=e=>{this.setState({isMultiBlockSelected:e.target.value===cs})};_renderOption(e,t,r,i,s){const n="reportFormatOption_"+e,o=Lt().classSet({"slds-visual-picker slds-visual-picker_medium report-format-switcher-option":!0,selected:s});let a;return s&&(a=(0,Bt.tZ)("span",{className:"slds-visual-picker__text-check",children:(0,Bt.tZ)(wt.Z,{name:"check",category:"utility",size:"x-small",inverse:!0,tabIndex:"-1"})})),(0,Bt.BX)("div",{className:o,children:[(0,Bt.tZ)("input",{type:"radio",id:n,name:"formatOptions",value:e,checked:s,onChange:this._handleChange,ref:e=>this.optionNodes.push(e)}),(0,Bt.BX)("label",{htmlFor:n,children:[(0,Bt.BX)("span",{className:"slds-visual-picker__figure slds-visual-picker__text report-format-switcher-option-content",children:[(0,Bt.tZ)(wt.Z,{path:`${Fr}#${i}`,className:"report-format-switcher-option-icon",tabIndex:"-1"}),(0,Bt.BX)("span",{children:[(0,Bt.tZ)("span",{className:"slds-text-heading_small",children:t}),(0,Bt.tZ)("span",{className:"slds-text-title report-format-switcher-option-description",children:r})]})]}),a]})]},e)}_renderOptions(){const e=[];return this.optionNodes=[],e.push(this._renderOption("report",Le.Z.getLabel("udd_Report","Entity"),Le.Z.getLabel("reportBuilder","reportFormatDescription"),"table",!this.state.isMultiBlockSelected)),e.push(this._renderOption(cs,Le.Z.getLabel("reportBuilder","joinedReport"),Le.Z.getLabel("reportBuilder","joinedReportFormatDescription"),"chart-thumb-comparisontable",this.state.isMultiBlockSelected)),(0,Bt.BX)("fieldset",{className:"slds-form-element report-format-switcher-options",children:[(0,Bt.tZ)("legend",{className:"slds-assistive-text",children:Le.Z.getLabel("reportBuilder","chooseFormat")}),(0,Bt.tZ)("div",{className:"slds-form-element__control",children:(0,Bt.tZ)("div",{className:Lt().buildClassName("slds-radio_button-group",_s),children:e})})]})}render(){const e=this.props.isMultiBlock?Le.Z.getLabel("reportBuilder","joinedReport"):Le.Z.getLabel("udd_Report","Entity");let t;this.props.isEnabled&&(t=(0,Bt.tZ)(wt.Z,{category:"utility",name:"down",size:"x-small"}));const r=(0,Bt.BX)("span",{children:[(0,Bt.tZ)("span",{className:"label","aria-hidden":"true",children:e}),(0,Bt.tZ)("span",{className:"slds-assistive-text",children:Le.Z.getLabel("reportBuilder","chooseReportFormat")}),t]});return(0,Bt.tZ)(ds.Z,{id:"report-format-switcher",triggerClassName:ps,className:ms,isOpen:this.state.isOpen,align:"bottom left",body:this._renderOptions(),footer:(0,Bt.BX)("div",{className:"slds-text-align_right",children:[(0,Bt.tZ)(It.Z,{className:"report-format-switcher-cancel",label:Le.Z.getLabel("reportBuilder","cancel"),onClick:this._handleClose}),(0,Bt.tZ)(It.Z,{className:"report-format-switcher-apply",variant:"brand",label:Le.Z.getLabel("reportBuilder","apply"),onClick:this._handleApply})]}),heading:Le.Z.getLabel("reportBuilder","chooseFormat"),onClose:this._handleClose,onRequestClose:this._handleClose,children:(0,Bt.tZ)(It.Z,{id:"report-format-switcher-button",className:gs,variant:"base",disabled:!this.props.isEnabled,onClick:this._handleTriggerClick,children:r})})}}var ys=r(93197),bs=r(66650),Cs=r(58094);var Es=r(70021),Ss=r(22766),Ts=r(6838),Is=r(25572),vs=r(67951),Rs=r.n(vs);class ws extends vs{constructor(e){super(e)}getReportType(){return this._json.type}getType(){return or.Z.REPORT_TYPE}isCustomReportType(){return this._json.isCustomReportType}isDataCloudReportType(){return this._json.isDataCloudReportType}isCalculatedInsight(){return this._json.isDataCloudReportType&&this._json.type.endsWith("__cio")}isSemanticModel(){return this._json.isDataCloudReportType&&this._json.type.endsWith("__sdm")}getDataSpace(){return this._json.dataSpace}getId(){return this._json.id}getLabel(){return this._json.label}isHidden(){return this._json.isHidden}getRecentlyUsedDate(){return this._json.lastUsedDate}getSectionIndex(){return this._json.sectionIndex}setIsHidden(e){this._json.isHidden=e}getDescription(){return this._json.description}}var As=r(24765),Ds=r(51164),Ls=r(72009),Ms=r(30512);const Ns=(0,gi.iv)("margin-right:",Ms.spacingMedium,";",""),Os=(0,gi.iv)("position:relative;background:",Ms.colorBackground,";display:flex;align-items:center;justify-content:center;bottom:0;border-top:1px solid ",Ms.colorBorder,";padding-top:",Ms.spacingSmall,";padding-bottom:",Ms.spacingSmall,";z-index:",Ms.zIndexDocked,";","");class Ps extends pt.PureComponent{static defaultProps={isOpen:!1,onClickManageInSetup:()=>{}};_getHeader(){return[this._renderText(),this._renderManageButton()]}_renderText(){return(0,Bt.tZ)("div",{className:"hidden-report-type-header-text",children:(0,Bt.tZ)("span",{className:"hidden-report-type-header-text-message",children:Le.Z.getLabel("reportBuilder","hiddenReportTypes")})},"hiddenReportTypeHeader")}_renderManageButton(){return O().isInCommunityContext?(0,Bt.tZ)("div",{}):(0,Bt.tZ)(It.Z,{className:"hidden-report-type-header-button",label:Le.Z.getLabel("reportBuilder","manageSetup"),onClick:this.props.onClickManageInSetup},"ManageSetup")}render(){return this.props.isOpen?(0,Bt.tZ)("div",{className:"hidden-report-type-header",children:(0,Bt.tZ)("div",{className:"hidden-report-type-header-content",children:this._getHeader()})}):(0,Bt.tZ)("div",{})}}Ps.displayName="HiddenReportType";var xs=r(57300),Zs=r.n(xs),Fs=r(79529),ks=r(41553),Bs=r(86194);const Ws=(e,t)=>e.map((e=>{const r=Le.Z.getLabel("reportBuilder","semanticModel","Hide"),i=Le.Z.getLabel("reportBuilder","semanticModel","Show"),s=["Hide Report Type","Show Report Type"];return s.includes(e.id)&&t?{...e,label:e.id===s[0]?r:i}:e}));const Gs=["","title","action"],Us={name:"14sbbq5",styles:"z-index:10000"};class Hs extends Bs{constructor({assetType:e,isAppContext:t,isEmbedded:r,menuDropdownItems:i,messageHandler:s,menuDropdownhandler:n,dropDownClickHandler:o}){super(e,t,r,s),this.menuDropdownItems=i,this._menuDropdownhandler=n,this.dropDownClickHandler=o}_getColumnClasses(){return Gs}provideDataCellClasses(e){const t=this._getColumnClasses()[e.dataIndex];return null!=t?t:""}getAriaLabel(e,t,r,i){let s;const n=Le.Z.getLabel("reportBuilder","selected");return 1===t&&i?(s=i+" - "+r,e?.props.className.includes("selected")&&(s+=" - "+n)):s=e?.props.className.includes("selected")?r+" - "+n:"",s}_dropdownSelecthandler(e,t,r){this._menuDropdownhandler(e,r,t)}_dropDownClickHandler(e){e.stopPropagation(),this.dropDownClickHandler()}_getLabelValue(e,t){return e.isSemanticModel()?Le.Z.getLabel("reportBuilder","reportCategorySemanticDataModel"):t}provideDataCell(e,t,r){const i=r.getLabel(),s=t.dataIndex,n=Ws(this.menuDropdownItems,r.isSemanticModel());switch(s){case 0:return(0,Bt.tZ)("span",{children:(0,Bt.tZ)("a",{href:"#",className:"slds-text-link_reset","aria-label":this.getAriaLabel(e,s,i),children:(0,Bt.tZ)("p",{className:"slds-truncate","data-tooltip":i,children:i})})});case 1:{let t;return r.isDataCloudReportType()?(t=r.isCustomReportType()?Le.Z.getLabel("reportBuilder","reportCategoryDataCloudCustom"):Le.Z.getLabel("reportBuilder","reportCategoryDataCloudStandard"),t=this._getLabelValue(r,t)):t=r.isCustomReportType()?Le.Z.getLabel("reportBuilder","reportCategoryCustom"):Le.Z.getLabel("reportBuilder","reportCategoryStandard"),(0,Bt.tZ)("span",{children:(0,Bt.tZ)("a",{href:"#",className:"slds-text-link_reset","aria-label":this.getAriaLabel(e,s,i,t),children:(0,Bt.tZ)("p",{className:"slds-truncate",children:t})})})}case 2:return(0,Bt.tZ)(ks.Z,{iconCategory:"utility",iconName:"down",iconSize:"x-small",iconVariant:"border-filled",width:"x-small",menuPosition:"overflowBoundaryElement",css:Us,assistiveText:{icon:Le.Z.getLabel("reportBuilder","reportTypeAction",i)},align:"right",onClick:this._dropDownClickHandler.bind(this),options:n,onSelect:this._dropdownSelecthandler.bind(this,r,e?.props.rowIndex)});default:return null}}}var Vs=r(96469),js=r(30393),qs=r(58890),zs=r(9526);class $s extends zs{constructor(e,t,r,i){super(),this._assetType=e,this._resultSet=t,this._isAppContext=r,i&&(this._onSortChange=i)}isAsync(){return!0}getColumns(){let e=0;const t=[];return t.push({label:Le.Z.getLabel("AssetLongTable","title"),dataType:Vs.Z.CUSTOM,columnIndex:e,dataIndex:e,sort:{order:js.Z.NAME,direction:qs.Z.ASC}}),this._isAppContext||t.push({label:Le.Z.getLabel("AssetLongTable","location"),dataType:Vs.Z.CUSTOM,columnIndex:++e,dataIndex:e,sort:{order:js.Z.APP,direction:qs.Z.ASC}}),this._assetType===or.Z.STORY.getCode()&&(t.push({label:Le.Z.getLabel("AssetLongTable","status"),dataType:Vs.Z.CUSTOM,columnIndex:++e,dataIndex:e,sort:{order:js.Z.STATUS,direction:qs.Z.ASC}}),t.push({label:Le.Z.getLabel("AssetLongTable","outcome"),dataType:Vs.Z.CUSTOM,columnIndex:++e,dataIndex:e,sort:{order:js.Z.OUTCOME,direction:qs.Z.ASC}})),t.push({label:Le.Z.getLabel("AssetLongTable","creator"),dataType:Vs.Z.CUSTOM,columnIndex:++e,dataIndex:e,sort:{order:js.Z.CREATED_BY,direction:qs.Z.ASC}}),t.push({label:Le.Z.getLabel("AssetLongTable","createdDate"),dataType:Vs.Z.CUSTOM,columnIndex:++e,dataIndex:e,sort:{order:js.Z.CREATED_DATE,direction:qs.Z.ASC}}),t.push({label:Le.Z.getLabel("AssetLongTable","modifiedDate"),dataType:Vs.Z.CUSTOM,columnIndex:++e,dataIndex:e,sort:{order:js.Z.LAST_MODIFIED_BY,direction:qs.Z.ASC}}),t.push({label:Le.Z.getLabel("AssetLongTable","lastModifiedDate"),dataType:Vs.Z.CUSTOM,columnIndex:++e,dataIndex:e,sort:{order:js.Z.LAST_MODIFIED,direction:qs.Z.ASC}}),t.push({label:"",dataType:Vs.Z.CUSTOM,columnIndex:++e,dataIndex:e}),t}getTotalCount(){return null!=(null!=this._resultSet?this._resultSet.getTotalCount:void 0)?this._resultSet.getTotalCount():0}getRows(e,t){let r;return r=null!=(null!=this._resultSet?this._resultSet.getResults:void 0)?this._resultSet.getResults(e,t):Promise.resolve([]),r}async getSortedRows(e,t,r,i){return this._resultSet.getSortedResults(e,t,r,i)}getPlaceholder(){return""}withSortInfo(e,t){return this._sortOrder=e||js.H,this._sortDirection=t||qs.H,this}getSortOrderForResultSet(){return this._sortOrder}getSortDirectionForResultSet(){return this._sortDirection}setSelectedAssetsIds(e){this._selectedAssetsIds=e}getSelectedAssetIds(){return this._selectedAssetsIds}}class Qs extends $s{getColumns(){return[{label:Le.Z.getLabel("reportBuilder","reportTypeName"),dataType:Vs.Z.CUSTOM,columnIndex:0,dataIndex:0,sort:{order:js.Z.NAME,direction:qs.Z.ASC}},{label:Le.Z.getLabel("reportBuilder","categoryLabel"),dataType:Vs.Z.CUSTOM,columnIndex:1,dataIndex:1,sort:{order:js.Z.TYPE,direction:qs.Z.ASC}},{label:"",dataType:Vs.Z.CUSTOM,columnIndex:2,dataIndex:2}]}}r(52684);const Ys=function(e,t){return e.results.getTotalCount()===t.results.getTotalCount()&&_().isEqual(e.results.results,t.results.results)},Ks=e=>{const{results:t,pageSize:r=30}=e,[i,s]=(0,pt.useState)(null),n=(0,pt.useRef)(),o=or.Z.fromCode("reportType"),[a,l]=(0,pt.useState)(0),u=(0,pt.useContext)(bt.Z),[d,c]=(0,pt.useState)([e.referenceForFocus[0],e.referenceForFocus[1]]);(0,pt.useEffect)((()=>{i&&_().isEqual(i.results.results,e.results.results)||(c([-1,-1]),s(e))}),[i,e]);const h=(0,pt.useCallback)((()=>{const e=n.current?.parentElement,t=e?.scrollTop??0;Math.abs(t-a)>47&&l(t)}),[n,a,l]),p=(e,t)=>{c([e,t])};(0,pt.useEffect)((()=>{const e=n.current?.parentElement;return e?.addEventListener("scroll",h),()=>{e?.removeEventListener("scroll",h)}}),[n,h]);const g=(0,pt.useMemo)((()=>{const e=n.current?.parentElement;return e?(0,Dt.getOffset)(e).top:0}),[n]),m=new Qs(o.getCode(),t),f=new Hs({assetType:o.getCode(),isAppContext:e.isAppContext,isEmbedded:e.isEmbedded,menuDropdownItems:e.menuDropdownItems,messageHandler:u?.messageHandler,menuDropdownhandler:e._menuDropdownhandler,dropDownClickHandler:e._dropDownClickHandler}),y=t?t.getTotalCount():0,b=(0,Bt.tZ)("div",{className:"loadingIndicator-row",children:Le.Z.getLabel("reportBuilder","loading")});return(0,Bt.tZ)("div",{className:"asset-results-table",ref:n,children:(0,Bt.tZ)(Zs(),{ariaLabel:e.ariaLabel,selectedIndex:e.selectedIndex,dataSource:m,cellProvider:f,maxRows:y,rowHeight:47,pageSize:r,viewportOffset:g,viewportScrolltop:a,viewportHeight:1457,onSelect:e._onAssetSelected,rowClassName:"reportBuilder",loadingIndicator:b,enableKeyboardNavigation:!0,onKeyDownfunc:(e,t,r,i,s)=>{(0,Fs.f)(e,t,r,i,p,s)},setFocus:()=>{if(-1!==d[0]){const e=document.querySelector(".colRef"+d[0].toString()+"_"+d[1].toString());e?.classList?.contains("action")?e?.querySelector("button")?.focus():e?.querySelector("a")?.focus()}}})})},Js=pt.memo(Ks,Ys);var Xs=r(59710),en=r(7997);const tn=(0,gi.iv)("flex:0 0 0;font-weight:",mi.fontWeightBold,";font-size:",mi.fontSizeHeadingSmall,";",""),rn=(0,gi.iv)("padding:",mi.spacingSmall," ",mi.spacingLarge," 0 ",mi.spacingLarge,";",""),sn=(0,gi.iv)("display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;line-height:",mi.lineHeightText,";",""),nn=(0,gi.iv)("line-height:",mi.lineHeightText,";",""),on=(0,gi.iv)("& ul{& a{padding:0 ",mi.spacingXLarge,";}}",""),an=(0,gi.iv)("rtl"===document.dir?"margin-left: "+mi.spacingXxSmall:"margin-right: "+mi.spacingXxSmall,";","");var ln=r(19929);r(68444);class un extends pt.PureComponent{static defaultProps={field:void 0,sObject:void 0,isSObject:!1,isDataCloudReportType:!1,isCalculatedInsight:!1,additionalClassName:void 0,width:0};getIconName(){if(this.props.isSObject){if(this.props.isDataCloudReportType)return this.props.isCalculatedInsight?"calculated_insights":"data_model";return"sobject"===ln.Z.getDefaultSldsIconName(this.props.sObject.apiName)?"default":ln.Z.getDefaultSldsIconName(this.props.sObject.apiName)}switch(this.props.field.getType()){case Ls.Z.TEXT:return"type_tool";case Ls.Z.COUNT:case Ls.Z.DATE:case Ls.Z.DATETIME:case Ls.Z.CURRENCY:case Ls.Z.NUMBER:case Ls.Z.IDLOOKUP:return this.props.field.getType().getIconName();default:return"type_tool"}}_renderIcon(e){const t=this.props.isSObject?"":"listitem-icon-with-desc",r=Lt().buildClassName("listitem-icon",t),i=this.props.isSObject?"standard":"utility",s=this.props.isSObject?"small":"xx-small";return(0,Bt.tZ)("div",{className:r,children:(0,Bt.tZ)(wt.Z,{className:"slds-button__icon",category:i,name:e,size:s,colorVariant:"default"})})}_renderUpperLabel(e){return(0,Bt.tZ)(ci.Z,{content:e,align:"top right",hasStaticAlignment:!0,children:(0,Bt.tZ)("span",{tabIndex:"0",children:e})})}_renderDesc(e){return(0,Bt.tZ)(ci.Z,{content:e,align:"top right",hasStaticAlignment:!0,children:(0,Bt.tZ)("span",{tabIndex:"0",children:e})})}_onclickObjectLink(e,t){t.preventDefault(),window.open(e,"_blank")}_renderLink(e){if(O().isInCommunityContext)return this._renderUpperLabel(e);let t;return t=this.props.isDataCloudReportType?this.props.isCalculatedInsight?window.location.origin+"/lightning/r/MktCalculatedInsight/"+this.props.sObject.calculatedInsightObjectInfo.id+"/view":window.location.origin+"/lightning/n/standard-DataModel?c__objectApiName="+this.props.sObject.apiName:window.location.origin+"/lightning/setup/ObjectManager/"+this.props.sObject.apiName+"/Details/view",(0,Bt.tZ)(ci.Z,{content:e,align:"top right",hasStaticAlignment:!0,children:(0,Bt.tZ)("a",{className:"listitem-label-link",style:{width:`${this.props.width}rem`},href:t,onClick:this._onclickObjectLink.bind(this,t),children:e})})}render(){const e=this.getIconName(),t=Lt().buildClassName("listitem-container",this.props.additionalClassName),r=this.props.field?.getLabel()||this.props.sObject?.label,i=this.props.isSObject?"":this.props.field._json.CategoryName,s=this._renderIcon(e),n=this.props.isSObject?(0,Bt.tZ)("div",{}):this._renderUpperLabel(r),o=this.props.isSObject?(0,Bt.tZ)("div",{}):this._renderDesc(i),a=this.props.isSObject?this._renderLink(r):(0,Bt.tZ)("div",{});return(0,Bt.BX)("div",{className:t,children:[s,(0,Bt.BX)("div",{className:"listitem-text",children:[(0,Bt.tZ)("div",{className:"listitem-label",children:a}),(0,Bt.tZ)("div",{className:"listitem-label",children:n}),(0,Bt.tZ)("div",{className:"listitem-label listitem-desc",children:o})]})]})}}un.displayName="ListItem";var dn=r(21400);const cn=dn.ZP.div.withConfig({displayName:"ReportTypeDetailSObjectListStyle__JoinIconDiv",componentId:"sc-1jyatzq-0"})(["float:",";"],"rtl"===document.dir?"right":"left"),hn=dn.ZP.div.withConfig({displayName:"ReportTypeDetailSObjectListStyle__LeftDiv",componentId:"sc-1jyatzq-1"})(["float:",";"],"rtl"===document.dir?"right":"left"),pn=dn.ZP.div.withConfig({displayName:"ReportTypeDetailSObjectListStyle__ToolTipDiv",componentId:"sc-1jyatzq-2"})(["float:",";padding:"," "," 0 0;"],"rtl"===document.dir?"left":"right",mi.fontSizeSmall,mi.spacingSmall),gn=dn.ZP.div.withConfig({displayName:"ReportTypeDetailSObjectListStyle__Clear",componentId:"sc-1jyatzq-3"})(["clear:both;"]);var mn=r(57715),_n=r(6039);const fn={name:"1w6srx5",styles:"display:grid;grid-template-columns:100%;grid-template-rows:100%;.asset-results-table .longTable .title{width:auto;}"};const yn=(0,gi.iv)("display:flex;padding:",mi.spacingSmall," 0;",fn," .illustrationWithInlineText{flex:1 1 0;figure{flex:1 1 0;min-height:0;display:flex;align-items:center;justify-content:center;.illustrationImage{max-height:100%;max-width:100%;height:auto;width:auto;}}.illustrationMessage{padding-top:",mi.spacingSmall,";flex:0 0 0;font-size:inherit;}}",""),bn=gi.F4`
  0%{ background-position: -468px 0; }
  100%{ background-position: 468px 0; }
`,Cn=(0,gi.iv)("border-radius:1rem;animation-duration:1.5s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-timing-function:linear;animation-name:",bn,";background:",mi.colorBackgroundStencil,";background:linear-gradient(\n\t\tto right,\n\t\t",mi.brandHeaderContrastInverseActive," 8%,\n\t\t",mi.colorBorderButtonDefault," 18%,\n\t\t",mi.brandHeaderContrastInverseActive," 33%\n\t);background-size:1000px 104px;",""),En={name:"1d6n01i",styles:"flex:1 1 0;position:relative"},Sn={name:"b74jp4",styles:"display:inline-block;width:100%;height:1rem;vertical-align:bottom"},Tn=(0,gi.iv)(Cn,";width:50%;height:5px;",""),In=(0,gi.iv)(Cn,";width:75%;height:0.25rem;margin-top:0.5rem;",""),vn=(0,gi.iv)("flex:1 1 0;position:relative;display:block;margin-top:",mi.spacingMedium,";",""),Rn=(0,gi.iv)("width:75%;margin-top:",mi.spacingMedium,";margin-left:",mi.spacingSmall,";position:relative;display:inline-block;",""),wn=(0,gi.iv)(Cn,";width:50%;height:0.25rem;",""),An=(0,gi.iv)(Cn,";width:25%;height:0.25rem;margin-top:",mi.spacingSmall,";",""),Dn=(0,gi.iv)(Cn,";display:inline-block;width:1.5rem;height:1.5rem;border-radius:4px;",""),Ln=(0,gi.iv)("flex:1 1 0;display:flex;flex-direction:column;justify-content:center;align-items:center;.error-icon{padding-bottom:",mi.spacingSmall,";}",""),Mn=(0,gi.iv)("flex:1 1 0;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:",mi.spacingSmall," 0;height:100%;",""),Nn=(0,gi.iv)("fill:",mi.colorGray8,";",""),On=(0,gi.iv)("padding-top:",mi.spacingSmall,";padding-bottom:",mi.spacingXSmall,";","");function Pn(){return(0,Bt.BX)("div",{className:"stencil",css:Sn,children:[(0,Bt.tZ)("div",{css:Tn}),(0,Bt.tZ)("div",{css:In}),(0,Bt.BX)("div",{css:vn,children:[(0,Bt.tZ)("div",{css:Dn}),(0,Bt.BX)("div",{css:Rn,children:[(0,Bt.tZ)("div",{css:wn}),(0,Bt.tZ)("div",{css:An})]})]}),(0,Bt.BX)("div",{css:vn,children:[(0,Bt.tZ)("div",{css:Dn}),(0,Bt.BX)("div",{css:Rn,children:[(0,Bt.tZ)("div",{css:wn}),(0,Bt.tZ)("div",{css:An})]})]}),(0,Bt.BX)("div",{css:vn,children:[(0,Bt.tZ)("div",{css:Dn}),(0,Bt.BX)("div",{css:Rn,children:[(0,Bt.tZ)("div",{css:wn}),(0,Bt.tZ)("div",{css:An})]})]})]})}function xn(e){const t=e.noDataMessage?e.noDataMessage:Le.Z.getLabel("CardState","noDataMessage"),r=e.illustrationPath?(0,Bt.tZ)(_n.Z,{message:t,illustrationPath:e.illustrationPath,illustrationClass:"noData"}):(0,Bt.BX)("div",{css:Mn,children:[(0,Bt.tZ)(wt.Z,{css:Nn,category:"utility",name:"help_center",size:"small"}),(0,Bt.tZ)("div",{css:On,children:t}),e.learnMoreURL&&(0,Bt.tZ)("a",{href:e.learnMoreURL,target:"_blank",rel:"noopener noreferrer",children:Le.Z.getLabel("CardState","learnMore")})]});return(0,Bt.BX)("div",{css:[yn,e.cssOverride,"",""],children:[e.isLoading&&!e.showStencil&&(0,Bt.tZ)("div",{css:En,children:(0,Bt.tZ)(mn.Z,{})}),e.isLoading&&e.showStencil&&(0,Bt.tZ)(Pn,{}),!e.isLoading&&e.showEmpty&&r,e.showError&&(0,Bt.BX)("div",{css:Ln,children:[(0,Bt.tZ)(wt.Z,{category:"utility",name:"ban",size:"small",containerClassName:"error-icon"}),e.errorMessage||Le.Z.getLabel("ErrorMsg","defaultErrorMsg")]})]})}r(97242);class Zn extends pt.PureComponent{static defaultProps={showObjects:!0,isCustomReportType:!1,isDataCloudReportType:!1,isCalculatedInsight:!1,objects:[]};descriptionRefs=[];getSnapshotBeforeUpdate(e){return _().isEqual(e.objects,this.props.objects)||(this.descriptionRefs=[]),!0}componentDidUpdate(e,t){}getJoinIcon(e,t){const r="INNER"===e?"join-inner":"join-left",i=.75*(t-1);let s;return s=R.Z.isRTL()?`0 ${i}rem 0 0`:`0 0 0 ${i}rem`,(0,Bt.tZ)(cn,{children:(0,Bt.tZ)("span",{ref:this.getDescriptionRefs,style:{margin:`${s}`},children:(0,Bt.tZ)("svg",{viewBox:"0 -9 100 100",className:"slds-button__icon slds-icon_large",children:(0,Bt.tZ)("use",{xlinkHref:`${Fr}#${r}`})})})})}_renderObjectList(){const e=[],t=[];let r="";for(let i=0;i<this.props.objects.length;i++){const s=this.props.objects[i];t.push(s.label);const n=this.props.isCustomReportType&&i?14-.75*(i-1)+"rem":"-webkit-fill-available",o=this.props.isCustomReportType&&i?11-.75*(i-1):15.75;this.props.isCustomReportType&&0!==i&&(r+=s.joinType[0]),e.push((0,Bt.BX)("div",{children:[this.props.isCustomReportType&&i?this.getJoinIcon(s.joinType,i):"",(0,Bt.tZ)(hn,{style:{width:`${n}`},children:(0,Bt.tZ)(un,{sObject:s,isSObject:!0,isDataCloudReportType:this.props.isDataCloudReportType,isCalculatedInsight:this.props.isCalculatedInsight,width:o})}),this.props.isCustomReportType&&i?this._renderTooltipInfo(t,r,i):"",(0,Bt.tZ)(gn,{})]},`ListItem ${i}`))}return e}_renderTooltipInfo(e,t,r){let i="joinInfo";return i+="OO"===t?"IO":"IOO"===t||"OOO"===t?"IIO":t,(0,Bt.tZ)(pn,{children:(0,Bt.tZ)(ci.Z,{content:Le.Z.getLabel("recommendedReportType",i,...e),align:"top left",onRequestTargetElement:this.getDescriptionRef.bind(this,r),hasStaticAlignment:!0,children:(0,Bt.tZ)(It.Z,{iconName:"info_alt",iconCategory:"utility",variant:"icon",size:"large"},"tooptip")})})}render(){const e=this._renderObjectList();return e.length>0?(0,Bt.BX)("div",{className:"report-details-field-list",children:[(0,Bt.tZ)("h3",{className:"report-details-field-label",children:Le.Z.getLabel("reportBuilder","objectsInReportType")}),(0,Bt.BX)("div",{className:"report-type-details-sobject",children:[" ",e," "]})]}):(0,Bt.BX)("div",{className:"report-details-field-list",children:[(0,Bt.tZ)("h3",{className:"report-details-field-label",children:Le.Z.getLabel("reportBuilder","objectsInReportType")}),(0,Bt.tZ)("div",{className:"report-type-details-sobject report-type-details-sobject-loader",children:(0,Bt.tZ)(xn,{noDataMessage:"No Message",isLoading:!0,showEmpty:!0,showStencil:!1})})]})}getDescriptionRefs=e=>{e&&(this.descriptionRefs?this.descriptionRefs.push(e):this.descriptionRefs=[e])};getDescriptionRef(e){return this.descriptionRefs?.length>=e?this.descriptionRefs[e-1]:null}}Zn.displayName="ReportTypeDetailSObjectList";const Fn={name:"1fttcpj",styles:"display:flex;flex-direction:column"},kn=(0,gi.iv)("flex:0 0 0;font-weight:",mi.fontWeightBold,";font-size:",mi.fontSizeHeadingSmall,";",""),Bn=(0,gi.iv)("margin-top:",mi.spacingXLarge,";",""),Wn=(0,gi.iv)("line-height:",mi.lineHeightText,";","");class Gn extends pt.Component{static defaultProps={showFields:!0,fields:[],heightCss:void 0};state={fieldList:[],searchTerm:"",showFields:!0,allFields:[],currentOffset:-20};_typeElements=[];LIMIT=20;observer=(0,pt.createRef)();_renderSearchInput(){const e=!_().isEmpty(this.state.searchTerm),t=Lt().classSet({"slds-button":!0,"slds-button_icon":!0,"slds-input__icon":!0,"slds-input__icon_right":!0,"report-details-clear-field-search":!0,"slds-hide":!e}),r=(0,Bt.tZ)(It.Z,{onClick:this._onClearSearch,className:t,iconName:"clear",iconCategory:"utility",iconVariant:"bare",variant:"icon",assistiveText:{icon:Le.Z.getLabel("reportBuilder","clear")},onKeyDown:e?this._onSearchKeyDown:void 0,buttonRef:this._getClearButtonRef});return(0,Bt.tZ)(vt.Z,{id:"report-details-field-search-input",placeholder:Le.Z.getLabel("reportBuilder","fieldLookup"),assistiveText:{label:Le.Z.getLabel("reportBuilder","fieldLookup")},onChange:this._onSearchInputChange,type:"search",className:"report-details-field-search",iconLeft:(0,Bt.tZ)(Rt.Z,{category:"utility",name:"search"}),iconRight:r,value:this.state.searchTerm,inputRef:this._getSearchRef,onKeyDown:e?void 0:this._onSearchKeyDown,autoComplete:"off"})}_renderFieldList(){const e=[],t=this.state.currentOffset;for(let r=0;r<Math.min(this.state.fieldList.length,t+this.LIMIT);r++){const t=this.state.fieldList[r],i="ListItem-"+r;e.push((0,Bt.tZ)(un,{field:t,isSObject:!1},i))}return e}_showLoader(){return this.state.currentOffset+this.LIMIT<this.state.fieldList.length}_renderLoader(){return this._showLoader()?(0,Bt.tZ)("div",{ref:this.loaderRef,className:"report-details-field-list-viewmore",css:Bn,children:(0,Bt.tZ)(xn,{noDataMessage:"No Message",isLoading:!0,showEmpty:!0,showStencil:!1})}):(0,Bt.tZ)("div",{})}loaderRef=e=>{this.observer.current&&this.observer.current.disconnect(),this.observer.current=new IntersectionObserver((e=>{e[0].isIntersecting&&this.setState({currentOffset:this.state.currentOffset+this.LIMIT})})),e&&this.observer.current.observe(e)};_onSearchInputChange=e=>{const t=_().get(e,"target.value");if(this._typeElements=[],_().isEmpty(t))this._onClearSearch();else{const e=this.state.allFields.filter((e=>-1!==e.getLabel().toLowerCase().indexOf(t.toLowerCase())));this.setState({fieldList:e,searchTerm:t,currentOffset:0})}};_onClearSearch=()=>{this.setState({fieldList:this.state.allFields,searchTerm:"",currentOffset:0}),this._searchBox&&this._searchBox.focus()};_onSearchKeyDown=e=>{this._shouldTabInto(e)&&!e.shiftKey&&(Ot().trap(e),this._typeElements[0].focus())};_shouldTabInto(e){return e.keyCode===Mt.KEY_CODE_TAB&&this._typeElements[0]}_getSearchRef=e=>{e&&(this._searchBox=e)};_getClearButtonRef=e=>{e&&(this._clearButton=e)};componentDidMount(){this.setState({fieldList:this.props.fields,allFields:this.props.fields})}componentDidUpdate(e){this.props.fields!==e.fields&&this.setState({fieldList:this.props.fields,allFields:this.props.fields,searchTerm:"",currentOffset:-20}),this.props.tabIndex!==e.tabIndex&&(1===this.props.tabIndex&&this.props.fields.length&&(Zt.Z.transactionStart(Ft.Z.REPORT_TYPE_FIELD_PANEL.getValue()),Zt.Z.transactionEnd(Ft.Z.REPORT_TYPE_FIELD_PANEL.getValue())),this.state.currentOffset&&this.setState({currentOffset:0}),1===this.props.tabIndex&&document.getElementsByClassName("report-type-details-fields-scroll")[0]?.firstElementChild?.scrollIntoView({block:"end",inline:"nearest"}))}render(){if(this.props.fields.length){const e=this._renderSearchInput(),t=this._renderFieldList(),r=this._renderLoader();return(0,Bt.BX)("div",{className:"report-details-field-list",children:[e,(0,Bt.BX)("div",{css:this.props.heightCss,className:"report-type-details-fields-scroll",children:[t,r]})]})}return(0,Bt.tZ)("div",{css:Bn,children:(0,Bt.tZ)(xn,{noDataMessage:"No Message",isLoading:!0,showEmpty:!0,showStencil:!1})})}}Gn.displayName="ReportTypeDetailsFieldList";var Un=r(60873);function Hn(e,t){return function(e){return e.getVisibility()===Un.Z.LIMITED}(t)?(0,Bt.tZ)("div",{className:"limited","data-tooltip":Le.Z.getLabel("LimitedAssetAccess","iconTooltip"),children:e}):e}const Vn=r.p+"images/LightningReport/static/images/icons/report_type.fb93b610c51607e576fc.svg";function jn(e){if(e.assetShortDescriptionProvider){const t=e.assetShortDescriptionProvider(e.asset);if(null!=t)return(0,Bt.tZ)("div",{className:"asset-info-desc slds-truncate",children:t})}return(0,Bt.tZ)("div",{className:"asset-info-desc slds-truncate",children:e.children})}function qn({asset:e,title:t=e.getLabel(),assetShortDescriptionProvider:r,_actionHandler:i,isActionDisabled:s=e.isHidden(),menuDropdownItems:n,_menuDropdownhandler:o,isAddBlock:a=!1,addBlockRenderer:l,isJoinable:u}){let d=e.isCustomReportType()?Le.Z.getLabel("reportBuilder","customReportType"):Le.Z.getLabel("reportBuilder","standardReportType");e.isSemanticModel()&&(d=Le.Z.getLabel("reportBuilder","reportCategorySemanticDataModel"));const c=e.isDataCloudReportType(),h=Le.Z.getLabel("reportBuilder",a?"addBlock":"startReport"),p=a?"relate":"";let g=(0,Bt.tZ)("div",{});a||(g=(0,Bt.tZ)("div",{className:"asset-action-drop-down",children:n.length?(0,Bt.tZ)(ks.Z,{iconCategory:"utility",iconName:"down",iconSize:"medium",iconVariant:"border-filled",width:"xx-small",align:"right",options:Ws(n,e.isSemanticModel()),onSelect:t=>o(e,t)}):null}));const m=a?s||!u:s;return(0,Bt.BX)("div",{className:"asset-header-card recommended-report-type-detail-header",children:[(0,Bt.tZ)("div",{className:"asset-box",children:(0,Bt.BX)("div",{className:"asset-info",children:[Hn((e=>{const t=e?"slds-icon_large":"slds-icon_medium";return(0,Bt.tZ)("div",{className:`asset-info-icon slds-icon_container slds-icon-standard-resource-skill slds-icon ${t}`,children:(0,Bt.tZ)("img",{src:Vn,alt:""})})})(c),e),(0,Bt.BX)("div",{className:"asset-info-details",children:[(0,Bt.tZ)(ci.Z,{content:t,align:"top right",hasStaticAlignment:!0,children:(0,Bt.tZ)("h3",{tabIndex:"0",className:"asset-info-header slds-truncate",children:t})}),(0,Bt.tZ)(jn,{assetShortDescriptionProvider:r||null,asset:e,children:d}),(t=>{if(!t)return null;const i=e.dataSpace?Le.Z.getLabel("reportBuilder","dataSpace",e.dataSpace):"";return(0,Bt.tZ)(jn,{assetShortDescriptionProvider:r||null,asset:e,children:i})})(c)]})]})}),l(),(0,Bt.BX)("div",{className:"asset-actions",children:[(0,Bt.tZ)(It.Z,{className:"asset-action-button",label:h,iconCategory:a?"utility":void 0,iconName:a?p:void 0,iconPosition:"left",variant:"brand",onClick:()=>{i(e.getReportType())},disabled:m,id:"start-report-btn"},"continue"),g]})]})}var zn=r(51560),$n=r(3423),Qn=r(42816);var Yn=r(62652),Kn=r(45772),Jn=r(95044);class Xn extends we.Z{}["primary","secondary"].forEach((e=>{Xn.add(e.toUpperCase(),e,new Xn)})),Xn.finish();class eo extends we.Z{constructor({section:e,icon:t,assetPreviewLimit:r,onHomeTab:i=!1,isStatic:s=!1,scope:n,isHidden:o=!1,experiencePopoverName:a,experiencePopoverHelpArticle:l,permissions:u,label:d}){super(),this.icon=t,this.assetPreviewLimit=r,this.section=e,this.isStatic=s,this.onHomeTab=i,this.scope=n,this.isHidden=o,this.experiencePopoverName=a,this.experiencePopoverHelpArticle=l,this._permissions=u,this._label=d}static getDefaultValue(){return this.HOME}get label(){return this._label||Le.Z.getLabel("FinderLeftNavItem",this.code)}canAccess(){let e=!0;return this._permissions?.forEach((t=>{e=e&&yt.Z.has(t)})),!this.isStatic&&e}static fromScope(e){return Jn.Z.fromCode(e)}static fromCollectionScope(e){switch(e){case Jn.Z.BROWSE:return eo.BROWSE;case Jn.Z.FAVORITES:return eo.FAVORITES;default:throw new Error(`cannot find left nav item for scope: ${e.code}`)}}}eo.add("HOME",$e.HOME,new eo({section:Xn.PRIMARY,isHidden:!1,assetPreviewLimit:5})).add("BROWSE",$e.BROWSE,new eo({section:Xn.PRIMARY,scope:Jn.Z.BROWSE,assetPreviewLimit:4,isHidden:!1})).add("FAVORITES",$e.FAVORITES,new eo({section:Xn.PRIMARY,onHomeTab:!0,scope:Jn.Z.FAVORITES,assetPreviewLimit:5,isHidden:!1,permissions:[yt.Z.ORG_HAS_FAVORITES]})).add("CREATED_BY_ME",$e.CREATED_BY_ME,new eo({section:Xn.PRIMARY,scope:Jn.Z.CREATED_BY_ME,label:Le.Z.getLabel("FinderLeftNavItem","browse"),isHidden:!0})).add("SHARED_WITH_ME",$e.SHARED_WITH_ME,new eo({section:Xn.PRIMARY,scope:Jn.Z.SHARED_WITH_ME,label:Le.Z.getLabel("FinderLeftNavItem","browse"),isHidden:!0})).add("NOTIFICATIONS",$e.NOTIFICATIONS,new eo({section:Xn.SECONDARY,isHidden:!1,permissions:[yt.Z.USER_CAN_USE_INSIGHTS]})).add("SUBSCRIPTIONS",$e.SUBSCRIPTIONS,new eo({section:Xn.SECONDARY,isHidden:!1,experiencePopoverName:"subscription-preview-popover",experiencePopoverHelpArticle:Kn.Z.SUBSCRIPTIONS,permissions:[yt.Z.USER_CAN_USE_SUBSCRIPTION_EMAILS,yt.Z.USER_CAN_USE_INSIGHTS]})).add("WATCHLIST",$e.WATCHLIST,new eo({section:Xn.SECONDARY,onHomeTab:!0,isHidden:!1,permissions:[yt.Z.ORG_HAS_WATCHLIST_ENABLED,yt.Z.USER_CAN_USE_INSIGHTS]})).add("LEARN",$e.LEARNING_CENTER,new eo({section:Xn.SECONDARY,isStatic:!0,isHidden:!0,permissions:[yt.Z.ORG_HAS_INACCESSIBLE_HELP_RESOURCE,yt.Z.USER_CAN_USE_INSIGHTS]})).add("CREATE_APP","templates",new eo({section:Xn.SECONDARY,isStatic:!0,isHidden:!1,permissions:[yt.Z.USER_CAN_USE_INSIGHTS]})).add("COLLECTIONS",$e.COLLECTION,new eo({section:Xn.PRIMARY,icon:"collections",onHomeTab:!0,isHidden:!0,permissions:[yt.Z.USER_CAN_USE_INSIGHTS]})).add("WATCH",$e.WATCH,new eo({section:Xn.SECONDARY,isStatic:!0,isHidden:!0,permissions:[yt.Z.ORG_HAS_WATCH_ENABLED,yt.Z.USER_HAS_WATCH_ENABLED]})).finish();var to=r(94184),ro=r.n(to);const io=new Set(["4g"]);function so({route:e,children:t,className:r,target:i,onClick:s,onBeforeClick:n,tabIndex:o,hrefOverride:a,disableHref:l}){const{router:u}=(0,pt.useContext)(L.Z),d=u.buildPath("string"==typeof e?e:e.getPath()),c=(0,pt.useCallback)((t=>{t.defaultPrevented||(t.preventDefault(),n&&!n()||(s&&s(t),u.route(e,t.metaKey||t.ctrlKey?{newWindow:!0}:{})))}),[u,e,s,n]),h=(0,pt.useCallback)((e=>{e.defaultPrevented||(e.preventDefault(),u.preloadCode(d))}),[u,d]),p=null!=window.navigator.connection&&io.has(window.navigator.connection.effectiveType)&&!window.navigator.connection.saveData,g=a||d;return(0,Bt.tZ)("a",{href:l?void 0:g,onClick:"_blank"!==i?c:void 0,onMouseEnter:p?h:void 0,className:r,target:i,tabIndex:o||void 0,children:t})}var no=r(4459);const oo=(0,pt.createContext)({scrollContainer:null,state:null});var ao=r(45131);const lo=(0,pt.createContext)({namespace:ao.Z.HOME});var uo=r(69008),co=r(84938);class ho extends Ye.Z{constructor(e){super(),this.label=e}getLabel(){return this.label.toString()}}ho.add("COLLECTION_SEARCH",new ho("Collection Search")).add("COLLECTION_PAGE",new ho("Collection Page")).add("APP_HOME",new ho("App Home")).add("SEARCH",new ho("Search")).add("LEFT_NAV",new ho("Left Nav")).add("ASSET",new ho("Asset")).add("PINNED_COLLECTION",new ho("Pinned Collection")).add("URL",new ho("Url")).add("SUBSCRIPTIONS",new ho("Subscriptions")).add("ADD_TO_COLLECTION_MODAL",new ho("Add to Collection Modal")).add("ASSET_RUNTIME",new ho("Asset Runtime")).add("SHARE_MODAL",new ho("Share Modal")).add("MANAGE_COLLECTION_MODAL",new ho("Manage Collection Modal")).finish();class po extends Ye.Z{}po.add("ADMIN",new po).add("BUILDER",new po).add("VIEWER",new po).finish();const go=()=>l.Z.get(u).getAppUser().isAdmin()?po.ADMIN:yt.Z.has(yt.Z.USER_CAN_EDIT_DASHBOARD)||yt.Z.has(yt.Z.USER_CAN_CREATE_INSIGHTS_APPLICATION)?po.BUILDER:po.VIEWER;class mo{constructor(e,t,r,i){this._appInstanceId=e,this._selectedListTabName=t,this._selectedAssetTypeName=r,this._folderId=i}logHomeAssetNavigationSearch(e,t,r){const i=no.rd({isEmbedded:r}).map((e=>e.code)),s=(0,m.isEmpty)(t)?this._selectedAssetTypeName?[this._selectedAssetTypeName]:[]:(0,m.sortBy)(t.getAssetTypeFilter().getFilterJson().value),n=(0,Vt.sameElements)(i,s)||(0,m.isEmpty)(s)?no.x5:s.join(","),o=(0,m.isEmpty)(e)?"ASSET_NAVIGATION_BROWSE":"ASSET_NAVIGATION_SEARCH";return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.HOME,"assetNavigationCount",1,{categories:["NAVIGATION",o],appInstanceId:this._appInstanceId,deprecatedContext:n,deprecatedSubRouteOverride:this._getDeprecatedSubRouteOverride()})),this}logHomeAssetNavigationBrowse(e,t,r){return l.Z.get(v.Z).trigger(new uo.Z(e||ao.Z.HOME,"homeAssetNavigationCount",1,{categories:[t,r.getCode()],appInstanceId:this._appInstanceId})),this}logHomeRecentSearch(){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.SEARCH_TYPEAHEAD,"recentSearchCount",1,{categories:["RECENT_SEARCH"],appInstanceId:this._appInstanceId})),this}logHomeSuggestedContentDetails(e,t,r,i){return l.Z.get(v.Z).trigger(new uo.Z(t||ao.Z.HOME,e,i,{type:co.Z.LAST,categories:[r],appInstanceId:this._appInstanceId})),this}logHomeYourAnalyticsDetails(e,t,r,i,s){return l.Z.get(v.Z).trigger(new uo.Z(t||ao.Z.HOME,e,i,{type:co.Z.LAST,categories:[r,s.toString()],appInstanceId:this._appInstanceId})),this}logTabNavigation(e,t,r){let i="";return"LIST_NAVIGATION"===e?i="listNavigation":"ASSET_TYPE_NAVIGATION"===e&&(i="assetTypeNavigation"),l.Z.get(v.Z).trigger(new uo.Z(ao.Z.HOME,`${i}Count`,1,{type:co.Z.AGGREGATE,categories:[e],appInstanceId:this._appInstanceId,deprecatedContext:this._selectedAssetTypeName,deprecatedSubRouteOverride:this._getDeprecatedSubRouteOverride()})),this}logPinnedAppMigration(){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.HOME,"pinnedAppMigrationCount",1,{type:co.Z.FIRST,categories:["favorites","PIN_APP_MIGRATION"],appInstanceId:this._appInstanceId,deprecatedSubRouteOverride:this._getDeprecatedSubRouteOverride()})),this}logAdvancedSearchPanelShown(){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.HOME,"advancedSearchPanelShownCount",1,{type:co.Z.AGGREGATE,categories:["SEARCH","ADVANCED_SEARCH_PANEL_SHOWN"],appInstanceId:this._appInstanceId,deprecatedSubRouteOverride:this._getDeprecatedSubRouteOverride()})),this}logAssetFavorited(e,t=!0){const r=t?"favoriteAsset":"unfavoriteAsset",i=t?"FAVORITE_ASSET":"UNFAVORITE_ASSET";return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.HOME,`${r}Count`,1,{categories:["favorites",i],appInstanceId:this._appInstanceId,deprecatedContext:e.getCode(),deprecatedSubRouteOverride:this._getDeprecatedSubRouteOverride()})),this}logAdvancedSearchPanelFilterField(e){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.HOME,"advancedSearchPanelFilterFieldCount",1,{categories:["SEARCH","ADVANCED_SEARCH_PANEL_FILTER_FIELD"],appInstanceId:this._appInstanceId,deprecatedContext:e.code,deprecatedSubRouteOverride:this._getDeprecatedSubRouteOverride()})),this}logToggleListView(e){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.HOME,"toggleListViewToggleView",1,{categories:["TOGGLE_LIST_VIEW"],appInstanceId:this._appInstanceId,deprecatedContext:e,deprecatedSubRouteOverride:this._getDeprecatedSubRouteOverride()})),this}logWatchlistItemChanged(e){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.WATCHLIST,`watchlistItem${(0,hi.capitalizeFirst)(e.code)}Count`,1,{categories:["WATCHLIST_ITEM"],appInstanceId:this._appInstanceId,deprecatedSubRouteOverride:"watchlist"})),this}logAssetVisibilityChanged(e,t){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.HOME,`limitedVisibility${(0,hi.capitalizeFirst)(e.code)}Count`,1,{categories:["LIMITED_VISIBILITY",t.toUpperCase()],appInstanceId:this._appInstanceId})),this}logCreateCollection(e){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"Create",1,{categories:[e.getLabel(),go().name],appInstanceId:this._appInstanceId})),this}logEditCollection(e,t,r){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"Edit",1,{categories:[String(e),String(t),String(r)],appInstanceId:this._appInstanceId})),this}logCollectionVisibility(e,t){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"Visibility Changed",t,{categories:[go().name,e?"Hidden":"Visible"],appInstanceId:this._appInstanceId})),this}logPinnedCollection(e,t,r){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"Pin Changed",r,{categories:[go().name,t.getLabel(),e?"Pinned":"Unpinned"],appInstanceId:this._appInstanceId})),this}logDeleteCollection(){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"Delete",1,{appInstanceId:this._appInstanceId})),this}logViewCollection(e,t,r,i,s){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"View",i,{categories:[e.name,t,String(r),s.getLabel()],appInstanceId:this._appInstanceId})),this}logViewAllCollections(e,t,r){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"ViewCount",e,{categories:[go().name,this._getBucketsForCollectionViewCount(t),this._getBucketsForCollectionViewCount(r)],appInstanceId:this._appInstanceId})),this}logSortCollectionItems(e){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"SortItems",1,{categories:[e.name,go().name],appInstanceId:this._appInstanceId})),this}logAddCollectionItems(e,t,r,i){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"AddItems",i,{categories:[e.name,go().name,t===ho.ASSET_RUNTIME?"Dashboard View":r.getCode(),t?.label??""],appInstanceId:this._appInstanceId})),this}logRemoveCollectionItems(e,t,r,i){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.COLLECTION,"RemoveItems",i,{categories:[e.name,go().name,r.getCode(),t.getLabel()],appInstanceId:this._appInstanceId})),this}logViewEmbeddedHomeCollection(e,t,r,i){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.EMBEDDED_HOME_COLLECTION,"View",i,{categories:[e.name,String(t),String(r)],appInstanceId:this._appInstanceId})),this}logEmbeddedHomeCollectionAssetClick(e,t){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.EMBEDDED_HOME_COLLECTION,"AssetSelected",1,{categories:[e.name,t.getType().getCode()],appInstanceId:this._appInstanceId})),this}logEmbeddedHomeCollectionViewAllSelected(e){return l.Z.get(v.Z).trigger(new uo.Z(ao.Z.EMBEDDED_HOME_COLLECTION,"ViewAll",1,{categories:[e.name],appInstanceId:this._appInstanceId})),this}_getDeprecatedSubRouteOverride(){return this._folderId?"appHome":this._selectedListTabName?this._selectedListTabName.code:"home"}_getBucketsForCollectionViewCount(e){return e<=1?String(e):e<=5?"2-5":e<=10?"6-10":e<=20?"11-20":"21+"}}const _o=(0,pt.createContext)({sectionName:""}),fo="analyticsTab",yo="&analyticsContext=";var bo=r(97441),Co=r(13652);class Eo extends Co.Z{static getDefaultValue(){return Eo.VIEW}}function So(e,t,r,i){const s=e.getType()instanceof or.Z?e.getType():or.Z.fromCode(e.getType());switch(s){case or.Z.FOLDER:{const t=e.getFeaturedAssets();return r?(0,m.isEmpty)(t)?function(e,t,r){return Ro(e,t,r,Eo.VIEW.code)}(e.getId(),r,i):wo(e.getId(),t.default.assets,r,i):vo(e.getId(),r,i)}case or.Z.DATASET:return new Ct.Z({baseRoute:(0,$e.getBaseRoute)(or.Z.LENS),instanceId:j.Z.consumeUniqueId("new"),extendedHash:(0,bo.JI)(or.Z.DATASET,e.getId())});case or.Z.LIGHTNING_REPORT_FOLDER:return(0,$e.buildPath)($e.HOME,$e.REPORT_FOLDER,e.getId());case or.Z.LIGHTNING_DASHBOARD_FOLDER:return(0,$e.buildPath)($e.HOME,$e.LIGHTNING_DASHBOARD_FOLDER,e.getId());case or.Z.REPORT_TYPE:return function(e){const t=new Map;return t.set("reportType",e.getName()),new Ct.Z({baseRoute:e.getType().getCode(),extendedHash:"edit",instanceId:j.Z.consumeUniqueId("new"),queryParams:t})}(e);case or.Z.DASHBOARD_SAVED_VIEW:return new Ct.Z({baseRoute:$e.DASHBOARD,instanceId:e.getUrl().split("assetId=")[1].split("&")[0],options:{sourceTarget:i},queryParams:(new Map).set("savedViewId",e.getId())});case or.Z.COMPONENT:return()=>{t.route(new Ct.Z({baseRoute:e.getType().getCode(),instanceId:e.getId(),extendedHash:"edit"}),{newWindow:r})};case or.Z.REPORT:{const r=Io(e,s,i);return To(t)&&r.setExtendedHash(Eo.VIEW.code),r}default:return Io(e,s,i)}}function To(e){return"/lightning/r"===e._rootPath}function Io(e,t,r){return new Ct.Z({baseRoute:t.getCode(),instanceId:e.getId(),options:{sourceTarget:r}})}function vo(e,t,r){return Ro(e,t,r,Eo.EDIT.code)}function Ro(e,t,r,i){return t?new Ct.Z({baseRoute:$e.HOME,instanceId:$e.APPLICATION,extendedHash:`${e}`+(i?`/${i}`:""),options:{sourceTarget:r}}):new Ct.Z({baseRoute:$e.APPLICATION,instanceId:e,extendedHash:i,options:{sourceTarget:r}})}function wo(e,t,r,i){return(0,m.isEmpty)(t)?vo(e,r,i):new Ct.Z({baseRoute:t[0].type,instanceId:t[0].id,extendedHash:Eo.VIEW.code,options:{sourceTarget:i}})}Eo.add("VIEW","view",new Eo).add("EDIT","edit",new Eo).add("PRESENT","present",new Eo).finish();var Ao={name:"121h2dv",styles:"width:100%;overflow:hidden;text-overflow:ellipsis"};function Do({asset:e,isEmbedded:t,onAssetSelected:r,children:i,className:s,target:n="_self"}){const o=Ao,{router:a}=(0,pt.useContext)(L.Z),{state:l}=(0,pt.useContext)(oo),{namespace:u}=(0,pt.useContext)(lo),{sectionName:d}=(0,pt.useContext)(_o),c=(0,pt.useCallback)((()=>{if(!l)return void r?.(void 0,e);const t=new mo(void 0,l.getLeftNavItem(),no.x5,l.getFolderId());let i;if(l.getSearchTerm())t.logHomeAssetNavigationSearch(l.getSearchTerm(),void 0,l.getIsEmbedded());else{let r;r=e instanceof Rs()?e.getType():or.Z.fromCode(e.getType()),i=new Ct.Z({baseRoute:r.getCode(),instanceId:e.getId()}),t.logHomeAssetNavigationBrowse(u,d,r)}r&&i&&r(i,e)}),[l,u,d,e,r]),h=i??e.getLabel(),p=(0,pt.useMemo)((()=>So(e,a,t,l?.getSourceTarget())),[e,a,t,l]),{disableHref:g,hrefOverride:m}=(0,pt.useMemo)((()=>function(e,t,r){let i,s=!1;if(To(t)||!r)return{disableHref:s,hrefOverride:i};const n=e.getType()instanceof or.Z?e.getType():or.Z.fromCode(e.getType());switch(e.getAssetSharingUrl()&&(i=e.getAssetSharingUrl()+yo+fo),n){case or.Z.LIGHTNING_REPORT_FOLDER:case or.Z.LIGHTNING_DASHBOARD_FOLDER:case or.Z.REPORT:case or.Z.LIGHTNING_DASHBOARD:i||(s=!0)}return{disableHref:s,hrefOverride:i}}(e,a,t)),[e,a,t]),_="function"!=typeof p?(0,Bt.tZ)(so,{route:p,className:ro()("asset-link",s),target:n,hrefOverride:m,disableHref:g,children:h}):(0,Bt.tZ)("a",{onClick:p,className:ro()("asset-link",s),target:n,children:h});return(0,Bt.tZ)("span",{className:"asset-link-wrapper",css:o,onClick:c,"data-tooltip":e.getLabel(),children:_})}r(17192);const Lo=(0,pt.createContext)((e=>{})),Mo=10;function No(e){const[t,r]=(0,pt.useState)([]),[i,s]=(0,pt.useState)(void 0),[n,o]=(0,pt.useState)(void 0),{addNotification:a}=(0,pt.useContext)($n.u),{router:l}=(0,pt.useContext)(L.Z),{state:u}=(0,pt.useContext)(oo),d=(0,pt.useContext)(Lo),c=(0,pt.useCallback)((async()=>{const t=e.delegate.getOptions(),i=await e.delegate.getAsyncOptions(),s=e.delegate.sortOptions([...t,...i]);r(s)}),[e.delegate]),h=(0,pt.useCallback)((async e=>{void 0!==e?.node&&s(e.node),e?.notification&&o(a(e.notification))}),[a]),p=()=>{s(void 0)},g=e.delegate.asset;return(0,Bt.BX)("div",{className:"asset-menu-dropdown",children:[i,n,(0,Bt.tZ)(ks.Z,{assistiveText:{icon:Le.Z.getLabel("InsightsAssetTile","openActionsMenu",g.getLabel(),g.getType().getSingularLabel())},label:Le.Z.getLabel("InsightsAssetTile","showMoreActions"),iconCategory:"utility",iconName:"down",iconSize:"x-small",iconVariant:"border-filled",width:"x-small",options:t,length:e.length??Mo,onOpen:c,onSelect:async t=>{t.requiresAssetMenuContext&&d&&d(g),await h(await e.delegate.handleMenuItemSelected(t,p,l,u)),e.onMenuAction&&e.onMenuAction(t)}})]})}const Oo="slds-col slds-small-size_6-of-12 slds-medium-size_4-of-12 slds-large-size_3-of-12";function Po(e){if(e.assetShortDescriptionProvider){const t=e.assetShortDescriptionProvider(e.asset);if(null!=t)return(0,Bt.tZ)("div",{className:"asset-app-info slds-truncate",children:t})}return(0,Bt.tZ)("div",{className:"asset-app-info slds-truncate",children:e.children})}function xo({asset:e,section:t,isEmbedded:r,isVertical:i,assetShortDescriptionProvider:s,extraShortDescriptionProvider:n,onAssetSelected:o,dropdownFactory:a,onMenuAction:l,usageTracker:u,shouldOpenInNewTab:d,children:c,isCompactDisplay:h=!0}){const p=(0,pt.useContext)(bt.Z),{addNotification:g}=(0,pt.useContext)($n.u),m=Lt().classSet({"asset-card":!0,[Oo]:!i}),_=Lt().classSet({"asset-box":!0,"slds-box":!i});let f,y;if(t===eo.BROWSE||e.collectionItemId||(f=Le.Z.getLabel("HomeCard",e.getType().getTypeLabelName())),[or.Z.REPORT,or.Z.LIGHTNING_DASHBOARD].includes(e.getType())){const t=(new zn.Z).fromJson(e.getJson());y=t.getLightningFolder()}else e.getType()!==or.Z.FOLDER&&(y=e instanceof Rs()&&e.getFolder()?new Yn.Folder(e.getFolder().getJson()):e.getFolder());const b=e.getType()===or.Z.FOLDER&&e.isUserPrivateAsset();let C,E,S;if(null==y||b||(C=f?Le.Z.getLabel("HomeCard","in").toLowerCase():Le.Z.getLabel("HomeCard","in"),E=function(e,t){return null!=e&&e.getId()?t===or.Z.LIGHTNING_DASHBOARD&&e.getId().startsWith(ln.Z.USER.idPrefix)?Le.Z.getLabel("AssetLongTableAssetType","privateDashboards"):[or.Z.LIGHTNING_DASHBOARD,or.Z.REPORT].includes(t)?e.getLabel():(0,Qn.Z)(e):""}(y,e.getType())),t===eo.BROWSE){const t=e.getType()===or.Z.STORY?e.getLastModifiedDate():new Date(e.getLastAccessedDate()),r=Math.floor(((new Date).getTime()-t.getTime())/864e5);S=0===r?" ("+Le.Z.getLabel("HomeCard","today")+")":" ("+r+" "+Le.Z.getLabel("HomeCard","days")+")"}const T=(0,pt.useCallback)((()=>Hn((0,Bt.tZ)("div",{className:"asset-info-icon",children:(0,Bt.tZ)(wt.Z,{name:e.getType().getSldsIconCode(),category:e.getType().getSldsIconCategory(),size:"medium",path:e.getType().getSldsIconPath(),containerStyle:{backgroundColor:e.getType().getIconBgColor()}})}),e)),[e]),I=(0,pt.useCallback)((()=>(0,Bt.tZ)("div",{className:"asset-action-drop-down",children:a?(0,Bt.tZ)(No,{delegate:a.getDelegate(e,r,p?.messageHandler,u,g),onMenuAction:l}):null})),[a,p,e,r,u,l,g]),v=(0,pt.useCallback)((()=>(0,Bt.BX)("div",{className:"asset-info-details",children:[(0,Bt.tZ)(Do,{asset:e,isEmbedded:r,className:"asset-name slds-truncate",onAssetSelected:o,target:d?"_blank":"_self"}),(0,Bt.BX)(Po,{assetShortDescriptionProvider:s||null,asset:e,children:[f,C,null!=y&&(0,Bt.tZ)(Do,{asset:y,isEmbedded:r,className:"asset-app-name",onAssetSelected:o,children:E}),S]}),n&&(0,Bt.tZ)("div",{className:"asset-app-extra-info",children:(0,Bt.tZ)(Po,{assetShortDescriptionProvider:n,asset:e})})]})),[e,r,o,d,s,f,C,y,E,S,n]);return(0,Bt.tZ)("div",{className:m,children:(0,Bt.BX)("div",{className:_,children:[null!=c&&(0,Bt.tZ)(Do,{asset:e,isEmbedded:r,onAssetSelected:o,children:c}),h?(0,Bt.BX)("div",{className:"asset-info",children:[T(),v(),I()]}):(0,Bt.BX)("div",{children:[(0,Bt.BX)("div",{className:"asset-info asset-info-top",children:[T(),I()]}),(0,Bt.tZ)("div",{className:"asset-info asset-info-bottom",children:v()})]})]})})}class Zo extends pt.Component{constructor(e){super(e)}redirectToReport(e){l.Z.get(g()).navigateToSObject(e?.getId())}render(){const e=this.props.loading,t=!e&&this.props.assets.length>0,r=!e&&0===this.props.assets.length,i=l.Z.get(d()).isOnConsole();return(0,Bt.BX)("div",{className:"suggested-content",children:[(0,Bt.tZ)("h3",{css:kn,children:this.props.header}),(0,Bt.BX)("div",{css:[Fn,"",""],children:[e&&(0,Bt.tZ)("div",{css:Bn,children:(0,Bt.tZ)(xn,{noDataMessage:"No Message",isLoading:!0,showEmpty:!0,showStencil:!1})}),t&&this.props.assets.slice(0,this.props.limit).map((e=>(0,Bt.tZ)("div",{className:"report-type-details-asset-box",children:(0,Bt.tZ)(xo,{asset:e,section:eo.HOME,isEmbedded:!1,isVertical:!0,assetShortDescriptionProvider:this.props.assetShortDescriptionProvider,extraShortDescriptionProvider:this.props.extraShortDescriptionProvider,onAssetSelected:i?this.redirectToReport.bind(this,e):void 0,shouldOpenInNewTab:!i},e.getId())},e.getId()))),r&&(0,Bt.tZ)("div",{css:Wn,className:"no-report",children:Le.Z.getLabel("reportBuilder","noReportsYet")})]})]})}}function Fo(e,t=new Date){return e?(0,Bt.tZ)(Bt.HY,{children:(0,Bt.tZ)("div",{className:"slds-text-body_small",children:Le.Z.getLabel("CustomAssetLabelProvider","createdBy",e.getCreatedBy().name)})}):null}function ko(e,t=new Date){let r=null;return e&&e.getLastRunDate()?(r=new Date(e.getLastRunDate()),(0,Bt.tZ)(Bt.HY,{children:Le.Z.getLabel("reportBuilder","lastUsed",(0,fe.formatDateInZone)(r,fe.DATE_SHORT))})):null}class Bo extends pt.Component{LIMIT=3;constructor(e){super(e),this.state={offset:0,loadingReportForYou:!0,loadingReportForOthers:!0,currentUserReports:[],otherUserReports:[]}}getReportsListAsync(e,t){const r=new zn.Z;h.Z.getRecentlyCreatedReportsUsingReportType(this.props.reportType?.getReportType(),e,this.LIMIT,t).then((t=>{const i=[];t.map((e=>{e.type="report",e.createdBy={name:e.createdByUser},e.label=e.name;const t=r.fromJson(e);return i.push(t),t})),e?this.setState({currentUserReports:i,loadingReportForYou:!1}):this.setState({otherUserReports:i,loadingReportForOthers:!1})}))}render(){return(0,Bt.BX)("div",{className:"report-type-details",children:[(0,Bt.tZ)("div",{className:"createdByYou",children:(0,Bt.tZ)(Zo,{assets:this.state.currentUserReports,limit:this.LIMIT,assetShortDescriptionProvider:ko,header:Le.Z.getLabel("reportBuilder","createdByYou"),loading:this.state.loadingReportForYou})}),(0,Bt.tZ)("div",{className:"createdByOthers",children:(0,Bt.tZ)(Zo,{assets:this.state.otherUserReports,limit:this.LIMIT,assetShortDescriptionProvider:Fo,extraShortDescriptionProvider:ko,header:Le.Z.getLabel("reportBuilder","createdByOthers"),loading:this.state.loadingReportForOthers})})]})}componentDidMount(){this.getReportsListAsync(!0,0),this.getReportsListAsync(!1,0)}componentDidUpdate(e){e.reportType!==this.props.reportType&&(this.setState({currentUserReports:[],otherUserReports:[],loadingReportForYou:!0,loadingReportForOthers:!0}),this.getReportsListAsync(!0,0),this.getReportsListAsync(!1,0))}}const Wo=dn.ZP.div.withConfig({displayName:"SidePanelHeaderStyle__Header",componentId:"sc-6b8g7k-0"})(["border-bottom:"," solid ",";"],Ms.borderWidthThin,Ms.colorBorder),Go=dn.ZP.h3.withConfig({displayName:"SidePanelHeaderStyle__HeaderText",componentId:"sc-6b8g7k-1"})(["font-size:",";",":",";float:",";"],mi.fontSizeMedium,"rtl"===document.dir?"padding-right":"padding-left",mi.spacingXSmall,"rtl"===document.dir?"right":"left"),Uo=dn.ZP.div.withConfig({displayName:"SidePanelHeaderStyle__CloseButton",componentId:"sc-6b8g7k-2"})(["",":",";padding-bottom:",";float:",";"],"rtl"===document.dir?"padding-left":"padding-right",mi.spacingXSmall,mi.spacingMedium,"rtl"===document.dir?"left":"right"),Ho=dn.ZP.div.withConfig({displayName:"SidePanelHeaderStyle__Clear",componentId:"sc-6b8g7k-3"})(["clear:both;"]);function Vo({title:e=Le.Z.getLabel("reportBuilder","ReportTypedetails"),_actionHandler:t}){return(0,Bt.BX)(Wo,{className:"side-panel-header",children:[(0,Bt.tZ)(Go,{children:e}),(0,Bt.tZ)(Uo,{children:(0,Bt.tZ)(It.Z,{id:"detail-panel-close-btn",iconName:"close",iconCategory:"utility",variant:"icon",onClick:t,size:"medium",title:Le.Z.getLabel("recommendedReportType","closeDetailsPane"),"aria-label":Le.Z.getLabel("recommendedReportType","closeDetailsPane")},"ClosePanel")}),(0,Bt.tZ)(Ho,{})]})}class jo extends pt.Component{state={tabIndex:0,truncateDesc:!0,showReadMoreorLess:!0};constructor(e){super(e),this.descriptionRef=(0,pt.createRef)()}componentDidMount(){this.descriptionRef.current&&this.descriptionRef.current.scrollHeight<=this.descriptionRef.current.clientHeight&&this.setState({showReadMoreorLess:!1}),document.getElementById("detail-panel-close-btn")?.focus()}componentDidUpdate(e){const t=null!=this.descriptionRef.current&&this.descriptionRef.current.scrollHeight>this.descriptionRef.current.clientHeight;this.state.showReadMoreorLess!==t&&!1!==this.state.truncateDesc&&this.setState({showReadMoreorLess:t}),this.props.selectedReportType?.getReportType()!==e.selectedReportType?.getReportType()&&(this.setState({tabIndex:0,truncateDesc:!0}),document.getElementById("detail-panel-close-btn")?.focus())}_shouldShowDescription(){return this.props.selectedReportType?.isCustomReportType()&&!!this.props.selectedReportType?.getDescription()||!!this.props.selectedReportType?.isDataCloudReportType()&&!!this.props.selectedReportType?.calculatedInsightDescription}renderDetailPanel(){const e=this.props.isAddBlock?this.props.isJoinable?this.props.infoMessage?500:462:524:420,t=this.props.isAddBlock?this.props.isJoinable?this.props.infoMessage?23.75:26:22.5:29,r=(0,gi.iv)("height:calc(100vh - ",e,"px);max-height:",t,"rem;overflow:hidden;overflow-y:auto;","");return(0,Bt.BX)("div",{css:r,children:[this._shouldShowDescription()?this.renderDescriptionSection():(0,Bt.tZ)(Bt.HY,{}),(0,Bt.tZ)(Bo,{reportType:this.props.selectedReportType,isEmbeddedInTCRM:this.props.isEmbeddedInTCRM}),(0,Bt.tZ)(Zn,{objects:this.props.objectList,isCustomReportType:this.props.selectedReportType?.isCustomReportType(),isDataCloudReportType:this.props.selectedReportType?.isDataCloudReportType(),isCalculatedInsight:this.props.selectedReportType?.isCalculatedInsight()})]})}renderFieldPanel(){const e=this.props.isAddBlock?this.props.isJoinable?this.props.infoMessage?542:504:562:458,t=this.props.isAddBlock?this.props.isJoinable?this.props.infoMessage?21:23.5:20:26.25,r=(0,gi.iv)("height:calc(100vh - ",e,"px);max-height:",t,"rem;overflow-y:auto;","");return(0,Bt.tZ)(Gn,{fields:this.props.fieldList,tabIndex:this.state.tabIndex,heightCss:r})}renderDescriptionSection(){const e=this.state.truncateDesc?sn:nn;return(0,Bt.BX)("div",{css:rn,className:"report-type-description",children:[(0,Bt.tZ)("h3",{css:tn,children:Le.Z.getLabel("reportBuilder","description")}),(0,Bt.tZ)("p",{ref:this.descriptionRef,className:"report-type-desc-content",css:e,children:this.props.selectedReportType?.isDataCloudReportType()&&!this.props.selectedReportType?.isCustomReportType()?this.props.selectedReportType?.calculatedInsightDescription:this.props.selectedReportType?.getDescription()}),this.state.showReadMoreorLess&&(0,Bt.tZ)("a",{href:"#",className:"read-more-less",onClick:this.toggleTruncation.bind(this),children:this.state.truncateDesc?Le.Z.getLabel("reportBuilder","readMore"):Le.Z.getLabel("reportBuilder","readLess")})]})}toggleTruncation(){this.setState({truncateDesc:!this.state.truncateDesc})}getPanelHeader(e){let t;t=0===e?Le.Z.getLabel("reportBuilder","ReportTypedetails"):this.props.fieldList.length?Le.Z.getLabel("reportBuilder","fieldsWithCount",this.props.fieldList.length):Le.Z.getLabel("reportBuilder","fields");const r=0===e?"info_alt":"picklist_type";return(0,Bt.BX)(Bt.HY,{children:[(0,Bt.tZ)(wt.Z,{css:an,category:"utility",name:r,size:"x-small"}),t]})}render(){return(0,Bt.BX)("div",{className:"report-type-details-panel",children:[(0,Bt.tZ)(Vo,{_actionHandler:this.props.closeDetailPanel}),(0,Bt.tZ)(qn,{asset:this.props.selectedReportType,_actionHandler:this.props.handleStartReport,menuDropdownItems:this.props.detailMenuItems,_menuDropdownhandler:this.props.menuDropdownhandler,isAddBlock:this.props.isAddBlock,addBlockRenderer:this.props.addBlockRenderer,isJoinable:this.props.isJoinable}),(0,Bt.BX)(Xs.Z,{css:on,selectedIndex:this.state.tabIndex,onSelect:e=>{this.setState({tabIndex:e})},children:[(0,Bt.tZ)(en.Z,{label:this.getPanelHeader(0),children:this.renderDetailPanel()},0),(0,Bt.tZ)(en.Z,{label:this.getPanelHeader(1),children:this.renderFieldPanel()},1)]})]})}}const qo=(0,gi.iv)("font-size:",mi.fontSizeMedium,";line-height:",mi.varSpacingLarge,";",""),zo=(0,gi.iv)("font-size:",mi.fontSizeSmall,";line-height:",mi.varSpacingLarge,";color:",mi.colorGray11,";",""),$o=(0,gi.iv)("rtl"===document.dir?"padding-right":"padding-left",":",mi.spacingMedium,";",""),Qo=(0,gi.iv)("font-size:",mi.fontSize6,";line-height:",mi.varSpacingLarge,";",""),Yo=(0,gi.iv)("flex:0 0 0;padding:0.5rem 0 0 2rem;font-weight:",mi.fontWeightBold,";font-size:",mi.fontSizeHeadingSmall,";","");class Ko extends pt.Component{render(){return(0,Bt.BX)("div",{className:"report-type-recommendation-header",children:[(0,Bt.tZ)("h3",{css:qo,children:this.props.sectionTitle}),this.props.sectionDescription&&(0,Bt.tZ)("div",{css:zo,children:this.props.sectionDescription})]})}}async function Jo(e){let t;try{const r=await h.Z.getRecentReportTypes(),i=[];r.forEach((t=>{!0!==t.isHidden&&(!0===e&&!0===t.isHistorical||i.push(new ws(t)))})),this.recommendedLoader=!1,t=this.state.reportTypeSectionList,t.push({label:Le.Z.getLabel("recommendedReportType","recentlyUsedShortLabel"),selected:i.length>0,sectionKey:this.RECOMMENDED_SECTION_KEY,tabIndex:i.length>0?0:-1}),i.length>0?(this._currentReportTypeList=i,this._selectedReportSectionIndex=0,this.setState({assets:i,prevReportTypeList:i,reportTypeList:i,reportTypeListInitialized:!0,noRecommendedData:!1,showSectionHeader:!0,reportTypeSectionList:t,recommendedResults:!0})):(t=this.state.reportTypeSectionList,this._selectedReportSectionIndex=1,this.setState({assets:i,prevReportTypeList:this._currentReportTypeList,reportTypeList:this._currentReportTypeList,noRecommendedData:!0,showSectionHeader:!1,reportTypeSectionList:t,recommendedResults:!0})),null!==this.state.queryResults&&this._loadReportStateChanges()}catch(e){t=this.state.reportTypeSectionList,t.push({label:Le.Z.getLabel("recommendedReportType","recentlyUsedShortLabel"),selected:!1,sectionKey:this.RECOMMENDED_SECTION_KEY,tabIndex:-1}),this._selectedReportSectionIndex=1,this.recommendedLoader=!1,this.setState({assets:[],prevReportTypeList:this._currentReportTypeList,noRecommendedData:!0,showSectionHeader:!1,reportTypeList:this._currentReportTypeList,reportTypeSectionList:t,recommendedResults:!0}),null!==this.state.queryResults&&this._loadReportStateChanges()}}var Xo=r(18867),ea=r(58081),ta=r(53346),ra=r(62853);const ia={name:"j6wa1h",styles:"z-index:10000;width:26rem;.slds-popover__footer{background-color:#ffffff;}"},sa={name:"vdgfbm",styles:"width:11rem"},na={name:"2kloem",styles:"padding-top:0.5rem;clear:both"},oa=dn.ZP.ul.withConfig({displayName:"ReportTypeScopeFilter__CustomCombobox",componentId:"vu81c1-0"})([".slds-listbox.slds-listbox_horizontal{padding-top:1rem;display:block;max-height:7.5rem;.slds-listbox__item{padding:0.1rem;}}.slds-pill{padding:0.3rem;}.slds-listbox{max-height:12rem;}.slds-listbox__option-text.slds-listbox__option-text_entity{line-height:2;}"]),aa={name:"l5x7cd",styles:"padding-bottom:0.5rem"},la={name:"l5x7cd",styles:"padding-bottom:0.5rem"},ua={name:"3d4qdq",styles:"padding:0.2rem;margin:0.2rem"},da={name:"q0q6d2",styles:"margin-top:0.5rem;max-height:8.5rem;overflow:scroll"},ca={name:"1ybcrjw",styles:".slds-combobox__input{width:11rem;padding-right:1.9rem;}"},ha=(0,gi.iv)("color:",mi.colorTextError,";float:","rtl"===document.dir?"right":"left",";",""),pa=(0,gi.iv)("float:","rtl"===document.dir?"left":"right",";","");class ga extends pt.Component{sobjectsWithIcon=[];fieldsWithIcon=[];fieldsSelectedRef=[];constructor(e){super(e),this.state={inputValue:"",fieldSearchValue:"",fieldEntityValue:"",selection:"sobject"===e.scopeRadioSelected?e.selectedAssets:[],fieldSearchSelection:"sobject"===e.scopeRadioSelected?[]:e.selectedAssets,sObjectFieldSelection:"sobject"===e.scopeRadioSelected?[]:e.sObjectFieldSelection,popOverOpen:e.popOverOpen,sobjectsListWithIcon:[],fieldsListWithIcon:[],sObjectsLoaded:!1,fieldsLoaded:!1,currentRadioSelected:e.scopeRadioSelected,limitReached:!1},0!==e.sObjectFieldSelection.length&&this._getFieldsForSObjectSelected(e.sObjectFieldSelection)}componentDidUpdate(e){this.props.selectedAssets===this.state.selection&&this.props.selectedAssets===this.state.fieldSearchSelection&&this.props.sObjectFieldSelection===this.state.sObjectFieldSelection&&this.props.scopeRadioSelected===this.state.currentRadioSelected||this.props.popOverOpen||this.setState({selection:this.props.selectedAssets,fieldSearchSelection:this.props.selectedAssets,sObjectFieldSelection:this.props.sObjectFieldSelection,currentRadioSelected:this.props.scopeRadioSelected}),this.props.popOverOpen!==this.state.popOverOpen&&this.setState({popOverOpen:this.props.popOverOpen})}_getSalesforceIconName(e){const t=ln.Z.getDefaultSldsIconName(e);return"sobject"===t?"default":t}_getIconNode(e){return(0,Bt.tZ)(wt.Z,{size:"small",category:"standard",name:this._getSalesforceIconName(e)})}componentDidMount(){h.Z.getAllSobjects().then((e=>{for(let t=0;t<e.sobjects.length;t++)_().isNull(e.sobjects[t].associateEntityType)&&this.sobjectsWithIcon.push({id:e.sobjects[t].name,label:e.sobjects[t].label,icon:this._getIconNode(e.sobjects[t].name)});this.setState({sobjectsListWithIcon:this.sobjectsWithIcon,sObjectsLoaded:!0})}))}compareEqualsScopeSelection(e,t){if(e.length!==t.length)return!1;return e.filter((e=>t.filter((t=>e.id===t.id)).length>0)).length===e.length}_applyButtonDisabled(){return"sobject"===this.state.currentRadioSelected?this.compareEqualsScopeSelection(this.props.selectedAssets,this.state.selection):this.compareEqualsScopeSelection(this.props.selectedAssets,this.state.fieldSearchSelection)}_renderFooter(){return(0,Bt.BX)("div",{className:"slds-text-align_right",children:[(0,Bt.tZ)(It.Z,{label:Le.Z.getLabel("reportBuilder","cancel"),onClick:this._cancelButtonClick.bind(this)}),(0,Bt.tZ)(It.Z,{variant:"brand",label:Le.Z.getLabel("reportBuilder","apply"),disabled:this._applyButtonDisabled(),onClick:this._applyButtonClick.bind(this)})]})}_cancelButtonClick(){this.setState({popOverOpen:!1,selection:this.props.selectedAssets,fieldSearchSelection:this.props.selectedAssets,sObjectFieldSelection:this.props.sObjectFieldSelection,fieldsLoaded:!1,limitReached:!1,fieldSearchValue:"",inputValue:""}),this.props.scopeFilterCancelHandler()}_applyButtonClick(){this.setState({popOverOpen:!1,limitReached:!1,fieldSearchValue:"",inputValue:""}),this.props.scopeFilterApplyHandler("sobject"===this.state.currentRadioSelected?this.state.selection:this.state.fieldSearchSelection,this.state.currentRadioSelected,"sobject"===this.state.currentRadioSelected?[]:this.state.sObjectFieldSelection)}_onValueChange(e,{value:t}){this.setState({inputValue:t})}_onValueSelect(e,{selection:t}){this._checkLimit(this.state.selection.length)||this.setState({inputValue:"",selection:t})}_onValueRemove(e,{selection:t}){this.setState({inputValue:"",selection:t,limitReached:!1,fieldSearchValue:""})}_renderSObjectInput(){const e=(0,Bt.tZ)(vt.Z,{disabled:!0===this.state.limitReached});return(0,Bt.tZ)("div",{css:na,children:(0,Bt.tZ)(oa,{children:(0,Bt.tZ)(Vi.Z,{input:e,id:"report-type-scope-input",events:{onChange:this._onValueChange.bind(this),onSelect:this._onValueSelect.bind(this),onRequestRemoveSelectedOption:this._onValueRemove.bind(this)},multiple:!0,options:(0,ra.Z)({inputValue:this.state.inputValue,options:this.state.sobjectsListWithIcon,selection:this.state.selection,limit:50}),hasInputSpinner:!this.state.sObjectsLoaded,hasMenuSpinner:!this.state.sObjectsLoaded,selection:this.state.selection,value:this.state.inputValue,labels:{placeholder:Le.Z.getLabel("scopeFilterLabel","scopeSearchPlaceHolder"),noOptionsFound:this._getSubtext(this.state.sObjectsLoaded)}})})})}_getFieldsForSObjectSelected(e){h.Z.getSObjectFields(e[0].id).then((t=>{this.fieldsWithIcon=[];for(let r=0;r<t.fields.length;r++)_().isNull(t.fields[r].compoundFieldName)&&this.fieldsWithIcon.push({id:e[0].id+"."+t.fields[r].name,label:e[0].label+" > "+t.fields[r].label,icon:this._getIconNode(e[0].id),type:"All"});this.setState({fieldsListWithIcon:this.fieldsWithIcon,fieldsLoaded:!0})}))}_onEntityValueChange(e,{value:t}){this.setState({fieldEntityValue:t})}_checkLimit(e){let t=!1;return e>=20&&(t=!0,this.setState({limitReached:!0,fieldSearchValue:"",inputValue:""})),t}_onEntityValueSelect(e,{selection:t}){this.setState({fieldEntityValue:"",sObjectFieldSelection:t,limitReached:!1}),0!==t.length?this._getFieldsForSObjectSelected(t):this.setState({fieldsListWithIcon:[],fieldsLoaded:!1,fieldSearchValue:""})}_renderFieldEntity(){const e=(0,Bt.tZ)(vt.Z,{disabled:!0===this.state.limitReached});return(0,Bt.tZ)(Vi.Z,{css:ca,input:e,id:"report-type-scope-field-sobject-input",events:{onChange:this._onEntityValueChange.bind(this),onSelect:this._onEntityValueSelect.bind(this),onRequestRemoveSelectedOption:this._onEntityValueSelect.bind(this)},options:(0,ra.Z)({inputValue:this.state.fieldEntityValue,options:this.state.sobjectsListWithIcon,selection:this.state.sObjectFieldSelection,limit:50}),hasInputSpinner:!this.state.sObjectsLoaded,hasMenuSpinner:!this.state.sObjectsLoaded,selection:this.state.sObjectFieldSelection,value:this.state.fieldEntityValue,inheritWidthOf:"menu",labels:{placeholder:Le.Z.getLabel("scopeFilterLabel","scopeSearchObjectPlaceHolder"),noOptionsFound:this._getSubtext(this.state.sObjectsLoaded)},variant:"inline-listbox"})}_onFieldValueChange(e,{value:t}){this.setState({fieldSearchValue:t})}_onFieldValueSelect(e,{selection:t}){if(!this._checkLimit(this.state.fieldSearchSelection.length)){if(t.length>0){const e=_().clone(this.state.fieldSearchSelection);return e.push(t[0]),void this.setState({fieldSearchValue:"",fieldSearchSelection:e})}this.setState({fieldSearchValue:"",limitReached:!1,inputValue:""})}}_renderFieldInput(){let e=[];this.state.fieldsLoaded&&(e=this.state.fieldsListWithIcon.filter((e=>0===this.state.fieldSearchSelection.filter((t=>e.label===t.label)).length)));const t=(0,ra.Z)({inputValue:this.state.fieldSearchValue,options:e,selection:[],limit:50}),r=0!==this.state.sObjectFieldSelection.length,i=(0,Bt.tZ)(vt.Z,{disabled:0===this.state.sObjectFieldSelection.length||!0===this.state.limitReached});return(0,Bt.tZ)("div",{css:na,children:(0,Bt.tZ)(oa,{children:(0,Bt.tZ)(Vi.Z,{id:"report-type-scope-input",input:i,events:{onChange:this._onFieldValueChange.bind(this),onSelect:this._onFieldValueSelect.bind(this),onRequestRemoveSelectedOption:this._onFieldValueSelect.bind(this)},multiple:!0,options:t,hasInputSpinner:r&&!this.state.fieldsLoaded,hasMenuSpinner:!this.state.fieldsLoaded,selection:[],value:this.state.fieldSearchValue,inheritWidthOf:"menu",entityCombobox:this._renderFieldEntity(),labels:{placeholder:Le.Z.getLabel("scopeFilterLabel","scopeSearchFieldPlaceHolder"),noOptionsFound:this._getSubtext(this.state.fieldsLoaded)}})})})}_removeFieldFromPill(e){const t=e?.currentTarget?.parentNode?.childNodes[1]?.textContent;let r=_().clone(this.state.fieldSearchSelection);r=r.filter((function(e){return e.label!==t})),this.setState({fieldSearchSelection:r,limitReached:!1})}_renderFieldPillContent(){if("sobject"===this.state.currentRadioSelected)return(0,Bt.tZ)("div",{});let e=0;const t=[];return this.fieldsSelectedRef=[],this.state.fieldSearchSelection.forEach((r=>{t.push((0,Bt.tZ)(Xo.Z,{css:ua,labels:{label:r.label},onRemove:this._removeFieldFromPill.bind(this),icon:r.icon,variant:"option",onKeyDown:this._onkeyDown.bind(this,e),ref:this._getSectionRef.bind(this,e),tabIndex:e>0?-1:0,assistiveText:{remove:Le.Z.getLabel("scopeFilterLabel","removeFieldsAssistiveText")}},r.id)),e+=1})),(0,Bt.tZ)("div",{css:da,children:t})}_onkeyDown(e,t){!function(e,t,r,i){const s=parseInt(e),n=i?.currentTarget?.childNodes[1]?.innerText;switch(i.keyCode){case Mt.KEY_CODE_DELETE:case Mt.KEY_CODE_BACKSPACE:Nt.trap(i),s>=t.length-1?1!==t.length?t[s-1].focus():document.getElementById("report-type-scope-input")?.focus():t[s+1].focus(),r(n);break;case Mt.KEY_CODE_RIGHT:Nt.trap(i),s>=t.length-1?t.length>0&&t[0].focus():t[s+1].focus();break;case Mt.KEY_CODE_LEFT:Nt.trap(i),0===s?t.length>0&&t[t.length-1].focus():t[s-1].focus()}}(e,this.fieldsSelectedRef,this._removeFieldSelectedByLabel.bind(this),t)}_removeFieldSelectedByLabel(e){let t=_().clone(this.state.fieldSearchSelection);t=t.filter((function(t){return t.label!==e})),this.setState({fieldSearchSelection:t,limitReached:!1})}_getSectionRef(e,t){this.fieldsSelectedRef||(this.fieldsSelectedRef=[]),t&&(this.fieldsSelectedRef[e]=t)}_getSubtext(e){return e?Le.Z.getLabel("scopeFilterLabel","scopeSearchNoData"):Le.Z.getLabel("scopeFilterLabel","scopeMenuLoading")}_renderBody(){return(0,Bt.BX)("div",{children:[(0,Bt.BX)("div",{css:aa,children:[Le.Z.getLabel("scopeFilterLabel","scopePopOverHeader"),(0,Bt.tZ)(ci.Z,{id:"tooltip",align:"top left",content:Le.Z.getLabel("scopeFilterLabel","helpText"),variant:"learnMore"})]}),(0,Bt.tZ)(ea.Z,{onChange:this._onRadioSelect.bind(this),children:["sobject","field"].map((e=>(0,Bt.tZ)("div",{css:la,children:(0,Bt.tZ)(ta.Z,{id:e,labels:{label:Le.Z.getLabel("scopeFilterLabel",e)},value:e,checked:e===this.state.currentRadioSelected},`${e}-radio`)},e)))}),this._checkLimitAndRenderError(),this._renderDeleteButton(),"sobject"===this.state.currentRadioSelected?this._renderSObjectInput():this._renderFieldInput(),this._renderFieldPillContent()]})}_renderDeleteButton(){const e=Le.Z.getLabel("scopeFilterLabel","removeAllSelected"),t="sobject"===this.state.currentRadioSelected?_().isEmpty(this.state.selection):_().isEmpty(this.state.fieldSearchSelection);return(0,Bt.tZ)(It.Z,{css:pa,assistiveText:{icon:t?Le.Z.getLabel("scopeFilterLabel","removeAllSelectedDisabled"):Le.Z.getLabel("scopeFilterLabel","removeAllSelectedEnabled")},title:e,iconName:"delete",iconCategory:"utility",variant:"icon",onClick:this._deleteAllSelected.bind(this),disabled:t,"aria-live":"assertive"})}_checkLimitAndRenderError(){return!0===this.state.limitReached?(0,Bt.tZ)("div",{css:ha,children:Le.Z.getLabel("semanticSearch","filterLimit")}):(0,Bt.tZ)(Bt.HY,{})}_deleteAllSelected(){"sobject"===this.state.currentRadioSelected?this.setState({selection:[],limitReached:!1}):this.setState({fieldSearchSelection:[],limitReached:!1})}_onRadioSelect(e){const t=e.target.value;"sobject"!==t&&"field"!==t||this.setState({currentRadioSelected:t,selection:"sobject"===this.props.scopeRadioSelected?this.props.selectedAssets:[],fieldSearchSelection:"sobject"===this.props.scopeRadioSelected?[]:this.props.selectedAssets,sObjectFieldSelection:this.props.sObjectFieldSelection,limitReached:!1,fieldEntityValue:"",fieldSearchValue:"",inputValue:""})}_onPopOverClick(){this.setState({popOverOpen:!0}),this.props.popOverHandler()}render(){const e=this.props.selectedAssets?this.props.selectedAssets.length.toString():"0",t=Le.Z.getLabel("scopeFilterLabel","filterLabel",e);return(0,Bt.tZ)(ds.Z,{align:"bottom right",body:this._renderBody(),ariaLabelledby:Le.Z.getLabel("scopeFilterLabel","scopePopOverHeader"),hasNoCloseButton:!0,isOpen:this.state.popOverOpen,onClick:this._onPopOverClick.bind(this),css:ia,footer:this._renderFooter(),children:(0,Bt.tZ)(It.Z,{css:sa,iconCategory:"utility",iconName:"filterList",iconPosition:"left",label:t})})}}ga.displayName="ReportTypeScopeFilter";var ma=r(42614);const _a={name:"1v03bf2",styles:"padding:2rem"},fa=(0,gi.iv)("padding:0 ",mi.spacingLarge," ",mi.spacingMedium," ",mi.spacingLarge,";width:62%;height:62%;margin:auto;",""),ya="dc-report-onboarding",ba="ci-onboarding",Ca="report-generation-onboarding",Ea="report-generation-disclaimer-onboarding",Sa="similarReportTypesIntro";class Ta{label="";category="";name="";id="";constructor(e,t,r){this.label=e,this.id=e,this.category=t,this.name=r}getJson(){return{label:this.label,id:this.id,leftIcon:{category:this.category,name:this.name}}}}class Ia extends pt.Component{static defaultProps={isOpen:!0,isAddBlock:!1,reportTypes:[]};state={error:null,reportTypeSectionList:[],reportTypeList:[],hiddenReportTypeList:[],reportTypeListInitialized:!1,reportType:null,searchTerm:"",isJoinable:!0,infoMessage:"",areDefaultColumnsIncluded:!0,prevReportTypeList:[],prevReportType:null,showHiddenReportType:!1,setupUrl:"",assets:[],fieldList:[],objectList:[],detailPanelOpen:!1,einsteinPanelOpen:!1,noRecommendedData:!1,selectedReportType:null,showSectionHeader:!0,tableLoader:!0,scopeFilterSelection:[],scopeRadioSelected:"sobject",scopefieldSObjectSelected:[],scopeFilterResults:[],scopePopOverOpen:!1,queryResults:null,recommendedResults:!1,reportTypeSelectorPerms:null,isShowingDCRWelcomeMat:!1,isShowingCIWelcomeMat:!1,doNotShowDCRAgain:!1,doNotShowCIAgain:!1,newUserInput:"",chatPendingStatus:null,showReportGenDisabledInfoPopover:!1,showReportGenOnboardingPopover:!1,showMoreEnabled:!0,hasSeenReportGenDisclaimerPage:!1};_selectedRowIndex=-1;_updateRowIndex=!1;recommendedLoader=!0;filteredPageNumber=0;_filteredAsset=[];_selectedReportSectionIndex=0;_allReportTypeList=[];_reportTypeResult=[];_currentReportTypeList=[];__ObjectsList=[];_typeElements=[];_sectionElements=[];reportTypeToSectionMap=new Map;HIDDEN_SECTION_KEY="hidden";NON_HIDDEN_SECTION_KEY="normal";RECOMMENDED_SECTION_KEY="recommended";DETAILS=new Ta(Le.Z.getLabel("reportBuilder","ReportTypedetails"),"utility","info").getJson();HIDE_REPORT_TYPE=new Ta(Le.Z.getLabel("reportBuilder","hideReportType"),"utility","hide").getJson();UNHIDE_REPORT_TYPE=new Ta(Le.Z.getLabel("reportBuilder","unhideReportType"),"utility","preview").getJson();START_REPORT=new Ta(Le.Z.getLabel("reportBuilder","startReport"),"utility","new_window").getJson();_setShowDCRWelcomeMat=e=>{this.setState({isShowingDCRWelcomeMat:e})};_setShowCIWelcomeMat=e=>{this.setState({isShowingCIWelcomeMat:e})};_setShowReportGenOnboardingPopover=e=>{this.setState({showReportGenOnboardingPopover:e})};_setHasSeenReportGenDisclaimerPage=e=>{this.setState({hasSeenReportGenDisclaimerPage:e})};async componentDidMount(){document.getElementById("report-main")?.removeAttribute("aria-hidden"),Jo.call(this,this.props.isAddBlock);const e={isRecommendedReportTypeVisible:this.props.reportTypeSelectorPerms?.hasManageCustomReportTypes,hasManageCustomReportTypes:this.props.reportTypeSelectorPerms?.hasManageCustomReportTypes,hasReportTypeSemanticSearch:this.props.reportTypeSelectorPerms?.hasReportTypeSemanticSearch,isDataCloudEnabled:this.props.reportTypeSelectorPerms?.isDataCloudEnabled,isCIGaterEnabled:this.props.reportTypeSelectorPerms?.isCIGaterEnabled};if(this.props.reportTypeSelectorPerms?.isDataCloudEnabled){try{(await h.Z.getReportOnboarding(ya)).hasSeenOnboarding||this._setShowDCRWelcomeMat(!0)}catch{this._setShowDCRWelcomeMat(!1)}if(this.props.reportTypeSelectorPerms?.isCIGaterEnabled)try{(await h.Z.getReportOnboarding(ba)).hasSeenOnboarding||this._setShowCIWelcomeMat(!0)}catch{this._setShowCIWelcomeMat(!1)}if(yt.Z.has(yt.Z.USER_HAS_EGPT_REPORT_GENERATION_ENABLED)){try{(await h.Z.getReportOnboarding(Ca)).hasSeenOnboarding||this._setShowReportGenOnboardingPopover(!0)}catch{this._setShowReportGenOnboardingPopover(!1)}try{(await h.Z.getReportOnboarding(Ea)).hasSeenOnboarding&&this._setHasSeenReportGenDisclaimerPage(!0)}catch{this._setHasSeenReportGenDisclaimerPage(!1)}}}return this.setState({reportTypeSelectorPerms:e}),this._queryReportType()}async componentDidUpdate(e,t){if(this.props.isAddBlock&&!e.isOpen&&this.props.isOpen&&(this._queryCommonObjects(this.state.reportType),this.setState({areDefaultColumnsIncluded:!0}),this.props.reportTypeSelectorPerms?.isDataCloudEnabled)){try{(await h.Z.getReportOnboarding(ya)).hasSeenOnboarding||this._setShowDCRWelcomeMat(!0)}catch{this._setShowDCRWelcomeMat(!1)}if(this.props.reportTypeSelectorPerms?.isCIGaterEnabled)try{(await h.Z.getReportOnboarding(ba)).hasSeenOnboarding||this._setShowCIWelcomeMat(!0)}catch{this._setShowCIWelcomeMat(!1)}}_().isEqual(t.scopeFilterSelection,this.state.scopeFilterSelection)||(this.setState({scopeFilterResults:[]}),this.filteredPageNumber=0)}_hasInfoPanel(){return this.state.detailPanelOpen}render(){if(this.state.error)return(0,Bt.tZ)(kt.Z,{id:"error-modal",isOpen:!!this.state.error,error:this.state.error,onClose:this._onErrorModalClose});const e=Lt().classSet({"recommended-report-type-picker-container":!0,"has-info-panel":this._hasInfoPanel()});return(0,Bt.BX)(xt(),{id:this.props.id,isOpen:this.props.isOpen,header:this._getModalHeader(),containerClassName:e,contentClassName:"report-type-picker-content",disableClose:!1,dismissOnClickOutside:!1,onRequestClose:this._onClickCancel,children:[(0,Bt.BX)("div",{className:"report-type-picker slds-grid",children:[(0,Bt.tZ)("div",{className:"slds-col slds-size_1-of-5",children:this._renderReportTypeSectionList()}),(0,Bt.BX)("div",{className:"slds-col slds-size_4-of-5 slds-grid",children:[this._renderReportTypeList(),this._renderInfoPanel(),this._renderEinsteinPanel()]})]}),this._renderWelcomeMat()]})}_renderWelcomeMat(){const e=!this.state.reportTypeSelectorPerms?.isDataCloudEnabled||!this.state.reportTypeSelectorPerms?.isCIGaterEnabled||!this.state.isShowingCIWelcomeMat,t=!this.state.reportTypeSelectorPerms?.isDataCloudEnabled||!this.state.isShowingDCRWelcomeMat,r=(0,Bt.tZ)(At.Z,{assistiveText:{label:Le.Z.getLabel("reportBuilder","doNotShowAgain")},labels:{label:Le.Z.getLabel("reportBuilder","doNotShowAgain")},checked:this.state.doNotShowDCRAgain,onChange:(e,{checked:t})=>this.setState({doNotShowDCRAgain:t})}),i=(0,Bt.tZ)(At.Z,{assistiveText:{label:Le.Z.getLabel("reportBuilder","doNotShowAgain")},labels:{label:Le.Z.getLabel("reportBuilder","doNotShowAgain")},checked:this.state.doNotShowCIAgain,onChange:(e,{checked:t})=>this.setState({doNotShowCIAgain:t})});return(0,Bt.BX)("div",{children:[!e&&this._generateWelcomeMat("ci-welcome-mat","welcomeMatCITitle","welcomeMatCIBody","https://help.salesforce.com/s/articleView?id=release-notes.rn_data_cloud_reports_calculatedinsights.htm&release=248&type=5",i),!t&&this._generateWelcomeMat("dcr-welcome-mat","welcomeMatDCRTitle","welcomeMatDCRBody","https://help.salesforce.com/articleView?id=sf.datacloud_reports_dashboards_overview.htm&type=5",r)]})}_generateWelcomeMat(e,t,r,i,s){return(0,Bt.tZ)("div",{className:e,children:(0,Bt.tZ)(ys.Z,{labels:{title:Le.Z.getLabel("reportBuilder",t),description:Le.Z.getLabel("reportBuilder",r)},doNotShowAgainCheckbox:s,onRenderInfoActions:()=>(0,Bt.tZ)("a",{href:i,target:"_blank",rel:"noreferrer",children:(0,Bt.tZ)(It.Z,{type:"button",variant:"brand",title:Le.Z.getLabel("reportBuilder","welcomeMatButton"),label:Le.Z.getLabel("reportBuilder","welcomeMatButton"),id:"welcome-mat-button"})}),isOpen:!0,onRequestClose:()=>this._onCloseWelcomeMatModal(e),variant:"splash",id:"deploy-onboarding-model"})})}_getReportTypeDetails(e){const t=[];h.Z.getReportType(e.getReportType()).then((r=>{const i=r&&r.reportTypeMetadata,s=i&&i.categories||[],n=i&&i.objects||[];for(let e=0;e<s.length;e++){const r=s[e]&&s[e].columns||[],i=s[e]&&s[e].label;for(const e in r){const s=r[e].label,n=r[e].dataType,o={};let a;a=["double","int","number"].includes(n)?Ls.Z.NUMBER:["date","datetime"].includes(n)?Ls.Z.DATE:Ls.Z.TEXT,o.type=a,o.label=s,o.CategoryName=i,t.push(new Is.Z(o,o.type,!1))}}e.dataSpace=i?.dataSpace,e.calculatedInsightDescription=n[0]?.calculatedInsightObjectInfo?.description,this.setState({fieldList:t,objectList:n,selectedReportType:e})}),(e=>{this._handleApiError(e)}))}_checkIfAssetReselected=e=>this.state.selectedReportType?.getReportType()===e.getReportType()&&(this.state.detailPanelOpen||this.setState({detailPanelOpen:!0}),!0);_onAssetSelected=(e,t,r,i)=>{this._updateRowIndex=!0,this._selectedRowIndex=i,this.setState({scopePopOverOpen:!1}),this._checkIfAssetReselected(e)||(this._handleSelectReportTypeAsset(e,t,r),this._getReportTypeDetails(e))};_menuDropdownhandler(e,t,r){switch(t.id){case this.HIDE_REPORT_TYPE.id:this.state.reportTypeSelectorPerms?.hasManageCustomReportTypes&&this._setReportTypeVisibility(!0,e);break;case this.UNHIDE_REPORT_TYPE.id:this.state.reportTypeSelectorPerms?.hasManageCustomReportTypes&&this._setReportTypeVisibility(!1,e);break;case this.DETAILS.id:this._onAssetSelected(e,void 0,void 0,r);break;case this.START_REPORT.id:this._handleStartReport(e.getReportType())}}_setMenuDropdownItems(){const e=Array();e.push(this.DETAILS);return this.state.reportTypeSectionList[this._selectedReportSectionIndex].sectionKey===this.HIDDEN_SECTION_KEY||this.props.isAddBlock||e.push(this.START_REPORT),this.state.reportTypeSelectorPerms?.hasManageCustomReportTypes&&(this.state.showHiddenReportType?e.push(this.UNHIDE_REPORT_TYPE):e.push(this.HIDE_REPORT_TYPE)),e}_renderReportTypeAssetList(){let e;const t=this._setMenuDropdownItems();if(this.state.showHiddenReportType){if(_().isEmpty(this.state.hiddenReportTypeList))return this._renderNoHiddenReportMessage();e=new Ts.Z(this.state.hiddenReportTypeList,this.state.hiddenReportTypeList.length)}else{if(_().isEmpty(this.state.reportTypeList)){if(this._filteredAsset=[],0===this._selectedReportSectionIndex&&_().isEmpty(this.state.searchTerm)&&0===this.state.scopeFilterSelection.length)return this._renderNoDataMessage();if(!_().isEmpty(this.state.searchTerm))return this._renderNoResultMessage()}if(this.state.scopeFilterSelection.length>0&&!this.state.tableLoader){const t=this.state.reportTypeList;if(this._filteredAsset=t.filter((e=>!this.state.scopeFilterResults||this.state.scopeFilterResults.includes(e.getReportType()))),0===this._filteredAsset.length)return this._renderNoFilterMessage();e=new Ts.Z(this._filteredAsset,this._filteredAsset.length)}else this._filteredAsset=[],e=new Ts.Z(this.state.reportTypeList,this.state.reportTypeList.length)}const r=this._updateRowIndex?this._selectedRowIndex:void 0;return(0,Bt.BX)(Bt.HY,{children:[this._renderSectionInfo(),(0,Bt.tZ)(Js,{ariaLabel:Le.Z.getLabel("reportBuilder","reportTypeTableHeader",this.state.reportTypeSectionList[this._selectedReportSectionIndex]?.label),selectedIndex:r,isEmbedded:!1,results:e,isAppContext:!1,menuDropdownItems:t,_onAssetSelected:this._onAssetSelected.bind(this),_menuDropdownhandler:this._menuDropdownhandler.bind(this),_dropDownClickHandler:this._scopeFilterCancelHandler.bind(this),referenceForFocus:[-1,-1]})]})}_renderShowMoreFooter(){return 1!==this._selectedReportSectionIndex||0===this.state.scopeFilterSelection.length||0===this._filteredAsset.length||this.state.tableLoader?(0,Bt.tZ)(Bt.HY,{}):(0,Bt.tZ)("div",{css:Os,children:(0,Bt.tZ)(It.Z,{className:"scopeFilterShowMore",css:Ns,label:Le.Z.getLabel("reportBuilder","showMore"),variant:"neutral",disabled:!this.state.showMoreEnabled,onClick:this._getReportTypeResults.bind(this),onKeyDown:this._onShowMoreKeyDown.bind(this)})})}_renderFooterOnScopeFilter(){return 1===this._selectedReportSectionIndex||0===this.state.scopeFilterSelection.length||this.state.showHiddenReportType||0===this._filteredAsset.length||this.state.tableLoader?(0,Bt.tZ)(Bt.HY,{}):(0,Bt.BX)("div",{className:"report-types-footer-scope",children:[(0,Bt.tZ)("span",{children:Le.Z.getLabel("scopeFilterLabel","scopeFilterSectionChange",this.state.reportTypeSectionList[this._selectedReportSectionIndex].label)}),(0,Bt.tZ)(It.Z,{label:Le.Z.getLabel("scopeFilterLabel","scopeFilterSectionChangeButton"),onClick:this._handleSectionClick.bind(this,1),variant:"base"})]})}_onShowMoreKeyDown(){const e=document.getElementById("#detail-panel-close-btn");e?e?.focus():document.getElementsByClassName("slds-button_icon .slds-modal__close")[0]?.focus()}_renderReportTypeSectionList(){const e=[],t=this.state.reportTypeSectionList;let r=0;for(let i=0;i<t.length;i++)if(0===i||1===i||t[i].sectionKey===this.HIDDEN_SECTION_KEY||!_().isEmpty(this._reportTypeResult[i-2])){const s=Lt().classSet({"slds-nav-vertical__item":!0,"slds-is-active":t[i].selected});let n;n=t[i].sectionKey===this.HIDDEN_SECTION_KEY?"slds-nav-vertical__action report-section-text hidden-report-type-section-list":"slds-nav-vertical__action report-section-text",e.push((0,Bt.tZ)("li",{className:s,role:"presentation",children:(0,Bt.tZ)("a",{className:n,href:"#",onClick:this._handleSectionClick.bind(this,i),role:"option",onKeyDown:this._onKeyDown.bind(this,r,i,!0),ref:this._getSectionRef.bind(this,r),tabIndex:t[i].selected?0:t[i].tabIndex,"aria-selected":t[i].selected,"aria-label":Le.Z.getLabel("reportBuilder","reportTypeCategory",t[i].label),children:t[i].label})},i)),r+=1}const i=this.state.tableLoader&&0===this.state.scopeFilterSelection.length?(0,Bt.tZ)("div",{css:_a,children:(0,Bt.tZ)(xn,{noDataMessage:"No Message",isLoading:!0,showEmpty:!0,showStencil:!1})}):(0,Bt.tZ)("div",{});return(0,Bt.BX)(Bt.HY,{children:[(0,Bt.tZ)("h3",{css:Yo,children:Le.Z.getLabel("reportBuilder","categoryLabel")}),(0,Bt.tZ)("div",{className:"report-type-section-list",children:(0,Bt.BX)("div",{className:"slds-grid slds-grid_vertical slds-navigation-list_vertical reportType-section-list",children:[(0,Bt.tZ)("ul",{role:"listbox",children:this.state.reportTypeListInitialized?e:[]}),i]})})]})}showNotification(e){l.Z.get(g()).showToastMessage(e)}_setReportTypeVisibility(e,t){h.Z.updateReportTypeVisibility(e,t.getReportType()).then((r=>{this._selectedRowIndex=-1,this._updateRowIndex=!0,e?this._hideReportType(t):this._unHideReportType(t);const i=e?Le.Z.getLabel("reportBuilder","hideSucess",t.getLabel()):Le.Z.getLabel("reportBuilder","unHideSuccess",t.getLabel());this.showNotification(i)})).catch((r=>{const i=e?Le.Z.getLabel("reportBuilder","hideFailure",t.getLabel()):Le.Z.getLabel("reportBuilder","unHideFailure",t.getLabel());this.showNotification(i)}))}_unHideReportType(e){let{hiddenReportTypeList:t,assets:r,reportTypeList:i}=this.state;t=this._removeFromList(t,e),this._setIsHiddenInList(r,e.getReportType(),!1),e.setIsHidden(!1),this._addToList(this._allReportTypeList,e);const s=this.reportTypeToSectionMap.get(e.getReportType());void 0!==s&&this._addToList(this._reportTypeResult[s],e),this._addToList(i,e),this.setState({reportTypeList:i,hiddenReportTypeList:t,assets:r})}_hideReportType(e){let{reportTypeList:t,assets:r,hiddenReportTypeList:i}=this.state;t=this._removeFromList(t,e),this._allReportTypeList=this._removeFromList(this._allReportTypeList,e);const s=this.reportTypeToSectionMap.get(e.getReportType());if(void 0!==s&&(this._reportTypeResult[s]=this._removeFromList(this._reportTypeResult[s],e)),this._setIsHiddenInList(r,e.getReportType(),!0),e.setIsHidden(!0),this._currentReportTypeList=this._removeFromList(this._currentReportTypeList,e),this._addToList(i,e),_().isEmpty(t)){const{reportTypeSectionList:e}=this.state;e[this._selectedReportSectionIndex].selected=!1,e[this._selectedReportSectionIndex].tabIndex=-1,this._selectedReportSectionIndex=1,e[this._selectedReportSectionIndex].selected=!0,this.setState({reportTypeSectionList:e,reportTypeList:this._allReportTypeList,assets:r,hiddenReportTypeList:i})}else this.setState({reportTypeList:t,assets:r,hiddenReportTypeList:i})}_removeFromList(e,t){return e.filter((function(e){return e.getReportType()!==t.getReportType()}))}_addToList(e,t){-1===e.findIndex((e=>e.getReportType()===t.getReportType()))&&e.push(t)}_setIsHiddenInList(e,t,r){for(let i=0;i<e.length;i++)if(e[i].getReportType()===t)return void e[i].setIsHidden(r)}_handleSectionClick(e,t){let r;t.preventDefault(),t.stopPropagation();const i=parseInt(e),{reportTypeSectionList:s}=this.state;if(i!==this._selectedReportSectionIndex)if(s[i].selected=!0,s[this._selectedReportSectionIndex].selected=!1,s[this._selectedReportSectionIndex].tabIndex=-1,this._selectedReportSectionIndex=i,this._typeElements=[],this._selectedRowIndex=-1,this._updateRowIndex=!0,this.HIDDEN_SECTION_KEY===s[i].sectionKey)this.setState({reportTypeSectionList:s,showHiddenReportType:!0,reportTypeList:[],setupUrl:"/lightning/setup/CustomReportTypes/home",detailPanelOpen:!1,objectList:[],fieldList:[],selectedReportType:void 0,showSectionHeader:!1,scopePopOverOpen:!1,einsteinPanelOpen:!1,chatPendingStatus:this._isDataCloudSectionSelected()?this.state.chatPendingStatus:null});else{if(this.RECOMMENDED_SECTION_KEY!==s[i].sectionKey){this._currentReportTypeList=1===i?this._allReportTypeList:this._reportTypeResult[i-2];const e=this._currentReportTypeList[0].getReportType();return _().isEmpty(this.state.searchTerm)||(r=this._getSearchedResults(this._currentReportTypeList,this.state.searchTerm)),this.setState({reportTypeSectionList:s,reportTypeList:""!==this.state.searchTerm?r:this._currentReportTypeList,reportType:e,showHiddenReportType:!1,detailPanelOpen:!1,objectList:[],fieldList:[],selectedReportType:void 0,showSectionHeader:!1,scopePopOverOpen:!1,einsteinPanelOpen:this._isDataCloudSectionSelected()&&yt.Z.has(yt.Z.USER_HAS_EGPT_REPORT_GENERATION_ENABLED),chatPendingStatus:this._isDataCloudSectionSelected()?this.state.chatPendingStatus:null}),this._queryCommonObjects(e)}{const e=this.state.assets.filter((e=>!e.isHidden()));this._currentReportTypeList=e,_().isEmpty(this.state.searchTerm)||(r=this._getSearchedResults(e,this.state.searchTerm)),this.setState({reportTypeSectionList:s,showHiddenReportType:!1,reportTypeList:""!==this.state.searchTerm?r:e,detailPanelOpen:!1,objectList:[],fieldList:[],selectedReportType:void 0,showSectionHeader:!0,scopePopOverOpen:!1,einsteinPanelOpen:!1,chatPendingStatus:null})}}}onclickManageSetup(){window.open(this.state.setupUrl,"_blank")}_renderReportTypeList(){const e=this.state.reportTypeSelectorPerms?.hasReportTypeSemanticSearch,t=this._renderSearchInput(e),r=this.state.reportTypeListInitialized?this._renderReportTypeAssetList():(0,Bt.tZ)("div",{}),i=`slds-size_${this._hasInfoPanel()||this.state.einsteinPanelOpen?2:3}-of-3`,s=1===this._selectedReportSectionIndex||0===this.state.scopeFilterSelection.length||this.state.showHiddenReportType||0===this._filteredAsset.length?"without-recent":"after-scope-apply",n=1!==this._selectedReportSectionIndex||0===this.state.scopeFilterSelection.length||this.state.showHiddenReportType||0===this._filteredAsset.length?"withoutFooter":"withFooter";return this.state.showHiddenReportType?(0,Bt.BX)("div",{className:`slds-col ${i} report-type-list-form-withoutFooter report-type-list-form-hidden`,children:[(0,Bt.tZ)(Ps,{isOpen:!0,onClickManageInSetup:this.onclickManageSetup.bind(this)}),(0,Bt.tZ)("div",{className:"slds-scrollable_y",children:r})]}):(0,Bt.BX)("div",{className:`slds-col ${i}`,children:[(0,Bt.BX)("div",{className:`report-type-list-form-${n}`,children:[(0,Bt.tZ)("div",{css:$o,children:(0,Bt.tZ)("h3",{css:Qo,children:Le.Z.getLabel("recommendedReportType","selectReportType")})}),(0,Bt.BX)("div",{children:[t,e&&this._renderScopeFilter()]}),this._renderMidSectionLists(s,r),this._renderFooterOnScopeFilter()]}),this._renderShowMoreFooter()]})}_scopeFilterCancelHandler(){this.setState({scopePopOverOpen:!1})}_popOverHandler(){this.setState({scopePopOverOpen:!0,detailPanelOpen:!1})}_handleScopeApplyError(){const e=Le.Z.getLabel("scopeFilterLabel","scopeResultFailure");this.showNotification(e),this.recommendedLoader=!1,this.setState({scopeFilterSelection:[],tableLoader:!1})}_applyScopeFilter(e,t,r){this.recommendedLoader=!0,this.filteredPageNumber=0,this.setState({scopeFilterSelection:e,tableLoader:!0,scopePopOverOpen:!1,scopeRadioSelected:t,scopefieldSObjectSelected:r},(()=>this._getReportTypeResults()))}_getReportTypeResults(){this.setState({tableLoader:!0});const e=this.state.scopeFilterSelection.map((e=>e.id));if(0===e.length)return this.recommendedLoader=!1,void this.setState({scopeFilterResults:[],tableLoader:!1});"sobject"===this.state.scopeRadioSelected?h.Z.getReportTypesbySObject(e,this.filteredPageNumber).then((e=>{this._appendReportTypeResults(e?.targetAssets)})).catch((e=>{this._handleScopeApplyError()})):h.Z.getReportTypesbyFields(e,this.filteredPageNumber).then((e=>{this._appendReportTypeResults(e?.targetAssets)})).catch((e=>{this._handleScopeApplyError()}))}_appendReportTypeResults(e){this.filteredPageNumber=this.filteredPageNumber+100,this.recommendedLoader=!1;const t=e?.map((e=>e.assetName));this.setState((e=>{const r=[...new Set(e.scopeFilterResults.concat(t))];return{...e,scopeFilterResults:e.scopeFilterResults.concat(t),tableLoader:!1,showMoreEnabled:t.length>=100&&r.length!==e.scopeFilterResults.length}}))}_renderSectionInfo(){return(0,Bt.BX)(Bt.HY,{children:[this.state.searchTerm&&(0,Bt.tZ)("div",{className:"slds-p-around_small",role:"alert",children:Le.Z.getLabel("reportBuilder","searchReportTypeResults",this.state.searchTerm)}),this.state.showSectionHeader&&(0,Bt.tZ)(Ko,{sectionTitle:Le.Z.getLabel("recommendedReportType","recommendedSectionInfoTitle")})]})}_renderMidSectionLists(e,t){return 0===this._selectedReportSectionIndex&&this.recommendedLoader||0!==this._selectedReportSectionIndex&&this.state.tableLoader?(0,Bt.tZ)("div",{className:"recommended-report-type-picker-suggestions",children:(0,Bt.tZ)("div",{className:"recommendation-asset-card",children:(0,Bt.tZ)(xn,{noDataMessage:Le.Z.getLabel("recommendedReportType","noDataFound"),isLoading:!0,showEmpty:!1,showStencil:!0})})}):(0,Bt.tZ)("div",{children:(0,Bt.tZ)("div",{className:Lt().buildClassName("slds-scrollable_y",e),children:t})})}_renderScopeFilter(){return(0,Bt.tZ)("div",{className:"report-type-scope-filter",children:(0,Bt.tZ)(ga,{scopeFilterApplyHandler:this._applyScopeFilter.bind(this),selectedAssets:this.state.scopeFilterSelection,scopeRadioSelected:this.state.scopeRadioSelected,sObjectFieldSelection:this.state.scopefieldSObjectSelected,popOverOpen:this.state.scopePopOverOpen&&!this.state.detailPanelOpen,popOverHandler:this._popOverHandler.bind(this),scopeFilterCancelHandler:this._scopeFilterCancelHandler.bind(this)})})}_renderNoDataMessage(){return(0,Bt.tZ)("div",{className:"no-report-types-found",role:"alert",children:(0,Bt.tZ)(bs.Z,{heading:Le.Z.getLabel("recommendedReportType","noRecommendedHeading"),messageBody:Le.Z.getLabel("recommendedReportType","noRecommendedBody"),path:`${Ss}#lake-mountain`,name:"No Data Found"})})}_renderNoFilterMessage(){return(0,Bt.tZ)("div",{className:"no-report-types-found",role:"alert",children:(0,Bt.tZ)(bs.Z,{heading:Le.Z.getLabel("scopeFilterLabel","noDataScopeFilterHeading"),messageBody:Le.Z.getLabel("scopeFilterLabel","noDataScopeFilterBody"),path:`${Ss}#lake-mountain`,name:"No Data Found"})})}_renderNoResultMessage(){return(0,Bt.tZ)("div",{className:"no-reportType",role:"alert",children:(0,Bt.tZ)("span",{className:"no-reportType-message",children:Le.Z.getLabel("reportBuilder","noReportTypeMessage",this.state.searchTerm)})})}_renderNoHiddenReportMessage(){return(0,Bt.tZ)("div",{className:"slds-illustration slds-illustration_small no-hiddenreportType",children:(0,Bt.tZ)("div",{className:"slds-text-longform",children:(0,Bt.tZ)("p",{className:"slds-text-body_regular",children:Le.Z.getLabel("reportBuilder","noHiddenReportTypes")})})})}_handleSelectReportTypeAsset(e,t,r){return r?.preventDefault(),this.setState({reportType:e.getReportType(),selectedReportType:e,detailPanelOpen:!0,einsteinPanelOpen:!1,chatPendingStatus:null,objectList:[],fieldList:[]}),this._queryCommonObjects(e.getReportType())}_renderSearchInput(e){const t=!_().isEmpty(this.state.searchTerm),r=Lt().classSet({"slds-button":!0,"slds-button_icon":!0,"slds-input__icon":!0,"slds-input__icon_right":!0,"clear-search-report-type":!0,"slds-hide":!t}),i=e?"report-type-search":"report-type-search-no-filter",s=(0,Bt.tZ)(It.Z,{onClick:this._onClearSearch,className:r,iconName:"clear",iconCategory:"utility",iconVariant:"bare",variant:"icon",assistiveText:{icon:Le.Z.getLabel("reportBuilder","clearInput")},onKeyDown:t?this._onSearchKeyDown:void 0,buttonRef:this._getClearButtonRef});return(0,Bt.tZ)(vt.Z,{id:"modal-search-input",placeholder:Le.Z.getLabel("reportBuilder","searchReportType"),assistiveText:{label:Le.Z.getLabel("reportBuilder","searchReportType")},onChange:this._onSearchInputChange,type:"search",className:i,iconLeft:(0,Bt.tZ)(Rt.Z,{category:"utility",name:"search"}),iconRight:s,value:this.state.searchTerm,inputRef:this._getSearchRef,onKeyDown:t?void 0:this._onSearchKeyDown,autoComplete:"off",onFocus:this._onSearchFocus.bind(this)})}_onSearchFocus(){this.setState({scopePopOverOpen:!1})}_closeDetailPanel(){this.setState({detailPanelOpen:!1,scopePopOverOpen:!1})}_renderInfoPanel(){if(this._hasInfoPanel()){const e=Array();return this.state.reportTypeSelectorPerms?.hasManageCustomReportTypes&&(this.state.selectedReportType.isHidden()?e.push(this.UNHIDE_REPORT_TYPE):e.push(this.HIDE_REPORT_TYPE)),(0,Bt.tZ)("div",{className:"slds-col slds-size_1-of-3 report-type-info",children:(0,Bt.tZ)(jo,{closeDetailPanel:this._closeDetailPanel.bind(this),selectedReportType:this.state.selectedReportType,handleStartReport:this._handleStartReport.bind(this),detailMenuItems:e,menuDropdownhandler:this._menuDropdownhandler.bind(this),objectList:this.state.objectList,fieldList:this.state.fieldList,isAddBlock:this.props.isAddBlock,addBlockRenderer:this._renderAddBlockDetails.bind(this),isJoinable:this.state.isJoinable,infoMessage:this.state.infoMessage,isEmbeddedInTCRM:this.props.isEmbeddedInTCRM,isEmbeddedInTCRMStudio:this.props.isEmbeddedInTCRMStudio})})}}_onClickEinstein(){this._isDataCloudSectionSelected()?this.setState({detailPanelOpen:!1,einsteinPanelOpen:!this.state.einsteinPanelOpen,chatPendingStatus:null}):this.setState({showReportGenDisabledInfoPopover:!0})}_getReportGenOnboardingFooterButton(){return(0,Bt.tZ)("div",{className:"slds-text-align_right",children:(0,Bt.tZ)(It.Z,{label:Le.Z.getLabel("GenerativeAiGeneral","gotIt"),onClick:()=>this._onReportGenOnboardingGotItClicked()},"gotIt")})}async _onReportGenOnboardingGotItClicked(){this._setShowReportGenOnboardingPopover(!1);try{await h.Z.setReportOnboarding(Ca)}catch{}}_getModalHeader(){return(0,Bt.BX)("div",{className:"modal-header-section",children:[(0,Bt.tZ)("span",{className:"slds-text-heading_medium",children:Le.Z.getLabel("recommendedReportType","createNewReport")}),this._getModalHeaderEinsteinIcon()]})}_isDataCloudSectionSelected(){return this.state.reportTypeSectionList[this._selectedReportSectionIndex]?.label===Le.Z.getLabel("reportBuilder","reportCategoryDataCloud")}_getModalHeaderEinsteinIcon(){const e=Lt().classSet({"report-einstein-panel-button":!0,disabled:!this._isDataCloudSectionSelected()}),t=(0,Bt.tZ)(ds.Z,{body:Le.Z.getLabel("ReportGeneration","reportEinsteinIconDisabledInfo"),id:"report-einstein-panel-button-popover",align:"bottom right",isOpen:this.state.showReportGenDisabledInfoPopover,onRequestClose:()=>this.setState({showReportGenDisabledInfoPopover:!1}),children:(0,Bt.tZ)(It.Z,{className:e,onClick:()=>this._onClickEinstein(),iconName:"einstein",iconCategory:"utility",iconVariant:"bare",iconSize:"small",variant:"icon"})});return this.props.reportTypeSelectorPerms?.isDataCloudEnabled&&yt.Z.has(yt.Z.USER_HAS_EGPT_REPORT_GENERATION_ENABLED)?(0,Bt.tZ)(ds.Z,{isOpen:this._isDataCloudSectionSelected()&&this.state.showReportGenOnboardingPopover,heading:Le.Z.getLabel("ReportGeneration","reportGenerationOnboardingPopoverTitle"),body:Le.Z.getLabel("ReportGeneration","reportGenerationOnboardingPopoverSubtitle"),onRequestClose:()=>this._setShowReportGenOnboardingPopover(!1),triggerClassName:"report-gen-experience-popover-trigger",classNameBody:"report-gen-experience-popover-body",variant:"feature",align:"left top",icon:(0,Bt.tZ)(wt.Z,{category:"utility",name:"description",size:"small",inverse:!0}),footer:this._getReportGenOnboardingFooterButton(),children:t}):null}_getInitialChatMessages(){const e=[];return e.push((0,Bt.tZ)("div",{className:"initial-chat-msg-intro",children:Le.Z.getLabel("ReportGeneration","initialChatMessageIntro")})),e.push((0,Bt.BX)("div",{className:"initial-chat-msg-desc",children:[(0,Bt.tZ)("span",{children:Le.Z.getLabel("ReportGeneration","initialChatMessageDesc")}),(0,Bt.BX)("ul",{className:"slds-list_dotted example-input-container",children:[(0,Bt.tZ)("li",{children:Le.Z.getLabel("ReportGeneration","exampleInput1")}),(0,Bt.tZ)("li",{children:Le.Z.getLabel("ReportGeneration","exampleInput2")})]})]})),e.push((0,Bt.tZ)("div",{className:"initial-chat-msg-pii-disclaimer",children:Le.Z.getLabel("ReportGeneration","piiDisclaimer")})),e.push((0,Bt.tZ)("div",{className:"initial-chat-msg-question",children:Le.Z.getLabel("ReportGeneration","initialChatMessageQuestion")})),e}_renderEinsteinReportGenDisclaimerPage(){return(0,Bt.BX)("div",{className:"einstein-report-gen-disclaimer-page",children:[(0,Bt.tZ)(ma.Z,{imgUrl:"copilot-onboarding",styling:fa,altText:"Einstein Formula Generation Disclaimer"}),(0,Bt.BX)("div",{className:"einstein-disclaimer-text",children:[(0,Bt.tZ)("h1",{children:Le.Z.getLabel("ReportGeneration","disclaimerPageTitle")}),(0,Bt.tZ)("span",{children:Le.Z.getLabel("ReportGeneration","disclaimerPageMessage")}),(0,Bt.tZ)("span",{children:Le.Z.getLabel("ReportGeneration","disclaimerPageDeclaration")}),(0,Bt.tZ)(It.Z,{className:"disclaimer-got-it",label:Le.Z.getLabel("GenerativeAiGeneral","gotIt"),onClick:()=>this._onDisclaimerGotItClicked()},"gotIt")]})]})}async _onDisclaimerGotItClicked(){this._setHasSeenReportGenDisclaimerPage(!0);try{await h.Z.setReportOnboarding(Ea)}catch{}}_getEinsteinHeaderBarContent(){return(0,Bt.BX)(Bt.HY,{children:[(0,Bt.tZ)(wt.Z,{className:"chat-header-bar-einstein-icon",name:"einstein",category:"utility",variant:"bare",size:"x-small"}),(0,Bt.tZ)("h2",{className:"chat-header-bar-title",children:Le.Z.getLabel("GenerativeAiGeneral","einstein")}),(0,Bt.tZ)(ds.Z,{className:"chat-header-bar-info-popover",body:(0,Bt.BX)("div",{children:[Le.Z.getLabel("ReportGeneration","headerDisclaimer")," ",(0,Bt.tZ)(Es.Z,{href:(e="https://resources.docs.salesforce.com/rel1/doc/en-us/static/pdf/einstein_genai_report_generation_with_q_and_a.pdf","/HelpAndTrainingDoor?version=2&resource="+encodeURIComponent(e)),children:" "+Le.Z.getLabel("GenerativeAiGeneral","learnMore")})]}),id:"report-einstein-panel-button-popover",align:"bottom left",hasStaticAlignment:!0,children:(0,Bt.tZ)(It.Z,{iconCategory:"utility",iconName:"info",variant:"icon",iconSize:"medium"})}),(0,Bt.tZ)(It.Z,{className:"chat-header-bar-close-button",iconCategory:"utility",iconName:"close",iconSize:"x-small",iconVariant:"bare",onClick:()=>this.setState({einsteinPanelOpen:!1,chatPendingStatus:null}),variant:"icon"})]});var e}async _onGenerateReport(e){try{const t=e.split("&&").map((e=>e.trim())),r=t[0],i=t[1];Zt.Z.transactionStart(Ft.Z.USE_EINSTEIN_REPORT_GENERATOR_ASK_QUESTION.getValue()),this.setState({chatPendingStatus:Le.Z.getLabel("ReportGeneration",i?"reportCreationPendingMessage":"findReportTypePendingMessage")});const s=await As.Z.generateReport(r,i);Zt.Z.transactionEnd(Ft.Z.USE_EINSTEIN_REPORT_GENERATOR_ASK_QUESTION.getValue());const n=e.includes(Sa)?"similarReportTypesIntro":"reportGenerationIntro";return this.setState({chatPendingStatus:null}),{description:Le.Z.getLabel("ReportGeneration",n,s.generatedReportMetadata.reportMetadata.reportType.label),highlightContent:s.metadataSummary,actions:[{actionHandler:()=>{Zt.Z.transactionStart(Ft.Z.USE_EINSTEIN_REPORT_GENERATOR.getValue()),this.props.onGenerateReportMetadata&&this.props.onGenerateReportMetadata(s.generatedReportMetadata),Zt.Z.transactionEnd(Ft.Z.USE_EINSTEIN_REPORT_GENERATOR.getValue())},actionLabel:Le.Z.getLabel("ReportGeneration","reportCreationButton")},{actionHandler:e=>{this.setState({newUserInput:r+" && "+e+" && "+Sa}),Zt.Z.transactionStart(Ft.Z.USE_EINSTEIN_REPORT_GENERATOR_WITH_SUGGESTED_TYPE.getValue()),Zt.Z.transactionEnd(Ft.Z.USE_EINSTEIN_REPORT_GENERATOR_WITH_SUGGESTED_TYPE.getValue())},actionLabel:Le.Z.getLabel("ReportGeneration","similarReportTypesButton"),dropDownItems:s.similarReportTypes.map((e=>({label:e.label,actionParam:e.reportType})))}],followUpHandler:yt.Z.has(yt.Z.USER_HAS_EGPT_REPORT_QNA_ENABLED)?async()=>this._answerReportQuestionAction(r,s.generatedReportMetadata):null,applicationName:Ds.C,generationIds:s.generationIds}}catch(e){return{errorMessage:e.message}}finally{this.setState({chatPendingStatus:null})}}_answerReportQuestionAction=async(e,t)=>{this.setState({chatPendingStatus:Le.Z.getLabel("ReportQuestionAnswer","reportQuestionAnswerPendingMessage")});try{const r=await As.Z.answerReportQuestion(e,t);return{description:Le.Z.getLabel("ReportQuestionAnswer","reportQuestionAnswerMessage"),highlightContent:r.answer,applicationName:Ds.B,generationIds:r.generationIds}}catch(e){return{errorMessage:e.message}}finally{this.setState({chatPendingStatus:null})}};_renderEinsteinPanel(){if(yt.Z.has(yt.Z.USER_HAS_EGPT_REPORT_GENERATION_ENABLED)&&this.state.einsteinPanelOpen)return(0,Bt.tZ)("div",{className:"slds-col slds-size_1-of-3 report-einstein-panel",children:this.state.hasSeenReportGenDisclaimerPage?(0,Bt.tZ)(Cs.Z,{initialMessages:this._getInitialChatMessages(),headerBarContent:this._getEinsteinHeaderBarContent(),onSendRequest:e=>this._onGenerateReport(e),placeholder:Le.Z.getLabel("ReportGeneration","reportGenerationInputPlaceholder"),newUserInput:this.state.newUserInput,pendingStatus:this.state.chatPendingStatus}):this._renderEinsteinReportGenDisclaimerPage()})}_getMessageElementId(){return`${this.props.id||""}_report_type_message`}_renderAddBlockDetails(){if(this.props.isAddBlock){let e;const t=Lt().classSet({"report-type-info-message":!0,"report-type-error-message":!this.state.isJoinable});return this.state.isJoinable?this.state.infoMessage&&(e=this.state.infoMessage):e=Le.Z.getLabel("reportBuilder","commonObjectError"),(0,Bt.BX)("div",{children:[(0,Bt.tZ)("div",{id:this._getMessageElementId(),className:t,children:e}),(0,Bt.tZ)(At.Z,{id:this.props.id?`${this.props.id}_defaultColumnsCheckbox`:void 0,className:"report-type-default-columns",labels:{label:Le.Z.getLabel("reportBuilder","includeDefaultColumns")},checked:this.state.areDefaultColumnsIncluded,onChange:(e,{checked:t})=>this._onChangeIncludeColumns(t),onKeyDown:this._onCheckboxKeyDown},"defaultColumns")]})}return(0,Bt.tZ)("div",{})}_renderCancel(){return(0,Bt.tZ)(It.Z,{className:"report-type-cancel",label:Le.Z.getLabel("reportBuilder","cancel"),onClick:this._onClickCancel,buttonRef:this._getCancelButtonRef,onKeyDown:this._onCancelKeyDown},"cancel")}_loadReportStateChanges(){const e=this.state.queryResults,t=[],r=[],i=[],s=[];if(!this.state.tableLoader||null===e)return;const n=this.state.reportTypeSectionList;n.push({label:Le.Z.getLabel("reportBuilder","all"),selected:this.state.noRecommendedData,sectionKey:this.NON_HIDDEN_SECTION_KEY,tabIndex:this.state.noRecommendedData?0:-1});for(let s=0;s<e.length;s++){const o=e[s],a=[];for(let e=0;e<o.reportTypes.length;e++){const t=o.reportTypes[e];this.reportTypeToSectionMap.set(t.type,s),t.isHidden?i.push(t):this.props.isAddBlock&&!t.supportsJoinedFormat||a.push(t)}const l=[];n.push({label:o.label,selected:!1,sectionKey:this.NON_HIDDEN_SECTION_KEY,tabIndex:-1});for(let e=0;e<a.length;e++){const r=new ws(a[e]);t.push(r),l.push(r)}r.push(l)}if(!_().isEmpty(i))for(let e=0;e<i.length;e++){const t=new ws(i[e]);s.push(t)}this.state.reportTypeSelectorPerms?.hasManageCustomReportTypes&&n.push({label:Le.Z.getLabel("reportBuilder","hiddenReportTypes"),selected:!1,sectionKey:this.HIDDEN_SECTION_KEY,tabIndex:-1}),this._reportTypeResult=r,this._currentReportTypeList=t,this._allReportTypeList=t,0===this._selectedReportSectionIndex?this._currentReportTypeList=this.state.assets:this._selectedReportSectionIndex=1;const o=this.props.principalReportType||t[0].getReportType();return this.setState({error:null,reportTypeList:this._currentReportTypeList,hiddenReportTypeList:s,reportTypeSectionList:n,reportTypeListInitialized:!0,reportType:o,prevReportTypeList:0===this._selectedReportSectionIndex?this.state.assets:t,prevReportType:o,tableLoader:!1}),this._queryCommonObjects(o)}_queryReportType(){return h.Z.loadReportTypes().then((e=>{this.setState({queryResults:e}),this.state.recommendedResults&&this._loadReportStateChanges()}),(e=>{this._handleApiError(e)}))}_queryCommonObjects(e){if(this.props.isAddBlock&&this.props.isOpen&&e){const t=this.props.reportTypes;if(!_().isEmpty(t)&&-1===t.indexOf(e))return h.Z.getCommonObjects(this.props.principalReportType,_().concat(t,e)).then((e=>{const t=!_().isEmpty(e);this.setState({isJoinable:t,infoMessage:t?Le.Z.getLabel("reportBuilder","commonObjectDescription",_().map(e,"name").join(", ")):""})}),(e=>{this._handleApiError(e)}));this.setState({isJoinable:!0,infoMessage:""})}}_handleApiError(e){const t=e.responseJson&&e.responseJson[0]||e;this.setState({error:t.message}),this.props.onCancel()}_getSearchedResults(e,t){return e.filter((e=>{const r=t?t.toLowerCase():"";return-1!==e.getLabel().toLowerCase().indexOf(r)}))}_onSearchInputChange=e=>{const t=_().get(e,"target.value");if(this._typeElements=[],_().isEmpty(t))this._onClearSearch();else{const e=this._getSearchedResults(this._currentReportTypeList,t);this.setState({reportTypeList:e,searchTerm:t,scopePopOverOpen:!1})}};_onClearSearch=()=>{this._updateRowIndex=!0,this.setState({reportTypeList:this._currentReportTypeList,searchTerm:"",scopePopOverOpen:!1}),this._searchBox&&this._searchBox.focus()};_onChangeIncludeColumns=e=>{this.setState({areDefaultColumnsIncluded:e})};_onClickCancel=()=>{this.props.onCancel(),this.props.isAddBlock?this._onClearSearch():this._navigateToHome()};_handleStartReport(e){this.state.reportType===e?this._onClickNext():this.setState({reportType:e},(()=>this._onClickNext()))}_onClickNext=()=>{if(this.props.isAddBlock)this.setState({prevReportTypeList:this.state.reportTypeList,prevReportType:this.state.reportType}),this.props.onSelectReportType(this.state.reportType,this.state.areDefaultColumnsIncluded);else{this.props.onSelectReportType(this.state.reportType);const e=this.state.reportTypeList.find((e=>e.type===this.state.reportType).bind(this));0===this._selectedReportSectionIndex&&(Zt.Z.transactionStart(Ft.Z.REPORT_TYPE_RECENTLY_USED.getValue(),{reportType:this.state.reportType}),Zt.Z.transactionEnd(Ft.Z.REPORT_TYPE_RECENTLY_USED.getValue(),{reportType:this.state.reportType})),Zt.Z.markEnd(Ft.Z.CREATE_NEW_REPORT.getValue(),{reportType:this.state.reportType,isHistorical:e&&e.isHistorical}),Zt.Z.transactionStart(Ft.Z.SELECT_REPORT_TYPE.getValue())}};_onErrorModalClose=()=>{this.setState({error:null}),this.props.isAddBlock||this._navigateToHome()};async _onCloseWelcomeMatModal(e){if("dcr-welcome-mat"===e){if(this.setState({isShowingDCRWelcomeMat:!1}),this.state.doNotShowDCRAgain)try{await h.Z.setReportOnboarding(ya)}catch{}}else if("ci-welcome-mat"===e&&(this.setState({isShowingCIWelcomeMat:!1}),this.state.doNotShowCIAgain))try{await h.Z.setReportOnboarding(ba)}catch{}}_navigateToHome(){if(!this.props.isEmbeddedInTCRM)return l.Z.get(g()).navigateToObjectHome("Report")}_getNextIndex(e,t){for(let r=0;r<e.length;r++)if(e[r]?.label===t)return r;return-1}_onKeyDown(e,t,r,i){const s=parseInt(e),n=r?this._sectionElements:this._typeElements,{reportTypeSectionList:o}=this.state;o[t].tabIndex=-1;let a=0;switch(i.keyCode){case Mt.KEY_CODE_DOWN:if(s>=n.length-1)break;Ot().trap(i),a=this._getNextIndex(o,n[s+1].text),-1!==a&&(o[a].tabIndex=0),this.setState({reportTypeSectionList:o},(()=>{n[s+1].focus()}));break;case Mt.KEY_CODE_UP:if(s<=0)break;Ot().trap(i),a=this._getNextIndex(o,n[s-1].text),-1!==a&&(o[a].tabIndex=0),this.setState({reportTypeSectionList:o},(()=>{n[s-1].focus()}));break;case Mt.KEY_CODE_TAB:if(Ot().trap(i),r&&i.shiftKey){this.setState({reportTypeSectionList:o},(()=>{document.getElementsByClassName("slds-button_icon slds-modal__close")[0].focus()}));break}r?this._searchBox.focus():i.shiftKey?_().isEmpty(this.state.searchTerm)?this._searchBox.focus():this._clearButton.focus():this.props.isAddBlock?document.querySelector(".recommended-report-type-picker-container .slds-checkbox input").focus():this._cancelButton.focus();break;case Mt.KEY_CODE_SPACE:Ot().trap(i),r?this._handleSectionClick(s,i):this._handleSelectReportTypeAsset(this.state.reportTypeList[s],null,i)}}_onCancelKeyDown=e=>{this._shouldTabIntoReportTypes(e)&&e.shiftKey&&!this.props.isAddBlock&&(Ot().trap(e),this._typeElements[0].focus())};_onCheckboxKeyDown=e=>{this._shouldTabIntoReportTypes(e)&&e.shiftKey&&(Ot().trap(e),this._typeElements[0].focus())};_onSearchKeyDown=e=>{this._shouldTabIntoReportTypes(e)&&!e.shiftKey&&(Ot().trap(e),this._typeElements[0].focus())};_shouldTabIntoReportTypes(e){return e.keyCode===Mt.KEY_CODE_TAB&&this._typeElements[0]}_getSectionRef(e,t){this._sectionElements||(this._sectionElements=[]),t&&(this._sectionElements[e]=t)}_getSearchRef=e=>{e&&(this._searchBox=e)};_getCancelButtonRef=e=>{e&&(this._cancelButton=e)};_getClearButtonRef=e=>{e&&(this._clearButton=e)}}var va=r(11715);const{BLOCKS:Ra,BOOLEANFILTER:wa,BUCKET:Aa,CHART:Da,CROSS_FILTERS:La,CSF:Ma,DETAILCOLUMNS:Na,FILTER:Oa,GROUPINGACROSS:Pa,GROUPINGDOWN:xa,HIGHLIGHT:Za,MEASURES:Fa,PRESENTATION_OPTIONS:ka,REPORT_TYPE:Ba,SORTBY:Wa,USER_OR_HIERARCHY_FILTER_ID:Ga,USER_OR_HIERARCHY_FILTER_NAME:Ua}=Zr;class Ha extends Ni.Z{constructor(e,t,r,i,s,n,o,a,l,u,d,c,h,p,g,m,_){super(),this._reportType=e,this._blocks=t,this._groupingsAcross=r,this._groupingsDown=i,this._detailColumns=s,this._aggregates=n,this._sortBy=o,this._filters=a,this._reportBooleanFilter=l,this._crossFilters=u,this._highlight=d,this._buckets=c,this._customSummaryFormulas=h,this._chart=p,this._presentationOptions=g,this._userOrHierarchyFilterId=m,this._userOrHierarchyFilterName=_}mutate(e){return this._mutate(e.dashboardJson,new Di.Z(e.dashboardJson))}_mutate(e,t){const r=t.getLens("defaultReportStep").getQuery(),i=r[Ba.getValue()],s=r[Ra.getValue()],n=r[Pa.getValue()],o=r[xa.getValue()],a=r[Na.getValue()],l=r[Fa.getValue()],u=r[Wa.getValue()],d=r[Oa.getValue()],c=r[wa.getValue()],h=r[La.getValue()],p=r[Za.getValue()],g=r[Ma.getValue()],_=r[Aa.getValue()],f=r[Da.getValue()],y=r[ka.getValue()],b=r[Ga.getValue()],C=r[Ua.getValue()];for(const e of m.values(t.getLensesJson()))e.query[Ba.getValue()]=this._reportType,e.query[Ra.getValue()]=this._blocks,e.query[Pa.getValue()]=this._groupingsAcross,e.query[xa.getValue()]=this._groupingsDown,e.query[Na.getValue()]=this._detailColumns,e.query[Fa.getValue()]=this._aggregates,e.query[Wa.getValue()]=this._sortBy,e.query[Oa.getValue()]=this._filters,e.query[wa.getValue()]=this._reportBooleanFilter,e.query[La.getValue()]=this._crossFilters,e.query[Za.getValue()]=this._highlight,e.query[Ma.getValue()]=this._customSummaryFormulas,e.query[Aa.getValue()]=this._buckets,e.query[Da.getValue()]=this._chart,e.query[ka.getValue()]=this._presentationOptions,e.query[Ga.getValue()]=this._userOrHierarchyFilterId,e.query[Ua.getValue()]=this._userOrHierarchyFilterName;return new Ha(i,s,n,o,a,l,u,d,c,h,p,_,g,f,y,b,C)}}var Va=r(28713);const{BLOCKS:ja,BOOLEANFILTER:qa,BUCKET:za,CHART:$a,CSF:Qa,DETAILCOLUMNS:Ya,FILTER:Ka,GROUPINGACROSS:Ja,GROUPINGDOWN:Xa,MEASURES:el,REPORT_TYPE:tl,SORTBY:rl,STACKED_SUMMARIES:il}=Zr;const sl=new class{processSwitch(e,t){return e?this.switchToMultiBlock(t):this.switchFromMultiBlock(t)}switchToMultiBlock(e){const t=hr.get(),r=e.getLens("defaultReportStep"),i=r.getQuery(),s=r.getJson().reportMetadata.reportMetadata.reportType,n="B0",o=Va.Z.makeBlockLabel(s.label,1),a=[{blockId:n,name:o,reportType:s}],u=i[Ja.getValue()],d=m.map(i[za.getValue()],"developerName");let c=(0,Vt.deepCopy)(i[Xa.getValue()]),h=(0,Vt.deepCopy)(i[Ya.getValue()]),p=(0,Vt.deepCopy)(i[el.getValue()]),g=(0,Vt.deepCopy)(i[rl.getValue()]),_=(0,Vt.deepCopy)(i[Ka.getValue()]);const f=(0,Vt.deepCopy)(i[Qa.getValue()]),y=(0,Vt.deepCopy)(i[$a.getValue()]),b=m.remove(c,(e=>-1!==d.indexOf(e.name)));m.isEmpty(u)||-1!==d.indexOf(u[0].name)||(m.isEmpty(c)?c=[u[0]]:(c.splice(1,0,u[0]),u.length>1&&b.push(u[1]))),h=m.map(m.filter(h,(e=>-1===d.indexOf(e))),(e=>t.addBlockPrefixToColumnName(e,n))),m.isEmpty(g)||-1!==d.indexOf(g[0].sortColumn)?g=[null]:g[0].sortColumn=t.addBlockPrefixToColumnName(g[0].sortColumn,n),p=m.map(p,(e=>t.addBlockPrefixToColumnName(e,n))),m.isEmpty(y)||(y.summaries=m.map(y.summaries,(e=>t.addBlockPrefixToColumnName(e,n))));const C=l.Z.get(oe).getBooleanFilter();let E=m.filter(_,(e=>e.type===va.CUSTOM.getName())).length,S=E;for(let e=_.length-1;e>=0;e--){const t=_[e];t.type===va.CUSTOM.getName()?(-1!==d.indexOf(t.filter.column)&&(C&&C.getLogic()&&C.delete(S,E),_.splice(e,1),E--),S--):t.type===va.DATACATEGORY.getName()&&_.splice(e,1)}_=[_];const T=[C?C.getLogic():null];return Va.Z.cleanseFormulas(f,c,b,s.type),m.isEmpty(y)||Ii.get().updateChartGroupings(y,c),new Ha(s,a,[],c,h,p,g,_,T,[],null,null,f,y,void 0,null,null)}switchFromMultiBlock(e){const t=hr.get(),r=e.getLens("defaultReportStep"),i=r.getQuery(),s=new $t(r.getJson().reportMetadata);let n=i[tl.getValue()];const o=i[ja.getValue()],a=(0,Vt.deepCopy)(i[Xa.getValue()]);let l=(0,Vt.deepCopy)(i[Ya.getValue()]),u=(0,Vt.deepCopy)(i[el.getValue()]),d=(0,Vt.deepCopy)(i[rl.getValue()]),c=(0,Vt.deepCopy)(i[Ka.getValue()]),h=(0,Vt.deepCopy)(i[qa.getValue()]);const p=(0,Vt.deepCopy)(i[Qa.getValue()]),g=(0,Vt.deepCopy)(i[$a.getValue()]);if(!o||0===o.length)return null;n=o[0].reportType;const _=o[0].blockId,f=0===a.length;if(c&&c.length&&(c=c[0]),h&&h.length&&(h=h[0]),l=m.map(m.filter(l,(e=>t.isColumnFromBlock(e,_))),(e=>t.unprefixBlockColumnName(e))),u=m.map(m.filter(u,(e=>t.isColumnFromBlock(e,_))),(e=>t.unprefixBlockColumnName(e))),m.isEmpty(d)||(d[0]?(d=[d[0]],d[0].sortColumn=t.unprefixBlockColumnName(d[0].sortColumn)):d=[]),!m.isEmpty(g)&&g.summaries&&(g.summaries=m.map(g.summaries,(e=>t.unprefixBlockColumnName(e)))),f||m.remove(c,(e=>e.type===va.ROWLIMIT.getName())),p){for(const e of Object.keys(p)){const r=p[e];f||r.crossBlock||r.reportType!==n.type||t.getBlockId(e)?(delete p[e],m.pull(l,e),m.pull(u,e)):delete r.reportType}const e=Object.keys(p);let r=e.length;if(r>5){for(const t of e)if(-1===u.indexOf(t)&&(delete p[t],--r<=5))break;const t=Object.keys(p).splice(5);for(const e of t)delete p[e];m.pull(u,...t),m.pull(l,...t)}}Va.Z.updateGroupingsWithNewReportType(s,n.type,a,g),m.isEmpty(g)||Ii.get().updateChartSummaries(g,u);const y={};return y[il.getValue()]=!0,new Ha(n,void 0,[],a,l,u,d,c,h,[],null,[],p,g,y,null,null)}};var nl=r(70377);class ol extends tr.Z{constructor(e){super("ReportMultiBlockPlugin"),this._reportTypePerms=e}setup(){this._updateState(this._getCurrentReportMetadata())}getRuntimeStepId(){return gr.TABLE.getValue()}onRuntimeStepResult(e){const t=this._getResultsMetadata(e);t&&this._updateState(t.getReportMetadata())}getTitleRenderable(){let e;return this._stateDelegate.getState().isMultiBlock&&(e=(0,Bt.tZ)(It.Z,{className:"report-action-addBlock",label:Le.Z.getLabel("reportBuilder","addBlock"),disabled:this._stateDelegate.getState().isAddBlockDisabled,iconPosition:"left",iconCategory:"utility",iconName:"relate",iconSize:"medium",onClick:this._openAddBlockModal.bind(this)},"report-action-addBlock")),(0,Bt.BX)("div",{className:"mb-actions",children:[(0,Bt.tZ)(fs,{isEnabled:this._stateDelegate.getState().isSwitcherEnabled,isMultiBlock:this._stateDelegate.getState().isMultiBlock,onChange:this._onFormatChange.bind(this)},"report-format-switcher"),e]},"mb-actions")}getFloatingRenderable(){if(this._stateDelegate.getState().errorMessage)return(0,Bt.tZ)("div",{children:(0,Bt.tZ)(kt.Z,{isOpen:!0,error:this._stateDelegate.getState().errorMessage,onClose:this._handleDismissError})},"report-mb-error-modal");if(this._stateDelegate.getState().isMultiBlock){const e=this._getCurrentReportMetadata().reportMetadata,t=m.uniq(m.map(e.blocks,"reportType.type")),r=m.isEmpty(t)?"":e.reportType.type;return this._reportTypePerms?.isRecommendedReportTypeVisible?(0,Bt.tZ)("div",{children:(0,Bt.tZ)(Ia,{isOpen:!!this._stateDelegate.getState().isAddBlockModalShown,isAddBlock:!0,reportTypes:t,principalReportType:r,onSelectReportType:this._handleSelectReportType.bind(this),onCancel:this._handleCancelAddBlock.bind(this),reportTypeSelectorPerms:this._reportTypePerms})},"report-add-block-modal"):(0,Bt.tZ)("div",{children:(0,Bt.tZ)(Wt,{isOpen:!!this._stateDelegate.getState().isAddBlockModalShown,isAddBlock:!0,reportTypes:t,principalReportType:r,onSelectReportType:this._handleSelectReportType.bind(this),onCancel:this._handleCancelAddBlock.bind(this)})},"report-add-block-modal")}}_onFormatChange(e){if(this._stateDelegate.getState().isSwitcherEnabled&&this._stateDelegate.getState().isMultiBlock!==e){const t=sl.processSwitch(e,this._sdk.getDashboardMetadata());t&&this._sdk.executeMutators([t])}}_openAddBlockModal(){this._stateDelegate.getState().isMultiBlock&&this._setState({isAddBlockModalShown:!0})}_handleSelectReportType(e,t=!1){if(this._stateDelegate.getState().isMultiBlock){this._setState({isAddBlockModalShown:!1});const r=this._getCurrentReportMetadata(),i=r.reportMetadata,s=m.uniq(m.map(i.blocks,"reportType.type"));if(s.length>0&&-1===s.indexOf(e)){const r=i.reportType?i.reportType.type:e;h.Z.getJoinedReportTypes(r,m.concat(s,e)).then((r=>{const i=this._findBlockOfType(r,e);this._addBlock(r,i,t)}),(e=>{this._setState({errorMessage:Ri.Z.getMessage(e)})}))}else h.Z.getReportType(e).then((e=>{const i=0===s.length?e:r;this._addBlock(i,e.reportMetadata,t)}),(e=>{this._setState({errorMessage:Ri.Z.getMessage(e)})}))}}_findBlockOfType(e,t){return m.find(e.reportMetadata.blocks,(e=>e.reportType.type===t))}_addBlock(e,t,r){this._sdk.executeMutators([nl.Z.make(t,r,this._sdk.getDashboardMetadata(),e)])}_handleCancelAddBlock(){this._setState({isAddBlockModalShown:!1})}_handleDismissError(){this._setState({errorMessage:""})}_getCurrentReportMetadata(){return this._sdk.getDashboardMetadata().getLens(this.getRuntimeStepId()).getParameter("reportMetadata")}_updateState(e){const t=e&&e.reportMetadata,r=t&&t.reportFormat===Yt.MULTI_BLOCK.getCode(),i=r&&t.blocks.length>=5,s=N.reportConfig&&N.reportConfig.isLightningJoinedReportPermEnabled&&e&&(r?t.blocks.length>0:!1!==e.reportTypeMetadata.supportsJoinedFormat)&&!new $t(e).isDataCloudReport();this._setState({isMultiBlock:r,isSwitcherEnabled:s,isAddBlockDisabled:i})}_getResultsMetadata(e){return e.getMetadata()}_setState(e){const t=this._stateDelegate.getState();m.isMatch(t,e)||this._stateDelegate.setState(e)}}class al extends tr.Z{constructor(){super("ReportDisableRefreshPlugin")}getInitialState(){return{isWidgetQuerying:!1}}getDisabledHeaderActionIds(){return this._stateDelegate.getState().isWidgetQuerying?new Set(["refreshReport"]):new Set([])}onUpdateLoadingState(e){this._setState({isWidgetQuerying:e})}_setState(e){const t=this._stateDelegate.getState();m.isMatch(t,e)||this._stateDelegate.setState(e)}}var ll=r(44023),ul=r(24127),dl=r(59150),cl=r(72673);const hl="one",pl=["ReportSaveAction","ReportExportAction","LightningReportEditAction"];class gl extends pt.Component{static defaultProps={reportMode:F().EDIT,showInsights:!1};state={localCustomFilterValues:this.props.customFilterValues,describedReportMetadata:this._adjustReportMetadataForRun(this.props.reportMetadata),reportActions:void 0,error:null,trendConfig:null,insightsPanelOpen:!1,isAlertOpen:!1};_metadataProvider=new qt.ZP(!0);_isMounted=!1;_abortController=new AbortController;UNSAFE_componentWillMount(){I().on("reportBuilder:trendUpdate",this._handleTrendUpdate,this),I().on("reportBuilder:updateActions",this._updateActions,this)}componentDidMount(){this._isMounted=!0,this._loadReportMetadata()}componentDidUpdate(e){_().isEqual(this.props.linkedFilters,e.linkedFilters)||this.setState({describedReportMetadata:void 0},(()=>{this._loadReportMetadata()}))}componentWillUnmount(){this._isMounted=!1,this._abortController.abort(),I().off("reportBuilder:trendUpdate",this._handleTrendUpdate,this),I().off("reportBuilder:updateActions",this._updateActions,this)}_handleTrendUpdate(e){l.Z.get(d()).updateConfig({trendConfig:e}),this.setState({trendConfig:e})}_updateActions(e){e?this._setReportAction(e):this.props.reportId&&this._makeCancelablePromise(h.Z.getReportActions(this.props.reportId,!1)).then((e=>{this._setReportAction(_().map(e,"ApiName"))}),this._onError.bind(this))}_setCalcInsightAlert(){const e=new(Qt())(this.state.describedReportMetadata).getReportTypeMetadata().isCalculatedInsight()&&!this.props.reportId;this.setState({isAlertOpen:e})}_loadReportMetadata(){if(this.state.describedReportMetadata)this.props.reportId&&Zt.Z.markEnd(this._getTransactionName(),this._getReportAttributes());else{const e=this.props.reportId?"describeReport":"getReportType";this._makeCancelablePromise(h.Z[e](this.props.reportId||this.props.reportType)).then((e=>{const t=e&&e.reportMetadata,r=t&&t.historicalSnapshotDates;!_().isEmpty(this.state.localCustomFilterValues)&&r&&r.length&&(l.Z.get(g()).showToastMessage(Le.Z.getLabel("reportBuilder","urlFilterRemovedWarning")),this.setState({localCustomFilterValues:{}})),this._loadReportMetadataCallback(e),this._setCalcInsightAlert(),this.props.reportId?Zt.Z.markEnd(this._getTransactionName(),this._getReportAttributes()):(Zt.Z.transactionEnd(Ft.Z.SELECT_REPORT_TYPE.getValue(),{reportType:this.props.reportType}),this._setReportAction(pl))}),this._onError.bind(this))}this._getReportConfig(),this._getReportIsPreviewAutoRefresh(),this.props.reportId&&this._lookupTrending()}_getReportIsPreviewAutoRefresh(){let e=(0,jt.fp)("isPreviewAutoRefresh");null==e&&(e=!1,(0,jt._m)("isPreviewAutoRefresh",e)),l.Z.get(d()).updateConfig({reportConfig:{isPreviewAutoRefresh:e}})}_getReportConfig(){this._makeCancelablePromise(h.Z.getReportConfig(this.props.reportId)).then((e=>{const t=e[0].map((e=>e.ApiName)),{perms:r,gates:i,values:s}=e[1],n={};[yt.Z.USER_CAN_RUN_ANALYSIS.code,yt.Z.ORG_HAS_EDI_ENABLED.code,yt.Z.IS_DATA_CLOUD_ENABLED.code,yt.Z.USER_HAS_EGPT_FORMULA_GENERATION_ENABLED.code,yt.Z.CAN_SHOW_SUMMARY_FILTER.code,yt.Z.IS_INLINE_EDITING_ENABLED.code].forEach((e=>{_().has(r,e)&&(n[e]=r[e])})),l.Z.get(d()).updateConfig({reportConfig:r,core:{perms:n,gates:i,...s}}),this._setReportAction(t)}),this._onError.bind(this))}_lookupTrending(){this._makeCancelablePromise(h.Z.getTrendingMetadata()).then((e=>{l.Z.get(d()).updateConfig({trendConfig:e}),this.setState({trendConfig:e})})).catch((e=>{}))}_getReportAttributes(){let e="",t=!1,r=0,i=!1;if(this.state.describedReportMetadata){const s=new(Qt())(this.state.describedReportMetadata);e=s.getReportFormat(),t=s.isHistorical(),r=s.getTextWrappedColumnIndices(!0).length+s.getTextWrappedColumnIndices(!1).length,i=s.isDataCloudReport()}return{reportId:this.props.reportId,reportFormat:e,newRunPage:!0,isHistorical:t,numColumnsTextWrapped:r,isDataCloud:i}}_onError(e){this._isMounted&&this.setState({error:e.message})}_onCloseErrorModal=()=>{this.props.isEmbeddedInTCRM&&this.props.viewManager&&this.props.closeView?this.props.closeView():l.Z.get(g()).navigateToObjectHome("Report")};_adjustReportMetadataForRun(e){if(!e)return;let t=e;(0,dl.Z)().flattenMultiBlockMetadata(t);const r=new(Qt())(t);return 0===r.getGroupingDownColumns().length&&(0!==r.getGroupingAcrossColumns().length?(t=(0,Vt.deepCopy)(t),t.reportMetadata.groupingsDown=(0,Vt.deepCopy)(t.reportMetadata.groupingsAcross),t.reportMetadata.groupingsAcross=[],_().isEmpty(r.getCustomSummaryFormula())||_().each(t.reportMetadata.customSummaryFormula,(e=>{"custom"===e.acrossGroupType&&(e.downGroupType="custom",e.downGroup=e.acrossGroup,e.acrossGroup=null),e.acrossGroupType="all"}))):r.getShowDetails()||(t=(0,Vt.deepCopy)(t),t.reportMetadata.hasDetailRows=!0)),this._adjustReportScopeInfo(t.reportMetadata,t.reportTypeMetadata),t}_adjustReportScopeInfo(e,t){if(e.scope&&t.scopeInfo)if(this.props.reportId&&e.scope===hl){const e=_().findIndex(t.scopeInfo.values,(function(e){return e.value===hl}));t.scopeInfo.values[e].label=Le.Z.getLabel("reportBuilder","scopeFilterDefaultLabel")}else if(_().remove(t.scopeInfo.values,(function(e){return e.value===hl})),e.scope===hl){const r=t.scopeInfo.values[0].value;e.scope=r,t.scopeInfo.defaultValue=r}else t.scopeInfo.defaultValue=e.scope}_setReportAction(e){let t=e;this.props.isEmbeddedInTCRMStudio&&(t=t.filter((e=>e!==Ur.ADD_TO_CAMPAIGN.getCode()))),this._reportLayoutSwitcherPlugin&&this._reportLayoutSwitcherPlugin.setReportActions(t),this.setState({reportActions:t})}_loadReportMetadataCallback(e){this.props.loadReportMetadataCallback&&this.props.loadReportMetadataCallback(new(Qt())(e)),this.setState({describedReportMetadata:this._adjustReportMetadataForRun(e)})}_getDashboardRCRef=e=>{window.testMode&&(document._dashboardRC=e)};_getInitialLayoutName(){if(this.state.describedReportMetadata)return(0,Er.pf)(this.state.describedReportMetadata,this.props.reportMode)}_canAccessInsightsPlugin(){const e=new(Qt())(this.state.describedReportMetadata),t=e.getReportFormat(),r=e.getHistoricalMetadata().isHistoricalReport(),i=e.isDataCloudReport();return yt.Z.has(yt.Z.USER_CAN_RUN_ANALYSIS)&&yt.Z.has(yt.Z.ORG_HAS_EDI_ENABLED)&&this._isView()&&(t===Kt().SUMMARY.getCode()||t===Kt().TABULAR.getCode())&&!r&&!i}_getTransactionName(){return this._isView()?Ft.Z.RUN_REPORT.getValue():Ft.Z.EDIT_REPORT.getValue()}_setWindowTitle(e){this._isView()&&l.Z.get(g()).setWindowTitle(e.reportMetadata.name)}_getLinkedFilters(e){return this.state.describedReportMetadata&&(0,dl.Z)().isMultiblockFormat(this.state.describedReportMetadata.reportMetadata)?[]:this.props.linkedFilters}_isView(){return this.props.reportMode===F().VIEW}_getReportPlugins(){if(!this._reportPlugins){const e=this.state.describedReportMetadata;this._reportLayoutSwitcherPlugin=new ls(this.state.reportActions),this._reportPlugins=[this._reportLayoutSwitcherPlugin,new rr,new us.Z,new al],this.props.viewManager&&this._reportPlugins.push(new dr(this.props.viewManager));const t=this.props.extraPluginsForView;this._reportPlugins=[...this._reportPlugins,...t],e&&(this._reportPlugins.push(new ol(this.props.reportTypeSelectorPerms)),this._canAccessInsightsPlugin()&&this._reportPlugins.push(new Cr(e.reportMetadata,this._toggleInsightsPanel.bind(this),e.reportExtendedMetadata)))}return this._reportPlugins}_toggleInsightsPanel(e){this.setState({insightsPanelOpen:e})}_makeCancelablePromise(e){return new Promise(((t,r)=>(this._abortController.signal.aborted&&r(this._abortController.signal.reason),this._abortController.signal.addEventListener("abort",(()=>{r(this._abortController.signal.reason)})),e.then(t,r))))}_renderReportBuilder(){this._setWindowTitle(this.state.describedReportMetadata);const e=new is.Z(this.state.describedReportMetadata,this.state.reportActions,this.props.reportMode,this.state.insightsPanelOpen,new zt.Z([],this._getLinkedFilters(),0,!1),this.state.localCustomFilterValues).build();return(0,Bt.tZ)(Xt(),{ref:this._getDashboardRCRef,commandInvoker:new rs.Z(50),metadata:e,showWidgetActions:!1,delegate:new ts(this.state.reportActions,this._canAccessInsightsPlugin(),this.state.insightsPanelOpen,this.props.extraPluginsForView.map((e=>e.getName())),this.props.viewManager),lensProvider:new ll.Z,widgetProvider:new ul.Z(this.props.reportMode),gridRows:Ht().Type.rowsOfSubpixelHeight(18),plugins:this._getReportPlugins(),metadataProvider:this._metadataProvider,initialLayoutName:this._getInitialLayoutName(),inlineEditProvider:new cl.Z,onLoaded:this.props.onLoaded,useImmutableMetadata:!1})}_renderCalculatedInsightAlert(){if(this.state.isAlertOpen)return(0,Bt.tZ)(Gt.Z,{dismissible:!0,icon:(0,Bt.tZ)(wt.Z,{category:"utility",name:"info",size:"x-small"}),labels:{heading:Le.Z.getLabel("reportBuilder","calcInsightAlert")},onRequestClose:()=>{this.setState({isAlertOpen:!1})}})}render(){if(this.state.error)return(0,Bt.tZ)(kt.Z,{isOpen:!0,error:this.state.error,onClose:this._onCloseErrorModal});if(this.state.describedReportMetadata&&this.state.reportActions){const e=this._renderReportBuilder();let t;if(this.state.describedReportMetadata){t=this.state.describedReportMetadata.reportMetadata.description}const r=Lt().classSet({reportBuilder:!0,"reportBuilder-view":this._isView(),"reportBuilder-with-description":t});return(0,Bt.BX)("div",{className:r,id:`report-${this.props.reportType||this.props.reportId}`,children:[this._renderCalculatedInsightAlert(),e]})}return(0,Bt.tZ)("div",{className:"loading"})}}var ml=r(38750),_l=r.n(ml);function fl({isEmbeddedInTCRM:e=!1,containerClassname:t="report-app-services",children:r}){const{content:i,error:s=null}=r;return e?(0,Bt.BX)("div",{className:t,children:[i,s]}):(0,Bt.tZ)("div",{className:t,children:(0,Bt.BX)($n.u.Provider,{value:{notifications:[],addNotification(e){l.Z.get(g()).showToastMessage(e.heading,e.type.name.toLowerCase())}},children:[i,s,(0,Bt.tZ)("div",{id:"wave-tooltip",children:(0,Bt.tZ)(_l(),{additionalClassName:"slds-popover__body",additionalContainerClassName:"slds-popover slds-popover_tooltip"})})]})})}r(15949);const yl="report:setReportParam";class bl extends pt.Component{static contextType=o.Z;static childContextTypes={appContext:mt().instanceOf(P.Z).isRequired,appServices:mt().shape({messageHandler:mt().instanceOf(Tt).isRequired,idManager:mt().instanceOf(ft).isRequired}).isRequired};static defaultProps={reportMode:F().EDIT,showInsights:!1,extraPluginsForView:[]};state={reportType:this.props.reportType,reportId:null,reportMode:this.props.reportMode,error:null,isReportPickerOpen:!this.props.reportId&&!this.props.reportType,reportTypePermissions:null,reportMetadata:null};getChildContext(){return{appContext:this.props.appContext,appServices:this._appServices}}constructor(e){super(e),this._appServices={messageHandler:new Tt(l.Z.get(d()),e.appContext),idManager:new ft(e.appContext)}}componentDidMount(){I().on(yl,this._setReportParam),this._isUsingAuraLogger()||(window.onerror=this._onError),this.getReportTypePermissions()}componentWillUnmount(){I().off(yl,this._setReportParam,this),this._isUsingAuraLogger()||(window.onerror=null)}async getReportTypePermissions(){let e={isRecommendedReportTypeVisible:!0,hasManageCustomReportTypes:!1,hasReportTypeSemanticSearch:!1,isDataCloudEnabled:!1,isCIGaterEnabled:!1};try{const t=l.Z.get(d()).getReportConfig();if(t)e={isRecommendedReportTypeVisible:t.hasRecommendedReportType,hasManageCustomReportTypes:t.canManageCustomReportTypes,hasReportTypeSemanticSearch:t.hasReportTypeSemanticSearch,isDataCloudEnabled:t.isDataCloudEnabled,isCIGaterEnabled:t.isCIGaterEnabled};else{const t=await h.Z.getReportTypePermissions();if(t&&(e={isRecommendedReportTypeVisible:t.isRecommendedReportTypeVisible,hasManageCustomReportTypes:t.hasManageCustomReportTypes,hasReportTypeSemanticSearch:t.hasReportTypeSemanticSearch,isDataCloudEnabled:t.isDataCloudEnabled,isCIGaterEnabled:t.isCIGaterEnabled}),!this._needLoadBuilder())try{const e=await h.Z.getReportConfig(),{perms:t,gates:r,values:i}=e[1],s={};[yt.Z.USER_HAS_EGPT_REPORT_GENERATION_ENABLED.code,yt.Z.USER_HAS_EGPT_REPORT_QNA_ENABLED.code].forEach((e=>{(0,m.has)(t,e)&&(s[e]=t[e])})),l.Z.get(d()).updateConfig({core:{perms:s,gates:r,...i}})}catch(e){}}this.setState({reportTypePermissions:e})}catch(t){this.setState({reportTypePermissions:e})}}_onError=(e,t,r,i)=>{this.setState({error:t&&r&&i?`${e}\nthrows at ${t}:${r}:${i}`:e})};_onCloseErrorModal=()=>{this.setState({error:null})};_onCloseReportPicker=()=>{this.setState({isReportPickerOpen:!1}),this.props.closeView&&this.props.closeView()};_handleSelectReportType=e=>{this.setState({reportType:e,isReportPickerOpen:!1})};_handleGeneratingReportMetadata=e=>{this.setState({reportMetadata:e})};_setReportParam=e=>{this.setState({reportId:e.reportId,reportType:e.reportType,reportMode:F().getEnumByValue(e.reportMode||"edit")})};_isUsingAuraLogger(){return window.$A.logger}_needLoadBuilder(){return this.props.reportId||this.props.reportMetadata||this.state.reportType||this.state.reportId||this.state.reportMetadata}_onRequestIconPath=({category:e,name:t})=>{const r=O().core.auraApp?"_":"-",i=this.context===R.Z.RTL?`symbols${r}rtl.svg`:"symbols.svg",s=O().core.sldsIconPath;return s&&`${s}/${e}-sprite/svg/${i}#${t}`};_renderContent(){return this._needLoadBuilder()?(0,Bt.tZ)(gl,{customFilterValues:this.props.customFilterValues,reportId:this.props.reportId||this.state.reportId,reportType:this.state.reportType,reportMetadata:this.props.reportMetadata||this.state.reportMetadata,reportMode:this.state.reportMode,linkedFilters:this.props.linkedFilters,showInsights:this.props.showInsights,loadReportMetadataCallback:this.props.loadReportMetadataCallback,viewManager:this.props.viewManager,extraPluginsForView:this.props.extraPluginsForView??[],reportTypeSelectorPerms:this.state.reportTypePermissions,onLoaded:this.props.onLoaded,isEmbeddedInTCRM:this.props.isEmbeddedInTCRM??!1,isEmbeddedInTCRMStudio:this.props.isEmbeddedInTCRMStudio??!1,closeView:this.props.closeView}):!1===this.state.reportTypePermissions?.isRecommendedReportTypeVisible?(0,Bt.tZ)(Wt,{isOpen:this.state.isReportPickerOpen,onSelectReportType:this._handleSelectReportType,onCancel:this._onCloseReportPicker,isEmbeddedInTCRM:this.props.isEmbeddedInTCRM}):!0===this.state.reportTypePermissions?.isRecommendedReportTypeVisible?(0,Bt.tZ)(Ia,{isOpen:this.state.isReportPickerOpen,onSelectReportType:this._handleSelectReportType,onGenerateReportMetadata:this._handleGeneratingReportMetadata,onCancel:this._onCloseReportPicker,isEmbeddedInTCRM:this.props.isEmbeddedInTCRM,isEmbeddedInTCRMStudio:this.props.isEmbeddedInTCRMStudio,reportTypeSelectorPerms:this.state.reportTypePermissions}):void 0}_renderError(){if(this.state.error)return(0,Bt.tZ)(kt.Z,{isOpen:!0,error:this.state.error,errorFoundLabel:"Uncaught JS error found, please correct it.",onClose:this._onCloseErrorModal})}render(){return(0,Bt.tZ)(_t.Z,{onRequestIconPath:this._onRequestIconPath,iconPath:O().core.sldsIconPath,children:(0,Bt.tZ)(bt.Z.Provider,{value:this._appServices,children:(0,Bt.tZ)(fl,{isEmbeddedInTCRM:this.props.isEmbeddedInTCRM,containerClassname:"reportBuilderContainer",children:{content:this._renderContent(),error:this._renderError()}})})})}}const Cl="reportFilters";i({polyfill:!0,attributeName:"data-href"}),window.edge={config:N};window.lightningReportApp={async load(e){const t=document.getElementById("report-main");if(null==t)throw new Error("Missing #report-main element.");window.edge.mediator=T;const r=c.getQueryParams(window.location.href),i=r.get("referrer"),d=w.D(),g=new P.Z({appInstanceId:d,appStartTime:0,chromeMode:x.Z.ASSET_VIEW,analyticsMode:y.Z.REPORT_BUILDER,referrer:i?M.Z.fromUrlParam(i):void 0,pageContext:void 0,licenseType:void 0,embeddedContext:void 0,openLocation:A.Z.getDefaultValue(),showHeader:!0,showTitle:!0,showSharing:!1,showPostToSlack:!1,enableNotifications:!1,enableSubscriptions:!1,hideOnError:!1,height:void 0,staticResourceMode:"",appRootElement:t,isS1Mobile:!1,isConsoleNav:!1,inLWR:!1,isLWCNative:!1,wasBackgroundedPreRender:!1,isInitialRender:!0});ht.registerServices(e,d);const _=l.Z.get(v.Z);_.start({appInstanceId:d}),_.trigger(new E(g,l.Z.get(u)).build()),_.trigger(new S.e3(d,"","/","",performance.now(),!0,{})),n.Z.setAssetsPath("/projRes/ui-analytics-reporting"),n.Z.setAppElement("#report-main"),h.Z.getOrgEdition().catch((e=>{}));const f=r.get("reportId"),b="true"===r.get("isView")?Z.VIEW:Z.EDIT,C="true"===r.get("showInsights"),I=b===Z.VIEW?function(e){const t=e.get(Cl);if(!t)return[];let r;try{r=JSON.parse(t)}catch(e){r=[]}return r?.map((e=>({type:va.LINKED.getName(),filter:(0,m.omit)(e,"isContextFilter")})))}(r):[];let N={};try{const e=r.get("filterValues");e&&(N=JSON.parse(e))}catch(e){}f&&"true"===r.get("clearStoredActions")&&l.Z.get(p).clearStoredDescribe(f);const O=e?e.reportMetadata:null;l.Z.get(p).hideSpinner();let F="/lightning/r";e&&e.isInCommunityContext&&(F=(e.sitePrefix?e.sitePrefix:"")+"/s");const k=new D.Z([],[],{appContext:null,rootPath:F,handleError:()=>{},shouldOpenInNewWindow:()=>!0,openInNewWindow:()=>{},initialRouteError:void 0});s.render((0,Bt.tZ)(o.Z.Provider,{value:R.Z.getDirection(),children:(0,Bt.tZ)(L.Z.Provider,{value:{router:k},children:(0,Bt.tZ)(a.Z,{renderTo:".reportBuilderContainer",children:(0,Bt.tZ)(bl,{customFilterValues:N,reportId:f,reportMetadata:O,reportMode:b,linkedFilters:I,showInsights:C,appContext:g})})})}),t)},unload:()=>s.unmountComponentAtNode(document.getElementById("report-main"))},window!==window.parent||window.isUnitTest||window.lightningReportApp.load()},27702:(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var i=r(8429),s=r(90554),n=r(67883),o=r(49842),a=r(1806),l=r(36563),u=r(62816),d=r(86866),c=r(41556),h=r(54191),p=r(21891),g=r(56531),m=r(53361),_=r(17636),f=r(44426),y=r(43677),b=r(19422),C=r(92763);const E=[new g],S="isPreview",T="createReportInstance",I="requestOrigin",v="maskComponentWhenRendering",R="shouldRenderWidgetOnError",w="disableDragAndDrop",A="isUpdateMru";class D extends h{constructor(e,t,r,i,s,n={}){super(),this._reportMetadata=e,this._reportActions=t,this._reportMode=r,this._isInsightsMode=i,this._customFilterValues=n,this._dynamicFilterManager=s}build(){const e=super.build();return this._cleanseDashboardJson(e.getJson()),e}_getLabel(){const{reportMetadata:e}=this._reportMetadata;if(e.id||e.name)return e.name;const t=i.Z.getLabel("reportBuilder","newReport",e.reportType.label);return t.length>40?i.Z.getLabel("reportBuilder","genericNewReport"):t}_getDescription(){const{reportMetadata:e}=this._reportMetadata;return e.id?e.description:""}_getDatasets(){return this._reportMetadata.reportTypeMetadata.isDataCloud?[]:(this._dataset||(this._dataset=new c.Dataset(this._getId(),this._getLabel(),this._getLabel(),null,this._reportMetadata)),[this._dataset])}_getDatasetId(){return this._getDatasets().length>0?this._getDatasets()[0].datasetId:null}_getPermissions(){return this._permissions?this._permissions:this._permissions=new c.Permissions(!0,!0,!1)}_getId(){return(this._reportMetadata.reportMetadata.reportType?this._reportMetadata.reportMetadata.reportType.type:void 0)||"typeless_report"}_getSteps(){return[this._getTableStep(),this._getChartStep(),this._getDetailsTableStep()]}_getTableStep(){return this._tableStep||(this._tableStep=c.Step.ofType(d.Z.REPORT.getCode()).setId(f.TABLE.getValue()).setQuery(this._getStepQuery()).setParameter("originalMetadata",(0,s.deepCopy)(this._reportMetadata)).setParameter("reportMetadata",this._reportMetadata).setParameter("reportActions",this._reportActions).setParameter(S,this._isEditMode()).setParameter(T,this._isInsightsMode).setParameter(A,this._reportMode!==_.THUMBNAIL).setParameter(I,this._getRequestOrigin())),this._tableStep}_getChartStep(){return this._chartStep||(this._chartStep=c.Step.ofType(d.Z.REPORT.getCode()).setId(f.CHART.getValue()).setQuery(this._getStepQuery()).setParameter("isChart",!0).setParameter("originalMetadata",(0,s.deepCopy)(this._reportMetadata)).setParameter("reportMetadata",this._reportMetadata).setParameter("skipAPI",!1).setParameter("selectMode",this._isEditMode()||this._reportMetadata.reportMetadata.reportFormat===n.MULTI_BLOCK.getCode()?a.SelectMode.NONE.getCode():a.SelectMode.SINGLE.getCode()).setParameter(S,this._isEditMode()).setParameter(T,this._isInsightsMode).setParameter(A,this._reportMode!==_.THUMBNAIL).setParameter(I,this._getRequestOrigin())),this._chartStep}_getDetailsTableStep(){return this._detailsTableStep||(this._detailsTableStep=c.Step.ofType(d.Z.REPORT.getCode()).setId(f.DETAIL_TABLE.getValue()).setQuery(this._getStepQuery()).setParameter("originalMetadata",(0,s.deepCopy)(this._reportMetadata)).setParameter("reportMetadata",this._reportMetadata).setParameter(S,this._isEditMode()).setParameter(T,this._isInsightsMode).setParameter(A,this._reportMode!==_.THUMBNAIL).setParameter(I,this._getRequestOrigin())),this._detailsTableStep}_isEditMode(){return this._reportMode===_.EDIT}_getStepQuery(){return new o(this._reportMetadata,this._dynamicFilterManager).getQuery(this._customFilterValues)}_getRequestOrigin(){return this._isEditMode()?m.REPORT_BUILDER_PREVIEW.getValue():this._isInsightsMode?m.EINSTEIN_DISCOVERY.getValue():m.REPORT_RUN_PAGE_DESKTOP.getValue()}_getWidgets(){if(!this._widgets){this._widgets={};const e=C.ZP.Widget.getAllCodes();for(const t of e){const e=C.ZP.Widget.getEnumByCode(t).getValue().getWidget.bind(this)();this._widgets[e.getId()]=e}}return this._widgets}_getQueryBuilderWidget(){return c.Widget.ofType(p.Z.QUERY_BUILDER.getCode()).setId("queryBuilder").setStep(this._getTableStep()).setParameter("source",this._getQueryBuilderSourceType()).setParameter("datasetId",this._getDatasetId()).setParameter("stepIds",f.getStepIds()).setParameter("isFiltersTabEnabled",this._isEditMode()).setParameter("hideSectionableTable",!this._isEditMode()).setParameter(R,!0)}_getChatterWidget(){return c.Widget.ofType(p.Z.REPORT_CHATTER.getCode()).setId("reportChatter").setStep(this._getTableStep()).setParameter("reportId",this._reportMetadata.reportMetadata.id)}_getMetricsWidget(){return c.Widget.ofType(p.Z.REPORT_METRICS.getCode()).setId("reportMetrics").setStep(this._getTableStep()).setParameter("reportId",this._reportMetadata.reportMetadata.id)}_getContainerWidget(){return c.Widget.ofType(p.Z.CONTAINER.getCode()).setId("scroll-container")}_getMetricTableChartContainerWidget(){return c.Widget.ofType(p.Z.CONTAINER.getCode()).setId("table-chart-container")}_getMetricTableDetailContainerWidget(){return c.Widget.ofType(p.Z.CONTAINER.getCode()).setId("table-detail-container")}_getMatrixDetailsContainerWidget(){return c.Widget.ofType(p.Z.CONTAINER.getCode()).setId("table-matrix-details-table-container")}_getWarningBannerWidget(){return c.Widget.ofType(p.Z.REPORT_WARNING_BANNER.getCode()).setId("warning-banner").setStep(this._getTableStep()).setParameter(v,!0).setParameter(y.B,this._isEditMode())}_getChartWidget(){const e=c.Widget.ofType(p.Z.CHART.getCode()).setId("chart").setStep(this._getChartStep()).setParameter(v,!0).setParameter(R,!0).setParameter(y.B,this._isEditMode()),t=this._getDashboardChartConfig();return Object.entries(t||{}).forEach((([t,r])=>{e.setParameter(t,r)})),e}_getChartPanelHeaderWidget(){return c.Widget.ofType(p.Z.REPORT_CHART_PANEL.getCode()).setId("chartPanel").setStep(this._getChartStep()).setParameter("title",{label:""}).setParameter("stepIds",f.getStepIds()).setParameter(R,!0)}_getTableWidget(){return c.Widget.ofType(p.Z.REPORT_TABLE.getCode()).setId("table").setStep(this._getTableStep()).setParameter("stepIds",f.getStepIds()).setParameter("variant","lightning").setParameter(w,!this._isEditMode()).setParameter(v,!0).setParameter(R,!0).setParameter(S,this._isEditMode()).setParameter("maxColumnWidth",450).setParameter("minColumnWidth",60).setParameter("minRowHeight",17).setParameter(y.B,this._isEditMode())}_getFieldsPanelWidget(){return c.Widget.ofType(p.Z.FIELDS_PANEL.getCode()).setId("fieldsPanel").setStep(this._getTableStep()).setParameter("datasetId",this._getDatasetId()).setParameter("stepIds",f.getStepIds()).setParameter(R,!0)}_getSettingsFooterWidget(){const e=c.Widget.ofType(p.Z.SETTINGS_FOOTER.getCode()).setId("settings").setParameter("stepIds",f.getStepIds()).setParameter(R,!0);return this._isInsightsMode||e.setStep(this._getTableStep()),e}_getInlineEditFooterWidget(){return c.Widget.ofType(p.Z.INLINE_EDIT_FOOTER.getCode()).setId("ieditfooter").setStep(this._getTableStep()).setParameter("stepIds",f.getStepIds()).setParameter(R,!0)}_getReportDetailsTableWidget(){return c.Widget.ofType(p.Z.REPORT_TABLE.getCode()).setId("matrixDetailsTable").setStep(this._getDetailsTableStep()).setParameter("stepIds",f.getStepIds()).setParameter("variant","lightning").setParameter("isMatrixDetailsTable",!0).setParameter(S,this._isEditMode()).setParameter(w,!this._isEditMode()).setParameter(R,!0).setParameter("maxColumnWidth",450).setParameter("minColumnWidth",60).setParameter("minRowHeight",17).setParameter(y.B,this._isEditMode())}_getGridLayouts(){if(this._gridLayouts)return this._gridLayouts;this._gridLayouts=[];const e=[C.ZP.EDIT_NO_CHART,C.ZP.EDIT_CHART,C.ZP.EDIT_MATRIX_DETAILS_NO_CHART,C.ZP.EDIT_MATRIX_DETAILS_CHART,C.ZP.RUN_CHART,C.ZP.RUN_NO_CHART,C.ZP.RUN_MATRIX_DETAILS_NO_CHART,C.ZP.RUN_MATRIX_DETAILS_CHART,C.ZP.REPORT_COMPONENT_SUMMARY,C.ZP.REPORT_COMPONENT_CHART,C.ZP.REPORT_COMPONENT_TABLE,C.ZP.REPORT_COMPONENT_SUMMARY_AND_CHART,C.ZP.REPORT_COMPONENT_SUMMARY_AND_TABLE,C.ZP.REPORT_COMPONENT_CHART_AND_TABLE,C.ZP.REPORT_COMPONENT_SUMMARY_AND_CHART_AND_TABLE];return this._gridLayouts=e.map((e=>e.addWidgets.bind(this)(e.getGridLayout(this._reportMode),e.getWidgets(this._reportMode),this._reportMode)))}_getFilters(){return[]}_getParameters(){return[]}_getQueryBuilderSourceType(){return"report"}_getDashboardChartConfig(){let e=u.get().generateDashboardChartConfig(this._reportMetadata.reportMetadata.chart);if(this._reportMode===_.THUMBNAIL&&e){const t=b.getEnumByCode(e.visualizationType).getDefinition();e=l.updateParamsForThumbnail(e,t)}return e}_cleanseDashboardJson(e){E.map((t=>t.cleanse(e)))}}},92763:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>f,pf:()=>_});var i=r(96486),s=r(723),n=r(29655),o=r(41556),a=r(17636);const l=[0,0,18,1],u=[0,1,18,9],d=[0,10,18,38],c=[0,39,18,9],h=[0,32,18,16],p=[0,0,19,39],g=[0,0,9,39],m=[9,0,9,39];function _(e,t){return f[(t===a.EDIT?"EDIT":"RUN")+"_"+((0,i.isEmpty)(e.reportMetadata.chart)?"NO_CHART":"CHART")].getLayoutName()}class f extends s{getCode(){return this.getName()}getGridLayout(e){const t=(new o.GridLayout).setName(this._value.name).setNumColumns(e===a.THUMBNAIL?1:this._value.numColumns).setRowHeight(e===a.THUMBNAIL?n.NORMAL:this._value.rowHeight).setStyle("gutterColor","#ffffff");return Object.entries(this._value.style).forEach((([e,r])=>{t.setStyle(e,r)})),t}getLayoutName(){return this._value.name}getWidgets(e){if(e!==a.THUMBNAIL)return this._value.widgets;const t=this._value.widgets.find((e=>e.widget===f.Widget.CHART))??this._value.widgets.find((e=>e.widget===f.Widget.METRICS));return t?[t]:[]}addWidgets(e,t,r){for(const i of t)r===a.THUMBNAIL?e.addWidget(i.widget.getValue().getWidget.bind(this)(),0,0,4,1):e.addWidget(i.widget.getValue().getWidget.bind(this)(),i.dimension[0],i.dimension[1],i.dimension[2],i.dimension[3]);return e}static createWidget(e,t){return{name:e,numColumns:48,rowHeight:n.NORMAL,style:{backgroundColor:"#FFF",cellSpacingX:0,cellSpacingY:0},widgets:t}}}f.Widget=class extends s{getCode(){return this.getName()}},f.Widget.build(f.Widget,{CHART:{getWidget(){return this._getChartWidget()}},CHART_PANEL:{getWidget(){return this._getChartPanelHeaderWidget()}},TABLE:{getWidget(){return this._getTableWidget()}},QUERY_BUILDER:{getWidget(){return this._getQueryBuilderWidget()}},SETTINGS_FOOTER:{getWidget(){return this._getSettingsFooterWidget()}},INLINE_EDIT_FOOTER:{getWidget(){return this._getInlineEditFooterWidget()}},FIELDS_PANEL:{getWidget(){return this._getFieldsPanelWidget()}},REPORT_DETAILS_TABLE:{getWidget(){return this._getReportDetailsTableWidget()}},CHATTER:{getWidget(){return this._getChatterWidget()}},METRICS:{getWidget(){return this._getMetricsWidget()}},CONTAINER:{getWidget(){return this._getContainerWidget()}},TABLE_CHART_CONTAINER:{getWidget(){return this._getMetricTableChartContainerWidget()}},TABLE_DETAIL_CONTAINER:{getWidget(){return this._getMetricTableDetailContainerWidget()}},TABLE_MATRIX_DETAILS_CONTAINER:{getWidget(){return this._getMatrixDetailsContainerWidget()}},WARNING_BANNER:{getWidget(){return this._getWarningBannerWidget()}}}),f.build(f,{EDIT_NO_CHART:f.createWidget("EDIT_NO_CHART",[{widget:f.Widget.FIELDS_PANEL,dimension:l},{widget:f.Widget.QUERY_BUILDER,dimension:u},{widget:f.Widget.WARNING_BANNER,dimension:d},{widget:f.Widget.TABLE,dimension:d},{widget:f.Widget.SETTINGS_FOOTER,dimension:d},{widget:f.Widget.CONTAINER,dimension:d}]),EDIT_CHART:f.createWidget("EDIT_CHART",[{widget:f.Widget.FIELDS_PANEL,dimension:l},{widget:f.Widget.QUERY_BUILDER,dimension:u},{widget:f.Widget.WARNING_BANNER,dimension:d},{widget:f.Widget.CHART_PANEL,dimension:d},{widget:f.Widget.CHART,dimension:d},{widget:f.Widget.TABLE,dimension:d},{widget:f.Widget.SETTINGS_FOOTER,dimension:d},{widget:f.Widget.CONTAINER,dimension:d}]),EDIT_MATRIX_DETAILS_NO_CHART:f.createWidget("EDIT_MATRIX_DETAILS_NO_CHART",[{widget:f.Widget.FIELDS_PANEL,dimension:l},{widget:f.Widget.QUERY_BUILDER,dimension:u},{widget:f.Widget.WARNING_BANNER,dimension:d},{widget:f.Widget.TABLE,dimension:d},{widget:f.Widget.REPORT_DETAILS_TABLE,dimension:d},{widget:f.Widget.SETTINGS_FOOTER,dimension:d},{widget:f.Widget.TABLE_DETAIL_CONTAINER,dimension:d}]),EDIT_MATRIX_DETAILS_CHART:f.createWidget("EDIT_MATRIX_DETAILS_CHART",[{widget:f.Widget.FIELDS_PANEL,dimension:l},{widget:f.Widget.QUERY_BUILDER,dimension:u},{widget:f.Widget.WARNING_BANNER,dimension:d},{widget:f.Widget.CHART_PANEL,dimension:d},{widget:f.Widget.CHART,dimension:d},{widget:f.Widget.TABLE,dimension:d},{widget:f.Widget.REPORT_DETAILS_TABLE,dimension:d},{widget:f.Widget.SETTINGS_FOOTER,dimension:d},{widget:f.Widget.TABLE_CHART_CONTAINER,dimension:d}]),RUN_CHART:f.createWidget("RUN_CHART",[{widget:f.Widget.METRICS,dimension:p},{widget:f.Widget.CHART_PANEL,dimension:p},{widget:f.Widget.CHART,dimension:p},{widget:f.Widget.TABLE,dimension:p},{widget:f.Widget.SETTINGS_FOOTER,dimension:p},{widget:f.Widget.INLINE_EDIT_FOOTER,dimension:p},{widget:f.Widget.CONTAINER,dimension:p},{widget:f.Widget.QUERY_BUILDER,dimension:c},{widget:f.Widget.CHATTER,dimension:h}]),RUN_NO_CHART:f.createWidget("RUN_NO_CHART",[{widget:f.Widget.METRICS,dimension:p},{widget:f.Widget.TABLE,dimension:p},{widget:f.Widget.QUERY_BUILDER,dimension:c},{widget:f.Widget.SETTINGS_FOOTER,dimension:p},{widget:f.Widget.INLINE_EDIT_FOOTER,dimension:p},{widget:f.Widget.CONTAINER,dimension:p},{widget:f.Widget.CHATTER,dimension:h}]),RUN_MATRIX_DETAILS_NO_CHART:f.createWidget("RUN_MATRIX_DETAILS_NO_CHART",[{widget:f.Widget.METRICS,dimension:g},{widget:f.Widget.QUERY_BUILDER,dimension:c},{widget:f.Widget.TABLE,dimension:g},{widget:f.Widget.REPORT_DETAILS_TABLE,dimension:m},{widget:f.Widget.TABLE_DETAIL_CONTAINER,dimension:g},{widget:f.Widget.TABLE_MATRIX_DETAILS_CONTAINER,dimension:m},{widget:f.Widget.SETTINGS_FOOTER,dimension:m},{widget:f.Widget.INLINE_EDIT_FOOTER,dimension:m},{widget:f.Widget.CHATTER,dimension:h}]),RUN_MATRIX_DETAILS_CHART:f.createWidget("RUN_MATRIX_DETAILS_CHART",[{widget:f.Widget.METRICS,dimension:g},{widget:f.Widget.QUERY_BUILDER,dimension:c},{widget:f.Widget.CHART_PANEL,dimension:g},{widget:f.Widget.CHART,dimension:g},{widget:f.Widget.TABLE,dimension:g},{widget:f.Widget.REPORT_DETAILS_TABLE,dimension:m},{widget:f.Widget.TABLE_DETAIL_CONTAINER,dimension:g},{widget:f.Widget.TABLE_MATRIX_DETAILS_CONTAINER,dimension:m},{widget:f.Widget.SETTINGS_FOOTER,dimension:m},{widget:f.Widget.INLINE_EDIT_FOOTER,dimension:m},{widget:f.Widget.CHATTER,dimension:h}]),REPORT_COMPONENT_SUMMARY:f.createWidget("REPORT_COMPONENT_SUMMARY",[{widget:f.Widget.METRICS,dimension:[0,0,19,48]}]),REPORT_COMPONENT_CHART:f.createWidget("REPORT_COMPONENT_CHART",[{widget:f.Widget.CHART,dimension:[0,0,19,48]}]),REPORT_COMPONENT_TABLE:f.createWidget("REPORT_COMPONENT_TABLE",[{widget:f.Widget.TABLE,dimension:[0,0,19,48]}]),REPORT_COMPONENT_SUMMARY_AND_CHART:f.createWidget("REPORT_COMPONENT_SUMMARY_AND_CHART",[{widget:f.Widget.METRICS,dimension:[0,0,3,48]},{widget:f.Widget.CHART,dimension:[3,0,9,48]}]),REPORT_COMPONENT_SUMMARY_AND_TABLE:f.createWidget("REPORT_COMPONENT_SUMMARY_AND_TABLE",[{widget:f.Widget.METRICS,dimension:[0,0,3,48]},{widget:f.Widget.TABLE,dimension:[3,0,9,48]}]),REPORT_COMPONENT_CHART_AND_TABLE:f.createWidget("REPORT_COMPONENT_CHART_AND_TABLE",[{widget:f.Widget.CHART,dimension:[0,0,9,48]},{widget:f.Widget.TABLE,dimension:[9,0,9,48]}]),REPORT_COMPONENT_SUMMARY_AND_CHART_AND_TABLE:f.createWidget("REPORT_COMPONENT_SUMMARY_AND_CHART_AND_TABLE",[{widget:f.Widget.METRICS,dimension:[0,0,3,48]},{widget:f.Widget.CHART,dimension:[3,0,8,48]},{widget:f.Widget.TABLE,dimension:[10,0,8,48]}])})},75782:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(8429),s=r(723),n=r(27223);class o extends s{getCode(){return this.getType()}getType(){return n.checkImplemented()}getActionProps(){return n.checkImplemented()}getSearchBarPlaceHolderText(){return i.Z.getLabel("FieldList","searchPlaceholder")}getSearchIcon(){return{iconName:"search",iconCategory:"utility"}}}class a extends o{getType(){return this._value.type}getActionLabel(){return this._value.labelKey?i.Z.getLabel("reportBuilder",this._value.labelKey):this._value.label?this._value.label:void 0}getActionProps(){return{assistiveText:i.Z.getLabel("reportBuilder",this._value.assistiveTextKey),label:this.getActionLabel(),iconName:this._value.iconName,iconSize:this._value.iconSize,iconCategory:this._value.iconCategory}}getActionVariant(){return this._value.variant}getActionAssistiveText(){return this._value.assistiveText}getActionIconName(){return this._value.iconName}getActionIconCategory(){return this._value.iconCategory}getActionIconVariant(){return this._value.iconVariant}getActionIconSize(){return this._value.iconSize}getTreeItemIconAttributes(){return{buttonLabel:this.getActionLabel(),iconName:this._value.iconName,iconSize:this._value.iconSize,iconVariant:this._value.treeItemIconVariant,iconCategory:this._value.iconCategory,buttonVariant:this._value.treeItemLabelVariant||this._value.variant}}checkAllowFilterDataTypes(e){return"all"===this._value.type||this._value.allowDataTypes.indexOf(e.dataType)>=0}checkAllowDataTypes(e){return this._value.allowDataTypes.indexOf(e.dataType)>=0}getSearchBarPlaceHolderText(){return i.Z.getLabel("reportBuilder",this._value.searchPlaceHolderTextKey)}}a.build(a,{ALL:{type:"all",allowDataTypes:[],assistiveTextKey:"fieldsFilterAll",labelKey:"all",variant:"neutral",searchPlaceHolderTextKey:"fieldsFilterSearchAll"},TEXT:{type:"text",allowDataTypes:["string","id","reference","textarea","phone","combobox","url","email","html","address","datacategorygroupreference","location","text"],assistiveTextKey:"fieldsFilterText",iconName:"type_tool",iconSize:"x-small",iconVariant:"border-filled",iconCategory:"utility",treeItemIconVariant:"bare",variant:"icon",searchPlaceHolderTextKey:"fieldsFilterSearchText"},NUMBER:{type:"number",allowDataTypes:["int","double","currency","percent","number"],assistiveTextKey:"fieldsFilterNumber",iconName:"topic2",iconSize:"x-small",iconVariant:"border-filled",iconCategory:"utility",treeItemIconVariant:"bare",variant:"icon",searchPlaceHolderTextKey:"fieldsFilterSearchNumber"},BOOLEAN:{type:"boolean",allowDataTypes:["boolean"],assistiveTextKey:"fieldsFilterBoolean",iconName:"check",iconSize:"x-small",iconVariant:"border-filled",iconCategory:"utility",treeItemIconVariant:"bare",variant:"icon",searchPlaceHolderTextKey:"fieldsFilterSearchBoolean"},DATE:{type:"date",allowDataTypes:["date","datetime","time"],assistiveTextKey:"fieldsFilterDate",iconName:"event",iconSize:"x-small",iconVariant:"border-filled",iconCategory:"utility",treeItemIconVariant:"bare",variant:"icon",searchPlaceHolderTextKey:"fieldsFilterSearchDate"},PICKLIST:{type:"picklist",allowDataTypes:["picklist","multipicklist"],assistiveTextKey:"fieldsFilterPicklist",iconName:"picklist",iconSize:"x-small",iconVariant:"border-filled",iconCategory:"utility",treeItemIconVariant:"bare",variant:"icon",searchPlaceHolderTextKey:"fieldsFilterSearchPicklist"}})},31107:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var i=r(96486),s=r(70917),n=r(50130),o=r(41553),a=r(97761),l=r(8429),u=r(32574),d=r(90554),c=r(57244),h=r(64933),p=r(16582),g=r(3886),m=r(37720),_=r(2953),f=r(75782),y=r(98584),b=r(35944);class C extends g.Z{constructor(e,t,r=!1,s=!1,n=-1){super(n>=0),this._categories=e,this._formulas=t,this._isDataCloudReport=r,this._showFormulaCategory=s,this._subTreeIdSuffix=n>=0?`${n}`:"",this._onMenuSelection=i.noop,this._onMenuClose=i.noop,i.isEmpty(this._formulas)||(this._formulaMenuOptions=[{label:l.Z.getLabel("reportBuilder","fieldsTreeFormulaAdd"),value:m.i.ADD.getName()},{label:l.Z.getLabel("reportBuilder","fieldsTreeFormulaEdit"),value:_.q.UPDATE.getName()},{label:l.Z.getLabel("reportBuilder","fieldsTreeFormulaDelete"),value:_.q.DELETE.getName()}]),this._init()}setFormulaCallbacks(e,t,r){this._canAddFormulaAsColumn=e,this._canEditFormula=t,this._canCreateFormula=r}setMenuCallbacks(e,t){this._onMenuSelection=e,this._onMenuClose=t}isMenuOpen(){return!!this._nodeWithOpenMenu}getCategories(){return this._categories}openMenu(e){e&&e.text&&(e.label=this._getFormulaItemLabelWithIcon(e,!0),this._nodeWithOpenMenu=e)}closeMenu(){const e=this._nodeWithOpenMenu;if(e&&e.text){e.label=this._getFormulaItemLabelWithIcon(e);const t=e.id;this._nodeWithOpenMenu=null,this._onMenuClose(t)}}_buildTreeBranches(e=[f.Z.ALL],t,r){const s=[];let n=0;if(!this._categories)return s;const o=h.get(),a=this.getFormulaNodes(e,t,r);a.length>0&&(s.push({nodes:a,label:this._getLabelWithIcon(l.Z.getLabel("reportBuilder","fieldsTreeFormulasBranchWithCount",a.length-(t?0:1)),"standard","folder","tree-formula-folder-label"),labelWithoutCount:l.Z.getLabel("reportBuilder","fieldsTreeFormulasBranch"),type:"branch",id:`formulas_${this._subTreeIdSuffix}`,expanded:!!t||this._isExpanded(n),multiSelectInfo:{index:-1,treeIndices:[],notSelectable:!0}}),n++);for(let a=0;a<this._categories.length;a++){const u=this._categories[a],d=[];Object.keys(u.columns).forEach((s=>{const n=u.columns[s];if(n.name=s,this._isFieldVisible(n)&&e)for(let l=0;l<e.length;l++){e[l].checkAllowFilterDataTypes(n)&&this._isSearchMatch(n.label,t)&&d.push(Object.assign({label:this._getRegularItemLabelWithIcon(n,u.label),id:`field_${this._subTreeIdSuffix}_${a}_${o.unprefixBlockColumnName(s)}`,value:s,selected:s===r,categoryMetadata:i.omit(u,"columns")},this._getAdditionalItemProps()))}}));const c=d.length;if(c>0){if(this._allNodes&&this._allNodes.length>0)for(;u.label!==this._allNodes[n].labelWithoutCount;)n++;const e=l.Z.getLabel("reportBuilder","fieldsTreeRegularBranch",u.label,c);s.push({nodes:d,label:this._getLabelWithIcon(e,"standard","folder","tree-branch-label"),assistiveText:e,labelWithoutCount:u.label,type:"branch",id:`fieldCategory_${this._subTreeIdSuffix}_${a}_${c}`,expanded:!!t||this._isExpanded(n),multiSelectInfo:{index:-1,treeIndices:[],notSelectable:!0}})}n++}return s}getFormulaNodes(e,t,r){if(!this._showFormulaCategory||!e||-1===e.indexOf(f.Z.ALL))return[];const i=[];if(this._formulas)for(const e of Object.keys(this._formulas)){const s=this._formulas[e];if(this._isSearchMatch(s.label,t)){const t=Object.assign({label:s.label,text:s.label,id:`formula_${e}`,value:e,isFormula:!0,selected:e===r},this._getAdditionalItemProps());t.label=this._getFormulaItemLabelWithIcon(t),i.push(t)}}if(!t){const e=this._canCreateFormula&&!this._canCreateFormula(),t=u.classSet({"tree-formula-create-label":!0,disabled:e});i.push(Object.assign({label:this._isDataCloudReport&&c.Z.has(c.Z.USER_HAS_EGPT_FORMULA_GENERATION_ENABLED)?this._getLabelWithFormulaGenIcon(this._getCreateFormulaLabel(),"utility","add",t,e):this._getLabelWithIcon(this._getCreateFormulaLabel(),"utility","add",t,e),id:`create_formula${e?"_disabled":""}_${this._subTreeIdSuffix}`,isCreateFormula:!0,value:"create_formula",selected:!1,disabled:e,multiSelectInfo:{index:-1,treeIndices:[],notSelectable:!0}},this._getAdditionalItemProps()))}return i}_renderSparklesIcon(e){return(0,b.tZ)(n.Z,{css:(0,s.iv)("margin-left:",a.spacingSmall,";",""),path:e?`${p}#sparkles_disabled`:`${p}#sparkles_enabled`,size:"x-small"})}_getLabelWithFormulaGenIcon(e,t,r,i,s){const o=(0,b.tZ)(n.Z,{category:t,name:r,size:"x-small",assistiveText:s?{label:l.Z.getLabel("FieldTreeAssistiveText","disabledFieldAssistiveText")}:{}}),a=this._renderSparklesIcon(s),u=l.Z.getLabel("FormulaGeneration","formulaGenerationOnboardingPopoverTitle"),d=l.Z.getLabel("FormulaGeneration","formulaGenerationOnboardingPopoverSubtitle");return(0,b.BX)("div",{className:i,children:[o,e,s?a:(0,b.tZ)(y.Z,{experienceId:"formula-generation-onboarding",bodyText:d,headerText:u,children:a})]})}_getRegularItemLabelWithIcon(e,t){const r=this._getColumnLabel(e),i=t+" : "+r;for(const t of f.Z.getAllCodes()){const s=f.Z.getEnumByCode(t);if(s.checkAllowDataTypes(e))return this._getItemLabelWithIcon(r,s.getTreeItemIconAttributes(),this._getAdditionalFieldItemContent(e),i)}return this._getItemLabelWithIcon(r,f.Z.TEXT.getTreeItemIconAttributes(),this._getAdditionalFieldItemContent(e))}_getFormulaItemLabelWithIcon(e,t){let r=this._formulaMenuOptions;if(r){let t=!0,i=!0;if(this._canAddFormulaAsColumn&&!this._canAddFormulaAsColumn(e.value)&&(t=!1),this._canEditFormula&&!this._canEditFormula(e.value)&&(i=!1),!t||!i){r=(0,d.deepCopy)(r);const e=r.find((e=>e.value===m.i.ADD.getName()));e&&(e.disabled=!t),r.find((e=>e.value===_.q.UPDATE.getName())).disabled=!i}}return(0,b.BX)("div",{className:"tree-formula-item",children:[(0,b.BX)("span",{className:"tree-formula-label slds-truncate",children:[(0,b.tZ)(n.Z,{assistiveText:{label:l.Z.getLabel("CustomSummaryFormulas","formulaHeader")},className:"formula-field-icon",path:`${p}#formula`,tabIndex:"-1"}),e.text]}),(0,b.tZ)(o.Z,{id:`field_menu_${e.value}`,isOpen:t,buttonClassName:"formula-action-trigger",classname:"formula-action-menu",iconCategory:"utility",iconName:"down",iconVariant:"container",iconSize:"x-small",hasStaticAlignment:!0,align:"right",width:"xx-small",onSelect:t=>{t.disabled||this._onMenuSelection(t.value,e.value,e.id)},onClose:()=>{this.closeMenu()},onClick:e=>{e&&(e.stopPropagation(),e.preventDefault())},options:r,tabIndex:t?"0":"-1"})]})}_getColumnLabel(e){return e.label}_getCreateFormulaLabel(){return l.Z.getLabel("reportBuilder","fieldsTreeFormulaCreate")}_getAdditionalItemProps(){return{}}_getAdditionalFieldItemContent(e){}_isFieldVisible(e){return!0}}},5673:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(50130),s=r(96486),n=r(8429),o=r(16582),a=r(3886),l=r(35944);class u extends a.Z{constructor(e,t){super(),this._categories=e,this._functions=t,this._init()}_buildTreeBranches(e,t,r){const i=[];if(!this._categories)return i;for(let e=0;e<this._categories.length;e++){const o=this._categories[e],a=[];for(let e=0;e<this._functions.length;e++){const i=this._functions[e];i.CategoryId===o.Name&&this._isSearchMatch(i.Label,t)&&a.push({label:this._getItemLabelWithIcon(i.Label),id:s.uniqueId("function"),value:i.Name,selected:i.Name===r})}a.length>0&&i.push({nodes:a,label:this._getLabelWithIcon(n.Z.getLabel("reportBuilder","fieldsTreeRegularBranch",o.Label,a.length),"standard","folder","tree-branch-label"),labelWithoutCount:o.Label,type:"branch",id:s.uniqueId("functionCategory"),expanded:!!t||this._isExpanded(0)})}return i}_getItemLabelWithIcon(e){return(0,l.BX)("span",{children:[(0,l.tZ)(i.Z,{className:"fieldsItemIcon formulaItemIcon",category:"utility",path:`${o}#formula`,tabIndex:"-1"}),e]})}}},99203:(e,t,r)=>{"use strict";function i(e,t,r,i,s,n){function o(t,r,i,s,n,o){e.call(this,t,r,i,s,n),this._axisOrchestrator=o,this._focusable=!("DIMENSION"===r.type&&t.hardcodedDimChoice||"MEASURE"===r.type&&t.hardcodedMeasureChoice)}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._selectAxisDropdown=function(t,r,i){e.selectDropdown(t,r),i.selectedColumn=r},o.prototype.numChildren=function(){return Math.max(e.prototype.numChildren.call(this),this._default&&this._default.fields&&this._default.fields.length||0)},o.prototype._render=function(s,o){var a=this._item.type,l="MEASURE"===a?this._axes.measures:this._axes.dimensions,u=this._default&&this._default.fields&&this._default.fields[s]||{},d={};this._instanceData[s]=d;var c=document.createElement("div");c.className="config-axis-container"+(this._isItemColorable(s,o)?" colorable":"");var h=document.createElement("select");h.className="config-axis-selector "+a.toLowerCase(),(l||[]).forEach((function(e,t){var r=document.createElement("option");r.textContent=e.label,r.value=e.column,h.appendChild(r)}));var p=this._axisOrchestrator.getAvailableColumns(this)||[l[0].column];this._default&&-1!==p.indexOf(u.column)?this._selectAxisDropdown(h,u.column,d):this._selectAxisDropdown(h,p[0],d),h.onchange=function(e){var t=h.options[h.selectedIndex].value;this._axisOrchestrator.handleChange(this,s,t,d.selectedColumn),d.selectedColumn=t,this._axisOrchestrator.validateAxisTypes(this),this._handler()}.bind(this),"DIMENSION"===a&&this._context.hardcodedDimChoice&&(h.disabled=!0,h.classList.add("as-label")),"MEASURE"===a&&this._context.hardcodedMeasureChoice&&(h.disabled=!0,h.classList.add("as-label")),c.appendChild(h);var g=this,m=this._isItemColorable(s,o);if("MEASURE"===a&&m){var _=this._item.role&&"PRIMARY"!==this._item.role&&this._context.secondaryColors?this._context.secondaryColors:this._context.colors,f=_[s%_.length].color,y=this._item.defaultColors&&this._item.defaultColors[s]?e.parseColor(this._item.defaultColors[s]):f,b=this._default&&this._default.fields&&this._default.fields[s]&&this._default.fields[s].color;if(b=b||y,d.color=b||this._context.colors[0],this._context.isColorSupported){d.colorPreview=i(d.color,g._context.colors,c,(function(e){d.color=e,g._handler()}))}}else if("DIMENSION"===a&&m){var C=this._default&&this._default.fields&&this._default.fields[s],E=null;if(this._context.palettes.some((function(e){return(C&&C.__paletteId__===e.id||!(C&&(!C||C.__paletteId__)||!d.selectedColumn||!n.isCorrectPalette(d.selectedColumn,e)))&&(E=e,!0)})),d.palette=E||this._context.palettes[0],d.palettes=this._context.palettes,this._context.isColorSupported&&!this._context.palettes.hasPicklistColors){var S=function(){d.palette=g._context.palettes[this.selectedIndex],e.removeNode(d.palettePreview),d.palettePreview=r(d.palette,g._context.palettes,c,S),g._handler()};d.palettePreview=r(d.palette,this._context.palettes,c,S)}}if("MEASURE"===a&&this._item.supportsReferenceLines&&this._context.isReferenceLineSupported&&(d.refLineData=t.render(c,u,this._context.colors,this._handler)),"MEASURE"===a&&(this._item.supportsLineForSecondMeasure||this._item.secondMeasureIsLine)){var T=1===s&&("line"===u.mark||this._axisOrchestrator.getDimensionCount()>1),I=function(e){this._axisOrchestrator.validateAxisTypes(this),this._handler()}.bind(this);this._item.supportsLineForSecondMeasure&&(d.plotAsLineNode=this._renderCheckbox(c,"plot-line","plotAsLine",T,"plotAsLine",I)),(this._item.supportsLineForSecondMeasure||this._item.secondMeasureIsLine)&&(d.plotOnSecondAxisNode=this._renderCheckbox(c,"plot-second-axis","plotOnSecondAxis","axis2"===u.axis,"plotOnSecondAxis",I))}return c},o.prototype._isItemColorable=function(e,t){var r=this._item.type;if(this._item.colorable){if("MEASURE"===r)return!!this._context.colors;if("DIMENSION"===r)return e===t-1&&!!this._context.palettes}return!!this._context.useCustomizeColorPalette},o.prototype._populate=function(e,r){var i=e.querySelector("select"),o=this._item.type;if(i&&i.options[i.selectedIndex]){var a=i.options[i.selectedIndex].value,l=null;this._axes["MEASURE"===o?"measures":"dimensions"].some((function(e){return e.column===a&&(l=JSON.parse(JSON.stringify(e)),!0)}));var u=this._instanceData[r];if(l&&u){if(u.color)l.color=u.color;else if(u.palette){var d,c;if(a){var h=a.indexOf(s.LABEL_SUFFIX);h<0&&(h=a.indexOf(s.VALUE_SUFFIX)),c=h>0&&a.substr(0,h)}if(u.palette.colorMap&&c===u.palette.id)n.addValueColors(l,u.palette.colorMap,u.palettes&&u.palettes.stringifyColorMapKeys),d=u.palette.id;else{if(u.palettes)for(var p=0;p<u.palettes.length;p++){var g=u.palettes[p];if(g.colorMap&&(g.id===l.__paletteId__?d=g.id:g.id===c&&(d=c),d)){n.addValueColors(l,g.colorMap,u.palettes.stringifyColorMapKeys);break}}d||(l.colors=u.palette.colors,d=u.palette.id)}l.__paletteId__=d}if(u.hasError&&(l.__hasError__=!0),u.refLineData&&t.populate(l,u.refLineData),"MEASURE"===o){l.mark="bar",l.axis="axis1";var m=this.isMeasurePlottedAsLine(r);this._item.supportsLineForSecondMeasure&&2===this._axisOrchestrator.getMeasureCount()?(l.mark=m?"line":"bar",this.putMeasureOnCombo(r,m,l)):this._item.secondMeasureIsLine&&1===r&&(l.mark="line",this.putMeasureOnCombo(r,m,l))}}return l}},o.prototype.putMeasureOnCombo=function(e,t,r){r.axis=t&&this.isMeasureOnSecondAxis(e)?"axis2":"axis1",t&&this._axisOrchestrator.getDimensionCount()>1&&(r.subtotals=!0,r.series="total")},o.prototype.isMeasurePlottedAsLine=function(e){if("MEASURE"===this._item.type&&this._instanceData[e]){if(this._instanceData[e].plotAsLineNode)return this._instanceData[e].plotAsLineNode.querySelector("input").checked;if(this._item.secondMeasureIsLine&&1===e)return!0}return!1},o.prototype.isMeasureOnSecondAxis=function(e){if("MEASURE"===this._item.type&&this.isMeasurePlottedAsLine(e)&&this._instanceData[e].plotOnSecondAxisNode)return this._instanceData[e].plotOnSecondAxisNode.querySelector("input").checked;return!1},o.prototype._getChildLineItemsNodes=function(){return this._node.classList&&-1!==Array.prototype.slice.call(this._node.classList||[]).indexOf("config-config-item-line")?[this._node]:Array.prototype.slice.call(this._node.children||[]).filter((function(e){return-1!==Array.prototype.slice.call(e.classList||[]).indexOf("config-config-item-line")}))},o.prototype.populate=function(e){var t={fields:[],title:""},r=this._getChildLineItemsNodes()||[];Array.prototype.slice.apply(r).forEach((function(r,i){var s=this._populate(r.children[0],i);void 0!==s&&(s.__hasError__&&(e.__hasError__=!0),this._item.ranges&&(s.range=this._item.ranges[i]),t.fields.push(s))}),this),e[this._item.property]=t},o.prototype.name=function(){var t="DIMENSION"===this._item.type?"dimension":"measure";return e.renderLabel(this._context,{section:"EclairConfig",id:t,fallback:t})},o.prototype.setAxisValue=function(e,t){var r=this._getChildLineItemsNodes()[e];(r=(r=r&&r.children[0])&&r.querySelector("select"))&&this._selectAxisDropdown(r,t,this._instanceData[e])},o.prototype.getAxesInUse=function(){return this._instanceData.reduce((function(e,t){return void 0!==t.selectedColumn&&e.push(t.selectedColumn),e}),[])},o.prototype._getInputNode=function(e){return e.querySelector("select.config-axis-selector")},o.prototype._handleDelete=function(){this._axisOrchestrator.remove(this)},o.prototype._afterRender=function(){this._axisOrchestrator.validateAxisTypes(this)},o.prototype.displayAsGroup=function(){return!0},o.prototype.incrementable=function(){var e=this._item.max||1,t=this._lineItems.length,r=this._axisOrchestrator.getMeasureCount(),i=this._axisOrchestrator.getDimensionCount();if("MEASURE"===this._item.type){if(this._item.supportsLineForSecondMeasure&&2===t){if(this._instanceData[1].plotAsLineNode.querySelector("input").checked||2===i)return!1}else if(!isNaN(this._item.multidimensionalMax)&&this._axisOrchestrator.getDimensionCount()>1&&t>=this._item.multidimensionalMax)return!1}else if("DIMENSION"===this._item.type){if(r>2)return!1;if(!isNaN(this._item.multimetricMax)&&r>1&&t>=this._item.multimetricMax)return!1}return t+1<=e},o.prototype.updateDynamicConfigInputs=function(t){if("MEASURE"===this._item.type&&t.measure){this._optionalFieldControl.toggle(this.incrementable(),!0);for(var r=t.measure.fields,i=r.length,s=this._axisOrchestrator.getDimensionCount(),n=0;n<i;n++){var o=this._instanceData[n].plotAsLineNode,a=this._instanceData[n].plotOnSecondAxisNode;if(this._item.supportsLineForSecondMeasure)if(1===n&&2===i){var l=o.querySelector("input");if(l.disabled=!1,e.setNodeVisibility(o,!0),s>1&&(r[1].mark="line",l.checked=!0,l.disabled=!0),e.setNodeVisibility(a,l.checked),!l.checked)a.querySelector("input").checked=!1}else e.setNodeVisibility(o,!1),e.setNodeVisibility(a,!1);else this._item.secondMeasureIsLine&&(1===n&&2===i?(r[1].mark="line",e.setNodeVisibility(a,!0)):e.setNodeVisibility(a,!1));if(this._item.colorable&&this._instanceData[n]){var u=s<2||"line"===r[n].mark;e.setNodeVisibility(this._instanceData[n].colorPreview,u)}}}else"DIMENSION"===this._item.type&&t.dimension&&this._optionalFieldControl.toggle(this.incrementable(),!0)},o}r.d(t,{Z:()=>i})},42441:(e,t,r)=>{"use strict";function i(){var e={section:"EclairConfig",id:"measureTypeMismatchError",fallback:"Warning: summary mismatch. Chart cannot be saved."},t={section:"EclairConfig",id:"measureTypeMismatchErrorVBarLine",fallback:"Warning: summary mismatch. Chart cannot be saved."};function r(e){this._measureWidgets=[],this._dimensionWidgets=[],this._axes=e}return r.prototype.add=function(e){"MEASURE"===e.item().type?this._measureWidgets.push(e):this._dimensionWidgets.push(e)},r.prototype.remove=function(e){"MEASURE"===e.item().type?this._measureWidgets.splice(this._measureWidgets.indexOf(e),1):this._dimensionWidgets.splice(this._dimensionWidgets.indexOf(e),1)},r.prototype.validateAxisTypes=function(r){if("MEASURE"===r.item().type){var i=this._measureWidgets.reduce((function(e,t){var r=t.getAxesInUse();return"SECONDARY"!==t.item().role?(e.primary={widget:t,axis:r&&r[0],index:0,isOnSecondAxis:t.isMeasureOnSecondAxis(0)},r.slice(1).forEach((function(r,i){e.auxiliary.push({widget:t,axis:r,index:i+1,isOnSecondAxis:t.isMeasureOnSecondAxis(i+1)})}))):r.forEach((function(r,i){e.auxiliary.push({widget:t,axis:r,index:i,isOnSecondAxis:t.isMeasureOnSecondAxis(i)})})),e}),{auxiliary:[],primary:null}),s=this._axes.measures.reduce((function(e,t){var r=t.type.toLowerCase(),i="int"===r||"double"===r?"NUMBER":r;return i="RowCount"===t.column.replace(/_value$/,"").split("#").pop()?"NUMBER":i,e[t.column]=i,e}),{});i.auxiliary.forEach((function(r){var n,o=s[r.axis],a=r.isOnSecondAxis,l=s[i.primary.axis],u=i.primary.isOnSecondAxis,d=o===l||"ANY"===o||"ANY"===l||u!==a,c=r.widget;n=c.isMeasurePlottedAsLine(1)&&!isNaN(c._item.multidimensionalMax)&&2===c._item.multidimensionalMax?t:e,c.toggleAxisErrorMessage(r.index,n,!d)}))}},r.prototype.getAvailableColumns=function(e){var t="MEASURE"===e.item().type,r=t?this._measureWidgets:this._dimensionWidgets,i=t?this._axes.measures:this._axes.dimensions,s=i.reduce((function(e,t,r){return e[t.column]=r,e}),{});return t&&e.context().allowDupMeasures||r.forEach((function(e){(e.getAxesInUse()||[]).forEach((function(e){void 0!==s[e]&&delete s[e]}))})),Object.keys(s).length?Object.keys(s).sort((function(e,t){return s[e]-s[t]})):[i[0]&&i[0].column]},r.prototype.handleChange=function(e,t,r,i){var s="MEASURE"===e.item().type;s&&e.context().allowDupMeasures||(s?this._measureWidgets:this._dimensionWidgets).forEach((function(s){var n={};s.populate(n),(n[s.item().property]&&n[s.item().property].fields||[]).forEach((function(n,o){s===e&&o===t||n&&n.column&&n.column===r&&s.setAxisValue(o,i)}))}))},r.prototype.getDimensionCount=function(){return this._getLineItemCount(this._dimensionWidgets)},r.prototype.getMeasureCount=function(){return this._getLineItemCount(this._measureWidgets)},r.prototype._getLineItemCount=function(e){return e.reduce((function(e,t){return e+t._lineItems.length}),0)},r}r.d(t,{Z:()=>i})},89231:(e,t,r)=>{"use strict";function i(e){var t=0;function r(t,r,i,s,n){this._context=t,this._item=r,this._handler=i,this._node=null,this._axes=n||{},this._lineItems=[],this._instanceData=[],this._focusable=!0,this._optionalFieldControl=new e(this,this.increment.bind(this)),s&&r.property&&(this._default=s[r.property])}return r.prototype._createLineItem=function(t,i){var s=document.createElement("div");if(s.className="config-config-item-line"+(i?" is-optional":""),s.appendChild(t),this._lineItems.push(s),i){var n=this._getNewId(),o=e.renderInlineMinus(r.renderLabel(this._context,{section:"EclairConfig",id:"deleteItem",fallback:"Delete Item"}),function(){this.decrement(s)}.bind(this),n,this._context.isDisabled);s.appendChild(o)}return this._afterRender&&this._afterRender(),s},r.prototype._addInputLabel=function(e,t){var i=this._getInputNode(e);if(i){var s=document.createElement("label");s.setAttribute("for",i.id),s.className="assistive-text";var n=r.renderLabel(this._context,{section:"EclairConfig",id:"multiInputCombiner",fallback:"{0} {1}"}),o=!(void 0!==this._item.min&&1!==this._item.min||void 0!==this._item.max&&1!==this._item.max)?"":n.replace("{0}",this.name()).replace("{1}",t);s.textContent=o,e.childNodes[0].insertBefore(s,i)}},r.prototype._getNewId=function(){return"ECLAIR_CHART_CONFIG_BASE_INPUT_"+ ++t},r.prototype.name=function(){var e=this._item.type.toLowerCase();return this._context&&this._context.localize?this._context.localize({section:"EclairConfig",id:e,fallback:e}):e},r.prototype.node=function(){return this._node},r.prototype.item=function(){return this._item},r.prototype.context=function(){return this._context},r.prototype.increment=function(){if(this._lineItems.length+1>this._item.max)return!1;var e=this._createLineItem(this._render(this._lineItems.length,this._item.max),!0);if(this._node.insertBefore(e,this._optionalFieldControl.node()),this.incrementable()||this._optionalFieldControl.toggle(!1),this._focusable){var t=this._getInputNode(e);t&&(t.id=this._getNewId(),this._addInputLabel(e,this._lineItems.length),t.focus())}else{var r=e.querySelector(".option-field-minus");r&&r.focus()}return this._handler(),!0},r.prototype.incrementable=function(){return this._lineItems.length+1<=this._item.max},r.prototype.decrement=function(e){var t=this._lineItems.indexOf(e);this._instanceData.splice(t,1),this._lineItems.splice(t,1),window.setTimeout(function(){r.removeNode(e),this._afterRender&&this._afterRender(),this._optionalFieldControl.toggle(!0),this._handler()}.bind(this),10)},r.prototype.decrementable=function(){return this._lineItems.length-1>=this._item.min},r.prototype.rendersOwnTitle=function(){return!1},r.prototype.render=function(e){var t=this._item.min||1,r=this._item.max||1,i="config-input config-input-"+this._item.type.toLowerCase();this._item.property&&this._item.property!==this._item.type.toLowerCase()&&(i+=" config-input-"+this._item.property),t!==r||t>1||this.displayAsGroup()?this._renderGroup(e,i,t,r):this._renderSingle(e,i)},r.prototype.displayAsGroup=function(){return!1},r.prototype._renderSingle=function(e,t){var i=document.createElement("div");if(i.className="config-config-item-line "+t,this.rendersOwnTitle())this._render(0,this._item.max,i);else{var s,n=this._getNewId();if(this._item.label){var o=r.renderLabel(this._context,this._item.label),a=document.createElement("label");a.textContent=o,a.classList.add("label"),a.classList.add("item-title"),a.setAttribute("for",n),i.appendChild(a)}"OR"===this._item.type?s=this._render(0,this._item.max,n):(s=this._render(0,this._item.max)).id=n,i.appendChild(s)}!1===this._context.isDisplayUnitsVisible&&"numberUnits"===this._item.property||(this._lineItems.push(i),this._afterRender&&this._afterRender(),this._node=i,e.appendChild(i))},r.prototype._renderGroup=function(e,t,i,s){var n,o=document.createElement("div");if(o.className=t,this._item.label){var a=r.renderLabel(this._context,this._item.label);(n=document.createElement("label")).textContent=a,n.classList.add("label"),n.classList.add("item-title"),o.appendChild(n)}for(var l=0;l<this.numChildren();l++){var u=this._render(l,s),d=this._createLineItem(u,l>=i),c=this._getInputNode(d);c&&(c.id=this._getNewId(),this._addInputLabel(d,l+1),n&&n.setAttribute("for",c.id)),o.appendChild(d)}i<s&&(o.appendChild(this._optionalFieldControl.node()),this._optionalFieldControl.toggle(this.numChildren()<s)),this._node=o,e.appendChild(o)},r.prototype._renderCheckbox=function(e,t,r,i,s,n){var o="config-axis-"+t,a=document.createElement("div");a.className=o;var l=document.createElement("input");l.className=o+"-checkbox config-boolean-selector",l.type="checkbox",l.checked=i,l.value=r,l.onchange=n||this._handler,l.id=this._getNewId(),a.appendChild(l);var u=document.createElement("label");return u.classList.add("label"),u.textContent=$A.get("$Label.EclairConfig."+s),u.setAttribute("for",l.id),a.appendChild(u),e.appendChild(a),a},r.prototype.numChildren=function(){return this._item.min||1},r.prototype.populate=function(e){this._lineItems.forEach((function(t,r){for(var i,s=0;s<t.children.length;s++){var n=t.children[s];if("INPUT"===n.tagName||"SELECT"===n.tagName){i=t.children[s];break}}var o=this._populate(i,r);void 0!==o&&(!this._item.min&&!this._item.max||1===this._item.min&&1===this._item.max?e[this._item.property]=o:(e[this._item.property]=e[this._item.property]||[],e[this._item.property].push(o)))}),this)},r.prototype.focus=function(){var e=this._lineItems&&this._lineItems[0],t=e&&this._getInputNode(e);t&&t.focus()},r.prototype._getInputNode=function(e){return e.querySelector("input")},r.prototype._handleDelete=function(e){},r.selectDropdown=function(e,t){Array.prototype.slice.call(e.options).some((function(r,i){return r.value===t&&(e.selectedIndex=i,!0)}))},r.DEFAULT_COLOR="#ff00ff",r.parseColor=function(e){return e&&7===e.length&&"#"===e.charAt(0)?e:e&&"#"===e.charAt(0)&&4===e.length?"#"+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)+e.charAt(3)+e.charAt(3):r.DEFAULT_COLOR},r.renderLabel=function(e,t){return e.localize&&e.localize(t)||t&&t.fallback||t||""},r.removeNode=function(e){e&&e.remove?e.remove():e&&e.parentNode&&e.parentNode.removeChild(e)},r.setNodeVisibility=function(e,t){e&&(e.style.display=t?"block":"none")},r.prototype.toggleAxisErrorMessage=function(e,t,i){var s=this._lineItems[e].querySelector(".config-axis-container"),n=this._instanceData[e];i?(s.dataset.message=r.renderLabel(this._context,t),s.classList.add("input-error"),n.hasError=!0):(s.dataset.message="",s.classList.remove("input-error"),n.hasError=!1)},r}r.d(t,{Z:()=>i})},12692:(e,t,r)=>{"use strict";function i(e){var t=0;function r(t,r,i,s,n){e.call(this,t,r,i,s,n)}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.rendersOwnTitle=function(){return!0},r.prototype._render=function(r,i,s){var n=s||document.createElement("div");if(!1===this._context.isShowValuesVisible&&"showValues"===this._item.property||!1===this._context.isShowChatterPhotosVisible&&"showChatterPhotos"===this._item.property)return n.style.display="none",n;var o="ECLAIR_CHART_CONFIG_BOOLEAN_INPUT_"+t++,a=document.createElement("label");a.className="config-boolean-selector-label label",a.textContent=e.renderLabel(this._context,this._item.label),a.setAttribute("for",o);var l=document.createElement("input");return l.className="config-boolean-selector",l.type="checkbox",l.id=o,this._context.isDisabled&&(l.disabled=!0),void 0!==this._default?l.checked=this._default:l.checked=this._item.defaults&&this._item.defaults[r],l.onchange=this._handler,n.appendChild(l),n.appendChild(a),n},r.prototype._populate=function(e){if(!1!==this._context.isShowChatterPhotosVisible||"showChatterPhotos"!==this._item.property)return e?e.checked:e},r}r.d(t,{Z:()=>i})},44801:(e,t,r)=>{"use strict";function i(e,t,r){var i=e.VALUE_SUFFIX,s=new RegExp(i+"$"),n=e.LABEL_SUFFIX,o=new RegExp(n+"$"),a="axis1",l="axis2",u="Y",d="Y2",c="sync",h="dual",p="line",g="bar",m="Line",_="Column",f="stack",y="whole";function b(e,t){if(!e||!e.summaries||!e.summaries.length)return[];var r,i=e.summaries,s=e.summaryAxisLocations,n=e.summaryVisualizationTypes,o=e.summaryColors,a=e.referenceLineValues,l=e.referenceLineColors,u=[],d={};for(r=0;r<i.length;r++)d[i[r]]&&t||(d[i[r]]=!0,u.push({name:i[r],axis:s&&s[r],visualizationType:n&&n[r],color:o&&o[r],referenceLineValue:a&&a[r],referenceLineColor:l&&l[r]}));return u}function C(e,t){return t?(e||[]).reduce((function(e,r,i){return void 0!==t[i]&&e.push(t[i]),e}),[]):e||[]}function E(e,r,i,s,n){return{fields:(e=Array.isArray(e)?e:[e]).map((function(e,o){var a={column:e.name+i};if(e.color?a.color=e.color:s&&s[o]&&s[o].color&&(a.color=s[o].color),e.axis===d&&(a.axis=l),e.visualizationType===m?a.mark=p:e.visualizationType===_&&(a.mark=g),null!==e.referenceLineValue&&void 0!==e.referenceLineValue&&(a.referenceLines=[{color:e.referenceLineColor||s[0].color,value:e.referenceLineValue}]),e.paletteId&&n&&n.length){var u=n.filter((function(t){return t.id===e.paletteId}))[0];u?(u.colorMap?t.addValueColors(a,u.colorMap):a.colors=u.colors,a.__paletteId__=u.id):(a.colors=n[0].colors,a.__paletteId__=n[0].id)}else n&&n.length&&(a.colors=n[0].colors,a.__paletteId__=n[0].id);return r&&r[e.name]&&r[e.name].label&&(a.label=r[e.name].label),a}))}}function S(e){return e.column.replace(o,"")}function T(e){return e.column.replace(s,"")}function I(e){return e.color||null}function v(e){return e.column.replace(o,"")}function R(e){return e.axis===l?d:u}function w(e){switch(e.mark){case p:return m;case g:return _;default:return null}}function A(e){return e.referenceLines&&e.referenceLines[0]?e.referenceLines[0].value:null}function D(e){return e.referenceLines&&e.referenceLines[0]?e.referenceLines[0].color:null}function L(e,t){return e&&e[t]&&e[t].fields&&e[t].fields.length}function M(e){return{column:e.sortingColumn&&e.sortingColumn.fields&&e.sortingColumn.fields[0]&&v(e.sortingColumn.fields[0]),sortOrder:e.sortingColumnOrder||"asc",type:"label"}}function N(e,t){var r=e&&e.fields;if(r){for(var i=[],s=0;s<r.length;s++)i.push({column:v(r[s]),type:"detail",showTotal:t,dataType:r[s].type});return i}}function O(e){for(var t=[],r={},i=0,s=e.length;i<s;++i)r.hasOwnProperty(e[i])||(t.push(e[i]),r[e[i]]=1);return t}function P(e,t,r,s,o,a){var l=b(e,!0);if(!s.length||!l.length)return null;var u="Line Cumulative"===e.chartType||"Line Cumulative Grouped"===e.chartType,d=0===e.chartType.indexOf("Vertical Bar"),h="Line"===e.chartType||"Line Grouped"===e.chartType||u,p=l.length>1,g=s.length>1,m=h&&g;if(!d&&g&&p)return null;var _={definition:h?"sfdc-lightning/charts/line.js":d?"sfdc-lightning/charts/vbar.js":"sfdc-lightning/charts/hbar.js",config:{__chartTitle__:e.title||"",showValues:e.showChartValues}};return(g||p)&&(_.config.legendPosition=e.legendPosition),_.config.measure=E(l,o,i,m?null:t),_.config.dimension=E(s[0],a,n),g&&(_.config.dimension.fields.push(E(s[1],a,n,null,r).fields[0]),d&&x(_)),h&&(_.config.axisMode=c,_.config.__isCumulative__=!!u),_}function x(t){var r=t.config.measure.fields;2===r.length&&r[1].mark===p&&(r[1].subtotals=!0,r[1].series=e.SUBTOTAL_SERIES_NAME),t.config.showPoints=!0}function Z(e){var t;for(var i in e)t=r.sanitizeColor(e[i].color),e[i].color=r.alohaToSfxColorConverter(t);return e}function F(e){return!isNaN(parseFloat(e))}function k(e){return[{color:"#"+e[0].color},{color:"#"+e[1].color},{color:"#"+e[2].color}]}function B(e,t,r){for(var i={},s=0;s<r.length;s++)i[r[s].column]=W(e,t,r[s].column);return i}function W(e,t,r){var i=t.groupingColumnInfo,s=e.summaries,n=t.detailColumnInfo;return i&&i[r]?i[r].dataType:s&&s.some((function(e){return e===r}))?"int":n&&n[r]?n[r].dataType:"string"}function G(e,t){var r=e.aggregateColumnInfo,i=e.groupingColumnInfo,s=e.detailColumnInfo;return r&&r[t]?r[t].label:i&&i[t]?i[t].label:s&&s[t]?s[t].label:t}return{convertChartConfigToMetadata:function(e,t){var r=t.legendPosition;switch(e){case"sfdc-lightning/charts/stackhbar.js":case"sfdc-lightning/charts/stackvbar.js":if(L(t,"dimension")&&L(t,"color")&&L(t,"measure")){var i="sfdc-lightning/charts/stackvbar.js"===e,s=t.measure.fields.length>1&&t.measure.fields[1].mark===p,n=i?"Vertical Bar Stacked":"Horizontal Bar Stacked",o=Math.min(t.measure.fields.length,2),a=t.measure.fields.slice(0,o).map(T);s?n+=" Line":t.normalize&&(n+=" to 100");var l={title:t.__chartTitle__,showChartValues:t.showValues,chartType:n,groupings:[t.dimension.fields[0],t.color.fields[0]].map(S),groupingColorPalette:t.color.fields[0].__paletteId__,summaries:a,summaryColors:t.measure.fields.map(I),referenceLineValues:t.measure.fields.map(A),referenceLineColors:t.measure.fields.map(D),summaryAxisLocations:t.measure.fields.map(R),legendPosition:r};return i&&(l.summaryVisualizationTypes=t.measure.fields.map(w)),l}return null;case"sfdc-lightning/charts/funnel.js":return L(t,"color")&&L(t,"measure")?{title:t.__chartTitle__,showChartValues:t.showValues,showChartPercentages:t.showPercentage,chartType:"Funnel",groupings:[t.color.fields[0]].map(S),groupingColorPalette:t.color.fields[0].__paletteId__,summaries:[t.measure.fields[0]].map(T),summaryColors:[t.measure.fields[0]].map(I),referenceLineValues:[t.measure.fields[0]].map(A),referenceLineColors:[t.measure.fields[0]].map(D),summaryAxisLocations:[u],legendPosition:r,combineSmallGroups:t.combineSmallGroups}:null;case"sfdc-lightning/charts/donut.js":return L(t,"dimension")&&L(t,"measure")?{title:t.__chartTitle__,showChartValues:t.showValues,showChartPercentages:t.showPercentage,showChartTotal:t.showCenterValue,chartType:"Donut",groupings:[t.dimension.fields[0]].map(S),groupingColorPalette:t.dimension.fields[0].__paletteId__,summaries:[t.measure.fields[0]].map(T),summaryColors:[t.measure.fields[0]].map(I),referenceLineValues:[t.measure.fields[0]].map(A),referenceLineColors:[t.measure.fields[0]].map(D),summaryAxisLocations:[u],legendPosition:r,combineSmallGroups:t.combineSmallGroups}:null;case"sfdc-lightning/charts/gauge.js":var d=!0;case"sfdc-lightning/charts/metric.js":if(L(t,"measure")){a=[t.measure.fields[0]].map(T);var c=[null,null,null,null];(E=t.ranges)&&(E.breakpoints&&E.breakpoints.length&&(t.showRange&&(c=E.breakpoints),d||(c=[null].concat(c.concat(null)))),E.bands&&3===E.bands.length&&(v=E.bands));l={title:t.__chartTitle__,chartType:d?"Gauge":"Metric",groupings:[],summaries:a,summaryAxisLocations:[u],breakpoints:[{aggregateName:a[0],breaks:[{lowerBound:c[0],upperBound:c[1],color:v?v[0].color.slice(1):null},{lowerBound:c[1],upperBound:c[2],color:v?v[1].color.slice(1):null},{lowerBound:c[2],upperBound:c[3],color:v?v[2].color.slice(1):null}]}],showRange:t.showRange,displayUnits:!1===t.showShortNumber?y:"auto"};return d?(l.showChartPercentages=t.showPercentage,l.showChartTotal=t.showValue):(l.showChartValues=t.showValues,l.metricLabel=t.__chartHeader__),l}return null;case"sfdc-lightning/charts/scatter.js":if(L(t,"dimension")&&L(t,"x")&&L(t,"y")){n="Scatter",a=[t.x.fields[0],t.y.fields[0]];var h=[t.dimension.fields[0]],m=t.dimension.fields[0].__paletteId__;L(t,"color")&&(n="Scatter Grouped",h.push(t.color.fields[0]),m=t.color.fields[0].__paletteId__);l={title:t.__chartTitle__,showChartValues:t.showValues,chartType:n,groupings:h.map(S),groupingColorPalette:m,summaries:a.map(T),summaryColors:a.map(I),summaryAxisLocations:["X","Y"],referenceLineValues:a.map(A),referenceLineColors:a.map(D)};return h.length>1&&(l.legendPosition=r),l}return null;case"sfdc-lightning/charts/vbar.js":case"sfdc-lightning/charts/line.js":case"sfdc-lightning/charts/hbar.js":if(L(t,"dimension")&&L(t,"measure")){var _="sfdc-lightning/charts/line.js"===e,b=!_&&"sfdc-lightning/charts/hbar.js"!==e;(s=t.measure.fields.length>1&&t.measure.fields[1].mark===p)&&"sfdc-lightning/charts/hbar.js"===e&&(t.measure.fields[1].mark=g);var C;n=_?"Line":b?"Vertical Bar":"Horizontal Bar";_&&!0===t.__isCumulative__&&(n+=" Cumulative"),L(t,"color")?(C=2,h=[t.dimension.fields[0],t.color.fields[0]],m=t.color.fields[0].__paletteId__):(C=Math.min(t.dimension.fields.length,2),h=t.dimension.fields.slice(0,C),m=t.dimension.fields[C-1].__paletteId__),C>1&&(t.mode===f?n+=" Stacked":n+=" Grouped"),!_&&s&&(n+=" Line");l={title:t.__chartTitle__,showChartValues:t.showValues,chartType:n,groupings:h.map(S),groupingColorPalette:m,summaries:t.measure.fields.map(T),summaryColors:t.measure.fields.map(I),referenceLineValues:t.measure.fields.map(A),referenceLineColors:t.measure.fields.map(D),summaryAxisLocations:t.measure.fields.map(R)};return b&&(l.summaryVisualizationTypes=t.measure.fields.map(w)),(C>1||l.summaries.length>1)&&(l.legendPosition=r),l}return null;case"sfdc/charts/table.js":if(L(t,"dimension")&&L(t,"measure")){var E,v;a=O(t.measure.fields.map(T));return c=(E=t.ranges)&&E.breakpoints&&E.breakpoints.length&&t.hasConditionalHighlighting?[null].concat(E.breakpoints.concat(null)):[null,null,null,null],E&&E.bands&&3===E.bands.length&&(v=E.bands),{chartType:"Table",groupings:O(t.dimension.fields.map(S)),summaries:a,showChatterPhotos:t.showChatterPhotos,breakpoints:[{aggregateName:a[0],breaks:[{lowerBound:c[0],upperBound:c[1],color:v?v[0].color.slice(1):null},{lowerBound:c[1],upperBound:c[2],color:v?v[1].color.slice(1):null},{lowerBound:c[2],upperBound:c[3],color:v?v[2].color.slice(1):null}]}],hasConditionalHighlighting:t.hasConditionalHighlighting}}return null;case"sfdc/charts/flexTable.js":return L(t,"columns")?{chartType:"FlexTable",groupings:[],summaries:[],tableColumns:N(t.columns,!!t.showTotal),sort:M(t),showChatterPhotos:t.showChatterPhotos}:null}return null},convertChartMetadataToConfig:function(e,t,r,s,o,a,l){var u,d,c=function(e,t){if(e){var r=$A.get("$Label.LightningDashboard.measureWithCurrency"),i={};for(var s in t)"currency"===t[s].dataType?summaryLabel=r.replace("{0}",t[s].label).replace("{1}",e):summaryLabel=t[s].label,i[s]={label:summaryLabel};return i}return t}(e.currency,t.aggregateColumnInfo),h=t.groupingColumnInfo,p=C(e.groupings,a);u=p,d=e.groupingColorPalette,p=u.length?u.map((function(e){return{name:e,paletteId:d||e}})):[];var g,m=b(e,!1),_=!1;switch(e.chartType){case"Horizontal Bar Stacked":case"Horizontal Bar Stacked Line":case"Horizontal Bar Stacked to 100":var f=b(e,!0);if(p.length<2||!f.length)return null;var I="Horizontal Bar Stacked to 100"===e.chartType,v={definition:"sfdc-lightning/charts/stackhbar.js",config:{__chartTitle__:e.title||"",legendPosition:e.legendPosition,showValues:e.showChartValues,dimension:E(p[0],h,n),color:E(p[1],h,n,null,o),normalize:I}};return I?v.config.measure=E(f[0],c,i,r):(v.config.measure=E(f,c,i,r),x(v)),v;case"Vertical Bar Stacked Line":case"Vertical Bar Stacked":case"Vertical Bar Stacked to 100":f=b(e,!0);if(p.length<2||!f.length)return null;I="Vertical Bar Stacked to 100"===e.chartType,v={definition:"sfdc-lightning/charts/stackvbar.js",config:{__chartTitle__:e.title||"",showValues:e.showChartValues,legendPosition:e.legendPosition,dimension:E(p[0],h,n),color:E(p[1],h,n,null,o),normalize:I}};return I?v.config.measure=E(f[0],c,i,r):(v.config.measure=E(f,c,i,r),x(v)),v;case"Funnel":return p.length&&e.summaries.length?{definition:"sfdc-lightning/charts/funnel.js",config:{__chartTitle__:e.title||"",legendPosition:e.legendPosition,showValues:e.showChartValues,combineSmallGroups:e.combineSmallGroups,showPercentage:e.showChartPercentages,color:E(p,h,n,null,o),measure:E(m,c,i)}}:null;case"Pie":if(!l)return null;case"Donut":if(!p.length||!e.summaries.length)return null;var R="none";return e.showChartValues?R="compactNumber":e.showChartPercentages&&(R="percent"),{definition:"sfdc-lightning/charts/donut.js",config:{__chartTitle__:e.title||"",legendPosition:e.legendPosition,showValues:e.showChartValues,showPercentage:e.showChartPercentages,showCenterValue:e.showChartTotal,combineSmallGroups:e.combineSmallGroups,valueType:R,dimension:E(p,h,n,null,o),measure:E(m,c,i)}};case"Scatter Grouped":if(p.length<2)return null;g=e.legendPosition;case"Scatter":if(m.length<2||!p.length)return null;v={definition:"sfdc-lightning/charts/scatter.js",config:{__chartTitle__:e.title||"",legendPosition:g,showValues:e.showChartValues,x:E(m[0],c,i),y:E(m[1],c,i),dimension:E(p[0],h,n)}};return p.length>1&&(v.config.color=E(p[1],h,n,null,o)),v;case"Gauge":if(0===m.length||!e.breakpoints||0===e.breakpoints.length)return null;if(e.breakpoints&&e.breakpoints.length>0)if(O=Z(e.breakpoints[0].breaks))var w={extremas:!0,breakpoints:[F(O[0].lowerBound)?O[0].lowerBound:0,F(O[0].upperBound)?O[0].upperBound:33,F(O[1].upperBound)?O[1].upperBound:67,F(O[2].upperBound)?O[2].upperBound:100],bands:k(O)};return{definition:"sfdc-lightning/charts/gauge.js",config:{__chartTitle__:e.title||"",measure:E(m[0],c,i),ranges:w,showPercentage:e.showChartPercentages,showRange:e.showRange,showShortNumber:e.displayUnits!==y,showValue:e.showChartTotal}};case"Metric":if(0===m.length)return null;if(e.breakpoints&&e.breakpoints.length>0){var A=Z(e.breakpoints[0].breaks);if(A)var D={extremas:!1,breakpoints:[F(A[0].upperBound)?A[0].upperBound:33,F(A[1].upperBound)?A[1].upperBound:67],bands:k(A)}}return{definition:"sfdc-lightning/charts/metric.js",config:{__chartTitle__:e.title||"",measure:E(m[0],c,i),ranges:D,showRange:e.showRange,showShortNumber:e.displayUnits!==y,showValues:e.showChartValues}};case"Table":if(!m.length||!p.length)return null;var M={dimension:E(p,h,n),measure:E(m,c,i),columns:e.tableColumns,sortInfo:e.sortInfo,isInNetworkContext:!!e.isInNetworkContext,showChatterPhotos:!!e.showChatterPhotos,chatterPhotoUrls:e.chatterPhotoUrls};if(M.columns)for(var N=0;N<M.columns.length;N++)M.columns[N].label=G(t,M.columns[N].column);else!function(e){if(L(e,"dimension")&&L(e,"measure")){var t=e.measure.fields[0],r=e.dimension.fields[0];e.columns=[{column:S(r),label:r.label,type:"grouping",showTotal:!1,isPercent:!1,scale:null},{column:T(t),label:t.label,type:"aggregate",showTotal:!!e.showTotal,isPercent:!1,scale:null}]}}(M);if(M.columnDataTypes=B(e,t,M.columns),e.breakpoints&&e.breakpoints.length>0){var O,W=[(O=e.breakpoints[0].breaks)[0].upperBound,O[1].upperBound];M.hasConditionalHighlighting=function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e[t].breaks.length;r++)if(null!==e[t].breaks[r].lowerBound||null!==e[t].breaks[r].upperBound)return!0;return!1}(e.breakpoints),(F(W[0])||F(W[1]))&&(M.ranges={aggregateName:e.breakpoints[0].aggregateName,breakpoints:W,bands:k(O)})}return{definition:"sfdc/charts/table.js",config:M};case"FlexTable":M={};var U=function(e,t){var r,i=[],s=t.detailColumnInfo,n=e.tableColumns;if(!n)return[];for(var o=0;o<n.length;o+=1)r=n[o],i.push({column:r.column,label:s[r.column].label,type:"grouping",showTotal:r.showTotal,isPercent:!1,scale:null});return i}(e,t),H=e.sort||e.sortInfo,V=H&&H.column,j=H&&H.sortOrder;return M.columns=U,M.columnDataTypes=B(e,t,M.columns),M.sortingColumn={column:V,selectedColumns:U},M.sortingColumnOrder=j||"asc",M.showChatterPhotos=!!e.showChatterPhotos,M.chatterPhotoUrls=e.chatterPhotoUrls,M.showTotal=function(e){if(!e)return!1;for(var t=0;t<e.length;t+=1)if(e[t].showTotal)return!0;return!1}(U),{definition:"sfdc/charts/flexTable.js",config:M};case"Vertical Bar Grouped Line":case"Vertical Bar Grouped":case"Line Grouped":case"Line Cumulative Grouped":if(p.length<2)return null;case"Vertical Bar Line":case"Vertical Bar":case"Line":case"Line Cumulative":return P(e,r,o,p,c,h);default:if(!l)return null;_=!0;case"Horizontal Bar Grouped":if(!_&&p.length<2)return null;case"Horizontal Bar":return P(e,r,o,p,c,h)}},isComboChartRequiredForConfig:function(e){var t=e&&e.measure,r=t&&t.fields;return r&&r.length>2||r&&2===r.length&&r[0].mark&&r[1].mark&&r[0].mark!==r[1].mark},ECLAIR_AXIS1:a,ECLAIR_AXIS2:l,ECLAIR_AXIS_MODE_SYNC:c,ECLAIR_AXIS_MODE_DUAL:h,ECLAIR_MARK_LINE:p,ECLAIR_MARK_BAR:g,ECLAIR_MODE_CLUSTER:"cluster",ECLAIR_MODE_STACK:f,"@test":{lockGroupingOrder:C}}}r.d(t,{Z:()=>i})},2629:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(8429);function s(e,t){function r(e,t){return function(t,r,s){if((t=JSON.parse(JSON.stringify(t))).config=t.config.filter((function(e){return"showTotal"!==e.property})),t.shortname&&"lineShortName"===t.shortname.id)for(var n=0;n<t.config.length;n++)"yAxis"===t.config[n].label.id&&t.config.splice(n+1,0,{type:"BOOLEAN",property:"__isCumulative__",max:1,min:1,label:i.Z.getLabel("EclairConfig","cumulative"),defaults:[!1]});return t.config&&e&&t.config.unshift({type:"TEXT",min:1,max:1,property:"__chartTitle__",label:i.Z.getLabel("EclairConfig","chartTitle"),maxLength:s,defaults:[r]}),t}}var s=[{path:"sfdc-lightning/charts/hbar.js",transform:r(!0),minDimensions:1,minMeasures:1},{path:"sfdc-lightning/charts/vbar.js",transform:r(!0),minDimensions:1,minMeasures:1},{path:"sfdc-lightning/charts/stackhbar.js",transform:r(!0),minDimensions:2,minMeasures:1},{path:"sfdc-lightning/charts/stackvbar.js",transform:r(!0),minDimensions:2,minMeasures:1},{path:"sfdc-lightning/charts/line.js",transform:r(!0),minDimensions:1,minMeasures:1},{path:"sfdc-lightning/charts/donut.js",transform:r(!0),minDimensions:1,minMeasures:1},{path:"sfdc-lightning/charts/funnel.js",transform:r(!0),minDimensions:1,minMeasures:1},{path:"sfdc-lightning/charts/scatter.js",transform:r(!0),minDimensions:1,minMeasures:1,dupMeasures:!0}];function n(e,t,r){var i=r||{minDimensions:0,minMeasures:0,hasOtherDimension:!1,hasOtherMeasure:!1};return e.forEach((function(e){"DIMENSION"===e.type?(i.minDimensions+=e.min,"dimension"!==e.property&&(i.hasOtherDimension=!0)):"MEASURE"===e.type?(i.minMeasures+=e.min,"measure"!==e.property&&(i.hasOtherMeasure=!0)):"GROUP"===e.type?n(e.config,!1,i):"OR"===e.type&&n(e.config,!0,i)})),i}function o(e,r,i,s,l,u,d,c,h,p,g,m,_){var f,y,b,C,E,S,T;return h=h||{legendPosition:"Right"},p=p||[].concat(s),g=g||[].concat(l),r&&(f=r.dimension&&r.dimension.fields,S=r.color&&r.color.fields,y=r.measure&&r.measure.fields,b=r.extraMeasure&&r.extraMeasure.fields,C=r.x&&r.x.fields,E=r.y&&r.y.fields),T=n(e),e.forEach((function(e){var n;"DIMENSION"===e.type?(m?(n="dimension"!==e.property||T.hasOtherDimension?e.min:p.length,h[e.property]={fields:p.splice(0,n)}):"dimension"===e.property&&f&&f.length>=e.min?(a(i,f,p,e,h,e.property),!T.hasOtherDimension&&S&&a(i,S,p,e,h,e.property,!0)):"color"===e.property&&S&&S.length>=e.min?a(i,S,p,e,h,e.property):r&&r[e.property]&&r[e.property].fields.length>0&&!h[e.property]?a(i,r[e.property].fields,p,e,h,e.property):f||(h[e.property]={fields:p.splice(0,e.max)}),e.colorable&&$A.util.forEach(h[e.property]&&h[e.property].fields||[],(function(e){if(e){var r;if(c.hasPicklistColors)for(var i=0;i<c.length;i++)if(t.isCorrectPalette(e.column,c[i])){r=c[i];break}null!=r&&void 0!==r||(r=c[0]),r.colorMap?t.addValueColors(e,r.colorMap):e.colors=r.colors,e.__paletteId__=r.id}}))):"MEASURE"===e.type?(_?(n="measure"!==e.property||T.hasOtherMeasure?e.min:g.length,h[e.property]={fields:g.splice(0,n)}):"measure"===e.property&&y&&y.length>=e.min?(a(i,y,g,e,h,e.property),!T.hasOtherMeasure&&b&&a(i,b,g,e,h,e.property,!0)):"measure"===e.property&&C&&E?(a(i,C,g,e,h,e.property),a(i,E,g,e,h,e.property,!0)):"extraMeasure"===e.property&&b&&b.length>=e.min?a(i,b,g,e,h,e.property):"x"===e.property&&C&&C.length>=e.min?a(i,C,g,e,h,e.property):"y"===e.property&&E&&E.length>=e.min?a(i,E,g,e,h,e.property):r&&r[e.property]&&r[e.property].fields&&r[e.property].fields.length>0&&!h[e.property]?a(i,r[e.property].fields,g,e,h,e.property):y||(h[e.property]={fields:g.splice(0,e.min)}),e.colorable&&$A.util.forEach(h[e.property]&&h[e.property].fields||[],(function(t,r){if(t){var i=e.role&&"PRIMARY"!==e.role&&d?d:u;t.color=i[r%i.length].color}}))):"GROUP"!==e.type&&"OR"!==e.type||o(e.config,r,i,s,l,u,d,c,h,p,g,m,_)})),h}function a(e,t,r,i,s,n,o){var a,l,u,d;if(t)for(d=s[n]&&s[n].fields,u=t.splice(0,t.length),o&&d?Array.prototype.push.apply(d,u):s[n]={fields:u},a=r.length-1;a>=0;a--)for(l=0;l<u.length;l++)if(r[a].column===u[l].column&&r[a].label===u[l].label){r.splice(a,1);break}}function l(e,t,r,i,s,n,o,a,l,c){var h=null,p=t&&t.dimensions,g=t&&t.measures,m=p&&p.length,_=g&&g.length,f=c||d(e,t,n,o),y=function(e,t){if(!e)return;var r;return t.some((function(t){var i=t.script.path();if(e===i)return r=t,!0})),r}(a,f),b=y&&u(y,a,l,m,_,p,g,r,i,s);return b||!!f.some((function(e){if(h=u(e,a,l,m,_,p,g,r,i,s))return h}))&&h}function u(e,t,r,i,s,a,l,u,d,c){if(e.enabled){var h,p,g=e.metadata,m=g&&g.config;return m&&i>=(h=n(m)).minDimensions&&s>=h.minMeasures?(p=o(m,r,t,a,l,u,d,c,undefined,undefined,undefined,!1,!1),r&&(r._isCumulative&&(p._isCumulative=r._isCumulative),r.axis1&&(p.axis1=r.axis1),r.axis2&&(p.axis2=r.axis2),r.axisMode&&(p.axisMode=r.axisMode)),{definition:e.script.path(),config:p}):void 0}}function d(t,r,i,n){var o=[];return s.forEach((function(s){var a=t.script(s.path);if(a){var l=s.transform(a.metadata(),i,n),u=e.pruneUnselectableAxes(l,r,s.dupMeasures),d=e.findAxisTraces(u.config),c=d.primaryMeasures.length+d.secondaryMeasures.length,h=d.primaryDimensions.length+d.secondaryDimensions.length;o.push({script:a,metadata:u,enabled:c>=s.minMeasures&&h>=s.minDimensions})}})),o}return{getLightningChartWhitelist:d,suggestLightningChart:function(e,t,r,i,s,n,o,a){return l(e,t,r,i,s,n,o,null,null,a)},suggestLightningChartWithPreference:l,assignConfig:o,chartTypesWithCombineSmallGroupIntoOtherOption:{Donut:!0,Pie:!0,Funnel:!0},getWhiteListers:function(){return s},findSuggestedConfig:u}}},56076:(e,t,r)=>{"use strict";function i(e,t){function r(t,r,i,s,n){e.call(this,t,r,i,s,n)}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype._render=function(t,r){var i=document.createElement("input");i.className="config-color-selector";try{i.type="color"}catch(e){i.type="text"}return void 0!==this._default?i.value=e.parseColor(this._default):i.value=this._item.defaults&&e.parseColor(this._item.defaults[t])||e.DEFAULT_COLOR,i.onchange=this._handler,i},r.prototype._populate=function(t){return t&&t.value||e.DEFAULT_COLOR},r}r.d(t,{Z:()=>i})},36829:(e,t,r)=>{"use strict";function i(){var e={c25454:{sfxColor:"C23934",textColor:"FFF"},c28b54:{sfxColor:"E69F00",textColor:"16325C"},c2c254:{sfxColor:"E2CE7D",textColor:"16325C"},"8bc254":{sfxColor:"95C561",textColor:"16325C"},"54c254":{sfxColor:"00716B",textColor:"FFF"},c2548b:{sfxColor:"DEA7C5",textColor:"16325C"},"9c7954":{sfxColor:"FFB75D",textColor:"16325C"},"8b8b54":{sfxColor:"C3B168",textColor:"16325C"},"799c54":{sfxColor:"95C561",textColor:"16325C"},"549c79":{sfxColor:"62AE89",textColor:"16325C"},c254c2:{sfxColor:"A243D2",textColor:"FFF"},"9c5479":{sfxColor:"E2B1FA",textColor:"16325C"},"8b548b":{sfxColor:"7B399C",textColor:"FFF"},"54c28b":{sfxColor:"7CD59D",textColor:"16325C"},"548b8b":{sfxColor:"2C6E8B",textColor:"FFF"},"8b54c2":{sfxColor:"351C75",textColor:"FFF"},"79549c":{sfxColor:"815B94",textColor:"FFF"},"5454c2":{sfxColor:"6555F5",textColor:"FFF"},"548bc2":{sfxColor:"ABDCF4",textColor:"16325C"},"54799c":{sfxColor:"54698D",textColor:"FFF"},"54c2c2":{sfxColor:"76DED9",textColor:"16325C"},aaaaaa:{sfxColor:"C9CED8",textColor:"16325C"},666666:{sfxColor:"98A1AE",textColor:"16325C"},"000000":{sfxColor:"16325C",textColor:"FFF"},ffffff:{sfxColor:"FFF",textColor:"16325C"},c23934:{sfxColor:"c23934",textColor:"FFF"},ffb75d:{sfxColor:"ffb75d",textColor:"FFF"},"00716b":{sfxColor:"00716b",textColor:"FFF"}},t="16325C",r=7*(a(t)+.05),i=(Math.sqrt(21)-1)/20;function s(t){return e[t]?e[t].sfxColor:t}function n(e){if(!e)return e;var t,r={};for(var i in e)t=o(e[i]).color,r[i]={color:s(t)};return r}function o(e){if(null==e&&(e="000000"),e.length>=6)return e.slice(e.length-6);for(;e.length<6;)e="0"+e;return e}function a(e){var t=o(e),r=parseInt(t.slice(0,2),16)/255,i=parseInt(t.slice(2,4),16)/255,s=parseInt(t.slice(4,6),16)/255;return.2126*l(r)+.7152*l(i)+.0722*l(s)}function l(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}return{alohaToSfxColorConverter:s,sanitizeColor:o,getTextColorFor:function(e){var s=a(e);return s>=r?t:s<=.1?"FFF":s>i?"000":"FFF"},alohaToSfxTextColorConverter:function(r){return e[r]?e[r].textColor:t},picklistColorToSfxColorConverter:function(e){if(!e)return e;var t={};for(var r in e)t[r]=n(e[r]);return t}}}r.d(t,{Z:()=>i})},90143:(e,t,r)=>{"use strict";function i(e,t,r){var i=t.VALUE_SUFFIX,s=new RegExp(i+"$"),n=t.LABEL_SUFFIX,o=new RegExp(n+"$"),a="sfdc-lightning/charts/donut.js",l="sfdc-lightning/charts/funnel.js";function u(e,t){return e.reduce((function(e,r){var i=r[r.length-1];return t[i.property]&&e.push(t[i.property]),e}),[])}function d(e,t,r,i){if(r=[].concat(r),e.length>0&&0===r.length){let e=[];Object.keys(t).forEach((function(r){const i=t[r].fields.map((({column:e})=>e));e=e.concat(i)}));const s=[];i.forEach((function(t){for(let r=0;r<e.length;r++)if(t.column===e[r])return;s.push(t)})),r=[].concat({fields:s})}e.forEach((function(i){var s,n,o=i[i.length-1];r.some((function(e,t){return!!(e.fields&&e.fields.length>=o.min)&&(s=e,n=t,!0)})),r.length&&s&&(t[o.property]=s,s.fields.length=Math.min(s.fields.length,o.max),e.length>0&&1===r.length||r.splice(n,1))}))}function c(e,t,r){return r=r||{primaryDimensions:[],primaryMeasures:[],secondaryDimensions:[],secondaryMeasures:[]},t=t||[{config:e}],e.forEach((function(e,i){"OR"===e.type||"GROUP"===e.type?c(e.config,t.concat([e]),r):"DIMENSION"===e.type?r["SECONDARY"===e.role?"secondaryDimensions":"primaryDimensions"].push(t.concat([e])):"MEASURE"===e.type&&r["SECONDARY"===e.role?"secondaryMeasures":"primaryMeasures"].push(t.concat([e]))})),r}function h(e){var t=e[e.length-1],r=e[e.length-2];t&&r&&(r.config.splice(r.config.indexOf(t),1),0===r.config.length&&e.length>=2&&h(e.slice(0,e.length-1)))}function p(e,t,r,i){return e[t].forEach((function(e){var t=e[e.length-1];if("min"===i){if(r<t.min)return void h(e);r=Math.max(r-t.min,0)}else{var s=t.max-t.min;r<t.max&&(t.max=Math.max(r,t.min)),r=Math.max(r-s,0)}})),r}function g(e,t){t?e.style.display="none":e.style.removeProperty("display")}function m(e){var t={dimensions:0,measures:0};return e.measure&&(t.measures+=e.measure.fields.length),e.extraMeasure&&t.measures++,e.x&&t.measures++,e.y&&t.measures++,e.dimension&&(t.dimensions+=e.dimension.fields.length),e.extraDimension&&t.dimensions++,e.color&&t.dimensions++,t}function _(t,i){return"sfdc/charts/table.js"===i?e.getConfigScript():"sfdc/charts/flexTable.js"===i?r.getConfigScript():t.script(i)}function f(e){return e.match(o)?e.replace(o,""):e.match(s)?e.replace(s,""):void 0}return{pruneUnselectableAxes:function(e,t,r){var i=c((e=JSON.parse(JSON.stringify(e))).config),s=t.dimensions.length;if(s=p(i,"primaryDimensions",s,"min"),p(i,"secondaryDimensions",s,"min"),s=p(i,"primaryDimensions",s=t.dimensions.length,"max"),p(i,"secondaryDimensions",s,"max"),!0!==r){var n=t.measures.length;n=p(i,"primaryMeasures",n,"min"),p(i,"secondaryMeasures",n,"min"),n=p(i,"primaryMeasures",n=t.measures.length,"max"),p(i,"secondaryMeasures",n,"max")}return e},mapConfigsToNewDefinition:function(e,t,r,i,s,n){var o=_(e,t).metadata().config,a=_(e,i).metadata().config,l=c(o),h=c(a),p=u(l.primaryMeasures,r),g=u(l.secondaryMeasures,r),y=u(l.primaryDimensions,r),b=u(l.secondaryDimensions,r),C={},E={};if(d(h.primaryMeasures,E,p,s.measures),d(h.secondaryMeasures,E,g,s.measures),d(h.primaryDimensions,E,y,s.dimensions),d(h.secondaryDimensions,E,b,s.dimensions),l.primaryMeasures.length&&l.primaryMeasures[0][1].secondMeasureIsLine)var S=!0;(s&&s.dimensions&&m(E).measures<=1||S)&&function(e,t,r){var i=[];e.forEach((function(e){var r=e[e.length-1];t[r.property]&&t[r.property].fields&&Array.prototype.push.apply(i,t[r.property].fields.map((function(e){return e.column})))}));var s=r.filter((function(e){return!i.some((function(t){return f(t)===f(e.column)}))}));if(0===s.length)return;e.forEach((function(e){var r=e[e.length-1],i=e[e.length-2];if("OR"===i.type&&i.config.length>1)for(var n=0;n<i.config.length;n++){var o=i.config[n];if(o.property!==r.property&&t[o.property])return}t[r.property]||(t[r.property]={fields:[]});for(var a=t[r.property].fields;a.length<r.max&&s.length>0;){var l=s.splice(0,1)[0];a.push({column:l.column,label:l.label})}}))}(h.primaryDimensions.concat(h.secondaryDimensions),E,s.dimensions);var T=h.primaryMeasures.length>0&&h.primaryMeasures[0][1].multidimensionalMax;return!isNaN(T)&&m(E).dimensions>1&&E.measure&&E.measure.fields.length>T&&(E.measure.fields.length=T),Object.keys(l).forEach((function(e){l[e].forEach((function(e){C[e[e.length-1].property]=!0}))})),Object.keys(r).forEach((function(e){C[e]||(E[e]=r[e])})),this.mapRowLimitToNewDefinition(t,i,E,r.__rowLimit__,n),E},mapRowLimitToNewDefinition:function(e,t,r,i,s){return!r.__rowLimit__&&i&&(r.__rowLimit__=i),s||(!function(e,t){return(e===a||e===l)&&t!==a&&t!==l}(e,t)?function(e,t){return e!==a&&e!==l&&(t===a||t===l)}(e,t)&&100===r.__rowLimit__&&(r.__rowLimit__=6):6===r.__rowLimit__&&(r.__rowLimit__=100)),r},findAxisTraces:c,updateDynamicConfigInputs:function(e,t,r){var i=m(t);r.forEach((function(r){var s=r.node();if(s){if("legendPosition"===r.item().property)g(s,function(e,t){var r=m(e),i=r.measures+r.dimensions<=2;return"sfdc-lightning/charts/donut.js"!==t&&"sfdc-lightning/charts/funnel.js"!==t&&("sfdc-lightning/charts/scatter.js"===t?!e.color:!e.color&&i)}(t,e));else if("hasConditionalHighlighting"===r.item().property){var n=t.highlightColumn&&t.highlightColumn.fields&&t.highlightColumn.fields.length>0;s.firstElementChild.disabled=!n;var o=!t.hasConditionalHighlighting||!n;"sfdc/charts/table.js"===e?g(s.nextElementSibling,o):"sfdc/charts/flexTable.js"===e&&(g(s.nextElementSibling,o),g(s.nextElementSibling.nextElementSibling,o))}"normalize"===r.item().property?"sfdc-lightning/charts/stackvbar.js"===e&&g(s,i.measures>1):"showRange"===r.item().property&&("sfdc-lightning/charts/gauge.js"!==e&&"sfdc-lightning/charts/metric.js"!==e||(s.nextElementSibling.disabled=!1,s.nextElementSibling.style.filter="none")),!r.updateDynamicConfigInputs||"sfdc-lightning/charts/vbar.js"!==e&&"sfdc-lightning/charts/hbar.js"!==e&&"sfdc-lightning/charts/line.js"!==e&&"sfdc-lightning/charts/stackvbar.js"!==e||r.updateDynamicConfigInputs(t)}}))},getConfigScript:_,getAxisCounts:m,"@test":{extractCorrespondingAxesFromTrace:u,assignCorrespondingAxisToConfig:d,removeConfigItem:h,pruneIndividualAxis:p}}}r.d(t,{Z:()=>i})},40266:(e,t,r)=>{"use strict";function i(e){function t(e,t){this._path=e,this._metadata=t}t.prototype.path=function(){return this._path},t.prototype.metadata=function(){return this._metadata};var r={"sfdc-lightning/charts/donut.js":"lightning-donut-chart","sfdc-lightning/charts/funnel.js":"lightning-funnel-chart","sfdc-lightning/charts/gauge.js":"lightning-gauge-chart","sfdc-lightning/charts/hbar.js":"lightning-hbar-chart","sfdc-lightning/charts/hcombo.js":"lightning-hcombo-chart","sfdc-lightning/charts/line.js":"lightning-line-chart","sfdc-lightning/charts/metric.js":"lightning-metric-chart","sfdc-lightning/charts/pyramid.js":"lightning-pyramid-chart","sfdc-lightning/charts/scatter.js":"lightning-scatter-chart","sfdc-lightning/charts/stackhbar.js":"lightning-stackhbar-chart","sfdc-lightning/charts/stackvbar.js":"lightning-stackvbar-chart","sfdc-lightning/charts/timeline.js":"lightning-timeline-chart","sfdc-lightning/charts/vbar.js":"lightning-vbar-chart","sfdc-lightning/charts/vcombo.js":"lightning-vcombo-chart"},i={"lightning-donut-chart":{moduleName:"lightning-donut-chart",name:{section:"EclairConfig",id:"donutLongName",fallback:"Donut Chart"},shortname:{section:"EclairConfig",id:"donutShortName",fallback:"Donut"},version:"42.0",dependencies:{lodash:"4.12.0","wave-charts-sdk":"42.0","lightning-lightningAdapter":"42.0","sfdc-pie-chart":"42.0"},config:[{type:"MEASURE",label:{section:"EclairConfig",id:"value",fallback:"Value"},min:1,max:1,property:"measure"},{type:"DIMENSION",label:{section:"EclairConfig",id:"slicedBy",fallback:"Sliced By"},min:1,max:1,property:"dimension",colorable:!0},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showValues",fallback:"Show Values"},min:1,max:1,defaults:[!0],property:"showValues"},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showPercentages",fallback:"Show Percentages"},min:1,max:1,defaults:[!1],property:"showPercentage"},{type:"BOOLEAN",label:{section:"EclairConfig",id:"combineSmallGroups",fallback:'Combine Small Groups into "Others"'},min:1,max:1,defaults:[!0],property:"combineSmallGroups"},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showTotal",fallback:"Show Total"},min:1,max:1,defaults:[!0],property:"showCenterValue"},{type:"ENUM",property:"legendPosition",label:{section:"EclairConfig",id:"legendPosition",fallback:"Legend Position"},min:1,max:1,options:[{value:"Right",label:{section:"EclairConfig",id:"legendPositionRight",fallback:"Right"}},{value:"Bottom",label:{section:"EclairConfig",id:"legendPositionBottom",fallback:"Bottom"}}]}]},"lightning-funnel-chart":{moduleName:"lightning-funnel-chart",name:{section:"EclairConfig",id:"funnelLongName",fallback:"Funnel Chart"},shortname:{section:"EclairConfig",id:"funnelShortName",fallback:"Funnel"},version:"42.0",dependencies:{lodash:"4.12.0","wave-charts-sdk":"42.0","lightning-lightningAdapter":"42.0","sfdc-funnel-chart":"42.0"},config:[{type:"MEASURE",label:{section:"EclairConfig",id:"value",fallback:"Value"},min:1,max:1,property:"measure"},{type:"DIMENSION",label:{section:"EclairConfig",id:"color",fallback:"Color By"},min:1,max:1,property:"color",colorable:!0},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showValues",fallback:"Show Values"},min:1,max:1,defaults:[!0],property:"showValues"},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showPercentages",fallback:"Show Percentages"},min:1,max:1,defaults:[!1],property:"showPercentage"},{type:"BOOLEAN",label:{section:"EclairConfig",id:"combineSmallGroups",fallback:'Combine Small Groups into "Others"'},min:1,max:1,defaults:[!0],property:"combineSmallGroups"},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showTotal",fallback:"Show Total"},min:1,max:1,defaults:[!1],property:"showTotal"},{type:"ENUM",property:"legendPosition",label:{section:"EclairConfig",id:"legendPosition",fallback:"Legend Position"},min:1,max:1,options:[{value:"Right",label:{section:"EclairConfig",id:"legendPositionRight",fallback:"Right"}},{value:"Bottom",label:{section:"EclairConfig",id:"legendPositionBottom",fallback:"Bottom"}}]}]},"lightning-hbar-chart":{moduleName:"lightning-hbar-chart",name:{section:"EclairConfig",id:"hbarLongName",fallback:"Horizontal Bar Chart"},shortname:{section:"EclairConfig",id:"hbarShortName",fallback:"HBar"},version:"42.0",dependencies:{lodash:"4.12.0","wave-charts-sdk":"42.0","lightning-lightningAdapter":"42.0","sfdc-bar-chart":"42.0","sfdc-combo-chart":"42.0"},config:[{type:"DIMENSION",label:{section:"EclairConfig",id:"yAxis",fallback:"Y-Axis"},min:1,max:2,multimetricMax:1,property:"dimension",colorable:!0},{type:"MEASURE",label:{section:"EclairConfig",id:"xAxis",fallback:"X-Axis"},min:1,max:4,multidimensionalMax:1,property:"measure",colorable:!0,supportsReferenceLines:!0},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showValues",fallback:"Show Values"},min:1,max:1,defaults:[!0],property:"showValues"},{type:"ENUM",property:"legendPosition",label:{section:"EclairConfig",id:"legendPosition",fallback:"Legend Position"},min:1,max:1,options:[{value:"Right",label:{section:"EclairConfig",id:"legendPositionRight",fallback:"Right"}},{value:"Bottom",label:{section:"EclairConfig",id:"legendPositionBottom",fallback:"Bottom"}}]}]},"lightning-gauge-chart":{moduleName:"lightning-gauge-chart",name:{section:"EclairConfig",id:"gaugeLongName",fallback:"Gauge"},shortname:{section:"EclairConfig",id:"gaugeShortName",fallback:"Gauge"},version:"42.0",dependencies:{"sfdc-gauge-chart":"42.0","lightning-lightningAdapter":"42.0","wave-charts-sdk":"42.0"},config:[{type:"MEASURE",label:{section:"EclairConfig",id:"measure",fallback:"Measure"},min:1,max:1,property:"measure",colorable:!1},{type:"BOOLEAN",property:"showShortNumber",label:{section:"EclairConfig",id:"shortenNumber",fallback:"Shorten Number"},min:1,max:1,defaults:[!1]},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showPercentages",fallback:"Show Percentages"},min:1,max:1,defaults:[!1],property:"showPercentage"},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showValues",fallback:"Show Values"},min:1,max:1,defaults:[!0],property:"showValue"},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showRange",fallback:"Show Range"},min:1,max:1,defaults:[!1],property:"showRange"},{type:"RANGE",label:{section:"EclairConfig",id:"segmentRanges",fallback:"Segment Ranges"},colorable:!0,labelable:!0,extremas:!0,min:3,max:3,property:"ranges"}]},"lightning-hcombo-chart":{moduleName:"lightning-hcombo-chart",version:"42.0",dependencies:{lodash:"4.12.0","lightning-lightningAdapter":"42.0","sfdc-combo-chart":"42.0","wave-charts-sdk":"42.0"}},"lightning-lightningAdapter":{moduleName:"lightning-lightningAdapter",version:"42.0",dependencies:{"wave-charts-sdk":"42.0",lodash:"4.12.0"}},"lightning-line-chart":{moduleName:"lightning-line-chart",name:{section:"EclairConfig",id:"lineLongName",fallback:"Line Chart"},shortname:{section:"EclairConfig",id:"lineShortName",fallback:"Line"},version:"42.0",dependencies:{lodash:"4.12.0","lightning-lightningAdapter":"42.0","sfdc-line-chart":"42.0","wave-charts-sdk":"42.0"},config:[{type:"DIMENSION",label:{section:"EclairConfig",id:"xAxis",fallback:"X-Axis"},role:"PRIMARY",min:1,max:2,multimetricMax:1,property:"dimension",colorable:!0},{type:"MEASURE",label:{section:"EclairConfig",id:"yAxis",fallback:"Y-Axis"},role:"PRIMARY",min:1,max:2,multidimensionalMax:1,property:"measure",colorable:!0,supportsReferenceLines:!0},{type:"ENUM",property:"legendPosition",label:{section:"EclairConfig",id:"legendPosition",fallback:"Legend Position"},min:1,max:1,options:[{value:"Right",label:{section:"EclairConfig",id:"legendPositionRight",fallback:"Right"}},{value:"Bottom",label:{section:"EclairConfig",id:"legendPositionBottom",fallback:"Bottom"}}]}]},"lightning-metric-chart":{moduleName:"lightning-metric-chart",name:{section:"EclairConfig",id:"metricLongName",fallback:"Metric Chart"},shortname:{section:"EclairConfig",id:"metricShortName",fallback:"Metric"},version:"42.0",dependencies:{"sfdc-metric-chart":"42.0","lightning-lightningAdapter":"42.0"},config:[{type:"MEASURE",label:{section:"EclairConfig",id:"measure",fallback:"Measure"},min:1,max:1,property:"measure",colorable:!1},{type:"BOOLEAN",property:"showShortNumber",label:{section:"EclairConfig",id:"shortenNumber",fallback:"Shorten Number"},min:1,max:1,defaults:[!1]},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showRange",fallback:"Show Range"},min:1,max:1,defaults:[!1],property:"showRange"},{type:"RANGE",label:{section:"EclairConfig",id:"ranges",fallback:"Ranges"},colorable:!0,labelable:!0,extremas:!1,min:3,max:3,property:"ranges"}]},"lightning-scatter-chart":{moduleName:"lightning-scatter-chart",name:{section:"EclairConfig",id:"scatterLongName",fallback:"Scatter Chart"},shortname:{section:"EclairConfig",id:"scatterShortName",fallback:"Scatter"},version:"42.0",dependencies:{lodash:"4.12.0","wave-charts-sdk":"42.0","sfdc-scatter-chart":"42.0","lightning-lightningAdapter":"42.0"},config:[{type:"MEASURE",label:{section:"EclairConfig",id:"xAxis",fallback:"X-Axis"},min:1,max:1,property:"x",colorable:!1,supportsReferenceLines:!0},{type:"MEASURE",label:{section:"EclairConfig",id:"yAxis",fallback:"Y-Axis"},min:1,max:1,property:"y",colorable:!1,supportsReferenceLines:!0},{type:"DIMENSION",label:{section:"EclairConfig",id:"detail",fallback:"Detail"},min:1,max:1,role:"PRIMARY",property:"dimension",colorable:!1},{type:"OR",nullable:!0,label:{section:"EclairConfig",id:"add",fallback:"Add"},config:[{type:"DIMENSION",label:{section:"EclairConfig",id:"colorBy",fallback:"Color By"},min:1,max:1,role:"SECONDARY",property:"color",colorable:!0}]},{type:"ENUM",property:"legendPosition",label:{section:"EclairConfig",id:"legendPosition",fallback:"Legend Position"},min:1,max:1,options:[{value:"Right",label:{section:"EclairConfig",id:"legendPositionRight",fallback:"Right"}},{value:"Bottom",label:{section:"EclairConfig",id:"legendPositionBottom",fallback:"Bottom"}}]}]},"lightning-stackhbar-chart":{moduleName:"lightning-stackhbar-chart",name:{section:"EclairConfig",id:"stackhbarLongName",fallback:"Stacked Horizontal Bar Chart"},shortname:{section:"EclairConfig",id:"stackhbarShortName",fallback:"StackHBar"},version:"42.0",dependencies:{lodash:"4.12.0","sfdc-bar-chart":"42.0","wave-charts-sdk":"42.0","lightning-lightningAdapter":"42.0"},config:[{type:"DIMENSION",label:{section:"EclairConfig",id:"yAxis",fallback:"Y-Axis"},min:1,max:1,role:"PRIMARY",property:"dimension"},{type:"MEASURE",label:{section:"EclairConfig",id:"xAxis",fallback:"X-Axis"},min:1,max:1,property:"measure",supportsReferenceLines:!0},{type:"DIMENSION",label:{section:"EclairConfig",id:"stackBy",fallback:"Stack By"},min:1,max:1,role:"SECONDARY",property:"color",colorable:!0},{type:"BOOLEAN",label:{section:"EclairConfig",id:"normalizeValues",fallback:"Stack to 100%"},min:1,max:1,defaults:[!1],property:"normalize"},{type:"ENUM",property:"legendPosition",label:{section:"EclairConfig",id:"legendPosition",fallback:"Legend Position"},min:1,max:1,options:[{value:"Right",label:{section:"EclairConfig",id:"legendPositionRight",fallback:"Right"}},{value:"Bottom",label:{section:"EclairConfig",id:"legendPositionBottom",fallback:"Bottom"}}]}]},"lightning-stackvbar-chart":{moduleName:"lightning-stackvbar-chart",name:{section:"EclairConfig",id:"stackvbarLongName",fallback:"Stacked Vertical Bar Chart"},shortname:{section:"EclairConfig",id:"stackvbarShortName",fallback:"StackVBar"},version:"42.0",dependencies:{lodash:"4.12.0","sfdc-combo-chart":"42.0","wave-charts-sdk":"42.0","lightning-lightningAdapter":"42.0"},config:[{type:"DIMENSION",label:{section:"EclairConfig",id:"xAxis",fallback:"X-Axis"},min:1,max:1,role:"PRIMARY",property:"dimension"},{type:"MEASURE",label:{section:"EclairConfig",id:"yAxis",fallback:"Y-Axis"},min:1,max:2,property:"measure",supportsReferenceLines:!0,secondMeasureIsLine:!0},{type:"DIMENSION",label:{section:"EclairConfig",id:"stackBy",fallback:"Stack By"},min:1,max:1,role:"SECONDARY",property:"color",colorable:!0},{type:"BOOLEAN",label:{section:"EclairConfig",id:"normalizeValues",fallback:"Stack to 100%"},min:1,max:1,defaults:[!1],property:"normalize"},{type:"ENUM",property:"legendPosition",label:{section:"EclairConfig",id:"legendPosition",fallback:"Legend Position"},min:1,max:1,options:[{value:"Right",label:{section:"EclairConfig",id:"legendPositionRight",fallback:"Right"}},{value:"Bottom",label:{section:"EclairConfig",id:"legendPositionBottom",fallback:"Bottom"}}]}]},"lightning-timeline-chart":{moduleName:"lightning-timeline-chart",version:"42.0",dependencies:{"sfdc-timeline-chart":"42.0","lightning-lightningAdapter":"42.0"}},"lightning-vbar-chart":{moduleName:"lightning-vbar-chart",name:{section:"EclairConfig",id:"vbarLongName",fallback:"Vertical Bar Chart"},shortname:{section:"EclairConfig",id:"vbarShortname",fallback:"VBar"},version:"42.0",dependencies:{lodash:"4.12.0","lightning-lightningAdapter":"42.0","sfdc-combo-chart":"42.0","wave-charts-sdk":"42.0"},config:[{type:"DIMENSION",label:{section:"EclairConfig",id:"xAxis",fallback:"X-Axis"},min:1,max:2,multimetricMax:2,property:"dimension",colorable:!0},{type:"MEASURE",label:{section:"EclairConfig",id:"yAxis",fallback:"Y-Axis"},min:1,max:4,multidimensionalMax:2,property:"measure",colorable:!0,supportsReferenceLines:!0,supportsLineForSecondMeasure:!0},{type:"BOOLEAN",label:{section:"EclairConfig",id:"showValues",fallback:"Show Values"},min:1,max:1,defaults:[!0],property:"showValues"},{type:"ENUM",property:"legendPosition",label:{section:"EclairConfig",id:"legendPosition",fallback:"Legend Position"},min:1,max:1,options:[{value:"Right",label:{section:"EclairConfig",id:"legendPositionRight",fallback:"Right"}},{value:"Bottom",label:{section:"EclairConfig",id:"legendPositionBottom",fallback:"Bottom"}}]}]},"lightning-vcombo-chart":{moduleName:"lightning-vcombo-chart",version:"42.0",dependencies:{lodash:"4.12.0","wave-charts-sdk":"42.0","lightning-lightningAdapter":"42.0","sfdc-combo-chart":"42.0"}}};return{scripts:function(){var e,s=[];for(e in r)s.push(new t(e,i[r[e]]));return s},script:function(e){return new t(e,i[r[e]])}}}r.d(t,{Z:()=>i})},43186:(e,t,r)=>{"use strict";function i(e){function t(t,r,i,s,n){e.call(this,t,r,i,s,n)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._render=function(t,r){var i=document.createElement("select");return i.className="config-enum-selector",i.onchange=this._handler,i.selectedIndex=0,this._context.isDisabled&&"numberUnits"!==this._item.property&&(i.disabled=!0),this._item.options.forEach((function(r,s){var n=document.createElement("option");n.text=e.renderLabel(this._context,r.label),n.value=r.value,i.appendChild(n),this._item.defaults&&this._item.defaults[t]===r.value&&(i.selectedIndex=s)}),this),this._default&&e.selectDropdown(i,this._default),i.onchange=this._handler,i},t.prototype._populate=function(e){if(!1!==this._context.isDisplayUnitsVisible||"numberUnits"!==this._item.property){var t=e&&e.options&&e.options[e.selectedIndex];return t&&t.value||this._item.options[0].value}},t.prototype._getInputNode=function(e){return e.select("select.config-enum-selector")},t}r.d(t,{Z:()=>i})},75210:(e,t,r)=>{"use strict";function i(e){function t(t,r,i,s,n,o){this._globalDefaults=s,this._axisOrchestrator=o,e.call(this,t,r,i,s,n)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._render=function(t,r){var i=document.createElement("div");return i.className="config-group",this._inputs=e.buildGroup(this._axes,this._handler,this._item.config,this._globalDefaults,i,this._context,this._axisOrchestrator),i},t.prototype.populate=function(e){(this._inputs||[]).forEach((function(t){t.populate(e)}))},t.prototype.focus=function(){this._inputs&&this._inputs[0]&&this._inputs[0].focus},t}r.d(t,{Z:()=>i})},87783:(e,t,r)=>{"use strict";function i(e){function t(t,r,i,s,n){e.call(this,t,r,i,s,n)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._render=function(e,t){var r=document.createElement("input");return r.type="number",r.className="config-integer",void 0!==this._default?r.value=this._default:r.value=this._item.defaults?this._item.defaults[e]:1,r.onkeypress=function(e){var t;switch(e.key){case"Backspace":case"Tab":case"Clear":case"End":case"Home":case"ArrowLeft":case"ArrowUp":case"ArrowRight":case"ArrowDown":case"Delete":case"Copy":case"Cut":case"EraseEof":case"Paste":case"Undo":case"Redo":case"Enter":return!0}switch(t=e.key&&"Unidentified"!==e.key?e.key.charCodeAt(0):e.charCode||e.keyCode||e.which){case 8:case 9:case 12:case 13:case 35:case 36:case 37:case 38:case 39:case 40:return!0;case 46:if((e.key&&e.key.charCodeAt(0))!==(e.charCode||e.keyCode||e.which))return!0;default:return t>=48&&t<=57||45===t}},r.onchange=this._handler,r},t.prototype._populate=function(e){return e&&parseInt(e.value)||0},t}r.d(t,{Z:()=>i})},59150:(e,t,r)=>{"use strict";function i(){var e="#",t="MULTI_BLOCK";function r(e,t,r,i){if(r)for(var s=0;s<r.length;s++)for(var o=r[s],a=i?n(o,i):o,l=0;l<t.length;l++)t[l].columns[o]&&(e[a]=t[l].columns[o])}function i(e,t,r){if(e)if(Array.isArray(e))for(var i=0;i<e.length;i++)r.push(n(e[i],t));else for(var s=Object.keys(e),o=0;o<s.length;o++)r[n(s[o],t)]=e[s[o]]}function s(e,t){for(var r=e.blocks,i=0;i<r.length;i++)if(r[i].blockId===t)return r[i];return null}function n(t,r){return r+e+t}function o(t){if(-1===t.indexOf(e))return{blockId:"",columnName:t};var r=t.split(e);return{blockId:r[0],columnName:r[1]}}function a(e){return e?o(e).columnName:e}function l(e){return e&&e.reportFormat===t}function u(e){return JSON.parse(JSON.stringify(e))}return{BLOCK_ID_SEPARATOR:e,flattenMultiBlockMetadata:function(e){if(!e||!e.reportMetadata||!l(e.reportMetadata))return e;var t,s,o=e,d=o.reportMetadata;d.detailColumns=[],d.reportFilters=[],d.sortBy=[],d.hasRecordCount=!1;var c=o.reportExtendedMetadata;c.detailColumnInfo={};var h=o.reportTypeMetadata;if(h&&d.reportType&&(h.categories=[{columns:{}}],d.blocks.length)){var p=Object.keys(o.reportExtendedMetadata.groupingColumnInfo);s=h.reportTypes[d.reportType.type].categories,r(h.categories[0].columns,s,p)}for(t=0;t<d.blocks.length;t++){var g=d.blocks[t],m=g.blockId,_=null;g.sortBy&&g.sortBy.length&&((_=u(g.sortBy[0])).sortColumn=n(_.sortColumn,m)),d.sortBy.push(_),d.hasRecordCount=d.hasRecordCount||g.hasRecordCount,i(g.detailColumns,m,d.detailColumns),i(c.blocks[t].detailColumnInfo,m,c.detailColumnInfo),h&&(s=h.reportTypes[g.reportType.type].categories,r(h.categories[0].columns,s,g.detailColumns,m))}var f=d.customSummaryFormula;if(f)for(t=0;t<d.aggregates.length;t++){var y=a(d.aggregates[t]);f[y]&&(f[d.aggregates[t]]=f[y])}return o},unflattenMultiBlockMetadata:function(t){if(!l(t))return t;var r,i=u(t);for(function(e,t){var r,i=e[t];for(r=0;r<e.blocks.length;r++)e.blocks[r][t]=[];for(r=0;r<i.length;r++){var n=o(i[r]),a=s(e,n.blockId);a&&a[t].push(n.columnName)}}(i,"detailColumns"),r=0;r<i.blocks.length;r++)i.sortBy&&i.sortBy[r]?(i.blocks[r].sortBy=[i.sortBy[r]],i.blocks[r].sortBy[0].sortColumn=a(i.sortBy[r].sortColumn)):i.blocks[r].sortBy=[];if(i.customSummaryFormula){var n=Object.keys(i.customSummaryFormula);for(r=0;r<n.length;r++)-1!==n[r].indexOf(e)&&delete i.customSummaryFormula[n[r]]}if(function(e){if(0===e.blocks.length)return!0;for(var t=e.blocks[0].hasRecordCount,r=1;r<e.blocks.length;r++)if(e.blocks[r].hasRecordCount!==t)return!1;return!0}(t)||!t.hasRecordCount)for(r=0;r<t.blocks.length;r++)i.blocks[r].hasRecordCount=t.hasRecordCount;return i.detailColumns=i.reportFilters=i.sortBy=null,delete i.hasRecordCount,i},prefixBlockColumnName:n,unprefixBlockColumnName:a,getBlockId:function(e){return o(e).blockId},splitBlockColumnName:o,isMultiblockFormat:l}}r.d(t,{Z:()=>i})},81146:(e,t,r)=>{"use strict";function i(){var e=0;function t(e,t){this._node=null,this._widget=e,this._callback=t||function(){}}return t.prototype.toggle=function(e,t){this._plus&&(void 0===e&&"none"!==this._plus.style?e=!1:void 0===e&&(e=!0),e?(this._plus.style.display="block",t||this._plus.focus()):this._plus.style.display="none")},t.prototype.node=function(){if(!this._node){this._plus=null;var t="ANALYTICS_ECLAIR_CONFIGURER_UTILS_PLUS_"+e++;this._node=document.createElement("div"),this._node.className="option-field-buttons";var r=document.createElement("button");r.textContent="+ "+this._widget.name(),r.dataset.type="PLUS",r.className="optional-field-plus",r.style.display="none",r.onclick=this._callback.bind(r,r),r.id=t,this._plus=r,this._node.appendChild(this._plus)}return this._node},t.renderInlineMinus=function(e,t,r){this._node=document.createElement("div"),this._node.className="option-field-inline-minus-button";var i=document.createElement("button");i.className="option-field-minus",i.setAttribute("aria-labelledby",r),i.onclick=t;var s=document.createElement("img");s.src="/img/icon/t4/utility/close_60.png",s.alt=e,i.appendChild(s);var n=document.createElement("span");return n.textContent=e,n.className="assistive-text",n.id=r,this._minus=i,this._node.appendChild(this._minus),this._node.appendChild(n),this._node},t}r.d(t,{Z:()=>i})},50061:(e,t,r)=>{"use strict";function i(e){var t="NONE";function r(e,t){return!(!e.property||void 0===t[e.property])||("OR"===e.type||"GROUP"===e.type)&&e.config.some((function(e){return r(e,t)}))}function i(t,r,i,s,n,o){this._globalDefaults=s,this._select=null,this._configArea=null,this._axisOrchestrator=o,e.call(this,t,r,i,s,n)}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._selectOption=function(t){this._inputs=e.buildGroup(this._axes,this._handler,[t],this._globalDefaults,this._configArea,this._context,this._axisOrchestrator)},i.prototype._render=function(i,s,n){var o=document.createElement("div");if(o.className="config-or-container",this._select=document.createElement("select"),this._select.className="config-or-selector",this._select.id=n,this._configArea=document.createElement("div"),this._configArea.className="config-or-config-area",o.appendChild(this._select),o.appendChild(this._configArea),this._item.nullable){var a=document.createElement("option");a.textContent=e.renderLabel(this._context,{section:"EclairConfig",id:"none",fallback:"None"}),a.value=t,this._select.appendChild(a)}return this._item.config.forEach((function(t,i){var s=document.createElement("option");s.textContent=e.renderLabel(this._context,t.label),s.value=i,this._select.appendChild(s),r(t,this._globalDefaults||{})&&(this._select.selectedIndex=i+(this._item.nullable?1:0),this._selectOption(t))}),this),this._select.onchange=function(){this._inputs&&this._inputs.length&&this._inputs.forEach((function(e){e._handleDelete()})),this._inputs=[];for(var r=this._select&&this._select.options&&this._select.options[this._select.selectedIndex];this._configArea.firstChild;)e.removeNode(this._configArea.firstChild);if(r&&r.value!==t){var i=this._item.config[parseInt(r.value,10)];this._selectOption(i)}this._handler()}.bind(this),o},i.prototype.populate=function(e){(this._inputs||[]).forEach((function(t){t.populate(e)}))},i.prototype._getInputNode=function(e){return e.querySelector("select.config-or-selector")},i}r.d(t,{Z:()=>i})},90946:(e,t,r)=>{"use strict";function i(e){function t(t){var r={};for(key in t)r[e.stringifyGroupValueObject(key)]=t[key];return r}return{addValueColors:function(e,t){var r={};for(key in t)r[key]="#"+t[key].color;e.valueColors=r},setPicklistColors:function(e,r,i,s){if(e&&Object.keys(e).length>0){for(dim in e)r.push({id:dim,colorMap:s?t(e[dim]):e[dim]});r.hasPicklistColors=!0,i&&delete i.groupingColorPalette}},cleanseGroupingColorPalette:function(e,t){if(t){for(var r=!1,i=0;i<e.length;i++)if(e[i].id===t.groupingColorPalette){r=!0;break}r||(t.groupingColorPalette=e[0].id)}},isCorrectPalette:function(t,r){var i=t.indexOf(e.LABEL_SUFFIX);return i<0&&(i=t.indexOf(e.VALUE_SUFFIX)),(i>0&&t.substr(0,i))===r.id}}}r.d(t,{Z:()=>i})},85205:(e,t,r)=>{"use strict";function i(e,t){var r=0,i={section:"EclairConfig",id:"invalidRange",fallback:"Invalid Range"},s={section:"EclairConfig",id:"tooLarge",fallback:"Enter a smaller number"},n={section:"EclairConfig",id:"tooSmall",fallback:"Enter a larger number"},o={section:"EclairConfig",id:"notANumber",fallback:"Not a number"},a=["#C23934","#FFB75D","#00716B"];function l(t,r,i,s,n,o){this._rangeColors=[],this._rangePreviews=[],this._isPercentage=o,e.call(this,t,r,i,s,n)}function u(e,t){if(!e.querySelector(".percent-icon")){var r=document.createElement("div");r.classList.add("percent-icon"),e.appendChild(r),t.classList.add("no-number-spinner")}}function d(e,t){e.id=e.id||"ECLAIR_CHART_CONFIG_RANGE_INPUT_"+r++;var i=document.createElement("div");i.className="config-input-range-value-wrapper",i.appendChild(e);var s=document.createElement("label");s.className="range-error-label errorMessage hidden",s.setAttribute("for",e.id),i.appendChild(s);var n=document.createElement("label");return n.textContent=$A.get("$Label.EclairConfig.rangeBreakpointInput").replace("{0}",t),n.classList.add("assistive-text"),n.setAttribute("for",e.id),i.appendChild(n),this._isPercentage&&u(i,e),i}function c(e){var t=parseFloat(e.value);return t<1e-130&&t>-1e-130?0:t}function h(){this._validateInputs(),this._handler.apply(this)}return l.prototype=Object.create(e.prototype),l.prototype.constructor=l,l.prototype._render=function(r,i,s,n){var o=document.createElement("input");o.type="number",o.step="any",o.className="config-range-input-value";var l=r;if(this._default&&this._default.breakpoints&&(this._item.extremas&&this._default.extremas||!this._item.extremas&&this._default.extremas)&&l++,void 0!==(this._default&&this._default.breakpoints&&this._default.breakpoints[l])?o.value=this._default.breakpoints[l]:o.value=Math.round(100*(r+1)/i),o.onchange=h.bind(this),r<i-1&&s.appendChild(d.call(this,o,r)),n){var u=this,c=this._default&&this._default.bands&&this._default.bands[r];this._rangeColors[r]=c&&e.parseColor(c.color)||this._item.defaultColors&&this._item.defaultColors[r]||a[r];this._rangePreviews[r]=t(this._rangeColors[r],this._context.colors,n,(function(e){u._rangeColors[r]=e,u._handler()}))}},l.prototype._renderExtrema=function(e,t){var r="min"===e?0:100,i=document.createElement("input");return i.type="number",i.step="any",i.className="config-range-input-extrema config-range-input-"+e,this._default&&this._default.extremas&&this._default.breakpoints&&void 0!==this._default.breakpoints[t]?i.value=this._default.breakpoints[t]:this._default&&this._default.breakpoints?i.value="min"===e?this._default.breakpoints[0]<=r?this._default.breakpoints[0]-1:r:this._default.breakpoints[this._default.breakpoints.length-1]>=r?this._default.breakpoints[this._default.breakpoints.length-1]+1:r:i.value=r,i.onchange=h.bind(this),d.call(this,i,t)},l.prototype.render=function(t){var r,i,s,n,o=this._item.min||1,a=0;(r=document.createElement("fieldset")).className="config-input "+(this._item.extremas?" config-range-with-extremas":" config-range-no-extremas"),(i=document.createElement("div")).className="config-input config-layout-flex";var l=document.createElement("legend");for(l.textContent=e.renderLabel(this._context,this._item.label),l.classList.add("label"),l.classList.add("item-title"),r.appendChild(l),(s=document.createElement("div")).className="config-input-range-container",i.appendChild(s),this._item.colorable&&((n=document.createElement("div")).className="config-input-range-color-container",i.appendChild(n)),this._item.extremas&&s.appendChild(this._renderExtrema("min",0)),a=0;a<o;a++)this._render(a,o,s,n);this._item.extremas&&s.appendChild(this._renderExtrema("max",o)),this._childCount=this._item.min,this._node=r,r.appendChild(i),t.appendChild(r),this._validateInputs()},l.prototype.populate=function(e){var t,r={breakpoints:[],bands:[],extremas:this._item.extremas},i=this._item.extremas&&this._node.querySelector(".config-range-input-min"),s=this._item.extremas&&this._node.querySelector(".config-range-input-max"),n=this._node.querySelectorAll(".config-range-input-value");for(i&&r.breakpoints.push(i.value&&c(i)),t=0;t<n.length;t++)r.breakpoints.push(n[t].value&&c(n[t]));this._rangeColors.forEach((function(e,t){r.bands[t]=r.bands[t]||{},r.bands[t].color=e||a[t]})),i&&r.breakpoints.push(s.value&&c(s)),e[this._item.property]=r},l.prototype.focus=function(){var e=this._item.extremas&&this._node.querySelector(".config-range-input-min")||this._node.querySelector(".config-range-input-value");e&&e.focus()},l.prototype._validateInputs=function(){var t=[];this._item.extremas&&t.push(this._node.querySelector(".config-range-input-min")),Array.prototype.push.apply(t,this._node.querySelectorAll(".config-range-input-value")),this._item.extremas&&t.push(this._node.querySelector(".config-range-input-max")),this._hasError=!1,t.forEach((function(r,s){var n=c(r);this._toggleError(r,this._getValueError(n)||s&&n<=c(t[s-1])&&e.renderLabel(this._context,i))}),this)},l.prototype._toggleError=function(e,t){t?(this._hasError=!0,e.classList.add("error"),e.nextSibling.classList.remove("hidden"),e.nextSibling.innerHTML=t):(e.classList.remove("error"),e.nextSibling.classList.add("hidden"),e.nextSibling.innerHTML="")},l.prototype._getValueError=function(t){return(isNaN(t)||!isFinite(t))&&e.renderLabel(this._context,o)||t>1e126&&e.renderLabel(this._context,s)||t<-1e126&&e.renderLabel(this._context,n)},l.prototype.updateDynamicConfigInputs=function(e){var t=[];this._item.extremas&&t.push(this._node.querySelector(".config-range-input-min")),Array.prototype.push.apply(t,this._node.querySelectorAll(".config-range-input-value")),this._item.extremas&&t.push(this._node.querySelector(".config-range-input-max")),e&&e.dynamicGaugeSegmentProperties&&e.measure.fields?t.forEach((function(e){u(e.parentNode,e)}),this):t.forEach((function(e){!function(e){e.classList.remove("no-number-spinner");var t=e.parentNode.querySelector(".percent-icon");t&&e.parentNode.removeChild(t)}(e)}),this)},l}r.d(t,{Z:()=>i})},84317:(e,t,r)=>{"use strict";function i(e){function t(t,r,i,s,n){e.call(this,t,r,i,s,n)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._render=function(e,t){var r=document.createElement("input");return r.type="text",r.className="config-string",void 0!==this._item.maxLength&&null!==this._item.maxLength&&(r.maxLength=this._item.maxLength),void 0!==this._default?r.value=this._default:r.value=this._item.defaults?this._item.defaults[e]:1,r.onblur=this._handler,r},t.prototype._populate=function(e){return e&&e.value||""},t}r.d(t,{Z:()=>i})},61331:(e,t,r)=>{"use strict";function i(){return function(e,t,r,i,s,n,o,a){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var l=document.createElement("fieldset");l.className="config-input config-input-chartselector";var u,d=document.createElement("legend");d.textContent=$A.get("$Label.EclairConfig.chartSelectorTitle"),d.classList.add("chart-selector-title"),l.appendChild(d),t.forEach((function(t,a){var d=t.script,c=t.effectiveMetadata;if(c&&Object.keys(c).length&&c.config&&c.config.length){var h=document.createElement("input");h.type="radio",h.name="analytics-eclair-configurer-utils-chart-selector-radio",h.className="chart-picker-radio"+(t.enabled?"":" disabled"),h.disabled=!t.enabled,h.id="analytics-eclair-configurer-utils-chart-selector-radio-"+a,h.dataset.path=d.path(),h.onfocus=function(){var t=e.querySelector("input:checked");t&&t!==h&&t.focus()};var p=document.createElement("label");p.className="chart-picker-label",p.setAttribute("for",h.id);var g=function(e){var t=(/([^\/]*).js/.exec(e)||[])[1];if(t)return"/projRes/analytics-platform/img/eclairNG/chartIcons/"+t+"1.png"}(d.path());if(g){var m=s(c.name);if(o){var _=(/([^\/]*).js/.exec(d.path())||[])[1];o(p,_,m)}else{var f=document.createElement("div");f.title=m,f.style.backgroundImage="url('"+g+"')",p.appendChild(f)}}else{var y=document.createElement("span");y.textContent=s(c.shortname),p.appendChild(y)}h.onchange=function(){h.checked&&(h.focus(),n(d,c,null,!1))},r&&h.dataset.path===r&&(h.checked=!0,n(d,c,i,!0)),0===a&&(u=h),l.appendChild(h),l.appendChild(p)}})),e.appendChild(l),a&&u&&u.focus()}}}r.d(t,{Z:()=>i})},60807:(e,t,r)=>{"use strict";function i(){var e=0,t=null;return function(r,i,s,n){var o=document.createElement("div");o.style.position="relative",o.className="config-color-select-container";var a=document.createElement("div"),l=function(){if(null===t){var e=document.createElement("input");try{e.setAttribute("type","color"),t="color"===e.type}catch(e){t=!1}}return t}();if(l){var u=document.createElement("input");u.id="ECLAIR_CHART_COLOR_INPUT_"+e++,u.setAttribute("type","color"),u.onchange=function(){a.style.backgroundColor=u.value,n(u.value),u.setAttribute("value",u.value)},u.value=r,u.setAttribute("value",r);var d=document.createElement("label");d.className="assistive-text",d.textContent=$A.get("$Label.EclairConfig.colorPicker"),d.setAttribute("for",u.id),o.appendChild(u),o.appendChild(d)}else{var c=document.createElement("select"),h=0;i.forEach((function(e,t){var i=document.createElement("option");i.value=t,i.textContent=e.label,i.style.color=e.color,c.appendChild(i),(e.color&&e.color.toUpperCase())===(r&&r.toUpperCase())&&(h=t)})),c.onchange=function(){var e=i[this.selectedIndex].color;a.style.backgroundColor=e,n(e)},o.appendChild(c)}return a.className="config-preview-color",a.style.backgroundColor=r,o.appendChild(a),s.appendChild(o),l||(o.children[0].selectedIndex=h),o}}r.d(t,{Z:()=>i})},29429:(e,t,r)=>{"use strict";function i(e,t,r,i,s,n,o,a,l,u,d,c,h){var p=function(e,p,g,m,_,f,y,b){for(;_.firstChild;)_.removeChild(_.firstChild);return y=y||new d(e),b=b||{},g.map((function(d,g){var C=null,E=_,S=d.type.toUpperCase();return"DIMENSION"===S||"MEASURE"===S?(C=new t(f,d,p,m,e,y),y.add(C)):"COLOR"===S?C=new r(f,d,p,m,e):"INTEGER"===S?C=new i(f,d,p,m,e):"RANGE"===S?C=new s(f,d,p,m,e):"TEXT"===S?C=new n(f,d,p,m,e):"BOOLEAN"===S?C=new o(f,d,p,m,e):"ENUM"===S?C=new a(f,d,p,m,e):"GROUP"===S?C=new l(f,d,p,m,e,y):"OR"===S?C=new u(f,d,p,m,e,y):"COLUMN"===S?C=new c(f,d,p,m,e):"COLUMNLIST"===S?C=b.columnSelector?new b.columnSelector(f,d,p,m,e):new c(f,d,p,m,e):"RADIO"===S&&(C=new h(f,d,p,m,e)),null!=C&&C.render(E),C}),this)};return e.buildGroup=p,p}r.d(t,{Z:()=>i})},91069:(e,t,r)=>{"use strict";function i(){var e=0;return function(t,r,i,s){var n=document.createElement("div");n.style.position="relative",n.className="config-palette-select";var o=document.createElement("select");o.id="ECLAIR_CHART_PALETTE_INPUT_"+e++;var a=document.createElement("label");a.className="assistive-text",a.textContent=$A.get("$Label.EclairConfig.colorPalettePicker"),a.setAttribute("for",o.id),r.forEach((function(e,t){var r=document.createElement("option");r.value=t,r.textContent=e.label,o.appendChild(r)})),o.onchange=s;var l=document.createElement("div");return t.colors.slice(0,3).forEach((function(e){var t=document.createElement("div");t.className="config-preview-swatch",t.style.backgroundColor=e,l.appendChild(t)})),n.appendChild(o),n.appendChild(a),n.appendChild(l),i.appendChild(n),o.selectedIndex=r.indexOf(t),n}}r.d(t,{Z:()=>i})},91874:(e,t,r)=>{"use strict";function i(e){var t=0,r="ECLAIR_CHART_REFERENCELINE_INPUT_",i=function(e){var t,r=e.target,i=parseFloat(r.value);t=i,!isNaN(t)&&isFinite(t)&&t<=1e125&&t>=-1e125?r.classList.remove("inputError"):r.classList.add("inputError")};return{render:function(s,n,o,a){var l=n&&n.referenceLines&&n.referenceLines.length&&n.referenceLines[0],u=document.createElement("div");u.classList.add("config-axis-reference-line");var d=document.createElement("input");d.className="config-axis-reference-line-checkbox",d.type="checkbox",d.checked=!!l,d.value="includeReferenceLines",d.onchange=a,d.id=r+t++,u.appendChild(d);var c=document.createElement("label");c.classList.add("label"),c.textContent=$A.get("$Label.EclairConfig.showReferenceLine"),c.setAttribute("for",d.id),u.appendChild(c);var h=document.createElement("input");h.type="number",h.step="any",h.className="config-axis-reference-line-valueInput",h.value=l&&l.value||"0",h.oninput=i,h.onchange=a,h.id=r+t++;var p=document.createElement("label");p.classList.add("label"),p.textContent=$A.get("$Label.EclairConfig.referenceLineValue"),p.setAttribute("for",h.id);var g=document.createElement("div");g.className="config-axis-reference-line-innerValueInputDiv",g.appendChild(h);var m=document.createElement("div");m.className="config-axis-reference-line-outerValueInputDiv",m.appendChild(p),m.appendChild(g);var _=l&&l.color||o[0].color;e(_,o,g,(function(e){_=e,a()}));return u.appendChild(m),s.appendChild(u),{checkbox:d,valueEdit:h,getColor:function(){return _}}},populate:function(e,t){var r;e.referenceLines=t.checkbox.checked?[{color:t.getColor()||"#f00",value:(r=t.valueEdit.value||0,r=parseFloat(r),isNaN(r)?r=0:r>1e125?r=1e125:r<-1e125?r=-1e125:r<1e-128&&r>-1e-128&&(r=0),r)}]:[]}}}r.d(t,{Z:()=>i})},78453:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(723);class s extends i{static getDefaultValue(){return s.GENERIC_ERROR}getCode(){return this._value.specificErrorCode}shouldShowErrorModal(){return this._value.shouldShowErrorModal}shouldRedirectToRunPage(){return this._value.shouldRedirectToRunPage}shouldShowToastMessage(){return this._value.shouldShowToastMessage}isAccessError(){return this._value.isAccessError}}s.build(s,{GENERIC_ERROR:{shouldShowErrorModal:!0,shouldRedirectToRunPage:!1,shouldShowToastMessage:!1,isAccessError:!1},MISSING_EDIT_PERMISSION:{specificErrorCode:117,shouldShowErrorModal:!1,shouldRedirectToRunPage:!0,shouldShowToastMessage:!1,isAccessError:!1},CREATE_REPORT_FAILED:{specificErrorCode:119,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!0,isAccessError:!1},SAVE_REPORT_FAILED:{specificErrorCode:122,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!0,isAccessError:!1},GENERIC_NO_ACCESS:{specificErrorCode:103,shouldShowErrorModal:!1,shouldRedirectToRunPage:!0,shouldShowToastMessage:!1,isAccessError:!0},GENERIC_NO_DATA_FOUND:{specificErrorCode:104,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!1,isAccessError:!1},NO_RUN_REPORTS:{specificErrorCode:106,shouldShowErrorModal:!1,shouldRedirectToRunPage:!0,shouldShowToastMessage:!1,isAccessError:!0},REPORT_VALIDATION_EXCEPTION_ERROR:{specificErrorCode:110,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!1,isAccessError:!1},REPORT_METADATA_VALIDATION_ERROR:{specificErrorCode:113,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!1,isAccessError:!1},REPORT_EXECUTION_ERROR_NO_SELECTED_COLUMNS:{specificErrorCode:203,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!1,isAccessError:!1},REPORT_EXECUTION_ERROR_TOO_MANY_COLS_CSFS_AGGS:{specificErrorCode:204,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!1,isAccessError:!1},REPORT_EXECUTION_SORTER_ERROR:{specificErrorCode:207,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!1,isAccessError:!1},REPORT_EXECUTION_RUNNING_TOO_LONG_ERROR:{specificErrorCode:209,shouldShowErrorModal:!1,shouldRedirectToRunPage:!1,shouldShowToastMessage:!1,isAccessError:!1}})},73773:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("EDITED",new s).add("ERROR",new s).add("SAVED",new s).add("NORMAL",new s).finish()},72673:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Z});var i=r(8429),s=r(1026),n=r(17599),o=r(57244),a=r(67883),l=r(94035),u=r(44426),d=r(591),c=r(38325),h=r(68831),p=r(99689),g=r(57840),m=r(1732),_=r(96486),f=r(61506),y=r(50656),b=r(27994),C=r(57950),E=r(73773),S=r(85887),T=r(56529);class I{constructor(){this._interimState=new Map,this._pendings=new Map,this._changeQueue=[],this._error="",this._data=null,this._status=T.Z.UNINITIALIZED,this._statusMessage="",this._disabled=!1}_hash(e,t,r){return`${e}-${t}-${r}`}_mergePendings(e){for(const[t,r]of e)this._pendings.set(t,r)}_setInterimState(e){switch(e){case S.Z.SAVE:return this._interimState;case S.Z.CANCEL:if(this.hasErrors()){const e=new Map;for(const[t,r]of this._interimState)r.status===E.Z.SAVED&&e.set(t,{...r,status:E.Z.EDITED});return e}return new Map;default:return new Map}}_getLookupDescendents(e,t,r){return this._data?.getLookupDescendents(e,t,r)??new Map}_revertConflictingChanges(e,t,r){const i=this._hash(e,t,r);this._interimState.delete(i),(0,_.remove)(this._changeQueue,(i=>i.recordId===e&&i.entityName===t&&i.fieldName===r));this._getLookupDescendents(e,t,r).forEach(((e,t)=>this._pendings.delete(t)))}_markDepComponent(e,t,r,i){const s=this.getDepComponent(e,t);if(1!==s.length)for(const t of s){const s=this._hash(r,e,t),n=this._interimState.get(s);n?n.depGroupStatus=i:this._interimState.set(s,{status:E.Z.NORMAL,newValue:"",newFormattedValue:"",depGroupStatus:i})}}_errorIfTooManyChanges(e){let t=0;for(const r of e){const e=this._hash(r.recordId,r.entityName,r.fieldName);this._interimState.has(e)||(t+=1)}return this._changeQueue.length+t>100&&(f.Z.get(b).showToastMessage(i.Z.getLabel("reportBuilder","maxInlineEditReached",100),"error","error"),!0)}setDisabled(e){this._disabled=e}isDisabled(){return this._disabled}getLookupConflicts(e,t,r){const i=new Map,s=this._getLookupDescendents(e,t,r);for(const e of s.values()){const t=this._hash(e.recordId,e.entityName,e.fieldName);this._interimState.has(t)&&this._interimState.get(t)?.status===E.Z.EDITED&&i.set(t,{rowIndex:e.rowIndex,columnIndex:e.columnIndex,newFormattedValue:this._interimState.get(t)?.newFormattedValue??""})}return[...i.values()]}isFieldEditable(e,t){return this._data?.isFieldEditable(e,t)??!1}isEntityEditable(e){return this._data?.isEntityEditable(e)??!1}isPartOfDependency(e,t){return!!this._data?.getEntities().get(e)?.depForest.has(t)}getDepSubtree(e,t){return this._data?.getEntities().get(e)?.depForest.getDepSubtree(t)??[]}getDepComponent(e,t){return this._data?.getEntities().get(e)?.depForest.getDepComponent(t)??[]}getLayout(e,t){return this._data?.getLayout(e,t)}getControllerName(e,t){return this._data?.getControllerName(e,t)}hasField(e,t){return!!this._data?.hasField(e,t)}getFieldDataType(e,t){return this._data?.getFieldDataType(e,t)}getFieldLabel(e,t){return this._data?.getFieldLabel(e,t)}isPending(e,t){return this._pendings.has(`${e}-${t}`)}isColumnManuallyLocked(e){return this._data?.getFqnTree().getManuallyLockedColIndices().has(e)}addChange(e,t=!1){if(this._errorIfTooManyChanges([e]))return;const r=this._hash(e.recordId,e.entityName,e.fieldName);if(this._interimState.has(r)){const t=this._changeQueue.findIndex((t=>t.recordId===e.recordId&&e.entityName===t.entityName&&t.fieldName===e.fieldName));-1!==t&&this._changeQueue.splice(t,1)}this._changeQueue.push(e),this._interimState.set(r,{status:E.Z.EDITED,rowIndex:e.rowIndex,newValue:e.newValue,newFormattedValue:e.newFormattedValue,depGroupStatus:t?E.Z.EDITED:E.Z.NORMAL});const i=this._getLookupDescendents(e.recordId,e.entityName,e.fieldName);i.forEach((e=>this._revertConflictingChanges(e.recordId,e.entityName,e.fieldName))),this._mergePendings(i),this._error=""}addChangeBatch(e){if(!this._errorIfTooManyChanges(e.changes)){for(const t of e.changes)this.addChange(t,!0);if(e.changes){const{recordId:t,entityName:r,fieldName:i}=e.changes[0];this._markDepComponent(r,i,t,E.Z.EDITED)}}}getStatus(e,t,r){const i=this._hash(e,t,r);return this._interimState.get(i)?.status??E.Z.NORMAL}getFieldState(e,t,r){const i=this._hash(e,t,r);return this._interimState.get(i)}getValue(e,t,r){const i=this._hash(e,t,r);return this._interimState.get(i)?.newValue}isInEditMode(){return this._changeQueue.length>0}setData(e){this._data=e}getData(){return this._data}getChanges(){return this._changeQueue}getInterimState(){return this._interimState}hasErrors(){for(const e of this._interimState.values())if(e.status===E.Z.ERROR)return!0;return!1}rowHasErrors(e){for(const t of this._interimState.values())if(t.status===E.Z.ERROR&&t.rowIndex===e)return!0;return!1}updateInlineEditStatus(e,t){this._status=e,this._statusMessage=t}getInlineEditStatus(){return this._status}getStatusMessage(){return this._statusMessage}_fetchCompositeRecords(){const e={};return this._changeQueue.forEach((t=>{const r=t.recordId;e[r]||(e[r]={method:"PATCH",httpHeaders:{"Sforce-Auto-Assign":"FALSE"},url:`/services/data/v${C._C}.0/sobjects/${t.entityName}/${r}`,referenceId:t.recordId,body:{}}),e[r].body[t.fieldName]=t.newValue})),Object.values(e)}_createBatches(e,t){return Array.from({length:Math.ceil(e.length/t)},((r,i)=>e.slice(i*t,i*t+t)))}async _fetchCompositeResponse(){const e=this._fetchCompositeRecords(),t=this._createBatches(e,25),r=await Promise.allSettled(t.map((e=>y.Z.updateSObjectCollection(e,!1)))),i=[];return r.forEach((e=>{"fulfilled"===e.status?i.push(e.value):"rejected"===e.status&&f.Z.get(b).showToastMessage(e.reason,"error","error")})),i}async upload(){try{const e=(await this._fetchCompositeResponse()).flatMap((e=>e.compositeResponse));if(e.every((e=>204===e.httpStatusCode))){const e=1!==this._changeQueue.length?i.Z.getLabel("reportBuilder","mfeUpdateSuccess"):i.Z.getLabel("reportBuilder","mfeSingularUpdateSuccess");return f.Z.get(b).showToastMessage(e,"success","success"),this.reset(S.Z.SAVE),!0}const t=[];let r=0;e.forEach((e=>{const i=this._changeQueue.filter((t=>t.recordId===e.referenceId));if((0,_.isEmpty)(i))throw new Error("Matching change not found for referenceId: "+e.referenceId);i.forEach((i=>{const s=this._hash(i.recordId,i.entityName,i.fieldName),n=this._interimState.get(s);if(!n)throw new Error("Field state should exist after upload.");204===e.httpStatusCode?n.status=E.Z.SAVED:(t.push(i),n.status=E.Z.ERROR,n.errorMessage=e.body[0]?.message,r++,this._markDepComponent(i.entityName,i.fieldName,i.recordId,E.Z.ERROR))}))})),this._changeQueue=t;const s=1!==r?i.Z.getLabel("reportBuilder","mfeUpdateFailure",r):i.Z.getLabel("reportBuilder","mfeSingularUpdateFailure",r);return f.Z.get(b).showToastMessage(s,"error","error"),!1}catch(e){return f.Z.get(b).showToastMessage(i.Z.getLabel("reportBuilder","mfeError"),"error","error"),this._error=e.message,!1}}reset(e){this._interimState=this._setInterimState(e),this._pendings=new Map,this._changeQueue=[],this._error=""}clone(){const e=new I;return e._interimState=this._interimState,e._pendings=this._pendings,e._changeQueue=Array.from(this._changeQueue),e._error=this._error,e._data=this._data,e._status=this._status,e._statusMessage=this._statusMessage,e._disabled=this._disabled,e}}var v=r(29365),R=r(22877);class w{constructor(e){this._entities=e.entities,this._lookupEntities=e.lookupEntities,this._fqnTree=e.fqnTree,this._lookupMap=e.lookupMap,this._metadata=e.metadata,this._data=e.data}_getField(e,t){for(const r of this._entities.get(e)?.fields??[])if(r.name===t)return r;return null}isEntityEditable(e){const t=this._entities.get(e);return!(!t?.updateable||!t?.fields)}_getCellInfo(e,t){const r=this._metadata.getColumnNames()[t]??"",i=this._metadata.getReportExtendedMetadata().getDetailColumnInfos()[r],s=i?.fieldInfo?.entityName??"",n=i?.fieldInfo?.fieldName??"";return{recordId:this._data[e]?.[r+"_rawData"]?.recordId??"",entityName:s,fieldName:n}}isFieldEditable(e,t){if(!this.isEntityEditable(e))return!1;const r=this._entities.get(e);for(const e of r?.fields??[])if(e.name===t&&e.updateable)return!0;return!1}getFqnTree(){return this._fqnTree}getLayout(e,t){let r=t;const i=this._entities.get(e)?.recordTypeInfos?.length??0;if(!r){if(0===i)return null;r="master"}return this._entities.get(e)?.layouts.get(r)}getEntities(){return this._entities}getLookupEntities(){return this._lookupEntities}getControllerName(e,t){return this._entities.get(e)?.depForest.getParent(t)}hasField(e,t){return!!this._getField(e,t)}getFieldDataType(e,t){return this._getField(e,t)?.type}getFieldLabel(e,t){return this._getField(e,t)?.label}getLookupDescendents(e,t,r){const i=new Map,s=`${e}-${t}-${r}`,n=this._metadata.isSummary()?this._metadata.getGroupingsDown().length:0,o=this._lookupMap.get(s)??[];for(const e of o){const s=this._fqnTree.getDescendents(e.fqn,t,r);for(const t of s){const r=e.rowIndex,s=t.columnIndex,{recordId:o,entityName:a,fieldName:l}=this._getCellInfo(r,s+n);i.set(`${r}-${s}`,{rowIndex:r,columnIndex:s,recordId:o,entityName:a,fieldName:l})}}return i}}var A=r(87497);class D{_tree=new Map;constructor(e,t){this._lastFqnSegmentToColIndexMap=new Map,this._entities=t;const r=e.isSummary()?e.getGroupingsDown().length:0,i=e.getReportExtendedMetadata().getDetailColumnInfos(),s=e.getColumnNames().slice(r);for(let e=0;e<s.length;e++){const t=i[s[e]],r=t?.fullyQualifiedName;if(!r)continue;const n=t?.fieldInfo?.entityName,o=t?.fieldInfo?.fieldName,a=this._isLookupField(n,o,this._entities);this._insertNode(this._adjustFqn(r,n,o),n,o,e,a)}this._manuallyLockedColIndices=this._buildManuallyLockedColIndices(this._lastFqnSegmentToColIndexMap)}_buildManuallyLockedColIndices(e){const t=new Set;for(const r of e.values())r.includes(-1)&&r.forEach((e=>{-1!==e&&t.add(e)}));return t}_isLookupField(e,t,r){const i=r.get(e??"")?.fields?.find((e=>e.name===t))?.type;return i===A.Z.REFERENCE.getValue()}_adjustFqn(e,t,r){let i=e;if(this._isLookupField(t,r,this._entities)){const t=e.split(".");t.length>1&&"Name"===t[t.length-1]&&t.pop(),i=t.join(".")}return i}_traversalHelper(e,t){const r=this._tree.get(e);for(const e of r?.children??[]){const r=this._tree.get(e);r&&(t.push(r),this._traversalHelper(e,t))}}_insertNode(e,t,r,i,s){let n="";const o=e.split(".");let a="";for(let e=0;e<o.length;e++){a+=(e>0?".":"")+o[e],this._tree.has(n)&&this._tree.get(n)?.children?.add(a);const l=e===o.length-1?r:null,u=e===o.length-1?t:null,d=e===o.length-1?i:-1;this._tree.has(a)||((s||-1===d)&&(this._lastFqnSegmentToColIndexMap.has(o[e])||this._lastFqnSegmentToColIndexMap.set(o[e],[]),this._lastFqnSegmentToColIndexMap.get(o[e])?.push(d)),this._tree.set(a,{fieldName:l,entityName:u,columnIndex:d,children:new Set})),n=a}}getManuallyLockedColIndices(){return this._manuallyLockedColIndices}getDescendents(e,t,r){const i=[],s=this._adjustFqn(e,t,r);return this._traversalHelper(s,i),i}}class L{constructor(e){this._forest=new Map,this._parents=new Map,e&&this._buildForest(e)}_buildForest(e){for(const t of e.fields){const e=t.controllerName;e&&(this._forest.has(e)||this._forest.set(e,[]),this._forest.get(e)?.push(t.name),this._parents.set(t.name,e),this._forest.has(t.name)||this._forest.set(t.name,[]))}return this._forest}_findRoot(e){let t=e,r=this._parents.get(t);for(;r;)t=r,r=this._parents.get(r);return t}getDepSubtree(e){const t=[],r=[e];for(;r.length;){const i=r.shift();i!==e&&t.push(i);for(const e of this._forest.get(i)??[])r.push(e)}return t}getDepComponent(e){const t=this._findRoot(e);return[t,...this.getDepSubtree(t)]}getParent(e){return this._parents.get(e)}has(e){return this._forest.has(e)}}class M extends Error{constructor(){super("Too many record types to handle.")}}class N{constructor(e={recordLimit:5,maxRecordTypes:100}){this._entities=new Map,this._lookupEntities=new Map,this._recordLimit=e.recordLimit,this._maxRecordTypes=e.maxRecordTypes}_fetchNameField(e){return y.Z.describeSObject(e)}async _getReportEntityNames(e){const t=[],r=new Map,i=e.getDetailColumnInfos()??{};for(const e of Object.keys(i)){const s=i[e],n=s?.fieldInfo?.entityName,o=s?.fieldInfo?.lookupEntityName;if(n&&t.push(n),o&&!r.has(o)){const e=await this._fetchNameField(o),t=e.fields?.find((e=>e.nameField))?.name;if(!t)continue;r.set(o,t)}}return[(0,_.uniq)(t),r]}_getRecordTypes(e){const t=this._getUsedRecordTypes(e),r=[];for(const[e,i]of this._entities)i.recordTypeInfos?.forEach((i=>{(i.master||t.has(i.recordTypeId))&&r.push({entityName:e,recordTypeId:i.recordTypeId,master:i.master})}));if(r.length>this._maxRecordTypes)throw new M;return r}_getUsedRecordTypes(e){const t=new Set;return e&&e.forEach((e=>{Object.values(e).forEach((e=>{e?.recordTypeId&&t.add(e.recordTypeId)}))})),t}async _fetchSObjects(e){const t=[];for(const r of e)if(!this._entities.has(r)){const e=y.Z.describeSObject(r);t.push(e)}const r=await Promise.allSettled(t);for(const e of r)"fulfilled"===e.status&&e.value?.name&&this._entities.set(e.value.name,{...e.value,layouts:new Map,depForest:new L})}async _fetchLayouts(e){const t=[];for(const r of e)t.push(y.Z.describeSObjectLayout(r.entityName,r.recordTypeId));const r=await Promise.allSettled(t),i=[];for(const e of r)"fulfilled"===e.status&&i.push(e.value);return i}_storeLayouts(e,t){for(let r=0;r<e.length;r++){const i=e[r],s=i.master?"master":i.recordTypeId,n=this._entities.get(i.entityName);n&&n.layouts.set(s,t[r])}}async _fetchLookupEntityRecords(e){const t=[];for(const[r,i]of e){const e=y.Z.querySObjectData(r,i,"%",this._recordLimit);t.push(e)}const r=await Promise.allSettled(t);for(const t of r)if("fulfilled"===t.status&&t.value){const r=t.value[0]?.sobjectType||t.value[0]?.attributes.type;if(void 0!==r){const i=r?e.get(r):"Name",s=t.value.map((({[i]:e,Id:t})=>({label:e,id:t})));this._lookupEntities.set(r,s)}}}_isLookupField(e,t,r){const i=r.get(e)?.fields?.find((e=>e.name===t))?.type;return i===A.Z.REFERENCE.getValue()}_buildLookupMap(e,t,r){const i=new Map,s=e.getReportExtendedMetadata().getDetailColumnInfos(),n=e.getColumnNames();for(let e=0;e<n.length;e++){const o=n[e],a=s[o],l=a?.fullyQualifiedName,u=a?.fieldInfo?.entityName,d=a?.fieldInfo?.fieldName;if(l&&u&&d&&this._isLookupField(u,d,r))for(const[e,r]of t.entries()){const t=r[o+"_rawData"]?.recordId;if(!t)continue;const s=`${t}-${u}-${d}`;i.has(s)?i.get(s)?.push({rowIndex:e,fqn:l}):i.set(s,[{rowIndex:e,fqn:l}])}}return i}_storeDepTrees(){for(const e of this._entities.values())e.depForest=new L(e)}async initialize(e,t){const r=await this._getReportEntityNames(e.getReportExtendedMetadata()),i=r[0];await this._fetchSObjects(i);const s=this._getRecordTypes(t),n=await this._fetchLayouts(s);this._storeLayouts(s,n);const o=r[1];await this._fetchSObjects(Array.from(o?.keys())),await this._fetchLookupEntityRecords(o);const a=new D(e,this._entities),l=this._buildLookupMap(e,t,this._entities);return this._storeDepTrees(),new w({entities:this._entities,lookupEntities:this._lookupEntities,fqnTree:a,lookupMap:l,metadata:e,data:t})}}var O=r(14488),P=r(57999);class x extends c{constructor(e,t,r,i={recordLimit:5,maxRecordTypes:100}){super(e),this._state=new I,this._executeMutators=t,this._widgetIds=new Set(r),this._hasData=!1,this._allWidgetsReady=0===r.length,this._options=i,this._data=null}getTopics(){return[new h.Z(p.Z.RESULT),new h.Z(p.Z.INLINE_EDIT_INTERACTION),new h.Z(p.Z.WIDGET_READY),new h.Z(p.Z.DASHBOARD_READY)]}_publishState(){this._getRuntimeConnector().publish(new v.Z(this.getId(),this._state.clone()))}_refreshReport(){this._executeMutators([new O.Z],{undoEnabled:!1})}_handleWidgetReadyMessages(e){e instanceof g.Z&&this._widgetIds.delete(e.getWidgetId()),(e instanceof g.Z||e instanceof m.Z)&&0===this._widgetIds.size&&(this._allWidgetsReady=!0,this._hasData&&this._publishState())}_getLoggingAttributes(){const e=this._metadata?.getReportMetadataWrapper(),t={reportType:e?.getReportType(),reportFormat:e?.getReportFormat(),dataTypes:[],error:!1},r=this._state.getChanges();return r.forEach(((e,i)=>{t.dataTypes.push(r[i].dataType)})),t}_isNewReportResults(e){return e instanceof d.Z&&e.getMetadata()instanceof l.Z}_shouldSetupInlineEdit(e){return!!o.Z.has(o.Z.IS_INLINE_EDITING_ENABLED)&&(this._metadata!==e.getMetadata()&&(this._metadata=e.getMetadata(),!!this._metadata&&(!this._metadata?.isPreview()&&!this._metadata?.isMultiBlock()&&((this._metadata?.getReportFormat()!==a.MATRIX.getCode()||e.getPublisherId()!==u.TABLE.getValue())&&e.getPublisherId()!==u.CHART.getValue()))))}async _initializeInlineEdit(e){const t=new N(this._options);try{const r=await t.initialize(this._metadata,e);this._state.setData(r),this._state.updateInlineEditStatus(T.Z.IDLE,""),this._hasData=!0,this._state.setDisabled(!1)}catch(e){if(!(e instanceof M))throw e;this._state.setDisabled(!0)}this._allWidgetsReady&&this._publishState()}async _onFulfilled(e,t,r){if(e instanceof g.Z||e instanceof m.Z)this._handleWidgetReadyMessages(e);else if(this._isNewReportResults(e)){if(!this._shouldSetupInlineEdit(e))return;this._state.reset(),this._hasData=!1,P.Z.hasAppClass(P.Z.APP_CLASS.INLINE_EDIT_ENABLED)&&await this._initializeInlineEdit(e.getData()),this._data=e.getData()}else if(e instanceof R.Z){const t=e.getPayloadType();if(t===S.Z.CHANGE){const t=e.getChange();if(!t)throw new Error("CHANGE message must contain a change property.");this._state.addChange(t)}else if(t===S.Z.CHANGE_BATCH){const t=e.getChangeBatch();if(!t)throw new Error("CHANGE_BATCH message must contain a changeBatch property.");this._state.addChangeBatch(t)}else if(t===S.Z.EDIT_FIELDS)await this._initializeInlineEdit(this._data);else if(e.getPayloadType()===S.Z.CANCEL)this._state.hasErrors()&&this._refreshReport(),this._state.reset(S.Z.CANCEL);else if(e.getPayloadType()===S.Z.SAVE){this._state.updateInlineEditStatus(T.Z.UPLOADING,i.Z.getLabel("reportBuilder","updatingRecords")),this._publishState();const e=this._metadata?.getReportMetadataWrapper().getId(),t=this._getLoggingAttributes();s.Z.transactionStart(n.Z.INLINE_EDIT_REPORT.getValue(),t,e);await this._state.upload()?(this._refreshReport(),s.Z.transactionEnd(n.Z.INLINE_EDIT_REPORT.getValue(),t),this._state.reset(S.Z.SAVE)):(t.error=!0,s.Z.transactionStart(n.Z.INLINE_EDIT_REPORT.getValue(),t,e),s.Z.transactionEnd(n.Z.INLINE_EDIT_REPORT.getValue(),t)),this._state.updateInlineEditStatus(T.Z.IDLE,"")}this._publishState()}}}class Z{getInlineEditPublisherClass(){return x}}},56529:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("UNINITIALIZED",new s).add("IDLE",new s).add("UPLOADING",new s).finish()},87497:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{static getLookupTypes(){return[s.REFERENCE.getValue(),s.STRING.getValue()]}}s.build(s,{REFERENCE:"reference",STRING:"string"})},95333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static FIRST_RANGE_COLOR="#B50E03";static SECOND_RANGE_COLOR="#B56200";static THIRD_RANGE_COLOR="#006714";static COLOR_PALETTE=["","#E6ECF2","#C6D3E1","#7D98B3","#54698D","#16325C","#020821","#FF9897","#FFCD95","#FFFF93","#95FFAF","#95FFFF","#98B1FF","#CD96FF","#E74340","#E8963B","#E6E830","#3AE867","#39E5E7","#4269E8","#963CE8",i.FIRST_RANGE_COLOR,i.SECOND_RANGE_COLOR,"#B3B300","#00B531","#00B3B4","#0D33B6","#6400B6","#670000","#673300","#666700",i.THIRD_RANGE_COLOR,"#006668","#001668","#320068"];static DARK_TEXT_COLOR="#16315A";static BRIGHT_TEXT_COLOR="#FFFFFF"}},45398:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(723),s=r(8429);class n extends i{static getSummaryOptions(){return n.enums().map((e=>e.getFormattedValue()))}static getMatrixOptions(){return n.enums().filter((e=>!e.isSummaryOnly())).map((e=>e.getFormattedValue()))}getCode(){return this._value.value}isSummaryOnly(){return this._value.summaryOnly}getFormattedValue(){return{value:this._value.value,label:s.Z.getLabel(this._value.label.section,this._value.label.name)}}getLabel(){return s.Z.getLabel(this._value.label.section,this._value.label.name)}}n.build(n,{ALL:{value:"all",label:{section:"reportBuilder",name:"allSummaryLevels"}},GRAND_TOTAL:{value:"grandTotal",label:{section:"reportBuilder",name:"grandTotalOnly"},summaryOnly:!0},CUSTOM:{value:"custom",label:{section:"reportBuilder",name:"specificGroups"}}})},91824:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static _dataTypeToKind=(e,t)=>{switch(e){case"double":case"int":case"percent":case"currency":return t.CompletionItemKind.Value;case"boolean":return t.CompletionItemKind.Constructor;case"date":case"datetime":case"time":return t.CompletionItemKind.Enum;case"picklist":case"multipicklist":return t.CompletionItemKind.Field;default:return t.CompletionItemKind.Property}};static _tokenizeExampleParameters=e=>{const t=e.indexOf("(")+1,r=e.substring(t,e.indexOf(")")).split(",").map(((e,t)=>"${{0}:{1}}".replace("{0}",(t+1).toString()).replace("{1}",e.trim())));return e.substring(0,t)+r.join(",")+")"}}},13250:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(723),s=r(8429);class n extends i{getCode(){return this._value.value}getFormattedValue(){return{value:this._value.value,label:s.Z.getLabel(this._value.label.section,this._value.label.name)}}isSupportedInCSF(){return this._value.isSupportedInCSF}isSupportedInCDF(){return this._value.isSupportedInCDF}isSupportedInDataCloud(){return this._value.isSupportedInDataCloud}}n.build(n,{NUMBER:{value:"number",label:{section:"reportBuilder",name:"number"},isSupportedInCSF:!0,isSupportedInCDF:!0,isSupportedInDataCloud:!0},PERCENT:{value:"percent",label:{section:"reportBuilder",name:"percent"},isSupportedInCSF:!0,isSupportedInCDF:!1,isSupportedInDataCloud:!1},CURRENCY:{value:"currency",label:{section:"reportBuilder",name:"currency"},isSupportedInCSF:!0,isSupportedInCDF:!1,isSupportedInDataCloud:!1},CHECKBOX:{value:"checkbox",label:{section:"reportBuilder",name:"checkboxFormulaType"},isSupportedInCSF:!1,isSupportedInCDF:!1,isSupportedInDataCloud:!1},DATE:{value:"date",label:{section:"reportBuilder",name:"dateFormulaType"},isSupportedInCSF:!1,isSupportedInCDF:!0,isSupportedInDataCloud:!0},DATE_TIME:{value:"datetime",label:{section:"reportBuilder",name:"datetimeFormulaType"},isSupportedInCSF:!1,isSupportedInCDF:!0,isSupportedInDataCloud:!0},TEXT:{value:"text",label:{section:"reportBuilder",name:"textFormulaType"},isSupportedInCSF:!1,isSupportedInCDF:!0,isSupportedInDataCloud:!0},TIME:{value:"time",label:{section:"reportBuilder",name:"timeFormulaType"},isSupportedInCSF:!1,isSupportedInCDF:!1,isSupportedInDataCloud:!1}})},25133:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(27223);class s{constructor(e,t,r,i,s,n,o,a,l,u){this._new=!!e,this._previewOnly=!!t,this._hasError=!!r,this._validated=!!i,this._errorMessage=s,this._acrossGroupList=n,this._downGroupList=o,this._acrossGroupListType=a,this._downGroupListType=l,this._prevGroupVal=u}getFormulaMetadata(){return i.checkImplemented()}getDecimalPlaces(){return this.getFormulaMetadata().decimalPlaces}getDescription(){return this.getFormulaMetadata().description}getFormula(){return this.getFormulaMetadata().formula}getLabel(){return this.getFormulaMetadata().label}getFormulaType(){return this.getFormulaMetadata().formulaType}isCrossBlock(){return this.getFormulaMetadata().crossBlock}getReportType(){return this.getFormulaMetadata().reportType}isNew(){return this._new}isPreviewOnly(){return this._previewOnly}hasError(){return this._hasError}getErrorMessage(){return this._errorMessage}isValidated(){return this._validated}setPreviewOnly(e){this._previewOnly=e}setDecimalPlaces(e){this.getFormulaMetadata().decimalPlaces=e}setDescription(e){this.getFormulaMetadata().description=e}setFormula(e){this.getFormulaMetadata().formula=e}setLabel(e){this.getFormulaMetadata().label=e}setFormulaType(e){this.getFormulaMetadata().formulaType=e}setReportType(e){this.getFormulaMetadata().reportType=e}setCrossBlock(e){this.getFormulaMetadata().crossBlock=e}setHasError(e){this._hasError=e}setErrorMessage(e){this._errorMessage=e}setIsValidated(e){this._validated=e}setDownGroupList(e){this._downGroupList=e}setDownGroupListType(e){this._downGroupListType=e}setPrevGroupVal(e){this._prevGroupVal=e}setAcrossGroupList(e){this._acrossGroupList=e}setAcrossGroupListType(e){this._acrossGroupListType=e}getDownGroupList(){return this._downGroupList}getDownGroupListType(){return this._downGroupListType}getPrevGroupVal(){return this._prevGroupVal}getAcrossGroupList(){return this._acrossGroupList}getAcrossGroupListType(){return this._acrossGroupListType}getDownGroup(){return this.getFormulaMetadata().downGroup}getAcrossGroup(){return this.getFormulaMetadata().acrossGroup}getDownGroupType(){return this.getFormulaMetadata().downGroupType}getAcrossGroupType(){return this.getFormulaMetadata().acrossGroupType}}},76775:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(90554),s=r(25133);class n extends s.Z{constructor(e,t,r,s,n,o,a,l,u,d,c){super(t,r,s,n,o,a,l,u,d,c),this._metadata=e?(0,i.deepCopy)(e):{acrossGroup:null,acrossGroupType:"all",decimalPlaces:2,description:null,downGroup:null,downGroupType:"all",formula:"",label:"",formulaType:"number",crossBlock:!1,reportType:null}}clone(){return new n(this._metadata,this.isNew(),this.isPreviewOnly(),this.hasError(),this.isValidated(),this.getErrorMessage(),this.getAcrossGroupList(),this.getDownGroupList(),this.getAcrossGroupListType(),this.getDownGroupListType(),this.getPrevGroupVal())}getFormulaMetadata(){return this._metadata}getAcrossGroup(){return this._metadata.acrossGroup}getAcrossGroupType(){return this._metadata.acrossGroupType}getDownGroup(){return this._metadata.downGroup}getDownGroupType(){return this._metadata.downGroupType}setAcrossGroup(e){this._metadata.acrossGroup=e}setAcrossGroupType(e){this._metadata.acrossGroupType=e}setDownGroup(e){this._metadata.downGroup=e}setDownGroupType(e){this._metadata.downGroupType=e}}},22877:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(99689),s=r(43887);class n extends s.Z{constructor(e,t){super(i.Z.INLINE_EDIT_INTERACTION,e),this._payload=t}getPayloadType(){return this._payload.type}getChange(){return this._payload.change}getChangeBatch(){return this._payload.changeBatch}}},85887:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("CHANGE",new s).add("CHANGE_BATCH",new s).add("SAVE",new s).add("CANCEL",new s).add("EDIT_FIELDS",new s).finish()},84400:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(723),s=r(8429);class n extends i{getCode(){return this._value.code}getName(){return this._value.name}getQuery(e){return this._value.query[e]}getTitle(){return s.Z.getLabel("reportBuilder",`${this._value.name}SectionTitle`)}getGroupingTitle(e){if(this._value.groupingTitles[e])return s.Z.getLabel("reportBuilder",`${this._value.groupingTitles[e]}GroupTitle`)}getGroupName(e){return this._value.groupingTitles[e]?this._value.groupingTitles[e]:this._value.name}getGroupIcon(e){return this._value.icons?this._value.icons[e]:void 0}getInputPlaceholder(){return s.Z.getLabel("reportBuilder",`${this._value.name}InputPlaceholder`)}getDeleteText(){return this._value.deleteText}getAddText(){return this._value.addText}}n.build(n,{SNAPSHOTDATES:{code:"0",name:"SnapshotDates",query:["snapshotDates"],groupingTitles:["HistoricalSnapshotDates"],addText:"addSnapshotDate"},GROUPING:{code:"1",name:"Grouping",query:["groupingDownColumns","groupingAcrossColumns"],groupingTitles:["GroupingDown","GroupingAcross"],icons:["table-rows","table-columns"],deleteText:"deleteGroups"},DETAIL:{code:"2",name:"Detail",query:["detailColumns"],groupingTitles:["Detail","Formula"],deleteText:"deleteDetails"},BUCKET:{code:"3",name:"Bucket",query:["buckets"],groupingTitles:[],deleteText:"deleteBuckets"}})},44574:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(90554),n=r(8429),o=r(64933),a=r(59150);const l="FORMULA1";class u{static getMetadataForCSFValidation(e,t){let r;if(e.isCrossBlock())r=t.getBlocks()[0].getBlockId();else if(e.getReportType()){const s=i.find(t.getBlocks(),(t=>t.getReportType()===e.getReportType()));s&&(r=s.getBlockId())}const u={...(0,s.deepCopy)(t.getReportMetadata()),chart:{},name:t.getLabel()??n.Z.getLabel("reportBuilder","genericNewReport"),customSummaryFormula:{[l]:e.getFormulaMetadata()},aggregates:[o.get().addBlockPrefixToColumnName(l,r)],presentationOptions:{}};return(0,a.Z)().unflattenMultiBlockMetadata(u)}static getMetadataForCDFValidation(e,t){return{...(0,s.deepCopy)(t.getReportMetadata()),aggregates:["RowCount"],chart:{},name:t.getLabel()??n.Z.getLabel("reportBuilder","genericNewReport"),customDetailFormula:{[l]:i.pick(e.getFormulaMetadata(),["decimalPlaces","description","formula","formulaType","dataType","label"])},customSummaryFormula:{},detailColumns:[l],groupingsAcross:[],groupingsDown:[],reportFilters:[],reportBooleanFilter:null,sortBy:[],presentationOptions:{}}}}},34271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(90554),n=r(51548),o=r(62816),a=r(44426),l=r(82957);class u extends l.Z{constructor(e,t){super(),this._stepIds=e,this._chartObj=t,this._reportChartUtil=o.get()}mutate(e){return this._mutate(e.dashboardJson,new n.Z(e.dashboardJson))}_mutate(e,t){let r;const s=t;for(const e of this._stepIds){const t=this._isChartStep(e),n=s.getLens(e);if(r=this._getQuery(n),!i.isEmpty(this._chartObj)&&t){const e=s.getWidget("chart").getParameters();this._reportChartUtil.setWidgetParams(this._chartObj,e)}this._mutateChartMetadata(s,e,r,this._chartObj,t)}return new u(this._stepIds,r)}_isChartStep(e){return a.getEnumByValue(e)===a.CHART}_isToggleCombineOther(e,t){return e.chartType===t.chartType&&e.combineSmallGroups!==t.combineSmallGroups}_getQuery(e){return e.getJson().query.chart}_mutateChartMetadata(e,t,r,s,n){const o=e.getLens(t);o.getJson().query.chart=s;const a=!i.isEmpty(o.getJson().query.chartFilters);let l=!0;i.isEmpty(r)||(l=this._canKeepChartFilters(r,s));const u=!n&&(!a||l)||!i.isEmpty(r)&&(i.isEmpty(s)||l||this._isToggleCombineOther(r,s)||this._hasLessMeasureAndSameGrouping(r,s));!l&&a&&(o.getJson().query.chartFilters=[],e.getWidget("chart").getParameters()._selection=[]),o.getJson().query.skipAPI=u}_hasLessMeasureAndSameGrouping(e,t){return i.isEqual(e.groupings,t.groupings)&&(0,s.isSubset)(t.summaries,e.summaries)}_canKeepChartFilters(e,t){return!i.isEmpty(t)&&i.isEqual(e.groupings,t.groupings)&&i.isEqual(e.summaries,t.summaries)&&e.combineSmallGroups===t.combineSmallGroups&&e.chartType===t.chartType}}},8533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486),s=r(17237);class n{static LAST_SAVED_COLUMN_WIDTHS_KEY="LAST_SAVED_COLUMN_WIDTHS_KEY";static LAST_SAVED_COLUMN_WIDTHS_TS="LAST_SAVED_COLUMN_WIDTHS_TS";static LAST_SAVED_COLUMN_WIDTHS_TIMEOUT=15e3;static storeColumnWidths(e,t,r){const i=this._getColumnWidthsStorageKey(t,r);try{(0,s._m)(i,e),this.touchLastSavedColumnWidths(t,r)}catch(e){}}static retrieveColumnWidths(e,t){const r=this._getColumnWidthsStorageKey(e,t);let n=(0,s.fp)(r);if(!n||i.isEmpty(n)){const r=(0,s.fp)(this.LAST_SAVED_COLUMN_WIDTHS_TS);if(r&&Date.now()-r<=this.LAST_SAVED_COLUMN_WIDTHS_TIMEOUT){const r=(0,s.fp)(this.LAST_SAVED_COLUMN_WIDTHS_KEY);r&&"string"==typeof r&&(n=(0,s.fp)(r),this.storeColumnWidths(n,e,t))}}else this.touchLastSavedColumnWidths(e,t);return n}static touchLastSavedColumnWidths(e,t){const r=this._getColumnWidthsStorageKey(e,t);try{(0,s._m)(this.LAST_SAVED_COLUMN_WIDTHS_KEY,r),(0,s._m)(this.LAST_SAVED_COLUMN_WIDTHS_TS,Date.now())}catch(e){}}static _getColumnWidthsStorageKey(e,t){return`ReportColumnWidths.${e||"null"}.${t}`}}},63687:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var i=r(51548),s=r(1806),n=r(83784),o=r(88912),a=r(49842),l=r(53361),u=r(44426),d=r(43677),c=r(82957);const{PREVIEW_REFRESHING:h}=n,p="isPreview",g="disableDragAndDrop",m="linkedFilters";class _ extends c.Z{constructor(e,t){super(),this._isPreview=e,this._transactionEndName=t}mutate(e){return this._mutate(e.dashboardJson,new i.Z(e.dashboardJson))}_mutate(e,t){for(const e of u.enums()){const r=e.getValue(),i=t.getLens(r);if(i.getJson()[p]=this._isPreview,i.getJson().requestOrigin=this._isPreview?l.REPORT_BUILDER_PREVIEW.getValue():l.REPORT_RUN_PAGE_DESKTOP.getValue(),i.getJson().transactionEndName=this._transactionEndName,this._isPreview){if(i.getJson().query[m]?.length>0){const e=new a(i.getJson().reportMetadata),t=o.get().getReportFilters(e.getReportMetadata(),e.getReportTypeMetadata());i.getJson().query.filters=t}i.getJson().query.chartFilters=[],i.getJson().query[m]=[],t.getWidget("chart").getParameters()._selection=[]}e===u.CHART&&(i.getJson().selectMode=this._isPreview?s.SelectMode.NONE.getCode():s.SelectMode.SINGLE.getCode()),i.getJson().query[h.getValue()]=!0}return t.getWidget("table").getParameters()[g]=!this._isPreview,t.getWidget("table").getParameters()[p]=this._isPreview,t.getWidget("table").getParameters()[d.B]=this._isPreview,t.getWidget("matrixDetailsTable").getParameters()[g]=!this._isPreview,t.getWidget("matrixDetailsTable").getParameters()[p]=this._isPreview,t.getWidget("matrixDetailsTable").getParameters()[d.B]=this._isPreview,t.getWidget("queryBuilder").getParameters().hideSectionableTable=!this._isPreview,t.getWidget("queryBuilder").getParameters().isFiltersTabEnabled=this._isPreview,t.getWidget("warning-banner").getParameters()[d.B]=this._isPreview,t.getWidget("chart").getParameters()[d.B]=this._isPreview,new _(!this._isPreview)}}},70377:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var i=r(96486),s=r(90554),n=r(7931),o=r(61506),a=r(51548),l=r(88912),u=r(49842),d=r(64933),c=r(83784),h=r(14201),p=r(44426),g=r(82957),m=r(28713),_=r(59894);const{BLOCKS:f,BOOLEANFILTER:y,CHART:b,CSF:C,DETAILCOLUMNS:E,FILTER:S,GROUPINGDOWN:T,MEASURES:I,REPORT_TYPE:v,SHOWDETAILS:R,SORTBY:w}=c;class A extends g.Z{_blockSortBy=null;_blockFilters=[];_blockBooleanFilter=new h.ZP(null);_csfs=null;_chart=null;constructor(e,t,r,i,s,n,o=null,a=[],l=new h.ZP(null),u=null,d=null,c){super(),this._blockIndex=e,this._block=t,this._reportType=r,this._groupings=i,this._detailColumns=s,this._aggregates=n,this._blockSortBy=o,this._blockFilters=a,this._blockBooleanFilter=l,this._csfs=u,this._chart=d,this._showDetails=c}mutate(e){return this._mutate(e.dashboardJson,new a.Z(e.dashboardJson))}_mutate(e,t){const r=t.getLens(p.TABLE.getValue()).getQuery(),s=r[v.getValue()],n=r[T.getValue()],o=r[E.getValue()],a=r[I.getValue()],l=r[C.getValue()],u=r[b.getValue()],d=r[R.getValue()];this._addToCachedBooleanFilters(this._blockBooleanFilter);for(const e of i.values(t.getLensesJson()))e.query[f.getValue()].splice(this._blockIndex,0,this._block),e.query[w.getValue()].splice(this._blockIndex,0,this._blockSortBy),e.query[S.getValue()].splice(this._blockIndex,0,this._blockFilters),e.query[y.getValue()].splice(this._blockIndex,0,this._blockBooleanFilter.getLogic()),this._reportType&&(e.query[v.getValue()]=this._reportType),this._groupings&&(e.query[T.getValue()]=this._groupings),this._detailColumns&&(e.query[E.getValue()]=this._detailColumns),this._aggregates&&(e.query[I.getValue()]=this._aggregates),this._csfs&&(e.query[C.getValue()]=this._csfs),this._chart&&(e.query[b.getValue()]=this._chart),i.isBoolean(this._showDetails)&&(e.query[R.getValue()]=this._showDetails);return new _.Z(this._blockIndex,s,n,o,a,l,u,d)}_addToCachedBooleanFilters(e){const t=o.Z.get(n),r=t.getBooleanFilter();r.splice(this._blockIndex,0,this._blockBooleanFilter),t.setBooleanFilter(r)}static make(e,t,r,n){const o=d.get(),a=r.getLens(p.TABLE.getValue()),c=a.getQuery(),h=new u(a.getParameter("reportMetadata")),g=c[f.getValue()],_=g.length,y=new u(n),S=y.getReportTypeMetadata(),w=e.reportType;let D=1,L=m.Z.makeBlockLabel(w.label,D),M=0,N="B"+M;const O=i.map(g,"name");for(;-1!==O.indexOf(L);)L=m.Z.makeBlockLabel(w.label,++D);const P=i.map(g,"blockId");for(;-1!==P.indexOf(N);)N="B"+ ++M;let x;0===g.length&&(x=w);const Z=(0,s.deepCopy)(c[I.getValue()]);i.some(Z,o.isRowCount)&&Z.push(o.getBlockRowCountName(N));const F=l.get().getReportFilters(e,y.isMultiBlock()?S.getInnerReportTypeMetadataByReportType()[w.type]:S),k=i.map(c[f.getValue()],"reportType.type");let B,W,G,U,H=c[R.getValue()];if(-1===k.indexOf(w.type)){const e=x||c[v.getValue()];B=(0,s.deepCopy)(c[T.getValue()]),W=(0,s.deepCopy)(c[b.getValue()]),G=(0,s.deepCopy)(c[C.getValue()]),m.Z.dropIncompatibleGroupings(h,y,e.type,B,Z,W,G),H=H||i.isEmpty(B)}if(t){let t=e.detailColumns;const r=B||c[T.getValue()];if(!i.isEmpty(r)){const e=i.map(r,"name");t=i.filter(t,(t=>-1===e.indexOf(y.getColumnNameInPrincipalReportType(t,w.type))))}U=i.concat(c[E.getValue()],o.addBlockPrefixToColumnNames(t,N))}return new A(_,{blockId:N,name:L,reportType:w},x,B,U,Z,void 0,F,void 0,G,W,H)}}},59894:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var i=r(96486),s=r(90554),n=r(7931),o=r(61506),a=r(51548),l=r(64933),u=r(83784),d=r(62816),c=r(44426),h=r(82957),p=r(28713),g=r(70377);const{BLOCKS:m,BOOLEANFILTER:_,CHART:f,CSF:y,DETAILCOLUMNS:b,FILTER:C,GROUPINGDOWN:E,MEASURES:S,REPORT_TYPE:T,SHOWDETAILS:I,SORTBY:v}=u;class R extends h.Z{constructor(e,t,r,i,s,n=null,o=null,a){super(),this._blockIndex=e,this._reportType=t,this._groupings=r,this._detailColumns=i,this._aggregates=s,this._csfs=n,this._chart=o,this._showDetails=a}mutate(e){return this._mutate(e.dashboardJson,new a.Z(e.dashboardJson))}_mutate(e,t){const r=t.getLens(c.TABLE.getValue()).getQuery(),s=r[m.getValue()][this._blockIndex],n=r[T.getValue()],o=r[E.getValue()],a=r[b.getValue()],l=r[S.getValue()],u=r[v.getValue()][this._blockIndex],d=r[C.getValue()][this._blockIndex],h=this._removeFromCachedBooleanFilters(),p=r[f.getValue()],R=r[y.getValue()],w=r[I.getValue()];for(const e of i.values(t.getLensesJson()))e.query[T.getValue()]=this._reportType,e.query[m.getValue()].splice(this._blockIndex,1),e.query[v.getValue()].splice(this._blockIndex,1),e.query[C.getValue()].splice(this._blockIndex,1),e.query[_.getValue()].splice(this._blockIndex,1),e.query[E.getValue()]=this._groupings,e.query[b.getValue()]=this._detailColumns,e.query[S.getValue()]=this._aggregates,e.query[y.getValue()]=this._csfs,e.query[f.getValue()]=this._chart,i.isBoolean(this._showDetails)&&(e.query[I.getValue()]=this._showDetails),e.query.skipAPI=0===e.query[m.getValue()].length;return new g.Z(this._blockIndex,s,n,o,a,l,u,d,h,R,p,w)}_removeFromCachedBooleanFilters(){const e=o.Z.get(n),t=e.getBooleanFilter(),r=t.splice(this._blockIndex,1)[0];return e.setBooleanFilter(t),r}static make(e,t,r){const n=l.get(),o=t.getQuery(),a=o[m.getValue()],u=a[e],c=u.blockId,h=n.buildBlockPrefix(c),g=u.reportType.type,_=o[T.getValue()],C=o[E.getValue()],v=o[b.getValue()],w=o[S.getValue()],A=o[f.getValue()],D=o[y.getValue()];let L=_,M=C,N=v,O=w,P=D,x=A,Z=o[I.getValue()];if(1===a.length)M=[],N=[],O=[],P={},x=null;else{x=(0,s.deepCopy)(A),P=(0,s.deepCopy)(D);const o=[];let a=!1;p.Z.isTheOnlyBlockOfItsType(t,e)&&(a=!0,L=p.Z.getPrincipalTypeAfterBlockDeletion(t,e),M=(0,s.deepCopy)(C),O=(0,s.deepCopy)(w),p.Z.dropIncompatibleGroupings(t,r,L.type,M,O,x,P),Z=Z||i.isEmpty(M)),i.forEach(P,(function(e,t){(a&&e.reportType===g||e.crossBlock&&-1!==e.formula.indexOf(h))&&(e.crossBlock&&o.push(t),delete P[t])})),N=i.filter(N,(e=>!n.isColumnFromBlock(e,c)&&!i.includes(o,e))),O=i.filter(O,(e=>!n.isColumnFromBlock(e,c)&&!i.includes(o,e))),i.isEmpty(x)||d.get().updateChartSummaries(x,O)}return new R(e,L,M,N,O,P,x,Z)}}},18302:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(96486),s=r(90554),n=r(64933),o=r(83784),a=r(37720);const{CSF:l,MEASURES:u}=o;class d extends a.Z{constructor(e,t,r,i,s,o=!1,a,l,u){super(e,t,i,s,o,a,l,u),this._blockId=r,this._parsingUtil=n.get()}_getUndoMutator(e,t,r,i,s,n,o){return new d(e,t,this._blockId,r,i,s,n,o)}_getNewFormulaKey(e){return this._parsingUtil.addBlockPrefixToColumnName(`FORMULA${this._getNewFormulaKeyIndex(e)}`,this._blockId)}_getOldMetadata(e){const t=this._parsingUtil.unprefixBlockColumnName(this._formulaKey);return(0,s.deepCopy)(e[l.getValue()][t])}_readdMeasures(e){super._readdMeasures(e);const t=this._parsingUtil.unprefixBlockColumnName(this._formulaKey);e[l.getValue()][this._formulaKey]=e[l.getValue()][t]}_addMeasureToQuery(e,t){if(this._parsingUtil.getBlockId(t)){const r=this._parsingUtil.unprefixBlockColumnName(t);e[u.getValue()].push(t),e[l.getValue()][t]=e[l.getValue()][r]}}_removeMeasureFromQuery(e){const t=e[u.getValue()];this._formulaKey===this._parsingUtil.unprefixBlockColumnName(this._formulaKey)?i.remove(t,(e=>this._matchByColumnName(e))):i.pull(t,this._formulaKey),e[u.getValue()]=this._setEmptyMeasures(t),delete e[l.getValue()][this._formulaKey]}_addCsfToQuery(e,t){const r=this._parsingUtil.unprefixBlockColumnName(t);e[l.getValue()][r]=(0,s.deepCopy)(this._formulaMetadata),r!==t&&(e[l.getValue()][t]=(0,s.deepCopy)(this._formulaMetadata))}_removeCsfFromQuery(e){for(const t of Object.keys(e[l.getValue()]))this._matchByColumnName(t)&&delete e[l.getValue()][t]}_updateCsfInQuery(e){for(const t of Object.keys(e[l.getValue()]))this._matchByColumnName(t)&&(e[l.getValue()][t]=(0,s.deepCopy)(this._formulaMetadata))}_matchByColumnName(e){return this._parsingUtil.unprefixBlockColumnName(e)===this._parsingUtil.unprefixBlockColumnName(this._formulaKey)}}},14488:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(51548),s=r(44426),n=r(82957);class o extends n.Z{mutate(e){return this._mutate(e.dashboardJson,new i.Z(e.dashboardJson))}_mutate(e,t){for(const e of s.enums()){const r=e.getValue();t.getLens(r).getJson().query.useCache=!1}return new o}}},37720:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E,i:()=>C});var i=r(96486),s=r(90554),n=r(78978),o=r(99522),a=r(51548),l=r(3005),u=r(83784),d=r(44426),c=r(62816),h=r(82957),p=r(2953);const{CSF:g,MEASURES:m,SCROLL_TO_COLUMN_INDEX:_,CHART:f,GROUPINGDOWN:y,PRESENTATION_OPTIONS:b}=u;class C extends n{}C.build(C,["ADD","REMOVE"]);class E extends h.Z{constructor(e,t,r,i,s,n,o,a,l){super(),this._stepIds=e,this._action=t,this._formulaKey=r,this._formulaMetadata=i,this._isPreview=s,this._oldChart=n,this._oldMeasures=o,this._oldGroupingsDown=a,this._oldConditionalFormatting=l}mutate(e){return this._mutate(e.dashboardJson,new a.Z(e.dashboardJson))}_mutate(e,t){let r,i,n,o,a,l,u;for(const e of Array.from(this._stepIds)){const h=t.getLens(e),g=h.getQuery();switch(g[_.getValue()]=this._isPreview&&e===d.TABLE.getValue(),this._action){case p.q.CREATE:{r=p.q.DELETE;const e=n=this._formulaKey||this._getNewFormulaKey(g);this._addToQuery(g,e),null!=this._oldChart&&(null==o&&(o=(0,s.deepCopy)(g[f.getValue()])),g[f.getValue()]=(0,s.deepCopy)(this._oldChart)),null!=this._oldMeasures&&(g[m.getValue()]=this._oldMeasures),null!=this._oldGroupingsDown&&(g[y.getValue()]=(0,s.deepCopy)(this._oldGroupingsDown)),null!=this._oldConditionalFormatting&&(g[b.getValue()].formattingRules=(0,s.deepCopy)(this._oldConditionalFormatting));break}case p.q.UPDATE:r=p.q.UPDATE,n=this._formulaKey,null==i&&(i=this._getOldMetadata(g)),this._updateCsfInQuery(g),null!=this._oldGroupingsDown?g[y.getValue()]=(0,s.deepCopy)(this._oldGroupingsDown):l=this._getOldGroupingsDownIfFormulaUpdated(g,i,this._formulaMetadata,this._formulaKey);break;case p.q.DELETE:r=p.q.CREATE,null==i&&(i=this._getOldMetadata(g)),n=this._formulaKey,null==a&&(a=(0,s.deepCopy)(g[m.getValue()])),this._removeFromQuery(g),o=this._getOldChartIfMeasureRemoved(h,t,c),l=this._getOldGroupingsDownIfSortAggRemoved(g,this._formulaKey),u=this._getOldConditionalFormattingIfAggRemoved(g,this._formulaKey);break;case C.ADD:r=C.REMOVE,n=this._formulaKey,null==a&&(a=(0,s.deepCopy)(g[m.getValue()])),this._oldMeasures?this._readdMeasures(g):this._addMeasureToQuery(g,this._formulaKey),null!=this._oldChart&&(null==o&&(o=(0,s.deepCopy)(g[f.getValue()])),g[f.getValue()]=(0,s.deepCopy)(this._oldChart));break;case C.REMOVE:r=C.ADD,n=this._formulaKey,null==a&&(a=(0,s.deepCopy)(g[m.getValue()])),this._oldMeasures?g[m.getValue()]=this._oldMeasures:this._removeMeasureFromQuery(g),o=this._getOldChartIfMeasureRemoved(h,t,c)}}return this._getUndoMutator(this._stepIds,r,n,i,this._isPreview,o,a,l,u)}_getNewFormulaKey(e){return`FORMULA${this._getNewFormulaKeyIndex(e)}`}_getNewFormulaKeyIndex(e){const t=e[g.getValue()];let r=1;for(;null!=t[`FORMULA${r}`];)r++;return r}_getOldMetadata(e){return(0,s.deepCopy)(e[g.getValue()][this._formulaKey])}_getUndoMutator(e,t,r,i,s,n,o,a,l){return new E(e,t,r,i,s,n,o,a,l)}_readdMeasures(e){e[m.getValue()]=this._oldMeasures}_addCsfToQuery(e,t){e[g.getValue()][t]=(0,s.deepCopy)(this._formulaMetadata)}_addMeasureToQuery(e,t){e[m.getValue()].push(t)}_addToQuery(e,t){this._addCsfToQuery(e,t),this._addMeasureToQuery(e,t)}_removeCsfFromQuery(e){delete e[g.getValue()][this._formulaKey]}_removeMeasureFromQuery(e){const t=e[m.getValue()];(0,i.pull)(t,this._formulaKey),e[m.getValue()]=this._setEmptyMeasures(t)}_removeFromQuery(e){this._removeCsfFromQuery(e),this._removeMeasureFromQuery(e)}_updateCsfInQuery(e){e[g.getValue()][this._formulaKey]=(0,s.deepCopy)(this._formulaMetadata)}_getOldGroupingsDownIfSortAggRemoved(e,t){const r=(0,s.deepCopy)(e[y.getValue()]);let n=!1;if((0,i.each)(r,(function(e){if(e.sortAggregate===t)return e.sortAggregate=null,n=!0})),n){const t=(0,s.deepCopy)(e[y.getValue()]);return e[y.getValue()]=r,t}return null}_getOldGroupingsDownIfFormulaUpdated(e,t,r,n){let o;if("grandTotal"===t.downGroupType||"all"===r.downGroupType)return null;if("grandTotal"===r.downGroupType)return this._getOldGroupingsDownIfSortAggRemoved(e,n);const a=(0,s.deepCopy)(e[y.getValue()]);if("all"===t.downGroupType){let t=!1;return(0,i.each)(a,(function(e){if(e.name!==r.downGroup&&e.sortAggregate===n)return e.sortAggregate=null,t=!0})),t?(o=(0,s.deepCopy)(e[y.getValue()]),e[y.getValue()]=a,o):null}const l=(0,i.findIndex)(a,(e=>e.name===t.downGroup));return l<0||a[l].sortAggregate!==n?null:(o=(0,s.deepCopy)(a),a[l].sortAggregate=null,e[y.getValue()]=a,o)}_getOldConditionalFormattingIfAggRemoved(e,t){const r=e[b.getValue()];if(!r||!r.formattingRules)return null;const n=(0,s.deepCopy)(r.formattingRules),o=(0,i.findIndex)(n,(e=>e.column===t));return o<0?null:(r.formattingRules.splice(o,1),n)}}o.mix(E,[l])},2953:(e,t,r)=>{"use strict";r.d(t,{q:()=>b,Z:()=>C});var i=r(96486),s=r(90554),n=r(99522),o=r(78978),a=r(5726),l=r(51548),u=r(3005),d=r(83784),c=r(64933),h=r(90249),p=r(67181);class g{constructor(){}addColumns(e,t){}removeColumns(e){}moveColumn(e,t,r){}updateColumn(e){}}var m=r(59816);class _{constructor(e){this._runtimeLens=e,this._reportFullMetadata=e.getLastResult().getMetadata().getReportMetadata()}addColumns(e,t){this._reportFullMetadata.reportMetadata.detailColumns.splice(e,0,...t),this._setEmulatedFlag()}removeColumns(e){a.Z.removeByIndices(this._reportFullMetadata.reportMetadata.detailColumns,e),this._setEmulatedFlag()}moveColumn(e,t,r){Array.isArray(e)?a.Z.moveElementByIndicies(this._reportFullMetadata.reportMetadata.detailColumns,e,t):(a.Z.move(this._reportFullMetadata.reportMetadata.detailColumns,e,t),this._reportFullMetadata.reportMetadata.detailColumns[t]=r),this._setEmulatedFlag()}updateColumn(e){this._setEmulatedFlag()}_setEmulatedFlag(){this._runtimeLens.callCapabilityMethod(m.RESULT_EMULATION,"setEmulatedResultMessageFlag")}}var f=r(77955);function y(e){return!e.hasCapability(m.RESULT_EMULATION)||!e.hasLastResult()||e.getLastResult()instanceof f.Z?new g:new _(e)}class b extends o{}b.build(b,["CREATE","DELETE","UPDATE","MOVE"]);class C extends p.Z{constructor(e,t,r,s,n,o,a,l,u,d,h,p,g){super(),this._stepIds=e,this._action=t,this._type=r,this._groupIndex=s,this._columnIndex=n,this._newColumn=o,this._fromIndex=a,this._toIndex=l,this._sortBy=u,this._oldFormulas=d,this._oldConditionalFormatting=h,this._oldFilters=p,this._oldFilterBooleanLogic=g,i.isArray(this._stepIds)||(this._stepIds=[this._stepIds]),this._parsingUtil=c.get()}mutate(e,t){return this._mutate(e.dashboardJson,new l.Z(e.dashboardJson),t)}_mutate(e,t=new l.Z(e),r){let s,n,o=null,u=null;this._oldFromIndex=null,this._oldToIndex=null;let d=this._columnIndex,c={},h=null;for(const e of Array.from(this._stepIds)){const l=t.getLens(e),p=y(r.getLens(e));switch(this._extraPreprocessHook(l),this._action){case b.CREATE:if(u=b.DELETE,this._columnIndex=this._columnIndex??0,this._updateNewColumnOrGrouping(l,t),Array.isArray(this._getQuery(l))||this._setQueryAsEmptyArray(l),Array.isArray(this._newColumn))if(Array.isArray(this._columnIndex))a.Z.merge(this._getQuery(l),this._newColumn,this._columnIndex);else{d=i.range(this._columnIndex,this._columnIndex+this._newColumn.length);let e=this._columnIndex;for(const t of Array.from(this._newColumn))this._getQuery(l).splice(e,0,t),e++}else this._getQuery(l).splice(this._columnIndex,0,this._newColumn);this._emulatorCreateColumnsHook(p,this._columnIndex,Array.isArray(this._newColumn)?this._newColumn:Array.of(this._newColumn)),this._extraCreateHook(l,t);break;case b.DELETE:u=b.CREATE,Array.isArray(this._columnIndex)?o=a.Z.removeByIndices(this._getQuery(l),this._columnIndex):(o=this._getQuery(l)[this._columnIndex],this._getQuery(l).splice(this._columnIndex,1)),this._emulatorDeleteColumnsHook(p,Array.isArray(this._columnIndex)?this._columnIndex:Array.of(this._columnIndex)),this._extraDeleteHook(l,o,t);break;case b.MOVE:if(u=b.MOVE,"Detail"===this._type.getName()&&Array.isArray(this._fromIndex)&&Array.isArray(this._toIndex)){const e=a.Z.moveElementByIndicies(this._getQuery(l),this._fromIndex,this._toIndex);this._emulatorMoveColumnHook(p,this._fromIndex,this._toIndex,this._newColumn),this._fromIndex[0]<this._toIndex[0]?(this._oldFromIndex=e,this._oldToIndex=this._fromIndex):(this._oldFromIndex=this._toIndex,this._oldToIndex=e)}else{o=this._getQuery(l)[this._fromIndex],a.Z.move(this._getQuery(l),this._fromIndex,this._toIndex);let e=o;"Detail"===this._type.getName()?(this._updateNewColumnOrGrouping(l,t),e=this._newColumn||o):e=o,this._getQuery(l)[this._toIndex]=e,this._emulatorMoveColumnHook(p,this._fromIndex,this._toIndex,e),this._oldFromIndex=this._toIndex,this._oldToIndex=this._fromIndex,this._extraMoveHook(l,o,t)}break;case b.UPDATE:u=b.UPDATE,o=this._extraUpdateHook(l,this._newColumn,t),this._emulatorUpdateColumnHook(p,this._newColumn)}this._extraPostprocessHook(l),this._shouldUpdateFilters(l)&&(null!=this._oldFilters?this._replaceOldFilters(l):({oldFilters:n,oldFilterBooleanLogic:s}=this._cleanseFilters(l,o))),null!=this._oldFormulas?this._replaceOldFormulas(l):c=this._cleanseFormulas(l,o,this._action===b.DELETE),null!=this._oldConditionalFormatting?this._replaceOldFormatting(l):h=this._cleanseFormatting(l),this._setPivotedParam(t,l)}return this._getUndoMutator(u,d,o,this._oldFromIndex,this._oldToIndex,c,h,n,s)}_setQueryAsEmptyArray(e){const t=this._type.getQuery(this._groupIndex);return e.getQuery()[t]=[]}_emulatorCreateColumnsHook(e,t,r){}_emulatorDeleteColumnsHook(e,t){}_emulatorMoveColumnHook(e,t,r,i){}_emulatorUpdateColumnHook(e,t){}_extraCreateHook(e,t){}_extraDeleteHook(e,t,r){}_extraMoveHook(e,t,r){}_extraUpdateHook(e,t,r){}_extraPreprocessHook(e){const t=h.ZP.getHistoricalTrackingMetadata(e.getJson().reportMetadata);if(!(null!=t?t.isHistoricalReport():void 0))return;const r=this._getQuery(e,d.DETAILCOLUMNS.getValue()),s=t.cleanseDetailColumns(r);if(s&&!i.isEqual(r,s))if(r.length=0,Array.prototype.push.apply(r,s),b.MOVE===this._action&&null!=this._fromIndex)this._newColumn=s[this._fromIndex];else if(b.DELETE===this._action&&null!=this._columnIndex)if(Array.isArray(this._columnIndex)){const e=[];this._columnIndex.forEach((t=>{s[t]&&e.push(s[t])})),this._newColumn=e}else s[this._columnIndex]&&(this._newColumn=s[this._columnIndex])}_extraPostprocessHook(e){const t=h.ZP.getHistoricalTrackingMetadata(e.getJson().reportMetadata);if(!(null!=t?t.isHistoricalReport():void 0))return;const r=this._getQuery(e,d.DETAILCOLUMNS.getValue()),s=t.reconstituteDetailColumns(r);return i.isEqual(r,s)?void 0:(r.length=0,Array.prototype.push.apply(r,s))}_shouldUpdateFilters(e){return this._hasRowLimitFilter(e)}_isRowCount(e){return this._parsingUtil.isRowCount(e)}_isCustomSummaryFormula(e,t){return!!this._getQuery(t,d.CSF.getValue())?.[e]}_updateMeasure(e,t,r){const s=this._getQuery(e,d.MEASURES.getValue()),n=this._updateMeasureColumns(s,t,e,r);if(!i.isEqual(s,n))return this._oldMeasureColumns=s,e.getQuery()[d.MEASURES.getValue()]=this._setEmptyMeasures(n,e)}_updateMeasureColumns(e,t,r,s){return e?i.filter(e,(e=>this._isRowCount(e)||this._isCustomSummaryFormula(e,r)||i.includes(t,this._parsingUtil.getAggregateColumnName(e)))):[]}_getUndoMutator(e,t,r,i,s,n,o,a,l){return new C(this._stepIds,e,this._type,this._groupIndex,t,r,i,s,this._oldSortBy,n,o,a,l)}_setPivotedParam(e,t){return e.getWidget("table").getParameters().pivoted=!i.isEmpty(this._getQuery(t,d.GROUPINGACROSS.getValue()))}_replaceSortBy(e,t){const r=e.getQuery()[d.SORTBY.getValue()],n=!i.isEmpty(this._getQuery(e,d.GROUPINGACROSS.getValue())),o=this._parsingUtil.isSortedDetail(r,t);if(n||o)return this._oldSortBy=(0,s.deepCopy)(r),e.getQuery()[d.SORTBY.getValue()]=this._parsingUtil.removeDetailSort(r,t)}_updateNewColumnOrGrouping(e,t){switch(this._type.getName()){case"Detail":Array.isArray(this._newColumn)?this._newColumn=this._newColumn.map((e=>e?.name??e)):this._newColumn=this._newColumn?.name??this._newColumn;break;case"Grouping":Array.isArray(this._newColumn)?this._newColumn=this._newColumn.map((e=>"string"==typeof e?this._buildGrouping(e):e)):this._newColumn="string"==typeof this._newColumn?this._buildGrouping(this._newColumn):this._newColumn;break;case"Bucket":Array.isArray(this._newColumn)?this._newColumn=this._newColumn.map((t=>t&&!t.developerName?this._generateNewBucketDevName(e):t)):this._newColumn&&!this._newColumn.developerName&&(this._newColumn.developerName=this._generateNewBucketDevName(e))}}_buildGrouping(e){return{dateGranularity:"None",name:e,sortOrder:"Asc",sortAggregate:null}}_updateSortByIfIsGrouping(e,t){return this._replaceSortBy(e,t)}}n.mix(C,[u])},2386:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i=r(96486),s=r(90554),n=r(49842),o=r(34533),a=r(85808),l=r(83784),u=r(62816),d=r(44426),c=r(2953);class h extends c.Z{constructor(e,t,r,i,s,n,o,a,l,u,d,c,h,p,g,m,_,f,y,b){super(e,t,r,i,s,n,o,a,g,_,f,y,b),this._groupingsDown=null==l?[]:l,this._groupingsAcross=null==u?[]:u,this._measureColumns=d,this._showDetails=c,this._chartFromMeasureChange=h,this._chartFromGroupingChange=p,this._highlight=m}_extraCreateHook(e,t){if(this._restoreChart(e,t,this._chartFromMeasureChange,u),null!=this._measureColumns)e.getQuery()[l.MEASURES.getValue()]=this._measureColumns;else{const r=new n(t.getLens(e.getId()).getJson().reportMetadata),i=this._getAggregatableNewColumns(t,r);if(i.length>0){const t=e.getQuery()[l.MEASURES.getValue()];this._oldMeasureColumns=t;const s=r.getReportTypeMetadata().isCalculatedInsight()?a.Z.NOOP.getPrefix():a.Z.SUM.getPrefix(),n=i.map((e=>this._parsingUtil.getAggregateNameForColumn(e,s)));e.getQuery()[l.MEASURES.getValue()]=t.concat(n)}const s=this._updateGrouping(e,l.GROUPINGACROSS.getValue(),t),o=this._updateGrouping(e,l.GROUPINGDOWN.getValue(),t);if(s.length>0||o.length>0){const r=this._getOldChartIfGroupingRemoved(e,s.concat(o),t,u);null==this._chartFromGroupingChange&&(this._chartFromGroupingChange=r),this._removeGroupingHighlight(e)}this._updateMeasure(e,this._getQuery(e))}this._handleCreateDetailColumnAfterMeasureUpdate(e,t)}_getAggregatableNewColumns(e,t){const r=Array.from(t.getAvailableMeasures()),s=(0,i.isArray)(this._newColumn)?this._newColumn:[this._newColumn];return(0,i.intersection)(r,s)}_extraDeleteHook(e,t,r){this._updateMeasure(e,this._getQuery(e)),this._updateGroupingSort(e),this._restoreChart(e,r,this._chartFromGroupingChange,u);const s=this._getOldChartIfMeasureRemoved(e,r,u);null==this._chartFromMeasureChange&&(this._chartFromMeasureChange=s),this._handleDeleteDetailColumnAfterMeasureUpdate(e,t,r),(0,i.isEmpty)(e.getQuery()[l.CHART.getValue()])||this._updateChartMetadataCIReports(e,r)}_updateChartMetadataCIReports(e,t){const r=new n(t.getLens(e.getId()).getJson().reportMetadata).getReportTypeMetadata();if(!r.isCalculatedInsight())return;const i=r.getAvailableCIMeasures("AGGREGATABLE"),s=r.getAvailableCIDimensionNames();if(s.length>1&&(0===i.length||!e.getQuery()[l.DETAILCOLUMNS.getValue()].some((e=>i.includes(e)))))if(s.length>2)e.getQuery()[l.CHART.getValue()]={};else{const r=this._generateDefaultChartMetadata(e,s.length);e.getQuery()[l.CHART.getValue()]=r;const i=t.getWidget(l.CHART.getValue()).getJson().parameters;e.getId()===d.CHART.getValue()&&u.get().setWidgetParams(r,i)}}_generateDefaultChartMetadata(e,t){const{reportMetadata:r,reportExtendedMetadata:i,reportTypeMetadata:n}=(0,s.deepCopy)(e.getJson().reportMetadata),a=e.getQuery()[l.CHART.getValue()];if(a&&a.groupings.length===t)return a;r.chart={},r.aggregates=e.getQuery()[l.MEASURES.getValue()],r.detailColumns=e.getQuery()[l.DETAILCOLUMNS.getValue()];const d=u.get(),c=d.getOrderedAxesFromMetadata(r,i,n),h=d.getPalettes(),p=d.getColors(),g=d.getSecondaryColors(),m=d.generateSuggestedEclairChartConfig(c,p,g,h,new o.Z(n),r),{definition:_}=m,f=m.config;return d.getChartSerializationService().convertChartConfigToMetadata(_,f)}_extraUpdateHook(e,t,r){if(!Array.isArray(t))return;const s=e.getQuery()[l.DETAILCOLUMNS.getValue()];e.getQuery()[l.DETAILCOLUMNS.getValue()]=t;const n=(0,i.difference)(s,t);return null!=this._measureColumns?e.getQuery()[l.MEASURES.getValue()]=this._measureColumns:this._updateMeasure(e,this._getQuery(e)),this._newHighlight=this._getNewHighlightVal(e.getQuery()[l.HIGHLIGHT.getValue()]),e.getQuery()[l.HIGHLIGHT.getValue()]=null!=this._highlight?this._highlight:void 0,this._handleChartNoData(e,t,r,u),null!=this._sortBy?this._restoreSortBy(e):this._parsingUtil.isSortedDetail(e.getQuery()[l.SORTBY.getValue()],n)&&this._replaceSortBy(e,n),s}_getUndoMutator(e,t,r,i,s,n,o,a,l){return new h(this._stepIds,e,this._type,this._groupIndex,t,r,this._oldFromIndex,this._oldToIndex,this._oldGroupingsDown,this._oldGroupingsAcross,this._oldMeasureColumns,this._oldShowDetails,this._chartFromMeasureChange,this._chartFromGroupingChange,this._oldSortBy,this._newHighlight,n,o,a,l)}_updateGrouping(e,t,r){const o=this._getQuery(e,t),a=(0,i.map)(o,"name"),u=new n(r.getLens(d.TABLE.getValue()).getJson().reportMetadata),c=((0,i.isArray)(this._newColumn)?this._newColumn:[this._newColumn]).map((e=>u.getColumnNameInPrincipalReportType(e.name??e))),h=(0,i.intersection)(Array.from(a),c);return 0===h.length||(e.getQuery()[t]=Array.from(o).filter((e=>!h.includes(e.name))),t===l.GROUPINGDOWN.getValue()?(this._oldGroupingsDown=o,(0,i.isEmpty)(e.getQuery()[l.GROUPINGDOWN.getValue()])&&!(0,i.isEmpty)(e.getQuery()[l.GROUPINGACROSS.getValue()])&&(e.getQuery()[l.GROUPINGDOWN.getValue()]=(0,s.deepCopy)(e.getQuery()[l.GROUPINGACROSS.getValue()]),e.getQuery()[l.GROUPINGACROSS.getValue()]=[],this._oldGroupingsAcross||(this._oldGroupingsAcross=e.getQuery()[l.GROUPINGDOWN.getValue()]))):t===l.GROUPINGACROSS.getValue()&&(this._oldGroupingsAcross=o)),h}_updateGroupingSort(e){const t=(0,s.deepCopy)(e.getQuery()[l.GROUPINGDOWN.getValue()]);let r=!1;for(const t of Array.from(e.getQuery()[l.GROUPINGDOWN.getValue()]))t.sortAggregate&&-1===e.getQuery()[l.MEASURES.getValue()].indexOf(t.sortAggregate)&&(t.sortAggregate=null,r=!0);r&&(this._oldGroupingsDown=t)}_getNewHighlightVal(e){if(null!=e)return JSON.parse(JSON.stringify(e))}_emulatorCreateColumnsHook(e,t,r){e.addColumns(t,r)}_emulatorDeleteColumnsHook(e,t){e.removeColumns(t)}_emulatorMoveColumnHook(e,t,r,i){e.moveColumn(t,r,i)}_emulatorUpdateColumnHook(e,t){e.updateColumn(t)}}},75412:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i=r(96486),s=r(99522),n=r(51548),o=r(3005),a=r(83784),l=r(64933),u=r(90249),d=r(62816),c=r(82957),h=r(2953);const{MEASURES:p}=a,g=l.ROW_COUNT;class m extends c.Z{constructor(e,t,r,i,s,n,o){super(),this._stepIds=e,this._action=t,this._newMeasures=r,this._column=i,this._isTogglingRowCount=s,this._oldChart=n,this._oldConditionalFormatting=o,this._parsingUtil=l.get()}mutate(e){return this._mutate(e.dashboardJson,new n.Z(e.dashboardJson))}_mutate(e,t){if(this._action!==h.q.UPDATE)return;const r=t;let i=null,s=null,n=null,o=null;for(const e of Array.from(this._stepIds)){const t=r.getLens(e);i=this._getMeasureColumns(t),s=h.q.UPDATE,t.getQuery()[p.getValue()]=this._getUpdatedMeasures(t),null!=this._oldChart?this._restoreChart(t,r,this._oldChart,d):n=this._getOldChartIfMeasureRemoved(t,r,d),null!=this._oldConditionalFormatting?this._replaceOldFormatting(t):o=this._cleanseFormattingAggregates(t)}return new m(this._stepIds,s,i,this._column,this._isTogglingRowCount,n,o)}_getUpdatedMeasures(e){if(this._isTogglingRowCount)return this._toggleRowCount(e);{let t=[];for(const r of Array.from(this._getMeasureColumns(e)))if(Array.from(this._newMeasures).includes(r))t.push(r);else{const i=this._parsingUtil.isAggregateForColumn(r,this._column),s=this._hasSameHistoricalBaseColumn(e,r);i||s||t.push(r)}t=(0,i.union)(t,this._newMeasures);const r=t.indexOf(g);return r>=0&&r<t.length-1&&(t.splice(r,1),t.push(g)),this._setEmptyMeasures(t,e)}}_toggleRowCount(e){const t=(0,i.clone)(this._getMeasureColumns(e));return(0,i.some)(t,this._parsingUtil.isRowCount)?(0,i.remove)(t,this._parsingUtil.isRowCount):this._addRowCounts(t,e),t}_getMeasureColumns(e){return e.getQuery()[p.getValue()]}_hasSameHistoricalBaseColumn(e,t){const r=u.ZP.getHistoricalTrackingMetadata(e.getJson().reportMetadata);if(r&&r.isHistoricalReport()){const e=this._parsingUtil.getAggregateColumnName(t),i=r.getBaseColumnInfo(e),s=r.getBaseColumnInfo(this._column);if(i&&s&&s.historicalColumn)return i.historicalColumn===s.historicalColumn;if(i&&i.isHistoricalChange)return i.baseField===this._column||i.historicalColumn===this._column;if(i&&i.historicalColumn)return i.historicalColumn===this._column}return!1}}s.mix(m,[o])},62017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var i=r(96486),s=r(51548),n=r(83784),o=r(11715),a=r(82957);const{SHOWDETAILS:l,SUBTOTALS:u,GRANDTOTAL:d,STACKED_SUMMARIES:c,HIGHLIGHT:h,GROUPINGDOWN:p,GROUPINGACROSS:g,CURRENCY:m,PRESENTATION_OPTIONS:_,FILTER:f,BLOCKS:y}=n;class b extends a.Z{constructor(e,t,r,i){super(),this._stepIds=e,this._toggledSettings=t,this._currency=r,this._highlight=i,this._removeHighlight=!1}mutate(e){return this._mutate(e.dashboardJson,new s.Z(e.dashboardJson))}_mutate(e,t){let r;for(const e of this._stepIds){const i=t.getLens(e);if(this._currency)r=this._getQueryVal(i,m.getValue()),i.getJson().query[m.getValue()]=this._currency;else if(this._toggledSettings){let e;this._toggledSettings.toggleShowDetails?(this._removeDetailHighlight(i),e=l.getValue(),this._removeSummaryFilter(i)):this._toggledSettings.toggleShowSubtotals?(this._removeSubtotalHighlight(i),e=u.getValue()):this._toggledSettings.toggleShowGrandTotal?(this._removeGrandTotalHighlight(i),e=d.getValue()):this._toggledSettings.toggleStackedSummaries&&this._togglePresentationOptionsValue(i,c),null!=e&&(i.getJson().query[e]=!this._getQueryVal(i,e),this._setSkipAPI(i,e))}}return new b(this._stepIds,this._toggledSettings,r,this._newHighlight)}_removeGrandTotalHighlight(e){null!=this._highlight?this._setHighlight(e,this._highlight):null!=this._getQueryVal(e,h.getValue())&&(i.isEmpty(this._getQueryVal(e,h.getValue()).groupingDownValues)||i.isEmpty(this._getQueryVal(e,h.getValue()).groupingAcrossValues))&&(this._newHighlight=this._getQueryVal(e,h.getValue()),this._setHighlight(e,void 0))}_removeSubtotalHighlight(e){if(null!=this._highlight)this._setHighlight(e,this._highlight);else{const t=this._getQueryVal(e,h.getValue());null!=t&&(!i.isEmpty(t.groupingDownValues)&&t.groupingDownValues.length<this._getQueryVal(e,p.getValue()).length||!i.isEmpty(t.groupingAcrossValues)&&t.groupingAcrossValues.length<this._getQueryVal(e,g.getValue()).length)&&(this._newHighlight=t,this._setHighlight(e,void 0))}}_removeDetailHighlight(e){null!=this._highlight||this._getQueryVal(e,l.getValue())||i.isEmpty(this._getQueryVal(e,g.getValue()))?null!=this._highlight?this._setHighlight(e,this._highlight):(this._newHighlight??=this._getQueryVal(e,h.getValue()),this._setHighlight(e,void 0)):this._setHighlight(e,{groupingDownValues:[],groupingAcrossValues:[]})}_removeSummaryFilter(e){const t=e.getQuery()[f.getValue()];t&&i.isEmpty(e.getQuery()[y.getValue()])&&(e.getQuery()[f.getValue()]=t.filter((e=>o.getEnumByName(e.type)!==o.SUMMARY)))}_getQueryVal(e,t){return e.getJson().query[t]}_setHighlight(e,t){e.getJson().query[h.getValue()]=t}_setSkipAPI(e,t){e.getJson().query.skipAPI=[u.getValue(),d.getValue(),c.getValue()].includes(t)}_togglePresentationOptionsValue(e,t){e.getJson().query[_.getValue()][t.getValue()]=!e.getJson().query[_.getValue()][t.getValue()]}}},29365:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(99689),s=r(43887);class n extends s.Z{constructor(e){super(i.Z.INLINE_EDIT_STATE,e)}}class o extends n{constructor(e,t){super(e),this._state=t}getState(){return this._state}}},44023:(e,t,r)=>{"use strict";r.d(t,{Z:()=>ie});var i=r(86968),s=r(86866),n=r(96486),o=r(50656),a=r(61506),l=r(90554),u=r(27994),d=r(7931),c=r(1026),h=r(94035),p=r(1611),g=r(44244),m=r(67883),_=r(49842),f=r(71805),y=r(64933),b=r(67746),C=r(83784),E=r(90249),S=r(29946),T=r(62519),I=r(30944);class v extends I{getMeasureLabel(e){return this._reportMetadata.getReportExtendedMetadata().getMeasureName(e)}}var R=r(90414),w=r(21922),A=r(59816),D=r(12698),L=r(44110),M=r(70999);const N=y.ROW_COUNT;class O extends M.Z{constructor(e,t,r){super(r),this._reportMetadata=new _(e),this._reportResult=t,this._reportTransformer=(0,L.Z)()}getReportMetadata(){return this._reportMetadata}getReportResult(){return this._reportResult}getTotalValue(e){return this._reportTransformer.getTotalValue(this._reportResult,e)}getTotalLabelAndValue(e){return this._reportTransformer.getTotalLabelAndValue(this._reportResult,e)}getRowCount(){const e=this._reportMetadata.getAggregates();for(let t=0;t<e.length;t++)if(e[t]===N&&this._reportResult.factMap)return this._reportResult.factMap["T!T"].aggregates[t].value;return null}hasError(){return null!=this._reportResult.error}isShowingAllData(){return this._reportResult.allData??!0}}var P=r(69985),x=r(8357),Z=r(44426),F=r(47333);class k extends F.Z{constructor(e,t,r,i){super(e,t,r),this._isPausableSubscriberPaused=i}isPausableSubscriberPaused(){return this._isPausableSubscriberPaused}}var B=r(59150),W=r(78453);const{REPORT_TYPE:G,BLOCKS:U,MEASURES:H,SCROLL_TO_COLUMN_INDEX:V,DETAILCOLUMNS:j,DRILL_FILTERS:q,CHART_FILTERS:z,LINKED_FILTERS:$,HIGHLIGHT:Q,SKIP_API:Y,PRESENTATION_OPTIONS:K,USE_CACHE:J,PREVIEW_REFRESHING:X,IS_PAUSABLE_SUBSCRIBER_PAUSED:ee}=C,{ROW_COUNT:te}=y;class re extends T{constructor(e,t,r,i,s,n,o,a,l){const u=[A.INTERACTION,A.RESULT_EMULATION];e===Z.CHART.getValue()&&u.push(A.SELECTION),super(e,t,r,i,s,n,o,u,a,l),this._lastReportResultsObj=null,this._reportResultUtil=null,this._parsingUtil=y.get(),this._isPausableSubscriberPaused=!1,this._hasNewEmulatedResultMesssage=!1}refresh(e){this._updatePausableSubscriberState(),super.refresh(e)}setEmulatedResultMessageFlag(){this._hasNewEmulatedResultMesssage=!0}sendEmulatedResultMessage(){this._hasNewEmulatedResultMesssage&&(this._sendResultMessage(this.getLastResult(),this._searchSubscriberId),this._hasNewEmulatedResultMesssage=!1)}_performQuery(e,t,r){let i,s,o;const a=null!=t?t.getQuery():void 0;this._cleanseGroupingAcross(a);const l=null!=t?t.getParameter("reportMetadata"):void 0;if(a&&l){const e=E.ZP.getHistoricalTrackingMetadata(l);if(null!=e?e.isHistoricalReport():void 0){let{detailColumns:t}=a;({reportFormat:i}=l.reportMetadata),0===(null!=a.groupingDownColumns?a.groupingDownColumns.length:void 0)&&0===(null!=a.groupingAcrossColumns?a.groupingAcrossColumns.length:void 0)?i="TABULAR":(null!=a.groupingDownColumns?a.groupingDownColumns.length:0)>0&&0===(null!=a.groupingAcrossColumns?a.groupingAcrossColumns.length:void 0)?i="SUMMARY":(null!=a.groupingDownColumns?a.groupingDownColumns.length:0)>0&&(null!=a.groupingAcrossColumns?a.groupingAcrossColumns.length:0)>0&&(i="MATRIX"),t=e.cleanseDetailColumns(t),"TABULAR"===i&&(t=e.reconstituteDetailColumns(t??[])),a.reportFormat=i,a.detailColumns=t}}if(this._previousTypeMetadata=this._getDefaultStep().getParameter("reportMetadata").reportTypeMetadata,this._clearAndGetShouldSkipAPI()&&this._lastReportResultsObj){const e=this._mixReportMetadata();if(this._isChartStep()){const t=this._lastReportResultsObj.reportMetadata.chart.summaries,r=e.chart.summaries;if(!(0,n.isEqual)(r,t)){const e=this._getReOrderedChartData(t,this._lastReportResultsObj.chartData,r);this._lastReportResultsObj.chartData=e}}this._lastReportResultsObj.reportMetadata=JSON.parse(JSON.stringify(e)),s=Promise.resolve(this._lastReportResultsObj),o=null}else{const e=this._clearAndGetShouldUseCache();o=this._getUpdateTypeMetadataPromise(),this._isExistingReport()?(i=m.getEnumByName(this._getReportMetadata().reportMetadata.reportFormat),s=this._runReport(e&&i!==m.MULTI_BLOCK)):s=this._queryReport(e)}const u=[s];return null!=o&&u.push(o),Promise.all(u).then(((...e)=>{const[t,r]=Array.from(e[0]),i=this._getReportMetadata();this._correctMetadataAggregates(t);const s=this._getTransactionEndName();s&&(this.getLensMetadata().getJson().transactionEndName=null,c.Z.transactionEnd(s,{reportId:this._getReportMetadata().reportMetadata.id})),this._cleanseReportChart(t),(0,B.Z)().flattenMultiBlockMetadata(t),r&&(t.reportTypeMetadata=r.reportTypeMetadata);const n=new O(i,t,this._generateLensUsingReportRunResult(t)),o=i.reportMetadata;if(this._isChartStep()&&o.chart.showChartTotal){const e=o.chart.summaries[0],t=n.getTotalValue(e);null!==t&&(this._metadataHolder.getMetadata().getWidget("chart").getParameters().total=t)}return n})).catch((e=>{const t=this._getReportMetadata();let r=e;const i=e.status||e.statusCode||(null!=e.response?e.response.status:void 0);i&&200!==i&&(r=e.responseJson,r.length>0&&(r=r[0]));const s={error:r,reportMetadata:t.reportMetadata,reportExtendedMetadata:t.reportExtendedMetadata};return new O(t,s,this._generateLensUsingReportRunResult(r))}))}_toBePausedOrSkipped(e){let t=!1;if(this._lastResult instanceof D.Z){const e=this._lastResult.getQueryResult();e instanceof O&&(t=e.hasError())}return this._isPreview()&&!S?.reportConfig?.isPreviewAutoRefresh&&this.hasLastResult()&&!e&&!t}_skipReportResult(){const e=this._clearAndPreviewRefresh();return this._toBePausedOrSkipped(e)}_runReport(e){const t=this._getReportMetadata();return o.Z.runReport(t.reportMetadata.id,this._mixReportMetadata(),this._isPreview(),this._isCreateReportInstance(),this._includeChartData(),this._getRequestOrigin(),this._skipReportResult(),this._isUpdateMru(),t.reportTypeMetadata.isDataCloud,this.getId(),e)}_queryReport(e){return o.Z.queryReport(this._mixReportMetadata(),this._isPreview(),this._includeChartData(),this._getRequestOrigin(),this._skipReportResult(),this.getId(),e)}_buildResultsMetadata(e,t,r){const i=r.getReportResult();return this._isChartStep()?this._generateResultMetadataForChart(i):this._generateResultMetadataForTable(i)}_buildResultsFormatter(e){let t;return t=this._isChartStep()?v:I,new t(new _(this._getReportMetadata()),this._reportResultUtil.getGroupingValueLabelsMappings(),this._getConditionalFormattingRules(),this._reportResultUtil.getGroupingValueColorsMappings())}_isExistingReport(){return null!=this._getReportMetadata().reportMetadata.id}_generateLensUsingReportRunResult(e){let t=e;if(Array.isArray(t)&&t.length>0&&(null!=t[0]?t[0].errorCode:void 0)&&(t=t[0]),this._isPreview()&&(t.errorCode||t.code)&&W.Z.getEnumByCode(t.specificErrorCode).shouldShowErrorModal())throw new Error(t.message);this._lastReportResultsObj=JSON.parse(JSON.stringify(t)),this._reportResultUtil=new R(this._formatReportResult(t),this._getPresentationOptions());const r=this._reportResultUtil.getErrorMessages();if(this._isPreview()&&r.length>0)throw new Error(r[0].message);return this._generateRows()}_formatReportResult(e){const t=JSON.parse(JSON.stringify(e)),{chartData:r}=t;if(this._includeChartData()&&null!=r){t.factMap=r.factMap,t.groupingsDown=r.groupingsDown,t.groupingsAcross=null;const e=(0,n.keyBy)(t.reportMetadata.groupingsDown,"name"),i=(0,n.keyBy)(t.reportMetadata.groupingsAcross,"name"),s=Array.from(t.reportMetadata.chart.groupings).map((t=>e[t]||i[t]));t.reportMetadata.groupingsDown=s,t.reportMetadata.groupingsAcross=[],t.reportMetadata.aggregates=t.reportMetadata.chart.summaries}return t}_getPresentationOptions(){return this.getLensMetadata().getQuery().presentationOptions||{}}setReportResult(e){this._reportResultUtil=e}_generateRows(){return this._isChartStep()?this._reportResultUtil.getChartRows():this._isDetailsTableStep()?this._reportResultUtil.getDetailsTableRows(this._getQuery()[Q.getValue()]):this._reportResultUtil.getTableRows()}_cleanseReportChart(e){null==e.reportMetadata.chart&&(e.reportMetadata.chart={})}_mixReportMetadata(){return w.get().mixReportMetadata(this.getLensMetadata(),!this._isPreview())}_getReportMetadata(){return this.getLensMetadata().getParameter("reportMetadata")}_getTransactionEndName(){return this.getLensMetadata().getParameter("transactionEndName")}_includeChartData(){return this._isChartStep()}_isPreview(){return this.getLensMetadata().getParameter("isPreview")}_isDefaultStep(e){return(e||this.getId())===Z.TABLE.getValue()}_isChartStep(){return this.getId()===Z.CHART.getValue()}_isDetailsTableStep(){return this.getId()===Z.DETAIL_TABLE.getValue()}_getDefaultStep(){return this._metadataHolder.getMetadata().getLens(Z.TABLE.getValue())}_isCreateReportInstance(){return this.getLensMetadata().getParameter("createReportInstance")}_isUpdateMru(){return this.getLensMetadata().getParameter("isUpdateMru")??!0}_getRequestOrigin(){return this.getLensMetadata().getParameter("requestOrigin")}_clearAndPreviewRefresh(){const e=this._getQuery()[X.getValue()];return this._getQuery()[X.getValue()]=!1,e}_clearAndGetShouldSkipAPI(){const e=this._getQuery().skipAPI;return this._getQuery().skipAPI=!1,e}_clearAndGetShouldUseCache(){const{useCache:e}=this._getQuery();return this._getQuery().useCache=!0,e}_getMeasures(){return this._getQuery()[H.getValue()]}_getDetailColumns(){return this._getQuery()[j.getValue()]}_getQuery(){return this.getLensMetadata().getQuery()}_getUpdateTypeMetadataPromise(){if(!this._lastReportResultsObj||!this._lastReportResultsObj.reportMetadata)return;const e=this._lastReportResultsObj.reportMetadata,t=this._getQuery(),r=t[U.getValue()],i=t[G.getValue()]?.type,s=this._getUniqueReportTypes(e.blocks,e.reportType.type),a=this._getUniqueReportTypes(r,i),l=e.reportFormat===m.MULTI_BLOCK.getCode(),u=!!r;return!u||!l&&u&&a.length<=1||s.length>=1&&a.length<=1||(0,n.isEqual)(s,a)?void 0:1===r.length?o.Z.getReportType(r[0].reportType.type).then((e=>this._convertTypeMetadataToJoinedTypeMetadata(e))):o.Z.getJoinedReportTypes(i,a)}_getUniqueReportTypes(e,t){return e?(0,n.uniq)((0,n.map)(e,"reportType.type")):t?[t]:[]}resetSelectionsToStartValues(){}_generateResultMetadataForChart(e){return this._createReportLensResultsMetadata(e,!1)}_generateResultMetadataForTable(e){return this._createReportLensResultsMetadata(e,!0)}_createReportLensResultsMetadata(e,t){let r;const i=[],s=[];t?this._getDimensionAndMeasureForTable(e,i,s,this._getMeasures()):this._getDimensionAndMeasureForChart(e,i,s,this._getMeasures()),this._updateReportMetadata(e);let n=this._getQuery()[Q.getValue()];const o=this._getQuery()[q.getValue()]||[];this._isDetailsTableStep()||(r=this._reportResultUtil.getTableColumns());const a=this._getQuery()[V.getValue()],l=this._getQuery()[z.getValue()],u=this._getQuery()[$.getValue()],d=new b.Z(l,u,this.getLensMetadata().getJson().numOfDynamicFiltersInAPI,!0);return e.hasExceededTabularRowLimit&&m.getEnumByValue(e.reportMetadata.reportFormat)===m.MATRIX&&(n=null),new h.Z(i,s,this._getReportMetadata(),!1,r??[],n,o,this._isPreview(),null!=e.attributes?e.attributes.reportInstanceId:"",a,e.picklistColors,e.hasExceededTabularRowLimit,e.error,d)}_getSortDirection(e){return g.Z.getEnumByName(e)}_addGroupingsDownColumns(e,t,r){let i;const{groupingsDown:s}=e.reportMetadata,{groupingsAcross:o}=e.reportMetadata;if((0,n.isEmpty)(s))return;const a=(()=>{const e=[];for(i of Array.from(o))e.push(this._getSortDirection(i.sortOrder));return e})(),l=[];for(let e=0;e<o.length;e++)l.push(null);for(let n=0;n<s.length;n++){i=s[n];const o=this._getSortDirection(i.sortOrder),u=n<s.length-1?l.concat(o):a.concat(o),d=e.reportExtendedMetadata.groupingColumnInfo[i.name]?.dataType,c=null!=d?this._getColumnType(d):p.Z.DIMENSION;t.push(c.of(i.name,i.name,u)),r.push(i.name)}}_addGroupingColumnsForStackedMatrix(e,t,r){let i;const{groupingsDown:s}=e.reportMetadata,{groupingsAcross:n}=e.reportMetadata,o=[];for(let e=0;e<n.length;e++)o.push(null);for(let n=0;n<s.length;n++){i=s[n];const a=o.concat(this._getSortDirection(i.sortOrder)),l=e.reportExtendedMetadata.groupingColumnInfo[i.name]?.dataType,u=null!=l?this._getColumnType(l):p.Z.DIMENSION;t.push(u.of(i.name,i.name,a)),r.push(i.name)}const a=n[0].name,l=[];for(i of Array.from(n))l.push(this._getSortDirection(i.sortOrder));t.push(p.Z.DIMENSION.of(a,a,l)),r.push(a)}_addMultiBlockColumns(e,t){const r=e.reportMetadata,i=e.reportExtendedMetadata;for(let s=0;s<r.blocks.length;s++){const n=r.blocks[s],{blockId:o}=n;this._addDetailColumns(r.aggregates,this._parsingUtil.addBlockPrefixToColumnNames(n.detailColumns,o),r.sortBy[s],i.detailColumnInfo,t,r.hasDetailRows,r.hasDetailRows?void 0:this._columnHasAggregates.bind(this),o),this._addFormulas(e,t,o)}}_addDetailColumns(e,t,r,i,s,n,o,a){const l=o??((e,t)=>!0),u=a??"",{sortColumn:d,sortOrder:c}=null!=r?r:{};for(const r of Array.from(t))if(l(r,e)){const t=r===d?this._getSortDirection(c):void 0;if(n){const e=null!=i[r]?i[r].dataType:void 0,n=null!=e?this._getColumnType(e):p.Z.DIMENSION;s.push(n.of(r,r,[t]))}else e.forEach((e=>{this._parsingUtil.isAggregateForColumn(e,r)&&s.push(p.Z.MEASURE.of(e))}))}const h=u?this._parsingUtil.getBlockRowCountName(u):te;!n&&e.indexOf(h)>-1&&s.push(p.Z.MEASURE.of(h))}_addFormulas(e,t,r){const i=r??"";for(const r of Array.from(e.reportMetadata.aggregates))!this._parsingUtil.isCsf(r)||i&&!this._parsingUtil.isColumnFromBlock(r,i)||t.push(p.Z.DIMENSION.of(r))}_columnHasAggregates(e,t){return(0,n.some)(t,(t=>this._parsingUtil.isAggregateForColumn(t,e)))}_addTableColumns(e){Array.from(this._reportResultUtil.getTableColumns()).forEach((t=>e.push(p.Z.DIMENSION.of(t.key))))}_getDimensionAndMeasureForChart(e,t,r,i){const s=e.reportMetadata.chart;if((0,n.isEmpty)(s))return;for(const e of Array.from(s.groupings))t.push(p.Z.DIMENSION.of(e)),r.push(e);const o={},a=s.summaries;for(const e of Array.from(a))o[e]=!0;for(const e in o)e===te?t.unshift(p.Z.MEASURE.of(e)):t.push(p.Z.MEASURE.of(e))}_getDimensionAndMeasureForTable(e,t,r,i){const s=m.getEnumByName(e.reportMetadata.reportFormat),{aggregates:n,detailColumns:o,sortBy:a,hasDetailRows:l}=e.reportMetadata,{detailColumnInfo:u}=e.reportExtendedMetadata;if(s===m.TABULAR||this._isDetailsTableStep())this._addDetailColumns(n,o,a[0],u,t,l);else if(s===m.SUMMARY){let i;this._addGroupingsDownColumns(e,t,r),e.reportMetadata.hasDetailRows||(i=this._columnHasAggregates.bind(this)),this._addDetailColumns(n,o,a[0],u,t,l,i),this._addFormulas(e,t)}else s===m.MATRIX?(this._getPresentationOptions().hasStackedSummaries?this._addGroupingColumnsForStackedMatrix(e,t,r):this._addGroupingsDownColumns(e,t,r),this._addTableColumns(t)):s===m.MULTI_BLOCK&&(this._addGroupingsDownColumns(e,t,r),this._addMultiBlockColumns(e,t))}_updateReportMetadata(e){const t=this._getReportMetadata();t.reportMetadata=e.reportMetadata,t.reportExtendedMetadata=e.reportExtendedMetadata,e.reportTypeMetadata&&(t.reportTypeMetadata=e.reportTypeMetadata),this._updateReportTypeMetadata(e),(0,B.Z)().flattenMultiBlockMetadata(t),null==this._executeCorrectQuery&&(this._executeCorrectQuery=(0,n.once)(this._correctQuery.bind(this))),this._executeCorrectQuery()}_updateReportTypeMetadata(e){if(!this._previousTypeMetadata)return;const t=this._getReportMetadata(),r=e.reportMetadata.reportFormat,i=!!this._previousTypeMetadata.reportTypes,s=r===m.MULTI_BLOCK.getCode(),o=e.reportMetadata.reportType;!s&&i?(t.reportTypeMetadata=this._previousTypeMetadata.reportTypes[o.type],t.reportTypeMetadata.supportsJoinedFormat=!0,this._onReportFormatChange(e)):s&&this._getUniqueReportTypes(e.reportMetadata.blocks,o.type).length<=1&&(i?(0,n.size)(t.reportTypeMetadata.reportTypes)>1&&(t.reportTypeMetadata={reportTypes:(0,n.pick)(this._previousTypeMetadata.reportTypes,o.type),columnAliasMap:{},commonCategories:[],supportsJoinedFormat:!0}):(this._convertTypeMetadataToJoinedTypeMetadata(t),this._onReportFormatChange(e)))}_convertTypeMetadataToJoinedTypeMetadata(e){const t={reportTypes:{},columnAliasMap:{},commonCategories:[],supportsJoinedFormat:!0},{reportType:r}=e.reportMetadata;return t.reportTypes[r.type]=e.reportTypeMetadata,t.reportTypes[r.type].label=r.label,e.reportTypeMetadata=t,e}_onReportFormatChange(e){this._isDefaultStep()&&a.Z.get(d).setBooleanFilter(null)}_correctQuery(){const e=[Y.getValue(),J.getValue(),K.getValue()],t=this._getQuery()[$.getValue()];(t?.length??0)>0&&e.push("reportBooleanFilter");const r=new b.Z(this._getQuery()[z.getValue()],t,this.getLensMetadata().getJson().numOfDynamicFiltersInAPI),i=new _(this._getReportMetadata(),r).getQuery();for(const t of Object.keys(i))e.includes(t)||(this._getQuery()[t]=i[t])}_getColumnType(e){return f.getEnumByCode(e).getMetadataColumnType()}onSelection(e,t){if(t===P.Z.INITIAL)this.refresh();else if(t===P.Z.USER){const r=this._lastResult.getMetadata(),i=e?.select(this._lastResult.getData(),r,this.getLensMetadata().getSelectMode());this._executeMutators([new x.Z(i,this._reportResultUtil,new _(this._getReportMetadata()),this._onChartFilterError)],{undoEnabled:!1}),super.onSelection(e,t)}}_shouldFireInitialSelection(e,t,r){return(this.shouldFireInitialSelection()||e&&null!=this.initialExternalSelection)&&(this._isValidResult(r)&&e||this.getLensMetadata().getSelectMode().isRequired()&&this._isLastSelectionInvalid(t,r))}_fireDefaultSelections(){this._getQuery()[X.getValue()]=!0,this.onSelection(null,P.Z.INITIAL)}_onChartFilterError(e){a.Z.get(u).showToastMessage(e)}_getReOrderedChartData(e,t,r){const i=r.map((t=>e.indexOf(t))),s=(0,l.deepExtend)({},t);return s.factMap=(0,l.mapObject)(s.factMap,(e=>({aggregates:i.map((t=>e.aggregates[t]))}))),s}_correctMetadataAggregates(e){const t=e.reportMetadata.aggregates;(0,n.isEqual)((0,n.sortBy)(this._getQuery()[H.getValue()]),(0,n.sortBy)(t))&&(this._getQuery()[H.getValue()]=t,this._getReportMetadata().reportMetadata.aggregates=t)}isPausableSubscriberPaused(){return this._isPausableSubscriberPaused}_setPausableSubscriberPaused(e){this._isPausableSubscriberPaused=e}_createStatusChangeMessage(e){return new k(this.getId(),this._status,e,this.isPausableSubscriberPaused())}_updatePausableSubscriberState(){const e=this._toBePausedOrSkipped(this._getQuery()[X.getValue()]);this._setPausableSubscriberPaused(e)}_sendResultMessage(e,t){this._getQuery()[ee.getValue()]=this.isPausableSubscriberPaused(),super._sendResultMessage(e,t)}_cleanseGroupingAcross(e){e?.groupingAcrossColumns&&(e.groupingAcrossColumns=this._uniqueByKeepFirst(e.groupingAcrossColumns,(e=>e.name)))}_uniqueByKeepFirst(e,t){const r=new Set;return e.filter((e=>{const i=t(e);return!r.has(i)&&(r.add(i),!0)}))}}class ie extends i.Z{constructor(){super(new Map([[s.Z.REPORT,re]]))}}},10455:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(35944);class n{static getCommonFieldMappingContentForFieldsPanel(e){return(0,s.BX)("div",{children:[i.Z.getLabel("reportBuilder","commonFieldMappingFieldsPanelInfo"),(0,s.tZ)("br",{}),(0,s.tZ)("br",{}),this._buildMappings(e,"commonFieldMappingThisField","fields-panel-tooltip-line-")]})}static getCommonFieldMappingContentForGroupingOutline(e){return(0,s.BX)("div",{children:[i.Z.getLabel("reportBuilder","commonFieldMappingGroupingPanelInfo"),(0,s.tZ)("br",{}),(0,s.tZ)("br",{}),this._buildMappings(e,"commonFieldMapping","grouping-panel-tooltip-line-")]})}static _buildMappings(e,t,r){const n=[],o=i.Z.getLabel("reportBuilder",t,e.reportTypeLabel,e.label);let a=0;n.push((0,s.tZ)("div",{children:o},r+a++));for(const t in e.equivalentFields)if(t&&Object.prototype.hasOwnProperty.call(e.equivalentFields,t)){const o=e.equivalentFields[t].reportTypeLabel,l=e.equivalentFields[t].label,u=i.Z.getLabel("reportBuilder","commonFieldMapping",o,l);n.push((0,s.tZ)("div",{children:u},r+a++))}return n}}},57999:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var i=r(96486),s=r(50656),n=r(61506),o=r(27994),a=r(8429),l=r(90554),u=r(1026),d=r(17599),c=r(32350),h=r(29946),p=r(67746),g=r(17636),m=r(21922),_=r(82957);const f=["state","datasets"];class y extends _.Z{constructor(e){super(),this._json=e}mutate(e){for(const t of Object.keys(e.dashboardJson))f.includes(t)||delete e.dashboardJson[t];Object.assign(e.dashboardJson,(0,i.omit)(this._json,f))}}var b=r(78453),C=r(27702),E=r(63687),S=r(8533),T=r(59150);class I{static APP_CLASS={FILTER_OPEN:"filter-open",CHATTER_OPEN:"chatter-open",INLINE_EDIT_ENABLED:"inline-edit-enabled",CHART_OPEN:"chart-open"};static EVENT={RESIZE:"resize",FILTER_PANEL_OPENED:"filterPanelOpened"};static fieldsToOmit=["chart","linkedFilters","skipAPI","useCache","chartFilters","highlight","isPausableSubscriberPaused","previewRefreshing"];static filterFieldsToOmit=["canBeLocked","isNew"];static onSaveReport({metadata:e,reportName:t,reportUniqueName:r,reportDescription:l,folderId:h,isSaveAs:_,onError:f,closeModal:I,executeMutators:v,navigateCallback:R,shouldRunReportAfterSave:w}={}){const A=m.get().mixReportMetadata(this.getLensMetadata(e),!1,!1);n.Z.get(o).showSpinner(),t&&(A.name=t),r&&(A.developerName=r),"string"==typeof l&&(A.description=l),h&&(A.folderId=h),w&&u.Z.transactionStart(d.Z.SAVE_AND_RUN_REPORT.getValue(),null,A.id),u.Z.transactionStart(d.Z.SAVE_REPORT.getValue(),null,A.id);const D=A.id||null;let L;_&&(A.id=null),A.supportsRoleHierarchy&&(A.saveRoleHierarchy=!0),s.Z.saveReport(A.id,A).then((e=>(L=e,s.Z.getReportActions(A.id,!1)))).then((t=>{this.showNotification(a.Z.getLabel("reportBuilder","reportSaveSuccess",A.name)),I();const r=i.map(t,"ApiName");(0,T.Z)().flattenMultiBlockMetadata(L),this.updateLensReportMetadata(e,L),v&&v([new y(new C.Z(this.getLensReportMetadata(e),r,this.getReportMode(e),null,new p.Z(this.getLensMetadata(e).getQuery().chartFiltes,this.getLensMetadata(e).getQuery().linkedFilters,0,!1)).build().getJson())],{undoEnabled:!1}),c.trigger("reportBuilder:updateActions",r),u.Z.transactionEnd(d.Z.SAVE_REPORT.getValue(),{reportId:L.reportMetadata.id}),n.Z.get(o).hideSpinner()})).then((()=>{A.id||(A.reportType&&S.Z.touchLastSavedColumnWidths(D,A.reportType.type),n.Z.get(o).updateRecordId(this.getLensReportMetadata(e).reportMetadata.id))})).then((()=>{R&&(this.unregisterHandlers(),R())})).catch((t=>{const r=t.responseJson&&t.responseJson[0]||t,i=r.specificErrorCode,s=b.Z.getEnumByCode(i);if(s.shouldShowToastMessage())this.showNotification(r.message),I();else if(s.shouldRedirectToRunPage()){if(I(),this.getReportMode(e)===g.EDIT){const e=n.Z.get(o);A.id&&e.isInAuraContext()?e.navigateToReportRun(A.id,A,!0):v&&v([new E.Z(!1,d.Z.SAVE_REPORT.getValue())],{undoEnabled:!1})}}else f&&f(t);n.Z.get(o).hideSpinner(),w&&u.Z.transactionEnd(d.Z.SAVE_AND_RUN_REPORT.getValue(),{reportId:A.id}),u.Z.transactionEnd(d.Z.SAVE_REPORT.getValue(),{reportId:A.id})}))}static getLensMetadata(e){return e.getLens("defaultReportStep")}static getLensReportMetadata(e){return this.getLensMetadata(e).getParameter("reportMetadata")}static getLensOriginalReportMetadata(e){return this.getLensMetadata(e).getParameter("originalMetadata")}static showNotification(e){n.Z.get(o).showToastMessage(e)}static getReportActions(e){return this.getLensMetadata(e).getParameter("reportActions")}static getReportMode(e){return this.getLensMetadata(e).getParameter("isPreview")?g.EDIT:g.VIEW}static updateLensReportMetadata(e,t){const r=this.getLensReportMetadata(e);r.reportMetadata=t.reportMetadata,r.reportExtendedMetadata=t.reportExtendedMetadata;const i=this.getLensOriginalReportMetadata(e);i.reportMetadata=(0,l.deepCopy)(t.reportMetadata),i.reportExtendedMetadata=(0,l.deepCopy)(t.reportExtendedMetadata),t.reportTypeMetadata&&(r.reportTypeMetadata=t.reportTypeMetadata,i.reportTypeMetadata=(0,l.deepCopy)(t.reportTypeMetadata))}static unregisterHandlers(){n.Z.get(o).removeCallback(null,"navigateAway"),h.core.auraApp&&n.Z.get(o).removeBeforeUnload(null,"navigateAway"),n.Z.get(o).unregisterBeforeFunctions()}static navigateBack(e){n.Z.get(o).navigateBack(e)}static isMetadataEqualToOriginal(e,t){const r=this.filterMetadataFields(e),s=this.filterMetadataFields(t);return i.isEqual(r,s)}static filterMetadataFields(e){const t=i.omit((0,l.deepCopy)(e),this.fieldsToOmit);return Array.isArray(t.filters)&&(t.filters=t.filters.map((e=>{const t=i.omit(e,this.filterFieldsToOmit);return t.filter&&i.isEmpty(t.filter.operator)&&delete t.filter.operator,t.filter&&i.isEmpty(t.filter.startDate)&&delete t.filter.startDate,t.filter&&i.isEmpty(t.filter.endDate)&&delete t.filter.endDate,t}))),Array.isArray(t.dataCategoryFilters)&&i.isEmpty(t.dataCategoryFilters)&&delete t.dataCategoryFilters,(0,l.deleteNullValues)(t,!0)}static toggleAppClass(e,t,r){let i,s=[];if(s=document.querySelectorAll(".reportBuilder"),0===s.length)return;let n="toggle";!0===t?n="add":!1===t&&(n="remove"),1===s.length?(i=s[0].classList,i[n](e),r&&this.dispatchSyntheticEvent(I.EVENT.RESIZE,400)):s.forEach((t=>{t.offsetParent&&(i=t.classList,i[n](e),r&&this.dispatchSyntheticEvent(I.EVENT.RESIZE,400))}))}static hasAppClass(e){const t=document.querySelector(".reportBuilder");if(!t)return!1;const r=t.classList;return!!r&&r.contains(e)}static handleFilterPanelFocusTransfer(){const e=document.querySelector(".reportBuilder");if(!e)return;e.classList.contains(I.APP_CLASS.FILTER_OPEN)&&this.dispatchSyntheticEvent(I.EVENT.FILTER_PANEL_OPENED)}static dispatchSyntheticEvent(e,t){setTimeout((()=>{let t;"function"==typeof Event?t=new Event(e):(t=document.createEvent("UIEvents"),t.initUIEvent(e,!0,!1,window,0)),window.dispatchEvent(t)}),t||0)}static isAppClassSet(e){const t=document.querySelector(".reportBuilder");return!!t&&t.classList.contains(e)}static openSearchBox(){this.dispatchSyntheticEvent("openSearchBox")}static closeSearchBox(){this.dispatchSyntheticEvent("closeSearchBox")}static getTargetIdsFromQueryResult(e,t){const r=[],i=[],s=[];if(t?.length){let n;for(n of t){let t;for(t of e)if(n[t]){const e=n[t].id,o=e?e.substring(0,3):null;o&&("00Q"!==o||r.includes(e)||r.push(e),"003"!==o||i.includes(e)||i.push(e),"001"!==o||s.includes(e)||s.push(e))}}}return r.length>0?r:i.length>0?i:s}}},62325:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(91942),s=r(31436),n=r(78453);class o extends i.Z{constructor(e){super(e),this._commandErrorHistoryStack=new s.Z(e+1),this._commandErrorHistoryStack.push(!1),this._redoErrorHistoryStack=new s.Z,this._hasNoData=!1}executeCommand(e,t=!0){t&&this._commandErrorHistoryStack.push(!1),super.executeCommand(e,t)}saveErrorToHistory(e=n.Z.GENERIC_ERROR){0!==this._commandErrorHistoryStack.size()&&(this._commandErrorHistoryStack.pop(),this._commandErrorHistoryStack.push(e))}saveNoResult(e){this._hasNoData=e}hasNoResult(){return this._hasNoData}undo(){if(0===this._commandStack.size())return;let e,t,r=!1;do{e=this._commandErrorHistoryStack.pop(),t=r||!e,t&&(this._redoErrorHistoryStack.push(e),r||(r=!0)),super.undo(t)}while(this._commandStack.size()>0&&this.peekCommandErrorHistory())}redo(){if(0===this._redoStack.size()||0===this._redoErrorHistoryStack.size())return;let e;do{e=this._redoErrorHistoryStack.pop(),this._commandErrorHistoryStack.push(e),super.redo()}while(e&&this._redoStack.size()>0&&this._redoErrorHistoryStack.size()>0)}peekCommandErrorHistory(){return this._commandErrorHistoryStack.peek(1)[0]}canBeUndone(){if(0===this._commandErrorHistoryStack.size())return!1;return-1!==this._commandErrorHistoryStack.peek(this._commandErrorHistoryStack.size()).slice(1).indexOf(!1)}}},8504:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(8429),n=r(67883),o=r(15523);class a{static getOuterMostGrouping(e){return e.reportFormat===n.SUMMARY.getValue()||e.reportFormat===n.MATRIX.getValue()?e.groupingsDown&&e.groupingsDown[0]:null}static getOuterMostGroupingColumn(e,t){const r=this.getOuterMostGrouping(e);return null==r?null:this.getColumnFromGroupingId(r.name,t)}static getColumnFromGroupingId(e,t){if(null===e)return null;let r=null;return t.categories.some((t=>(r=t.columns[e],r))),r}static convertDrillToReportFilter(e,t,r){if("html"===e.dataType||"url"===e.dataType||"time"===e.dataType)return r.value||"";const i=null===r.value;if("picklist"===e.dataType){return Array.isArray(r.value)&&0===r.value.length||i?"":'"'+r.value+'"'}return i?"":'"'+r.label+'"'}static getCustomFilterCount(e){return e.filter((function(e){return"CUSTOM"===e.type})).length||0}static createCustomFilter(e,t,r,i){return{canBeLocked:!0,columnName:t.label,filter:{column:e.name,isRunPageEditable:!0,operator:i,value:r},isDeletable:!0,isNew:!0,operator:i,type:"CUSTOM",value:r}}static isDrillFilterExclusive(e){return"boolean"===e.dataType||"time"===e.dataType}static findDrillFilterIndex(e,t){let r=-1;if("object"==typeof e&&null!==e){const i=Object.keys(e);(t||[]).some((function(t,s){let n="object"==typeof t.value&&Object.keys(t.value);n=n||[];return!(n.length!==i.length||!n.every((function(r){return e[r]===t.value[r]})))&&(r=s,!0)}))}else if(Array.isArray(e)){const i=e.reduce((function(e,t){return e[t]=!0,e}),{});(t||[]).some((function(t,s){const n=Array.isArray(t.value)?t.value:[t.value];return!(n.length!==e.length||!n.every((function(e){return i[e]})))&&(r=s,!0)}))}else(t||[]).some((function(t,i){return t.value===e&&(r=i,!0)}));return r}static getDrillMutatorValues(e,t,r,n,a){const l=this.getOuterMostGrouping(e),u=this.getColumnFromGroupingId(l.name,t),d={groupingsDown:e.groupingsDown,detailColumns:e.detailColumns,aggregates:e.aggregates,sortBy:e.sortBy,filters:r.filters,reportBooleanFilter:r.reportBooleanFilter,drillError:""};if(n&&n!==l.name){d.groupingsDown=[...e.groupingsDown],d.groupingsDown[0]={dateGranularity:"None",name:n,sortAggregate:null,sortOrder:"Asc"};let t=-1;e.aggregates.some((function(e,r){const i=e.split("!");return!(!i||!i.length||i[1]!==n)&&(t=r,!0)})),t>=0&&(d.aggregates=e.aggregates.filter((function(e){const t=e.split("!");return t.length<2||t[1]!==n})));const r=e.detailColumns.indexOf(n);r>=0&&(d.detailColumns=e.detailColumns.slice(),d.detailColumns.splice(r,1));let i=-1;e.sortBy.some((function(e,t){return!!(e.sortColumn=n)&&(i=t,!0)})),i>=0&&(d.sortBy=e.sortBy.slice(),d.sortBy.splice(i,1))}let c;const h=("date"===u.dataType||"datetime"===u.dataType)&&l.dateGranularity&&"Day"!==l.dateGranularity&&"None"!==l.dateGranularity;if(i.isEmpty(a)||h){if(!i.isEmpty(a)&&h){const t=o.Z.getEnumByCode(l.dateGranularity);if(t){const i=a.map((e=>t.createDateRangeFilters("",e.value)));c=this.getCustomFilterCount(r.filters);const s=i.map(((e,t)=>"("+(1+c+2*t)+" AND "+(2+c+2*t)+")")).join(" OR ");if(e.reportBooleanFilter)d.reportBooleanFilter="("+e.reportBooleanFilter+") AND ("+s+")";else if(e.reportFilters&&e.reportFilters.length){const t=e.reportFilters.map(((e,t)=>t+1)).join(" AND ");d.reportBooleanFilter="("+t+") AND ("+s+")"}else d.reportBooleanFilter=s;d.filters=[...r.filters],i.forEach((e=>{const t=this.createCustomFilter(l,u,e[0].chartSelectionValue,e[0].operator),r=this.createCustomFilter(l,u,e[1].chartSelectionValue,e[1].operator);d.filters.push(t),d.filters.push(r)}))}else d.drillError=s.Z.getLabel("reportBuilder","drillNotFilterable")}}else{const e=a.map((e=>this.convertDrillToReportFilter(u,l,e))).join(",");r.reportBooleanFilter&&(c=this.getCustomFilterCount(r.filters),d.reportBooleanFilter="("+r.reportBooleanFilter+") AND "+(c+1));const t=this.createCustomFilter(l,u,e,"equals");d.filters=[...r.filters],d.filters.push(t)}return d}}},80023:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static getMessage(e){let t="";return e.responseJson&&e.responseJson.message?t=e.responseJson.message:e.responseJson&&e.responseJson[0]?t=e.responseJson[0].message:e.message?t=e.message:e.error&&(t=e.error.message),t||""}}},28713:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(8429),n=r(64933),o=r(62816);class a{static BLOCK_NAME_MAX_LENGTH=40;static isTheOnlyBlockOfItsType(e,t){const r=e.getBlocks();return 1===i.filter(r,(e=>e.getReportType()===r[t].getReportType())).length}static getPrincipalTypeAfterBlockDeletion(e,t){const r=e.getReportTypeObject();let i=r;const s=e.getBlocks(),n=s[t];return s.length>1&&r.type===n.getReportType()&&a.isTheOnlyBlockOfItsType(e,t)&&(i=s[0===t?1:0].getReportTypeObject()),i}static updateGroupingsWithNewReportType(e,t,r,i){const s=e.getReportType();if(t!==s){const n=e.getReportTypeMetadata();for(let e=0;e<r.length;e++){const i=r[e],o=n.retrieveColumnInfo(i.name,s);i.name=o.equivalentFields[t].name}if(i&&i.groupings)for(let e=0;e<i.groupings.length;e++){const r=n.retrieveColumnInfo(i.groupings[e],s);i.groupings[e]=r.equivalentFields[t].name}}}static dropIncompatibleGroupings(e,t,r,s,l,u,d){const c=n.get(),h=e.getReportTypeMetadata(),p=t.getReportTypeMetadata(),g=e.getReportType();let m=[];p.getOrderedReportTypes().length>1&&(m=i.remove(s,(e=>{let t=e.name;if(r!==g){t=h.retrieveColumnInfo(e.name,g).equivalentFields[r].name}return!p.retrieveColumnInfo(t,r).isCommon}))),a.updateGroupingsWithNewReportType(e,r,s,u),i.isEmpty(s)&&(i.remove(l,(e=>c.isCsf(e))),i.isEmpty(u)||o.get().updateChartSummaries(u,l)),a.cleanseFormulas(d,s,m),i.isEmpty(u)||(i.isEmpty(s)?Object.keys(u).forEach((e=>delete u[e])):o.get().updateChartGroupings(u,s))}static cleanseFormulas(e,t,r,s){const o=n.get(),a=i.map(t,"name"),l=i.map(r,"name");for(const t of Object.keys(e)){const r=e[t],i=o.isCsfValidAtAllLevels(r);if(o.isCsfReferencingColumns(r,l)||r.acrossGroup&&!i)delete e[t];else{if(r.downGroup&&-1===a.indexOf(r.downGroup)){if(!i){delete e[t];continue}r.downGroup=null,r.downGroupType="all"}r.acrossGroup=null,r.acrossGroupType="all",s&&(r.reportType=s)}}}static makeBlockLabel(e,t){const r=e.replace(/[[\]]/g,"_");let i=s.Z.getLabel("reportBuilder","defaultBlockName",r,t);if(i.length>this.BLOCK_NAME_MAX_LENGTH){const e=i.length-this.BLOCK_NAME_MAX_LENGTH;i=s.Z.getLabel("reportBuilder","defaultBlockName",r.substring(0,r.length-e).trim(),t)}return i}}},24127:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Xt});var i=r(12205),s=r(21891),n=r(17636),o=r(50003),a=r(41094),l=r(96486),u=r.n(l),d=r(72555),c=r.n(d),h=r(64587),p=r(84198),g=r(41553),m=r(86441),_=r(8429),f=r(50656),y=r(47134),b=r.n(y),C=r(27994),E=r.n(C),S=r(61506),T=r(29946),I=r.n(T),v=r(64933),R=r.n(v),w=r(49842),A=r.n(w),D=r(67883),L=r.n(D),M=r(16582),N=r(44426),O=r(66043),P=r.n(O),x=r(62017),Z=r(2953),F=r(75412),k=r(76734);class B{static getColumnsFromReportMetadata(e,t){const r=e.getReportExtendedMetadata();return e.getAggregates().filter((t=>!v.get().isRowCount(t)||e.getGroupingAcrossColumns().length>0)).map((e=>{const i=r.getAggregateColumnInfo(e),s=!t.includes(e);return new B(e,i.label,s)}))}constructor(e,t,r){this.id=e,this.label=t,this.enabled=r}getId(){return this.id}getLabel(){return this.label}isEnabled(){return this.enabled}}var W=r(72831);class G extends W.Z{constructor(e,t,r,i,s){super(e,t,r,i),this.color=s}flatten(e){const t=l.extend({},super.flatten(e));return t.color=this.color,t}getColor(){return this.color}setColor(e){this.color=e}}var U=r(95333);class H extends k.Z{static getDefaultInstance(e){let t=e[0];return e.some((e=>(t=e,e.isEnabled()))),new H(t,[new G(null,null,!0,!1,U.Z.FIRST_RANGE_COLOR),new G(null,null,!1,!1,U.Z.SECOND_RANGE_COLOR),new G(null,null,!1,!0,U.Z.THIRD_RANGE_COLOR)])}static parse(e,t){const r=new B(e.column,t.getReportExtendedMetadata().getAggregateColumnInfo(e.column).label,!1),i=[];let s=null;const n=e.values.length;for(let t=0;t<n;t++){const r=e.values[t].rangeUpperBound;i.push(new G(s,r,0===t,t===n-1&&"number"!=typeof r,e.values[t].backgroundColor||null)),s=r}return"number"==typeof s&&i.push(new G(s,null,!1,!0,null)),new H(r,i)}constructor(e,t){super(t,3),this.setColumn(e)}setColumn(e){this._column=e}getColumn(){return this._column}getLabel(){return this._column.getLabel()}getId(){return this._column.getId()}getBounds(){return this.getRanges().map((e=>e.getHigherBound())).filter((e=>!!e))}getColors(){return this.getRanges().map((e=>e.getColor()))}getNextAvailableDefaultColor(){const e=[U.Z.FIRST_RANGE_COLOR,U.Z.SECOND_RANGE_COLOR,U.Z.THIRD_RANGE_COLOR].filter((e=>!this.getColors().includes(e)));return 0===e.length?U.Z.FIRST_RANGE_COLOR:e[0]}_createDefaultRange(e){return new G(this.getRanges()[e].getHigherBound(),null,!1,!1,this.getNextAvailableDefaultColor())}updateColor(e,t){this.getRanges()[e].setColor(t)}equals(e){return e&&this.getId()===e.getId()}toJson(){const e=[],t=this.getRanges();for(const r of t)e.push({rangeUpperBound:null===r.getHigherBound()?null:parseFloat(r.getHigherBound()),backgroundColor:r.getColor()});return{column:this.getId(),values:e}}clone(e){const t=H.parse(this.toJson(),e);return t.getColumn().enabled=this.getColumn().enabled,t}}class V{_ruleList=[];static parse(e,t){const r=[];return l.forEach(e,(e=>{r.push(H.parse(e,t))})),new V(r)}constructor(e){Array.prototype.push.apply(this._ruleList,e)}isEmpty(){return 0===this._ruleList.length}getItems(){return this._ruleList}addRule(e){const t=l.findIndex(this._ruleList,(t=>e.equals(t)));-1===t?this._ruleList.push(e):this._ruleList[t]=e}replaceRule(e,t){const r=l.findIndex(this._ruleList,(t=>t.getId()===e));r>-1&&(this._ruleList[r]=t)}removeRule(e){this._ruleList.splice(e,1)}getRule(e){return this._ruleList[e]}isIncompatible(){return this._ruleList.length>3}hasMaximumRules(){return 5===this._ruleList.length}getWarningMessage(){return this.hasMaximumRules()?_.Z.getLabel("reportBuilder","conditionalFormattingMaxRulesReached",5):this.isIncompatible()?_.Z.getLabel("reportBuilder","conditionalFormattingIncompatibilityWarning",3):""}toJson(){const e=[];for(let t=0;t<this._ruleList.length;t++){const r=this._ruleList[t];e.push(r.toJson())}return e}}var j=r(67294),q=r(66650),z=r(50130),$=r(8666),Q=r.n($),Y=r(22766);class K{constructor(e,t){this.assistiveText=e,this.id=t,this.icon=t}getAssistiveText(){return this.assistiveText}getId(){return this.id}getIcon(){return this.icon}}var J=r(35944);class X extends j.PureComponent{render(){return(0,J.tZ)(p.Z,{iconClassName:"slds-icon-text-default",assistiveText:{icon:this.props.action.getAssistiveText()},iconName:this.props.action.getIcon(),iconCategory:"utility",iconVariant:"border-filled",buttonVariant:"icon",colorVariant:"base",onClick:this.props.onClick,iconSize:"x-small",tabIndex:"0"})}}r(57206);class ee extends j.PureComponent{_renderActions(e){return this.props.actions.map(((t,r)=>{const i=`item-${e}-action-${r}`,s=this.props.onAction.bind(null,t,e);return(0,J.tZ)("span",{className:"item-with-action-list-item-action",children:(0,J.tZ)(X,{action:t,onClick:s})},i)}))}_renderListItems(){return this.props.items.map(((e,t)=>(0,J.BX)("li",{className:"item-with-action-list-item",children:[(0,J.tZ)("div",{className:"item-with-action-list-item-component",children:e}),(0,J.tZ)("div",{className:"item-with-action-list-item-actions",children:this._renderActions(t)})]},`list-item-${t}`)))}render(){return(0,J.tZ)("ul",{className:"item-with-action-list",children:this._renderListItems()})}}var te=r(97589),re=r.n(te);class ie extends j.Component{render(){const e=this.props.rule,t=e.getColors().map(((e,t)=>{let r,i;return e&&"#FFFFFF"!==e.toUpperCase()?(r={backgroundColor:e},i=""):(r={},i="report-cf-color-item-transparent"),(0,J.tZ)("div",{style:r,className:`report-cf-color-item ${i}`},`color-${t}`)})),r=e.getBounds().map((e=>S.Z.get(re()).formatNumber(e))).join(" | ");return(0,J.BX)("div",{className:"report-cf-list-item",children:[(0,J.tZ)("div",{className:"report-cf-color-list",children:t}),(0,J.BX)("div",{className:"report-cf-rule-label-container",children:[(0,J.tZ)("span",{className:"report-cf-rule-label",children:e.getLabel()}),(0,J.tZ)("br",{}),(0,J.tZ)("span",{className:"report-cf-rule-bounds",children:r})]})]})}}class se extends j.Component{_handleAction=(e,t)=>{this.props.onAction(e,t)};render(){const e=[new K(_.Z.getLabel("reportBuilder","conditionalFormattingEditRuleAction"),"edit"),new K(_.Z.getLabel("reportBuilder","conditionalFormattingDeleteRuleAction"),"delete")],t=this.props.list.getItems().map((e=>(0,J.tZ)(ie,{rule:e},e.getId())));return(0,J.tZ)(ee,{items:t,actions:e,onAction:this._handleAction})}}var ne=r(53227),oe=r(76126),ae=r(49720),le=r(39583),ue=r(66768),de=r(1190);class ce extends j.Component{static displayName=ue.Z.displayName;static defaultProps={onInputChange:e=>{}};handleInputChange=(e,{color:t})=>{this.props.onInputChange(this.props.item.id,e,t)};getLabel(e){return _.Z.getLabel("reportBuilder",e)}render(){const e=`report-cf-color-picker-${this.props.item.id}`,{children:t,...r}=this.props;return(0,J.tZ)(ue.Z,{...r,children:(0,J.tZ)(de.Z,{classNameMenu:"slds-color-picker report-cf-color-picker-popover",events:{onChange:this.handleInputChange},hideInput:!0,id:e,menuPosition:"overflowBoundaryElement",swatchColors:U.Z.COLOR_PALETTE,value:this.props.item.color,valueWorking:this.props.item.color,labels:{blueAbbreviated:this.getLabel("colorPickerBlueAbbreviated"),cancelButton:this.getLabel("cancel"),customTab:this.getLabel("colorPickerCustomTab"),customTabActiveWorkingColorSwatch:this.getLabel("colorPickerCustomTabActiveWorkingColorSwatch"),customTabTransparentSwatch:this.getLabel("colorPickerTransparentSwatch"),greenAbbreviated:this.getLabel("colorPickerGreenAbbreviated"),hexLabel:this.getLabel("colorPickerHexLabel"),invalidColor:this.getLabel("colorPickerInvalidColor"),invalidComponent:this.getLabel("colorPickerInvalidComponent"),redAbbreviated:this.getLabel("colorPickerRedAbbreviated"),submitButton:this.getLabel("done"),swatchTab:this.getLabel("colorPickerSwatchTab"),swatchTabTransparentSwatch:this.getLabel("colorPickerTransparentSwatch")}})})}}class he extends j.Component{static defaultProps={onClose:()=>{},onApply:()=>{}};state={rule:this.props.rule.clone(this.props.reportMetadata)};_onApply(){const e=this.state.rule;e.validateAndSetError(!0),e.isValid()?this.props.onApply(this.props.isCreate,this.props.rule,this.state.rule):this.setState({})}_onRangeChange=()=>{this.setState({})};_onSelectFormattingColumn=(e,t)=>{const r=t.selection[0],i=this.props.columns.find((e=>e.getId()===r.id));this.state.rule.setColumn(i),this.setState({})};_onComboBoxKeyDown=e=>{e.keyCode===ae.KEY_CODE_BACKSPACE&&(e.stopPropagation(),e.preventDefault())};_getColumnOptions(){return this.props.columns.map(((e,t)=>{const r=!e.isEnabled();return{label:r?_.Z.getLabel("reportBuilder","alreadyFormatted",e.getLabel()):e.getLabel(),id:e.getId(),disabled:r}}))}_renderFooter(){return[(0,J.tZ)(p.Z,{className:"report-cf-rule-cancel",label:_.Z.getLabel("reportBuilder","cancel"),variant:"neutral",onClick:this.props.onClose},"cfRuleCancel"),(0,J.tZ)(p.Z,{className:"report-cf-rule-apply",label:_.Z.getLabel("reportBuilder","done"),variant:"brand",onClick:this._onApply.bind(this)},"cfRuleApply")]}handlePropertyRender=e=>(0,J.tZ)(ce,{onInputChange:e});handlePropertyValue=(e,t,r)=>{e.updateColor(t,r)};_renderRangeComponent(){const e=this.state.rule;return(0,J.BX)("div",{children:[(0,J.tZ)("div",{onKeyDown:this._onComboBoxKeyDown,role:"presentation",children:(0,J.tZ)(ne.Z,{id:"conditional-formatting-column-selector-combobox",labels:{label:_.Z.getLabel("reportBuilder","conditionalFormattingColumnLabel")},events:{onSelect:this._onSelectFormattingColumn},options:this._getColumnOptions(),selection:[{id:this.state.rule.getColumn().getId(),label:this.state.rule.getColumn().label}],value:this.state.rule.getColumn().getId(),variant:"readonly",className:"report-cf-column-selector",fieldLevelHelpTooltip:(0,J.tZ)(oe.Z,{id:"conditional-formatting-column-selector-combobox-tooltip",align:"top",assistiveText:{triggerLearnMoreIcon:_.Z.getLabel("reportBuilder","conditionalFormattingColumnTooltip")},content:_.Z.getLabel("reportBuilder","conditionalFormattingColumnTooltip")})})}),(0,J.tZ)("div",{role:"presentation",children:(0,J.tZ)(le.Z,{numberList:e,onChange:this._onRangeChange,propertyName:"color",propertyLabel:_.Z.getLabel("reportBuilder","backgroundColorTitle"),propertyRender:this.handlePropertyRender,updatePropertyValue:this.handlePropertyValue})})]})}render(){const e=this.props.isCreate?"conditionalFormattingAddRule":"conditionalFormattingEditTitle";return(0,J.tZ)(Q(),{id:"report-cf-rule-modal",containerClassName:"report-cf-rule-modal",isOpen:!0,heading:_.Z.getLabel("reportBuilder",e),directional:!1,disableClose:!1,dismissOnClickOutside:!1,size:"large",footer:this._renderFooter(),onRequestClose:this.props.onClose,children:this._renderRangeComponent()})}}class pe extends j.Component{static defaultProps={onClose:()=>{},onApply:()=>{}};state={list:this.props.list};_onApply=()=>{this.props.onApply(this.state.list.toJson())};_onAddRule=()=>{this._showRuleDialog()};_onRuleModalClosed=()=>{this.props.showModal((0,J.tZ)(pe,{...this.props}))};_onRuleModalApplied=(e,t,r)=>{e?this.state.list.addRule(r):this.state.list.replaceRule(t.getId(),r),this.props.showModal((0,J.tZ)(pe,{...this.props}))};_onAction=(e,t)=>{"edit"===e.getId()?this._showRuleDialog(this.state.list.getRule(t)):"delete"===e.getId()&&this.state.list.removeRule(t),this.setState({list:this.state.list})};_showRuleDialog(e){const t=this._getAvailableColumns(e),r={columns:t,rule:e||H.getDefaultInstance(t),onClose:this._onRuleModalClosed,onApply:this._onRuleModalApplied,isCreate:!e,reportMetadata:this.props.reportMetadata};this.props.showModal((0,J.tZ)(he,{...r}))}_getAvailableColumns(e){const t=this.state.list.getItems().filter((t=>!t.equals(e))).map((e=>e.getColumn().getId()));return B.getColumnsFromReportMetadata(this.props.reportMetadata,t)}_renderFooter(){return[(0,J.tZ)(p.Z,{className:"report-cf-list-cancel",label:_.Z.getLabel("reportBuilder","cancel"),variant:"neutral",onClick:this.props.onClose},"cfListCancel"),(0,J.tZ)(p.Z,{className:"report-cf-list-apply",label:_.Z.getLabel("reportBuilder","apply"),variant:"brand",onClick:this._onApply},"cfListApply")]}_renderAddFormattingRule(){const e=this._getAvailableColumns().every((e=>!e.isEnabled())),t=e?_.Z.getLabel("reportBuilder","conditionalFormattingMoreSummary"):null;return(0,J.tZ)(p.Z,{className:"report-cf-list-add-rule",label:_.Z.getLabel("reportBuilder","conditionalFormattingAddRule"),variant:"neutral",onClick:this._onAddRule,disabled:e,title:t},"cfAddRule")}_renderEmptyList(){return(0,J.BX)("div",{className:"report-cf-list-container report-cf-list-container-empty",children:[(0,J.tZ)(q.Z,{heading:_.Z.getLabel("reportBuilder","conditionalFormattingNoRule"),messageBody:"",path:`${Y}#lake-mountain`,name:"No Rule"}),this._renderAddFormattingRule()]})}_renderWarningMessage(e){return(0,J.BX)("div",{className:"report-cf-list-warning",children:[(0,J.tZ)(z.Z,{className:"slds-icon-text-default",category:"utility",colorVariant:"base",name:"info",size:"x-small"}),e]})}_renderList(){const e=this.state.list,t=e.getWarningMessage();return(0,J.BX)("div",{className:"report-cf-list-container report-cf-list-container-list",children:[(0,J.tZ)(se,{list:e,onAction:this._onAction}),(0,J.BX)("div",{className:"report-cf-list-footer",children:[e.hasMaximumRules()?"":this._renderAddFormattingRule(),t?this._renderWarningMessage(t):""]})]})}render(){return(0,J.tZ)(Q(),{id:"report-cf-list-modal",containerClassName:"report-cf-list-modal",isOpen:!0,heading:_.Z.getLabel("reportBuilder","conditionalFormattingTitle"),directional:!1,disableClose:!1,dismissOnClickOutside:!1,footer:this._renderFooter(),onRequestClose:this.props.onClose,children:this.state.list.isEmpty()?this._renderEmptyList():this._renderList()})}}var ge=r(90554),me=r(51548),_e=r(83784),fe=r(82957);const{PRESENTATION_OPTIONS:ye}=_e;class be extends fe.Z{constructor(e){super(),this._rules=e}mutate(e){return this._mutate(e.dashboardJson,new me.Z(e.dashboardJson))}_mutate(e,t){let r=[];for(const e of l.values(t.getLensesJson()))r=(0,ge.deepCopy)(e.query[ye.getValue()].formattingRules),e.query[ye.getValue()].formattingRules=(0,ge.deepCopy)(this._rules);return new be(r)}}const Ce=c()({displayName:"ReportSettingsFooterWidget",mixins:[P()],getInitialState:()=>({showRowCount:!1,showDetails:!1,isExceedLimit:!1,showSubtotals:!1,showGrandTotal:!1,hasStackedSummaries:!1,measures:[],showSubtotalToggle:!0,showStackedSummariesToggle:!0,currencies:[],selectedCurrency:"",showToggleButtons:!1,showCurrencySelector:!1,isMultiBlock:!1,shouldDisableToggles:!1}),shouldComponentUpdate(e,t){return this._hasAllUpdates(!1)&&this._perhapsShouldComponentUpdate(e,t)},componentWillUnmount(){this._isUnmounted=!0},_render(){return(0,J.BX)("div",{className:"settings-footer-widget",children:[this._renderToggleButtons(),this._renderConditionalFormatting(),this._renderCurrencySelector()]})},_getCurrencyPermsAndDropdown(e,t){e&&I().reportConfig&&(I().reportConfig.isMultiCurrencyEnabled?f.Z.getActiveCurrencies().then((r=>{this._isUnmounted||(e&&r.length>0?this.setState({showCurrencySelector:!0,currencies:this._parseCurrencies(r,t)}):this.setState({showCurrencySelector:!1}))}),(e=>{this.setState({showCurrencySelector:!1,currencies:[]})})):this.setState({showCurrencySelector:!1}))},_getCurrencyLabel(){return(0,J.BX)("span",{children:[_.Z.getLabel("reportBuilder","currencyLabel"),(0,J.tZ)("span",{className:"currency-label-value",children:this.state.selectedCurrency})]})},_parseCurrencies(e,t){let r=e.map((e=>({label:_.Z.getLabel("Currency_Name","currency_format",e.IsoCode,_.Z.getLabel("Currency_Name",e.IsoCode)),value:e.IsoCode})));if(!e.find((function(e){return e.IsoCode===t}))){const e=[{type:"divider"},{label:_.Z.getLabel("Currency_Name","currency_format",t,_.Z.getLabel("reportBuilder","inactiveCurrency",_.Z.getLabel("Currency_Name",t))),value:t}];r=r.concat(e)}return r},_renderToggleButtons(){if(!this.state.showToggleButtons)return;let e,t;return this.state.showSubtotalToggle&&(e=(0,J.tZ)(h.Z,{labels:{label:_.Z.getLabel("reportBuilder","showSubtotals")},checked:this.state.showSubtotals,onChange:(e,{checked:t})=>this._onChangeSubtotals(t),className:["settings-toggle","subtotal-toggle"],disabled:this.state.shouldDisableToggles,variant:"toggle"})),this.state.showStackedSummariesToggle&&(t=(0,J.tZ)(h.Z,{labels:{label:_.Z.getLabel("reportBuilder","stackedSummaries")},checked:this.state.hasStackedSummaries,onChange:(e,{checked:t})=>this._onChangeStackedSummaries(t),className:["settings-toggle","stacked-summaries-toggle"],disabled:this.state.shouldDisableToggles,variant:"toggle"})),(0,J.BX)("div",{className:"settings-toggle-buttons",children:[(0,J.tZ)(h.Z,{labels:{label:_.Z.getLabel("reportBuilder","rowCounts")},checked:this.state.showRowCount,onChange:(e,{checked:t})=>this._onChangeRowCount(t),className:["settings-toggle","count-toggle"],disabled:this._isRowCountOnlyAggregate()||this.state.shouldDisableToggles,variant:"toggle"}),(0,J.tZ)(h.Z,{labels:{label:_.Z.getLabel("reportBuilder","showDetails")},checked:this.state.showDetails,onChange:(e,{checked:t})=>this._onChangeDetails(t),className:["settings-toggle","details-toggle"],disabled:this.state.isExceedLimit||this.state.shouldDisableToggles,variant:"toggle"}),e,(0,J.tZ)(h.Z,{labels:{label:_.Z.getLabel("reportBuilder","showGrandTotal")},checked:this.state.showGrandTotal,onChange:(e,{checked:t})=>this._onChangeGrandTotal(t),className:["settings-toggle","total-toggle"],disabled:this.state.shouldDisableToggles,variant:"toggle"}),t]})},_renderConditionalFormatting(){if(this.state.showConditionalFormattingSelector&&!this.state.isMultiBlock)return(0,J.tZ)(p.Z,{className:"conditional-formatting-button",iconCategory:"utility",iconClassName:"conditional-formatting-button-icon",iconPath:`${M}#conditional-formatting`,iconPosition:"left",onClick:this._showConditionaFormattingModal,label:_.Z.getLabel("reportBuilder","conditionalFormatting"),variant:"base"})},_renderCurrencySelector(){if(this.state.showCurrencySelector&&!this.state.reportMetadata?.isDataCloudReport())return(0,J.tZ)(g.Z,{options:this.state.currencies,checkmark:!0,onSelect:this._onSelectCurrency,label:this._getCurrencyLabel(),value:this.state.selectedCurrency,listItemRenderer:b(),width:"xx-small",children:(0,J.tZ)(m.Z,{triggerClassName:this.state.showConditionalFormattingSelector?"multiple-selectors":"single-selector",children:(0,J.tZ)(p.Z,{iconCategory:"utility",variant:"base",iconName:"down",iconPosition:"right",className:"currency-button"})})})},_onResult(e){this._setWidgetRendered();const t=e.getMetadata().getReportMetadata().reportMetadata,r=e.getMetadata().isPreview(),i=e.getMetadata().hasError(),s=new(A())(e.getMetadata().getReportMetadata());this.setState({showRowCount:t.hasRecordCount,showDetails:e.getMetadata().hasDetailRows(),isExceedLimit:e.getMetadata().isMatrixRowLimitExceeded(),showSubtotals:t.showSubtotals,showGrandTotal:t.showGrandTotal,hasStackedSummaries:this._getPresentationOptions().hasStackedSummaries,selectedCurrency:t.currency,showToggleButtons:!u().isEmpty(t.groupingsDown)||!r,showCurrencySelector:r,showConditionalFormattingSelector:this._shouldShowConditionalFormattingSelector(r,t),measures:t.aggregates,showSubtotalToggle:u().isEmpty(t.groupingsAcross)||2===t.groupingsAcross.length||2===t.groupingsDown.length,showStackedSummariesToggle:t.reportFormat===L().MATRIX.getValue(),isMultiBlock:e.getMetadata().isMultiBlock(),shouldDisableToggles:i||s.getReportTypeMetadata().isCalculatedInsight(),reportMetadata:s}),this._getCurrencyPermsAndDropdown(r,t.currency)},_onChangeRowCount(e){this.props.executeMutators([new F.Z(this.props.widget.getParameter("stepIds"),Z.q.UPDATE,void 0,void 0,!0)]),this.setState({showRowCount:e})},_onChangeDetails(e){this.state.reportMetadata.isSummaryFilterEnabled()&&e&&S.Z.get(E()).showToastMessage(_.Z.getLabel("reportBuilder","turnDetailsRowOnDescription")),this.props.executeMutators([new x.Z(this.props.widget.getParameter("stepIds"),{toggleShowDetails:!0})]),this.setState({showDetails:e})},_onChangeSubtotals(e){this.props.executeMutators([new x.Z(this.props.widget.getParameter("stepIds"),{toggleShowSubtotals:!0})]),this.setState({showSubtotals:e})},_onChangeGrandTotal(e){this.props.executeMutators([new x.Z(this.props.widget.getParameter("stepIds"),{toggleShowGrandTotal:!0})]),this.setState({showGrandTotal:e})},_onChangeStackedSummaries(e){this.props.executeMutators([new x.Z(this.props.widget.getParameter("stepIds"),{toggleStackedSummaries:!0})]),this.setState({hasStackedSummaries:e})},_onSelectCurrency(e){e.value!==this.state.selectedCurrency&&(this.props.executeMutators([new x.Z(this.props.widget.getParameter("stepIds"),void 0,e.value)]),this.setState({selectedCurrency:e.value}))},_isRowCountOnlyAggregate(){return u().every(this.state.measures,R().get().isRowCount)},_shouldShowConditionalFormattingSelector(e,t){if(t.reportFormat===L().MULTI_BLOCK.getValue()||I().reportConfig&&!I().reportConfig.isReportConditionalFormattingEnabled)return!1;const{groupingsDown:r,groupingsAcross:i,aggregates:s}=t,n=!u().isEmpty(i)&&!u().isEmpty(s),o=s&&s.length>0?s.filter((e=>!R().get().isRowCount(e))):[];return e&&!u().isEmpty(r)&&(!u().isEmpty(o)||n)},_showConditionaFormattingModal(){this.props.showModal((0,J.tZ)(pe,{reportMetadata:this.state.reportMetadata,showModal:this.props.showModal,onClose:this.props.closeModal,onApply:this._onApplyConditionalFormatting,list:V.parse(this._getPresentationOptions().formattingRules,this.state.reportMetadata)}))},_onApplyConditionalFormatting(e){this.props.executeMutators([new be(e)]),this.props.closeModal()},_getPresentationOptions(){return this.props.dashboardMetadata.getLens(N.TABLE.getValue()).getQuery().presentationOptions||{}}});var Ee=r(27911),Se=r(22877),Te=r(85887),Ie=r(70917),ve=r(30512);const Re=(0,Ie.iv)("margin-right:",ve.spacingMedium,";",""),we=(0,Ie.iv)("background:",ve.colorBackground,";display:flex;align-items:center;justify-content:center;bottom:0;width:inherit;height:inherit;border-top:1px solid ",ve.colorBorder,";padding-top:",ve.spacingSmall,";padding-bottom:",ve.spacingSmall,";z-index:",ve.zIndexDocked,";","");var Ae=r(56529);const De=c()({displayName:"ReportInlineEditFooterWidget",mixins:[P()],_onClose(){this.props.runtimeSubscriber._getRuntimeConnector().publish(new Se.Z(this.props.runtimeSubscriber.getId(),{type:Te.Z.CANCEL}))},_onSave(){this.props.runtimeSubscriber._getRuntimeConnector().publish(new Se.Z(this.props.runtimeSubscriber.getId(),{type:Te.Z.SAVE}))},_render(){return this.props.inlineEditState?.isInEditMode()?(0,J.BX)("div",{css:we,children:[(0,J.tZ)(p.Z,{css:Re,label:_.Z.getLabel("reportBuilder","cancel"),variant:"neutral",onClick:this._onClose}),(0,J.tZ)(p.Z,{label:_.Z.getLabel("reportBuilder","save"),variant:"brand",onClick:this._onSave}),this.props.inlineEditState?.getInlineEditStatus()===Ae.Z.UPLOADING&&(0,J.tZ)("div",{className:"slds-spinner_container"})]}):(0,J.tZ)("div",{})},_onResult(e){this._setWidgetRendered()}}),Le=(0,Ee.X)(De);var Me=r(45697),Ne=r.n(Me),Oe=r(6343),Pe=r(34533),xe=r(85808),Ze=r(62816),Fe=r.n(Ze),ke=r(67932),Be=r(73935),We=r(8902),Ge=r.n(We),Ue=r(32574),He=r.n(Ue),Ve=r(40266),je=r(61331);class qe extends j.Component{static defaultProps={hardcodedDimChoice:!1,maxTitleLength:40};state={definition:this.props.definition,config:this.props.config,_items:[]};localize=e=>"string"==typeof e?e:_.Z.getLabel(e.section,e.id);componentDidMount(){return this._configHelpers=Fe().get().getConfigHelpers(),this.buildChartSelector()}componentDidUpdate(e){if(e.geometry.measures.length!==this.props.geometry.measures.length)return this._configHelpers=Fe().get().getConfigHelpers(),this.buildChartSelector()}buildChartSelector=()=>{const e=this._whitelistChartTypes(this.props);if(!this.chartSelector||!this.configEditor)return;const t=this._configHelpers,r=this._handleChange.bind(null,this.state,t);return(0,je.Z)()(this.chartSelector,e,this.props.definition,this.props.config,this.localize,((e,i,s,n)=>{let o=s;const a={palettes:this.props.palettes,colors:this.props.colors,secondaryColors:this.props.secondaryColors||this.props.colors,localize:this.localize,isReferenceLineSupported:!0,isColorSupported:!0,hardcodedDimChoice:this.props.hardcodedDimChoice,allowDupMeasures:this.props.chartsWithDupMeasures.indexOf(e.path())>=0,isShowValuesVisible:"sfdc-lightning/charts/line.js"!==e.path(),isDisplayUnitsVisible:!1,isShowChatterPhotosVisible:!1,isAxisRangeVisible:!1,isDecimalPlacesVisible:!1},l=this.props.definition,u=this.props.config,d=this.props.geometry;l&&u&&!o&&(o=Fe().get().mapConfigsToNewDefinition(l,u,e.path(),d)),this.state.definition=e.path();const c=Fe().get().getBuildConfigLib();if(this.state._items=c(d,r,i.config,o,this.configEditor,a),t.updateDynamicConfigInputs(e.path(),o,this.state._items),!n)return r()}),this._createWaveIcon,!0)};_handleChange=(e,t)=>{if(!e||!e._items||!e._items.length)return;const r={errorFromInputs:!1};e._items.forEach((function(e){return e.item(),e.populate(r),r.errorFromInputs=r.errorFromInputs||!!e._hasError})),r.selectMode="single",r.autoFit=!this.props.autofitBlacklist[e.definition],e.config=r,t.updateDynamicConfigInputs(e.definition,r,e._items),this.props.handler(e.definition,e.config)};_createWaveIcon=(e,t,r)=>{let i=t;"donut"===i&&(i="pie");const s="chart-thumb-{0}".replace("{0}",i),n=_.Z.getLabel("ChartType",i);Be.render((0,J.BX)("div",{className:"chart-type",children:[(0,J.tZ)(Ge(),{iconName:s,additionalClassName:"waveChartIcon"}),(0,J.tZ)("div",{className:"chart-type-label",children:n})]}),e)};_whitelistChartTypes=e=>{const{whitelist:t}=e,r=(0,Ve.Z)().scripts();if(t){const e=[];for(const r of Array.from(t))null!=r.script&&e.push({script:r.script,effectiveMetadata:r.metadata,enabled:r.enabled});return e}return r.map((e=>({script:e,effectiveMetadata:e.metadata()})))};_renderRemoveButton=()=>{if(null!=this.props.removeCallback)return(0,J.tZ)("div",{className:"remove-chart-container",children:(0,J.tZ)(p.Z,{label:_.Z.getLabel("reportBuilder","removeChart"),disabled:!1,onClick:this.props.removeCallback,variant:"neutral",className:"remove-chart-button"})})};render(){const e=this._renderRemoveButton(),t=He().classSet({"config-selector":!0,"last-chart-section":null==e});return(0,J.BX)("div",{className:"analytics-eclair-configurer",children:[(0,J.tZ)("div",{className:"chart-selector",ref:e=>{this.chartSelector=e}}),(0,J.tZ)("h2",{className:"chart-config-title",children:_.Z.getLabel("EclairConfig","chartConfigTitle")}),(0,J.tZ)("div",{className:t,ref:e=>{this.configEditor=e}}),e]})}}var ze=r(34271);r(18399);const $e=c()({displayName:"ReportChartPanelWidget",mixins:[P()],propTypes:{executeMutators:Ne().func},getInitialState:()=>({reportMetadata:null,isOpen:!1}),_getTitle:()=>"",_getNoResultsText:()=>"",shouldComponentUpdate(e,t){return this._perhapsShouldComponentUpdate(e,t)},_onResult(e){this._setWidgetRendered();const t=e.getMetadata(),r=t.getReportMetadata();let i=r?r.reportMetadata:void 0;if(i){if(Fe().get().resetCachedValues(),!this._hasGroupings(i))return;return this._panelContent=this._getPanelContent(t),i=this._isNotSupportedForEdit(this._config,this._definition)?void 0:r,this.setState({reportMetadata:i})}},_getPanelContent(e){let t;const r=e.getReportMetadata(),i=Fe().get(),{reportMetadata:s,reportExtendedMetadata:n,reportTypeMetadata:o}=r,a=i.getOrderedAxesFromMetadata(s,n,o),l=i.getPalettes(),d=i.getColors(),c=i.getSecondaryColors(),h=this._handleChartChange,p=new Pe.Z(o);if(u().isEmpty(s.chart))t=i.generateSuggestedEclairChartConfig(a,d,c,l,p,s);else{t=i.generateEclairChartConfig(s,n);for(let t=0;t<s.chart.groupings.length;t++){const r=s.chart.groupings[t];if(e.hasPicklistColors(r)){l.hasPicklistColors=!0;break}}}this._config=t.config,this._definition=t.definition;const g=u().get(this,"_config.__chartTitle__");let m=i.getLightningChartWhitelist(a,g,40);i.disableChartTypesCIReports(m,s,p),m=i.updateChartTypeDimensions(m,s,p);const _=Fe().CHARTS_WITH_DUPE_MEASURES;return(0,J.tZ)(qe,{definition:this._definition,config:this._config,geometry:a,palettes:l,colors:d,secondaryColors:c,whitelist:m,handler:h,autofitBlacklist:{},chartsWithDupMeasures:_,removeCallback:this._closeAndRemoveChart})},_render(){const e=(0,J.tZ)(oe.Z,{content:_.Z.getLabel("reportBuilder","chartProperties"),position:"overflowBoundaryElement",align:"left",children:(0,J.tZ)(p.Z,{assistiveText:{icon:_.Z.getLabel("reportBuilder","chartProperties")},iconName:"settings",iconVariant:"border-filled",iconCategory:"utility",variant:"icon",className:"chart-mode",onClick:this._toggleChartPanel,disabled:!this.state.reportMetadata})});return(0,J.BX)("div",{children:[(0,J.tZ)(ke.Z,{inlineEditState:this.props.inlineEditState}),(0,J.tZ)("div",{className:"chart-switcher-container",children:(0,J.tZ)("div",{className:"chart-switcher",children:(0,J.tZ)(Oe.Z,{position:"overflowBoundaryElement",body:this._panelContent||"",isOpen:this.state.isOpen,onRequestClose:this._closePanel,align:"bottom right",className:"reportEclairConfigurerContainer",hasStaticAlignment:!0,children:e})})})]})},_handleChartChange(e,t){if(t.__hasError__)return;const r=(0,ge.deepCopy)(t),i=Fe().get().getChartSerializationService().convertChartConfigToMetadata(e,r);this._cleanseNonAggregatableMeasureSelection(i);const s=this.props.widget.getParameter("stepIds");return this.props.executeMutators([new ze.Z(s,i)])},_cleanseNonAggregatableMeasureSelection(e){const t=new Pe.Z(this.state.reportMetadata.reportTypeMetadata);if(!t.isCalculatedInsight()||0===t.getAvailableCIMeasures("AGGREGATABLE").length)return;const r=t.getAvailableCIMeasures("AGGREGATABLE"),i=t.getAvailableCIDimensionNames(),s=R().get();e.groupings.length<i.length&&(e.summaries=e.summaries.filter((e=>r.includes(s.getAggregateColumnName(e))))),u().isEmpty(e.summaries)&&!u().isEmpty(r)&&e.summaries.push(s.getAggregateNameForColumn(r[0],xe.Z.NOOP.getPrefix()))},_toggleChartPanel(){return this.state.isOpen||(this._activeElement=document.activeElement),this.setState({isOpen:!this.state.isOpen})},_closePanel(){return this._activeElement&&this._activeElement.focus(),this.setState({isOpen:!1})},_closeAndRemoveChart(){return this._closePanel(),this.props.executeMutators([new ze.Z(this.props.widget.getParameter("stepIds"),{})])},_isNotSupportedForEdit:(e,t)=>["sfdc-lightning/charts/vcombo.js","sfdc-lightning/charts/hcombo.js"].includes(t),_hasGroupings(e){const t=!!e.groupingsDown&&e.groupingsDown.length>0,r=!!e.groupingsAcross&&e.groupingsAcross.length>0;return t||r}});var Qe=r(70351),Ye=r.n(Qe),Ke=r(41172),Je=r(30820),Xe=r(53346),et=r(82041),tt=r(6627),rt=r(32350),it=r.n(rt),st=r(91025),nt=r(22949),ot=r.n(nt),at=r(52402),lt=r.n(at),ut=r(87418);class dt{constructor(e,t,r){this._singleSelect=!!r,this.setAndInitializeNodes(e,t)}setAndInitializeNodes(e,t){this._nodes=e;const r={index:0};let i=0;for(let e=0;e<(t.nodes?.length??0);e++)if(t.nodes){const s=t.nodes[e];this._nodes[s]&&this._traverseTreeToIndex(this._nodes[s],r,[],i++)}this._clearAllSelectionsForce()}getNodes(){return this._nodes}getLastSelectedNode(){return this._nodes[this._selectedIds[this._selectedIds.length-1]]??null}_traverseTreeToIndex(e,t,r,i){const s=[...r,i];e.multiSelectInfo={...e.multiSelectInfo,index:t.index++,treeIndices:s};let n=0;for(let r=0;r<(e.nodes?.length??0);r++)if(e.nodes){const i=e.nodes[r];this._nodes[i]&&this._traverseTreeToIndex(this._nodes[i],t,s,n++)}}_getParentTreeIndices(e){const t=e.multiSelectInfo?e.multiSelectInfo.treeIndices:[];return t&&t.length>0?t.slice(0,t.length-1):null}_clearAllSelectionsForce(){let e=!1;for(const t of Object.keys(this._nodes)){const r=this._nodes[t];r.selected&&(r.selected=!1,e=!0)}return this._selectedIds=[],this._shiftStartId=null,e}_clearAllSelections(e){let t=!1;return this._selectedIds.forEach((r=>{const i=this._nodes[r];i?.selected&&i?.id!==e&&(i.selected=!1,t=!0)})),this._selectedIds.includes(e)?(this._selectedIds=[e],this._shiftStartId=e):(this._selectedIds=[],this._shiftStartId=null),t}_deselectNonSibling(e){let t=!1;for(const r of Object.keys(this._nodes)){const i=this._nodes[r];if(i.selected){const r=this._getParentTreeIndices(i);if(!(0,l.isEqual)(r,e)){i.selected=!1;const e=this._selectedIds.indexOf(i.id);e>-1&&this._selectedIds.splice(e,1),t=!0}}}return t}_selectNodesWithShift(e,t,r){let i=!1,s=-1,n=-1;if(e>r&&t>r){const i=Math.min(e,t)-1;s=Math.min(r,i),n=Math.max(r,i)}else if(e<r&&t<r){const i=Math.max(e,t)+1;s=Math.min(r,i),n=Math.max(r,i)}let o,a=-1,l=-1;if(e>t&&r>t){const i=Math.min(e,r)-1;a=Math.min(t,i),l=Math.max(t,i),o=(e,t)=>t.linearIndex-e.linearIndex}else if(e<t&&r<t){const i=Math.max(e,r)+1;a=Math.min(t,i),l=Math.max(t,i),o=(e,t)=>e.linearIndex-t.linearIndex}const u=[];for(const e of Object.keys(this._nodes)){const t=this._nodes[e];if(t.multiSelectInfo&&!t.multiSelectInfo.notSelectable)if(t.multiSelectInfo.index>=a&&t.multiSelectInfo.index<=l){t.selected||(t.selected=!0,i=!0);const e=this._selectedIds.indexOf(t.id);e>-1&&this._selectedIds.splice(e,1),u.push({linearIndex:t.multiSelectInfo.index,id:t.id})}else if(t.multiSelectInfo.index>=s&&t.multiSelectInfo.index<=n&&t.selected){t.selected=!1;const e=this._selectedIds.indexOf(t.id);e>-1&&this._selectedIds.splice(e,1),i=!0}}if(u.length>0){const e=u.sort(o).map((e=>e.id));this._selectedIds=this._selectedIds.concat(e)}return i}clearSelections(e){return this._clearAllSelections(e??"")}handleMouseClick(e,t,r){if(!this._nodes[e])return!1;const i=this._nodes[e];let s=!1,n=!1;if(this._singleSelect)s=this._clearAllSelections(e)||s;else if(t){if(!this._nodes[e]?.multiSelectInfo?.notSelectable&&i.selected){i.selected=!1;const t=this._selectedIds.indexOf(e);return t>-1&&this._selectedIds.splice(t,1),this._shiftStartId=this._selectedIds.length>0?this._selectedIds[this._selectedIds.length-1]:null,!0}}else if(r){const t=this._shiftStartId?this._nodes[this._shiftStartId]:null;if(!this._nodes[e]?.multiSelectInfo?.notSelectable&&t){n=!0;const e=this._nodes[this._selectedIds[this._selectedIds.length-1]]??null,r=e?.multiSelectInfo?.index??t.multiSelectInfo?.index;s=this._selectNodesWithShift(t.multiSelectInfo?.index,i.multiSelectInfo?.index,r)||s}}else s=this._clearAllSelections(e)||s;return this._nodes[e]?.multiSelectInfo?.notSelectable||(n||(this._shiftStartId=e),i.selected||(i.selected=!0,this._selectedIds.includes(e)||this._selectedIds.push(e),s=!0)),s}handleNavigationKey(e,t){if(!this._nodes[e])return!1;let r=!1,i=!1;const s=this._nodes[e];if(t&&!this._singleSelect){const t=this._shiftStartId?this._nodes[this._shiftStartId]:null;if(t&&!this._nodes[e]?.multiSelectInfo?.notSelectable){r=!0;const e=this._nodes[this._selectedIds[this._selectedIds.length-1]]??null,n=e?.multiSelectInfo?.index??t.multiSelectInfo?.index;i=this._selectNodesWithShift(t.multiSelectInfo?.index,s.multiSelectInfo?.index,n)||i}}else i=this._clearAllSelections(e)||i;return this._nodes[e]?.multiSelectInfo?.notSelectable||(r||(this._shiftStartId=e),s.selected||(s.selected=!0,this._selectedIds.includes(e)||this._selectedIds.push(e),i=!0)),i}}var ct=r(81513),ht=r.n(ct),pt=r(62271),gt=r(18302),mt=r(2386),_t=r(37720),ft=r(84400),yt=r(31107),bt=r(3886),Ct=r(75782),Et=r(10455);class St extends yt.Z{_isCommonFilterOn=!1;constructor(e,t,r,i){super(r,i,!1,!0,t),this._reportType=e,this._formulaMenuOptions&&this._formulaMenuOptions.splice(0,1)}setCommonFilter(e){this._isCommonFilterOn=e,this._showFormulaCategory=!e}_getAdditionalItemProps(){return this._reportType?{reportType:this._reportType}:{isCrossBlock:!0}}_getAdditionalFieldItemContent(e){return e.isCommon?(0,J.tZ)(p.Z,{assistiveText:{icon:_.Z.getLabel("reportBuilder","commonField")},iconPath:`${M}#binding`,tabIndex:"-1",className:"common-field-icon slds-icon_flip",variant:"icon"}):(0,J.tZ)("span",{className:"common-field-icon-placeholder"})}_getColumnLabel(e){return e.isCommon?(0,J.tZ)(oe.Z,{id:`${this._reportType}_${e.name}`,content:Et.Z.getCommonFieldMappingContentForFieldsPanel(e),align:"bottom",position:"overflowBoundaryElement",triggerClassName:"common-field-tooltip-trigger",children:(0,J.tZ)("span",{tabIndex:"0",children:super._getColumnLabel(e)})}):super._getColumnLabel(e)}_getCreateFormulaLabel(){return this._reportType?super._getCreateFormulaLabel():_.Z.getLabel("reportBuilder","fieldsTreeFormulaCreateCrossBlock")}_isFieldVisible(e){return!this._isCommonFilterOn||!!e.isCommon}}class Tt extends bt.Z{_typeTrees={};constructor(e={},t=[],r={},i={}){super(),this._reportTypes=e,this._orderedReportTypes=t,this._crossBlockFormulaTree=new St("",0,[],i);let s=1;for(const t of Object.keys(e))this._typeTrees[t]=new St(t,s++,e[t].categories,r[t]);this._init()}getClassName(){return Ue.buildClassName(super.getClassName(),"joinedReportFieldsTree","multiTypeFieldsTree")}setCommonFilter(e){this._crossBlockFormulaTree.setCommonFilter(e);for(const t of Object.keys(this._reportTypes))this._typeTrees[t].setCommonFilter(e)}setFormulaCallbacks(e,t,r){this._crossBlockFormulaTree.setFormulaCallbacks(e,t,(()=>r(!0)));for(const i of Object.keys(this._reportTypes))this._typeTrees[i].setFormulaCallbacks(e,t,r)}setMenuCallbacks(e,t){this._crossBlockFormulaTree.setMenuCallbacks(e,t);for(const r of Object.keys(this._typeTrees))this._typeTrees[r].setMenuCallbacks(e,t)}isMenuOpen(){if(this._crossBlockFormulaTree.isMenuOpen())return!0;for(const e of Object.keys(this._typeTrees))if(this._typeTrees[e].isMenuOpen())return!0;return!1}openMenu(e){e.reportType?this._typeTrees[e.reportType].openMenu(e):this._crossBlockFormulaTree.openMenu(e)}closeMenu(){this._crossBlockFormulaTree.closeMenu();for(const e of Object.keys(this._typeTrees))this._typeTrees[e].closeMenu()}_buildTreeBranches(e=[Ct.Z.ALL],t,r){const i=[];let s=0;if(!this._reportTypes)return i;const n=this._crossBlockFormulaTree.getFormulaNodes(e,t,r);if(n.length>0){const e=_.Z.getLabel("reportBuilder","fieldsTreeCrossBlockFormulasBranch");i.push({nodes:n,label:(0,J.tZ)("span",{className:"tree-xcsf-folder-label",children:e}),labelWithoutCount:e,type:"branch",id:"crossBlockFormulas",expanded:!!t||this._isExpanded(s),multiSelectInfo:{index:-1,treeIndices:[],notSelectable:!0}}),s++}for(let n=0;n<this._orderedReportTypes.length;n++){const o=this._orderedReportTypes[n],a=this._typeTrees[o].getTreeNodes(e,t,r);if(a.length>0){const e=this._reportTypes[o].label;if(this._allNodes&&this._allNodes.length>0)for(;e!==this._allNodes[s].labelWithoutCount;)s++;i.push({nodes:a,label:(0,J.tZ)("span",{className:"tree-report-type-label",children:e}),labelWithoutCount:e,reportType:o,type:"branch",id:`reportType_${o}`,expanded:!!t||this._isExpanded(s),multiSelectInfo:{index:-1,treeIndices:[],notSelectable:!0}})}s++}return i}}class It{constructor(e){this._reportMetadata=e}getTree(){const e=this._reportMetadata.getReportTypeMetadata();if(this._reportMetadata.isMultiBlock())return l.isEmpty(this._reportMetadata.getBlocks())?new Tt:new Tt(e.getCategoriesByReportType(),e.getOrderedReportTypes(),this._reportMetadata.getCustomSummaryFormulaByReportType(),this._reportMetadata.getCrossBlockFormulas());{let t=e.getCategories();for(const r of[_.Z.getLabel("ReportCustomDetail","CustomDetailFields"),_.Z.getLabel("ReportBucketing","BucketFields")])t=this._moveCategoryToTop(t,e,r);return new yt.Z(t,this._reportMetadata.getCustomSummaryFormula(),this._reportMetadata.isDataCloudReport(),!0)}}_moveCategoryToTop(e,t,r){const i=t.getCategoryIndex(e,r);if(i<0)return e;const s=(0,ge.deepCopy)(e),n=s.splice(i,1);return s.unshift(n[0]),s}}var vt=r(57999),Rt=r(44574),wt=r(95871),At=r(76916);const Dt=(0,i.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(946)]).then(r.bind(r,65952)))),Lt="branch",Mt="fieldsTree",Nt="fields-panel-open",Ot="move",Pt=c()({displayName:"ReportFieldsPanelWidget",mixins:[P()],propTypes:{widget:Ne().instanceOf(ut.Z),layoutSwitcher:Ne().instanceOf(pt.Z),runtimeSubscriber:Ne().instanceOf(ht()),getCurrentLayout:Ne().func,showModal:Ne().func,closeModal:Ne().func,executeMutators:Ne().func},getInitialState:()=>({nodes:[{root:{}}],filterType:Ct.Z.ALL,searchTerm:"",isTypeFilterOpen:!1,isCommonFieldFilterOn:!1,politeText:"",announcement:"",isPanelOpen:!1}),componentDidMount(){it().on("report:toggleFieldsPanel",this._togglePanel,this),this.setState({isPanelOpen:vt.Z.isAppClassSet(Nt)})},componentWillUnmount(){it().off("report:toggleFieldsPanel",this._togglePanel,this)},componentDidUpdate(){this._attachDragEvent(),this._setFieldPanelFocus()},shouldComponentUpdate:(e,t)=>!0,_togglePanel(){vt.Z.toggleAppClass(Nt,void 0,!0),this._fieldsPanelToggled()},_fieldsPanelToggled(){this._reportMetadata&&(this.shouldSetFocus=!0,this.setState({isPanelOpen:!this.state.isPanelOpen}),this._setFieldPanelFocus())},_onResult(e){const t=new(A())(e.getMetadata().getReportMetadata()),r=this._shouldUpdateNodes(t);if(this._reportMetadata=t,r){if(this._fieldsTree=new It(this._reportMetadata).getTree(),this._fieldsTree.setFormulaCallbacks(this._canAddFormulaAsColumn,this._canEditFormula,this._canCreateFormula),this._fieldsTree.setMenuCallbacks(this._onItemMenuSelection,this._onItemMenuClose),this._reportMetadata.isMultiBlock()){const e=this._reportMetadata.getReportTypeMetadata().getOrderedReportTypes().length;this._fieldsTree.setCommonFilter(this.state.isCommonFieldFilterOn&&e>1)}const e=this._fieldsTree.getNormalizedTreeNodes([this.state.filterType],this.state.searchTerm);this._multiSelector=new dt(e,e.root,this._reportMetadata.isMultiBlock()),this.setState({nodes:u().cloneDeep(this._multiSelector.getNodes())})}const i=e.getMetadata().getColumns();this._deselectSuccessfullyAddedFields(i),this._setWidgetRendered()},_shouldUpdateNodes(e){const t=this._reportMetadata;if(!this._reportMetadata||t.isMultiBlock()!==e.isMultiBlock())return!0;if(!u().isEqual(this._hashFormulas(t),this._hashFormulas(e))||!!t.getGroupingColumns().length!=!!e.getGroupingColumns().length)return!0;const r=this._reportMetadata.getReportTypeMetadata(),i=e.getReportTypeMetadata();return e.isMultiBlock()?u().isEmpty(e.getBlocks())||u().isEmpty(t.getBlocks())||!u().isEqual(r.getOrderedReportTypes(),i.getOrderedReportTypes()):!u().isEqual(r.getCategories(),i.getCategories())||!u().isEqual(t.getCsfAggregates(),e.getCsfAggregates())},_hashFormulas:e=>u().sortBy(u().map(u().filter(e.getCustomSummaryFormula(),((e,t)=>-1===t.indexOf(R().BLOCK_ID_SEPARATOR))),((e,t)=>t+e.label+e.crossBlock+e.reportType))),_render(){const e=this._renderContent(),t=_.Z.getLabel("reportBuilder","fieldsOpenPanel"),r=(0,J.tZ)("div",{className:"fields-panel trigger",children:(0,J.BX)("label",{className:"vertical-text",htmlFor:"fields-panel-toggle-button",children:[_.Z.getLabel("FieldList","fields"),(0,J.tZ)(oe.Z,{content:t,position:"overflowBoundaryElement",align:"right",children:(0,J.tZ)(p.Z,{id:"fields-panel-toggle-button",className:"expand",assistiveText:{icon:t},iconName:"chevrondown",iconSize:"small",iconVariant:"bare",iconCategory:"utility",variant:"icon",onClick:this._togglePanel,buttonRef:this._setExpandButtonRef,onBlur:this._onBlur})})]})});return(0,J.BX)("div",{className:"fields-panel-container",children:[e,r,(0,J.tZ)(ot(),{politeText:this.state.politeText,assertiveText:this.state.announcement})]})},_renderContent(){if(this._fieldsTree)return(0,J.BX)("div",{className:"fields-panel full",onKeyDown:this._handleKeyDown,children:[this._renderSearchBar(),this._renderMenuActions(),this._renderCommonFieldToggle(),this._renderFieldsTree()]})},_renderSearchBar(){const e=He().buildClassName("fields-panel-search",this.state.isTypeFilterOpen?"":"hideTypeFilter"),t=_.Z.getLabel("FieldList","fieldsTreeSearchPlaceHolder"),r=this.state.isTypeFilterOpen?_.Z.getLabel("FieldList","hideDataTypeFilters"):_.Z.getLabel("FieldList","showDataTypeFilters");return(0,J.BX)("div",{className:e,children:[(0,J.tZ)(Ke.Z,{assistiveText:{label:t},className:"fieldsSearch",iconRight:this._renderIconRight(),type:"search",onChange:this._filterBySearchTerm,placeholder:this._getSearchBarPlaceHolderText(),value:this.state.searchTerm,inputRef:this._cacheSearchInputElement,onBlur:this._onBlur}),(0,J.tZ)(oe.Z,{content:r,position:"overflowBoundaryElement",align:"bottom",children:(0,J.tZ)(p.Z,{assistiveText:{icon:r},iconName:"search",iconSize:"x-small",iconVariant:"more",iconCategory:"utility",onClick:this._toggleTypeFilterMenu,variant:"icon",className:"searchByType searchAndArrow"})}),this._renderCollapseButton()]})},_cacheSearchInputElement(e){this._cachedSearchInput=e},_setExpandButtonRef(e){this._expandButtonRef=e},_renderIconRight(){if(this.state.searchTerm)return(0,J.tZ)(Je.Z,{className:"clearIcon",assistiveText:{icon:_.Z.getLabel("FieldList","clear")},name:"clear",category:"utility",onClick:this._clearSearch})},_toggleTypeFilterMenu(){this.setState({isTypeFilterOpen:!this.state.isTypeFilterOpen})},_getSearchBarPlaceHolderText(){return this.state.filterType.getSearchBarPlaceHolderText()},_renderCollapseButton(){const e=_.Z.getLabel("FieldList","fieldsClosePanel");return(0,J.tZ)(oe.Z,{content:e,position:"overflowBoundaryElement",align:"bottom",children:(0,J.tZ)(p.Z,{assistiveText:{icon:e},iconName:"close",iconSize:"x-small",iconVariant:"bare",onClick:this._togglePanel,variant:"icon",className:"collapse",iconCategory:"utility"})})},_getMenuAction(e,t){const r=e.getActionProps(),i=e.getType(),s=this.state.filterType.getType()===i,n=0===t?"top left":"top";let o;return r.label?o=(0,J.tZ)(oe.Z,{content:r.assistiveText,position:"overflowBoundaryElement",align:n,children:(0,J.BX)("div",{children:[r.label,(0,J.tZ)("span",{className:"slds-assistive-text",children:r.assistiveText})]})}):r.iconName&&(o=(0,J.tZ)(oe.Z,{content:r.assistiveText,position:"overflowBoundaryElement",align:n,children:(0,J.tZ)("div",{children:(0,J.tZ)(z.Z,{assistiveText:{label:r.assistiveText},name:r.iconName,category:r.iconCategory,size:r.iconSize})})})),(0,J.tZ)(Xe.Z,{variant:"button-group",labels:{label:o},value:i,checked:s},i)},_renderMenuActions(){if(!this.state.isTypeFilterOpen)return;const e=[Ct.Z.ALL,Ct.Z.TEXT,Ct.Z.NUMBER,Ct.Z.BOOLEAN,Ct.Z.DATE,Ct.Z.PICKLIST].map(((e,t)=>this._getMenuAction(e,t)));return(0,J.tZ)("div",{className:"menuActions",children:(0,J.tZ)(et.Z,{onChange:this._filterByType,children:e})})},_renderCommonFieldToggle(){if(!this._reportMetadata.isMultiBlock()||Object.keys(this._reportMetadata.getReportTypeMetadata().getCategoriesByReportType()).length<2)return;const e=_.Z.getLabel("FieldList","commonFieldFilterInfo");return(0,J.BX)("div",{className:"slds-form_inline common-field-filter",children:[(0,J.tZ)(h.Z,{labels:{label:_.Z.getLabel("FieldList","commonFields")},assistiveText:{label:e},checked:this.state.isCommonFieldFilterOn,className:"common-field-checkbox",onChange:()=>this._toggleCommonFieldFilter()}),(0,J.tZ)(z.Z,{path:`${M}#binding`,className:"common-field-icon slds-icon_flip",tabIndex:"-1"}),(0,J.tZ)(oe.Z,{content:e,align:"bottom",position:"overflowBoundaryElement",children:(0,J.tZ)("a",{href:"#",tabIndex:"-1",onClick:e=>e.preventDefault(),children:(0,J.tZ)(z.Z,{className:"common-field-info-icon",assistiveText:{label:e},name:"info",category:"utility",size:"xx-small",tabIndex:"-1"})})})]})},_toggleCommonFieldFilter(){if(!this._reportMetadata.isMultiBlock())return;const e=!this.state.isCommonFieldFilterOn;this._fieldsTree.setCommonFilter(e);const t=this._fieldsTree.getNormalizedTreeNodes([this.state.filterType],this.state.searchTerm);this._multiSelector.setAndInitializeNodes(t,t.root),this.setState({isCommonFieldFilterOn:e,nodes:u().cloneDeep(this._multiSelector.getNodes())})},_getNodes(e){return e.nodes?e.nodes.map((e=>this.state.nodes[e])):[]},_renderFieldsTree(){const e=He().buildClassName(Mt,this._fieldsTree.getClassName());return this.state.isPanelOpen?(0,J.tZ)("div",{className:"fields-panel-body",ref:this._setTreeRef,children:(0,J.tZ)(tt.Z,{ref:this._setTreeComponentRef,assistiveText:{label:_.Z.getLabel("FieldList","fields")},nodes:this.state.nodes.root.nodes,getNodes:this._getNodes,onExpandClick:this._handleExpandClick,onClick:this._handleClick,searchTerm:this.state.searchTerm,id:Mt,className:e})}):null},_handleClick(e,t){"click"===e.type?this._handleTreeMouseClick(e,t):this._handleTreeKeyDown(e,t)},_handleTreeMouseClick(e,t){if(t.node.type===Lt)return;let r=[];if(t.node.isCreateFormula)t.node.disabled||this._openFormulaEditor(t.node.id,null,t.node.reportType,t.node.isCrossBlock);else{const e=new Date;this._isDoubleClick(e)?(this._previousClickTime=void 0,this._shouldAddNewField(t.node.value)&&(r=this._addNewFields([t.node.value]))):this._previousClickTime=e}let i=this._reportMetadata.isMultiBlock()?"":_.Z.getLabel("reportBuilder","enterToAddField"),s=!1;if((t.node.isFormula||this._multiSelector.getLastSelectedNode()?.isFormula&&!t.node.isFormula)&&(s=this._multiSelector.clearSelections(t.node.id)||s,i=""),s=this._multiSelector.handleMouseClick(t.node.id,e.ctrlKey||e.metaKey,e.shiftKey)||s,r.length>0||s){const e=this._getSelectedFieldsFrom(this._multiSelector.getNodes()).length,t=_.Z.getLabel("reportBuilder","fieldsSelected",e);let n=s?t:"";n+=s&&e>0?". "+i:"",n+=r.length>0?(n?". ":"")+_.Z.getLabel("reportBuilder","fieldsBeingAdded",r.length):"",this.setState({nodes:u().cloneDeep(this._multiSelector.getNodes()),announcement:n})}},_isDoubleClick(e){const t=this._reportMetadata.isMultiBlock()?1e3:500;return this._previousClickTime&&e-this._previousClickTime<t},_handleTreeKeyDown(e,t){if(t.node.type!==Lt)if(e.keyCode===ae.KEY_CODE_ENTER&&"keydown"===e.type){if(t.node.isFormula&&1===this._getSelectedFields().length)e.stopPropagation(),e.preventDefault(),this._fieldsTree.openMenu(t.node),setTimeout((()=>this._focusInMenu()),0);else if(t.node.isCreateFormula)t.node.disabled||this._openFormulaEditor(t.node.id,null,t.node.reportType,t.node.isCrossBlock);else if(!this._reportMetadata.isMultiBlock()){const e=this._getSelectedFields(),t=this._addNewFields(e);if(t?.length>0){const e=_.Z.getLabel("reportBuilder","fieldsBeingAdded",t.length);this.setState({announcement:e})}}}else if(t.select){let r=!1,i=this._reportMetadata.isMultiBlock()?"":_.Z.getLabel("reportBuilder","enterToAddField");if(t.node.isFormula&&(r=this._multiSelector.clearSelections(t.node.id)||r,i=""),r=this._multiSelector.handleNavigationKey(t.node.id,e.shiftKey)||r,r){const e=this._getSelectedFieldsFrom(this._multiSelector.getNodes()).length;let t=_.Z.getLabel("reportBuilder","fieldsSelected",e);t+=e>0?". "+i:"",this.setState({nodes:u().cloneDeep(this._multiSelector.getNodes()),announcement:t})}}},_getSelectedFields(){return this._getSelectedFieldsFrom(this.state.nodes)},_getSelectedFieldsFrom:e=>Object.keys(e).filter((t=>e[t].selected)).map((t=>e[t].value)),_getSelectedNodes(){return Object.keys(this.state.nodes).filter((e=>this.state.nodes[e].selected)).map((e=>this.state.nodes[e]))},_shouldAddNewField(e){if(this._reportMetadata.isMultiBlock())return!1;const t=this._reportMetadata.getReportTypeMetadata();if(!t.isCalculatedInsight())return!0;const r=t.getAvailableCIMeasures("NONAGGREGATABLE"),i=t.getAvailableCIDimensionNames();if(i.includes(e))return!1;const s=this._reportMetadata.getGroupingDownColumnNames();return!(r.includes(e)&&!i.every((e=>s.includes(e))))},_addNewFields(e){const t=this.props.widget.getParameter("stepIds");let r=[];if(e.length>0&&e[0]in this._reportMetadata.getCustomSummaryFormula()){const i=e[0];this._reportMetadata.getAggregates().includes(i)||(this.props.executeMutators([new _t.Z(t,_t.i.ADD,i,this._reportMetadata.getCustomSummaryFormula()[i],!1)]),r=[i])}else{const t=this._getReportDetailColumns(),i=this._reportMetadata.getCsfAggregates();r=e.filter((e=>!t.includes(e)));if(t.length+r.length+i.length>this._getMaxDetailColumns())return[];if(r.length>0){const e=this._reportMetadata.getHistoricalMetadata().convertToCleansedColumnIndex(this._reportMetadata.getDetailColumns().length);this.props.executeMutators([new mt.Z(this._getStepIds(),Z.q.CREATE,ft.Z.Detail,0,e,r)])}}return this._isFieldAddedFromFieldsPanel=!0,r},_handleExpandClick(e,t){const r={...this.state.nodes,[t.node.id]:{...t.node,expanded:t.expand}};this.setState({nodes:r})},_filterByType(e){const t=Ct.Z.getEnumByCode(e.target.value),r=this._fieldsTree.getNormalizedTreeNodes([t],this.state.searchTerm);this._multiSelector.setAndInitializeNodes(r,r.root),this.setState({filterType:t,nodes:u().cloneDeep(this._multiSelector.getNodes())}),this._cachedSearchInput&&(this._cachedSearchInput.focus(),this._cachedSearchInput.select())},_filterBySearchTerm(e){const t=e.target.value,r=this.state.filterType;this.shouldSetFocus=!1;const i=this._fieldsTree.getNormalizedTreeNodes([r],t);this._multiSelector.setAndInitializeNodes(i,i.root),this.setState({nodes:u().cloneDeep(this._multiSelector.getNodes()),searchTerm:t})},_clearSearch(){this._filterBySearchTerm({target:{value:""}})},_attachDragEvent(){if(!this.state.isPanelOpen||this._tree&&this._tree.querySelector("[draggable=true]"))return;const e=Ye()(this._tree).find(".slds-tree").children();if(0!==e.length)for(let t=0;t<e.length;t++){const r=this._getNodes(this.state.nodes.root)[t],i=e[t],s=Ye()(i).find(".slds-is-expanded").first().children();for(let e=0;e<s.length;e++){const t=this._getNodes(r)[e],i=s[e];if(t.type===Lt){const e=Ye()(i).find(".slds-is-expanded").children();for(let i=0;i<e.length;i++)this._setLeafAttributes(e[i],this._getNodes(t)[i],r.reportType)}else this._setLeafAttributes(i,t)}}},_setLeafAttributes(e,t,r=""){t.isFormula?e.setAttribute("aria-haspopup",!0):t.isCreateFormula?t.disabled&&e.setAttribute("aria-disabled",!0):(e.setAttribute("draggable",!0),Ye()(e).addClass("draggable"),e.ondragstart=this._onDragStart.bind(this,t,e,r),e.ondragend=this._onDragEnd)},_setTreeRef(e){this._tree=e},_setTreeComponentRef(e){this._treeComponent=e},_onDragStart(e,t,r,i){this._clearDocumentTextSelection(),this._isFieldAddedFromFieldsPanel=!0,i.dataTransfer.effectAllowed=Ot;const s=this._getDragPayload(e,t,r);if(i.dataTransfer.setData("text",""),st.Z.setDragPayload(s),i.dataTransfer.setDragImage){this._mirrorTarget=document.createElement("ul"),this._mirrorTarget.setAttribute("draggable","true"),this._mirrorTarget.id="dragImageMultiFields",this._mirrorTarget.classList.add("draggable","mirror-dragging");const t=this._getDragDetails(e);Be.render((0,J.tZ)(At.Z,{dragDetails:t}),this._mirrorTarget),document.body.appendChild(this._mirrorTarget),i.dataTransfer.setDragImage(this._mirrorTarget,0,0)}},_onDragEnd(e){this._mirrorTarget&&(this._mirrorTarget.parentNode.removeChild(this._mirrorTarget),this._mirrorTarget=null),e.dataTransfer.dropEffect!==Ot&&(this._isFieldAddedFromFieldsPanel=!1),st.Z.reset()},_getSingleDragPayloadInfo(e,t,r){let i;const s=t.getBoundingClientRect().height,n=this._reportMetadata.findDetailColumns(e,r);let o=n.length>0?n[0]:-1;return-1!==o?i=lt().Detail.getCode():(o=u().indexOf(this._reportMetadata.getGroupingDownColumnNames(),this._reportMetadata.getColumnNameInPrincipalReportType(e,r)),-1!==o?i=lt().GroupingDown.getCode():(o=u().indexOf(this._reportMetadata.getGroupingAcrossColumnNames(),e),-1!==o&&(i=lt().GroupingAcross.getCode()))),{value:e,itemSize:s,interactionZoneName:i,index:o,detailIndices:n,isCommon:this._reportMetadata.canFieldBeUsedForGrouping(e,r)}},_getDragPayload(e,t,r){if(this._reportMetadata.isMultiBlock()){const i=this._getSingleDragPayloadInfo(e.value,t,r);return st.Z.makePayload({name:lt().AllFields.getCode(),reportType:r,...i})}{const i=this._getSelectedFields(),s=i.includes(e.value)?i:[e.value],n=[];return s.forEach((e=>{const i=this._getSingleDragPayloadInfo(e,t,r);n.push(st.Z.makePayloadItem(i))})),st.Z.makeMultiPayload({name:lt().AllFields.getCode(),reportType:r,items:n})}},_handleKeyDown(e){e.keyCode!==ae.KEY_CODE_ESCAPE||e.target.classList.contains("formula-action-trigger")||"menuitem"===e.target.getAttribute("role")||this._togglePanel()},_setFieldPanelFocus(){this._focusInMenu(),this.shouldSetFocus&&(this.state.isPanelOpen?this._cachedSearchInput.select():this._expandButtonRef.focus())},_focusInMenu(){this._tree&&this._fieldsTree&&this._fieldsTree.isMenuOpen()&&this._tree.querySelector(".slds-dropdown-trigger.slds-is-open button").focus()},_focusInTreeItem(e){this._tree&&(this._treeComponent.treeHasFocus=!0,this._tree.querySelector(`[id*=${e}]`).focus())},_onItemMenuSelection(e,t,r){e===_t.i.ADD.getName()?this._executeCsfMutator(_t.i.ADD,t):e===Z.q.UPDATE.getName()?this._openFormulaEditor(r,t):e===Z.q.DELETE.getName()&&this._onDeleteCsf(t)},_onItemMenuClose(e){this._treeComponent.forceUpdate((()=>this._focusInTreeItem(e)))},_onBlur(){this.shouldSetFocus=!1},_canAddFormulaAsColumn(e){return-1===this._reportMetadata.getAggregates().indexOf(e)},_canEditFormula(e){return this._reportMetadata.getGroupingColumns().length>0},_canCreateFormula(e=!1){return!u().isEmpty(this._reportMetadata.getGroupingDownColumns())&&!this._reportMetadata.isCsfLimitReached(e)&&!this._reportMetadata.getReportTypeMetadata().isCalculatedInsight()},_openFormulaEditor(e,t,r,i){const s=(0,wt.Z)(Dt);this.props.showModal((0,J.tZ)(s,{defaultFullEditor:!0,formulaKey:t,reportType:r,isCrossBlock:i,isOpen:!0,reportMetadata:this._reportMetadata,getReportFormulas:e=>e.getCustomSummaryFormula(),getMetadataForValidation:Rt.Z.getMetadataForCSFValidation,onUpdate:this._onUpdateCsf,onDelete:this._onDeleteCsf.bind(this,t),togglePopover:()=>{this.props.closeModal((()=>this._focusInTreeItem(e)))}}))},_onUpdateCsf(e,t,r,i=!0){const s=null!=e?Z.q.UPDATE:Z.q.CREATE;this._executeCsfMutator(s,e,t.getFormulaMetadata(),r,i)},_onDeleteCsf(e,t=!0,r){r||this._executeCsfMutator(Z.q.DELETE,e,null,!1,t)},_executeCsfMutator(e,t,r,i=!1,s=!0){const n=this._getStepIds();this._reportMetadata.isMultiBlock()?this.props.executeMutators([new gt.Z(n,e,"",t,r,i)],{undoEnabled:s}):this.props.executeMutators([new _t.Z(n,e,t,r,i)],{undoEnabled:s})},_getStepIds(){return this.props.widget.getParameter("stepIds")},_clearDocumentTextSelection(){document.getSelection().removeAllRanges()},_getDragDetails(e){const t=[],r=this._getSelectedNodes(),i=r.some((t=>t.value===e.value))?r:[e],s=this._getReportDetailColumns(),n=this._reportMetadata.getCsfAggregates();let o=s.length+n.length;const a=i.length>1;i.forEach((e=>{const r=e.value,i=this._getFieldLabel(r),n=!u().includes(s,r);n&&o++;const l=!n&&a?_.Z.getLabel("reportBuilder","fieldExistsInTable"):null;t.push({canAddField:n,label:i,displayIcon:a,additionalText:l})}));const l=[],d=this._getMaxDetailColumns();if(i.length>1&&o>d){const e=!1,t=_.Z.getLabel("reportBuilder","maxFieldsError"),r=null;return l.push({canAddField:e,label:t,displayIcon:a,additionalText:r}),l}return t},_getFieldLabel(e){const t=this._reportMetadata.getReportTypeMetadata();if(this._reportMetadata.getReportFormat()===L().MULTI_BLOCK.getCode()){let r,i=0;for(;!r&&i<this._reportMetadata.getBlocks().length;){const s=this._reportMetadata.getBlocks()[i];r=t.getInnerReportTypeMetadataByReportType()[s.getReportType()].getColumnName(e),i++}return r}return t.getColumnName(e)||this._reportMetadata.getCustomSummaryFormula()[e]?.label||this._reportMetadata.getCustomDetailFormula()[e]?.label},_deselectSuccessfullyAddedFields(e){if(this._multiSelector&&this._isFieldAddedFromFieldsPanel&&(null==this.state.resultMessage||!this.state.resultMessage.isError())){const t=this._getReportDetailColumns(),r=this._reportMetadata.getGroupingColumnNames(),i=u().union(t,r),s=this._getSelectedFields(),n=i.length!==t.length+r.length,o=i.length>e.length;if(n||o)return;if(u().some(s,(e=>!u().includes(i,e))))return;this._multiSelector.clearSelections(),this.setState({nodes:u().cloneDeep(this._multiSelector.getNodes())})}this._isFieldAddedFromFieldsPanel=!1},_getReportDetailColumns(){let e=[];this._reportMetadata.getReportFormat()===L().MULTI_BLOCK.getCode()?u().forEach(this._reportMetadata.getBlocks(),(t=>{e=u().union(e,t.getDetailColumns())})):e=this._reportMetadata.getDetailColumns();const t=this._reportMetadata.getHistoricalMetadata();return t&&(e=t.cleanseDetailColumns(e)),e},_getMaxDetailColumns:()=>100});var xt=r(57715);const Zt=c()({displayName:"ReportChatterWidget",mixins:[P()],componentWillUnmount(){$A.isMock||this._toggleChatter(!1)},_toggleChatter(e){it().trigger("reports:chatter",{showChatter:e,reportId:this.props.widget.getParameter("reportId")})},_render:()=>(0,J.tZ)("div",{className:"report-chatter-feed-panel",children:(0,J.tZ)(xt.Z,{variant:"brand",size:"small",containerClassName:"chatter-loading"})}),_onResult(){this._setWidgetRendered()}});var Ft=r(950);class kt{async fetchReportAggregates(e,t,r){try{const r=await f.Z.getAggregates(e,t,2),i=Object.keys(r),s=(0,l.max)(i.map((e=>{const t=r[e].aggregateHistory,i=Object.keys(t);return(0,l.max)(i.map((e=>new Date(e))))}))),n=i.map((e=>{const t=r[e].aggregateHistory,i=(0,l.filter)(t,((e,t)=>s.getTime()===new Date(t).getTime()));return{[e]:i[0]}})).reduce(((e,t)=>{const r=Object.keys(t)[0];return e[r]=t[r],e}),{});return{[s.toISOString()]:n}}catch{return null}}}const Bt=c()({displayName:"ReportMetricsWidget",mixins:[P()],getInitialState:()=>({aggregates:[],exceedsLimit:!1,isAggregateHistoryReady:!1,lastSubscriptionRunDate:null,isDataCloudSummaryReport:!1,isDataCloudMatrixReport:!1}),shouldComponentUpdate(e,t){return this._hasAllUpdates(!1)&&this._perhapsShouldComponentUpdate(e,t)},_render(){let e=null;this.state.exceedsLimit&&(e=this.state.isDataCloudSummaryReport?this._renderWarningMessage(_.Z.getLabel("reportBuilder","tooMuchDataWarningMessageDataCloudReports","summary")):this.state.isDataCloudMatrixReport?this._renderWarningMessage(_.Z.getLabel("reportBuilder","tooMuchDataWarningMessageDataCloudReports","matrix")):this._renderWarningMessage(_.Z.getLabel("reportBuilder","tooMuchDataWarningMessage")));const t=this._renderAggregateChangesMessage(),r=this.state.aggregates.map((e=>{const t=e.aggregateId,r=this._getNumberFormatter(e);return(0,J.BX)("li",{children:[(0,J.tZ)("div",{className:"metricsElement metricsTitle",title:e.title,children:e.title}),(0,J.tZ)(Ft.Z,{value:e.value,duration:500,initialValue:0,className:"metricsElement metricsValue",formatNumber:r}),this._renderPreviousAggregate(e,r)]},`item-${t}`)}));return(0,J.BX)("div",{className:"metrics-widget",children:[e,t,(0,J.tZ)("ul",{children:r})]})},_renderWarningMessage:e=>(0,J.BX)("div",{className:"reports-metrics-message",children:[(0,J.tZ)(z.Z,{category:"utility",colorVariant:"warning",name:"warning",className:"message-icon",size:"x-small"}),e+" "+_.Z.getLabel("reportBuilder","tooMuchDataSummaryInfo")]}),_onResult(e){this._setWidgetRendered();const t=e.getResult().getQueryResult();if(t.hasError())return;const r=!t.getReportResult().allData,i=e.getMetadata().getReportMetadata().reportMetadata,s=new(A())(e.getMetadata().getReportMetadata()),n=s.isDataCloudReport()&&i.reportFormat===L().SUMMARY.getValue(),o=s.isDataCloudReport()&&i.reportFormat===L().MATRIX.getValue();if(i.reportFormat===L().MULTI_BLOCK.getValue())return;let a=i.aggregates.filter((e=>i.hasRecordCount&&this._isRowCount(e)||i.showGrandTotal&&!this._isRowCount(e)));a=a.map((r=>{const i=this._getAggregateTitle(e,r),s=R().get().getAggregateColumnName(r),n=e.getMetadata().getReportTypeMetadata().isPercentColumn(s),o=t.getTotalLabelAndValue(r);return{aggregateId:r,title:i,isPercentage:n,value:o?o.value:0,label:o?o.label:"-"}}));const l=a.findIndex((e=>this._isRowCount(e.aggregateId)));if(l>0){const e=a.splice(l,1)[0];a.unshift(e)}a=a.slice(0,8),this.setState({aggregates:a,exceedsLimit:r,isAggregateHistoryReady:!1,isDataCloudSummaryReport:n,isDataCloudMatrixReport:o}),this._isCompareReportsEnabled()&&this._fetchReportAggregateHistory(i.id,a)},_fetchReportAggregateHistory(e,t){const r=this._getComparisonService(),i=t.map((e=>e.aggregateId));r.fetchReportAggregates(e,i,1).then((e=>{if(null!==e&&!(0,l.isEmpty)(e)){const r=Object.keys(e)[0],i=e[r],s=this._mergePreviousAggregates(i,t);this.setState({aggregates:s,isAggregateHistoryReady:!0,lastSubscriptionRunDate:r})}}))},_mergePreviousAggregates:(e,t)=>t.map((t=>{const r=e[t.aggregateId];let i,s;return r?(i=r.aggregateLabel,s=r.aggregateValue):(i=null,s=null),{previousAggregateLabel:i,previousAggregateValue:s,...t}})),_getAggregateChangeInfo:(e,t)=>e<t?{icon:"arrowup",iconColorClass:"slds-icon-text-success",textColorClass:"metrics-increase"}:e>t?{icon:"arrowdown",iconColorClass:"slds-icon-text-error",textColorClass:"metrics-decrease"}:{icon:"",iconColorClass:"slds-icon-text-default",textColorClass:"metrics-same"},_renderPreviousAggregate(e,t){if(!this.state.isAggregateHistoryReady)return null;if(void 0===e.previousAggregateValue||null===e.previousAggregateValue)return(0,J.tZ)("div",{className:"previousMetricsSection metricsElement",children:""});const r=e.value-e.previousAggregateValue,i=Math.abs((e.previousAggregateValue-e.value)/e.previousAggregateValue*100),s=this._getAggregateChangeInfo(e.previousAggregateValue,e.value),n=""===s.icon?"":(0,J.tZ)(z.Z,{category:"utility",className:"aggregate-change-icon "+s.iconColorClass,name:s.icon,size:"x-small"});return(0,J.BX)("div",{className:"previousMetricsSection metricsElement "+s.textColorClass,children:[n,this._renderAggregateChange(i,r,e.isPercentage,t)]})},_renderAggregateChange(e,t,r,i){if(0===e)return(0,J.tZ)("span",{className:"metrics-same",children:_.Z.getLabel("reportBuilder","aggregateNoChange")});let s;s=e===1/0||isNaN(e)?"--":(0,J.BX)(J.HY,{children:[(0,J.tZ)(Ft.Z,{value:r?t:e,duration:500,initialValue:0,className:"metricsPreviousValue",formatNumber:e=>e.toFixed(1)}),"%"]});const n=!r&&(0,J.BX)(J.HY,{children:["(",(0,J.tZ)(Ft.Z,{value:t,duration:500,initialValue:0,className:"metricsPreviousValue",formatNumber:i}),")"]});return(0,J.BX)(J.HY,{children:[(0,J.tZ)("span",{className:"metrics-percentage-change",children:s}),n]})},_renderAggregateChangesMessage(){if(this.state.isAggregateHistoryReady&&this.state.aggregates.length>0){const e=new Date(this.state.lastSubscriptionRunDate),t=this._getLocalizationService().formatDateTime(e);return(0,J.BX)("div",{className:"reports-metrics-message aggregate-changes-message",children:[(0,J.tZ)(z.Z,{category:"utility",colorVariant:"light",name:"clock",className:"message-icon",size:"x-small"}),_.Z.getLabel("reportBuilder","aggregateChangeNotification",t)]})}return null},_getAggregateTitle(e,t){if(this._isRowCount(t))return _.Z.getLabel("SFXReportHeader","rowCountMetric");if(this._isFormula(e,t))return this._getFormulaName(e,t);{const r=R().get().getAggregateType(t),i=R().get().getAggregateColumnName(t),s=e.getMetadata().getReportTypeMetadata().getColumnName(i);return this._translateOperation(r,s)}},_isFormula(e,t){return Object.prototype.hasOwnProperty.call(this._getFormulas(e),t)},_getFormulaName(e,t){return this._getFormulas(e)[t].label},_getFormulas:e=>e.getMetadata().getReportMetadataWrapper().getCustomSummaryFormula(),_translateOperation:(e,t)=>_.Z.getLabel("SFXReportHeader",e.getOperationLabel(),t),_isRowCount:e=>R().get().isRowCount(e),_getNumberFormatter(e){const t=e.value,r=e.label,i=this._getLocalizationService().getNumberFormatter(r),s=e.isPercentage;return function(e){return e===t?r:null===e?i.format(s?t/100:t):i.format(s?e/100:e)}},_getLocalizationService:()=>S.Z.get(re()),_isCompareReportsEnabled:()=>I()?.reportConfig?.hasCompareReports,_getComparisonService:()=>new kt});var Wt=r(34795),Gt=r(17237),Ut=r(18111),Ht=r.n(Ut),Vt=r(13822);const{PREVIEW_REFRESHING:jt}=_e;class qt extends fe.Z{mutate(e){return this._mutate(e.dashboardJson,new me.Z(e.dashboardJson))}_mutate(e,t){for(const e of N.enums()){const r=e.getValue();t.getLens(r).getJson().query[jt.getValue()]=!0}return new qt}}const zt=c()({displayName:"ReportWarningBannerWidget",mixins:[P()],getInitialState:()=>({shouldRender:!0,isAutoRefreshEnable:I().reportConfig.isPreviewAutoRefresh}),shouldComponentUpdate(e,t){return this._perhapsShouldComponentUpdate(e,t)},_renderStatusMessage(){const e=He().classSet({"header-warning-widget-preview-override":!0,"header-warning-widget-querying":this.state.widgetStatus===Vt.Z.QUERYING,"header-warning-widget-outdated":this.state.widgetStatus===Vt.Z.PAUSED,"header-warning-widget-ok":this.state.widgetStatus===Vt.Z.IDLE}),t=this.state.widgetStatus===Vt.Z.QUERYING?this._lastStatusUsed||Vt.Z.IDLE:this.state.widgetStatus;let r,i;switch(t){case Vt.Z.PAUSED:r=(0,J.BX)("p",{children:[_.Z.getLabel("reportBuilder","previewOutdated")," ",this._renderRefreshButton()]}),i="warning";break;case Vt.Z.IDLE:default:r=(0,J.tZ)("p",{children:_.Z.getLabel("reportBuilder","headerWarningMessage")}),i="success"}return this._lastStatusUsed=t,(0,J.tZ)(Wt.Z,{className:e,icon:(0,J.tZ)(z.Z,{category:"utility",name:i,size:"xx-small"}),children:r})},_renderAutoRefreshToggle(){return(0,J.tZ)(h.Z,{labels:{label:_.Z.getLabel("reportBuilder","previewAutoRefreshToggle")},checked:this.state.isAutoRefreshEnable,onChange:(e,{checked:t})=>this._onChangeAutoRefreshEnable(t),className:"auto-refresh-toggle",disabled:!1,variant:"toggle"})},_renderRefreshButton(){return(0,J.tZ)(p.Z,{className:"header-warning-refresh",onClick:this._onRefresh,label:_.Z.getLabel("reportBuilder","previewRefresh"),disabled:this.state.widgetStatus===Vt.Z.QUERYING,variant:"base"})},_render(){return this.state.shouldRender?(0,J.BX)("div",{className:"header-warning-container",children:[this._renderStatusMessage(),this._renderAutoRefreshToggle()]}):(0,J.tZ)("div",{})},_onResult(e){const t=!e.getMetadata().getErrorMessage();this.setState({shouldRender:t}),this._setWidgetRendered()},_onChangeAutoRefreshEnable(e){const t=e;(0,Gt._m)("isPreviewAutoRefresh",t),S.Z.get(Ht()).updateConfig({reportConfig:{isPreviewAutoRefresh:t}}),this.setState({isAutoRefreshEnable:t}),t&&this.state.widgetStatus===Vt.Z.PAUSED&&this._onRefresh()},_onRefresh(){this.props.executeMutators([new qt],{undoEnabled:!1})}});var $t=r(92763),Qt=r(58692),Yt=r(22422);const Kt=(0,i.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(479)]).then(r.bind(r,7472))),{loadingRenderable:(0,J.tZ)(a.Z,{})}),Jt=(0,i.Z)((()=>Promise.all([r.e(441),r.e(425),r.e(592),r.e(471)]).then(r.bind(r,49473))),{loadingRenderable:(0,J.tZ)((function({numOfRows:e=20}){const t=e=>{const t="opacity"+(100-5*e),r=He().buildClassName(t,0===e?"header":void 0,"placeholder","table_list_line_item");return(0,J.tZ)("div",{className:r,children:(0,J.tZ)("div",{className:"body border-bottom",children:(0,J.BX)("div",{className:"text-body-col",children:[(0,J.tZ)("div",{className:"text text-short"},"1"),(0,J.tZ)("div",{className:"text text-long"},"2"),(0,J.tZ)("div",{className:"text text-medium"},"3"),(0,J.tZ)("div",{className:"text text-long"},"4"),(0,J.tZ)("div",{className:"text text-long"},"5")]})})},e)},r=[];for(let i=0;i<e;i++)r.push(t(i));return(0,J.tZ)("div",{className:"report-table-placeholder widget-loading-placeholder",children:r})}),{numOfRows:20})});class Xt extends o.Z{#Et;constructor(e){super([[s.Z.CHART,Yt],[s.Z.QUERY_BUILDER,Kt],[s.Z.SETTINGS_FOOTER,Ce],[s.Z.INLINE_EDIT_FOOTER,Le],[s.Z.REPORT_CHART_PANEL,$e],[s.Z.FIELDS_PANEL,Pt],[s.Z.REPORT_TABLE,Jt],[s.Z.REPORT_CHATTER,Zt],[s.Z.REPORT_METRICS,Bt],[s.Z.CONTAINER,Qt],[s.Z.REPORT_WARNING_BANNER,zt]]),this.#Et=e}getDimensionOverride(e,t){const r=[$t.ZP.REPORT_COMPONENT_SUMMARY.getLayoutName(),$t.ZP.REPORT_COMPONENT_CHART.getLayoutName(),$t.ZP.REPORT_COMPONENT_TABLE.getLayoutName(),$t.ZP.REPORT_COMPONENT_SUMMARY_AND_CHART.getLayoutName(),$t.ZP.REPORT_COMPONENT_SUMMARY_AND_TABLE.getLayoutName(),$t.ZP.REPORT_COMPONENT_CHART_AND_TABLE.getLayoutName(),$t.ZP.REPORT_COMPONENT_SUMMARY_AND_CHART_AND_TABLE.getLayoutName()];if(this.#Et!==n.THUMBNAIL&&!r.includes(t.getName()))return{}}}},44988:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var i=r(96486),s=r(61506),n=r(27994),o=r(8429),a=r(29946),l=r(68831),u=r(99689),d=r(91019),c=r(29365),h=r(67294),p=r(84198),g=r(85931),m=r(70917),_=r(30512);const f=(0,m.iv)("text-align:center;padding:",_.spacingMedium,";",""),y={name:"1azakc",styles:"text-align:center"},b=(0,m.iv)("margin-bottom:",_.spacingMedium,";","");var C=r(35944);const E=e=>(0,C.tZ)(g.Z,{isOpen:e.isOpen,directional:!1,disableClose:!0,heading:o.Z.getLabel("reportBuilder","inlineEditing"),footer:(0,C.BX)("div",{css:y,children:[(0,C.tZ)(p.Z,{label:o.Z.getLabel("reportBuilder","stayOnPage"),variant:"neutral",onClick:e.onStay}),(0,C.tZ)(p.Z,{label:o.Z.getLabel("reportBuilder","discardChanges"),variant:"brand",onClick:e.onLeave})]}),onRequestClose:e.onStay,children:(0,C.BX)("div",{css:f,children:[(0,C.BX)("p",{css:b,children:[" ",o.Z.getLabel("reportBuilder","unsavedChanges")," "]}),(0,C.BX)("p",{children:[" ",o.Z.getLabel("reportBuilder","sureToDiscard")," "]})]})}),S=(0,h.memo)(E);class T extends d.Z{constructor(){super("ReportInlineEditPlugin"),s.Z.get(n).registerBeforeFunctions(),s.Z.get(n).setCallback(this._handleMessage.bind(this),"navigateAwayInlineEdit"),a.core.auraApp&&(this._attachedBeforeUnload=this._handleBeforeUnload.bind(this),window.addEventListener("beforeunload",this._attachedBeforeUnload))}_handleBeforeUnload(e){let t;return this._stateDelegate.getState().isInEditMode?(t=o.Z.getLabel("reportBuilder","closeModalWarningMessage"),e.returnValue=t):t=void 0,t}_setState(e){const t=this._stateDelegate.getState();i.isMatch(t,e)||this._stateDelegate.setState(e)}_closeTransitionDialog(){this._setState({showTransitionDialog:!1})}_handleMessage(e){"onBeforeNavigate"===i.get(e,"data.eventType")&&this._stateDelegate.getState().isInEditMode&&this._setState({showTransitionDialog:!0})}_handleDiscard(){s.Z.get(n).removeCallback(null,"navigateAwayInlineEdit"),a.core.auraApp&&window.removeEventListener("beforeunload",this._attachedBeforeUnload),s.Z.get(n).unregisterBeforeFunctions(),s.Z.get(n).navigateBack(!0)}getInitialState(){return{isInEditMode:!1,showTransitionDialog:!1,isInlineEditToggled:!1}}getRuntimeTopics(){return[new l.Z(u.Z.INLINE_EDIT_STATE),new l.Z(u.Z.INLINE_EDIT_INTERACTION)]}getDisabledHeaderActionIds(){return this._stateDelegate.getState().isInEditMode?new Set(["refreshReport","toggleFilter","LightningReportEditAction","searchTable","toggleChart","addChart","toggleChatter","insightsPanelHeaderAction","ReportDrillAction","ReportCloneAction","ReportExportAction","ReportCopyToClipboardAction","ReportSaveAction","ReportClipAction","ReportScheduleAction","ReportDeleteAction"]):new Set([])}getInjectedWidgetProps(e){return{disableHeaderClick:!!this._stateDelegate.getState().isInEditMode}}onRuntimeMessage(e){if(e.getType()===u.Z.INLINE_EDIT_INTERACTION&&this._setState({isInlineEditToggled:!0}),e instanceof c.Z){const t=e.getState()?.isInEditMode();this._setState({isInEditMode:t})}}getFloatingRenderable(){const e=this._stateDelegate.getState().showTransitionDialog;return(0,C.tZ)(S,{isOpen:e,onStay:this._closeTransitionDialog.bind(this),onLeave:this._handleDiscard.bind(this)})}}},85414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=(0,r(67294).createContext)({showVideo(){throw new Error("Video setter must be supplied via context.")}})},91718:(e,t,r)=>{"use strict";r.d(t,{A1:()=>l,ZP:()=>u});var i=r(16045),s=r(61506),n=r(45131),o=r(69008),a=r(52254);const l="LEARNING_CENTER";class u{static logTileClick(e,t,r,a){let u="";"WELCOME_MAT"===r?u="welcomeMat":r===l&&(u="learningCenter"),s.Z.get(i.Z).trigger(new o.Z(n.Z.ONBOARDING,`${u}${t}`,1,{categories:[r],deprecatedContext:a,deprecatedSubRouteOverride:e}))}static logVideo(e,t){let r="";"WELCOME_MAT"===t?r="video":"LEARNING_CENTER"===t&&(r="customVideo"),s.Z.get(i.Z).trigger(new o.Z(n.Z.ONBOARDING,`${r}${a.Z.OPENED}`,1,{categories:[t],deprecatedContext:e.title}))}static logPopover(e,t){s.Z.get(i.Z).trigger(new o.Z(n.Z.ONBOARDING,`popover${t}`,1,{categories:["POPOVER"],deprecatedContext:e}))}static logTrailhead(e){s.Z.get(i.Z).trigger(new o.Z(n.Z.ONBOARDING,`trailhead${a.Z.COUNT}`,1,{categories:["TRAILHEAD"],deprecatedContext:e,deprecatedSubRouteOverride:"learningCenter"}))}}},97957:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},53164:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(69133);class n{constructor(e,t=i.Z.getLabel("OnboardingVideo","defaultVideoTitle"),r=s.Z.YOUTUBE,n=!1,o=!0){this.source=e,this.title=t,this.type=r,this.showPlaylist=n,this.isMovable=o}get url(){return this.type.getUrl(this.source,this.showPlaylist)}get width(){return this.showPlaylist?1244:926}get height(){return this.showPlaylist,573}}},64138:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(76126),s=r(84198),n=r(57244),o=r(8429),a=(r(60486),r(35944));function l({showVideo:e,videoDescription:t,videoTooltip:r=o.Z.getLabel("OnboardingVideo","watchVideoTooltip"),videoAssistiveText:l=o.Z.getLabel("OnboardingVideo","watchVideoAssistiveText")}){return!n.Z.has(n.Z.ORG_HAS_ONBOARDING_VIDEO_ACCESS)||n.Z.has(n.Z.ORG_HAS_INACCESSIBLE_HELP_RESOURCE)?(0,a.tZ)("span",{className:"video-button hidden"}):(0,a.BX)("div",{className:"video-button",children:[(0,a.tZ)("span",{className:"video-description",children:t}),(0,a.tZ)(i.Z,{content:r,align:"bottom",variant:"learnMore",children:(0,a.tZ)(s.Z,{iconCategory:"utility",iconName:"right",iconSize:"medium",iconVariant:"bare",onClick:e,variant:"icon",className:"video-icon",assistiveText:{icon:l}})})]})}},69133:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(69370),s=r(32898);const n="play.vidyard.com",o="youtube.com";class a extends i.Z{constructor(e){super(),this.getUrl=e}static appendVideoParams(e,t){return e.includes(n)?(0,s.appendParams)(e,{autoplay:1,hide_playlist:t?0:1}):e.includes(o)?(0,s.appendParams)(e,{autoplay:1,showinfo:0,rel:0,modestbranding:1,cc_load_policy:1}):e}}a.add("VIDYARD","vidyard",new a(((e,t)=>a.appendVideoParams(`https://${n}/${e}.html`,t)))).add("YOUTUBE","youtube",new a((e=>a.appendVideoParams(`https://www.${o}/embed/${e}`)))).add("CONTENT_URL","content",new a((e=>a.appendVideoParams(e)))).finish()},52254:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=Object.freeze({OPENED:"Opened",CLOSED:"Closed",USAGE:"Usage",COUNT:"Count",TILE_CLICKED:"TileClicked"})},17176:(e,t,r)=>{"use strict";r.d(t,{G:()=>l,Jv:()=>h,Lx:()=>u,Rm:()=>p,Xd:()=>g,n1:()=>c,p6:()=>o,q4:()=>a,sT:()=>m,zx:()=>n});var i=r(57636),s=r(16283);function n(e,t){return(0,i.Kz)(s.Z.EDI_ANALYZE,{reportId:e,isOpen:t})}function o(e,t){return(0,i.Kz)(s.Z.OPEN_STORY,{storyId:e,storyVersionId:t})}function a(e,t,r,n){return(0,i.Kz)(s.Z.EDI_CREATE,{reportId:e,reportVersionId:t,isCount:r,from:n.code})}function l(e,t,r,n,o){return(0,i.Kz)(s.Z.EDI_REFRESH,{reportId:t,reportVersionId:r,storyId:e,isCount:n,from:o.code})}function u(e,t){return(0,i.Kz)(s.Z.EDI_DELETE,{storyId:e,errorCode:t})}function d(e,t,r){return(0,i.Kz)(e,{storyId:t,storyVersionId:r})}function c(e,t){return d(s.Z.EDI_CORRELATION_CLICK,e,t)}function h(e,t){return d(s.Z.EDI_LOAD_MORE_INSIGHTS,e,t)}function p(e,t,r){return(0,i.Kz)(s.Z.EDI_FILTER_INSIGHTS,{storyId:e,storyVersionId:t,filter:r})}function g(e){return(0,i.Kz)(s.Z.EDI_COLUMN_PROFILE_CARD_CLICK,{storyId:e})}function m(e){return(0,i.Kz)(s.Z.EDI_COLUMN_PROFILE_ANALYZE_FURTHER,{storyId:e})}},39213:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},39713:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(57244),s=r(8429);const n="Custom";class o{static canHaveCustomMaps(){return i.Z.has(i.Z.ORG_HAS_ECLAIRNG_API)&&i.Z.has(i.Z.ORG_HAS_CUSTOM_CHOROPLETH)}static canManageMaps(){return o.canHaveCustomMaps()&&i.Z.has(i.Z.USER_CAN_MANAGE_MAPS)}static getMapLabel({label:e,name:t,namespace:r,isCustom:i}){const n=e||t;return i?null!=r?s.Z.getLabel("EclairNgMapLabels","customMapLabelWithNamespace",n,r):s.Z.getLabel("EclairNgMapLabels","customMapLabelNoNamespace",n):s.Z.getLabel("EclairNgMapTypeLabels",t)||n}static getCustomMapJsonName(e,t){return t?`${n}: ${t}__${e}`:`${n}: ${e}`}}},59678:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>s});r(96486);var i=r(640);class s extends i.Z{}},45455:(e,t,r)=>{"use strict";r.d(t,{F3:()=>l,Xb:()=>o,ZP:()=>n,pK:()=>a});var i=r(96486),s=r(640);class n extends s.Z{}function o(e){return null==e.boundingBox&&(e.boundingBox={}),e}function a(e){const t=(0,i.omit)(e,["id","name","geoData"]);return null==t.boundingBox&&(t.boundingBox={}),t}function l(e){const{projection:t}=e;return t&&(e.projection="albersusa"===t?"AlbersUSA":t.charAt(0).toUpperCase()+t.substring(1)),e}},17839:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(8429);class s{handle(e,t){let r,s=e;switch(e.errorCode){case"201":r=i.Z.getLabel("InsightsEdgemartNotFoundDialog","invalidEdgemartTitle");break;case"216":case"212":case"227":case"260":case"NOT_FOUND":r=t}return r&&(s=e.shard(r)),s}}},56828:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(99095),s=r(88652),n=r(74850),o=r(16045),a=r(61506);class l extends i.Z{getCDPObject(e,t){const r=`ssot/metadata?entityName=${e}`;return this._makeRequest(this._buildFullPath(t?`${r}&dataspace=${t}`:r))}getCDPObjects(e){return this._makeRequest(this._buildFullPath(`ssot/metadata?entityType=${e.apiName}`))}executeQuery(e,t={}){const r={method:s.Z.POST,body:JSON.stringify(e),loggingContext:t.loggingContext,isHighConcurrencyEligible:!0},i=t?.loggingContext;i&&i.tags.length>0&&a.Z.get(o.Z).trigger(new n.Z(i.appContext.appInstanceId,i.requestName,i.tags)),t.useTrino||(r.customHeaders={"User-Agent-Http":"CRMA"});const l="ssot/query";return this._makeRequest(this._buildFullPath(t?.dataspace?`${l}?dataspace=${t.dataspace}`:l),r)}}const u=new l},89407:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},16051:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},70609:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},19032:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},1905:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},12944:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},24765:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(39947);const s=new class{async generateFormula(e,t,r,s){return i.runGenericAuraAction("formulaGeneration",{formulaGenerationInput:{reportMetadata:{reportMetadata:e},categories:t,userRequest:r,isSummaryFormula:s}})}async describeFormula(e,t,r){return i.runGenericAuraAction("formulaGeneration",{formulaGenerationInput:{categories:e,isSummaryFormula:t,formula:r}})}async suggestFormula(e,t,r){return i.runGenericAuraAction("formulaRecommendation",{formulaRecommendationInput:{reportMetadata:{reportMetadata:e},categories:r,isSummaryFormula:t}})}async generateReport(e,t){return i.runGenericAuraAction("generateReport",{reportGenerationInput:{question:e,reportType:t}})}async postLlmFeedback({id:e,generationId:t,feedback:r,feedbackText:s,source:n,applicationName:o,appFeedback:a}){return i.runGenericAuraAction("postLlmFeedback",{feedbackInput:{id:e,generationId:t,feedback:r,feedbackText:s,source:n,applicationName:o,appFeedback:a}})}async answerReportQuestion(e,t){return i.runGenericAuraAction("answerReportQuestion",{reportQuestionInput:{question:e,describedReportMetadata:t}})}getMetricSummary(e){throw new Error("Not Implemented")}getMetricAnswer(e,t,r){throw new Error("Not Implemented")}getSuggestedQuestions(e,t){throw new Error("Not Implemented")}}},14792:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},94683:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},57680:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},98768:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(96486),s=r(24426),n=r(27223),o=r(50656),a=r(81697);class l{constructor(e){this._json=e}getAnalyses(){return this.getAnalysesJson().map((e=>new a.ZP(e)))}getUrl(){return this._json.url}getTotalSize(){return this._json.totalSize}getNextPageUrl(){return this._json.nextPageUrl||""}getAnalysesJson(){return this._json.analyses}getRawJson(){return this._json}}var u=r(56873);const d=new class{async getAnalyses(e){try{return new l(await o.Z.getAnalyses(e.containerId))}catch(e){throw new s.Z(e)}}async getAnalysis(e){let t;try{t=await o.Z.getAnalysis(e)}catch(e){if(!e.id||!(0,i.startsWith)(e.id,"9B4"))throw new s.Z(e);t=e}return new a.ZP(t)}async deleteAnalysis(e){const t=await this.getAnalysis(e);if(t.getStatus().canCancel())return this.patchAnalysis(e,{status:u.Z.REQUEST_TO_DELETE.code});if(t.getStatus().canDelete())return o.Z.deleteAnalysis(e);throw new Error(`Unsupported Status ${t.getStatus().code}`)}async createAnalysis(e){try{return new a.ZP(await o.Z.createAnalysis(e))}catch(e){throw new s.Z(e)}}async patchAnalysis(e,t){try{return new a.ZP(await o.Z.patchAnalysis(e,t))}catch(e){throw new s.Z(e)}}async getInputProfile(e){try{return await o.Z.getInputProfile(e)}catch(e){throw new s.Z(e)}}async sendPayloadToProxy(e){try{const{Body:t}=await o.Z.sendPayloadToProxy(e);return t}catch(e){throw new s.Z(e)}}async getAllGoals(){throw n.notImplemented()}async postGoal(e){throw n.notImplemented()}async postModel(e,t){throw n.notImplemented()}async getRefreshJobs(e){throw n.notImplemented()}async postRefreshJob(e){throw n.notImplemented()}async getRefreshTasks(e){throw n.notImplemented()}async getModelsList(e){throw n.notImplemented()}async getGoal(e){throw n.notImplemented()}async getModel(e,t,r){throw n.notImplemented()}async deleteModel(e,t){throw n.notImplemented()}async deleteGoal(e){throw n.notImplemented()}async updateGoal(e,t){throw n.notImplemented()}async updateModel(e,t,r){throw n.notImplemented()}async revertModel(e,t,r){throw n.notImplemented()}async getModelHistories(e,t){throw n.notImplemented()}async getAIModelsList(e){throw n.notImplemented()}async postAIModel(e){throw n.notImplemented()}async uploadAIModelFile(e,t){throw n.notImplemented()}async getAIModel(){throw n.notImplemented()}async getAIModelCoefficients(){throw n.notImplemented()}async getModelFeatureImportances(e){throw new Error("Not implemented")}async getModelDataSegments(e){throw new Error("Not implemented")}async getAIModelFile(e){throw n.notImplemented()}async deleteAIModel(){throw n.notImplemented()}async getPredictJobs(){throw n.notImplemented()}async createPredictJob(){throw n.notImplemented()}async cancelPredictJob(e){throw n.notImplemented()}async deletePredictJob(e){throw n.notImplemented()}async getStories(e){try{return await o.Z.getStories(e)}catch(e){throw new s.Z(e)}}async getStory(e){throw n.notImplemented()}async getStorySummary(e){throw n.notImplemented()}async getStoryHistories(e){try{return await o.Z.getStoryHistories(e)}catch(e){throw new s.Z(e)}}getStoryHistory(e,t,r){return o.Z.getStoryHistory(e,t)}async patchStory(e,t){try{return await o.Z.patchStory(e,t)}catch(e){throw new s.Z(e)}}async postStory(e){try{return await o.Z.postStory(e)}catch(e){throw new s.Z(e)}}async deleteStory(e){try{return await o.Z.deleteStory(e)}catch(e){throw new s.Z(e)}}async deleteStoryHistory(e,t){try{return await o.Z.deleteStoryHistory(e,t)}catch(e){throw new s.Z(e)}}async compareStoryVersions(e,t){try{return await o.Z.compareStoryVersions(e,t)}catch(e){throw new s.Z(e)}}async patchStoryHistory(e,t,r){throw n.notImplemented()}async getOrgMetrics(e){throw n.notImplemented()}async getModelMetrics(e,t,r){throw n.notImplemented()}async getNarrativeData(e){throw n.notImplemented()}async getModelCard(e){throw n.notImplemented()}async createModelCard(e,t){throw n.notImplemented()}async deleteModelCard(e,t){throw n.notImplemented()}async patchModelCard(e,t,r){throw n.notImplemented()}async getStoryHistorySummary(e,t){throw n.notImplemented()}async postPredict(e){throw n.notImplemented()}async getStoryHistoryDataAlerts(e,t){throw n.notImplemented()}async patchStoryHistoryDataAlert(e,t,r,i){throw n.notImplemented()}async getValidationDatasets(e,t,r){throw n.notImplemented()}async postOptimization(e){throw n.notImplemented()}async postOptimizationJob(e){throw n.notImplemented()}async getOptimizations(){throw n.notImplemented()}async deleteOptimization(e){throw n.notImplemented()}async getOptimizationJobs(e){throw n.notImplemented()}async cancelOptimizationJob(e,t){throw n.notImplemented()}async patchOptimization(e,t){throw n.notImplemented()}}},66596:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(70999);class s extends i.Z{constructor(e){super(e.data),this._json=e}getMetadata(){return this._json.metadata}}},28894:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(70999);class s extends i.Z{constructor(e){super(e.records),this._json=e}getMetadata(){return this._json.metadata}}},73700:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(70999);class s extends i.Z{constructor(e,t=!1){super(e.records,t),this._json=e}getMetadata(){return this._json.metadata[0]}_getJson(){return{...super._getJson(),type:"sql",result:this._json}}}},45992:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(8429),s=r(88652),n=r(99095),o=r(17839);class a{build({search:e,folderId:t,page:r,pageSize:i,sort:s,currentOnly:n,filterGroup:o,templateSourceId:a,isPinned:l,scope:u,orderBy:d,type:c,ids:h}){const p=[];return e&&p.push(`q=${encodeURIComponent(e)}`),t&&p.push(`folderId=${t}`),r&&p.push(`page=${r}`),i&&p.push(`pageSize=${i}`),s&&p.push(`sort=${s}`),n&&p.push("hasCurrentOnly=true"),o&&p.push(`filterGroup=${o}`),a&&p.push(`templateSourceId=${a}`),l&&p.push("isPinned=true"),u&&p.push(`scope=${u}`),d&&p.push(`order=${d}`),c&&p.push(`type=${c}`),h&&p.push(`ids=${h.join(",")}`),p.length>0?`?${p.join("&")}`:""}}class l extends n.Z{async getDashboard(e){try{return this._makeRequest(this._buildFullPath(`tableau/dashboards/${e}`))}catch(e){throw(new o.Z).handle(e,i.Z.getLabel("InsightsErrorDialog","tableauDashboardNotFound"))}}getDashboards({search:e,folderId:t,page:r,pageSize:i,sort:s,scope:n,ids:o}={}){const l=(new a).build({search:e,folderId:t,page:r,pageSize:i,sort:s,scope:n,ids:o});return this._makeRequest(this._buildFullPath(`tableau/dashboards${l}`))}deleteDashboard(e){return this._makeRequest(this._buildFullPath(`tableau/dashboards/${e}`),{method:s.Z.DELETE})}updateDashboard(e,t){return this._makeRequest(this._buildFullPath(`tableau/dashboards/${e}`),{method:s.Z.PATCH,body:JSON.stringify(t)})}}const u=new l},82675:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(640);class s extends i.Z{}},78199:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=(0,r(67294).createContext)(null)},80012:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i=(0,r(67294).createContext)(null)},93748:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(69370),s=r(93640),n=r(61506),o=r(18111),a=r(57244);class l extends i.Z{static getDefaultValue(){return l.APP.hasAccess()?l.APP:l.APP_ASSET_VIEW}#St;constructor({isComponent:e,isTab:t,isOverlay:r,isDisplayHeader:i,isDisplayTabs:s,isDisplayFinder:n,canPresent:o,isNavigateInSameWindow:a,isDisplayNewPageLinks:l,accessCheck:u}){super(),this.isComponent=e,this.isTab=t,this.isOverlay=r,this.isDisplayHeader=i,this.isDisplayTabs=s,this.isDisplayFinder=n,this.canPresent=o,this.isNavigateInSameWindow=a,this.isDisplayNewPageLinks=l,this.#St=u}get isEmbedded(){return this.isComponent||this.isTab}get analyticsMode(){return this.isTab?s.Z.ANALYTICS_TAB:this.isComponent?n.Z.get(o).isInCommunityContext()?s.Z.EMBEDDED_IN_COMMUNITY:s.Z.EMBEDDED:s.Z.ANALYTICS_STUDIO}hasAccess(){return null==this.#St||this.#St()}}l.add("APP","app",new l({isComponent:!1,isTab:!1,isOverlay:!1,isDisplayHeader:!0,isDisplayFinder:!0,isDisplayTabs:!0,canPresent:!0,isNavigateInSameWindow:!0,isDisplayNewPageLinks:!0,accessCheck:()=>a.Z.has(a.Z.USER_HAS_FULL_INSIGHTS_APP)&&!n.Z.get(o).isInCommunityContext()})).add("APP_ASSET_VIEW","appAssetView",new l({isComponent:!1,isTab:!1,isOverlay:!1,isDisplayHeader:!1,isDisplayFinder:!1,isDisplayTabs:!0,canPresent:!0,isNavigateInSameWindow:!0,isDisplayNewPageLinks:!0})).add("TABBED_ASSET_VIEW","tabbedAssetView",new l({isComponent:!0,isTab:!1,isOverlay:!1,isDisplayHeader:!1,isDisplayFinder:!1,isDisplayTabs:!0,canPresent:!1,isNavigateInSameWindow:!0,isDisplayNewPageLinks:!0})).add("ASSET_VIEW","assetView",new l({isComponent:!0,isTab:!1,isOverlay:!1,isDisplayHeader:!1,isDisplayFinder:!1,isDisplayTabs:!1,canPresent:!1,isNavigateInSameWindow:!1,isDisplayNewPageLinks:!0})).add("SMALL_ASSET_VIEW","smallAssetView",new l({isComponent:!0,isTab:!1,isOverlay:!1,isDisplayHeader:!1,isDisplayFinder:!1,isDisplayTabs:!1,canPresent:!1,isNavigateInSameWindow:!1,isDisplayNewPageLinks:!1})).add("CORE_TAB_VIEW","coreTabView",new l({isComponent:!1,isTab:!0,isOverlay:!1,isDisplayHeader:!1,isDisplayFinder:!1,isDisplayTabs:!1,canPresent:!0,isNavigateInSameWindow:!0,isDisplayNewPageLinks:!0})).add("OVERLAY_ASSET_VIEW","overlayedAssetView",new l({isComponent:!1,isTab:!1,isOverlay:!0,isDisplayHeader:!1,isDisplayFinder:!1,isDisplayTabs:!1,canPresent:!1,isNavigateInSameWindow:!0,isDisplayNewPageLinks:!0})).add("SMALL_TABBED_ASSET_VIEW","smallTabbedAssetView",new l({isComponent:!0,isTab:!1,isOverlay:!1,isDisplayHeader:!1,isDisplayFinder:!1,isDisplayTabs:!0,canPresent:!1,isNavigateInSameWindow:!0,isDisplayNewPageLinks:!1})).add("FULL_PAGE","fullPage",new l({isComponent:!1,isTab:!1,isOverlay:!1,isDisplayHeader:!1,isDisplayFinder:!1,isDisplayTabs:!1,canPresent:!1,isNavigateInSameWindow:!1,isDisplayNewPageLinks:!0})).finish()},24293:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var i=r(85188);class s extends i.Z{constructor({appRootElement:e,...t}){super(t),this.appRootElement=e}}var n=r(57244),o=r(61506),a=r(18111),l=r(8160),u=r(10444),d=r(57234);class c{constructor({instanceId:e,pageType:t,pageObject:r,pageRecordId:i,appNavigationType:s,pageReference:n}){this.instanceId=e,this.pageType=t,this.pageObject=r,this.pageRecordId=i,this.appNavigationType=s,this.pageReference=n}}var h=r(69370);class p extends h.Z{}p.add("STANDARD","standard",new p).add("CONSOLE","console",new p).finish();const g=/^[a-z0-9\-_]+$/i;function m(e){if(null==e)return e;const t=g.exec(e);return null!=t?t[0]:void 0}var _=r(21966),f=r(93748);class y extends s{static fromUrlParams(e,t,r,i,s=!1,h=!1,g=!1,b=!0){const C=e.get("mode"),E=null!=C?f.Z.fromCode(C):f.Z.getDefaultValue(),S=e.get("openLocation"),T=e.get("context"),I=e.get("embeddedAppNavigationType"),v=e.get("showHeader"),R=!v||"true"===v.toLowerCase(),w=e.get("showTitle"),A=w?"true"===w.toLowerCase():!E.isEmbedded&&!E.isOverlay,D=e.get("showSharing"),L="PHONE"!==e.get("formFactor")&&(D?"true"===D.toLowerCase():!E.isEmbedded&&!E.isOverlay),M=e.get("showPostToSlack");let N=!0;E.isEmbedded&&(N=null!=M&&"true"===M.toLowerCase());const O=e.get("enableNotifications");let P;P="PHONE"!==e.get("formFactor")&&(!(!n.Z.has(n.Z.USER_CAN_USE_WAVE_NOTIFICATIONS)||o.Z.get(a).isInCommunityContext())&&(!!E.isTab||(!E.isEmbedded||null!=O&&"true"===O.toLowerCase())));const x=e.get("enableSubscriptions");let Z;Z="PHONE"!==e.get("formFactor")&&(!(!n.Z.has(n.Z.USER_CAN_USE_SUBSCRIPTION_EMAILS)||o.Z.get(a).isInCommunityContext())&&(!!E.isTab||(!E.isEmbedded||null!=x&&"true"===x.toLowerCase())));const F="true"===e.get("isS1Mobile"),k=e.get("hideOnError"),B=null!=k&&"true"===k.toLowerCase(),W=m(e.get("embeddedInstanceId")),G=e.get("pageReference"),U="true"===e.get("isConsoleNav");return new y({appInstanceId:W??_.Z.getDeprecatedGlobalSessionId(),appStartTime:i,chromeMode:E,analyticsMode:E.analyticsMode,referrer:l.Z.fromUrlParam(e.get("referrer")),pageContext:null!=T?d.Z.fromCode(T):void 0,licenseType:m(e.get("licenseType")),embeddedContext:null!=W?new c({instanceId:W,pageType:m(e.get("embeddedPageType")),pageObject:m(e.get("embeddedPageObject")),pageRecordId:m(e.get("embeddedPageRecordId")),appNavigationType:null!=I?p.fromCode(I):void 0,pageReference:null!=G?JSON.parse(atob(G)):void 0}):void 0,openLocation:null!=S?u.Z.fromCode(S):u.Z.getDefaultValue(),showHeader:R,showTitle:A,showSharing:L,showPostToSlack:N,enableNotifications:P,enableSubscriptions:Z,hideOnError:B,height:e.get("height"),staticResourceMode:t,appRootElement:r,isConsoleNav:U,isS1Mobile:F,runMode:e.get("runMode"),inLWR:h,isLWCNative:g,wasBackgroundedPreRender:s,isInitialRender:b})}constructor({appInstanceId:e,appStartTime:t,chromeMode:r,analyticsMode:i,referrer:s,pageContext:n,embeddedContext:o,licenseType:a,openLocation:l,showHeader:u,showTitle:d,showSharing:c,showPostToSlack:h,enableNotifications:p,enableSubscriptions:g,hideOnError:m,height:_,staticResourceMode:f,appRootElement:y,isConsoleNav:b,isS1Mobile:C,runMode:E,wasBackgroundedPreRender:S=!1,inLWR:T=!1,isLWCNative:I=!1,isInitialRender:v=!0}){super({appInstanceId:e,appStartTime:t,analyticsMode:i,pageContext:n,embeddedContext:o,referrer:s,staticResourceMode:f,appRootElement:y,isS1Mobile:C}),this.chromeMode=r,this.referrer=s,this.openLocation=l,this.showHeader=u,this.showTitle=d,this.showSharing=c,this.showPostToSlack=h,this.enableNotifications=p,this.enableSubscriptions=g,this.hideOnError=m,this.height=_,this.licenseType=a,this.isConsoleNav=b,this.runMode=E,this.wasBackgroundedPreRender=S,this.inLWR=T,this.isLWCNative=I,this.isInitialRender=v}}},4459:(e,t,r)=>{"use strict";r.d(t,{rd:()=>a,x5:()=>n});var i=r(57244),s=r(40651);const n="all",o=new Map([[s.Z.FOLDER,[s.Z.DASHBOARD,s.Z.TABLEAU_DASHBOARD,s.Z.COMPONENT,s.Z.LENS,s.Z.TEMPLATE,s.Z.STORY,s.Z.DATASET]],[s.Z.LIGHTNING_DASHBOARD_FOLDER,[s.Z.LIGHTNING_DASHBOARD,s.Z.LIGHTNING_DASHBOARD_FOLDER]],[s.Z.LIGHTNING_REPORT_FOLDER,[s.Z.REPORT,s.Z.LIGHTNING_REPORT_FOLDER]]]);function a({isEmbedded:e=!1,folderType:t}={}){return l({isSearch:!0,isEmbedded:e,folderType:t})}function l({isSearch:e=!1,isEmbedded:t=!1,folderType:r}={}){const n=[];if(i.Z.has(i.Z.CAN_USE_WAVE)){i.Z.has(i.Z.USER_CAN_USE_INSIGHTS)&&(n.push(s.Z.FOLDER,s.Z.DASHBOARD),i.Z.has(i.Z.USER_CAN_EDIT_DASHBOARD)&&!t&&n.push(s.Z.COMPONENT));const r=function(){const e=[];i.Z.has(i.Z.CAN_USE_UNIFIED_ANALYTICS)&&e.push(s.Z.LIGHTNING_DASHBOARD,s.Z.REPORT);return e}();r.length>0&&n.push(...r);const o=function(){const e=[];i.Z.has(i.Z.ORG_CAN_VIEW_TABLEAU)&&e.push(s.Z.TABLEAU_DASHBOARD);i.Z.has(i.Z.ORG_CAN_VIEW_TABLEAU_WORKBOOK)&&e.push(s.Z.TABLEAU_WORKBOOK);return e}();o.length>0&&n.push(...o),i.Z.has(i.Z.USER_CAN_USE_INSIGHTS)&&(n.push(s.Z.LENS),t||(n.push(s.Z.DATASET),e||i.Z.hasAll([i.Z.CAN_MANAGE_TEMPLATES_IN_STUDIO])&&n.push(s.Z.TEMPLATE)),i.Z.hasAll([i.Z.USER_CAN_USE_ED_UI,i.Z.ORG_HAS_ED_ON_CORE_PILOT])&&n.push(s.Z.STORY));const a=function(){const e=[];i.Z.has(i.Z.CAN_USE_UNIFIED_ANALYTICS)&&e.push(s.Z.LIGHTNING_REPORT_FOLDER,s.Z.LIGHTNING_DASHBOARD_FOLDER);return e}();a.length>0&&n.push(...a)}return r?n.filter((e=>o.get(r)?.includes(e))):n}},6838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{static finite(e){return new i(e,e.length)}constructor(e,t=e.length,r,i){this.results=e,this.totalCount=t,this.nextFn=r,this.sortingFn=i}async getResults(e=0,t=this.totalCount-e){if(Math.min(this.totalCount,e+t)-this.results.length<=0)return this.results.slice(e,e+t);{const r=await this.getNext();return this.results=this.results.concat(r.results),this.nextFn=r.nextFn,this.getResults(e,t)}}async getSortedResults(e,t,r,i){if(!this.sortingFn)return this.getResults(e,t);const s=await this.sortingFn(r,i);return this.results=s.results,this.nextFn=s.nextFn,this.getResults(e,t)}getTotalCount(){return this.totalCount}async getNext(){return this.nextFn?this.nextFn():new i([],0)}}},3886:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(84198),s=r(50130),n=r(13612),o=r(27223),a=r(8429),l=r(35944);class u{constructor(e=!1){this._isSubTree=e}_init(){this._allNodes=this.getTreeNodes(),this._prevNodes=[]}getAllNodes(){return this._allNodes}getNormalizedTreeNodes(e,t,r){const i=this.getTreeNodes(e,t,r),s=new n.fK.Entity("nodes"),o=new n.fK.Array(s);return s.define({nodes:o}),(0,n.Fv)({id:"root",nodes:i},s).entities.nodes}getTreeNodes(e,t,r){this._cacheExpandedState();let i=this._buildTreeBranches(e,t,r);return 0===i.length?(i=this._getEmptyTree(),this._isEmptyTree=!0):this._isEmptyTree=!1,this._prevNodes=i,i}isEmptyTree(){return this._isEmptyTree}getClassName(){return this.isEmptyTree()?"emptyTree":""}setCommonFilter(e){throw new Error("Not implemented.")}_buildTreeBranches(e,t,r){return o.checkImplemented()}_getEmptyTree(){return this._isSubTree?[]:[{nodes:[],label:a.Z.getLabel("reportBuilder","fieldsTreeNoResult"),type:"item",id:"1",className:"emptyTree"}]}_getItemLabelWithIcon(e,t,r,s){return(0,l.BX)("span",{className:"tree-item-label",title:s,children:[r,(0,l.tZ)(i.Z,{label:t.buttonLabel,iconName:t.iconName,iconSize:t.iconSize,iconVariant:t.iconVariant,iconCategory:t.iconCategory,variant:t.buttonVariant,tabIndex:"-1",className:"fieldsItemIcon",disabled:!0,"aria-hidden":!0}),e]})}_getLabelWithIcon(e,t,r,i,n){return(0,l.BX)("span",{className:i,children:[(0,l.tZ)(s.Z,{category:t,name:r,size:"x-small",assistiveText:n?{label:a.Z.getLabel("FieldTreeAssistiveText","disabledFieldAssistiveText")}:{}}),e]})}_cacheExpandedState(){if(!this._allNodes||0===this._allNodes.length||0===this._prevNodes.length)return;let e=0;for(const t of this._prevNodes){for(;!(e>=this._allNodes.length||t.labelWithoutCount===this._allNodes[e].labelWithoutCount);)e++;e<this._allNodes.length&&(this._allNodes[e].expanded=t.expanded)}}_isExpanded(e){return!(this._allNodes&&this._allNodes.length>e)||!!this._allNodes[e].expanded}_isSearchMatch(e,t){return null!=e.match(new RegExp(t||"","ig"))}}},67149:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const i=new(r(57446).Z);class s{constructor({appContext:e,requestType:t,requestName:r,tags:s=[]}){if(this.appContext=e,this.requestType=t,this.tags=s,null!=r)this.requestName=r;else{const e=i.computeOrSet(t,(e=>e+1),(()=>0));this.requestName=`${t}-${e}`}}}class n{constructor(e,t,r,i){this.appContext=e,this.tabId=t,this.id=r,this.sequenceId=i}getRequestLoggingContext(e,t=[]){const r=`${e}.${null==this.sequenceId?this.id:`${this.sequenceId}.${this.id}`}`;return new s({appContext:this.appContext,requestType:e,requestName:r,tags:t})}}},92855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(68923);class s extends i.Z{constructor(e,t){super("WAVE_QUERY",e.appContext.appInstanceId),this.context=e,this.state=t}setCached(e){return this._wasCached=e,this}setErrorCode(e){return this._errorCode=e,this}}},64609:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("START",new s).add("SUCCESS",new s).add("FAILURE",new s).finish()},21821:(e,t,r)=>{"use strict";r.d(t,{Js:()=>C,T3:()=>E,Wl:()=>f,ZP:()=>T});var i=r(96486),s=r(8429),n=r(53182),o=r(34711),a=r(1611),l=r(44244),u=r(4490),d=r(50308),c=r(91023),h=r(52405),p=r(16898),g=r(71805),m=r(6597),_=r(45080);const f="data-grid-table-cell-total",y="~~isSubtotal~~",b="~~subtotalLabelIndex~~",C="openActionsMenu",E="openSfdcRecord",S={columnWidths:{},onSetGroupSortOrder:()=>{},collapsible:!1,isSortSupported:!0,onSetDetailColumnSortOrder:()=>{},highlight:{groupingDownValues:[],groupingAcrossValues:[]}};class T extends n.ZP{static get WAVE_TABLE_SELECTED_COLUMN(){return"wave-table-selected-column"}_collapsible=!1;_dateVersion=_.Z.getDefaultValue();_shouldTextWrapHeaders=!1;_shouldTextWrapCells=!1;_textWrappedFixedColumnIndices=[];_textWrappedUnfixedColumnIndices=[];constructor(e,t,r,s,n=S,o={},a){super(),this._data=e.slice(),this._metadata=t,this._formatter=r,this._columnProperties=o,this._subTotalRowsIndices=new Set,this._dateVersion=a,n&&(this._options=n,this._collapsible=n.collapsible||!1,null==this._options.allowRecordActions&&(this._options.allowRecordActions=!0),null==this._options.isQuickSortEnabled&&(this._options.isQuickSortEnabled=!0),null==this._options.isSortSupported&&(this._options.isSortSupported=!0),this._isColumnResizingSupported=n.isColumnResizingSupported||!1,this._shouldTextWrapHeaders=n.textWrapHeaders||!1,this._shouldTextWrapCells=n.textWrapCells||!1,this._nextPageFn=n.nextPageFn),this._fixedColumns=[],this._unfixedColumns=[];const l=this._metadata.getGroupings(!0).concat(this._metadata.getUngroupedColumns());if((0,i.uniq)(l).forEach(((e,t)=>this._updateColumnsArrays(e,t))),this.isTextWrapSupported()||(this._shouldTextWrapHeaders=!1,this._shouldTextWrapCells=!1,this._textWrappedFixedColumnIndices=[],this._textWrappedUnfixedColumnIndices=[]),this.hasData())if(this._groupingSummaryColumnsMap=new Map,this._metadata.getSummaryColumnsMap().forEach(((e,t)=>{const r=this._groupingSummaryColumnsMap.get(e);r?r.push(t):this._groupingSummaryColumnsMap.set(e,[t])})),this._lastRowHasTotals=this._metadata.hasSummaryTotals()||this._isTotalRowPresentInLastRow(),this._metadata.allGroupsHaveSummaryColumn())if(!1!==this._options.showSubtotalRows||this._formatter.showMeasuresWhenGroupingsHidden()){this._isLastGroupingCollapsed()&&(this._data=this._buildDataWithOnlySubTotal());const e=Array.from(this._metadata.getSummaryColumnsMap().keys());for(let t=0;t<this._data.length;t++)(e.find((e=>1===this._data[t][e]))||this._data[t][y])&&this._subTotalRowsIndices.add(t)}else this._data=this._buildDataWithoutSubTotals(),this._isLastGroupingCollapsed()&&(this._data=this._buildDataWithoutMeasures());else this._isLastGroupingCollapsed()&&!this._formatter.showMeasuresWhenGroupingsHidden()&&(this._data=this._buildDataWithoutMeasures());this._hasSummaryRow=!1!==this._options.showSummaryRow&&this._lastRowHasTotals,this._imageRowHeight=Math.max(this._getMaxImageRowHeight(!0),this._getMaxImageRowHeight(!1)),this._selectedColumnPosition=this.getSelectedColumnPosition()}getId(){return this._id}async getNextPage(){if(this._nextPageFn){const e=await this._nextPageFn({offset:this.getTotalRows(!1)});if(e){const t=this._lastRowHasTotals?this._data.pop():null;return this._data=t?[...this._data,...e,t]:this._data.concat(e),Promise.resolve(e)}delete this._nextPageFn}return Promise.resolve([])}hasNextPage(){return!!this._nextPageFn&&this._data.length<1e4}getTotalRows(e){return e?this._hasSummaryRow?2:1:this._lastRowHasTotals?this._data.length-1:this._data.length}getTotalColumns(e){return e?this.hasRowIndexColumn()?this._fixedColumns.length+1:this._fixedColumns.length:this._unfixedColumns.length}getRowContentHeight(e,t){const{rowSizeInfo:r}=this._options;if(null!=r){if(this.isHeaderRow(e,t))return this._shouldTextWrapHeaders?n.E_:Math.floor(r.headerFontSize*r.lineHeight);if(t)return Math.floor(r.fontSize*r.lineHeight);if(this._shouldTextWrapCells)return n.E_;{const e=Math.floor(r.fontSize*r.lineHeight*r.numberOfLines);return Math.max(e,this._imageRowHeight)}}return super.getRowContentHeight(e,t)}getRow(e){return this._data[e]}getClickedRowsForAction(e,t,r,i){const s=this.getColumn(t,i,e,r),n=this._formatter.getRecordIdField(s.getName()),o=this._metadata.getGroupingColumnNames(),a=o.indexOf(s.getName()),l=this._data[e];if(!n||-1===a||a>=o.indexOf(n))return[l];const u=o.slice(0,a+1);return this._data.filter((e=>u.every((t=>e[t]===l[t]))))}getCellValue(e,t,r,i){if(this.isRowIndexColumn(t,i))return this.isHeaderRow(e,r)?s.Z.getLabel("ValuesTable","rowIndexHeader"):this.isSummaryRow(e,r)?"":String(this._isRowIndexZeroBased()?e:e+1);if(this.isHeaderRow(e,r))return this.getColumnLabel(t,i);if(this.isSummaryRow(e,r))return this._getSummaryValue(t,i);{const r=this.getColumnName(t,i);return this._data[e][r]}}getCellCategory(e,t){const r=this.getColumnName(e,t);return this._formatter.getCategoryLabelFromColumn(r)}getRowStyleClass(e,t){return this.isSummaryRow(e,t)?"data-grid-table-row-major-top":super.getRowStyleClass(e,t)}getCellStyleClass(e,t,r,i){const n=[];if(this.isHeaderRow(e,r))n.push(super.getCellStyleClass(e,t,r,i));else if(this.isSummaryRow(e,r)){const o=this.getFormattedCellValue(e,t,r,i),a=o===s.Z.getLabel("WaveTable","grandtotal")||o===s.Z.getLabel("WaveTable","summary")||!o;i&&a&&n.push("wave-table-summary-label-cell"),n.push(f)}else this._isSubtotalCell(e,t,r,i)?n.push(f):this.hasActions(e,t,r,i)&&this.getCellValue(e,t,r,i)&&n.push("wave-table-cell-record-actions");return this._isEnableHeaderHover()&&this.isHeaderRow(e,r)&&!this.isRowIndexColumn(t,i)&&(n.push("wave-table-cell-hover"),this._options.isQuickSortEnabled&&n.push("wave-table-cell-hand-cursor")),this.isSelectedColumn(t,i)&&n.push(T.WAVE_TABLE_SELECTED_COLUMN),n.length?n.join(" "):void 0}getCellStyle(e,t,r,s){const n={};if(!this.isHeaderRow(e,r)&&!this.isRowIndexColumn(t,s)&&this.getColumnRenderType(t,s)===h.Z.TEXT){let o,a=!1;this.getColumn(t,s,e,r)&&this.getColumn(t,s,e,r).getParameter("styles")&&(a=(0,i.get)(this.getColumn(t,s,e,r).getParameter("styles"),"bold"),o=(0,i.get)(this.getColumn(t,s,e,r).getParameter("styles"),"linkColor")),a&&(n.fontWeight="bold"),!o&&this.getDefaultAction(e,t,r,s)&&(o="#1b96ff"),o&&!this.isSummaryRow(e,r)&&this.getCellValue(e,t,r,s)&&(n.color=o)}return this.isSummaryRow(e,r)&&(n.fontWeight="bold"),r?n:(this._isSubtotalCell(e,t,r,s)&&(n.fontWeight="bold"),Object.assign(n,this.getCellConditionalFormattingStyles(e,t,r,s)))}getCellConditionalFormattingStyles(e,t,r,i){if(!this.isSubTotalRow(e,r))return this._formatter.getConditionalFormattingStyles(this._data[e],this.getColumn(t,i),this._options.supportedConditionalFormattingStyles)}getCellTextAlignment(e,t,r,i){return this.isHeaderRow(e,r)||this.isRowIndexColumn(t,i)||this.isSummaryRow(e,r)&&i&&0===t?o.Z.LEFT:this.getColumn(t,i).getAlignment()}getColumnWidth(e,t){let r;const s=this.isRowIndexColumn(e,t);if(s&&!this._hasSummaryRow)return 60;const{rowSizeInfo:n,fixedColumnWidth:o,columnWidths:a}=this._options,l=this.getColumnName(e,t);if((0,i.isEmpty)(a)||(r=a[l]),null==r&&null!=n&&this.getColumnRenderType(e,t)===h.Z.IMAGE){let r=d.DEFAULT_IMAGE_WIDTH;return this.getColumn(e,t)&&(r=this.getColumn(e,t).getParameter("width")||d.DEFAULT_IMAGE_WIDTH),r+2*n.horizontalPadding}return null!=r||(0,i.isEmpty)(this._columnProperties)||(0,i.isEmpty)(this._columnProperties[l])||!this._columnProperties[l]?.parameters?.width||(r=this._columnProperties[l].parameters?.width),null!=r||s||null==o||(r=o),null!=r?r:-1}canRowSpanCells(e,t,r,s,n){if(!super.canRowSpanCells(e,t,r,s,n))return!1;if(!n)for(let e=this.getTotalColumns(!0)-1;e>=0;e--){const n=this.getCellValue(t,e,s,!0),o=this.getCellValue(r,e,s,!0);if(!(0,i.isEqual)(n,o))return!1}return!0}canResizeColumn(e,t,r,i){return!!this.isHeaderRow(r,i)&&this._isColumnResizingSupported}isTableCollapsible(){return this._collapsible}isSelectedColumn(e,t){return null!=this._selectedColumnPosition&&e===this._selectedColumnPosition.columnIndex&&t===this._selectedColumnPosition.isFixedColumn}getSelectedColumnPosition(){if(null==this._options.selectedColumn)return;const e=this._options.selectedColumn.getName(),t=this.hasRowIndexColumn()?1:0;for(let r=0;r<this._fixedColumns.length+t;r++){const i=this._fixedColumns[r-t];if(i?.getName()===e)return{columnIndex:r,isFixedColumn:!0}}for(let t=0;t<this._unfixedColumns.length;t++){if(this._unfixedColumns[t].getName()===e)return{columnIndex:t,isFixedColumn:!1}}}setOption(e,t){this._options[e]=t}supportsMajorRowsRendering(){return!0}setMajorRowsIndices(e){this._majorRowsIndices=e}getGroupingsCount(){return this._metadata.getGroupingColumnNames(void 0,{removeCompoundParts:!0}).length}getFormattedCellValue(e,t,r,i,n=!1,o=!1){const a=this.getCellValue(e,t,r,i);return this.isRowIndexColumn(t,i)||this.isHeaderRow(e,r)?String(a):this.isSummaryRow(e,r)&&i?null==a?s.Z.getLabel("Null","display"):"number"==typeof a&&this.getColumn(t,i)?String(this.getColumn(t,i).getFormattedValue(a)):String(a):this.isSubTotalRow(e,r)?this._getSubtotalCellValue(e,t,r,i):this.getColumn(t,i)?this.getColumn(t,i).getFormattedValue(a):void 0}hasData(){return this._data.length>0}isRowIndexColumn(e,t){return this.hasRowIndexColumn()&&t&&0===e}isSummaryRow(e,t){return this._hasSummaryRow&&t&&1===e}isUnFixedHeaderRow(e,t,r){return this.isHeaderRow(e,t)&&!r}isColumnCollapsible(e,t,r,i){const s=this.getColumnName(t,i,e,r),n=this._metadata.getGroupingColumnNames(),o=n.indexOf(s),a=n.length,l=this._metadata.getGroupingColumnNames(!0).length;return-1!==o&&(o!==a-1||a!==l)}isColumnCollapsed(e,t,r,i){const s=this.getColumnName(t,i,e,r),n=this._metadata.getGroupingColumnNames(),o=n.length;return o!==this._metadata.getGroupingColumnNames(!0).length&&0!==o&&n.indexOf(s)===o-1}isGroupingValueCell(e,t,r,i){return!r&&this._isGroupingColumn(e,t,r,i)}isSummaryLabelCell(e,t,r,i){return this._hasSummaryRow&&r&&1===e&&this._isGroupingColumn(e,t,r,i)}isSummaryValueCell(e,t,r,i){return this._hasSummaryRow&&r&&1===e&&this._isUngroupedColumn(e,t,r,i)}isMeasureValueCell(e,t,r,i){return!r&&this._isUngroupedColumn(e,t,r,i)}isDimensionValueCell(e,t,r,i){return!r}isHeaderCellActionable(e,t,r,i){return!0}doesLastRowHaveTotals(){return this._lastRowHasTotals}getMeasureFormat(e){return this._formatter.getMeasureFormat(this.getColumn(e,!1))}getSort(e,t=e,r=!1,i=!0){const s=this.getColumn(t,r);if(s)return this._getColumnSort(s)}getAriaSort(e,t,r,i){if(!this.isHeaderRow(e,i))return;const s=this.getSort(e,t,r,i);return s&&s.ariaSortCode?s.ariaSortCode:void 0}isQuickSortable(e,t,r,i){return this.isHeaderRow(r,i)}isQuickSortEnabled(){return!!this._options.isQuickSortEnabled}hasActions(e,t,r,i){return!r&&!!this.getColumn(t,i)&&this.getColumn(t,i).hasActions()}getDefaultAction(e,t,r,i){return r?void 0:this.getColumn(t,i)?.getDefaultAction()}getColumn(e,t,r,i){const s=t?this._fixedColumns:this._unfixedColumns;return this.hasRowIndexColumn()&&t?s[e-1]:s[e]}getColumnName(e,t,r,i){const s=this.getColumn(e,t,r,i);return s?s.getName():""}getColumnLabel(e,t){return this.getColumn(e,t)?this.getColumn(e,t).getLabel():""}getColumnRenderType(e,t,r,i){const s=this.getColumn(e,t,r,i);return s?s.getRenderType():h.Z.TEXT}getPopoverText(e,t){if(!this.isSummaryRow(e,!0)&&!this._options.isSortSupported&&this._options.isQuickSortEnabled)return s.Z.getLabel("WaveTable","quickSortDisabled")}getMetadata(){return this._metadata}isHeaderCell(e,t,r,i){return r}isDimensionHeaderRow(e,t){return!1}isBlockHeaderRow(e,t){return!1}shouldShowHeaderFilterCheckbox(e,t,r,i){return!1}getColumnDataType(e){const t=this.getMetadata().getColumn(e);switch(t&&t.getType()){case a.Z.DATE:return g.DATE.getCode();case a.Z.MEASURE:return g.DOUBLE.getCode();default:return g.STRING.getCode()}}getGroupingColumnInfo(e,t,r,i){if(this._isGroupingColumn(e,t,r,i))return{name:this.getColumn(t,i,e,r).getName(),sortAggregate:!1}}getGroupingColumnDataType(e){return this.getColumnDataType(e)}getGroupingColumnLabel(e){const t=this.getMetadata().getColumn(e);if(!t)throw new Error(`No column found with name ${e}.`);return this._formatter.columnLabel(t)}getGroupsFromColumnIndex(e,t,r,i){const s=this.getGroupingsCount();if(0===s)return{};const n=this.getTotalColumns(!0);let o;o=this._isGroupingColumn(e,t,r,i)?i?t:n+t:s-1;const a={};for(let t=0;t<=o;t++)t<n?a[this.getColumnName(t,!0,e,!1)]=this.getCellValue(e,t,!1,!0):a[this.getColumnName(t-n,!1,e,!1)]=this.getCellValue(e,t-n,!1,!1);return a}getGroupingValues(e){const t=[],r=this.getTotalColumns(!0);for(let i=0;i<this.getGroupingsCount();i++){const s=i<r,n=s?i:i-r,o=this.getColumnName(n,s);this._metadata.getCompoundTimeColumnNames().has(o)?this._metadata.getCompoundColumnParts(o).forEach((r=>{t.push(this._data[e][r])})):t.push(this.getCellValue(e,n,!1,s))}return t}getSubTotalRowsIndices(){return this._subTotalRowsIndices}isSubTotalRow(e,t){return!t&&this._subTotalRowsIndices.has(e)}hasFixedColumns(){return null!=this._options.numberOfFrozenColumns?this._options.numberOfFrozenColumns>0:this.getMetadata().getGroupingColumnNames().length>0}hasRowIndexColumn(){return!0===this._options.showRowIndexColumn}useHeadersOnHeadersInDomain(e,t,r,i){return!0}isTextWrapSupported(){const e=this.hasRowIndexColumn()?1:0;return this.getTotalColumns(!0)+this.getTotalColumns(!1)-e<=this.getMaxColumnsSupportedForTextWrap()}shouldTextWrapCells(){return this._shouldTextWrapCells}shouldWrapText(e,t,r,i){return this.isHeaderRow(e,r)?this._shouldTextWrapHeaders:this._shouldTextWrapCells&&this.getTextWrappedColumnIndices(i).includes(t)}getTextWrappedColumnIndices(e){return e?this._textWrappedFixedColumnIndices:this._textWrappedUnfixedColumnIndices}getWarnings(e){return this.isTextWrapSupported()||!this._options?.textWrapHeaders&&!this._options?.textWrapCells?{warnings:[]}:{warnings:[s.Z.getLabel("WaveTable","textWrapWarning",this.getMaxColumnsSupportedForTextWrap())]}}get formatter(){return this._formatter}get options(){return this._options}getLoggableMetadata(){return{NUM_COLUMNS:this.getTotalColumns(!0)+this.getTotalColumns(!1),NUM_ROWS:this.getTotalRows(!0)+this.getTotalRows(!1),NUM_GROUPINGS:this._metadata.getGroupings().length}}_shouldUseColumn(e){return!0}_shouldBeFixedColumn(e,t){const r=this._options.numberOfFrozenColumns;if(null!=r){if(this._dateVersion===_.Z.NEW){const e=this._fixedColumns.filter((e=>m.ZP.isCombinedDateColumn(e))),i=e?.map((e=>this._metadata.getCompoundColumnParts(e.getName()).length))?.reduce(((e,t)=>e+t),0);return t-i<r}return t<r}const i=e.getName();return this.getMetadata().hasGroupingColumn(i)&&this.getMetadata().getGroupingIndex(i)<6}_getColumnSort(e){const t=this._metadata.getColumn(e.getName());switch(t?.getSort()){case l.Z.ASC:return p.Z.Ascending;case l.Z.DESC:return p.Z.Descending}}_updateColumnsArrays(e,t){const r=this._enrichColumn(e);null!=r&&this._shouldUseColumn(e)&&!this._fixedColumns.includes(r)&&(this._shouldBeFixedColumn(e,t)?(this._fixedColumns.push(r),this._updateTextWrappedColumnsIndices(e,!0)):(this._unfixedColumns.push(r),this._updateTextWrappedColumnsIndices(e,!1)))}_updateTextWrappedColumnsIndices(e,t){if(this._shouldWrapColumn(e))if(t){const e=this.hasRowIndexColumn()?1:0;this._textWrappedFixedColumnIndices.push(this._fixedColumns.length-1+e)}else this._textWrappedUnfixedColumnIndices.push(this._unfixedColumns.length-1)}_enrichColumn(e){switch(e.getType()){case a.Z.MEASURE:if(!this._isTotalColumn(e,this._metadata.getColumns(a.Z.MEASURE)))return this._enrichMeasureColumn(e);break;case a.Z.DIMENSION:case a.Z.DATE:case a.Z.BOOLEAN:case a.Z.CURRENCY:case a.Z.PERCENT:return this._enrichDimensionColumn(e)}}_shouldWrapColumn(e){return this._shouldTextWrapHeaders||this._shouldTextWrapCells&&e.getType()===a.Z.DIMENSION}_getSummaryLabel(){return s.Z.getLabel("WaveTable","grandtotal")}_getSummaryValue(e,t){if(t){return e-(this.hasRowIndexColumn()?1:0)==0?this._getSummaryLabel():""}if(this.hasData()){const t=(0,i.last)(this._data),r=this.getColumnName(e,!1);return t[r]||t[`${r}${u.Z}`]}return""}_enrichMeasureColumn(e){return new c.Z({column:e,columnProperties:this._columnProperties[e.getName()],formatter:this._formatter,hasActions:!1})}_enrichDimensionColumn(e){return new c.Z({column:e,columnProperties:this._columnProperties[e.getName()],formatter:this._formatter,hasActions:Boolean(this._options.allowRecordActions)&&this._formatter.hasActions(e,this._metadata),defaultAction:this._formatter.getDefaultAction(e)})}_isTotalColumn(e,t){return t.some((t=>t.getName()+u.Z===e.getName()))}_isRowIndexZeroBased(){return!0===this._options.isRowIndexZeroBased}_isEnableHeaderHover(){return!0===this._options.enableHeaderHover}_getMaxImageRowHeight(e){let t=0;for(let r=0,i=this.getTotalColumns(e),s=0<=i;s?r<i:r>i;s?r++:r--){const i=this.getColumn(r,e);if(null!=i&&i.getRenderType()===h.Z.IMAGE){const e=i.getParameter("height")||d.DEFAULT_IMAGE_HEIGHT;e>t&&(t=e)}}return t}_getLabel(e){return e}_getSubtotalCellValue(e,t,r,i){const n=this.getColumn(t,i),o=n.getName(),a=this._metadata.getGroupingColumnNames().reduce(((t,r)=>{const i=this._groupingSummaryColumnsMap.get(r);if(i){i.every((t=>1===this._data[e][t]))&&t.push(r)}return t}),[]);return a.includes(o)?o===a[0]?s.Z.getLabel("WaveTable","subtotal"):"":this._metadata.getGroupingColumnNames().indexOf(o)===this._data[e][b]?s.Z.getLabel("WaveTable","subtotal"):n.getFormattedValue(this._data[e][o])}_isSubtotalCell(e,t,r,i){if(!this.isSubTotalRow(e,r))return!1;const s=this._groupingSummaryColumnsMap.get(this.getColumnName(t,i));return s?s.every((t=>1===this._data[e][t])):!(!this._data[e][y]||this._data[e][b]!==this._metadata.getGroupingColumnNames().indexOf(this.getColumnName(t,i)))}_isGroupingColumn(e,t,r,i){return this._metadata.hasGroupingColumn(this.getColumnName(t,i,e,r))}_isUngroupedColumn(e,t,r,i){return this._metadata.hasUngroupedColumn(this.getColumnName(t,i,e,r))}_isLastGroupingCollapsed(){if(!this._collapsible)return!1;const e=this._metadata.getGroupingColumnNames(),t=this._metadata.getGroupingColumnNames(!0);return e[e.length-1]!==t[t.length-1]}_isTotalRowPresentInLastRow(){if(this.hasData()){const e=(0,i.last)(this._data),t=Array.from(this._metadata.getSummaryColumnsMap().keys());return!!t.length&&t.every((t=>1===e[t]))||this._unfixedColumns.some((t=>null!=e[t.getName()+u.Z]))}return!1}_buildDataWithOnlySubTotal(){const e=this._getSummaryColumnNames();return this._data.filter((t=>e.find((e=>1===t[e]))))}_buildDataWithoutSubTotals(){const e=Array.from(this._metadata.getSummaryColumnsMap(!0).keys());return this._data.filter(((t,r)=>this._lastRowHasTotals&&r===this._data.length-1||!e.find((e=>1===t[e]))&&!t[y]))}_buildDataWithoutMeasures(){const e=[];let t={};const r=this._metadata.getGroupingColumnNames(),s=r[this._metadata.getGroupingColumnNames().length-1];return this._data.forEach((n=>{t[s]!==n[s]&&e.push((0,i.pick)(n,r)),t=n})),e}_getSummaryColumnNames(){const e=this._metadata.getGroupingColumnNames(!0),t=this._metadata.getGroupingColumnNames();let r=this._groupingSummaryColumnsMap;const i=t[t.length-1];let s=e.indexOf(i);const n=e[++s];if(n){r=new Map(this._groupingSummaryColumnsMap);for(const[e,t]of this._metadata.getSummaryColumnsMap(!0))if(t===n){r.set(t,[e]);break}}return Array.from(r.values()).flat()}}},50308:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_IMAGE_HEIGHT:()=>i,DEFAULT_IMAGE_WIDTH:()=>s});const i=50,s=110},4490:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});const i="_total"},91023:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(34711),s=r(83732),n=r(1611),o=r(52405);class a extends s.Z{constructor({column:e,columnProperties:t,formatter:r,hasActions:i,defaultAction:s}){super(e.getType(),e.getName(),e.getValue(),e.getSort()),this._column=e,this._columnProperties=t,this._formatter=r,this._hasActions=i,this._defaultAction=s}getLabel(){return this._column.getType()===n.Z.MEASURE?this._formatter.formatMeasureName(this._column):this._formatter.columnLabel(this._column)}getRenderType(){if(this._columnProperties&&o.Z.hasCode(this._columnProperties.type)){const e=o.Z.fromCode(this._columnProperties.type);return e.isValidColumnType(this.getType())?e:o.Z.TEXT}return o.Z.TEXT}getParameter(e){if(this._columnProperties&&this._columnProperties.parameters)return this._columnProperties.parameters[e]}getAlignment(){const e=this.getParameter("alignment");return null!=e&&i.Z.hasEnumWithName(e)?i.Z.getEnumByName(e):this.getRenderType()===o.Z.IMAGE?i.Z.CENTER:this.getType()===n.Z.MEASURE||this.getType()===n.Z.CURRENCY||this.getType()===n.Z.PERCENT?i.Z.RIGHT:i.Z.LEFT}getFormattedValue(e){return this._column.getType()===n.Z.MEASURE?this._formatter.formatMeasure(this._column,e):this._formatter.formatDimension(this._column,e)}hasActions(){return this._hasActions}getDefaultAction(){return this._defaultAction}getColumn(){return this._column}}},52405:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(69370),s=r(8429),n=r(1611);class o extends i.Z{constructor(e){super(),this._validColumnTypes=new Set(e)}getLabel(){return s.Z.getLabel("WaveTableColumn",this.code)}isValidColumnType(e){return this._validColumnTypes.has(e)}}o.add("TEXT","text",new o(n.Z.enums())).add("BAR","bar",new o([n.Z.MEASURE])).add("IMAGE","image",new o([n.Z.DIMENSION]))},26734:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(29551);class s{onAction(e,t){e instanceof i.Z?e.onClick(t):this._onCustomAction(e,t)}getMenuGroupIndex(){return 1}useSLDS(){return!1}getSLDSDropdownAlign(){return"left"}_onCustomAction(e,t){throw new Error("Not implemented.")}}},29551:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(26374);class s extends i.Z{constructor(e,t,r,i,s,n,o){super(e,t,r,s,n,o),this._onClick=i}onClick(e=!1){this._onClick(e)}}},13652:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{static fromExtendedHash(e){return null==e?this.getDefaultValue():this.fromCode(e.split("/")[0])}constructor(e){super(),this._codeForLogging=e}get codeForLogging(){return this._codeForLogging??this.code}}},45956:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i=r(96486),s=r(79646),n=r(52757),o=r(11652),a=r(5305),l=r(73096),u=r(5082),d=r(13728),c=r(8429);class h extends s.Z{static#Tt=new Map;static getCategories(e=!0){return h.enums().filter((t=>e||!t.isFiscal)).map((e=>e.category))}static getPresetByHash(e){return h.#Tt.get(e)}static getFilteredPresets(e){if((0,i.isEmpty)(e))return h.getCategories();{const t=new Map;return h.getCategories().forEach((r=>r.getPresets().forEach((r=>{e.indexOf(r.getCode())>-1&&t.set(r.getCode(),r)})))),0===t.size?h.getCategories():[new a.Z(c.Z.getLabel("RelativeDateRangeSelector","customFilterPresets"),Array.from(t.values()))]}}constructor(e,t){super(),this.category=e,this.isFiscal=t,this._cachePresets(e)}getPresets(){return this.category.getPresets()}_cachePresets(e){e.getPresets()?.forEach((e=>{const t=e.getHash();if(h.#Tt.has(t))throw new Error(`Duplicate preset hash '${t}'.`);h.#Tt.set(t,e)}))}}h.add("FISCAL_YEAR",new h(new a.Z(new n.Z("RelativeDateRangeSelector","fiscalYear"),[new o.Z(new n.Z("RelativeToDateUpperCase","currentFiscalYear"),new l.Z(new u.Z(d.Z.YEAR,0,!0),new u.Z(d.Z.YEAR,0,!0)),"currentFiscalYear"),new o.Z(new n.Z("RelativeToDateUpperCase","previousFiscalYear"),new l.Z(new u.Z(d.Z.YEAR,-1,!0),new u.Z(d.Z.YEAR,-1,!0)),"previousFiscalYear"),new o.Z(new n.Z("RelativeToDateUpperCase","nextFiscalYear"),new l.Z(new u.Z(d.Z.YEAR,1,!0),new u.Z(d.Z.YEAR,1,!0)),"nextFiscalYear"),new o.Z(new n.Z("RelativeToDateUpperCase","currentFiscalYearToDate"),new l.Z(new u.Z(d.Z.YEAR,0,!0),new u.Z(d.Z.DAY,0,!1)),"currentFiscalYearToDate"),new o.Z(new n.Z("RelativeToDateUpperCase","previousFiscalYearToDate"),new l.Z(new u.Z(d.Z.YEAR,-1,!0),new u.Z(d.Z.DAY,0,!1)),"previousFiscalYearToDate")]),!0)).add("FISCAL_QUARTER",new h(new a.Z(new n.Z("RelativeDateRangeSelector","fiscalQuarter"),[new o.Z(new n.Z("RelativeToDateUpperCase","currentFiscalQuarter"),new l.Z(new u.Z(d.Z.QUARTER,0,!0),new u.Z(d.Z.QUARTER,0,!0)),"currentFiscalQuarter"),new o.Z(new n.Z("RelativeToDateUpperCase","previousFiscalQuarter"),new l.Z(new u.Z(d.Z.QUARTER,-1,!0),new u.Z(d.Z.QUARTER,-1,!0)),"previousFiscalQuarter"),new o.Z(new n.Z("RelativeToDateUpperCase","nextFiscalQuarter"),new l.Z(new u.Z(d.Z.QUARTER,1,!0),new u.Z(d.Z.QUARTER,1,!0)),"nextFiscalQuarter"),new o.Z(new n.Z("RelativeToDateUpperCase","currentFiscalQuarterToDate"),new l.Z(new u.Z(d.Z.QUARTER,0,!0),new u.Z(d.Z.DAY,0,!1)),"currentFiscalQuarterToDate"),new o.Z(new n.Z("RelativeToDateUpperCase","previousFiscalQuarterToDate"),new l.Z(new u.Z(d.Z.QUARTER,-1,!0),new u.Z(d.Z.DAY,0,!1)),"previousFiscalQuarterToDate")]),!0)).add("CALENDAR_YEAR",new h(new a.Z(new n.Z("RelativeDateRangeSelector","calendarYear"),[new o.Z(new n.Z("RelativeToDateUpperCase","currentYear"),new l.Z(new u.Z(d.Z.YEAR,0,!1),new u.Z(d.Z.YEAR,0,!1)),"currentYear"),new o.Z(new n.Z("RelativeToDateUpperCase","previousYear"),new l.Z(new u.Z(d.Z.YEAR,-1,!1),new u.Z(d.Z.YEAR,-1,!1)),"previousYear"),new o.Z(new n.Z("RelativeToDateUpperCase","nextYear"),new l.Z(new u.Z(d.Z.YEAR,1,!1),new u.Z(d.Z.YEAR,1,!1)),"nextYear"),new o.Z(new n.Z("RelativeToDateUpperCase","currentYearToDate"),new l.Z(new u.Z(d.Z.YEAR,0,!1),new u.Z(d.Z.DAY,0,!1)),"currentYearToDate"),new o.Z(new n.Z("RelativeToDateUpperCase","previousYearToDate"),new l.Z(new u.Z(d.Z.YEAR,-1,!1),new u.Z(d.Z.DAY,0,!1)),"previousYearToDate")]),!1)).add("CALENDAR_QUARTER",new h(new a.Z(new n.Z("RelativeDateRangeSelector","calendarQuarter"),[new o.Z(new n.Z("RelativeToDateUpperCase","currentQuarter"),new l.Z(new u.Z(d.Z.QUARTER,0,!1),new u.Z(d.Z.QUARTER,0,!1)),"currentQuarter"),new o.Z(new n.Z("RelativeToDateUpperCase","previousQuarter"),new l.Z(new u.Z(d.Z.QUARTER,-1,!1),new u.Z(d.Z.QUARTER,-1,!1)),"previousQuarter"),new o.Z(new n.Z("RelativeToDateUpperCase","nextQuarter"),new l.Z(new u.Z(d.Z.QUARTER,1,!1),new u.Z(d.Z.QUARTER,1,!1)),"nextQuarter"),new o.Z(new n.Z("RelativeToDateUpperCase","currentQuarterToDate"),new l.Z(new u.Z(d.Z.QUARTER,0,!1),new u.Z(d.Z.DAY,0,!1)),"currentQuarterToDate"),new o.Z(new n.Z("RelativeToDateUpperCase","previousQuarterToDate"),new l.Z(new u.Z(d.Z.QUARTER,-1,!1),new u.Z(d.Z.DAY,0,!1)),"previousQuarterToDate")]),!1)).add("CALENDAR_MONTH",new h(new a.Z(new n.Z("RelativeDateRangeSelector","calendarMonth"),[new o.Z(new n.Z("RelativeToDateUpperCase","currentMonth"),new l.Z(new u.Z(d.Z.MONTH,0,!1),new u.Z(d.Z.MONTH,0,!1)),"currentMonth"),new o.Z(new n.Z("RelativeToDateUpperCase","previousMonth"),new l.Z(new u.Z(d.Z.MONTH,-1,!1),new u.Z(d.Z.MONTH,-1,!1)),"previousMonth"),new o.Z(new n.Z("RelativeToDateUpperCase","nextMonth"),new l.Z(new u.Z(d.Z.MONTH,1,!1),new u.Z(d.Z.MONTH,1,!1)),"nextMonth"),new o.Z(new n.Z("RelativeToDateUpperCase","currentMonthToDate"),new l.Z(new u.Z(d.Z.MONTH,0,!1),new u.Z(d.Z.DAY,0,!1)),"currentMonthToDate"),new o.Z(new n.Z("RelativeToDateUpperCase","previousMonthToDate"),new l.Z(new u.Z(d.Z.MONTH,-1,!1),new u.Z(d.Z.DAY,0,!1)),"previousMonthToDate")]),!1)).add("CALENDAR_WEEK",new h(new a.Z(new n.Z("RelativeDateRangeSelector","calendarWeek"),[new o.Z(new n.Z("RelativeToDateUpperCase","currentWeek"),new l.Z(new u.Z(d.Z.WEEK,0,!1),new u.Z(d.Z.WEEK,0,!1)),"currentWeek"),new o.Z(new n.Z("RelativeToDateUpperCase","previousWeek"),new l.Z(new u.Z(d.Z.WEEK,-1,!1),new u.Z(d.Z.WEEK,-1,!1)),"previousWeek"),new o.Z(new n.Z("RelativeToDateUpperCase","nextWeek"),new l.Z(new u.Z(d.Z.WEEK,1,!1),new u.Z(d.Z.WEEK,1,!1)),"nextWeek")]),!1)).add("CALENDAR_DAY",new h(new a.Z(new n.Z("RelativeDateRangeSelector","calendarDay"),[new o.Z(new n.Z("RelativeToDateUpperCase","last7Days"),new l.Z(new u.Z(d.Z.DAY,-7,!1),new u.Z(d.Z.DAY,0,!1)),"last7Days"),new o.Z(new n.Z("RelativeToDateUpperCase","last30Days"),new l.Z(new u.Z(d.Z.DAY,-30,!1),new u.Z(d.Z.DAY,0,!1)),"last30Days"),new o.Z(new n.Z("RelativeToDateUpperCase","last90Days"),new l.Z(new u.Z(d.Z.DAY,-90,!1),new u.Z(d.Z.DAY,0,!1)),"last90Days"),new o.Z(new n.Z("RelativeToDateUpperCase","last180Days"),new l.Z(new u.Z(d.Z.DAY,-180,!1),new u.Z(d.Z.DAY,0,!1)),"last180Days"),new o.Z(new n.Z("RelativeToDateUpperCase","next7Days"),new l.Z(new u.Z(d.Z.DAY,0,!1),new u.Z(d.Z.DAY,7,!1)),"next7Days"),new o.Z(new n.Z("RelativeToDateUpperCase","next30Days"),new l.Z(new u.Z(d.Z.DAY,0,!1),new u.Z(d.Z.DAY,30,!1)),"next30Days"),new o.Z(new n.Z("RelativeToDateUpperCase","next90Days"),new l.Z(new u.Z(d.Z.DAY,0,!1),new u.Z(d.Z.DAY,90,!1)),"next90Days"),new o.Z(new n.Z("RelativeToDateUpperCase","next180Days"),new l.Z(new u.Z(d.Z.DAY,0,!1),new u.Z(d.Z.DAY,180,!1)),"next180Days")]),!1)).finish()},18001:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("ATTACHED_STEP",new s).add("RESULT_BINDING",new s).add("SELECTION_BINDING",new s).add("RESULT_DYNAMIC",new s).add("SELECTION_DYNAMIC",new s).add("LAZY_LOAD",new s).add("ATTACHED_COMPONENT",new s).finish()},22450:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(69370);class n extends s.Z{getDescriptionLabel(){return i.Z.getLabel("AggregateMeasurePicker",this.code)}getCode(){return this.code}}n.add("SUM","sum",new n).add("COUNT","count",new n).add("AVG","avg",new n).add("MAX","max",new n).add("MIN","min",new n).add("UNIQUE","unique",new n).add("MEDIAN","median",new n).add("FIRST","first",new n).add("LAST","last",new n).add("STDDEV","stddev",new n).add("STDDEVP","stddevp",new n).add("VAR","var",new n).add("VARP","varp",new n).add("NONE","noAggregation",new n).finish()},14201:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>g});var i=r(96486),s=r(8429),n=r(74978),o=r(31058);const a="AND",l="NOT",u="(",d=[a,"OR"],c=[...d,l,u,")"];class h{constructor(e,t,r=[],i=!1){this.value=e,this.parent=t,this.children=r,this.parentheses=i}removeChild(e){this.children.splice(e,1)}isLeaf(){return 0===this.children.length}isUnaryOperator(){return 1===this.children.length}}class p extends Error{constructor(e,...t){super(s.Z.getLabel("BooleanFilterLogic",e,...t)),this.code=e}}class g{constructor(e,t=!0){if(this.logic=e,this.requireAllFilters=t,this.error=null,this.tree=null,this.logic){const e=this.getFilters();this.validate(this.logic,i.max(e))}}getLogic(){return this.logic}getAndClearError(){const e=this.error;return this.error=null,e}getTree(){return this.tree}getDefault(e){return this._getDefaultJoin("AND")(e)}getDefaultOR(e){return this._getDefaultJoin("OR")(e)}_getDefaultJoin(e){return t=>1===t?"1":t>1?this._getDefaultJoin(e)(t-1)+" "+e+" "+t.toString():""}getFilters(){const e=this._tokenize(this.logic);return i.uniq(e.filter(i.isInteger))}removeFilter(){this.tree=null,this.error=null,this.logic=null}matches(e){return this.logic===this._normalize(e)}insert(e){const t=new h(e);if(this.tree){const e=this.tree;if(e.value===a)e.children.push(t);else{const r=new h(a,null,[e,t]);e.value!==l&&(e.parentheses=!0),e.parent=r,this.tree=r}t.parent=this.tree}else this.tree=t;this.logic=this.stringify()}delete(e){const t=this.getFilters();this.tree&&-1!==t.indexOf(e)&&(1!==t.length?(this.tree=this._deleteNode(e,this.tree),this.tree&&(this.tree.parentheses=!1),this.logic=this.stringify()):this.removeFilter())}_deleteNode(e,t,r=0){for(let r=0;r<t.children.length;r++){const i=t.children[r];if(i.isLeaf())i.value===e?(t.removeChild(r),r-=1):"number"==typeof i.value&&i.value>e&&(i.value-=1);else{this._deleteNode(e,i,r)||(r-=1)}}if(t.value===l&&0===t.children.length&&t.parent){return t.parent.removeChild(r),null}if(i.includes(d,t.value))if(1===t.children.length){const e=t.parent;if(!e)return t.parentheses=!1,t.parent=null,t.children[0];e.children[r]=t.children[0],t.children[0].parent=e}else if(0===t.children.length&&t.parent){return t.parent.removeChild(r),null}return t}validate(e,t){e||(this.error=new p("booleanFilterValueEmpty"));const r=this._tokenize(this._normalize(e));if(this._validateSyntax(r),this.error)return;if(this._validateNumbers(r,t),this.error)return;const i=this._buildTree(r,null,!1);i&&(i.parentheses=!1),this.error||(this.tree=i,this.error=null,this.logic=this.stringify())}stringify(){return this.tree?this._stringify(this.tree):null}removeUnusedFiltersInLogic(){const e=this.getFilters().sort(),t=new Map;e.forEach(((e,r)=>t.set(e,r+1)));const r=this.getTree();r&&(this._traverseTreeAndReplaceFilterDigit(r,t),this.logic=this._stringify(r))}_traverseTreeAndReplaceFilterDigit(e,t){e.isLeaf()&&e.value&&(e.value=t.get(parseInt(e.value))),e.children.forEach((e=>this._traverseTreeAndReplaceFilterDigit(e,t)))}_stringify(e){if(e.isLeaf()&&e.value)return e.value.toString();let t="";if(e.value===l&&e.value)t+=e.value+" "+this._stringify(e.children[0]);else for(let r=0;r<e.children.length;r++)t+=0===r?this._stringify(e.children[r]):" "+this._stringify(e.children[r]),r<e.children.length-1&&e.value&&(t+=" "+e.value);return e.parentheses&&(t="("+t+")"),t}_normalize(e){return(0,n.trim)(e).toUpperCase()}_tokenize(e){return e?e.replace(/\(/g," ( ").replace(/\)/g," ) ").split(" ").reduce(((e,t)=>{if(t.length>0){const r=(0,o.He)(t);i.isInteger(r)?e.push(r):e.push(t)}return e}),[]):[]}_validateNumbers(e,t){const r=e.filter(i.isInteger),s=i.sortedUniq(i.sortBy(r));let n=0;for(;n<s.length;n++){const e=s[n];if(e>t)return void(this.error=new p("booleanFilterInvalidFilter",e));if(this.requireAllFilters&&e!==n+1)return void(this.error=new p("booleanFilterUnusedFilter"))}this.requireAllFilters&&n!==t&&(this.error=new p("booleanFilterUnusedFilter"))}_validateSyntax(e){const t=[];for(let r=0;r<e.length;r++){const s=e[r];if(!i.isInteger(s)&&!i.includes(c,s))return void(this.error=new p("booleanFilterInvalidToken",s));if(s===l&&(r===e.length-1||e[r+1]===a||"OR"===e[r+1]))return void(this.error=new p("booleanFilterInvalidOperator"));if(i.includes(d,s)&&(0===r||r===e.length-1||i.includes(d,e[r+1])))return void(this.error=new p("booleanFilterInvalidOperator"));if(i.isInteger(s)&&r!==e.length-1&&i.isInteger(e[r+1]))return void(this.error=new p("booleanFilterInvalidOperator"));if(s===u&&t.push(s),")"===s){if(0===t.length)return void(this.error=new p("booleanFilterUnmatchedParens"));t.pop()}}0!==t.length&&(this.error=new p("booleanFilterUnmatchedParens"))}_matchRightParen(e){const t=[];for(let r=0;r<e.length;r++){const i=e[r];if(i===u&&t.push(i),")"===i&&t.pop(),0===t.length)return r}return 0}_buildTree(e,t,r){if(0===e.length)return this.error=new p("booleanFilterInvalidSyntax"),null;if(1===e.length)return i.isInteger(e[0])?new h(e[0],t):(this.error=new p("booleanFilterUnexpectedToken",e[0]),null);let s=new h;for(let t=0;t<e.length;t++)if(e[t]===l){let r;const n=new h(l);if(e[t+1]===u){const s=this._matchRightParen(i.slice(e,t+1,e.length))+t+1;r=this._buildTree(i.slice(e,t+2,s),n,!0),t=s}else if(e[t+1]!==l)r=this._buildTree([e[t+1]],n,!1),t+=1;else{let s=t+2,o=!1;for(;s<e.length;){if(i.isInteger(e[s])){s+=1,o=!0;break}if(e[s]===u){s=this._matchRightParen(i.slice(e,s,e.length))+s+1,o=!0;break}s+=1}if(!o)return this.error=new p("booleanFilterInvalidSyntax"),null;r=this._buildTree(i.slice(e,t+1,s),n,!1),t=s-1}if(!r)return null;n.children=[r],n.parent=s,s.children.push(n)}else if(i.isInteger(e[t])){const r=this._buildTree([e[t]],s,!1);r&&s.children.push(r)}else if(e[t]===u){const r=this._matchRightParen(i.slice(e,t,e.length))+t,n=this._buildTree(i.slice(e,t+1,r),s,!0);if(!n)return null;s.children.push(n),n.parent=s,t=r}else if(i.includes(d,e[t])){if(0===t||t===e.length-1)return this.error=new p("booleanFilterUnexpectedToken",e[t]),null;if(s.value){if(s.value!==e[t])return this.error=new p("booleanFilterSuccessiveAndOr"),null}else s.value=e[t]}if(!s.value){if(s.children.length>1){const e=s.children[1].value?[s.children[1].value]:[];return this.error=new p("booleanFilterUnexpectedToken",...e),null}s=s.children[0]}return s.parent=t,s.parentheses=r,s}}},67746:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(96486);class s{constructor(e=[],t=[],r,s=!0){this.chartFilters=e,this.linkedFilters=t,this.includeDynamicFilters=s,i.isNumber(r)?this.numOfDynamicFiltersInAPI=r:this.numOfDynamicFiltersInAPI=this.chartFilters.length+this.linkedFilters.length}getChartFilters(){return this.chartFilters}getLinkedFilters(){return this.linkedFilters}shouldIncludeFilters(e){this.includeDynamicFilters=e}getShouldIncludeFilters(){return this.includeDynamicFilters}getNumDynamicFiltersInAPI(){return this.numOfDynamicFiltersInAPI}getFilters(){return[...this.chartFilters,...this.linkedFilters]}}},76162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addFiltersToQuery:()=>n,removeUnusedFiltersInQuery:()=>o});var i=r(14201),s=r(78190);function n(e,t){e.sources?Array.isArray(t)||function(e,t){const r=(0,s.makeMutableQuery)(e);Object.keys(t).forEach((e=>{const s=r.getMutableSourceFilter(e);let n=s&&s.filters?s.filters.length:0;const o=t[e].filters;if(o.forEach((t=>r.addSourceFilter(e,t))),t[e].booleanFilterLogic&&r.updateBooleanFilterLogic(e,t[e].booleanFilterLogic),s&&s.booleanFilterLogic){const e=new i.ZP(s.booleanFilterLogic,!1);for(let t=0;t<o.length;t++)e.insert(++n);s.updateBooleanFilterLogic(e.getLogic())}}))}(e,t):Array.isArray(t)&&function(e,t){if(e.filters=e.filters||[],e.booleanFilterLogic){const r=new i.ZP(e.booleanFilterLogic,!1);let s=e.filters.length;for(let e=0;e<t.length;e++)r.insert(++s);const n=r.getLogic();n&&(e.booleanFilterLogic=n)}Array.prototype.push.apply(e.filters,t)}(e,t)}function o(e){e.sources?function(e){const t=(0,s.makeMutableQuery)(e);t.getNonDerivedMutableSources().forEach((e=>{const r=t.getMutableSourceFilter(t.getSourceFilterKey(e.name));if(r&&r.filters.length&&r.booleanFilterLogic){const e=new i.ZP(r.booleanFilterLogic,!1),t=e.getFilters();if(t.length<r.filters.length){r.setFilters(r.filters.filter(((e,r)=>-1!==t.indexOf(r+1))).map((e=>e.json))),e.removeUnusedFiltersInLogic();const i=e.getLogic();i&&r.updateBooleanFilterLogic(i)}}}))}(e):function(e){const t=e.filters||[],r=e.booleanFilterLogic;if(t.length&&r){const s=new i.ZP(r,!1),n=s.getFilters();if(n.length<t.length){e.filters=t.filter(((e,t)=>-1!==n.indexOf(t+1))),s.removeUnusedFiltersInLogic();const r=s.getLogic();r&&(e.booleanFilterLogic=r)}}}(e)}},27393:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(57244),s=r(61506),n=r(640);class o extends n.Z{}class a{async getFiscalGranularity(){const e=i.Z.has(i.Z.ORG_HAS_WAVE_IS_YEAR_END_FISCAL_YEAR),t=await s.Z.get(o).getFiscalYearSettings(),r=new Map;return Object.entries(t.reduce(((t,i)=>{if(t[i.FiscalYearSettingsId]||(t[i.FiscalYearSettingsId]={}),"Year"===i.Grain)r.set(i.FiscalYearSettingsId,this._getFiscalYear(i,e));else{const e="Period"===i.Grain?"fiscalMonth":`fiscal${i.Grain}`;t[i.FiscalYearSettingsId][e]=i.Total}return t}),{})).reduce(((e,t)=>{const i=r.get(t[0]);return i&&(e[i]=t[1]),e}),{})}_getFiscalYear(e,t){return e[t?"EndDate":"StartDate"].split("-")[0]}}},88195:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this._valid=e,this._message=t}isValid(){return this._valid}getMessage(){return this._message}}},46308:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(723);class s extends i{getCode(){return this._value.code}}s.build(s,{TIME_SERIES:{code:"timeSeries"},PREDICTION_INTERVAL:{code:"predictionInterval"}})},43794:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var i=r(8429),s=r(44887),n=r(96486),o=r(44298),a=r(72713),l=r(36938),u=r(66053),d=r(49989),c=r(6204),h=r(56263),p=r(88195);class g extends l{validate(e){if(!e)throw new Error("validationContext must be provided");const t=e.getExtendedMetadata();let r=!1,s=!1;for(const n of this.getInputs())if(n!==o.DIM_TYPE.ALL){if(t.isMeasure(n)&&!t.getField(n).isDerived()){if(r=!0,s)return new p.Z(!1,i.Z.getLabel("FormulaError","noMixedMeasureAndColRefsFormulaError"));continue}if(!t.isDimension(n)&&!a.isCompoundStr(n)&&null==t.getDateTimeFieldGrainByColumnName(n)){if(e.getColRefs().includes(n)){if(s=!0,r)return new p.Z(!1,i.Z.getLabel("FormulaError","noMixedMeasureAndColRefsFormulaError"));if(n!==e.getCurrentColRef())continue;return new p.Z(!1,i.Z.getLabel("FormulaError","selfReferenceError",e.getCurrentColRef()))}return new p.Z(!1,i.Z.getLabel("FormulaError","unknownIdentifierError",n))}}const l=this.getExpressionTree().select((e=>e instanceof u.FunctionBranch));if((0,n.isEmpty)(l)){for(const e of this.getInputs())if(t.isMeasure(e)&&!t.getField(e).isDerived())return new p.Z(!1,i.Z.getLabel("FormulaError","noMeasureAllowedError",e))}else{const e=l.map((e=>e.getFunctionName())),t=(0,n.difference)(e,c.Z.enums().map((e=>e.code)));if(!(0,n.isEmpty)(t))return new p.Z(!1,i.Z.getLabel("FormulaError","unknownFunctionError",t.join(", ")))}const d=[];return this._validateReturnDataType(this.getExpressionTree().getRootBranch(),e,d),(0,n.isEmpty)(d)?new p.Z(!0):new p.Z(!1,i.Z.getLabel("FormulaError","invalidReturnTypeError"))}isColumnAliasFormula(e){for(const t of this.getInputs())if(!e.includes(t))return!1;return!0}hasWindowFunction(){return(0,n.size)(this.getExpressionTree().select((e=>e instanceof u.WindowFunctionBranch)))>0}_validateReturnDataType(e,t,r){if(!(e instanceof u.WindowFunctionBranch)){if(e instanceof u.CaseStatementBranch)return(()=>{const i=[];for(const s of e.getChildBranches().slice(1)){const e=s instanceof u.CaseWhenThenStatementBranch?s.getChildBranches()[1]:s.getChildBranches();i.push(this._validateReturnDataType(e,t,r))}return i})();if(e instanceof u.FunctionBranch){for(const i of e.getChildBranches())this._validateReturnDataType(i,t,r);const i=e.getFunction().outputDataTypes;if(!i.has(h.default.NUMBER)&&!i.has(h.default.STRING))return r.push(e),r;if(1===i.size)return r.splice(0,r.length)}else{if(!(e instanceof u.ValueBranch))return e.getChildBranches().map((e=>this._validateReturnDataType(e,t,r)));switch(e.getType()){case d.ID:{const i=e.getExpressionBranch()[1];if(!(t.getColRefs().includes(i)||t.getExtendedMetadata().isMeasure(i)||t.getExtendedMetadata().isDimension(i)||t.getExtendedMetadata().isDateEpochField(i)))return r.push(e),r;break}}}}}}var m=r(5033);class _{parse(e){let t;try{t=s.parse(e)[0]}catch(t){throw new m(i.Z.getLabel("FormulaError","formulaParseError",e),e)}if("expr"!==t.type)throw new m(i.Z.getLabel("FormulaError","formulaParseError",e),e);return new g(t.expr)}}},42323:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i=r(7938),s=r(56087),n=r(29910),o=r(96486),a=r(5918);class l extends a.Z{result={fields:[],hasWindowFunc:!1};exitIdentifier(e){this.result.fields&&!(0,o.includes)(this.result.fields,e.getText())&&this.result.fields.push(e.getText())}exitEscaped_identifier(e){this.result.fields&&!(0,o.includes)(this.result.fields,e.getText())&&this.result.fields.push(e.getText())}exitExprWindowFunc(e){this.result.hasWindowFunc=!0}}var u=r(8429),d=r(88195),c=r(44298),h=r(72713);class p{#It;#vt;constructor(e,t){this.#It=e,this.#vt=t}isColumnAliasFormula(e){for(const t of this.#It.fields)if(e.includes(t))return!0;return!1}hasWindowFunction(){return this.#It.hasWindowFunc}getInputs(){return this.#It.fields}getErrors(){return this.#vt}validate(e){if(!e)throw new Error("validationContext must be provided");const t=e.getExtendedMetadata();let r=!1,i=!1;for(const s of this.getInputs())if(s!==c.DIM_TYPE.ALL){if(t.isMeasure(s)&&!t.getField(s).isDerived()){if(r=!0,i)return new d.Z(!1,u.Z.getLabel("FormulaError","noMixedMeasureAndColRefsFormulaError"));continue}if(t.isDimension(s)||t.isDateDimension(s)||h.isCompoundStr(s)||null!=t.getDateTimeFieldGrainByColumnName(s));else if(e.getColRefs().includes(s)){if(i=!0,r)return new d.Z(!1,u.Z.getLabel("FormulaError","noMixedMeasureAndColRefsFormulaError"));if(s!==e.getCurrentColRef())continue;return new d.Z(!1,u.Z.getLabel("FormulaError","selfReferenceError",e.getCurrentColRef()))}}return new d.Z(!0)}}class g extends i.error.ErrorListener{errors=[];syntaxError(e,t,r,i,s,n){this.errors.push({offendingSymbol:t,line:r,column:i,msg:s,err:n})}}class m{parse(e){const t=new i.InputStream(e),r=new s.Z(t),o=new i.CommonTokenStream(r),a=new n.Z(o),u=new g;a.buildParseTrees=!0,a.removeErrorListeners(),a.addErrorListener(u);const d=new l;return i.tree.ParseTreeWalker.DEFAULT.walk(d,a.root()),new p(d.result,u.errors)}}},51560:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var i=r(40651),s=r(51548),n=r(96063),o=r(47735),a=r(85270),l=r(61884),u=r(36672),d=r(67951);class c extends d{constructor(e){super(e)}getType(){return i.Z.REPORT_TYPE}getId(){return this._json.id}getLabel(){return this._json.label}getName(){return this._json.name}getJson(){return this._json}}var h=r(65334),p=r(98841),g=r(45044),m=r(26499),_=r(88730),f=r(9410),y=r(63024),b=r(84499),C=r(62652);class E{fromJson(e){const t=i.Z.fromCode(e.type);switch(t){case i.Z.DASHBOARD:return new s.Z(e);case i.Z.LENS:return new o.Z(e);case i.Z.FOLDER:if(e.folderType){const t=b.Z.fromCode(e.folderType);return t===b.Z.REPORTS?new g.Z(e):t===b.Z.DASHBOARDS||t===b.Z.TABLEAU_DASHBOARDS?new p.Z(e):new l.Z(e)}return new l.Z(e);case i.Z.TEMPLATE:return new y.Z(e);case i.Z.COMPONENT:return new m.Z(e);case i.Z.STORY:return new _.Z(e);case i.Z.DATASET:return new n.Z(e);case i.Z.REPORT:return new u.Z(e);case i.Z.LIGHTNING_DASHBOARD:return new h.Z(e);case i.Z.LIGHTNING_DASHBOARD_FOLDER:return new p.Z(e);case i.Z.LIGHTNING_REPORT_FOLDER:return new g.Z(e);case i.Z.REPORT_TYPE:return new c(e);case i.Z.TABLEAU_DASHBOARD:return new f.Z(e);case i.Z.TABLEAU_WORKBOOK:return new a.Z(e);default:throw new Error(`Asset type "${t.code}" not yet supported.`)}}fromMetadata(e){switch(e.getType()){case i.Z.DASHBOARD:return new C.Dashboard(e.getJson(),C.LoadState.DEEP);case i.Z.LENS:return new C.Lens(e.getJson(),C.LoadState.DEEP);case i.Z.COMPONENT:return new C.Component(e.getJson(),C.LoadState.DEEP);case i.Z.FOLDER:return new C.Folder(e.getJson(),C.LoadState.DEEP);case i.Z.DATASET:return new C.EdgeMart(e.getJson(),C.LoadState.DEEP);case i.Z.TABLEAU_DASHBOARD:return new C.TableauDashboard(e.getJson(),C.LoadState.DEEP);case i.Z.TABLEAU_WORKBOOK:return new C.TableauWorkbook(e.getJson(),C.LoadState.DEEP);default:return e}}createEmptyAssetMetadata(e,t,r){switch(e){case i.Z.REPORT:{const e=(0,u.O)(t,r);return new u.Z(e)}case i.Z.LIGHTNING_DASHBOARD:{const e=(0,h.d)(t,r);return new h.Z(e)}case i.Z.LIGHTNING_REPORT_FOLDER:{const e=(0,g.k)(t,r);return new g.Z(e)}case i.Z.LIGHTNING_DASHBOARD_FOLDER:{const e=(0,p.K)(t,r);return new p.Z(e)}default:throw new Error(`Asset type "${e.code}" not yet supported.`)}}}},33581:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{mutate(e){throw new Error("Not implemented.")}getDescription(){return""}}},40651:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(69370),s=r(8429),n=r(57244),o=r(19929),a=r(16582);class l extends i.Z{constructor({entity:e,localStorageCollectionCode:t,sldsIconCode:r,sldsIconCategory:i,homeLabelName:s,filterLabelName:n,iconBgColor:o,sldsIconPath:a,labelName:l,hideInStudio:u,isAPIEnabled:d}){super(),this.entity=e,this.localStorageCollectionCode=t,this.sldsIconCode=r,this.sldsIconCategory=i,this.sldsIconPath=a,this.homeLabelName=s,this.filterLabelName=n,this.iconBgColor=o,this.labelName=l,this.hideInStudio=u,this.isAPIEnabled=d}getEntity(){return this.entity}getSingularLabel(){return s.Z.getLabel("WaveAssetType",this.code)}getCode(){return this.code}getLocalStorageCollectionCode(){return this.localStorageCollectionCode}getSldsIconCode(){return this.sldsIconCode}getSldsIconPath(){return this.sldsIconPath}getSldsIconCategory(){return this.sldsIconCategory}getIconBgColor(){return this.iconBgColor}getIsAPIEnabled(){return this.isAPIEnabled}getHomeLabel(e){let t=this.homeLabelName;return this!==l.DASHBOARD||e&&n.Z.has(n.Z.CAN_USE_UNIFIED_ANALYTICS)||(t="allDashboards"),s.Z.getLabel("InsightsHomePage",t)}getFilterLabel(e=!1){return this.filterLabelName?s.Z.getLabel("BrowseAssetsFilter",this.filterLabelName):this.getHomeLabel(e)}getTypeLabelName(){return this.labelName??this.code}getAssetTypeCaption(){switch(this){case l.DASHBOARD:case l.DASHBOARD_SNAPSHOT:return s.Z.getLabel("ShareModal","asset_dashboard");case l.LENS:return s.Z.getLabel("ShareModal","asset_lens");case l.FOLDER:return s.Z.getLabel("ShareModal","asset_folder");case l.LIGHTNING_DASHBOARD_FOLDER:return s.Z.getLabel("ShareModal","asset_dashboard_folder");case l.LIGHTNING_REPORT_FOLDER:return s.Z.getLabel("ShareModal","asset_report_folder");case l.DATASET:return s.Z.getLabel("ShareModal","asset_edgemart");case l.COMPONENT:return s.Z.getLabel("ShareModal","asset_component");case l.REPORT:return s.Z.getLabel("ShareModal","asset_report");case l.LIGHTNING_DASHBOARD:return s.Z.getLabel("ShareModal","asset_lightning_dashboard");case l.TABLEAU_DASHBOARD:return s.Z.getLabel("ShareModal","asset_tableau_dashboard");case l.TABLEAU_WORKBOOK:return s.Z.getLabel("ShareModal","asset_tableau_workbook");case l.FLOW:return s.Z.getLabel("ShareModal","asset_flow");default:throw new Error("Unknown asset type")}}}l.add("LENS","lens",new l({entity:o.Z.LENS,localStorageCollectionCode:"lenses",sldsIconCode:"chart",sldsIconCategory:"standard",homeLabelName:"allLenses",isAPIEnabled:!0})).add("DATASET","dataset",new l({entity:o.Z.EDGE_MART,localStorageCollectionCode:"datasetMetadata",sldsIconCode:"dataset",sldsIconCategory:"standard",homeLabelName:"allEdgemarts",isAPIEnabled:!0})).add("DASHBOARD","dashboard",new l({entity:o.Z.LENS,localStorageCollectionCode:"dashboards",sldsIconCode:"dashboard_ea",sldsIconCategory:"standard",homeLabelName:"allAnalyticsDashboards",filterLabelName:"dashboard",isAPIEnabled:!0})).add("DASHBOARD_SAVED_VIEW","dashboardsavedview",new l({entity:o.Z.DASHBOARD_SAVED_VIEW,localStorageCollectionCode:"dashboardSavedViews",sldsIconCode:"dashboard_ea",sldsIconCategory:"standard",homeLabelName:"allAnalyticsDashboardSavedViews",isAPIEnabled:!0})).add("TEMPLATE","template",new l({entity:o.Z.TEMPLATE,localStorageCollectionCode:"templates",homeLabelName:"allTemplates",sldsIconCode:"template",sldsIconCategory:"standard",isAPIEnabled:!0})).add("FOLDER","folder",new l({entity:o.Z.FOLDER,localStorageCollectionCode:"folders",sldsIconCode:"app",sldsIconCategory:"standard",homeLabelName:"allApplications",isAPIEnabled:!0})).add("COMPONENT","component",new l({entity:o.Z.LENS,localStorageCollectionCode:"components",sldsIconPath:`${a}#view-tile`,iconBgColor:"#7e8be4",sldsIconCategory:"standard",homeLabelName:"allComponents",isAPIEnabled:!0})).add("LIGHTNING_COMPONENT","lightningcomponent",new l({localStorageCollectionCode:"lightningcomponents",sldsIconCode:"lightning_component",sldsIconCategory:"standard",isAPIEnabled:!0})).add("CDP_OBJECT","cdpObject",new l({sldsIconCategory:"standard",isAPIEnabled:!0})).add("APEX_REST","apexrest",new l({isAPIEnabled:!0})).add("SOBJECT","sobject",new l({sldsIconCode:"sobject",sldsIconCategory:"standard",homeLabelName:"all",isAPIEnabled:!0})).add("ALL","all",new l({homeLabelName:"all",isAPIEnabled:!0})).add("COLLECTION","collection",new l({entity:o.Z.COLLECTION,isAPIEnabled:!0})).add("GOAL","goal",new l({homeLabelName:"all",isAPIEnabled:!0})).add("DASHBOARD_SNAPSHOT","dashboardsnapshot",new l({entity:o.Z.LENS,sldsIconCode:"dashboard_ea",sldsIconCategory:"standard",homeLabelName:"all",isAPIEnabled:!0})).add("WORKFLOW","workflow",new l({entity:o.Z.ELT_WORK_FLOW,localStorageCollectionCode:"workflows",homeLabelName:"all",isAPIEnabled:!0})).add("DATAFLOW","dataflow",new l({entity:o.Z.DATA_FLOW,localStorageCollectionCode:"dataflows",homeLabelName:"all",isAPIEnabled:!0})).add("EXTERNAL_DATA","externaldata",new l({entity:o.Z.INSIGHTS_EXTERNAL_DATA,homeLabelName:"all",isAPIEnabled:!0})).add("IMAGE","image",new l({homeLabelName:"all",isAPIEnabled:!0})).add("STORY","story",new l({entity:o.Z.ANALYSIS,localStorageCollectionCode:"stories",sldsIconPath:`${a}#einstein-atom`,iconBgColor:"#107CAD",sldsIconCategory:"standard",homeLabelName:"allStories",isAPIEnabled:!0})).add("RECIPE","recipe",new l({homeLabelName:"all",isAPIEnabled:!0})).add("DATAPREP","dataPrep",new l({homeLabelName:"all",isAPIEnabled:!0})).add("REPLICATION","replication",new l({homeLabelName:"all",isAPIEnabled:!0})).add("LIGHTNING_DASHBOARD","lightningdashboard",new l({entity:o.Z.LIGHTNING_DASHBOARD,labelName:"oaDashboard",homeLabelName:"allLightningDashboards",sldsIconCode:"dashboard",sldsIconCategory:"standard",filterLabelName:"lightningDashboard",isAPIEnabled:!0})).add("LIGHTNING_FOLDER","lightningFolder",new l({homeLabelName:"allLightningReportFolders",sldsIconCode:"folder",sldsIconCategory:"standard",filterLabelName:"lightningReportFolder",isAPIEnabled:!0})).add("LIGHTNING_DASHBOARD_FOLDER","lightningDashboardFolder",new l({entity:o.Z.FOLDER,labelName:"oaDashboardFolder",homeLabelName:"allLightningDashboardFolders",sldsIconCode:"folder",sldsIconCategory:"standard",filterLabelName:"lightningDashboardFolder",isAPIEnabled:!0})).add("LIGHTNING_REPORT_FOLDER","reportFolder",new l({entity:o.Z.FOLDER,homeLabelName:"allLightningReportFolders",sldsIconCode:"folder",sldsIconCategory:"standard",filterLabelName:"lightningReportFolder",isAPIEnabled:!0})).add("REPORT","report",new l({entity:o.Z.REPORT,homeLabelName:"allReports",sldsIconCode:"report",sldsIconCategory:"standard",filterLabelName:"report",isAPIEnabled:!0})).add("REPORT_TYPE","reportType",new l({entity:o.Z.REPORT_TYPE,localStorageCollectionCode:"reportTypes",sldsIconCode:"report",sldsIconCategory:"standard",homeLabelName:"reportTypes",isAPIEnabled:!0})).add("TABLEAU_DASHBOARD","tableaudashboard",new l({entity:o.Z.TABLEAU_DASHBOARD,localStorageCollectionCode:"tableaudashboards",sldsIconCode:"decision",sldsIconCategory:"standard",homeLabelName:"tableauDashboard",filterLabelName:"tableauDashboard",isAPIEnabled:!0})).add("TABLEAU_WORKBOOK","tableauworkbook",new l({entity:o.Z.TABLEAU_WORKBOOK,localStorageCollectionCode:"tableauworkbooks",sldsIconPath:`${a}#tableau-crm`,iconBgColor:"#fafafa",sldsIconCategory:"standard",homeLabelName:"tableauWorkbook",filterLabelName:"tableauWorkbook",isAPIEnabled:!0})).add("FLOW","flow",new l({entity:o.Z.FLOW,localStorageCollectionCode:"flow",sldsIconPath:"#{AnalyticsSprite}#flow",iconBgColor:"#7e8be4",sldsIconCategory:"standard",homeLabelName:"flow",filterLabelName:"flow",isAPIEnabled:!0})).finish()},16898:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(8429);class n extends i.Z{static getDefaultValue(){return this.None}constructor(e,t,r="",i=!1,s=!1){super(),this.apiCode=e,this.ariaSortCode=t,this.saql=r,this.isAscending=i,this.isInner=s}getDescription(){return s.Z.getLabel("ColumnSort",this.code)}getValue(){return this.code}}n.add("Original","original",new n).add("None","none",new n).add("Ascending","ascending",new n("Asc","ascending","asc",!0)).add("Descending","descending",new n("Desc","descending","desc",!1)).add("InnerAscending","innerascending",new n(void 0,"ascending","asc",!0,!0)).add("InnerDescending","innerdescending",new n(void 0,"descending","desc",!1,!0)).finish()},93330:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(79646),s=r(1611),n=r(16898);class o extends i.Z{static getColumnSortCycle(e,t,r){if(!(t.getGroupings().length>0)||!e)return o.NORMAL;if(!Object.values(e).some((e=>{const r=t.getColumn(e.getColumnName());return!r||r.getType()!==s.Z.MEASURE})))return o.NORMAL;switch(e[r]&&e[r].getColumnSort()){case n.Z.Ascending:return o.ORIGINAL_ASC;case n.Z.Descending:default:return o.ORIGINAL_DESC}}constructor(e){super(),this._sortOrder=e}getDefaultColumnSort(){return this._sortOrder[0]}getNextColumnSort(e){return this._sortOrder[(this._sortOrder.indexOf(e)+1)%this._sortOrder.length]}}o.add("ORIGINAL_DESC",new o([n.Z.Original,n.Z.Descending,n.Z.Ascending])).add("ORIGINAL_ASC",new o([n.Z.Original,n.Z.Ascending,n.Z.Descending])).add("NORMAL",new o([n.Z.None,n.Z.Descending,n.Z.Ascending])).finish()},26499:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(83993),s=r(40651),n=r(51548);class o extends n.Z{constructor(e){super(e)}getType(){return s.Z.COMPONENT}getPageIndex(e){const t=this.getLayouts()[0].getPages().findIndex((t=>t.getName()===e));return t>0?t:0}getFullyQualifiedName(){return(0,i.Oz)(this.getName(),this.getNamespace())}getLayout(){return this._getLayoutMap().values().next().value}getPageName(e){return super.getPage(this.getLayout().getName(),e).getName()}}},12035:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(83993);class n{constructor(e){this._json=e}getFieldName(){return this._json.fieldName}getDataSourceName(){return this._json.dataSourceName}getDataSourceType(){return this._json.dataSourceType}getDataSourceNamespace(){return this._json.dataSourceNamespace}getDataSourceFullyQualifiedName(){return(0,s.Oz)(this.getDataSourceName(),this.getDataSourceNamespace())}getJson(){return this._json}}class o{constructor(e){this._json=e}getName(){return this._json.name}getLabel(){return this._json.label}getFieldsJson(){return this._json.fields}getField(e,t,r,s=!0){const n=(0,i.find)(this.getFields(),(i=>e===i.getDataSourceType()&&t===i.getDataSourceFullyQualifiedName()&&r.has(i.getFieldName())));if(!n&&s)throw new Error("No linked field found with given parameters.");return n}getFields(){return this._json.fields.map((e=>new n(e)))}isEqual(e){return(0,i.isEqual)(this.getJson(),e.getJson())}getJson(){return this._json}}},93367:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(93964),s=r(18001),n=r(99689);const o=new Map([[n.Z.RESULT,s.Z.RESULT_DYNAMIC],[n.Z.SELECTION,s.Z.SELECTION_DYNAMIC]]);class a extends i.Z{constructor(e,t,r){super(e.step,t,r??o.get(n.Z.fromName(e.sourceType.toUpperCase()))),this.sourceType=e.sourceType}get identifier(){return this.id+this.sourceType}}},93964:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t,r){if(this.id=e,this.path=t,this.edgeType=r,!r)throw new Error("SourceType is not supported for widget reference")}}},73414:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(93964);class s extends i.Z{constructor(e,t,r){super(e,t,r)}get sourceType(){throw new Error("SourceType is not supported for widget reference")}get identifier(){throw new Error("Identifier is not supported for widget reference")}}},42790:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(83993);class s{constructor(e,t){this._json=e,this._dashboardMetadata=t}getField(){return this._json.field}getId(){return`${this.getAssetId()}-${this.getField()}`}getDatasetId(){return this.getDataset().getId()}getAssetId(){return this._json&&(this.getDataset()?.getId()||this.getSObject()||this.getCDPObject())}getDataset(){return this._json?.dataset&&this._dashboardMetadata.getDatasetReferenceByName((0,i.IO)(this._json.dataset))}getSObject(){return this._json.sobject}getCDPObject(){return this._json.cdpObject}getJson(){return this._json}}},25884:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var i=r(90554),s=r(11422),n=r(12860),o=r(78978);class a extends o{getLabelName(){return this._value.labelName}getIconName(){return this._value.iconName}getNumColumns(){return this._value.numColumns}getSelector(e){return this._value.selectors.find((t=>t.getType()===e))}getSerializedSelectors(){return Array.from(this._value.selectors).map((e=>e.toString()))}}a.build(a,{DESKTOP:{iconName:"desktop",labelName:"desktop",numColumns:12,selectors:[n.Type.MIN_WIDTH.makeSelector(1e3)]},TABLET:{iconName:"tablet_landscape",labelName:"tablet",numColumns:6,selectors:[n.Type.MIN_WIDTH.makeSelector(600),n.Type.MAX_WIDTH.makeSelector(999)]},PHONE:{iconName:"phone_portrait",labelName:"mobile",numColumns:6,selectors:[n.Type.MAX_WIDTH.makeSelector(599)]},CUSTOM:{iconName:"layout",labelName:"custom",numColumns:12,selectors:[]}});var l=r(29655),u=r(96486);class d{constructor(e,t){this._x=e,this._y=t}getX(){return this._x}getY(){return this._y}}class c{static fromPoints(e,t){return new c(e.getX(),e.getY(),t.getX(),t.getY())}static extendFromPoint(e,t,r){return new c(e.getX(),e.getY(),e.getX()+t,e.getY()+r)}constructor(e,t,r,i){this._left=Math.min(e,r),this._right=Math.max(e,r),this._bottom=Math.min(t,i),this._top=Math.max(t,i)}getTopLeft(){return new d(this._left,this._top)}getBottomRight(){return new d(this._right,this._bottom)}contains(e){return e._left>=this._left&&e._right<=this._right&&e._top<=this._top&&e._bottom>=this._bottom}overlaps(e){return new s.Z(this._left,this._right,!1).doesOverlap(new s.Z(e._left,e._right))&&new s.Z(this._bottom,this._top,!1).doesOverlap(new s.Z(e._bottom,e._top))}}var h=r(11040);class p{#Rt;#wt;#At;#Dt;#Lt;#Mt;#Nt;constructor(e,t,r,i){this.#Rt=e,this.#wt=t,this.#At=r,this.#Dt=i}getLayoutName(){return this.#Rt}getIndex(){return this.#wt}getName(){return this.#At.name}getLabel(){return this.#At.label}isNavigationHidden(){return this.#At.navigationHidden}getWidgetLayouts(){return(0,u.values)(this.#Ot())}getWidgetIds(){return(0,u.keys)(this.#Ot())}getWidgets(){return this.getWidgetIds().map((e=>this.#Dt.getWidget(e)))}getSortedWidgetIds(){const e=(0,u.entries)(this.#Ot()).map((([e,t])=>({id:e,row:t.getRow(),column:t.getColumn()})));return e.sort(((e,t)=>e.row===t.row?e.column-t.column:e.row-t.row)),e.map((e=>e.id))}hasWidgetLayout(e){return this.getWidgetIds().some((t=>t===e))}getWidgetLayout(e){if(this.hasWidgetLayout(e))return this.#Ot()[e];throw new Error(`Widget layout for ${e} not found on page ${this.getLabel()}.`)}getContainedWidgetLayouts(e){const t=this.#Mt?.[e];if(t)return t;this.#Mt=this.#Mt||{};const r=this.getWidgetLayout(e);return this.#Mt[e]=this.getWidgetLayouts().filter((t=>t.getWidgetId()!==e&&t.getColumn()>=r.getColumn()&&t.getRow()>=r.getRow()&&t.getColumn()+t.getColumnSpan()<=r.getColumn()+r.getColumnSpan()&&t.getRow()+t.getRowSpan()<=r.getRow()+r.getRowSpan())),this.#Mt[e]}getAllContainedWidgetLayouts(){return this.#Nt||(this.#Nt=[],this.getWidgetIds().forEach((e=>{this.#Nt.push(...this.getContainedWidgetLayouts(e))}))),this.#Nt}getJson(){return this.#At}getWidgetsJson(){return this.#At.widgets}getLastRowUsed(){let e=0;return this.getWidgetLayouts().forEach((t=>{e=Math.max(e,t.getRow()+t.getRowSpan())})),e}canPlaceWidgetInPage(e){const t=e.getPosition();return this.getWidgetLayouts().every((e=>!this.#Pt(e,t)))}isEqual(e){return this.getName()===e.getName()&&this.getLayoutName()===e.getLayoutName()}#Ot(){return this.#Lt||(this.#Lt=this.#At.widgets.reduce(((e,t,r)=>(e[t.name]=new h.Z(this.#Rt,this.#wt,r,t,this.#Dt),e)),{})),this.#Lt}#Pt(e,t){return c.extendFromPoint(new d(t.column,t.row),t.width,t.height).overlaps(c.extendFromPoint(new d(e.getColumn(),e.getRow()),e.getColumnSpan(),e.getRowSpan()))}}class g{#At;#wt;#Dt;#xt;#Zt;#Ft;#kt;#Bt;constructor(e,t,r){this.#At=e,this.#wt=t,this.#Dt=r}getName(){return this.#At.name}getNumColumns(){return this.#At.numColumns}getRowHeight(){return l.getEnumByCode(this.#At.rowHeight)}getMaxWidth(){return this.#At.maxWidth}getVersion(){return this.#At.version}getSelectors(){return this.#xt||(this.#xt=n.parse(this.#At.selectors)),this.#xt}getSelector(e){return this.getSelectors().find((t=>e===t.getType()))}getStyleJson(){return this.#At.style}getPagesJson(){return this.#At.pages}getPages(){return this.#Zt||(this.#Zt=this.getPagesJson().map(((e,t)=>new p(this.getName(),t,e,this.#Dt)))),this.#Zt}getPage(e){if(this.hasPage(e))return this.getPages()[e];throw new Error(`Invalid page index ${e}.`)}getPageById(e){const t=this.getPages().find((t=>t.getName()===e));if(t)return t;throw new Error(`Invalid page id ${e}.`)}hasPage(e){return 0<=e&&e<this.getPagesJson().length}hasPageWithId(e){return this.getPages().some((t=>t.getName()===e))}getJson(){return this.#At}getIndex(){return this.#wt}getIconName(){return this.#Ft||(this.#Ft=this.getLayoutTemplate().getIconName()),this.#Ft}getLayoutType(){return this.#kt||(this.#kt=this.getLayoutTemplate().getLabelName()),this.#kt}getTemplateName(){return this.#Bt||(this.#Bt=this.getLayoutTemplate().getName()),this.#Bt}getLayoutTemplate(){const e=this.getSelector(n.Type.MAX_WIDTH),t=this.getSelector(n.Type.MIN_WIDTH);if(!e&&!t)return a.CUSTOM;if(!e)return a.DESKTOP;return a.enums().find((t=>new s.Z(t.getSelector(n.Type.MIN_WIDTH)?.getValue(),t.getSelector(n.Type.MAX_WIDTH)?.getValue()).inBounds(e.getValue())))||a.CUSTOM}getPageMap(){return(0,i.toSet)(this.getPages().map((e=>e.getName())))}getUnusedWidgets(e){return this.#Dt?.getWidgets().filter((t=>!this.#Wt(t.getId(),e)))??[]}getFirstWidgetLayoutPage(e){return this.getPages().find((t=>t.hasWidgetLayout(e)))}getFirstWidgetLayout(e){return this.getFirstWidgetLayoutPage(e)?.getWidgetLayout(e)}#Wt(e,t){return null!=t?this.getPage(t).hasWidgetLayout(e):this.getPages().some((t=>t.hasWidgetLayout(e)))}}},51548:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var i=r(96486),s=r(83993),n=r(32201);class o extends n.Z{constructor(e,t,r,i=!1){super(t,e,i),this._repeaterWidget=r}isRepeaterCellWidget(){return!0}getRepeaterId(){return this._repeaterWidget.getId()}getLensId(){return this._repeaterWidget.getLensId()}getWidgetStyle(){return this._json.position.widgetStyle}getWidgetStyleProperty(e){return this.getWidgetStyle()[e]}shard(e){return new o(e,this._id,this._repeaterWidget)}getDashboardMetadata(){return this._repeaterWidget.getDashboardMetadata()}getMeasures(){throw new Error("Not implemented.")}getDimensions(){throw new Error("Not implemented.")}getLens(){if(this.hasLens())return this._repeaterWidget.getLens();throw new Error("Lens for cell widget is not found.")}}class a{constructor(e){this._widget=e,this._json=e.getJson()}getCellProperties(){return this._json.parameters.cellProperties}getWidget(e){return new o(this.getCellProperties()[e],e,this._widget)}}var l=r(40651),u=r(67951),d=r(51308),c=r(1806),h=r(87418),p=r(25884),g=r(12035),m=r(52570),_=r(45080),f=r(60873);class y{constructor(e){this.json=e}getFromDataSource(){return this.json.fromDataSource}getFromDataSourceType(){return l.Z.fromCode(this.json.fromDataSourceType)}getToDataSource(){return this.json.toDataSource}getToDataSourceType(){return l.Z.fromCode(this.json.toDataSourceType)}}class b extends u{constructor(e,t=!1){super(e),this._json=e,this._lenses=new Map,this._widgets=new Map,this._layouts=new Map,this._dataSourceLinks=new Map,this._datasetRefByName=new Map,this._datasetRefs=[],this._filters=new Map,this._useInstanceParameters=t,this._excludeRelationships=[]}getType(){return this._json.type?l.Z.fromCode(this._json.type):l.Z.DASHBOARD}getId(){return this._json.id}getLabel(){return this._json.label}getName(){return this._json.name}getNamespace(){return this._json.namespace}getDescription(){return this._json.description}getDateVersion(){return _.Z.getEnumByCode(this._json.dateVersion)}getUrl(){return this._json.url}getRefreshDate(){let e=this._json.refreshDate??0;return"number"!=typeof e&&(e=new Date(e).valueOf()),e}isMobileDisabled(){return this._json.mobileDisabled}isLayoutAutoSyncEnabled(){return"false"!==this._json.layoutAutoSync}getVisibility(){return this._json.visibility?f.Z.fromCode(this._json.visibility):f.Z.ALL}hasData(){return!!this._json.state}getStateJson(){return this._json.state}hasParameters(){return!!this.getParameters().length}getParameters(){return this.getStateJson().parameters||[]}getParameterIds(){return this.getParameters()?.map((e=>e.name))}getJson(){return this._json}hasLens(e){return this._getLensMap().has(e)}getLens(e){if(!this.hasLens(e))throw new Error(`No lens '${e}'.`);return this._getLensMap().get(e)}getLensIds(){return Array.from(this._getLensMap().keys())}getLenses(){return Array.from(this._getLensMap().values())}getLensesJson(){return this._json.state.steps}hasWidget(e){return this._getWidgetMap().has(e)}getWidget(e){if(!this.hasWidget(e))throw new Error(`No widget '${e}'.`);return this._getWidgetMap().get(e)}getRepeaterMetadata(e){if(!this.hasWidget(e))throw new Error(`No repeater widget '${e}'.`);return new a(this.getWidget(e))}getWidgetIds(){return Array.from(this._getWidgetMap().keys())}getWidgets(){return Array.from(this._getWidgetMap().values())}getComponentNames(e=!1){const t=new Set;for(const r of this._getWidgetMap().values())if("component"===r.getType()){const i=r.getParameter("source");null==i||"component"!==i.type||e&&!r.getParameter("shareState")||t.add((0,s.IO)(i))}return t}getComponentWidgetByComponentFqn(e){for(const t of this._getWidgetMap().values())if("component"===t.getType()){const r=t.getParameter("source");if(null!=r&&"component"===r.type&&r.name===e)return t}}getWidgetsAttachedToLens(e){if(!this.hasLens(e))throw new Error(`No lens '${e}'.`);const t=[];return this._getWidgetMap().forEach((r=>{r.hasLens()&&r.getLensId()===e&&t.push(r)})),t}getTemplateSourceId(){return this._json.templateSourceId}getWidgetStyleProperty(e){return this.getWidgetStyleJson()[e]}getWidgetStyleJson(){return this._json.state.widgetStyle}getWidgetsJson(){return this._json.state.widgets}getInaccessibleDatasetsNames(){const e=[];for(const t of this._getLensMap().values()){const r=t.getInaccessibleDatasetsNames();(0,i.isEmpty)(r)||e.push(r)}return Array.from(new Set(e))}getDatasetReferences(){return(0,i.isEmpty)(this._datasetRefs)?(this._getDatasetReferencesByName().forEach(((e,t)=>{this._datasetRefs.push(e)})),this._datasetRefs):this._datasetRefs}getDatasetReferenceByName(e){return this._getDatasetReferencesByName().get(e)}getDatasetIds(){return this.getDatasetReferences().map((e=>e.getId()))}getDatasetNames(){return this.getDatasetReferences().map((e=>e.getFullyQualifiedName()))}getDatasetsJson(){return this._json.datasets}hasLayout(e){return this._getLayoutMap().has(e)}getLayout(e){if(!this.hasLayout(e))throw new Error(`No layout with name '${e}' exists.`);return this._getLayoutMap().get(e)}getLayouts(){return Array.from(this._getLayoutMap().values())}getLayoutsJson(){return this._json.state.gridLayouts||[]}hasDataSourceLink(e){return this._getDataSourceLinkMap().has(e)}getDataSourceLink(e){if(!this.hasDataSourceLink(e))throw new Error(`No data source link with name '${e}' exists.`);return this._getDataSourceLinkMap().get(e)}getDataSourceLinks(){return Array.from(this._getDataSourceLinkMap().values())}getDataSourceLinksJson(){return this._json.state.dataSourceLinksInfo?.links}getExcludedDataSourceRelationships(){this._excludeRelationships=[];for(const e of this.getStateJson().dataSourceLinksInfo.excludeRelationships||[])this._excludeRelationships.push(new y(e));return this._excludeRelationships}isAutomaticLinkingEnabled(){return Boolean(this._json.state.dataSourceLinksInfo?.enableAutomaticLinking)}hasFilter(e){return this._getFilterMap().has(e)}getFilter(e){if(!this.hasFilter(e))throw new Error(`No filter '${e}'.`);return this._getFilterMap().get(e)}getFilters(){return Array.from(this._getFilterMap().values())}getFiltersJson(){return this._json.state.filters}getPage(e,t){return this.getLayout(e).getPage(t)}getSObjectNames(){return this._getLensProperties((e=>e.getSObject()))}getCDPObjectNames(){return this._getLensProperties((e=>e.getCDPObjects())).flat()}getReportNames(){return this._getLensProperties((e=>e.getReport()))}isImageUsedInDashboard(e){for(const t of this.getWidgets())if(t.getParameter("image")&&t.getParameter("image").name===e)return!0;for(const t of this.getLayouts())if(t.getStyleJson().image&&t.getStyleJson().image.name===e)return!0;return!1}isNewDateTimeEnabled(){return this.getDateVersion()===_.Z.NEW}_getLensMap(){if(!(0,i.isEmpty)(this._lenses))return this._lenses;if(this._json.state.steps){const e=Object.keys(this._json.state.steps);for(const t of e)this._lenses.set(t,new c(t,this._json.state.steps[t],this))}return this._lenses}_getWidgetMap(){if(!(0,i.isEmpty)(this._widgets))return this._widgets;if(this._json.state.widgets){const e=Object.keys(this._json.state.widgets);for(const t of e)this._widgets.set(t,new h.Z(t,this._json.state.widgets[t],this,this._useInstanceParameters))}return this._widgets}_getLayoutMap(){if(!(0,i.isEmpty)(this._layouts))return this._layouts;for(const[e,t]of this.getLayoutsJson().entries()||[]){const r=new p.Z(t,e,this);if(this._layouts.has(r.getName()))throw new Error(`Multiple layouts of name '${r.getName()}'.`);this._layouts.set(r.getName(),r)}return this._layouts}_getDataSourceLinkMap(){if(!(0,i.isEmpty)(this._dataSourceLinks))return this._dataSourceLinks;for(const e of this.getDataSourceLinksJson()||[]){const t=new g.Z(e);if(this._dataSourceLinks.has(t.getName()))throw new Error(`Multiple links of name '${t.getName()}'.`);this._dataSourceLinks.set(t.getName(),t)}return this._dataSourceLinks}_getFilterMap(){if(!(0,i.isEmpty)(this._filters))return this._filters;for(const e of this.getFiltersJson()||[]){const t=new m(e,this);if(this._filters.has(t.getId()))throw new Error(`Multiple filters on same id '${t.getId()}'.`);this._filters.set(t.getId(),t)}return this._filters}_getDatasetReferencesByName(){if(!(0,i.isEmpty)(this._datasetRefByName))return this._datasetRefByName;for(const e of this._json.datasets||[])this._datasetRefByName.set((0,s.IO)(e),new d(e));return this._datasetRefByName}_getLensProperties(e){return(0,i.uniq)(this.getLenses().map(e)).filter((e=>e))}}},87418:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(83993),s=r(32201);class n extends s.Z{constructor(e,t,r,i=!1){super(e,t,i),this._dashboardMetadata=r}getLayoutWidget(e,t){return new n(this._id,this.getInstanceJson(e,t),this._dashboardMetadata,this._useInstanceParameters)}getDashboardMetadata(){return this._dashboardMetadata}getDashboardId(){return this._dashboardMetadata.getId()}getLensId(){return this.getParameter("step")}getLens(){if(this.hasLens())return this._dashboardMetadata.getLens(this.getLensId())}isOnMultiplePages(e){const t=null!=e?[e]:this._dashboardMetadata.getLayouts();let r=!1;for(const e of t)for(const t of e.getPages())if(t.hasWidgetLayout(this.getId())){if(r)return!0;r=!0}return!1}isOnAnyPage(){for(const e of this._dashboardMetadata.getLayouts())for(const t of e.getPages())if(t.hasWidgetLayout(this.getId()))return!0;return!1}isOnPage(e,t){return this._dashboardMetadata.getLayout(e).getPage(t)?.hasWidgetLayout(this.getId())}getLayouts(){const e=[];for(const t of this._dashboardMetadata.getLayouts())for(const r of t.getPages())r.hasWidgetLayout(this.getId())&&e.push(r.getWidgetLayout(this.getId()));return e}getLayout(e,t){return this._dashboardMetadata.getLayout(e).getPage(t).getWidgetLayout(this.getId())}hasLayout(e,t){if(this._dashboardMetadata.hasLayout(e)){return this._dashboardMetadata.getLayout(e).getPage(t).hasWidgetLayout(this.getId())}return!1}getSourceName(){const e=this.getTemplateParameter("source");if(e)return(0,i.Oz)(e.name,e.namespace);throw new Error("Widget property 'source' doesn't exist.")}shard(e){return new n(this._id,e,this._dashboardMetadata)}getWidgetStyle(){throw new Error("Not implemented.")}getRepeaterId(){throw new Error("Not implemented.")}}},32201:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486),s=r(90554);class n{constructor(e,t,r=!1){this._id=e,this._json=t,this._useInstanceParameters=r,this._cachedMergedJson=new Map}getUseInstanceParameters(){return this._useInstanceParameters}getInstanceParameter(e,t,r){return this.getInstanceParameters(e,t)[r]}getInstanceParameters(e,t){return this.getInstanceJson(e,t).parameters}isInstanceParameter(e,t,r){if(!this._useInstanceParameters)return!1;const i=this.getLayout(e,t).getParametersJson();if(null!=i){const e=r.split(".");let t=i[e[0]];for(let r=1;r<e.length;r++){if(void 0===t)return!1;t=t[e[r]]}return void 0!==t}return!1}getInstanceJson(e,t){if(!this._useInstanceParameters||void 0===e||void 0===t||!this.hasLayout(e,t))return this.getTemplateJson();const r=this.getLayout(e,t);return null!=r&&null!=r.getParametersJson()?this._mergeJson(e,t,r.getParametersJson()):this.getTemplateJson()}getId(){return this._id}getType(){return this._json.type}getTemplateParameters(){return this._json.parameters}getTemplateJson(){return this._json}getTemplateParameter(e){return this.getTemplateParameters()[e]}getParameters(){return this._json.parameters}getJson(){return this._json}getParameter(e){return this.getTemplateParameters()[e]}getDashboardMetadata(){throw new Error("Not implemented")}getMeasures(){return this.getParameter("measures")}getDimensions(){return this.getParameter("dimensions")}getDashboardId(){throw new Error("Not implemented.")}getLensId(){throw new Error("Not implemented.")}hasLens(){return!(0,i.isEmpty)(this.getLensId())}isEqual(e){return this._id===e.getId()&&(0,i.isEqual)(this._json,e.getTemplateJson())}getLens(){throw new Error("Not implemented.")}isOnMultiplePages(){throw new Error("Not implemented.")}isOnAnyPage(){throw new Error("Not implemented.")}isOnPage(e,t){throw new Error("Not implemented.")}getLayouts(){throw new Error("Not implemented.")}hasLayout(e,t){throw new Error("Not implemented.")}getLayout(e,t){throw new Error("Not implemented.")}getSourceName(){throw new Error("Not implemented.")}shard(e){throw new Error("Not implemented.")}getWidgetStyle(){throw new Error("Not implemented.")}isRepeaterCellWidget(){return!1}getRepeaterId(){throw new Error("Not implemented.")}_mergeJson(e,t,r){let i=this._cachedMergedJson.get(e+"_"+t);return null==i&&(i={type:this._json.type,parameters:this._mergeParameters((0,s.deepCopy)(this._json.parameters),r)},this._cachedMergedJson.set(e+"_"+t,i)),i}_mergeParameters(e,t){for(const r in t)(0,s.isMap)(t[r])&&void 0!==e[r]?e[r]=this._mergeParameters(e[r],t[r]):e[r]=t[r];return e}}},38588:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51548),s=r(82957);class n extends s.Z{constructor(e,t=!0){super(),this._widgetId=e,this._useInstanceOverride=t}mutateLayout(e,t,r,i=!1){throw new Error("Not implemented.")}_getWidgetMetadata(e){const t=new i.Z(e).getWidget(this._widgetId);if(null==t)throw new Error(`Invalid widgetId ${this._widgetId}.`);return t}_getWidgetJsonForLayout(e,t,r,i=!1){let s={};return s=i&&this._useInstanceOverride&&null!=t?this._getWidgetInstanceJson(e,t,r):this._getWidgetJson(e),s}_getWidgetJson(e){const t=new i.Z(e).getWidgetsJson()[this._widgetId];if(null==t)throw new Error(`Invalid widgetId ${this._widgetId}.`);return t}_getWidgetInstanceJson(e,t,r){const s=new i.Z(e),n=s.getLayoutsJson()[t];if(!n)throw new Error(`Invalid layout ${t}.`);const o=n.pages[r];if(void 0===o)throw new Error(`Invalid page ${r}.`);let a;return o.widgets.forEach((e=>{e.name===this._widgetId&&(a=e)})),a||(a=s.getWidgetsJson()[this._widgetId]),a.parameters||(a.parameters={}),a}}},96063:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(61506),s=r(18111),n=r(8429),o=r(67951),a=r(40651),l=r(97108),u=r(60873);class d extends o{constructor(e){super(e)}getType(){return a.Z.DATASET}getId(){return this._json.id}getLabel(){return this._json.label}getName(){return this._json.name}getAlias(){return this.getName()}getNamespace(){return this._json.namespace}getDescription(){return this._json.description}getUrl(){return this._json.url}getCurrentVersionId(){return this._json.currentVersionId}getCurrentVersionUrl(){return this._json.currentVersionUrl}getCurrentVersionPredicate(){return this._json.currentVersionPredicate}getCurrentVersionSharingInheritance(){return this._json.currentVersionSharingInheritance}getDatasetType(){if(this._json.datasetType)return l.Z.fromCode(this._json.datasetType)}getLiveConnection(){return this._json.liveConnection}getDisplayLabel(){return this.getDatasetType()===l.Z.LIVE?n.Z.getLabel("DatasetType","liveDisplayLabel"):this.getDatasetType()===l.Z.STAGED?n.Z.getLabel("DatasetType","stagedDisplayLabel"):n.Z.getLabel("DatasetType","standardDisplayLabel")}getReference(){return i.Z.get(s).isCmsMode()?`${this.getId()}/${this.getCurrentVersionId()}`:this.getUrl()}getRefreshDate(){return this.getLastRefreshDate()}getLastRefreshDate(){if(this._json.datasetType&&this.getDatasetType()===l.Z.LIVE)return 0;const e=this._json.dataRefreshDate,t=this.getLastModifiedDate(),r=this.getCreatedDate();return new Date(e||(t||(r||0))).getTime()}getVisibility(){return this._json.visibility?u.Z.fromCode(this._json.visibility):u.Z.ALL}getJson(){return this._json}}},45080:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(723);class s extends i{static getDefaultValue(){return s.LEGACY}static isValidVersion(e){return this.hasCode(e)}getCode(){return this._value.code}getDateSeparator(){return this._value.dateSeparator}}s.build(s,{LEGACY:{code:1,dateSeparator:"~~~"},NEW:{code:2,dateSeparator:"-"}})},79587:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var i=r(96486),s=r(8429),n=r(66537),o=r(84985),a=r(25572);class l{constructor(e){this._relationshipJson=e}getTargetField(){return this._relationshipJson.targetFieldName}getTargetAsset(){return this._relationshipJson.targetAsset}getOriginField(){return this._relationshipJson.originFieldName}getOriginAsset(){return this._relationshipJson.originAsset}getCardinality(){return this._relationshipJson.cardinality}}var u=r(6965),d=r(95812);class c{constructor(e){this._json=e}getJson(){return this._json}getId(){return this._json.id}getLabel(){return this._json.label}getInstanceUrl(){return this._json.instanceUrl}}var h=r(1713),p=r(37253),g=r(42333),m=r(82871),_=r(45080),f=r(46194);const y={"*":["#,###",1],"_#_percent_#_":["#,###.##%",100],"_#_currency_cents_#_":["$#,###.00",1],"_#_currency_dollars_#_":["$#,###",1]},b="_fiscal";class C{#At;#Gt;#Ut;#Ht;#Vt;#jt;#qt;#zt;#$t;constructor(e,t){this.#Gt=t||_.Z.LEGACY,this.#Vt={},null==e||(0,i.isEmpty)(e)?this.#At={dimensions:[],measures:[]}:this.#At=e,this._buildFieldsMap(),this._buildRelationships(),this._buildOrganizationsMap()}getDateVersion(){return this.#Gt}getDefaultFormats(){return y}getDefaultLabels(){return{"*":s.Z.getLabel("ExtMeta","rows")}}getField(e){let t=e;return Array.isArray(e)&&(t=e[0]),this.#Ut.get(t)||this._getDateFieldByFullFieldName(t)}hasField(e){return null!=this.getField(e)}getFields(){return Array.from(this.#Ut.values())}getRelationships(){return this.#qt}getFieldByName(e){return this.getFields()?.find((t=>t.getName()===e))}getFieldsByType(e){return this.getFields().filter((t=>t.getType()===e))}getFieldsForExplorer(e,t=!0,r=!1){let s;const n=e.getName();if(null==this.#Vt[n]){const t=(null!=e?this.getFieldsByType(e):this.getFields())||[];this.#Vt[n]=t.filter((e=>e.showInExplorer()))}return s=t?this.#Vt[n]:(0,i.filter)(this.#Vt[n],(e=>!e.isDerived())),r?s.sort((function(e,t){return e.getLabel()<t.getLabel()?-1:e.getLabel()>t.getLabel()?1:0})):s}getAvailableDimensions(){return this.getFieldsForExplorer(o.Dimension).map((e=>e.getName()))}getAvailableMeasures(){return this.getFieldsForExplorer(o.Measure).map((e=>e.getName()))}getNonDerivedFields(e){const t=[];return this.getFieldsForExplorer(e).forEach((e=>{e.isDerived()||t.push(e.getName())})),this.getFieldsForExplorer(o.Date).forEach((r=>{if(e===o.Dimension){t.push(r.getAlias());const e=r.getSubDimensionFields();Object.keys(e).forEach((r=>t.push(e[r].getName())))}else if(e===o.Measure){const e=r.getSubMeasureFields();Object.keys(e).forEach((r=>t.push(e[r].getName())))}})),(0,i.uniq)(t)}getDetailsDefaultFields(){return null!=this.#At.showDetailsDefaultFields?this.#At.showDetailsDefaultFields:[]}getDefaultLabel(e){return this.getDefaultLabels()[e]}getParentDimension(e){return this.getField(e)?e:this.getParentDimensionField(e)?.getName()}getParentDimensionField(e){return this.getDateTimeFieldGrain(e)?.getDateTimeField()||this._getDateFieldByFullFieldName(e)}isDimension(e){return this.getField(e)?.getType()===o.Dimension||null!=this._getDateDimensionGrainByName(e)}isStringType(e){return this.getField(e)?.getDataType()===f.Z.STRING||null==this.getField(e)?.getDataType()&&this.isDimension(e)}isMeasure(e){return this.getField(e)?.getType()===o.Measure}isNumberType(e){return this.getField(e)?.getDataType()===f.Z.NUMBER||null==this.getField(e)?.getDataType()&&this.isMeasure(e)}isDateEpochField(e){return null!=this._getDateMeasureGrainByName(e)}isDateDimension(e){return this.getField(e)?.getType()===o.Date||this.getField(e)?.getSubType()===o.Date||null!=this._getDateDimensionGrainByName(e)}isDateTimeType(e){return this.getField(e)?.getDataType()===f.Z.DATE_TIME||null==this.getField(e)?.getDataType()&&this.isDateDimension(e)}getDimensionGrain(e){return this._getDateDimensionGrainByName(e)?.getValue()}getFieldLabel(e){if(!Array.isArray(e))return this.getField(e)?.getLabel()||this._getDateGrainByName(e)?.getLabel()||this.getDefaultLabel(e);{const t=this.getField(e[1]);if(null!=t?t.doesSupportDateGrain():void 0)return t?.getGrain(e[0])?.getLabel()}}getSubDimensions(e){const t=this.getField(e)?.getSubDimensionFields();if(!t)return null;const r={};return Object.keys(t).forEach((e=>{const i=t[e];null!=i&&(r[e]=i.getName())})),r}getDateAlias(e){return this.getField(e)?.getAlias()||e}getDateFieldByGrain(e,t){const r=this.getField(e)?.getSubDimensionField&&this.getField(e).getSubDimensionField(t)||this.getField(e)?.getSubMeasureField&&this.getField(e).getSubMeasureField(t);return r?.getName()}getMeasureFormat(e,t=!0){let r=this.getField(e)?.getFormat();if(null==r&&(r=this.getDateTimeFieldGrainByColumnName(e)?.getFormat()),null!=r&&!(0,i.isEmpty)(r)){const e={customFormat:[r.fullFormat,r.unitMultiplier]};return r.delimiters&&(e.delimiters=r.delimiters),e}if(t)return{customFormat:y[e]||[null,1]}}getFieldMemberLabel(e,t){return this._getMembers(e)?.[t]?.label}getFieldInfo(e){return this.getField(e)||this._getDateGrainByName(e)}hasFiscalDateGroupGrain(e){return Boolean(Object.keys(this.getSubDimensions(e)||{}).some((e=>-1!==e.indexOf(b))))}getFieldMemberLabels(e){return this._getFieldMemberDetails(e,"label")}getDimensionColors(e){const t=this._getCategoricalChartColorRule(e)?.getValueFormatValueMap();return null==t||(0,i.isEmpty)(t)?this._getFieldMemberDetails(e,"color"):t}getCategoricalConditionalFormattingRuleCollection(e){const t=this._getCategoricalChartColorRule(e);let r;if(null!=t)r=t.getRuleJson();else{const t=this._getMembers(e);if((0,i.isEmpty)(t))r={};else{const i=[];Object.keys(t).forEach((e=>{i.push({value:e,formatValue:t[e].color})})),r=m.make({fieldName:e,referenceField:e,property:p.Z.CHART_COLOR,type:g.CATEGORIES,values:i}).getRuleJson()}}return new h.Z([{field:e,conditionalFormatting:r}])}_getCategoricalChartColorRule(e){const t=this.getConditionalFormattingRules().getRulesForField(e);let r;return Object.keys(t).forEach((e=>{t[e].getType()===g.CATEGORIES&&t[e].getProperty()===p.Z.CHART_COLOR&&(r=t[e])})),r}getOrganizations(){return Array.from(this.#$t.values())}getOrganizationById(e){return this.#$t.get(e)}getErrorMessage(){return this.#At.errorMessage}getJson(){return this.#At}isFiscalDateSupported(){let e=!1;return this.getFieldsByType(o.Date)?.forEach((t=>{Object.keys(t.getSubDimensionFields()).forEach((t=>{-1!==t.indexOf(b)&&(e=!0)}))})),e}isCustomFiscalEnabled(){const e=this.getFieldsByType(o.Date)[0];return e instanceof u.Z&&(null!=this.#zt?this.#zt:this.#zt=e&&!e.getFiscalMonthOffset()&&!e.getFirstDayOfWeek()&&Object.values(e.getSupportedGrains()).some((e=>e.getDateGrain().isFiscal())))}getConditionalFormattingRules(e=this.#Ut){const t=[];return e.forEach(((e,r)=>{t.push({field:r,conditionalFormatting:e.getConditionalFormatting()})})),this.#Ht.forEach(((e,r)=>{t.push({field:r,conditionalFormatting:e.getConditionalFormatting()})})),this.#jt.forEach(((e,r)=>{t.push({field:r,conditionalFormatting:e.getConditionalFormatting()})})),new h.Z(t)}getAllDimensions(){const e=this._getDateFieldNames(),t=this._getGrainFieldNames();return this.getAvailableDimensions().concat(e).concat(t).sort()}getDateTimeFieldGrain(e){if(null!=e)return this._getDateGrainByName(e)}getDateTimeField(e){if(null==e)return;const t=Array.isArray(e)?e[1]:e;return this.isDateDimension(t)?this.getField(t):void 0}getDateTimeFieldGrainByColumnName(e){return this.#Ht.get(e)}hasDateTimeFieldGrain(e){return this.#Ht.has(e)}hasOldDateFields(){return this._getDateFieldNames().some((e=>this._getDateFieldByFullFieldName(e)?.getDateType()===d.ZP.DATE||null===this._getDateFieldByFullFieldName(e)?.getDateType()))}_getGrainFieldNames(){const e=[],t=[n.EPOCH_DAY,n.EPOCH_SECOND];return this.#Ht.forEach(((r,i)=>{-1===t.indexOf(r.getDateGrain())&&e.push(i)})),e}_getDateFieldNames(){return this.getFieldsForExplorer(o.Date).map(((e,t)=>e.getFullFieldName()))}_getDateGrainByName(e){if(this.#Gt!==_.Z.NEW)return this.#Ht.get(e);{const t=this.getField(e[1]);if(t?.getType()===o.Date)return t?.getSupportedGrains()[e[0]]}}_getDateDimensionGrainByName(e){if(this.#Gt===_.Z.NEW){const t=this.getField(e[1]);if(t?.getType()===o.Date)return t?.getSubDimensionField(e[0])}else if(this.#Ht.get(e)?.getDateGrain().doesSupportGrouping())return this.#Ht.get(e)}_getDateFieldByFullFieldName(e){let t=e;return Array.isArray(e)&&(t=e[0]),this.#jt.get(t)}_getDateMeasureGrainByName(e){let t;if(this.#Gt===_.Z.NEW){if(t=this.getField(e[1]),t?.getType()===o.Date)return t?.getSubMeasureField(e[0])}else if(t=this.#Ht.get(e),t&&!t.getDateGrain().doesSupportGrouping())return t}_getFieldMemberDetails(e,t){const r=this._getMembers(e);if((0,i.isEmpty)(r)||null==r)return{};const s={};return Object.keys(r).forEach((e=>{const i=r[e];s[e]=i[t]})),s}_buildFieldsMap(){let e;const t={};if(this.#At.dimensions)for(e of this.#At.dimensions)t[e.field]=e;if(this.#At.measures)for(e of this.#At.measures)t[e.field]=e;if(this.#Ut=new Map,this.#jt=new Map,this.#At.dimensions)for(e of this.#At.dimensions)this.#Ut.has(e.field)||this._addDimensionField(e,!1);if(this.#At.derivedDimensions)for(e of this.#At.derivedDimensions)this.#Ut.has(e.field)||this._addDimensionField(e,!0);if(this.#At.measures)for(e of this.#At.measures)this.#Ut.has(e.field)||this._addMeasureField(e,!1);if(this.#At.derivedMeasures)for(e of this.#At.derivedMeasures)this.#Ut.has(e.field)||this._addMeasureField(e,!0);if(this.#At.dates)for(e of this.#At.dates)this._addDateTimeField(e,t);this.#Ht=this._buildGrainsMap()}_buildRelationships(){this.#At.relationships&&(this.#qt=this.#At.relationships.map((e=>new l(e))))}_addDimensionField(e,t){const r=this._buildFieldInfo(e.field);if(r.members={},e.members&&e.members.length>0){const t={};for(const r of Array.from(e.members)){const e={};(0,i.extend)(e,(0,i.omit)(r,"member")),t[r.member]=e}r.members=t}null!=e.salesforceActionsEnabled&&(r.sfdcActionsEnabled=e.salesforceActionsEnabled),null!=e.salesforceActions&&(r.sfdcActions=e.salesforceActions),(0,i.extend)(r,(0,i.omit)(e,"field","members","salesforceActionsEnabled","salesforceActions")),this.#Ut.set(r.name,new a.Z(r,o.Dimension,t))}_addMeasureField(e,t){const r=this._buildFieldInfo(e.field);let s=null!=e.format?e.format.customFormat:void 0;s&&(s=JSON.parse(s));const n=null!=e.format?e.format.delimiters:void 0;Array.isArray(s)&&s.length>=2&&(r.format={},r.format.fullFormat=s[0],r.format.unitMultiplier=s[1],n&&(r.format.delimiters=n)),(0,i.extend)(r,(0,i.omit)(e,"field","format")),this.#Ut.set(r.name,new a.Z(r,o.Measure,t))}_shouldReadDateGrainLabelFromFields(){return!1}_addDateTimeField(e,t){const r=(0,i.extend)({},this.#Ut.get(e?.fields?.fullField||e.fullyQualifiedName)?.getJson(),this._buildFieldInfo(this._getDateFieldName(e)),(0,i.omit)(e,"fields"));r.label||(r.label=r.fullyQualifiedName),Object.keys(e.fields||{})?.forEach((t=>{this.#Ut.delete(e.fields?.[t]||"")}));const s=new u.Z(r,e.fields,t,this.#Gt===_.Z.NEW,this._shouldReadDateGrainLabelFromFields());this.#Ut.set(r.name,s),this.#jt.set(s.getFullFieldName(),s)}_buildGrainsMap(){const e=new Map,t=this.getFieldsByType(o.Date);return t?.forEach((t=>{const r=t?.getSupportedGrains();Object.keys(r)?.forEach((t=>{e.set(r[t]?.getColumnName(),r[t])}))})),e}_buildFieldInfo(e){return{name:e}}_buildOrganizationsMap(){const e=this.#At.organizations||[];this.#$t=new Map(e.map((e=>{const t=new c(e);return[t.getId(),t]})))}_getMembers(e){return this.getField(e)?.getMembers()||this.getDateTimeFieldGrain(e)?.getMembers()}_getDateFieldName(e){return this.#Gt===_.Z.NEW&&e.fields?.fullField||e.alias}}},6965:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(84985),n=r(25572),o=r(95812),a=r(66537);class l{constructor(e,t,r,i,s,n,o,a,l){this._dateGrain=e,this._parentField=t,this._members=i,this._format=s,this._conditionalFormatting=n,this._showInExplorer=o,this._isNewDateGrain=a,this._isNewDateGrain||(this._grainName=r),this._label=l}showInExplorer(){return this._showInExplorer}getDateTimeField(){return this._parentField}getDateGrain(){return this._dateGrain}getGrain(){return this._dateGrain.getCode()}getName(){return this.isLegacy()?this._grainName:[this.getGrainName(),this._parentField.getName()]}getMembers(){return this._members}getConditionalFormatting(){return this._conditionalFormatting}getGrainName(){return this._dateGrain.getGrain()}getValue(){return this._dateGrain.getGrain()}getLabel(){return this._label??`${this._getParentFieldLabel()} (${this._dateGrain.getLabel()})`}getAlias(){return this.isLegacy()?this._grainName||"":`${this._dateGrain.getCode()}_${this._parentField.getName()}`}getProjection(){return this.isLegacy()?`'${this._grainName||""}'`:`${this._dateGrain.getAccessFunction()}('${this._parentField.getName()}')`}getMetadata(){return this._dateGrain.getMetadata()}getFormat(){const e=this.getGrainName();return a.isEpochGrain(e)?this._format:this._dateGrain.getFormat()}getColumnName(){return this.getAlias()}doesSupportGrouping(){return this._dateGrain.doesSupportGrouping()}isLegacy(){return!this._isNewDateGrain}_getParentFieldLabel(){return this._parentField.getLabel()||this._parentField.getName()}}class u extends n.Z{constructor(e,t,r,i,n){super(e,s.Date,!1),this._alias=e.alias,this._firstDayOfWeek=e.firstDayOfWeek,this._fiscalMonthOffset=e.fiscalMonthOffset,this._isYearEndFiscalYear=e.isYearEndFiscalYear;const a=e.type||o.ZP.DATE_TIME.getCode();this._dateType=i?o.ZP.getEnumByCode(a):o.ZP.DATE,this._isNewDate=i,this._fullField=t&&t.fullField,this._grains=this._buildGrains(t,r,n),this._subDimensionFields=this._buildSubDimensionFields(),this._subMeasureFields=this._buildSubMeasureFields()}getAlias(){return this._alias}hasFullField(){return this._isNewDate||void 0!==this._fullField}getName(){return this.getFullFieldName()}getFullFieldName(){return this._fullField||this._alias}getFirstDayOfWeek(){return this._firstDayOfWeek}getFiscalMonthOffset(){return this._fiscalMonthOffset}isYearEndFiscalYear(){return this._isYearEndFiscalYear}getDateType(){return this._dateType}getSubDimensionFields(){return this._subDimensionFields}getSubMeasureFields(){return this._subMeasureFields}getSubMeasureField(e){return this.getSubMeasureFields()[e]}getSubDimensionField(e){return this.getSubDimensionFields()[e]}getGrain(e){return this.getSupportedGrains()[e]}getSupportedGrains(){return this._grains}doesSupportDateGrain(){return!0}isNewDate(){return this._isNewDate}isLegacy(){return!this._isNewDate}_getFormat(e){if(null!=e&&null!=e.customFormat){const t=JSON.parse(e.customFormat);if(Array.isArray(t)&&t.length>=2)return{fullFormat:t[0],unitMultiplier:t[1]}}}_copyFieldsAttributes(e,t){if(!t||null==e||!e[t])return{label:void 0,members:void 0,showInExplorer:!0,conditionalFormatting:void 0,format:void 0};const r=e[t],s=r.conditionalFormatting,n=r.label,o=r.showInExplorer,a=null!=r.format?this._getFormat(r.format):void 0,l={};if(null!=r.members&&r.members.length>0)for(const e of r.members){const t={};(0,i.extend)(t,(0,i.omit)(e,"member")),l[e.member]=t}return{members:l,showInExplorer:o,format:a,conditionalFormatting:s,label:n}}_buildGrains(e,t,r){const i={};for(const s of this._dateType.getSupportedGrains()){const n=e&&e[s.getCode()],{label:o,showInExplorer:a,members:u,format:d,conditionalFormatting:c}=this._copyFieldsAttributes(t,n);(this._isNewDate&&!e&&!s.isFiscal()||e&&Object.prototype.hasOwnProperty.call(e,s.getCode()))&&(i[s.getGrain()]=new l(s,this,n,u,d,c,a,this._isNewDate,r?o:null))}return i}_buildSubDimensionFields(){const e={},t=this.getSupportedGrains();for(const r of Object.keys(t)){const i=t[r];i.doesSupportGrouping()&&(e[r]=i)}return e}_buildSubMeasureFields(){const e={},t=this.getSupportedGrains();for(const r of Object.keys(t)){const i=t[r];i.doesSupportGrouping()||(e[r]=i)}return e}}},95812:(e,t,r)=>{"use strict";r.d(t,{Jk:()=>o,ZP:()=>l,_T:()=>a,hR:()=>n});var i=r(723),s=r(66537);const n=[s.YEAR,s.QUARTER,s.MONTH,s.WEEK,s.DAY,s.HOUR,s.MINUTE,s.SECOND],o=[s.YEAR_FISCAL,s.QUARTER_FISCAL,s.MONTH_FISCAL,s.WEEK_FISCAL],a=[s.EPOCH_DAY,s.EPOCH_SECOND];class l extends i{getCode(){return this._value.code}getSupportedGrains(){const e=[];for(const t of n)if(e.push(t),t===this._value.finestGrain)break;return e.concat(a,o)}}l.build(l,{DATE:{code:"Date",finestGrain:s.SECOND},DATE_ONLY:{code:"DateOnly",finestGrain:s.DAY},DATE_TIME:{code:"DateTime",finestGrain:s.SECOND}})},25572:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(46194),s=r(37954);class n{constructor(e,t,r){this._json=e,this._type=t,this._isDerived=r}getLabel(){return this._json.label}getName(){return this._json.name}showInExplorer(){return this._json.showInExplorer}getMembers(){return this._json.members}getType(){return this._type}getDataType(){return this._json.dataType?i.Z.hasName(this._json.dataType)?i.Z.fromName(this._json.dataType):void 0:null}getSubType(){return this._json.subType}getGrain(){return this._json.grain?s.Z.getEnumByCode(this._json.grain):null}getParent(){return this._json.parent}getFormat(){return this._json.format}getRecordIdField(){return this._json.recordIdField}getRecordOrganizationIdField(){return this._json.recordOrganizationIdField}isLinkTemplateEnabled(){return this._json.linkTemplateEnabled}isSfdcActionsEnabled(){return this._json.sfdcActionsEnabled}getLinkTemplate(){return this._json.linkTemplate}getLinkTooltip(){return this._json.linkTooltip}getSfdcActions(){return this._json.sfdcActions}isMultiValue(){return this._json.isMultiValue}isDerived(){return this._isDerived}isAggregatable(){return this._json.aggregatable}getRecordDisplayFields(){return this._json.recordDisplayFields}getConditionalFormatting(){return this._json.conditionalFormatting}getDefaultAction(){return this._json.defaultAction}getFQKField(){return this._json.keyQualifier}doesSupportDateGrain(){return!1}getJson(){return this._json}}},37954:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("YEAR","year",new s).add("FISCAL_YEAR","fiscal_year",new s).add("QUARTER","quarter",new s).add("FISCAL_QUARTER","fiscal_quarter",new s).add("MONTH","month",new s).add("FISCAL_MONTH","fiscal_month",new s).add("WEEK","week",new s).add("FISCAL_WEEK","fiscal_week",new s).add("DAY","day",new s).add("HOUR","hour",new s).add("MINUTE","minute",new s).add("SECOND","second",new s).add("EPOCH_DAY","epoch_day",new s).add("EPOCH_SECOND","epoch_second",new s).add("FULL_FIELD","full_field",new s).finish()},46194:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("STRING","string",new s).add("DATE_TIME","date_time",new s).add("NUMBER","number",new s).finish()},11040:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(38241);class s{#Rt;#Qt;#wt;#At;#Dt;#Yt;constructor(e,t,r,i,s){this.#Rt=e,this.#Qt=t,this.#wt=r,this.#At=i,this.#Dt=s}getIndex(){return this.#wt}getWidgetId(){return this.#At.name}getWidget(){let e=this.#Dt.getWidget(this.getWidgetId());return e}getGridLayout(){return this.#Dt.getLayout(this.#Rt)}getGridLayoutPage(){return this.getGridLayout().getPage(this.#Qt)}getWidgetStyle(){return new i(this,this.#Dt)}getColumn(){return this.#At.column}getRow(){return this.#At.row}getColumnSpan(){return this.#At.colspan}getRowSpan(){return this.#At.rowspan}getWidgetStyleJson(){return this.#At.widgetStyle}getParametersJson(){return this.#At.parameters}getPosition(){return{column:this.getColumn(),row:this.getRow(),width:this.getColumnSpan(),height:this.getRowSpan()}}getJson(){return this.#At}getContainedWidgetLayouts(){return this.#Yt||(this.#Yt=this.getGridLayoutPage().getContainedWidgetLayouts(this.getWidgetId())),this.#Yt}}},95929:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>X});var i=r(51412),s=r(61506),n=r(22058),o=r(12450),a=r(40651),l=r(82675),u=r(19032),d=r(16051),c=r(94683),h=r(12944),p=r(50968),g=r(79587),m=r(75550),_=r(51548),f=r(47735),y=r(96063),b=r(61884),C=r(61367),E=r(67266),S=r(70609);const T=new class{_sourceObjects=new i.Z;_sourceObject=new i.Z;_sourceFields=new i.Z;getSourceObjects(e,t){return this._sourceObjects.getOrPut(e+E(t),(()=>s.Z.get(S.Z).getSourceObjects(e,t)))}getSourceObject(e,t){return this._sourceObject.getOrPut(e+t,(()=>s.Z.get(S.Z).getSourceObject(e,t)))}getSourceFields(e,t){return this._sourceFields.getOrPut(e+t,(()=>s.Z.get(S.Z).getSourceFields(e,t)))}};var I=r(95812),v=r(45080);const R="text",w="numeric",A="date",D="datetime",L="dateonly";class M{constructor(e){this._liveConnection=e}getXMD(){return null==this._liveConnection?this._xmdPromise=Promise.resolve(new g.Z({},v.Z.NEW)):this._xmdPromise||(this._xmdPromise=T.getSourceFields(this._liveConnection.connectionName,this._liveConnection.sourceObjectName).then((e=>{const t=[],r=[],i=[];for(const s of e.fields)s.fieldType===w?t.push(this._createMeasure(s)):s.fieldType===R?r.push(this._createDimension(s)):s.fieldType!==A&&s.fieldType!==D&&s.fieldType!==L||i.push(this._createDate(s));return new g.Z({measures:t,dimensions:r,dates:i},v.Z.NEW)}))),this._xmdPromise}_createMeasure(e){return{description:e.description,field:e.name,format:{decimalDigits:0},fullyQualifiedName:e.name,label:e.label||e.name,origin:"SourceObject",showInExplorer:!0}}_createDimension(e){return{conditionalFormatting:{},customActions:[],customActionsEnabled:!1,description:e.description,field:e.name,fullyQualifiedName:e.name,isMultiValue:e.multiValue,label:e.label||e.name,linkTemplateEnabled:!1,members:[],origin:"SourceObject",recordDisplayFields:[],salesforceActions:[],salesforceActionsEnabled:!1,showInExplorer:!0}}_createDate(e){const t=this._getXMDFieldTypeFromSourceFieldType(e.fieldType);return{alias:e.name,firstDayOfWeek:-1,fiscalMonthOffset:0,fullyQualifiedName:e.name,label:e.label||e.name,showInExplorer:!0,type:t.getCode()}}_getXMDFieldTypeFromSourceFieldType(e){return e===A?I.ZP.DATE:e===D?I.ZP.DATE_TIME:I.ZP.DATE_ONLY}}var N=r(86473),O=r(81782),P=r(62391),x=r(21209);class Z{constructor(e,t){this._cdpObjectName=e,this._dataspace=t}getXMD(){return this.getXMDJson().then((e=>new g.Z(e,v.Z.NEW)))}getXMDJson(){return this._xmdPromise||(this._xmdPromise=s.Z.get(P.Z).getCDPObject(this._cdpObjectName,this._dataspace).then((e=>{const t=x.Z.fromObjectName(this._cdpObjectName),r=[],i=[],s=[];let n;if(t===x.Z.CALCULATED_INSIGHT){if(null!=e.measures)for(const t of e.measures)r.push(this._createMeasure(t));if(null!=e.dimensions)for(const t of e.dimensions)"STRING"===t.type||"NUMBER"===t.type?i.push(this._createDimension(t)):s.push(this._createDate(t))}else{if(null!=e.fields)for(const t of e.fields)"NUMBER"===t.type?r.push(this._createMeasure(t)):"STRING"===t.type?i.push(this._createDimension(t)):s.push(this._createDate(t));if(t===x.Z.DATA_MODEL&&null!=e.relationships){n=[];for(const t of e.relationships)n.push(this._createRelationship(t))}}return{measures:r,dimensions:i,dates:s,relationships:n}}))),this._xmdPromise}_createMeasure(e){return{field:e.name,format:{decimalDigits:0},fullyQualifiedName:e.name,label:e.displayName||e.name,origin:"CDP",showInExplorer:!0,aggregatable:e.rollupable,dataType:e.type}}_createDimension(e){return{conditionalFormatting:{},customActions:[],customActionsEnabled:!1,field:e.name,fullyQualifiedName:e.name,label:e.displayName||e.name,linkTemplateEnabled:!1,members:[],origin:"CDP",recordDisplayFields:[],salesforceActions:[],salesforceActionsEnabled:!1,showInExplorer:!0,dataType:e.type,keyQualifier:e.keyQualifier}}_createDate(e){const t={};return[...I.hR,...I._T,...I.Jk].forEach((e=>{t[e.getCode()]=null})),{alias:e.name,firstDayOfWeek:-1,fiscalMonthOffset:0,fullyQualifiedName:e.name,label:e.displayName||e.name,showInExplorer:!0,type:I.ZP.DATE_TIME.getCode(),dataType:e.type,fields:t}}_createRelationship(e){return{originFieldName:e.fromEntityAttribute,originAsset:e.fromEntity,targetFieldName:e.toEntityAttribute,targetAsset:e.toEntity,cardinality:e.cardinality}}}var F=r(26499),k=r(89407),B=r(97108),W=r(49842),G=r(25946);class U{#Kt;constructor(e){this.#Kt=e}getXMD(){const e=this.#Kt.getAvailableDimensions(),t=[],r=[],i=[];for(const s of e)s.getType()===G.Type.DATE?i.push(this._createDate(s)):s.getType()===G.Type.MEASURE?r.push(this._createMeasure(s)):s.getType()===G.Type.DIMENSION&&t.push(this._createDimension(s));return Promise.resolve(new g.Z({dimensions:t,measures:r,dates:i},v.Z.NEW))}_createDate(e){return{alias:e.getName(),firstDayOfWeek:-1,fiscalMonthOffset:0,fullyQualifiedName:e.getName(),label:e.getLabel(),showInExplorer:!0,type:"Date"}}_createDimension(e){return{conditionalFormatting:{},customActions:[],customActionsEnabled:!1,description:e.getName(),field:e.getName(),fullyQualifiedName:e.getName(),isMultiValue:!1,label:e.getLabel(),linkTemplateEnabled:!1,members:[],origin:"report",recordDisplayFields:[],salesforceActions:[],salesforceActionsEnabled:!1,showInExplorer:!0}}_createMeasure(e){return{description:e.getName(),field:e.getName(),format:{decimalDigits:0},fullyQualifiedName:e.getName(),label:e.getLabel(),origin:"report",showInExplorer:!0}}}var H=r(9410),V=r(45992),j=r(85270),q=r(8429),z=r(99095),$=r(17839);class Q extends z.Z{async getWorkbook(e){try{return this._makeRequest(this._buildFullPath(`tableau/workbooks/${e}`))}catch(e){throw(new $.Z).handle(e,q.Z.getLabel("InsightsErrorDialog","tableauWorkbookNotFound"))}}}const Y=new Q;var K=r(74104);const J="DEEP";class X{constructor(e,t=new i.Z){this._shouldCache=e,this._cache=t,this._datasetDmoMappingCache=new i.Z}getAsset(e,t,r){return this._getFromCache(e,t,J,(async()=>{switch(e){case a.Z.LENS:return new f.Z((new C).convert(await s.Z.get(c.Z).getLens(t)));case a.Z.DASHBOARD:return new _.Z((new C).convert(await s.Z.get(d.Z).getDashboard(t)));case a.Z.COMPONENT:return new F.Z((new C).convert(await s.Z.get(k.Z).getComponent(t)));case a.Z.DATASET:return(0,K.w)()&&await(0,K.r)([t],this.primeDatasetDMOMappingCache.bind(this)),new y.Z(await s.Z.get(u.Z).getDataset(t));case a.Z.FOLDER:return new b.Z(await s.Z.get(h.Z).getFolder(t));case a.Z.SOBJECT:{const e=await s.Z.get(n.Z).getSObject(t);return new p.Z({name:e.getName(),namespace:e.getNamespace(),label:e.getLabel()})}case a.Z.CDP_OBJECT:return new O.Z(await s.Z.get(P.Z).getCDPObject(t,r),r);case a.Z.REPORT:{const e=new W(await o.Z.describeReport(t));return this.primeCache(a.Z.REPORT_TYPE,e.getReportType(),e.getReportTypeMetadata()),e}case a.Z.REPORT_TYPE:return new W(await o.Z.getReportType(t)).getReportTypeMetadata();case a.Z.TABLEAU_DASHBOARD:return new H.Z(await V.Z.getDashboard(t));case a.Z.TABLEAU_WORKBOOK:return new j.Z(await Y.getWorkbook(t));default:throw new Error(`Asset type "${e.code}" not supported.`)}}))}getAssets(e,t){const r=e===a.Z.DATASET?J:"SHALLOW";return this._getFromAssetsCache(e,t,r,(async t=>{switch(e){case a.Z.DASHBOARD:{const{dashboards:e}=await s.Z.get(d.Z).getDashboards({ids:t});return e.map((e=>new _.Z(e)))}case a.Z.DATASET:{const{datasets:e}=await s.Z.get(u.Z).getDatasets({ids:t});return e.map((e=>new y.Z(e)))}default:throw new Error(`Asset type "${e.code}" not supported.`)}}))}getXmd(e,t,r,i=this._getDefaultXmdType(e),n,o){return this._getFromXmdCache({assetType:e,assetId:t,xmdType:i,dateVersion:r,getXmd:async()=>{const u=await this.getAsset(e,t,o);let d;switch(e){case a.Z.DATASET:return u.getDatasetType()===B.Z.LIVE?new M(u.getLiveConnection()).getXMD():new g.Z(await s.Z.get(l.Z).getXmd(u.getId(),u.getCurrentVersionId(),i),r);case a.Z.DASHBOARD:case a.Z.COMPONENT:case a.Z.LENS:return new g.Z(await s.Z.get(l.Z).getAssetXmd(u.getId()),r);case a.Z.SOBJECT:return new N.Z(u.getName()).getXMD();case a.Z.CDP_OBJECT:return d=new Z(u.getId(),o),n?function(e,t,r=v.Z.NEW){const i={measures:[],dimensions:[],dates:[]};if(e.measures)for(const r of e.measures){const e={...r};e.field=`${t}.${r.field}`,i.measures.push(e)}if(e.dimensions)for(const r of e.dimensions){const e={...r};e.field=`${t}.${r.field}`,e.fullyQualifiedName=r.fullyQualifiedName?`${t}.${r.fullyQualifiedName}`:r.fullyQualifiedName,i.dimensions.push(e)}if(e.dates)for(const r of e.dates){const e={...r};e.alias=`${t}.${r.alias}`,e.fullyQualifiedName=`${t}.${r.fullyQualifiedName}`,i.dates.push(e)}return new g.Z(i,r)}(await d.getXMDJson(),n):d.getXMD();case a.Z.REPORT_TYPE:return new U(u).getXMD();default:throw new Error(`Fetching XMD for asset type "${e.code}"" not yet supported.`)}},namespace:n,dataspace:o})}getDMOFromDataset(e){return this._datasetDmoMappingCache.get(this._makeDatasetDmoMappingCacheKey(e))}primeCache(e,t,r){this._shouldCache&&this._cache.put(this._makeCacheKey(e,t,J),Promise.resolve(r))}primeXmdCache(e,t,r,i,s){this._shouldCache&&this._cache.put(this._makeXmdCacheKey(e,t,r,s),Promise.resolve(i))}primeDatasetDMOMappingCache(e,t){this._datasetDmoMappingCache.put(this._makeDatasetDmoMappingCacheKey(e),t)}flushCache(){this._shouldCache&&this._cache.flush()}clone(){return new X(this._shouldCache,this._cache.clone())}provide(e,t,r,i,s){const n=[],o=[];return t.forEach(((t,a)=>{n.push(this.getAsset(e,t,s)),o.push(this.getXmd(e,t,r,this._getDefaultXmdType(e),i&&i[a],s))})),Promise.all([Promise.all(n),Promise.all(o)])}hasXmdCached(e,t,r,i){return this._cache.has(this._makeXmdCacheKey(e,t,r,i))}async _getFromCache(e,t,r,i){if(!this._shouldCache)return i();const s=await this._cache.getOrPut(this._makeCacheKey(e,t,r),i);return this._cache.getOrPut(this._makeCacheKey(e,s.getId(),r),(async()=>s)),this._cache.getOrPut(this._makeCacheKey(e,s.getFullyQualifiedName(),r),(async()=>s)),s}async _getFromAssetsCache(e,t,r,i){if(!this._shouldCache)return i(t);const s=t.filter((t=>this._cache.has(this._makeCacheKey(e,t,r)))),n=t.filter((e=>!s.includes(e))),o=n.length?await i(n):[];return o.forEach((t=>{this._cache.getOrPut(this._makeCacheKey(e,t.getId(),r),(async()=>t)),this._cache.getOrPut(this._makeCacheKey(e,t.getFullyQualifiedName(),r),(async()=>t))})),s.length?o.concat(await Promise.all(s.map((t=>this._cache.get(this._makeCacheKey(e,t,r)))))):o}async _getFromXmdCache({assetType:e,assetId:t,xmdType:r,dateVersion:i,getXmd:s,namespace:n,dataspace:o}){if(!this._shouldCache)return s();const[a,l]=await Promise.all([this.getAsset(e,t,o),this._cache.getOrPut(this._makeXmdCacheKey(e,t,r,i,n,o),s)]);return this._cache.getOrPut(this._makeXmdCacheKey(e,a.getId(),r,i,n,o),(async()=>l)),this._cache.getOrPut(this._makeXmdCacheKey(e,a.getFullyQualifiedName(),r,i,n,o),(async()=>l)),l}_makeCacheKey(e,t,r){return[e.getCode(),r,t].join("|")}_makeDatasetDmoMappingCacheKey(e){return[a.Z.DATASET.code,"datasetDmoMapping",e].join("|")}_makeXmdCacheKey(e,t,r,i,s,n){const o=[a.Z.EXTERNAL_DATA.getCode(),e.getCode(),t,r.code];return s&&o.push(s),n&&o.push(n),i&&e===a.Z.DATASET&&o.push(i.getCode()),o.join("|")}_getDefaultXmdType(e){return e===a.Z.DATASET?m.Z.MAIN:m.Z.ASSET}}},9410:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(67951),s=r(40651),n=r(60873);class o extends i{constructor(e){super(e)}getType(){return s.Z.TABLEAU_DASHBOARD}getId(){return this._json.id}getLabel(){return this._json.label}getName(){return this._json.name}getNamespace(){return this._json.namespace}getDescription(){return this._json.description}getEmbedUrl(){return this._json.embedUrl}getJson(){return this._json}isNew(){return!1}getUrl(){return this._json.url}getVisibility(){return this._json.visibility?n.Z.fromCode(this._json.visibility):n.Z.ALL}}},85270:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(67951),s=r(40651);class n extends i{constructor(e){super(e)}getType(){return s.Z.TABLEAU_WORKBOOK}getId(){return this._json.id}getLabel(){return this._json.label}getName(){return this._json.name}getPrimaryView(){return this._json.primaryView}getVisibleSheets(){return this._json.visibleSheets}getNamespace(){return this._json.namespace}getDescription(){return this._json.description}getJson(){return this._json}}},15207:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this.json=e}getId(){return this.json.id}getName(){return this.json.name}getProfilePhotoUrl(){return this.json.profilePhotoUrl}}},60873:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("ALL","All",new s).add("LIMITED","Limited",new s).finish()},95044:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{static getDefaultValue(){return this.BROWSE}}s.add("SEARCH","search",new s).add("MRU","mru",new s).add("FAVORITES","favorites",new s).add("CREATED_BY_ME","createdByMe",new s).add("SHARED_WITH_ME","sharedWithMe",new s).add("INCLUDE_ALL_PRIVATE","includeAllPrivate",new s).add("BROWSE","browse",new s).finish()},81782:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(67951),s=r(40651),n=r(21209);const o="__";class a extends i{constructor(e,t){super(e),this._dataspace=t,this._cdpObjectJson=e,this._dataspace=t}getType(){return s.Z.CDP_OBJECT}getObjectType(){return n.Z.fromObjectName(this.getName())}getId(){return this.getFullyQualifiedName()}getName(){return 2===this._cdpObjectJson.name.split(o).length?this._cdpObjectJson.name:this._cdpObjectJson.name.substr(this._cdpObjectJson.name.indexOf(o)+2)}getDataspace(){return this._dataspace}getNamespace(){const e=this._cdpObjectJson.name.split(o);return 2===e.length?null:e[0]}getLabel(){return this._cdpObjectJson.displayName}canModify(){return!1}getSldsIconCode(){return this.getObjectType().sldsIconCode}getJson(){return this._json}}},62391:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(640),s=r(51412),n=r(21209);class o extends i.Z{_cdpObjectPromises=new s.Z;_cdpObjectsByTypePromises=new s.Z;constructor(e){super(),this._cdpApi=e}async getCDPObject(e,t){let r=this._cdpObjectPromises.get(e);if(null!=r)return r;const i=(await this._cdpApi.getCDPObject(e,t)).metadata[0];return r=Promise.resolve(i),this._cdpObjectPromises.put(e,r),r}async getCDPObjects(e){let t=this._cdpObjectsByTypePromises.get(e.name);if(null!=t)return t;const r=await this._cdpApi.getCDPObjects(e),i=[];return r.metadata.forEach((t=>{const r=t.name;(e!==n.Z.CALCULATED_INSIGHT||r.endsWith(e.suffix))&&(this._cdpObjectPromises.put(r,Promise.resolve(t)),i.push(t))})),i.sort(((e,t)=>e.displayName.toLowerCase().localeCompare(t.displayName.toLowerCase()))),t=Promise.resolve(i),this._cdpObjectsByTypePromises.put(e.name,t),t}}},21209:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(79646),s=r(8429);class n extends i.Z{static fromSuffix(e){switch(e){case n.DATA_LAKE_OBJECT.suffix:return n.DATA_LAKE_OBJECT;case n.DATA_MODEL.suffix:return n.DATA_MODEL;case n.CALCULATED_INSIGHT.suffix:return n.CALCULATED_INSIGHT;default:throw new Error("Unknown CDP object suffix")}}static fromObjectName(e){const t=e.substring(e.length-3);return n.fromSuffix(t)}constructor(e,t,r,i){super(),this.suffix=e,this.sldsIconCode=t,this.labelKey=r,this.apiName=i}getLabel(){return s.Z.getLabel("CDPObjects",this.labelKey)}}n.add("DATA_LAKE_OBJECT",new n("dll","data_streams","dataLakeObject","DataLakeObject")).add("DATA_MODEL",new n("dlm","data_model","dataModel","DataModelObject")).add("CALCULATED_INSIGHT",new n("cio","calculated_insights","calculatedInsight","CalculatedInsight")).finish()},37253:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(8429),s=r(69370),n=r(16154),o=r(79845);class a extends s.Z{constructor({type:e,customInputType:t,iconStyleProperty:r,labelKey:i}){super(),this.type=e,this.customInputType=t,this.iconStyleProperty=r,this.labelKey=i}get label(){return i.Z.getLabel("ConditionalFormatting",this.labelKey)}}a.add("BACKGROUND_COLOR","backgroundColor",new a({type:n.COLOR,iconStyleProperty:"backgroundColor",labelKey:"backgroundColor"})).add("TEXT_COLOR","color",new a({type:n.COLOR,iconStyleProperty:"color",labelKey:"textColor"})).add("CHART_COLOR","chartColor",new a({type:n.COLOR,iconStyleProperty:"color",labelKey:"chartColor"})).add("BORDER_COLOR","borderColor",new a({type:n.COLOR,iconStyleProperty:"borderColor",labelKey:"borderColor"})).add("NUMBER_COLOR","numberColor",new a({type:n.COLOR,iconStyleProperty:"fill",labelKey:"numberColor"})).add("SYMBOL","symbol",new a({type:n.CUSTOM,customInputType:o.SYMBOL_PICKER,labelKey:"symbol"})).add("SYMBOL_COLOR","symbolColor",new a({type:n.COLOR,iconStyleProperty:"fill",labelKey:"symbolColor"})).finish()},1713:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(42333),s=r(37253),n=r(7852);class o{constructor(e){this._buildRulesMap(e)}getStyles(e,t,r=[],i){const n={},o=this.getRulesForField(e);for(const e of Object.getOwnPropertyNames(o)){const a=o[e],l=s.Z.fromCode(e);if(null!=r&&r.length>0&&!r.includes(l))continue;const u=Object.assign({},t);i&&i[u[a.getReferenceField()]]&&(u[a.getReferenceField()]=i[u[a.getReferenceField()]]);const d=a.formatValue(u);null!=d&&(n[e]=d)}return n}getRulesForProperty(e){return this._getRulesByPropertyMap()[e.code]||{}}getRulesForField(e){return this._rulesMap[e]||{}}getGroups(e,t=[],r=[]){if(!t.length)return[];const i={},s=this.getRulesForField(e);for(const e of Object.getOwnPropertyNames(s)){const n=s[e];t.includes(n.getType())&&r.includes(n.getProperty())&&(null!=i[n.getHash()]?i[n.getHash()].push(n):i[n.getHash()]=[n])}const o=[];for(const t of Object.getOwnPropertyNames(i)){const r=i[t];o.push(new n(e,r[0].getReferenceField(),r[0].getScope(),r[0].getType(),r))}return o}hasRuleFor(e,t){return Boolean(this._rulesMap[t]&&this._rulesMap[t][e.code])}hasAnyRuleForFieldName(e){return Boolean(this._rulesMap[e])}_buildRulesMap(e){this._rulesMap={},e.forEach((e=>{const t={},{conditionalFormatting:r}=e;if(null!=r)for(const n of Object.keys(r)){const o=r[n];null!=o&&(t[n]=i.make(o,i.getEnumByCode(o.type),e.field,s.Z.fromCode(n)))}this._rulesMap[e.field]=t}))}_getRulesByPropertyMap(){if(this._rulesByPropertyMap)return this._rulesByPropertyMap;this._rulesByPropertyMap={};for(const e of Object.getOwnPropertyNames(this._rulesMap)){const t=this.getRulesForField(e);for(const r of Object.getOwnPropertyNames(t)){const i=t[r];null==this._rulesByPropertyMap[r]&&(this._rulesByPropertyMap[r]={}),this._rulesByPropertyMap[r][e]=i}}return this._rulesByPropertyMap}}},16146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(52757);class n extends i.Z{constructor(e,t,r,i){super(),this._title=e,this._description=t,this._bigImageName=r,this._smallImageName=i}getCode(){return this.code}getTitle(){return this._title.toString()}getDescription(){return this._description.toString()}getBigImageName(){return this._bigImageName}getSmallImageName(){return this._smallImageName}}n.add("LEFT","left",new n(new s.Z("ExplorerEditRelationship","leftBlendTitle"),new s.Z("ExplorerEditRelationship","leftBlendDescription"),"left-blend-medium","left-blend-small")).add("RIGHT","right",new n(new s.Z("ExplorerEditRelationship","rightBlendTitle"),new s.Z("ExplorerEditRelationship","rightBlendDescription"),"right-blend-medium","right-blend-small")).add("INNER","inner",new n(new s.Z("ExplorerEditRelationship","innerBlendTitle"),new s.Z("ExplorerEditRelationship","innerBlendDescription"),"inner-blend-medium","inner-blend-small")).add("FULL","full",new n(new s.Z("ExplorerEditRelationship","fullBlendTitle"),new s.Z("ExplorerEditRelationship","fullBlendDescription"),"outer-blend-medium","outer-blend-small")).finish()},94160:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(90554),s=r(96486),n=r(66537);class o{constructor(e){this._json=e}get json(){return this._json}get fieldName(){return Array.isArray(this._json)?Array.isArray(this._json[1])?this._json[1][1]:this._json[1]:this._json}get aggregateFunction(){return Array.isArray(this._json)&&!this.isDate?this._json[0]:null}get dateFunction(){return this.isDate?this._json[0]:this.isAggrOnDate?this._json[1][0]:null}get dateAccessFunction(){const e=this.dateFunction;if(!e)throw new Error("Date function not available.");return n.getEnumByGrain(e).getAccessFunction()}get isDate(){return Array.isArray(this._json)&&!Array.isArray(this._json[0])&&n.isValidDateGrain(this._json[0])}get isAggrOnDate(){return Array.isArray(this._json)&&Array.isArray(this._json[1])&&n.isValidDateGrain(this._json[1][0])}get isCountOfRows(){return(0,s.isEqual)(this._json,["count","*"])}}class a{constructor(e){this.type=e.type,this.name=e.name}get json(){return{type:this.type,name:this.name}}}class l{constructor(e){this._json=e}get field(){let e;return this._json.field&&(e=new o(this._json.field)),e}get formula(){return this._json.formula}get name(){return this._json.name}get timeSeriesColumn(){let e;return this._json.timeSeriesColumn&&(e=new a(this._json.timeSeriesColumn)),e}get json(){return(0,i.deepCopy)(this._json)}isColumnUsedInFormula(e,t){if(null==this._json.formula||this.name===e)return!1;return t.parse(this._json.formula).getInputs().includes(e)}}},32024:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{constructor(e,t,r){super(),this.isDimensionOperator=e,this.isMeasureOperator=t,this.isDateOperator=r}}s.add("IN","in",new s(!0,!1,!1)).add("NOT_IN","not in",new s(!0,!1,!1)).add("MATCHES","matches",new s(!0,!1,!1)).add("BETWEEN",">=<=",new s(!1,!0,!1)).add("EQUALS","==",new s(!1,!0,!1)).add("NOT_EQUALS","!=",new s(!1,!0,!1)).add("LESS_THAN","<",new s(!1,!0,!1)).add("LESS_EQUAL","<=",new s(!1,!0,!1)).add("GREATER_THAN",">",new s(!1,!0,!1)).add("GREATER_EQUAL",">=",new s(!1,!0,!1)).add("IS_NULL","isnull",new s(!1,!0,!1)).add("IS_NOT_NULL","isnotnull",new s(!1,!0,!1)).add("DATE_BETWEEN","between",new s(!1,!1,!0)).add("STARTS_WITH","starts with",new s(!0,!1,!1)).finish()},17537:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(90554),n=r(32024);class o{constructor(e){this._json=e}get columnName(){return this._json[0]}get value(){return this._json[1]}get operator(){return n.Z.fromCode(this._json[2])}get json(){return(0,s.deepCopy)(this._json)}get fieldName(){return Array.isArray(this._json[0])?this._json[0][1]:this._json[0]}get dateFunction(){return Array.isArray(this._json[0])?this._json[0][0]:void 0}get dimensionValues(){const e=this._json[1];if((0,i.isEmpty)(e)||Array.isArray(e[0]))return e;if("string"==typeof e[0]||null==e[0])return e.map((e=>{if("string"==typeof e||null==e)return e;throw new Error("String dimension values cannot be mixed with other types")}));if("number"==typeof e[0])return e.map((e=>{if("number"==typeof e)return e;throw new Error("Number dimension values cannot be mixed with other types")}));throw new Error("Invalid value type for dimension filter operator")}get measureValue(){const e=this._json[1];if(1===e.length&&"number"==typeof e[0])return e[0];throw new Error("Measure value should be a number")}get measureRange(){const e=this._json[1];if(2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1])return[e[0],e[1]];throw new Error("Measure range should be a tuple of number, number")}get absoluteDateRange(){const e=this._json[1];if(2===e.length){const[t,r]=e;if("string"==typeof t&&"string"==typeof r||"number"==typeof t&&"number"==typeof r)return[t,r];if(("string"==typeof t||"number"==typeof t)&&null===r)return[t,null];if(null===t&&("string"==typeof r||"number"==typeof r))return[null,r]}throw new Error("Absolute date range should be a tuple of string, string or number, number")}get relativeDateRange(){const e=this._json[1];if(2===e.length)return[this._toRelativeDate(e[0]),this._toRelativeDate(e[1])];throw new Error("Relative date range should be a pair of [string, number]")}get isRelativeDateRange(){const e=this._json[1];return 2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1])}get isCompoundFilter(){return Array.isArray(this._json[0])&&Array.isArray(this._json[1][0])&&this._json[1][0].length===this._json[0].length&&this._json[2]===n.Z.IN.code}_toRelativeDate(e){if(Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&"number"==typeof e[1])return[e[0],e[1]];throw new Error("Relative date should be a array of a string and number")}}},35450:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(90554),s=r(66537);class n{constructor(e){this._json=e}get columnName(){return"string"==typeof this._json?this._json:this.dateAccessFunction+"_"+this.fieldName}get isGroupedByAll(){return"all"===this._json}get fieldName(){return"string"==typeof this._json?this._json:this._json[1]}get dateFunction(){return"string"==typeof this._json?null:this._json[0]}get isDate(){return"string"!=typeof this._json}get dateAccessFunction(){if(!this.dateFunction)throw new Error("Date function not available.");return s.getEnumByGrain(this.dateFunction).getAccessFunction()}get json(){return(0,i.deepCopy)(this._json)}}},69130:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(90554),s=r(17537);class n{constructor(e){this._json=e}get json(){return(0,i.deepCopy)(this._json)}get columnName(){return this._json.name}get ascending(){return this._json.ascending}get filters(){return this._json.filters.map((e=>new s.Z(e)))}get nulls(){return this._json.nulls}hasFilters(){return this._json.filters.length>0}}},80600:(e,t,r)=>{"use strict";r.d(t,{U:()=>p,Z:()=>_});var i=r(96486),s=r(90554),n=r(28564),o=r(26548),a=r(17537),l=r(69130),u=r(35450),d=r(71178);class c extends o.Z{addFilter(e,t){this._json.filters.splice(null!=t?t:this._json.filters.length,0,e)}updateFilter(e,t){this._json.filters[t]=e}setFilters(e){this._json.filters.splice(0,this._json.filters.length),this._json.filters.push(...e)}removeFilter(e){this._json.filters.splice(e,1)}updateBooleanFilterLogic(e){e?this._json.booleanFilterLogic=e:delete this._json.booleanFilterLogic}}var h=r(15809);const p="all";function g(e){return 1===e.length&&e>="A"&&e<="Z"}function m(e){return 2===e.length&&e[0]>="A"&&e[0]<="Z"&&e[1]>="A"&&e[1]<="Z"}class _{constructor(e,t=!1){this._json=e,this._isMutable=t}get sources(){return this._json.sources.map((e=>new n.Z(e)))}getSource(e){return new n.Z(this._json.sources[e])}getSourceName(e){return this._json.sources[e].name}getSourceFilterKey(e){if(!e)throw new Error("Source name cannot be null");return e}getSourceByDataSourceName(e){const t=this._json.sources.find((t=>t.name===e));if(t)return new n.Z(t)}canAddColumnFilterFromAnyDataSource(){return!1}getAllSourceIndexesByDataSourceName(e){const t=[];return this._json.sources.forEach(((r,i)=>{r.name===e&&t.push(i)})),t}findSourceByColumnName(e){for(const t of this._json.sources)if(t.columns.some((t=>t.name===e)))return new n.Z(t)}getDataSourceNameByColumnName(e){const t=this.findSourceByColumnName(e);return t?.name}getSourceLastIndex(e){return(0,i.findLastIndex)(this._json.sources,(t=>t.name===e))}getSourceCount(){return this._json.sources.length}getSourceCountByName(e){return this._json.sources.filter((t=>t.name===e)).length}getDataSourceNameByFieldJson(e){if(1===this.getDataSourceNames().length)return this.getDataSourceNames()[0];throw new Error("Cannot derive data source name from field json for non joined queries")}getDataSourceNames(){return this._iterateUniqueSources((e=>e.name))}getUniqueSources(){return this._iterateUniqueSources((e=>new n.Z(e)))}getNextUniqueSource(e){const t=this.getSourceLastIndex(e);if(t>-1){const e=this._json.sources[t+1];if(e)return new n.Z(e)}}getSourceIndexAndSource(e){const t=new Map;for(let r=0;r<this._json.sources.length;r++){const i=this._json.sources[r];i.name===e&&t.set(r,new n.Z(i))}return t}getSourceAndColumnIndex(e){for(let t=0;t<this._json.sources.length;t++){const r=this._json.sources[t];for(let i=0;i<r.columns.length;i++)if(r.columns[i].name===e)return{sourceIndex:t,columnIndex:i}}return{sourceIndex:-1,columnIndex:-1}}get derivedSource(){const e=this._json.sources,t=e[e.length-1];return t.name?void 0:new n.Z(t)}get nonDerivedSources(){return this.sources.filter((e=>!!e.name))}get isJoined(){return!1}get joins(){return[]}canRemoveDataSource(e,t){return this.getColumnNamesByDataSourceName(e)?.length!==this.getNonDerivedSourcesColumnNames().length}canRemoveJoin(e,t){throw new Error("This is not a joined query")}getDependentDataSources(e){return[]}getReferencesToDataSource(e){return[]}getDataSourceNameBySourceAlias(e){return e}getDataSourceAliasBySourceName(e){return e}hasSingleDataSourceAfterRemovingDataSources(e){return 1===this.getDataSourceNames().filter((t=>!e.includes(t))).length}getColumnNamesByDataSourceName(e){const t=[];return this._json.sources.forEach((r=>{r.name===e&&t.push(...r.columns.map((e=>e.name)))})),t}findColumn(e){const t=this.findSourceByColumnName(e);if(t)return t.findColumn(e)}getAllColumnNames(){const e=[];return this._json.sources.forEach((t=>{e.push(...t.columns.map((e=>e.name)))})),e}get nextColumnName(){const e=[];this._json.sources.forEach((t=>{t.columns.forEach((t=>{const r=t.name;(g(r)||m(r))&&e.push(function(e){return g(e)?e.charCodeAt(0)-65:m(e)?26*(e.charCodeAt(0)-64)+(e.charCodeAt(1)-65):-1}(r))}))})),e.sort((function(e,t){return e-t}));let t=e.length;for(let r=0;r<e.length;r++)if(r!==e[r]){t=r;break}return function(e){if(e<26)return String.fromCharCode(65+e);{const t=e/26-1,r=e%26;return String.fromCharCode(65+t)+String.fromCharCode(65+r)}}(t)}getNonDerivedSourcesColumnNames(){return this.nonDerivedSources.reduce(((e,t)=>e.concat(...t.columns.map((e=>e.name)))),[])}getCogroupType(){return this.getSource(0).cogroupType}getGroups(e){return this._iterateUniqueSources((t=>new u.Z(t.groups[e])))}get groupColumnNames(){return this.isGroupedByAll?[]:this.getSource(0).groupNames}get isGrouped(){return this.getSource(0).isGrouped}get isGroupedByAll(){return this.getSource(0).isGroupedByAll}hasColumnFilters(){return this._json.sources.some((e=>e.filters.length>0))}hasDataSource(e){return this._json.sources.some((t=>t.name===e))}get sourceFilters(){const e=new Map;for(const t in this._json.sourceFilters)Object.prototype.hasOwnProperty.call(this._json.sourceFilters,t)&&e.set(t,new o.Z(this._json.sourceFilters[t]));return e}getSourceFilters(){return this._json.sourceFilters}hasSourceInSourceFilters(e){return!!this._json.sourceFilters[e]}getSourceFilterByIndex(e,t){const r=this._json.sourceFilters[this.getSourceFilterKey(t)];if(r)return r.filters[e]?new a.Z(r.filters[e]):void 0}getSourceFiltersBySourceName(e){return this._json.sourceFilters[this.getSourceFilterKey(e)]?new o.Z(this._json.sourceFilters[this.getSourceFilterKey(e)]):void 0}getSourceFilterKeyBySourceIndex(e){if(null==e)throw new Error("index cannot be null");return this.getDataSourceNames()[e]}getSourceFilterKeysBySourceIndex(e){return null!=e?[this.getDataSourceNames()[e]]:this.getDataSourceNames()}getSourceFilterCount(e){const t=this._json.sourceFilters[this.getSourceFilterKey(e)];return t?t.filters.length:0}get aggregateFilters(){return this._json.aggregateFilters.map((e=>new a.Z(e)))}getAggregateFilterByIndex(e){return new a.Z(this._json.aggregateFilters[e])}getAggregateFilterByColumnName(e){return this.aggregateFilters.filter((t=>t.columnName===e))}getAggregateFilterIndexByColumnName(e){return this.aggregateFilters.findIndex((t=>t.columnName===e))}getAggregateFilterCount(){return this._json.aggregateFilters.length}getColumnFiltersByColumnName(e){const t=this.findSourceByColumnName(e);return t?t.filters:[]}get orders(){return this._json.orders.map((e=>new l.Z(e)))}hasOrders(){return this.orders.length>0}findOrder(e){return this.orders.find((t=>t.columnName===e))}getOrderIndex(e){return this._json.orders.findIndex((t=>t.name===e))}isOrderOnDimension(e){return this.hasOrders()&&this.groupColumnNames.includes(e)}isSortWithinGroups(e){if(0===e.length||this.groupColumnNames.length<2||!this.hasOrders())return!1;let t=!0;return e.forEach(((e,r)=>{r<=this._json.orders.length-1?this._json.orders[r].name!==e&&(t=!1):t=!1})),t}isMeasureSortWithinGroups(){if(this.orders.length<2)return!1;const e=(0,i.last)(this.orders)?.columnName;return this.getAllColumnNames().includes(e)}get limit(){return this._json.limit}get offset(){return this._json.offset}get rowTotals(){return this._json.rowTotals}get columnTotals(){return this._json.columnTotals}get columnGroups(){return this._json.columnGroups}hasColumnGroups(){return!(0,i.isEmpty)(this._json.columnGroups)}hasRowTotals(){return this.hasColumnGroups()&&1===this.rowTotals.length&&this.rowTotals[0]===this.columnGroups[0]}hasColumnTotals(){return this.columnTotals.length>0&&this.columnTotals[0]===this.groupColumnNames[0]}hasColumnOrRowRelatedTotals(){return this.hasRowTotals()||this.hasColumnTotals()||this.hasColumnSubtotals()}hasGrandTotals(){return this.hasColumnGroups()?this.hasRowTotals()&&this.hasColumnTotals():!this.isGrouped||this.isGroupedByAll?(0,i.isEqual)(this.columnTotals,[p]):this.hasColumnTotals()}hasColumnSubtotals(){if((0,i.isEmpty)(this.columnTotals)||(0,i.isEqual)(this.columnTotals,[p]))return!1;const e=this.hasColumnTotals()?this.columnTotals.slice(1):this.columnTotals;return!(0,i.isEmpty)(e)}get json(){return(0,s.deepCopy)(this._json)}getSupportedNumberOfSourceFilters(){return this.getDataSourceNames().length}getSourceNameByIndex(e){return this.getDataSourceNames()[e]}_iterateUniqueSources(e){const t=[];let r;for(const i of this._json.sources)i.name&&i.name!==r&&(r=i.name,t.push(e(i)));return t}_checkIsMutable(){if(!this._isMutable)throw new Error("CompactFormQuery instance is not mutable")}getMutableSources(){return this._checkIsMutable(),this._json.sources.map((e=>new d.Z(e)))}getMutableSourcesByDataSourceName(e){this._checkIsMutable();const t=[];return this._json.sources.forEach((r=>{r.name===e&&t.push(new d.Z(r))})),t}getMutableSourceByColumnName(e){this._checkIsMutable();const t=this._json.sources.findIndex((t=>t.columns.some((t=>t.name===e))));return this.getMutableSource(t)}getMutableSource(e){return this._checkIsMutable(),new d.Z(this._json.sources[e])}addSource(e,t){this._checkIsMutable(),this._json.sources.splice(null!=t?t:this._json.sources.length,0,e)}updateSource(e,t){this._json.sources[t]=e}removeSource(e){this._checkIsMutable(),this._json.sources.splice(e,1)}getNonDerivedMutableSources(){return this._checkIsMutable(),this._json.sources.reduce(((e,t)=>(t.name&&e.push(new d.Z(t)),e)),[])}getMutableSourceFilter(e){if(this._checkIsMutable(),this._json.sourceFilters[e])return new c(this._json.sourceFilters[e])}setSourceFilters(e){this._checkIsMutable(),this._json.sourceFilters=e}addSourceFilter(e,t,r){this._checkIsMutable(),this._json.sourceFilters[e]||(this._json.sourceFilters[e]={filters:[]}),new c(this._json.sourceFilters[e]).addFilter(t,r)}updateSourceFilter(e,t,r){this._checkIsMutable(),new c(this._json.sourceFilters[e]).updateFilter(t,r)}removeSourceFilter(e,t){this._checkIsMutable(),new c(this._json.sourceFilters[e]).removeFilter(t),(0,i.isEmpty)(this._json.sourceFilters[e].filters)&&delete this._json.sourceFilters[e]}updateBooleanFilterLogic(e,t){this._checkIsMutable(),new c(this._json.sourceFilters[e]).updateBooleanFilterLogic(t)}addAggregateFilter(e,t){this._checkIsMutable(),this._json.aggregateFilters.splice(null!=t?t:this._json.aggregateFilters.length,0,e)}removeAggregateFilter(e){this._checkIsMutable(),this._json.aggregateFilters.splice(e,1)}updateAggregateFilter(e,t){this._checkIsMutable(),this._json.aggregateFilters[t]=e}getMutableOrder(e){return this._checkIsMutable(),new h.Z(this._json.orders[e])}setOrders(e){this._checkIsMutable(),this._json.orders.splice(0,this._json.orders.length,...e)}addOrder(e,t){this._checkIsMutable(),this._json.orders.splice(null!=t?t:this._json.orders.length,0,e)}updateOrder(e,t){this._checkIsMutable(),this._json.orders[t]=e}deleteOrder(e){this._checkIsMutable();const t=this._json.orders.findIndex((t=>t.name===e.name));t>-1&&this._json.orders.splice(t,1)}deleteLimit(){this._checkIsMutable(),delete this._json.limit}updateOrderColumnName(e,t){this._checkIsMutable();const r=this._json.orders.find((t=>t.name===e));r&&(r.name=t)}sortOrders(){this._checkIsMutable();const e=new n.Z(this._json.sources[0]).groupColumnNames;this._json.orders.sort(((t,r)=>{const i=t.name,s=r.name;if(e[i]||e[s]){if(e[i]&&!e[s])return-1;if(!e[i]&&e[s])return 1;{const t=Object.keys(e);return t.findIndex((e=>e===i))-t.findIndex((e=>e===s))}}return 0}))}setLimit(e){this._checkIsMutable(),this._json.limit=e}setRowTotals(e){this._checkIsMutable(),this._json.rowTotals=e}setColumnTotals(e){this._checkIsMutable(),this._json.columnTotals=e}setColumnGroups(e){this._checkIsMutable(),this._json.columnGroups=e}}},28564:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(90554),s=r(35450),n=r(94160),o=r(17537);class a{constructor(e){this.length=e.length,this.seasonality=e.seasonality,this.model=e.model,this.ignoreLast=e.ignoreLast}get json(){const e={length:this.length};return this.seasonality&&(e.seasonality=this.seasonality),this.model&&(e.model=this.model),this.ignoreLast&&(e.ignoreLast=this.ignoreLast),{...e}}}var l=r(16146);class u{constructor(e){this._json=e}get name(){return this._json.name}get columns(){return this._json.columns.map((e=>new n.Z(e)))}getGroup(e){return new s.Z(this._json.groups[e])}get groups(){return this._json.groups.map((e=>new s.Z(e)))}get groupNames(){return this.groups.map((e=>e.columnName))}get filters(){return this._json.filters.map((e=>new o.Z(e)))}getFilter(e){return new o.Z(this._json.filters[e])}get filtersCount(){return this._json.filters.length}get timeSeries(){return this._json.timeSeries&&new a(this._json.timeSeries)}get cogroupType(){const e=this._json.cogroupType;return e&&l.Z.fromCode(e)}get json(){return(0,i.deepCopy)(this._json)}findGroupByColumnName(e){return this.groups.find((t=>t.columnName===e))}findGroupIndex(e){return this.groups.findIndex((t=>t.columnName===e))}get joins(){return[]}get isJoined(){return!1}get isDerived(){return null==this.name}get isGrouped(){return this._json.groups.length>0}get isGroupedByAll(){return 1===this._json.groups.length&&new s.Z(this._json.groups[0]).isGroupedByAll}get groupColumnNames(){return this.groups.reduce(((e,t)=>(e[t.columnName]=t,e)),{})}get columnCount(){return this._json.columns.length}getColumn(e){return new n.Z(this._json.columns[e])}findColumn(e){const t=this._json.columns.find((t=>t.name===e));return t&&new n.Z(t)}findColumnIndex(e){return this._json.columns.findIndex((t=>t.name===e))}isFormulaColumn(e){const t=this.findColumn(e);return!(!t||!t.formula)}isColumnUsedInFormula(e,t){return this.columns.some((r=>r.isColumnUsedInFormula(e,t)))}getDataSourceNameByFieldJson(e){return this.name}hasReferenceToSource(e,t){return!1}}},26548:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(17537);class s{constructor(e){this._json=e}get filters(){return this._json.filters.map((e=>new i.Z(e)))}get booleanFilterLogic(){return this._json.booleanFilterLogic}}},70706:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(8429);class n extends i.Z{#Jt;constructor(e){super(),this.#Jt=e}get label(){return s.Z.getLabel("JoinType",`${this.code}Join`)}getQueryFragment(){return this.#Jt}}n.add("LEFT","left",new n("LEFT OUTER JOIN")).add("RIGHT","right",new n("RIGHT OUTER JOIN")).add("INNER","inner",new n("INNER JOIN")).add("OUTER","outer",new n("FULL OUTER JOIN")).finish()},59958:(e,t,r)=>{"use strict";r.d(t,{V$:()=>h,Zs:()=>p,Hx:()=>g,ZP:()=>m});var i=r(96486),s=r(80600),n=r(90554),o=r(70706);class a{constructor(e){this._json=e}get name(){return this._json.name}get alias(){return this._json.alias}get fields(){return this._json.fields}get json(){return(0,n.deepCopy)(this._json)}}class l{constructor(e){this._json=e}get source(){return new a(this._json.source)}get target(){return new a(this._json.target)}get type(){const e=this._json.type;return e&&o.Z.fromCode(e)}get json(){return(0,n.deepCopy)(this._json)}}var u=r(28564);class d extends u.Z{get joins(){return this._json.joins.map((e=>new l(e)))}get isJoined(){return!0}get isDerived(){return super.isDerived&&0===this._json.joins.length}hasReferenceToSource(e,t){return this.#Xt(e,t)||this.#er(e)||this.#tr(e)}#rr(e){const t=e.indexOf(".");return t>-1?e.substring(0,t):void 0}#Xt(e,t){return this.columns.some((r=>this.#ir(r,e)||null!=t&&this.#sr(r,e,t)))}#er(e){return this.groups.some((t=>this.#rr(t.fieldName)===e))}#tr(e){return this.filters.some((t=>this.#rr(t.fieldName)===e))}#ir(e,t){const r=e.field?.fieldName;return null!=r&&this.#rr(r)===t}#sr(e,t,r){if(null==e.formula)return!1;return r.parse(e.formula).getInputs().some((e=>this.#rr(e)===t))}getDataSourceNameByFieldJson(e){if(!this.isJoined||!e)return this.name;if(!Array.isArray(e))return this.#rr(e);{const t=e[1];if(Array.isArray(t))return this.#rr(t[1]);if("*"!==t)return this.#rr(t)}}}var c=r(71178);const h="_all_";function p(e,t){let r,i,s,n=e;return Array.isArray(e)?([r,s]=e,Array.isArray(s)&&t?([i,s]=s,n=[r,[i,`${t}.${s}`]]):"*"!==s&&t&&(n=[r,`${t}.${s}`])):t&&(n=`${t}.${e}`),n}function g(e){const t=e=>e.substring(e.indexOf(".")+1);let r,i,s;return Array.isArray(e)?([r,s]=e,Array.isArray(s)?([i,s]=s,[r,[i,t(s)]]):[r,t(s)]):t(e)}class m extends s.Z{get sources(){return this._json.sources.map((e=>new d(e)))}getSource(e){return new d(this._json.sources[e])}getSourceName(e){}getSourceFilterKey(e){return h}getSourceByDataSourceName(e){if(this.hasDataSource(e))return this.getSource(0)}canAddColumnFilterFromAnyDataSource(){return!0}getAllSourceIndexesByDataSourceName(e){if(!this.hasDataSource(e))return[];const t=[];return this._json.sources.forEach(((e,r)=>{t.push(r)})),t}findSourceByColumnName(e){for(const t of this._json.sources)if(t.columns.some((t=>t.name===e)))return new d(t)}getDataSourceNameByColumnName(e){const t=this.findSourceByColumnName(e);if(t){const r=t.findColumn(e);if(r?.field)return t.getDataSourceNameByFieldJson(r.field.json)}}getDataSourceNameByFieldJson(e){return this.getSource(0).getDataSourceNameByFieldJson(e)}getSourceLastIndex(e){return(0,i.findLastIndex)(this._json.sources,(e=>!new d(e).isDerived))}getSourceCountByName(e){return this._json.sources.filter((e=>!new d(e).isDerived)).length}getDataSourceNames(){const e=new Set;return this.joins.forEach((t=>{e.add(t.source.name),e.add(t.target.name)})),Array.from(e)}getUniqueSources(){return[new d(this._json.sources[0])]}getNextUniqueSource(e){}getSourceIndexAndSource(e){return new Map([[0,this.getSource(0)]])}get derivedSource(){const e=this._json.sources,t=e[e.length-1];return(0,i.isEmpty)(t.joins)?new d(t):void 0}get nonDerivedSources(){return this.sources.filter((e=>e.joins.length>0))}get isJoined(){return!0}get joins(){return this.getSource(0).joins}hasDataSource(e){for(let t=0;t<this.joins.length;++t){const r=this.joins[t],i=r.target;if(0===t&&e===r.source.name)return!0;if(i.name===e)return!0}return!1}canRemoveDataSource(e,t){if(e===this.joins[0].source.name)return!1;if(!this.#nr(e,t))return!1;return this.getDependentDataSources(e).every((e=>this.#nr(e,t)))}getDependentDataSources(e){const t=new Set;return this.joins.forEach((r=>{const i=r.target;(r.source.name===e||t.has(r.source.name))&&t.add(i.alias??i.name)})),Array.from(t)}getReferencesToDataSource(e){const t=[];return this.joins.forEach(((r,i)=>{const s=r.target;0===i&&e===r.source.name&&t.push(r.source.name),e===s.name&&t.push(s.alias??s.name)})),t}getDataSourceNameBySourceAlias(e){for(const t of this.joins){if(t.source.alias===e)return t.source.name;if(t.target.alias===e)return t.target.name}return e}getDataSourceAliasBySourceName(e){for(let t=0;t<this.joins.length;++t){const r=this.joins[t],i=r.target;if(0===t&&e===r.source.name)return r.source.name;if(e===i.name)return i.alias??i.name}return e}hasSingleDataSourceAfterRemovingDataSources(e){const t=[];return this.joins.forEach((r=>{const i=r.target;e.includes(i.alias??i.name)||t.push(r)})),(0,i.isEmpty)(t)}getColumnNamesByDataSourceName(e){const t=[];return this.sources.forEach((r=>{r.columns.forEach((i=>{r.getDataSourceNameByFieldJson(i.field?.json)===e&&t.push(i.name)}))})),t}getGroups(e){return[this.getSource(0).groups[e]]}getSourceFilterKeyBySourceIndex(e){return this.getSourceFilterKey()}getSourceFilterKeysBySourceIndex(e){return[h]}canRemoveJoin(e,t){const r=e.target.alias??e.target.name;if(!this.#nr(r,t))return!1;return this.getDependentDataSources(r).every((e=>this.#nr(e,t)))}#rr(e){const t=e.indexOf(".");return t>-1?e.substring(0,t):void 0}#or(e){return Array.from(this.sourceFilters.values()).some((t=>t.filters.some((t=>this.#rr(t.fieldName)===e))))}#nr(e,t){return!this.#or(e)&&!this.sources.some((r=>r.hasReferenceToSource(e,t)))}getSupportedNumberOfSourceFilters(){return 1}getSourceNameByIndex(e){}getMutableSourcesByDataSourceName(e){return this._checkIsMutable(),this.hasDataSource(e)?this.getNonDerivedMutableSources():[]}getMutableSource(e){return this._checkIsMutable(),new c.Z(this._json.sources[e])}getNonDerivedMutableSources(){return this._checkIsMutable(),this._json.sources.reduce(((e,t)=>(t.joins.length>0&&e.push(new c.Z(t)),e)),[])}}},15809:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69130);class s extends i.Z{setColumnName(e){this._json.name=e}setAscending(e){this._json.ascending=e}setFilters(e){this._json.filters=e}removeFilters(){this._json.filters=[]}setNulls(e){this._json.nulls=e}removeNulls(){delete this._json.nulls}}},71178:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(5726),s=r(80600),n=r(28564);class o extends n.Z{setName(e){this._json.name=e}removeName(){delete this._json.name}addColumn(e,t){this._json.columns.splice(t,0,e)}removeColumn(e){this._json.columns.splice(e,1)}updateColumn(e,t){this._json.columns[t]=e}setColumns(e){this._json.columns=e}addGroup(e,t){const r=new n.Z(this._json);if(1===this._json.groups.length){const e=r.getGroup(0);e&&e.isGroupedByAll&&this._json.groups.pop()}null!=t?this._json.groups.splice(t,0,e):this._json.groups.push(e)}updateGroup(e,t){this._json.groups[t]=e}setGroups(e){this._json.groups=e}moveGroup(e,t){i.Z.move(this._json.groups,e,t)}deleteGroup(e){this._json.groups.splice(e,1),this._json.groups.length||this._json.groups.push(s.U)}addFilter(e){this._json.filters.push(e)}removeFilter(e){this._json.filters.splice(e,1)}setFilters(e){this._json.filters=e}updateFilter(e,t){this._json.filters[t]=e}setCogroupType(e){e?this._json.cogroupType=e.getCode():delete this._json.cogroupType}setJoins(e){this._json.joins=e}}},37e3:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DashboardWidgetStyleProperties:()=>i});const i=["backgroundColor","borderEdges","borderColor","borderWidth","borderRadius"]},64271:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(8429);class n extends i.Z{static getDefaultValue(){return n.SELECT}constructor(e){super(),this._includeState=e}getCode(){return this.code}getLabel(){return s.Z.getLabel("InteractionEventType",this.code)}canIncludeState(){return this._includeState}}n.add("SELECT","select",new n(!0)).add("CLICK","click",new n(!0)).finish()},5712:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(40651);class n extends i.Z{static getDefaultValue(){return n.LENS}constructor(e){super(),this._includeState=e}getCode(){return this.code}getAssetType(){return s.Z.fromCode(this.getCode())}canIncludeState(){return this._includeState}}n.add("LENS","lens",new n(!0)).add("DASHBOARD","dashboard",new n(!0)).add("EXPLORE","explore",new n(!0)).add("URL","url",new n(!1)).add("COMPONENT","component",new n(!1)).add("PAGE","page",new n(!1)).add("MASS_ACTION","massaction",new n(!1)).finish()},67399:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(96486),s=r(57446),n=r(83993),o=r(90554),a=r(52570),l=r(69370);class u extends l.Z{}u.add("FACET","faceting",new u).add("GLOBAL","global",new u).finish();var d=r(1209);class c{constructor(e){this._json=this._applyDefaults(this._ensureCurrentStateFormat((0,o.deepCopy)(e)))}describe({includeSteps:e=!1,includeGlobalFilterSettings:t=!1,includeFacetingFilters:r=!1}={}){const s=this._describe(this._json,e,t,r);return(0,i.isEmpty)(this._json.components)||(s.components=Object.keys(this._json.components).reduce(((i,s)=>{const n=this._json.components&&this._json.components[s];return n&&(i[s]={state:this._describe(n.state,e,t,r),pageId:n.pageId}),i}),{})),s}_describe(e,t,r,s){return{...(0,i.fromPairs)(this._getDataSourceTypes().map((t=>{const n=t.getStateKey(),o={};return Object.keys(e[n]).forEach((t=>{const a=e[n][t],l=s?a:a.filter((e=>u.fromCode(e.type)!==u.FACET));if(l.length>0){const e=(0,i.sortBy)(l,(e=>e.fields.toString()));o[t]=r?e:e.map((e=>(0,i.omit)(e,["locked","hidden"])))}})),[n,o]}))),steps:t?e.steps:{}}}getDashboardFilters(e){const t=[];return this._getDataSourceTypes().forEach((r=>{const i=r.getStateKey();Object.keys(this._json[i]).forEach((r=>{const{devName:s,namespace:o}=(0,n.z6)(r);this._json[i][r].forEach((n=>{if(n.filter){const l={fields:n.fields,operator:n.filter.operator,value:n.filter.values,locked:n.locked,hidden:n.hidden,dataset:void 0,sobject:void 0,cdpObject:void 0,reportObject:void 0,sequenceNumber:void 0};i===d.Z.DATASET.getStateKey()?l.dataset={name:s,namespace:o}:i===d.Z.CDP.getStateKey()?l.cdpObject=r:i===d.Z.SOBJECT.getStateKey()?l.sobject=r:i===d.Z.REPORT.getStateKey()&&(l.reportObject=r,l.sequenceNumber=n.sequenceNumber),t.push(new a(l,e))}}))}))})),t}getDataSourceFilters(e){const t=e.getStateKey(),r=new s.Z;return Object.keys(this._json[t]).forEach((e=>{r.set(e,this._json[t][e])})),r}getDataSourceSelections(){const e=new s.Z;return this._getDataSourceTypes().forEach((t=>{const r=t.getStateKey();Object.keys(this._json[r]).forEach((i=>{const n=[];for(const e of this._json[r][i])e.selection&&n.push({fields:e.fields,values:e.selection});n.length&&e.getOrSet(t,(()=>new s.Z)).set(i,n)}))})),e}getStepSelections(){return this._json.steps}isEqual(e){const t=this.describe({includeSteps:!0,includeGlobalFilterSettings:!0,includeFacetingFilters:!0}),r=e.describe({includeSteps:!0,includeGlobalFilterSettings:!0,includeFacetingFilters:!0}),s=this._filterOutEmptyDataSourceFiltersAndSteps(t),n=this._filterOutEmptyDataSourceFiltersAndSteps(r);return(0,i.isEqual)(s,n)}_filterOutEmptyDataSourceFiltersAndSteps(e){const t=this._filterOutEmptyFilters(e.datasets),r=this._filterOutStepsWithEmptyValues(e.steps);if((0,i.isEmpty)(e.components))return{...e,datasets:t,steps:r};const s=Object.keys(e.components).reduce(((t,r)=>{const i=e.components?.[r]??{},s=this._filterOutEmptyFilters(i.state?.datasets),n=this._filterOutStepsWithEmptyValues(i.state?.steps);return t[r]={...i,state:{...i.state,datasets:s,steps:n}},t}),{});return{...e,datasets:t,steps:r,components:s}}_filterOutEmptyFilters(e){const t={};for(const r of Object.keys(e)){const s=e[r].filter((e=>u.fromCode(e.type)!==u.FACET||!(0,i.isEmpty)(e.selection)));(0,i.isEmpty)(s)||(t[r]=s)}return t}_filterOutStepsWithEmptyValues(e){const t={};for(const r of Object.keys(e))(0,i.isEmpty)(e[r].values)||(t[r]={...e[r]});return t}hasDataSourceFilters(){return this._getDataSourceTypes().some((e=>!(0,i.isEmpty)(this._json[e.getStateKey()])))}isEmpty(){return(0,i.isEmpty)(this._json.steps)&&!this.hasDataSourceFilters()}getComponentState(e){return new c(this._json.components?.[e]?.state)}getComponentPageName(e){return this._json.components?.[e]?.pageId}getStateJson(){return this._json}_ensureCurrentStateFormat(e){const t=this._getDataSourceTypes(),r={...(0,i.fromPairs)(t.map((e=>[e.getStateKey(),{}]))),steps:{}},s={...r,components:{}};if(!(0,i.isEmpty)(e)&&e.components)for(const t of Object.keys(e.components)){const i=(0,o.deepCopy)(r);e.components[t].state=Object.assign(i,e.components[t]?.state)}if((0,i.isEmpty)(e)||t.some((t=>e[t.getStateKey()]))||e.steps||e.components)return Object.assign(s,e);for(const t of Object.keys(e)){s.datasets[t]=[];for(const r of Object.keys(e[t])){const i=e[t][r];s.datasets[t].push({fields:[r],selection:Array.isArray(i)?i:i.value})}}return s}_applyDefaults(e){return this._getDataSourceTypes().forEach((t=>{const r=t.getStateKey();Object.keys(e[r]).forEach((t=>{e[r][t].forEach((e=>{if(null==e.type){const t=null!=e.filter?u.GLOBAL:u.FACET;e.type=t.code}u.fromCode(e.type)===u.GLOBAL&&(null==e.locked&&(e.locked=!1),null==e.hidden&&(e.hidden=!1))}))}))})),e}_getDataSourceTypes(){return d.Z.enums().filter((e=>e.doesSupportFaceting()))}}},13134:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this._filterColumns=e,this._filterValues=t}isEmpty(){return!this._filterValues.length}getFilterColumns(){return this._filterColumns}getFilterValues(){return this._filterValues}describe(){return{values:this._filterValues,metadata:{groups:this._filterColumns.map((e=>e.getName()))}}}}},97108:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("DEFAULT","default",new s).add("TRENDED","trended",new s).add("LIVE","live",new s).add("STAGED","stagedData",new s).finish()},3661:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var i=r(96486),s=r(37129),n=r(8429),o=r(13728),a=r(40651),l=r(92425),u=r(94716),d=r(32024),c=r(45956),h=r(56828),p=r(66596),g=r(21209),m=r(78190),_=r(90876);class f{getAssetType(){return a.Z.CDP_OBJECT}getAssetIconCode(e){return g.Z.fromObjectName(e).sldsIconCode}getDataSourceTypeName(e=!1){return n.Z.getLabel("Explorer2",e?"cdpObject":"cdpObjects")}canEditFieldsMetadata(){return!1}supportsDerivedFields(){return!1}getDefaultValuesQueryLimit(){return 100}getDefaultGroupQueryLimit(){return 250}getWarningQueryLimit(){return 400}getMaxQueryLimit(){return 49999}getSqlType(){return l.Z.CDP}getQueryLoggingIdentifier(){return"live-cdp-query"}getMinMaxDateRangeQueryResult(e,t,r,s){const n=r.getDateFieldByGrain(e,"epoch_second"),o=m.buildMinMaxQuery({field:n??r.getDateFieldByGrain(e,"year"),assetMetadata:t,sourceFilterMap:s});return this.executeQuery(o,[t],[r]).then((e=>{const t=e.getData()?e.getData()[0]:void 0;if((0,i.isEmpty)(t))return null;if(n)return[1e3*t[m.MIN_ALIAS],1e3*t[m.MAX_ALIAS]];{const e=new Date(0);e.setUTCFullYear(parseInt(t[m.MIN_ALIAS]));const r=new Date(0);return r.setUTCFullYear(parseInt(t[m.MAX_ALIAS])+1),[e.getTime(),r.getTime()]}}))}async executeQuery(e,t,r){return this._executeQuery(u.Z.make(e,this.getAssetType(),t,r).build(),t[0].getDataspace())}getRowCountResult(e,t){return new s.Z(e.provide(this.getAssetType(),[t]).then((([e,t])=>this._executeQuery(u.Z.make(m.buildDefaultQuery(e[0].getFullyQualifiedName(),1),this.getAssetType(),e,t).build(),e[0].getDataspace()))))}getRecordDisambiguationQueryResult(e,t,{fieldName:r,fieldValue:s,requiredDimensions:n,displayDimensions:o,queryFilters:a=[]}){const l=e.getFullyQualifiedName(),u=(0,i.union)(n,o);return this.executeQuery(m.makeQueryJson({sources:[m.makeSourceJson(l,[],u)],sourceFilters:{[l]:{filters:[[r,[s],d.Z.IN.code],...a]}},orders:[{name:o[0],ascending:!0,filters:[]}],limit:49999}),[e],[t])}supportsFiscal(){return!1}ignoreDateVersion(){return!0}getDateRangePresetCategories(){return c.Z.getCategories(!1)}getSupportedCalendarDateTimeGrains(){return[o.Z.YEAR,o.Z.QUARTER,o.Z.MONTH,o.Z.WEEK,o.Z.DAY]}getSupportedFiscalDateTimeGrains(){throw new Error("Not implemented.")}getTotalRowsMissingMessage(e=""){return n.Z.getLabel("CDPDataSource","totalsNotDisplayedMessage",e)}async _executeQuery(e,t){const r=await h.Z.executeQuery({sql:e},{dataspace:t});return new p.Z(r)}updateResultOnResultMetadata(e,t){return new p.Z({data:(0,_.C)(e?.getData(),t),metadata:e?.getMetadata()})}}},31835:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i=r(40651),s=r(10655),n=r(42652),o=r(90831),a=r(37129);class l{getAssetType(){return i.Z.APEX_REST}getAssetIconCode(e){return""}getDataSourceTypeName(){throw new Error("Not implemented.")}canEditFieldsMetadata(){return!1}supportsDerivedFields(){return!1}getDefaultValuesQueryLimit(){throw new Error("Not implemented.")}getDefaultGroupQueryLimit(){throw new Error("Not implemented.")}getWarningQueryLimit(){throw new Error("Not implemented.")}getMaxQueryLimit(){throw new Error("Not implemented.")}getSqlType(){throw new Error("Not implemented.")}getQueryLoggingIdentifier(){throw new Error("Not implemented.")}getMinMaxDateRangeQueryResult(e,t,r,i){throw new Error("Not implemented.")}async executeQuery(e,t,r,{totals:i=!1,subtotals:s=!1,signal:n}){throw new Error("Not implemented.")}getRowCountResult(e,t){return new a.Z(Promise.reject(new Error("Not implemented.")))}async getRecordDisambiguationQueryResult(e,t,r){throw new Error("Not implemented.")}supportsFiscal(){return!1}ignoreDateVersion(){return!0}getDateRangePresetCategories(){throw new Error("Not implemented.")}getSupportedCalendarDateTimeGrains(){throw new Error("Not implemented.")}getSupportedFiscalDateTimeGrains(){throw new Error("Not implemented.")}getTotalRowsMissingMessage(){throw new Error("Not implemented.")}updateResultOnResultMetadata(e,t){return e}}class u{getAssetType(){return i.Z.REPORT_TYPE}getAssetIconCode(e){return""}getDataSourceTypeName(){throw new Error("Not implemented.")}canEditFieldsMetadata(){return!1}supportsDerivedFields(){return!1}getDefaultValuesQueryLimit(){throw new Error("Not implemented.")}getDefaultGroupQueryLimit(){throw new Error("Not implemented.")}getWarningQueryLimit(){throw new Error("Not implemented.")}getMaxQueryLimit(){throw new Error("Not implemented.")}getSqlType(){throw new Error("Not implemented.")}getQueryLoggingIdentifier(){throw new Error("Not implemented.")}getMinMaxDateRangeQueryResult(e,t,r,i){throw new Error("Not implemented.")}async executeQuery(e,t,r,{totals:i=!1,subtotals:s=!1,signal:n}){throw new Error("Not implemented.")}getRowCountResult(e,t){return new a.Z(Promise.reject(new Error("Not implemented.")))}async getRecordDisambiguationQueryResult(e,t,r){throw new Error("Not implemented.")}supportsFiscal(){return!1}ignoreDateVersion(){return!0}getDateRangePresetCategories(){throw new Error("Not implemented.")}getSupportedCalendarDateTimeGrains(){throw new Error("Not implemented.")}getSupportedFiscalDateTimeGrains(){throw new Error("Not implemented.")}getTotalRowsMissingMessage(){return""}updateResultOnResultMetadata(e,t){return e}}var d=r(3661),c=r(97108);class h{static getDelegateFromAssetMetadata(e){return e.getType()===i.Z.DATASET?e.getDatasetType()===c.Z.LIVE?new o.Z(e.getLiveConnection()?.connectionName,e.getLiveConnection()?.connectionType):new s.Z:e.getType()===i.Z.SOBJECT?new n.Z:e.getType()===i.Z.CDP_OBJECT?new d.Z:e.getType()===i.Z.REPORT_TYPE?new u:new l}}},90876:(e,t,r)=>{"use strict";r.d(t,{C:()=>a});var i=r(1611),s=r(4490),n=r(54624),o=r(6597);function a(e,t){if(null==t||null==e||0===e.length)return e;if((t.hasSummaryTotals()||t.hasColumnTotals())&&t.getSummaryColumnsMap().size>0){const r=t.getGroupingColumnNames()[0].split(o.RY);if(e.length>0){if(r.every((t=>1===e[0][`${n.Y}${t}`]))){const t=e.findIndex((e=>r.every((t=>0===e[`${n.Y}${t}`]))));e.push(...e.splice(0,t))}}}if(0===t.getGroupings().length&&t.hasSummaryTotals()){const r=new Set(t.getColumnNames(i.Z.MEASURE).map((e=>`${e}${s.Z}`))),n={};e.forEach((e=>{for(const t in e)r.has(t)&&(n[t]=e[t],delete e[t])})),Object.keys(n).length>0&&e.push(n)}return e}},10655:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var i=r(96486),s=r(37129),n=r(61506),o=r(18111),a=r(8429),l=r(13728),u=r(45956),d=r(40651),c=r(40643),h=r(52703),p=r(45080),g=r(94716),m=r(28357),_=r(61818),f=r(17421),y=r(17537),b=r(66553),C=r(14201),E=r(98818),S=r(85829);class T extends m.Z{constructor(e,t,{fieldName:r,fieldValue:i,requiredDimensions:s,displayDimensions:n,queryFilters:o=[],isFilterV2:a=!0,booleanLogic:l=""}){super([e],t),this._fieldName=r,this._fieldValue=i,this._requiredDimensions=s,this._displayDimensions=n,this._queryFilters=o,this._isFilterV2=a,this._booleanLogic=l}build(){const[e]=_.unwrapDimOrMea(this._fieldName),t=[...this._queryFilters],r=new f.Z(new y.Z([this._fieldName,[this._fieldValue],"in"]),this._extendedMetadata).build();let s;if(s=this._isFilterV2?t.map((e=>new f.Z(new y.Z(e),this._extendedMetadata).build())):new b.Z(this._extendedMetadata).build(t).map((e=>e[1])),this._booleanLogic){s=s.map((e=>[void 0,e]));const e=new C.ZP(null,!1);if(e.validate(this._booleanLogic,s.length),e.error)throw new Error(e.error);s=new E.Z(new S.Z(s)).traverse(e.getTree())}else s=s.join(" && ");s=s?[r,s].join(" && "):r;const a=_.getAlias(this._displayDimensions[0]),l=(0,i.union)(this._requiredDimensions,this._displayDimensions),u=[...this._buildValuesProjection((0,i.difference)(l,this._requiredDimensions),!0),...this._buildValuesProjection(this._requiredDimensions)].join(", "),d=this._buildGroupClause(this._requiredDimensions),c=n.Z.get(o).getExternalLinkQueryLimit();return`q = load "${this._emUrlForAlias(e)}";q = filter q by ${s};q = group q by ${d};q = foreach q generate ${u};q = order q by ${a};q = limit q ${c};`}_buildValuesProjection(e,t=!1){return e.slice().sort().map((e=>{const r=_.getProj(e),i=_.getAlias(e);return t?`first(${r}) as ${i}`:`${r} as ${i}`}))}}var I=r(92425),v=r(78190);class R{getAssetType(){return d.Z.DATASET}getAssetIconCode(e){return d.Z.DATASET.getSldsIconCode()}getDataSourceTypeName(e=!1){return a.Z.getLabel("Explorer2",e?"dataset":"datasets")}canEditFieldsMetadata(){return!0}supportsDerivedFields(){return!0}getDefaultValuesQueryLimit(){return n.Z.get(o).getDatasetDefaultValuesQueryLimit()}getDefaultGroupQueryLimit(){return n.Z.get(o).getDatasetDefaultGroupQueryLimit()}getWarningQueryLimit(){return 2e3}getMaxQueryLimit(){return n.Z.get(o).getDatasetDefaultMaxQueryLimit()}getSqlType(){return I.Z.DATASET}getQueryLoggingIdentifier(){return c.K}getMinMaxDateRangeQueryResult(e,t,r,s){const a=r.getDateFieldByGrain(e,"epoch_second"),l=v.buildMinMaxQuery({field:a??r.getDateFieldByGrain(e,"year"),assetMetadata:t,sourceFilterMap:s}),u=r.getDateVersion()===p.Z.NEW?n.Z.get(o).getDefaultTimezone():void 0;return this.executeQuery(l,[t],[r],{timezone:u}).then((e=>{const t=e.getData()?e.getData()[0]:void 0;if((0,i.isEmpty)(t))return null;if(a)return[1e3*t[v.MIN_ALIAS],1e3*t[v.MAX_ALIAS]];{const e=new Date(0);e.setUTCFullYear(parseInt(t[v.MIN_ALIAS]));const r=new Date(0);return r.setUTCFullYear(parseInt(t[v.MAX_ALIAS])+1),[e.getTime(),r.getTime()]}}))}async executeQuery(e,t,r,{totals:i=!1,subtotals:s=!1,signal:o,timezone:a}){const l=g.Z.make(e,this.getAssetType(),t,r).setTotals(i).setSubtotals(s).build();return n.Z.get(c.Z).executeSaql(l,{signal:o,timezone:a,datasetMetadatas:t})}getRowCountResult(e,t){const r={measures:[["count","*"]]};return new s.Z(e.provide(this.getAssetType(),[t]).then((([e,t])=>{let i;return t[0].getDateVersion()===p.Z.NEW&&(i=n.Z.get(o).getDefaultTimezone()),n.Z.get(c.Z).executeSaql(new h.Z(r,e,t[0]).build(),{timezone:i,datasetMetadatas:e})})))}getRecordDisambiguationQueryResult(e,t,r){let i;return t.getDateVersion()===p.Z.NEW&&(i=n.Z.get(o).getDefaultTimezone()),n.Z.get(c.Z).executeSaql(new T(e,t,r).build(),{timezone:i,datasetMetadatas:[e]})}supportsFiscal(){return!0}ignoreDateVersion(){return!1}getDateRangePresetCategories(){return u.Z.getCategories()}getSupportedCalendarDateTimeGrains(){return[l.Z.YEAR,l.Z.QUARTER,l.Z.MONTH,l.Z.WEEK,l.Z.DAY]}getSupportedFiscalDateTimeGrains(){return[l.Z.YEAR,l.Z.QUARTER,l.Z.MONTH,l.Z.WEEK]}getTotalRowsMissingMessage(e){return a.Z.getLabel("DatasetDataSource","totalsNotDisplayedMessage")}updateResultOnResultMetadata(e,t){return e}}},37522:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(92425);class n extends i.Z{constructor(e){super(),this.sqlType=e}}n.add("BIGQUERY","GoogleBigQueryDirect",new n(s.Z.BIGQUERY)).add("SNOWFLAKE","SnowflakeDirect",new n(s.Z.SNOWFLAKE)).add("CDP","CdpDirect",new n(s.Z.CDP)).finish()},90831:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var i=r(96486),s=r(37129),n=r(61506),o=r(18111),a=r(8429),l=r(13728),u=r(45956),d=r(40651),c=r(94716),h=r(70609),p=r(28894),g=r(32024),m=r(78190),_=r(90876),f=r(37522);class y{#ar;#lr;constructor(e,t){this.#ar=e,this.#lr=t?f.Z.fromCode(t):f.Z.SNOWFLAKE}getAssetType(){return d.Z.DATASET}getAssetIconCode(e){return d.Z.DATASET.getSldsIconCode()}getDataSourceTypeName(e=!1){return a.Z.getLabel("Explorer2",e?"liveDataset":"liveDatasets")}canEditFieldsMetadata(){return!1}supportsDerivedFields(){return!1}getDefaultValuesQueryLimit(){return 100}getDefaultGroupQueryLimit(){return 250}getWarningQueryLimit(){return 400}getMaxQueryLimit(){return n.Z.get(o).getDirectQueryLimit()}getSqlType(){return this.#lr.sqlType}getQueryLoggingIdentifier(){return this.#lr===f.Z.SNOWFLAKE?"live-snowflake-sql-query":`live-${this.#lr.code}-sql-query`}getMinMaxDateRangeQueryResult(e,t,r,s){const n=r.getDateFieldByGrain(e,"epoch_second"),o=m.buildMinMaxQuery({field:n??r.getDateFieldByGrain(e,"year"),assetMetadata:t,sourceFilterMap:s});return this.executeQuery(o,[t],[r]).then((e=>{const t=e.getData()?e.getData()[0]:void 0;if((0,i.isEmpty)(t))return null;if(n)return[1e3*t[m.MIN_ALIAS],1e3*t[m.MAX_ALIAS]];{const e=new Date(0);e.setUTCFullYear(parseInt(t[m.MIN_ALIAS]));const r=new Date(0);return r.setUTCFullYear(parseInt(t[m.MAX_ALIAS])+1),[e.getTime(),r.getTime()]}}))}async executeQuery(e,t,r){return this._executeQuery(c.Z.make(e,this.getAssetType(),t,r).build())}getRowCountResult(e,t){return new s.Z(e.provide(this.getAssetType(),[t]).then((([e,t])=>this._executeQuery(c.Z.make(m.buildDefaultQuery(e[0].getFullyQualifiedName(),1),this.getAssetType(),e,t).build()))))}getRecordDisambiguationQueryResult(e,t,{fieldName:r,fieldValue:s,requiredDimensions:n,displayDimensions:o}){const a=e.getFullyQualifiedName(),l=(0,i.union)(n,o);return this.executeQuery((0,m.makeQueryJson)({sources:[(0,m.makeSourceJson)(a,[],l)],sourceFilters:{[a]:{filters:[[r,[s],g.Z.IN.code]]}},orders:[{name:o[0],ascending:!0,filters:[]}],limit:this.getMaxQueryLimit()}),[e],[t])}supportsFiscal(){return!1}ignoreDateVersion(){return!0}getDateRangePresetCategories(){return u.Z.getCategories(!1)}getSupportedCalendarDateTimeGrains(){return[l.Z.YEAR,l.Z.QUARTER,l.Z.MONTH,l.Z.WEEK,l.Z.DAY]}getSupportedFiscalDateTimeGrains(){throw new Error("Not implemented.")}getTotalRowsMissingMessage(){return""}async _executeQuery(e){const t=await n.Z.get(h.Z).executeExternalDataConnectorQuery(this.#ar,{query:e});return new p.Z(t)}updateResultOnResultMetadata(e,t){return new p.Z({records:(0,_.C)(e?.getData(),t),metadata:e?.getMetadata()})}}},42652:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var i=r(96486),s=r(37129),n=r(8429),o=r(13728),a=r(19929),l=r(83993),u=r(45956),d=r(40651),c=r(72977),h=r(78190),p=r(94716),g=r(32024),m=r(92425);class _{getAssetType(){return d.Z.SOBJECT}getAssetIconCode(e){return a.Z.getDefaultSldsIconName((0,l.z6)(e).devName)}getDataSourceTypeName(e=!1){return n.Z.getLabel("Explorer2",e?"sobject":"sobjects")}canEditFieldsMetadata(){return!1}supportsDerivedFields(){return!1}getDefaultValuesQueryLimit(){return 100}getDefaultGroupQueryLimit(){return 250}getWarningQueryLimit(){return 400}getMaxQueryLimit(){return 500}getSqlType(){return m.Z.SOBJECT}getQueryLoggingIdentifier(){return"soql-query"}getMinMaxDateRangeQueryResult(e,t,r,s){const n=h.buildMinMaxQuery({field:e,assetMetadata:t,sourceFilterMap:s});return this.executeQuery(n,[t],[r]).then((e=>{const t=e.getData()?e.getData()[0]:void 0;if((0,i.isEmpty)(t))return null;const r=new Date(0);r.setUTCFullYear(parseInt(t[h.MIN_ALIAS]));const s=new Date(0);return s.setUTCFullYear(parseInt(t[h.MAX_ALIAS])+1),[r.getTime(),s.getTime()]}))}async executeQuery(e,t,r){const i=p.Z.make(e,this.getAssetType(),t,r).build(),s=await c.performQuery(i);return c.getColumnMapping(e,s.getData())}getRowCountResult(e,t){return new s.Z(e.provide(this.getAssetType(),[t]).then((([e,r])=>c.performQuery(p.Z.make(h.buildDefaultQuery(t,1),this.getAssetType(),e,r).build()))))}getRecordDisambiguationQueryResult(e,t,{fieldName:r,fieldValue:s,requiredDimensions:n,displayDimensions:o,queryFilters:a=[],isFilterV2:l=!0}){const u=e.getFullyQualifiedName(),d=(0,i.union)(n,o);return this.executeQuery(l?(0,h.makeQueryJson)({sources:[(0,h.makeSourceJson)(u,[],d)],sourceFilters:{[u]:{filters:[[r,[s],g.Z.IN.code],...a]}},orders:[{name:o[0],ascending:!0,filters:[]}],limit:500}):{filters:[[r,[s],g.Z.IN.code],...a],values:d},[e],[t])}supportsFiscal(){return!0}ignoreDateVersion(){return!0}getDateRangePresetCategories(){return u.Z.getCategories()}getSupportedCalendarDateTimeGrains(){return[o.Z.YEAR,o.Z.QUARTER,o.Z.MONTH,o.Z.WEEK,o.Z.DAY]}getSupportedFiscalDateTimeGrains(){return[o.Z.YEAR,o.Z.QUARTER]}getTotalRowsMissingMessage(){throw new Error("Not implemented.")}updateResultOnResultMetadata(e,t){return e}}},92425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(69370),s=r(45189);var n=r(66537);class o extends i.Z{constructor(e,t){super(),this.sqlQueryCapability=t,this.sqlQueryFormatter=e}}o.add("DATASET","dataset",new o(new class{getDatePartFunctionTerm(e,t,r){return`EXTRACT(${e} FROM ${this.getQuotedName(t,r)})`}getAbsoluteDatePredicate(e,t){if(null!=t[0]&&null!=t[1])return`${e} >= DATE '${t[0]}' AND ${e} <= DATE '${t[1]}'`;if(null!=t[0])return`${e} >= DATE '${t[0]}'`;if(null!=t[1])return`${e} <= DATE '${t[1]}'`;throw new Error("date filter must contain at least one date")}getRelativeDatePredicate(e,t){throw new Error("Not implemented.")}getQuotedName(e,t){return t?`"${t}"."${e}"`:`"${e}"`}getGroupSelect(e,t,r,i){return r?this.getDatePartFunctionTerm(r,e,i):this.getQuotedName(e,i)}getSourceAliasAndColumnName(e){return{sourceAlias:void 0,columnName:e}}},new class{isRollUpOnDateFunctionSupported(){return!0}})).add("SOBJECT","sobject",new o(new class{getDatePartFunctionTerm(e,t,r){throw new Error("Not implemented.")}getAbsoluteDatePredicate(e,t){throw new Error("Not implemented.")}getRelativeDatePredicate(e,t){throw new Error("Not implemented.")}getQuotedName(e,t){return t?`"${t}"."${e}"`:`"${e}"`}getGroupSelect(e,t,r,i){throw new Error("Not implemented.")}getSourceAliasAndColumnName(e){return{sourceAlias:void 0,columnName:e}}},new class{isRollUpOnDateFunctionSupported(){throw new Error("Not implemented.")}})).add("SNOWFLAKE","snowflake",new o(new class{getDatePartFunctionTerm(e,t,r){return`EXTRACT(${e} FROM ${this.getQuotedName(t,r)})`}getAbsoluteDatePredicate(e,t){if(null!=t[0]&&null!=t[1])return`${e} BETWEEN to_date('${t[0]}') AND to_date('${t[1]}')`;if(null!=t[0])return`${e} >= to_date('${t[0]}')`;if(null!=t[1])return`${e} <= to_date('${t[1]}')`;throw new Error("date filter must contain at least one date")}getRelativeDatePredicate(e,t){return`(${this._getRelativeDateValue(e,!1,...t[0])} AND ${this._getRelativeDateValue(e,!0,...t[1])})`}getQuotedName(e,t){return t?`"${t}"."${e}"`:`"${e}"`}getGroupSelect(e,t,r,i){return r?this.getDatePartFunctionTerm(r,e,i):this.getQuotedName(e,i)}getSourceAliasAndColumnName(e){return{sourceAlias:void 0,columnName:e}}_getRelativeDateValue(e,t,r,i){const s=t?i+1:i;return`${e} ${t?"<":">="} date_trunc(${r}, ${0===s?"current_date()":`dateadd(${r}, ${s}, current_date())`})`}},new class{isRollUpOnDateFunctionSupported(){return!0}})).add("CDP","cdp",new o(new s.Z,new class{isRollUpOnDateFunctionSupported(){return!1}})).add("BIGQUERY","bigquery",new o(new class{getDatePartFunctionTerm(e,t,r){return e===n.EPOCH_SECOND.getGrain()?`UNIX_SECONDS(TIMESTAMP(${this.getQuotedName(t,r)}))`:`EXTRACT(${e} FROM ${this.getQuotedName(t,r)})`}getAbsoluteDatePredicate(e,t){if(null!=t[0]&&null!=t[1])return`${e} BETWEEN date('${t[0]}') AND date('${t[1]}')`;if(null!=t[0])return`${e} >= date('${t[0]}')`;if(null!=t[1])return`${e} <= date('${t[1]}')`;throw new Error("date filter must contain at least one date")}getRelativeDatePredicate(e,t){return`(${this._getRelativeDateValue(e,!1,...t[0])} AND ${this._getRelativeDateValue(e,!0,...t[1])})`}getQuotedName(e,t){return t?`\`${t}\`.\`${e}\``:`\`${e}\``}getGroupSelect(e,t,r,i){return this.getQuotedName(t)}getSourceAliasAndColumnName(e){return{sourceAlias:void 0,columnName:e}}_getRelativeDateValue(e,t,r,i){const s=t?i+1:i;return`${e} ${t?"<":">="} date_trunc(${0===s?"current_date()":`date_add(current_date(), INTERVAL ${s} ${r})`}, ${r})`}},new class{isRollUpOnDateFunctionSupported(){return!1}})).finish()},50968:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(19929),s=r(67951),n=r(40651);class o extends s{constructor(e){super(e),this._sObjectJson=e}getType(){return n.Z.SOBJECT}getId(){return this.getFullyQualifiedName()}getName(){return this._sObjectJson.name}getNamespace(){return this._sObjectJson.namespace}getLabel(){return this._sObjectJson.label}canModify(){return!1}getSldsIconCode(){return i.Z.getDefaultSldsIconName(this.getName())}getJson(){return this._json}}},61884:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(19929),n=r(15207),o=r(40651),a=r(55430),l=r(67951);class u extends l{static isUserPrivateFolder(e){return null==e||(0,i.startsWith)(e,s.Z.USER.idPrefix)}static isUserPublicFolder(e){return null==e||(0,i.startsWith)(e,s.Z.ORGANIZATION.idPrefix)}static isPrivateOrPublicFolder(e){return null==e||(0,i.startsWith)(e,s.Z.USER.idPrefix)||(0,i.startsWith)(e,s.Z.ORGANIZATION.idPrefix)}constructor(e){super(e),this.id=e.id}getType(){return o.Z.FOLDER}isUserPrivateAsset(){return u.isUserPrivateFolder(this.getId())}isOrgPublicAsset(){return u.isUserPublicFolder(this.getId())}isPrivateOrPublicAsset(){return u.isPrivateOrPublicFolder(this.getId())}getFolderId(){return this.getId()}getIconUrl(){return a.getAssetIconUrl(this)}getIcon(){return this._json.icon}getApplicationStatus(){return this._json.applicationStatus}getShares(){return this._json.shares}getCanBeSharedExternally(){return this._json.canBeSharedExternally}getIsPinned(){return this._json.isPinned}getFeaturedAssets(){return this._json.featuredAssets}getAttachedFiles(){return this._json.attachedFiles}getTemplateSourceId(){return void 0===this._json.templateSourceId?null:this._json.templateSourceId}getTemplateVersion(){return this._json.templateVersion}getRefreshDate(){return 0}getDescription(){return""}getNamespace(){return"folder"}getName(){return this.getLabel()}getId(){return this.id}getLabel(){return this._json.label}getUrl(){return this._json.url}getCreatedDate(e=!1){return e&&([null,0].includes(this.createdDate)||[null,0].includes(this._json.createdDate))?"":this.createdDate||new Date(this._json.createdDate)}getCreatedBy(){return this.createdByUser||new n.Z(this._json.createdBy)}getLastModifiedDate(e=!1){return e&&([null,0].includes(this.lastModifiedDate)||[null,0].includes(this._json.lastModifiedDate))?"":this.lastModifiedDate||new Date(this._json.lastModifiedDate)}getLastModifiedBy(){return this.lastModifiedByUser?this.lastModifiedByUser:new n.Z(this._json.lastModifiedBy)}isPrivateOrPublicFolder(){return this.getId().startsWith(s.Z.USER.idPrefix)}getJson(){return this._json}}},84499:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{static getDefaultValue(){return this.INSIGHTS}}s.add("INSIGHTS","insights",new s).add("REPORTS","report",new s).add("DASHBOARDS","dashboard",new s).add("TABLEAU_DASHBOARDS","tableauDashboard",new s).finish()},57132:(e,t,r)=>{"use strict";r.d(t,{t:()=>i});const i="ReportFormulaGen"},51164:(e,t,r)=>{"use strict";r.d(t,{B:()=>s,C:()=>i});const i="ReportGen",s="ReportGen"},97441:(e,t,r)=>{"use strict";r.d(t,{JI:()=>d,fs:()=>c});var i=r(21966),s=r(8429),n=r(40651),o=r(97108),a=r(31835),l=r(78190),u=r(45080);function d(e,t){return`${e.getCode()}/${t}`}function c(e,t){const r={id:i.Z.consumeUniqueId("new"),type:n.Z.LENS.getCode(),dateVersion:t?.getCode()||u.Z.LEGACY.getCode(),label:s.Z.getLabel("Assets","newLens"),visualizationType:"hbar",state:{},datasets:[]};switch(e.getType()){case n.Z.DATASET:r.datasets.push({id:e.getId(),alias:e.getAlias()});break;case n.Z.SOBJECT:case n.Z.CDP_OBJECT:{r.dateVersion=u.Z.NEW.getCode();const t=function(e,t=!1){const r=e.getType(),i=r===n.Z.DATASET&&e.getDatasetType()===o.Z.LIVE;let s;s=i||r===n.Z.CDP_OBJECT||r===n.Z.DATASET&&!t?l.buildDefaultQuery(e.getFullyQualifiedName(),a.Z.getDelegateFromAssetMetadata(e).getDefaultGroupQueryLimit()):{measures:[["count","*"]]};const u={steps:{aggregateflex:{type:"aggregateflex",query:s}},widgets:{aggregateflex_chart:{type:"chart",parameters:{visualizationType:"hbar",step:"aggregateflex"}}}},d=u.steps.aggregateflex;i?d.connectionName=e.getLiveConnection()?.connectionName||"":r===n.Z.SOBJECT?d.sobject=e.getFullyQualifiedName():r===n.Z.CDP_OBJECT&&(d.cdpObjects=[e.getFullyQualifiedName()],e.getDataspace()&&(d.dataspace=e.getDataspace()));return u}(e);r.state=t;break}default:throw new Error(`Cannot create a default lens from asset type ${e.getType()}`)}return r}},47735:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(67951),s=r(40651),n=r(51308),o=r(63594),a=r(87418),l=r(45080),u=r(60873),d=r(1806);class c extends i{constructor(e){super(e)}getType(){return s.Z.LENS}getId(){return this._json.id}getLabel(){return this._json.label}getName(){return this._json.name}getNamespace(){return this._json.namespace}getDescription(){return this._json.description}getUrl(){return this._json.url}getState(){return this._json.state}getStateJson(){return this._json.state}getWidgets(){return Object.keys(this._json.state.widgets).map((e=>new a.Z(e,this._json.state.widgets[e],this)))}getDashboardLens(e){if(Object.keys(this._json.state.steps).includes(e))return new d(e,this._json.state.steps[e],this)}getDateVersion(){return l.Z.getEnumByCode(this._json.dateVersion)}getDatasets(){return this._json.datasets.map((e=>new n(e)))}getVisualizationType(){return o.getEnumByCode(this._json.visualizationType)}getVisibility(){return this._json.visibility?u.Z.fromCode(this._json.visibility):u.Z.ALL}getRefreshDate(){return this._json.refreshDate}getJson(){return this._json}}},22371:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(82957);class s extends i.Z{constructor(e){super(),this._json=e}mutate(e){Object.assign(e.dashboardJson,this._json)}}},4289:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(33581);class s extends i.Z{constructor(e){super(),this._json=e}mutate(e){Object.assign(e,this._json)}}},78406:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(96486),s=r(90554),n=r(33581),o=r(56861),a=r(54180);class l extends n.Z{constructor(e,t,r,i=!1){super(),this._sourceStepId=e,this._newStepId=t,this._sourceXmdJson=r,this._shouldOverride=i}mutate(e){this._shouldOverride&&this._removeXmdJson(e);for(const t of o.enums()){const r=t.getCode(),n=t.getSection(this._sourceXmdJson||e);if((0,i.isEmpty)(n))continue;let o=t.getSection(e);this._sourceXmdJson&&!o&&(o=[],e[r]=o);const l=t.getIdentifier();for(const e of n.reverse()){if(a.Z.getStepIdForField(e[l])!==this._sourceStepId)continue;const t=(0,s.deepCopy)(e);t[l]=e[l].replace(this._sourceStepId,this._newStepId),o.push(t)}}}_removeXmdJson(e){for(const t of o.enums()){const r=t.getSection(e);if((0,i.isEmpty)(r))continue;const n=t.getIdentifier(),o=e=>a.Z.getStepIdForField(e[n])===this._newStepId;0!==r.filter(o).map((e=>(0,s.deepCopy)(e))).length&&(0,i.remove)(r,o)}}}},54370:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(99689);class s{#ur;#ne;constructor(e,t){this.#ur=e,this.#ne=t}getName(){return this.#ur}getData(){return this.#ne?.data}getType(){return this.#ne.type}getParameter(){return this.#ne.parameter}getUseAsArray(){return this.#ne.useAsArray}getDynamicDataSourceId(){return this._getDynamicData()?.sourceId}getDynamicDataFiled(){return this._getDynamicData()?.field}getDynamicDataSourceType(){return this._getDynamicData()?.sourceType}getSourceMessageType(){const e=this._getDynamicData()?.sourceType;return e?i.Z.fromName(e.toUpperCase()):null}getDynamicDataIncludeAll(){return this._getDynamicData()?.includeAll}_getDynamicData(){const e=this.getData();return"object"==typeof e?e:void 0}getHash(){const e=this.getData(),t=null!=e&&"object"==typeof e?`${e.sourceId}.${e.field}.${e.sourceType}.${String(e.includeAll)}`:e;return`${this.getName()}.${String(t)}`}}},15523:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(723),s=r(44110);class n extends i{getCode(){return this._value.code}createDateRangeFilters(e,t){return this._value.singleDay?t:(0,s.Z)().createDateRangeFilters(e,t,"",this._value.delta)}static getDefaultValue(e){return null}}n.build(n,{WEEK:{code:"Week",delta:{days:7}},MONTH:{code:"Month",delta:{months:1}},QUARTER:{code:"Quarter",delta:{months:3}},FISCAL_QUARTER:{code:"FiscalQuarter",delta:{months:3}},YEAR:{code:"Year",delta:{years:1}},FISCAL_YEAR:{code:"FiscalYear",delta:{years:1}}})},65334:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u,d:()=>l});var i=r(8429),s=r(67951),n=r(40651),o=r(98841),a=r(61884);function l(e,t){return{folder:{id:"",label:"",name:""},createdBy:{id:"",name:""},createdDate:"",lastModifiedBy:{id:"",name:""},lastAccessedDate:"",type:n.Z.LIGHTNING_DASHBOARD.getCode(),id:e,label:t,name:""}}class u extends s{constructor(e){super(e)}getBaseRoute(){return"lightning/r/Dashboard"}getType(){return n.Z.LIGHTNING_DASHBOARD}getId(){return this._json.id}getLabel(){return this._json.label||this._json.title}getName(){return this._json.name}getOwnerId(){return this._json.owner?.id}getOwnerName(){return this._json.owner?.name}getLightningFolder(){return a.Z.isUserPrivateFolder(this._json.folder.id)?new o.Z({...this._json.folder,name:i.Z.getLabel("AssetLongTableAssetType","privateDashboards"),label:i.Z.getLabel("AssetLongTableAssetType","privateDashboards")}):new o.Z(this._json.folder)}getJson(){return this._json}getLastRunDate(){return new Date(this._json.lastModifiedDate).toISOString()}}},98841:(e,t,r)=>{"use strict";r.d(t,{K:()=>a,Z:()=>l});var i=r(8429),s=r(84499),n=r(77782),o=r(40651);function a(e,t){return{createdBy:{id:"",name:""},createdDate:"",lastModifiedBy:{id:"",name:""},lastAccessedDate:"",type:o.Z.LIGHTNING_DASHBOARD_FOLDER.getCode(),id:e,label:t,name:"",canBeSharedExternally:!1,attachedFiles:[],applicationStatus:"",isPinned:!1}}class l extends n.Z{getType(){return o.Z.LIGHTNING_DASHBOARD_FOLDER}getFolderType(){return s.Z.DASHBOARDS}getParent(){return this._json.folder?new l(this._json.folder):void 0}getAncestors(){return this.isPrivateOrPublicFolder()?[]:this._json.ancestors.map((e=>new l(e)))}getLabel(){const e=this._json.label??this._json.title??this._json.name;return this.isPrivateFolder()?i.Z.getLabel("AssetLongTableAssetType","privateDashboards"):e}}},77782:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(27223),s=r(19929),n=r(61884);class o extends n.Z{getType(){return i.checkImplemented()}getFolderType(){return i.checkImplemented()}getLastModifiedByName(){return this._json.lastModifiedBy?.name}getLastModifiedDate(){return this._json.lastModifiedDate}getLastRunDate(){return new Date(this.getLastModifiedDate()).toISOString()}getAncestorCount(){return this._json.ancestors?.length||0}getAncestors(){return this.isPrivateOrPublicFolder()?[]:this._json.ancestors.map((e=>new o(e)))}getParent(){return i.checkImplemented()}isPrivateFolder(){return this.getId().startsWith(s.Z.USER.idPrefix)}isPublicFolder(){return this.getId().startsWith(s.Z.ORGANIZATION.idPrefix)}isPrivateOrPublicFolder(){return this.isPrivateFolder()||this.isPublicFolder()}}},45044:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l,k:()=>a});var i=r(8429),s=r(84499),n=r(77782),o=r(40651);function a(e,t){return{createdBy:{id:"",name:""},createdDate:"",lastModifiedBy:{id:"",name:""},lastAccessedDate:"",type:o.Z.LIGHTNING_REPORT_FOLDER.getCode(),id:e,label:t,name:"",canBeSharedExternally:!1,attachedFiles:[],applicationStatus:"",isPinned:!1}}class l extends n.Z{getType(){return o.Z.LIGHTNING_REPORT_FOLDER}getFolderType(){return s.Z.REPORTS}isDefault(){return!0===this._json.isDefault}getParent(){return this._json.folder?new l(this._json.folder):void 0}getAncestors(){return this.isPrivateOrPublicFolder()?[]:this._json.ancestors.map((e=>new l(e)))}getLabel(){const e=this._json.label??this._json.title??this._json.name;return this.isPrivateFolder()?i.Z.getLabel("AssetLongTableAssetType","privateReports"):this.isPublicFolder()?i.Z.getLabel("AssetLongTableAssetType","publicReports"):e}}},85808:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{static fromPrefix(e){if(s.hasCode(e))return s.fromCode(e)}constructor(e,t){super(),this.operationLabel=e,this.aggregateLabelKey=t}getPrefix(){return this.code}getOperationLabel(){return this.operationLabel}getAggregateLabelKey(){return this.aggregateLabelKey}}s.add("SUM","s",new s("sumMetric","sum")).add("MIN","m",new s("minMetric","min")).add("AVERAGE","a",new s("avgMetric","avg")).add("MAX","mx",new s("maxMetric","max")).add("UNIQUE","u",new s("uniqueMetric","unique")).add("MEDIAN","me",new s("medianMetric","median")).add("NOOP","noop",new s).finish()},36672:(e,t,r)=>{"use strict";r.d(t,{O:()=>l,Z:()=>u});var i=r(8429),s=r(19929),n=r(67951),o=r(40651),a=r(45044);function l(e,t){return{folder:{id:"",label:"",name:""},createdBy:{id:"",name:""},createdDate:"",lastModifiedBy:{id:"",name:""},lastAccessedDate:"",type:o.Z.REPORT.getCode(),id:e,label:t,name:""}}class u extends n{constructor(e){super(e)}getType(){return o.Z.REPORT}getId(){return this._json.id}getLabel(){return this._json.label}getName(){return this._json.name}getAlias(){return this.getName()}getNamespace(){return this._json.namespace}getDescription(){return this._json.description}getLightningFolder(){let e,t;if(e=this._json.owner?this._json.owner:this._json.folder,e)return t=0===e.id.indexOf(s.Z.ORGANIZATION.idPrefix)?{...e,name:i.Z.getLabel("reportBuilder","publicReports"),isDefault:!0}:e.name===this.getCreatedByName()?{...e,name:i.Z.getLabel("reportBuilder","privateReports"),isDefault:!0}:e,new a.Z(t)}getRefreshDate(){return this.getLastRefreshDate()}getLastRunDate(){return this.getDataRefreshedDate()}getLastRefreshDate(){const e=this.getLastRunDate(),t=this.getLastModifiedDate();return new Date(e??t??0).getTime()}getJson(){return this._json}getLastAccessedDate(){return this._json.lastAccessedDate?new Date(this._json.lastAccessedDate).toISOString():new Date(this.getLastRefreshDate()).toISOString()}getDataRefreshedDate(){return this._json.dataRefreshDate}}},94035:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(96486),s=r(8429),n=r(92463),o=r(49842),a=r(64933),l=r(67883),u=r(78453);class d extends n.Z{constructor(e,t=[],r,i=!1,s,n,a,l,u,d,c,h,p,g){super(e,t,[],i),this._reportMetadataJson=r,this._hasSummaryTotals=i,this._tableColumns=s,this._highlight=n,this._drillFilters=a,this._isPreview=l,this._reportInstanceId=u,this._scrollToColumnIndex=d,this._picklistColors=c,this._isRowLimitExceeded=h,this._error=p,this._dynamicFilterManager=g,this._reportMetadata=new o(this._reportMetadataJson,this._dynamicFilterManager)}getReportMetadata(){return this._reportMetadataJson}getReportMetadataWrapper(){return this._reportMetadata}getReportExtendedMetadata(){return this._reportMetadata.getReportExtendedMetadata()}getReportTypeMetadata(){return this._reportMetadata.getReportTypeMetadata()}getTableColumns(){return this._tableColumns}getReportFormat(){return this._reportMetadata.getReportFormat()}getAggregates(){return this._reportMetadata.getAggregates()}getGroupingsAcross(){return this._reportMetadata.getGroupingAcrossColumns()}getGroupingsDown(){return this._reportMetadata.getGroupingDownColumns()}getGroupingLabel(e){const t=this._reportMetadata.getReportExtendedMetadata().getGroupingColumnInfo(e);if(t)return t.label}getColumnLabel(e){for(const t of this._reportMetadata.getReportTypeMetadata().getCategories())if(t.columns[e])return t.columns[e].label}getRollingSnapshotDateInfo(){return this._reportMetadata.getReportTypeMetadata().getRollingSnapshotDateInfo()}showSubtotals(){return this._reportMetadata.getShowSubtotals()}hasStackedSummaries(){return this._reportMetadata.hasStackedSummaries()}hasDetailRows(){return this._reportMetadata.getShowDetails()&&!this.isMatrixRowLimitExceeded()}isMatrixRowLimitExceeded(){return this._isRowLimitExceeded&&l.getEnumByValue(this._reportMetadata.getReportFormat())===l.MATRIX}getScope(){return this._reportMetadata.getScope()}getSortBy(){return this._reportMetadata.getSortBy()}getHighlight(){return this._highlight}getDrillFilters(){return this._drillFilters}getFilters(){return this._reportMetadata.getFilters()}getMaxFilterCount(){return 20}getAggregateLabel(e){return a.get().isRowCount(e)?s.Z.getLabel("reportBuilder","recordCount"):this._reportMetadata.getReportExtendedMetadata().getAggregateColumnInfo(e).label}getStandardDateFilter(){return this._reportMetadata.getStandardDateFilter()}isMultiBlock(){return this._reportMetadata.isMultiBlock()}getColumnInfo(e){return this._reportMetadata.getReportExtendedMetadata().getColumnInfo(e)}getAggregateColumnInfo(e){return this._reportMetadata.getReportExtendedMetadata().getAggregateColumnInfo(e)}getGroupingColumnInfo(e){return this._reportMetadata.getReportExtendedMetadata().getGroupingColumnInfo(e)}hasPicklistColors(e){return!(0,i.isEmpty)(null!=this._picklistColors?this._picklistColors[e]:void 0)}hasError(){return null!=this._error}hasNoDataDueToTimeout(){return(null!=this._error?this._error.errorCode:void 0)&&(null!=this._error?this._error.specificErrorCode:void 0)===u.Z.REPORT_EXECUTION_RUNNING_TOO_LONG_ERROR.getCode()}getErrorMessage(){return null!=this._error?this._error.message:void 0}getSpecificErrorCode(){return null!=this._error?this._error.specificErrorCode:void 0}getAlertLevel(){return this.hasNoDataDueToTimeout()?"warning":"error"}isTabular(){return 0===this.getGroupingsDown().length&&0===this.getGroupingsAcross().length}isSummary(){return this.getGroupingsDown().length>0&&0===this.getGroupingsAcross().length}isMatrix(){return this.getGroupingsDown().length>0&&this.getGroupingsAcross().length>0}isPreview(){return this._isPreview}getReportInstanceId(){return this._reportInstanceId}getScrollToColumnIndex(){return this._scrollToColumnIndex}getChartFilters(){return this._dynamicFilterManager.getChartFilters()}getLinkedFilters(){return this._dynamicFilterManager.getLinkedFilters()}getDynamicFilterManager(){return this._dynamicFilterManager}getFormattingRules(){return this._reportMetadata.getFormattingRules()}}},34533:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(8429),n=r(25946),o=r(64933),a=r(71805),l=r(40651);class u{constructor(e,t,r,i,s,n,a){this._reportTypeMetadata=e,this._buckets=t,this._principalMultiBlockReportType=r,this._historicalMetadata=i,this._customDetailFormulas=s,this._reportTypeName=n,this._reportTypeLabel=a,this._isMultiBlock=!!this._principalMultiBlockReportType,this._columnToInfoMap={},this._snapshotDatesLabelMap=null,this._parsingUtil=o.get()}retrieveColumnInfo(e,t){let r,s=t;if(!e)return;s||(s=""),null==this._columnToInfoMap[s]&&(this._columnToInfoMap[s]={});const n=this._columnToInfoMap[s][e];if(n)return n;let o,a=i.find(this.getCategories(s),(t=>t.columns[e]));if(a||this._isMultiBlock||(a=this.getCategoryCurrentReportType(e)),null!=a&&(o=a.columns[e]),!o){const t=this._historicalMetadata&&this._historicalMetadata.getHistoricalSubColumnInfo(e);t&&(r=this.retrieveColumnInfo(t.baseField,s),o={...r,...t})}return o&&o.isHistorical?(r=this.retrieveColumnInfo(o.baseField,s),{...o,...n}):(this._columnToInfoMap[s][e]=o,o)}retrieveCategoryLabelColumn(e){if(this._reportTypeMetadata){const t=this.getCategories(),r=i.find(t,(t=>i.has(t.columns,e)));return r?r.label:""}return null}getCategoryCurrentReportType(e){if(this._reportTypeMetadata){const t=this._getCurrentReportType();if(t)return i.find(t?.categories,(t=>t.columns[e]))}return null}getHistoricalMetadata(){return this._historicalMetadata}getStandardDateColumns(){return this._getStandardDateColumnsFromCategories(this.getCategories())}_getStandardDateColumnsFromCategories(e){const t=[];for(const r of Array.from(e))Object.keys(r.columns).forEach((e=>{const i=r.columns[e];this._isDate(i.dataType)&&t.push({label:i.label,value:e,dataType:i.dataType})}));return t}getColumnsWithDataType(e){if(!e||0===e.length)return[];const t=[];for(const r of Array.from(this.getCategories()))Object.keys(r.columns).forEach((i=>{const s=r.columns[i];e.includes(s.dataType)&&t.push({label:s.label,value:i,dataType:s.dataType,isHistorical:s.isHistorical,isLookup:s.isLookup,isFilterable:s.filterable,lookupParentEntity:s.lookupParentEntity,fieldToFieldFilterable:s.fieldToFieldFilterable})}));return t}getAvailableMeasures(){return this._getAvailableMeasuresFromCategories(this.getCategories())}getAvailableCIMeasures(e){return this.isCalculatedInsight()?this.getCategories().flatMap((e=>Object.values(e.columns))).filter((t=>"MEASURE"===t.calculatedInsightFieldInfo?.fieldType&&(!e||t.calculatedInsightFieldInfo?.aggregationType===e))).map((e=>e.entityColumnName)).filter(Boolean):[]}getAvailableDateColumnsWithSections(){const e=[],t=this.getStandardDateColumns(),r=this.getAvailableDetailColumnsWithSections();return t.map((t=>{for(const s of Array.from(r))if(i.includes(s.columns,t.value)&&!i.some(e,{label:s.category})){e.push({label:s.category,type:"separator"});break}return e.push(t)})),e}getAvailableMeasuresPerReportType(){if(!this._isMultiBlock)return{};if(!this._availableMeasuresByReportType){this._availableMeasuresByReportType={};const e=this.getCategoriesByReportType();Object.keys(e).forEach((t=>{const r=e[t];this._availableMeasuresByReportType[t]=this._getAvailableMeasuresFromCategories(r.categories)}))}return this._availableMeasuresByReportType}_getAvailableMeasuresFromCategories(e){const t=[];for(const r of Array.from(e))Object.keys(r.columns).forEach((e=>{const i=r.columns[e];(this._isNumeric(i.dataType)||this._isBoolean(i.dataType))&&t.push(e)}));return t}getAvailableDetailColumns(){return this._getAvailableDetailColumnsFromCategories(this.getCategories())}getAvailableDetailColumnsPerReportType(){if(!this._isMultiBlock)return{};if(!this._availableDetailColumnsByReportType){this._availableDetailColumnsByReportType={};const e=this.getCategoriesByReportType();Object.keys(e).forEach((t=>{const r=e[t];this._availableDetailColumnsByReportType[t]=this._getAvailableDetailColumnsFromCategories(r.categories)}))}return this._availableDetailColumnsByReportType}_getAvailableDetailColumnsFromCategories(e){const t=[];for(const r of Array.from(e))Object.keys(r.columns).forEach((e=>{t.push(e)}));return t}getAvailableDetailColumnsWithSections(e=this.getCategories()){return Array.from(e).map((e=>({category:e.label,columns:i.keys(e.columns)})))}getAvailableGroupingColumnsWithSections(){return this.getAvailableDetailColumnsWithSections(this._isMultiBlock?this.getCommonCategories():this.getCategories())}getAvailableDimensions(e){const t=[];for(const r of Array.from(this.getCategories()))Object.keys(r.columns).forEach((s=>{const o=r.columns[s];let a;a=this._isNumeric(o.dataType)?n.Type.MEASURE:this._isDate(o.dataType)?n.Type.DATE:n.Type.DIMENSION,t.push(new n(s,o.label,a,i.includes(e,s)))}));return t}getAvailableCIDimensionNames(e){return this.isCalculatedInsight()?this.getAvailableDimensions(e).filter((e=>e.getType()!==n.Type.MEASURE)).map((e=>e.getName())):[]}getColumnName(e){let t;const r=this.retrieveColumnInfo(e);return null!=r&&(t=r.label),t}getColumnDataType(e){let t;const r=this.retrieveColumnInfo(e);return null!=r&&(t=r.dataType),t}getResultsMetadataColumnType(e){return a.getEnumByCode(e).getMetadataColumnType()}isColumnNumeric(e){return this._isNumeric(this.getColumnDataType(e))||this._isDate(this.getColumnDataType(e))}getDurationLabel(e){for(const t of Array.from(this._reportTypeMetadata.standardDateFilterDurationGroups))for(const r of Array.from(t.standardDateFilterDurations))if(r.value===e)return r.label}getDurationGroups(){return Array.from(this._reportTypeMetadata.standardDateFilterDurationGroups)}getOperatorLabel(e,t){const r=this.getColumnDataType(e);if(r)for(const e of Array.from(this._reportTypeMetadata.dataTypeFilterOperatorMap[r]))if(e.name===t)return e.label}getOperators(e){return this.getOperatorsByColumnDataType(this.getColumnDataType(e))}getOperatorsByColumnDataType(e){return null!=e?this._reportTypeMetadata.dataTypeFilterOperatorMap[e]:void 0}_getCurrentReportType(){const e=this._reportTypeMetadata.reportTypes;return i.find(e,((e,t)=>t===this.getName()))}getStandardFilterInfo(e){if(!this._reportTypeMetadata.standardFilterInfos){const t=this._getCurrentReportType();return t?t.standardFilterInfos[e]:{}}return this._reportTypeMetadata.standardFilterInfos[e]}getScopeInfo(){return this._reportTypeMetadata.scopeInfo}getCategories(e){let t=[];if(this._isMultiBlock||(this._isBucketFieldsMemoized||(this._isBucketFieldsMemoized=!0,this._mutateReportTypeMetadataCategory(this._buckets,s.Z.getLabel("ReportBucketing","BucketFields"),this._getBucketMap.bind(this))),this._isCDFMemoized||(this._isCDFMemoized=!0,this._mutateReportTypeMetadataCategory(this._customDetailFormulas,s.Z.getLabel("ReportCustomDetail","CustomDetailFields"),this._getCustomDetailFormulaMap.bind(this)))),this._isMultiBlock&&e){const r=this.getCategoriesByReportType()[e];null!=r&&(t=r.categories)}else t=null!=this._reportTypeMetadata?this._reportTypeMetadata.categories:[];return t}getOrderedReportTypes(){return null!=this._orderedReportTypes?this._orderedReportTypes:this._orderedReportTypes=i.sortBy(Object.keys(this.getCategoriesByReportType()),[e=>this.getCategoriesByReportType()[e].label])}getCategoriesByReportType(){return null!=this._categoriesByReportType?this._categoriesByReportType:this._isMultiBlock?this._categoriesByReportType=this._createMultiBlockCategoriesMap():this._categoriesByReportType={"":{label:"",categories:this.getCategories()}}}getPrincipalReportType(){return this._principalMultiBlockReportType}isPrincipalReportType(e){return this._isMultiBlock&&this.getPrincipalReportType()===e}getCommonCategories(){return this._isMultiBlock?1===Object.keys(this._reportTypeMetadata.reportTypes).length?(null!=this._principalMultiBlockReportType&&null!=this._reportTypeMetadata.reportTypes[this._principalMultiBlockReportType]?this._reportTypeMetadata.reportTypes[this._principalMultiBlockReportType].categories:void 0)||[]:this._reportTypeMetadata.commonCategories:[]}getColumnAliasMap(){return this._isMultiBlock?this._reportTypeMetadata.columnAliasMap:{}}getHasOuterJoin(){return this._reportTypeMetadata.hasOuterJoin}isExternalObjectReport(){return this._reportTypeMetadata.isExternalObjectReport}isHistorical(){return this._reportTypeMetadata.isHistorical}getDataCategories(){return this._reportTypeMetadata.dataCategories}getSnapshotDateLabel(e){if(!this._snapshotDatesLabelMap){const e={};this._reportTypeMetadata&&this._reportTypeMetadata.rollingSnapshotDateInfo&&this._reportTypeMetadata.rollingSnapshotDateInfo.values&&this._reportTypeMetadata.rollingSnapshotDateInfo.values.forEach((t=>t.values.forEach((t=>e[t.value]=t.label)))),this._snapshotDatesLabelMap=e}return this._snapshotDatesLabelMap[e]}_createMultiBlockCategoriesMap(){if(!this._isMultiBlock)return{};const{reportTypes:e}=this._reportTypeMetadata,t={};return Object.keys(e).forEach((r=>{const{label:s,categories:n}=e[r];t[r]={label:s,categories:n};for(const e of Array.from(n))Object.keys(e.columns).forEach((t=>{const s=e.columns[t];i.assign(s,this._getCommonFieldMetadata(r,t))}))})),t}_getCommonFieldMetadata(e,t){const r=this.getColumnAliasMap();if(!r)return{isCommon:!1};for(const i of Object.keys(r)){const s=r[i];if(s[e]===t){const t={};for(const r of Object.keys(s)){const i=s[r];if(r!==e){const{categories:e}=this._reportTypeMetadata.reportTypes[r];t[r]=this._getFieldCategoryAndLabel(e,i),t[r].reportTypeLabel=this._getReportTypeLabel(r)}}return{isCommon:!0,equivalentFields:t,reportTypeLabel:this._getReportTypeLabel(e)}}}return{isCommon:!1}}_getFieldCategoryAndLabel(e,t){for(const r of Array.from(e))for(const e of Object.keys(r.columns)){const i=r.columns[e];if(e===t)return{name:t,label:i.label,categoryLabel:r.label}}}_getReportTypeLabel(e){return this.getInnerReportTypeMetadataByReportType()[e]._reportTypeMetadata.label}getCategoryIndex(e,t){if(i.isEmpty(e)||this._isMultiBlock)return-1;for(let r=0;r<e.length;r++){if(e[r].label===t)return r}return-1}_isNumeric(e){return["int","double","currency","percent","number"].includes(e)}_isPercentage(e){return"percent"===e}_isBoolean(e){return"boolean"===e}_isDate(e){return["date","datetime"].includes(e)}isColumnFilterable(e){let t;const r=this.retrieveColumnInfo(e);return null!=r&&(t=r.filterable),t}isColumnUniqueCountable(e){const t=this.retrieveColumnInfo(e);return!(!t||!t.uniqueCountable)}_getBucketMap(e){const t={};for(const r of Array.from(e)){this.retrieveColumnInfo(r.developerName);const e=[];for(const t of Array.from(r.values))e.push({label:t.label,name:t.label});t[r.developerName]={dataType:"string",filterValues:e,filterable:!0,bucketable:!1,isLookup:!1,label:r.label,maxLength:null,uniqueCountable:!0}}return t}_getCustomDetailFormulaMap(e){const t={};return Object.keys(e).forEach((r=>{const i=e[r];this.retrieveColumnInfo(i.developerName);const s=[];if(i.values)for(const e of Array.from(i.values))s.push({label:e.label,name:e.label});t[r]={dataType:i.dataType,filterValues:s,filterable:!0,bucketable:!1,isLookup:!1,isCustom:!1,label:i.label,maxLength:null,uniqueCountable:!0}})),t}_mutateReportTypeMetadataCategory(e,t,r){const s=this.getCategories();if(i.isEmpty(e)){const e=this.getCategoryIndex(s,t);e>-1&&s.splice(e,1)}else{const i=r(e),n=this.getCategoryIndex(s,t);n>-1?s[n].columns=i:s.push({label:t,columns:i})}}getCrossFilterObjectRelationships(){return this._reportTypeMetadata.objectRelationships||[]}getAggregateableDetailColumns(e,t,r){const i=[];for(const n of Array.from(this.getCategories(e)))Object.keys(n.columns).forEach((e=>{const o=n.columns[e];if(this._isNumeric(o.dataType)||o.uniqueCountable){const n=r?s.Z.getLabel("reportBuilder","blockFieldLabel",r,o.label):o.label,a=o.dataType,l=o.uniqueCountable;i.push({name:this._parsingUtil.addBlockPrefixToColumnName(e,t),label:n,dataType:a,uniqueCountable:l})}}));return i}getAggregateableDetailColumnsForAllBlocks(e){let t=e;if(null==t&&(t=[]),!this._isMultiBlock)return[];const r=[];for(const e of Array.from(t))r.push(...this.getAggregateableDetailColumns(e.getReportType(),e.getBlockId(),e.getName()));return r}getDateGranularityInfos(e){let t=e;if(null==t&&(t=this._principalMultiBlockReportType),this._isMultiBlock&&null!=t){const e=this.getInnerReportTypeMetadataByReportType()[t];return null!=e?e.getDateGranularityInfos():[]}return this._reportTypeMetadata.dateGranularityInfos||[]}getRollingSnapshotDateInfo(){return this._reportTypeMetadata.rollingSnapshotDateInfo}getInnerReportTypeMetadataByReportType(){return null!=this._innerReportTypeMetadatas?this._innerReportTypeMetadatas:this._innerReportTypeMetadatas=i.mapValues(this._reportTypeMetadata.reportTypes,(e=>new u(e,void 0,void 0,void 0,void 0,this._reportTypeName,this._reportTypeLabel)))}isPercentColumn(e){return this._isPercentage(this.getColumnDataType(e))}getType(){return l.Z.REPORT_TYPE}getId(){return this.getName()}getName(){return this._reportTypeName}getLabel(){return this._reportTypeLabel}getNamespace(){}getLastModifiedDate(){}getFullyQualifiedName(){return this.getName()}getSldsIconCode(){return l.Z.REPORT_TYPE.getSldsIconCode()}isDataCloud(){return this._reportTypeMetadata&&!!this._reportTypeMetadata.isDataCloud}isCalculatedInsight(){return this.isDataCloud()&&null!=this._reportTypeMetadata.objects&&this._reportTypeMetadata.objects.some((({apiName:e})=>e.endsWith("__cio")))}isSDM(){return!(!this._reportTypeMetadata||!this._reportTypeMetadata.isSemanticModel)}isCalculatedInsightColumn(e){if(!this.isDataCloud())return!1;return i.castArray(e).some((e=>e.split(".").some((e=>e.endsWith("__cio")))))}getCIMeasureAggregationType(e){const t=this.getCategories().find((t=>t.columns[e]));if(null===t)return null;const r=t?.columns[e],i=r?.calculatedInsightFieldInfo;return"MEASURE"===i?.fieldType?i?.aggregationType:null}}},35245:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(96486),s=r(27223),n=r(1713),o=r(42333),a=r(37253),l=r(82871);class u{columnLabel(e){return s.checkImplemented()}columnLabelFromName(e){return s.checkImplemented()}getCategoryLabelFromColumn(e){}formatMeasureName(e){return s.checkImplemented()}formatMeasure(e,t,r){return s.checkImplemented()}getNonAggregateMeasureFieldName(e){return s.checkImplemented()}getNonAggregateMeasureFieldLabel(e){return s.checkImplemented()}getColumnLabel(e){return s.checkImplemented()}formatDimension(e,t){return s.checkImplemented()}getDefaultAction(e){}getRecordIdField(e){}isSfdcActionsEnabled(e,t){return!1}hasActions(e,t){return!1}getSfdcActionNames(e){}hasLinkTemplate(e,t){return!1}getLinkTemplate(e,t){}getLinkTooltip(e,t){}getRecordDisplayFields(e){}getOrgInfo(e,t){}getRecordOrganizationIdField(e){}hasOpenSalesforceRecordActionEnabled(e){return s.checkImplemented()}getActionEnabledColumns(e){return s.checkImplemented()}getValueLabels(e){return s.checkImplemented()}getValueColors(e){return s.checkImplemented()}getMeasureFormat(e){return s.checkImplemented()}getDateGrain(e){return s.checkImplemented()}getDateFormat(e){return s.checkImplemented()}getDateParseFormat(e){return s.checkImplemented()}getFirstDayOfWeek(e){return s.checkImplemented()}getFullDateFieldLabel(e){return s.checkImplemented()}getDateSeparator(){return s.checkImplemented()}showMeasuresWhenGroupingsHidden(){return!1}getCategoricalConditionalFormattingRuleCollection(e,t){const r=(0,i.find)(this._getConditionalFormattingRules()?.getRulesForField(t),(t=>t.getType()===o.CATEGORIES&&t.getProperty()===a.Z.CHART_COLOR&&t.getReferenceField()===e))?.getValueFormatValueMap()||{},s=this._getDatasetDimensionColors(e),u=[],d=(0,i.mergeWith)({},s,r);for(const e in d)if(Object.prototype.hasOwnProperty.call(d,e)){const t=d[e];u.push({key:e,formatValue:t})}const c=[];return(0,i.isEmpty)(u)||c.push({field:e,conditionalFormatting:l.make({fieldName:e,referenceField:e,property:a.Z.CHART_COLOR,type:o.CATEGORIES,values:u}).getRuleJson()}),new n.Z(c)}getConditionalFormattingStyles(e,t,r){if(null!=t)return this._getConditionalFormattingRules()?.getStyles(t.getName(),e,r)}getConditionalFormattingRulesForProperty(e){return this._getConditionalFormattingRules()?.getRulesForProperty(e)}getConditionalFormattingRulesForFieldName(e){return this._getConditionalFormattingRules()?.getRulesForField(e)}hasConditionalFormattingRulesForFieldName(e){return Boolean(this._getConditionalFormattingRules()?.hasAnyRuleForFieldName(e))}_getConditionalFormattingRules(){}_getDatasetDimensionColors(e){return{}}}},90877:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(92463),s=r(28357),n=r(6597),o=r(72713);class a extends i.Z{constructor(e,t){const r=[],i=[],a=[],l=new Map;let u=[];const d=new Map;t.forEach((t=>{if(null!=t){if(t.match(n.RY)){u=t.split(n.RY);const s=new n.ZP(e).buildCombinedDateGrainColumn(u);s?(d.set(t,u),r.push(s),i.push(t)):u=[t]}else u=[t];u.forEach((t=>{const n=e.getColumn(t);n&&(r.push(n),e.hasGroupingColumn(t)&&i.push(t),e.isDateTimeColumn(t)&&a.push(t),o.isCompoundStr(t)?o.compoundStrToCompoundDim(t).forEach((r=>{e.getSummaryColumnsMap().get(s.Z.GROUPING_COLUMN_PREFIX+r)&&l.set(s.Z.GROUPING_COLUMN_PREFIX+r,t)})):e.getSummaryColumnsMap().get(s.Z.GROUPING_COLUMN_PREFIX+t)&&l.set(s.Z.GROUPING_COLUMN_PREFIX+t,t))}))}})),super(r,i,a,e.hasSummaryTotals(),e.hasSubtotals(),e.hasColumnTotals(),e.hasRowTotals(),l,d),this._originalGroupingColumns=e.getGroupings(),this._originalSummaryColumnMap=e.getSummaryColumnsMap()}getGroupings(e){const t=this.getGroupingColumnNames(void 0,{removeCompoundParts:e});return super.getGroupings().filter((e=>-1!==t.indexOf(e.getName())))}getGroupingColumnNames(e=!1,{removeCompoundParts:t}={}){let r=e?this._originalGroupingColumns:super.getGroupings();return t&&(r=this._removeCompoundParts(r)),r.map((e=>e.getName()))}getSummaryColumnsMap(e=!1){return e?this._originalSummaryColumnMap:super.getSummaryColumnsMap()}}},14562:(e,t,r)=>{"use strict";r.d(t,{Z:()=>D});var i=r(70847),s=r(96486),n=r(8429),o=r(18111),a=r(61506),l=r(84985),u=r(35245),d=r(1611),c=r(66537),h=r(6597),p=r(79587),g=r(62133),m=r(32898);const _=new RegExp("{{\\s*([^}]*)\\s*}}","g"),f=new RegExp("{{\\s*row[.](.+?)\\s*}}","g");new Set(["FeedItem.ContentPost"]);function y(e,t){if("string"!=typeof e||0===e.indexOf("//"))return!1;const r={};if(null!=t)for(const e of t)r[e]="";const i=T(e,"",r);if(null==i)return!1;const n=function(e){if(null==e)return[];const t=[];return e.replace(f,((e,r)=>(t.push(r),r))),t}(e);return 0===(0,s.difference)(n,t).length&&!!(0,m.isUrlValid)(i,!0)}function b(e,t){const r=E(e,t),i=e?.getFieldByName(t);if(!i)return null;let s=I(i?.getLinkTemplate());return!s&&r?s=`{{instanceUrl}}/{{row.${r}}}`:s&&0===s.indexOf("/")&&0!==s.indexOf("//")&&(s=`{{instanceUrl}}${s}`),s}function C(e,t,r){const i=e.getField(t),s=E(e,t);return!(null==i||null==s||!r.includes(s))&&!1!==i.isSfdcActionsEnabled()}function E(e,t){const r=e?.getFieldByName(t);return I(r?.getRecordIdField())}function S(e,t,r){const i=e.getField(t),s=b(e,t);return i&&I(i.getLinkTooltip())||function(e,t){return null==e||0!==e.indexOf("http://")&&0!==e.indexOf("https://")?t?n.Z.getLabel("InsightsRecordLink","salesforceWithOrg",t.getLabel()||t.getInstanceUrl()):n.Z.getLabel("InsightsRecordLink","salesforce"):`${n.Z.getLabel("InsightsRecordLink","external")} (${(0,m.getBaseUrl)(e)})`}(s,r)}function T(e,t,r){const{linkTemplate:i,substitutionDimNameMap:s}=function(e){const t={};if(null==e)return{linkTemplate:e,substitutionDimNameMap:t};let r=0;const i=e.replace(f,(function(e,i){const s="row_"+r++;return t[i]=s,`{{${s}}}`}));return{linkTemplate:i,substitutionDimNameMap:t}}(e),n=function(e){const t=a.Z.get(o);if(t.isInCommunityContext()&&null==e){const e=t.getAppRoot();return e.length>0&&"/"===e.charAt(e.length-1)?e.substring(0,e.length-1):e}return e}(t),l=function(e,t,r){const i={instanceUrl:e};for(const e of Object.keys(t)){const s=t[e];i[r[e]]=s}return i}(n,r,s);return i?.replace(_,((e,t)=>null!=l[t]?l[t]:""))}function I(e){return e?.trim()||null}var v=r(42333),R=r(37253),w=r(82871),A=r(1713);class D extends u.Z{constructor(e,t,r=!1){super(),this._extendedMetadata=e??new p.Z,this._resultsMetadata=t,this._showMeasuresWhenGroupingsHidden=r}columnLabel(e){return this.getColumnLabel(e)}formatMeasureName(e){return this.getColumnLabel(e)}formatMeasure(e,t,r){return this.formatMeasureValue(e,t,r)}measureNameFromColumnName(e){return this.columnLabelFromName(e)}columnLabelFromName(e){return this.getColumnLabel(d.Z.MEASURE.of(e))}getColumnLabel(e){const t=this._extendedMetadata.getFieldLabel(e.getName());return t||(h.ZP.isCombinedDateColumn(e)?new h.ZP(this._extendedMetadata).getColumnLabel(e,this):e.getName())}getFieldLabel(e){return this._extendedMetadata.getFieldLabel(e.getName())||e.getLabel()||e.getName()}formatMeasureValue(e,t,r=!1){if(null==t)return n.Z.getLabel("Null","display");if("string"==typeof t)return t;if("NA"===t)return"#NA!";if(void 0!==t&&(isNaN(t)||t===-1/0||t===1/0))return"#REF!";if("-"===t||void 0===t)return"-";const s=this._resultsMetadata.isCurrencyColumn(e.getName()),l=this.getMeasureFormat(e);let u=l.customFormat?.[0];u||s||(u="#,###.##");const d=l.customFormat?.[1],c={formatString:u,multiplier:d,delimiters:l.delimiters,currencyIsoCode:s?this._resultsMetadata.getCurrencyIsoCode(e.getName()):void 0,locale:a.Z.get(o).getAppUser().getLocale()};return r?(0,i.formatCompact)(t,{...c,byOriginalFormatString:!0,minCompactDecimalDigits:1,minMidRangeCompactDecimalDigits:0}):(0,i.format)(t,c)}getMeasureFormat(e){const t=this._extendedMetadata.getMeasureFormat(e?.getName());if(t&&t.fullFormat&&t.unitMultiplier){const e={customFormat:[t.fullFormat,t.unitMultiplier]};return t.delimiters&&(e.delimiters=t.delimiters),e}return t}getValueLabels(e){return this._extendedMetadata.getFieldMemberLabels(e.getName())}formatDimension(e,t){return""===t?t:null==t?n.Z.getLabel("Null","display"):Array.isArray(t)?t.map((t=>g.fullKeyText(this._extendedMetadata,e?.getName(),t))).join(", "):g.fullKeyText(this._extendedMetadata,e?.getName(),t)}getValueColors(e){return this._extendedMetadata.getDimensionColors(e.getName())}getDateGrain(e){const t=h.ZP.getDateGrain(e);if(t)return c.getFinestGrain(t).getCode();{const t=this._extendedMetadata.getDateTimeFieldGrain((0,s.last)(this._getDateParts(e)));return t?.getGrain()}}getFirstDayOfWeek(e){if(null!=this._extendedMetadata.getDateTimeFieldGrain(e.getValue()))return this._extendedMetadata.getParentDimensionField(e.getValue()).getFirstDayOfWeek();const t=this._extendedMetadata.getParentDimensionField(this._getDateParts(e)[0]);return t?.getFirstDayOfWeek()}getDateFormat(e){const t=this._getDateMetadata(e,!1);if(Array.isArray(t))return t.length>3?t.slice(0,3).join(" - ")+" "+t.slice(3).join(":"):t.join(" - ")}getDateParseFormat(e){const t=this._getDateMetadata(e,!0);if(Array.isArray(t))return t.join(h.RY)}getDateSeparator(){return this._extendedMetadata.getDateVersion().getDateSeparator()}getFullDateFieldLabel(e){return this._extendedMetadata.getFieldLabel(this._extendedMetadata.getParentDimension(e.getName()))}getCategoricalConditionalFormattingRuleCollection(e,t){const r=(0,s.find)(this._getConditionalFormattingRules()?.getRulesForField(t),(t=>t.getType()===v.CATEGORIES&&t.getProperty()===R.Z.CHART_COLOR&&t.getReferenceField()===e))?.getValueFormatValueMap()||{},i=this._extendedMetadata.getCategoricalConditionalFormattingRuleCollection(e).getRulesForField(e)[R.Z.CHART_COLOR.code]?.getValueFormatValueMap()||{},n=[],o=(0,s.mergeWith)({},i,r);for(const e in o)if(Object.prototype.hasOwnProperty.call(o,e)){const t=o[e];n.push({value:e,formatValue:t})}const a=[];return(0,s.isEmpty)(n)||a.push({field:e,conditionalFormatting:w.make({fieldName:e,referenceField:e,property:R.Z.CHART_COLOR,type:v.CATEGORIES,values:n}).getRuleJson()}),new A.Z(a)}getConditionalFormattingStyles(e,t,r){if(null==t)return;const i=this._getConditionalFormattingRules();if(i){const s=i.getRulesForField(t.getName()),n=Object.getOwnPropertyNames(s),o={};for(const e of n){const t=s[e].getReferenceField();Object.assign(o,t?this._extendedMetadata.getFieldMemberLabels(t):{})}return i.getStyles(t.getName(),e,r,o)}}getConditionalFormattingRulesForProperty(e){return this._getConditionalFormattingRules()?.getRulesForProperty(e)}getConditionalFormattingRulesForFieldName(e){return this._getConditionalFormattingRules()?.getRulesForField(e)}hasConditionalFormattingRulesForFieldName(e){return Boolean(this._getConditionalFormattingRules()?.hasAnyRuleForFieldName(e))}getActionEnabledColumns(e){const t=this._getAvailableDimensions(e);return this._extendedMetadata.getFields().filter((e=>C(this._extendedMetadata,e.getName(),t))).map((e=>e.getName()))}getDefaultAction(e){const t=this._extendedMetadata.getFieldByName(e.getName())?.getDefaultAction();return"none"===t?void 0:t}getRecordIdField(e){return this._extendedMetadata.getFieldByName(e)?.getRecordIdField()}isSfdcActionsEnabled(e,t){const r=this._getAvailableDimensions(t);return C(this._extendedMetadata,e,r)}hasActions(e,t){const r=this.isSfdcActionsEnabled(e.getName(),t),i=this.hasLinkTemplate(e.getName(),t);return r||i}getSfdcActionNames(e){return(this._extendedMetadata.getFieldByName(e)?.getSfdcActions()??[]).map((e=>e.name))}hasLinkTemplate(e,t){return function(e,t,r){if(!function(e,t){const r=e.getField(t);return null!=r&&!1!==r.isLinkTemplateEnabled()}(e,t))return!1;const i=b(e,t);return null!=i&&y(i,r)}(this._extendedMetadata,e,this._getAvailableDimensions(t))}getLinkTemplate(e){return b(this._extendedMetadata,e)}getLinkTooltip(e,t){return S(this._extendedMetadata,e,t)}getRecordDisplayFields(e){return this._extendedMetadata.getFieldByName(e)?.getRecordDisplayFields()}getOrgInfo(e,t){const r=this.getRecordOrganizationIdField(e);if(null!==r)return this._extendedMetadata.getOrganizationById(t[r])}getRecordOrganizationIdField(e){return this._extendedMetadata.getFieldByName(e)?.getRecordOrganizationIdField()}hasOpenSalesforceRecordActionEnabled(e){const t=this._extendedMetadata.getFieldByName(e.getName());return null!=t&&(t.isLinkTemplateEnabled()&&(null!=t.getRecordIdField()||null!=t.getLinkTemplate()))}showMeasuresWhenGroupingsHidden(){return this._showMeasuresWhenGroupingsHidden}_getDateMetadata(e,t){let r;if(null!=this._extendedMetadata.getDateTimeFieldGrain(e.getValue()))return r=this._extendedMetadata.getDateTimeFieldGrain(e.getValue()),t?[r.getMetadata()]:[r.getFormat()];const i=[];for(const s of h.ZP.splitCombinedDateColumn(e)){const e=this._extendedMetadata.getDateTimeFieldGrain(s.getValue());null!=e&&(r=c.getEnumByCode(e.getGrain()),t?i.push(r.getMetadata()):i.push(r.getFormat()))}return i}_getDateParts(e){return e.getName().split(this.getDateSeparator())}_getConditionalFormattingRules(){return null==this._conditionalFormattingRules&&(this._conditionalFormattingRules=this._extendedMetadata.getConditionalFormattingRules()),this._conditionalFormattingRules}_getAvailableDimensions(e){return(0,s.uniq)(this._extendedMetadata.getFieldsByType(l.Dimension).map((e=>e.getName())).concat(e.getColumnNames(d.Z.DIMENSION)))}}},92463:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(96486),s=r(28357),n=r(6597);class o{constructor(e,t=[],r=[],i=!1,s,n,o,a=new Map,l=new Map,u=new Set,d=new Map,c=[],h=null){this._timeColumnNames=new Set(r),this._hasSummaryTotals=i,this._hasSubtotals=s,this._hasColumnTotals=n,this._hasRowTotals=o,this._summaryColumnsMap=a,this._compoundTimeColumnsMap=l,this._currencyColumnsMap=d,this._computedColumnNames=c,this._columnsMap=new Map,this._groupingsMap=new Map,this._unsortableColumns=u,this._recordCount=h;const p=[...t];if(e.forEach((e=>{if(this._columnsMap.has(e.getName())&&this.getColumnNames(void 0,{removeCompoundParts:!0}).includes(e.getName()))throw new Error(`Column '${e.getName()}' already exists.`);this._columnsMap.set(e.getName(),e);const t=p.indexOf(e.getName());t>=0&&(this._groupingsMap.set(e.getName(),e),p.splice(t,1))})),p.length>0)throw new Error(`Column '${p[0]}' does not exist for grouping.`)}getColumn(e){return this._columnsMap.get(e)}getColumns(e,{removeCompoundParts:t}={}){let r=this._summaryColumnsMap.size>0?Array.from(this._columnsMap.values()).filter((e=>!(e.getName().startsWith(s.Z.GROUPING_COLUMN_PREFIX)&&this._summaryColumnsMap.has(e.getName())))):Array.from(this._columnsMap.values());if(t&&(r=this._removeCompoundParts(r)),!e||Array.isArray(e)&&0===e.length)return r;const n=(0,i.castArray)(e);return r.filter((e=>n.includes(e.getType())))}getColumnNames(e,{removeCompoundParts:t}={}){return this.getColumns(e,{removeCompoundParts:!0}).map((e=>e.getName()))}getColumnValues(){return this.getColumns().map((e=>e.getValue()))}getColumnIndex(e,t){return e?this.getColumns(t).findIndex((t=>t.getName()===e.getName())):-1}getGrouping(e){return this._groupingsMap.get(e)}getGroupings(e){return Array.from(this._groupingsMap.values())}getGroupingIndex(e){return this.getGroupings().findIndex((t=>t.getName()===e))}getGroupingColumnNames(e=!0,{removeCompoundParts:t}={}){let r=this.getGroupings();return t&&(r=this._removeCompoundParts(r)),r.map((e=>e.getName()))}hasSummaryTotals(){return this._hasSummaryTotals}getComputedColumnNames(){return this._computedColumnNames}getUngroupedColumns(e){return this.getColumns(e).filter((e=>!this._groupingsMap.has(e.getName())))}getUngroupedColumnNames(e){return this.getColumns(e).reduce(((e,t)=>{const r=t.getName();return this._groupingsMap.has(r)||e.push(r),e}),[])}hasColumn(e){return this._columnsMap.has(e)}getFilteredColumnNames(e){return this.hasColumn(e)?[e]:[]}hasUngroupedColumn(e){return this._columnsMap.has(e)&&!this._groupingsMap.has(e)}hasGroupingColumn(e){return this._groupingsMap.has(e)}hasCombinedGroupingColumn(e){return e.split(n.RY).every((e=>this._groupingsMap.has(e)))}isDateTimeColumn(e){return this._timeColumnNames.has(e)||this._compoundTimeColumnsMap.has(e)}isSortingEnabled(e){return!this._unsortableColumns.has(e)}getTimeColumnNames(){return this._timeColumnNames}getCompoundTimeColumnNames(){return new Set(this._compoundTimeColumnsMap.keys())}allGroupsHaveSummaryColumn(){const e=this.hasSubtotals();return null!=e?e:(null==this._allGroupsHaveSummaryColumns&&(0===this._summaryColumnsMap.size?this._allGroupsHaveSummaryColumns=!1:this._allGroupsHaveSummaryColumns=this.getGroupings().map((e=>e.getName().split(n.RY))).flat().every((e=>this._summaryColumnsMap.has(s.Z.GROUPING_COLUMN_PREFIX+e)))),this._allGroupsHaveSummaryColumns)}_removeCompoundParts(e){const t=new Set((0,i.flatten)(Array.from(this._compoundTimeColumnsMap.entries()).map((([e,t])=>t))));return e.filter((e=>!t.has(e.getName())))}getSummaryColumnsMap(e=!0){return this._summaryColumnsMap}getSummaryColumnName(e){for(const[t,r]of this._summaryColumnsMap)if(r===e)return t;throw new Error(`No summary column found for column "${e}".`)}hasSubtotals(){return this._hasSubtotals}hasColumnTotals(){return this._hasColumnTotals}hasRowTotals(){return this._hasRowTotals}getCompoundColumnParts(e){const t=this._compoundTimeColumnsMap.get(e);if(t)return t;throw new Error(`Combined column "${e}" does not exists.`)}isCompoundColumn(e){return null!=e?.match(n.RY)}getRecordCount(){return this._recordCount}isCurrencyColumn(e){return this._currencyColumnsMap.has(e)}getCurrencyIsoCode(e){if(!this.isCurrencyColumn(e))throw new Error(`Currency column "${e}" does not exist.`);return this._currencyColumnsMap.get(e)}}},83732:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(41232);class s{constructor(e,t,r,i,s,n){this._type=e,this._name=t,this._value=r||t,this._sort=i,this._sourceName=s,this._subtotals=n??!1}getType(){return this._type}getName(){return this._name}getValue(){return this._value}getSort(){return this._sort&&this._sort instanceof i.Z?this._sort.direction:this._sort}getSortColumnGroupValues(){return this._sort?.columnGroupValues||[]}getSortNullsOrder(){return this._sort?.nullsOrder}getSourceName(){return this._sourceName}hasSubtotals(){return this._subtotals}}},1611:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(79646),s=r(8429),n=r(83732);class o extends i.Z{of(e,t,r,i,s){return new n.Z(this,e,t,r,i,s)}get label(){return s.Z.getLabel("ResultsMetadataColumnType",this.name.toLowerCase())}}o.add("MEASURE",new o).add("DIMENSION",new o).add("BOOLEAN",new o).add("DATE",new o).add("CURRENCY",new o).add("PERCENT",new o).add("LEGACY_STATIC_VALUE",new o).finish()},41232:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(44244);class s{constructor(e,t,r){this._direction=e,this._columnGroupValues=t??[],this._nullsOrder=r}get direction(){return this._direction}get columnGroupValues(){return this._columnGroupValues}get nullsOrder(){return this._nullsOrder}static ASC=new s(i.Z.ASC);static DESC=new s(i.Z.DESC);static of(e){switch(e){case i.Z.ASC:return s.ASC;case i.Z.DESC:return s.DESC}}}},44244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(78978);class s extends i{}s.build(s,{ASC:"asc",DESC:"desc"})},6597:(e,t,r)=>{"use strict";r.d(t,{RY:()=>l,ZP:()=>m});var i=r(96486),s=r(8429),n=r(1611),o=r(66537),a=r(41232);const l="~~~",u="-",d=[[o.YEAR,o.QUARTER],[o.YEAR,o.MONTH],[o.YEAR,o.WEEK],[o.YEAR,o.MONTH,o.DAY],[o.YEAR,o.MONTH,o.DAY,o.HOUR],[o.YEAR,o.MONTH,o.DAY,o.HOUR,o.MINUTE],[o.YEAR,o.MONTH,o.DAY,o.HOUR,o.MINUTE,o.SECOND],[o.YEAR_FISCAL,o.QUARTER_FISCAL],[o.YEAR_FISCAL,o.MONTH_FISCAL],[o.YEAR_FISCAL,o.WEEK_FISCAL]],c=new Set(d.map((e=>e.map((e=>e.getGrain())).join(u)))),h=new Map(d.map((e=>[e[e.length-1].getGrain(),e]))),p=new Map(o.enums().filter((e=>e.doesSupportGrouping()&&!e.isFullField())).map((e=>[e.getSuffix(),e]))),g=Array.from(p.keys()).reverse();class m{constructor(e){this._resultsMetadata=e}static COMBINED_DATE_GRAIN_SEPARATOR=u;static _findGrainSuffixFromColumnName(e){return g.find((t=>e.endsWith(t)))}static _getDateGrainFromColumnName(e){const t=m._findGrainSuffixFromColumnName(e);return t&&p.get(t)?.getGrain()}static getDateFieldName(e){const t=e.getValue();if(Array.isArray(t)){if("string"==typeof t[0]&&o.isValidDateGrain(t[0])&&"string"==typeof t[1])return t[1];if("string"==typeof t[0]){const e=t[0],r=m._findGrainSuffixFromColumnName(e);if(r)return e.substring(0,e.length-r.length)}}else{const t=e.getName(),r=m._findGrainSuffixFromColumnName(t);if(r)return t.substring(0,t.length-r.length)}}static getDateGrain(e){const t=e.getValue();return Array.isArray(t)?"string"==typeof t[0]&&o.isValidDateGrain(t[0])?t[0]:"string"==typeof t[0]?t.map((e=>m._getDateGrainFromColumnName(e))).join(u):void 0:m._getDateGrainFromColumnName(e.getName())}static getCombinedDateGrains(e){return h.get(e)}static getIndividualGroups(e){return m.isCombinedDateColumn(e)?m.splitCombinedDateColumn(e):[e]}buildCombinedDateGrainColumn(e){if(!this.isValidCombinedTimeColumn(e))return;const t=e.map((e=>this._resultsMetadata.getColumn(e)));let r,i;if(Array.isArray(t[0]?.getValue())){const e=t[0]&&m.getDateFieldName(t[0])||"",s=t.map((e=>e&&m.getDateGrain(e)));r=s.map((t=>t&&`${o.getEnumByGrain(t).getCode()}_${e}`)).join(l),i=[s.join(u),e]}else r=e.join(l),i=e;return n.Z.DIMENSION.of(r,i,a.Z.of(t[0]?.getSort()),t[0]?.getSourceName(),t[0]?.hasSubtotals())}getCombinedDateGrainColumnName(e){const t=this.buildCombinedDateGrainColumn(e);if(t)return t.getName()}getColumnLabel(e,t){return`${t.columnLabelFromName(m.getDateFieldName(e)||"")} (${s.Z.getLabel("InsightsDateSelector",`${o.getFinestGrain(m.getDateGrain(e)).getGrain()}_compound`)})`}isValidTimeColumn(e){return 1===e.length||this.isValidCombinedTimeColumn(e)}isValidCombinedTimeColumn(e){if(e.length<2)return!1;const t=[];let r="";for(const i of e){const e=this._resultsMetadata.getColumn(i);if(!e)return!1;if(!o.getEnumByGrain(m.getDateGrain(e)))return!1;if(r){if(r!==m.getDateFieldName(e))return!1}else r=m.getDateFieldName(e);t.push(m.getDateGrain(e))}return c.has(t.join(u))}getAvailableDateGrainsInOrder(e){const t=m.getDateFieldName(e),r=Array.from(this._resultsMetadata.getTimeColumnNames()).filter((e=>{const r=this._resultsMetadata.getColumn(e);return r&&m.getDateFieldName(r)===t&&!e.includes(l)}));return m.sortCombinedDateGrains(r)}getGroupsAfterMergeDates(e,t){const r=this.getAvailableDateGrainsInOrder(e),i=t.filter((t=>t===e.getName()||!r.includes(t)));return i.splice(i.indexOf(e.getName()),1,...r),i}static isValidCombinedDateGrains(e){return c.has(e.map((e=>e.getGrain())).join(u))}static isCombinedDateColumn(e){const t=e.getValue();return e.getName().includes(l)&&Array.isArray(t)&&(c.has(t[0])||t.every((e=>"string"==typeof e&&null!=m._findGrainSuffixFromColumnName(e))))}static splitCombinedDateColumn(e){const t=e.getValue();let r;if(t[0].includes(u)){const e=t[1].toString();r=t[0].split(u).map((t=>[t,e]))}return e.getName().split(l).map(((e,t)=>n.Z.DIMENSION.of(e,r?.[t])))}static sortCombinedDateGrains(e){return(0,i.sortBy)(e,(e=>{for(const[t,r]of p.entries())if(e.endsWith(t))return r.getOrdinal();return o.getEnumByCode(e.split("_")[0]).getOrdinal()}))}static isValidDateGrainColumn(e){const t=e.getValue();if(Array.isArray(t))return o.isValidDateGrain(t[0]);{const t=e.getName();return Array.from(p.keys()).some((e=>t.endsWith(e)))}}static isNewDate(e){const t=e.getValue();return Array.isArray(t)&&o.isValidDateGrain(t[0])}}},96603:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(67399),s=r(69370);class n extends s.Z{}n.add("USER","user",new n).add("SHARED","shared",new n).finish();class o{static create(e,t,r,i,s,n){return new o({id:e,type:t.code,label:r,isInitial:i,pageId:s,state:null!=n?n.describe({includeSteps:!0}):void 0})}constructor(e){this._json=e,this._state=new i.Z(this._json.state)}getId(){return this._json.id}getType(){return n.fromCode(this._json.type)}getLabel(){return this._json.label}isInitial(){return this._json.isInitial}getPageId(){return this._json.pageId}getState(){return this._state}getJson(){return this._json}getComponentSavedView(e){return o.create(this.getId(),this.getType(),this.getLabel(),this.isInitial(),this.getState().getComponentPageName(e),this.getState().getComponentState(e))}getComponentPageName(e){return this.getState().getComponentPageName(e)}}},95552:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(69370),s=r(8429),n=r(27223);class o{constructor(e){this._type=e}getType(){return this._type}getName(){throw n.notImplemented()}getLabel(){throw n.notImplemented()}}class a extends o{constructor(e,t,r,i){super(e),this._goal=t,this._name=r,this._label=i}getGoal(){return this._goal}getName(){return this._name}getLabel(){return this._label||this.getName()}}class l extends i.Z{constructor(e){super(),this._clazz=e}getClazz(){return this._clazz}buildOutcome(e){return new(this.getClazz())(e)}}l.add("COUNT","Count",new l(class extends o{constructor({type:e}){super(e)}getFullText(){return s.Z.getLabel("Outcome","countDisplayName")}getLabel(){return s.Z.getLabel("Outcome","countDisplayName")}})).add("TEXT","Text",new l(class extends a{constructor({type:e,goal:t,name:r,label:i,successValue:s,failureValue:n}){super(e,t,r,i),this._successValue=s,this._failureValue=n}getSuccessValue(){return this._successValue}getFailureValue(){return this._failureValue}getFullText(){return`${this.getGoal()} ${this.getLabel()}`}getLabel(){return this._label||this._name+` (${this.getSuccessValue()})`}})).add("NUMBER","Number",new l(class extends a{constructor({type:e,goal:t,name:r,label:i}){super(e,t,r,i)}getFullText(){return`${this.getGoal()} ${this.getLabel()||this.getName()}`}})).add("CATEGORICAL","Categorical",new l(class extends a{constructor({type:e,goal:t,name:r,label:i,targetVariables:s}){super(e,t,r,i),this._targetVariables=s}getTargetVariables(){return this._targetVariables}getFullText(){return s.Z.getLabel("Outcome","categoricalDisplayName",this.getLabel()||this.getName())}})).finish()},52699:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}s.add("ANALYTICS_DATASET","AnalyticsDataset",new s).add("REPORT","Report",new s).add("LIVE_DATASET","LiveDataset",new s).finish()},56873:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var i=r(69370),s=r(78978),n=r(8429);class o extends s{getLabel(){return n.Z.getLabel("DiscoveryStoryStatus",this._value.labelName)}getBadgeClassName(){return this._value.badgeClassName}getTileClassName(){return this._value.tileClassName}}o.build(o,new Map([["ANALYZING",{labelName:"statusAnalyzing",badgeClassName:"analyzing"}],["QUEUED",{labelName:"statusQueued",badgeClassName:"queued"}],["SUCCESS",{labelName:"statusSuccess",badgeClassName:"success",tileClassName:"slds-theme_alt-inverse"}],["ERROR",{labelName:"statusError",badgeClassName:"error"}],["DELETING",{labelName:"statusDeleting",badgeClassName:"deleting"}],["FETCHING",{labelName:"statusFetching",badgeClassName:"analyzing"}],["DRAFT",{labelName:"statusDraft"}]]));const a=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/story-tile-analyzing.fa4b8c5b28590840c662.png",l=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/story-tile-queued.73e13e1632adb1f49008.png",u=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/story-tile-ready.f495463d401339a67ce6.png",d=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/story-tile-error.73e13e1632adb1f49008.png",c=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/story-tile-deleting.1ce9b385fad0081bc1d4.png",h=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/analyzing-mini.9c7fff8aa4839a8a7e84.png",p=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/queued-mini.9c7fff8aa4839a8a7e84.png",g=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/ready-mini.9d92374658a473bc1a70.png",m=r.p+"images/WaveCommon/static/images/EinsteinDataDiscovery/deleting-mini.bd9461f6df9482894ba3.png";class _ extends i.Z{constructor(e){super(),this._config=e}static getDefaultValue(){return _.QUEUED}canCancel(){return this._config.canCancel}canDelete(){return this._config.canDelete}canOpen(){return this._config.canOpen}getIconUrl(){return this._config.tileViewIcon}getUIStatusType(){return this._config.uiStatusType}getTileViewIcon(){return this._config.tileViewIcon}getListViewIcon(){return this._config.listViewIcon}isTerminalStatus(){return this._config.isTerminal}isFetchingStatus(){return this===_.FETCHING||this===_.QUEUED_FOR_FETCHING}isErrorStatus(){return this===_.FAILED||this===_.TIMED_OUT}isRequestToDeleteStatus(){return this===_.REQUEST_TO_DELETE}getStageIndex(){return null!=this._config.stageIndex?this._config.stageIndex:-1}}_.add("DRAFT","Draft",new _({isTerminal:!1,canCancel:!1,canDelete:!0,canOpen:!0,tileViewIcon:u,listViewIcon:g,uiStatusType:o.DRAFT})).add("WAITING","Waiting",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:l,listViewIcon:p,uiStatusType:o.QUEUED,stageIndex:0})).add("QUEUED","Queued",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:l,listViewIcon:p,uiStatusType:o.QUEUED,stageIndex:0})).add("AUTOPILOT","Autopilot",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:1})).add("PREPROCESSING","Preprocessing",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:1})).add("RUNNING_FEATURE_ENGINEERING","RunningFeatureEngineering",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:2})).add("DONE_FEATURE_ENGINEERING","DoneFeatureEngineering",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:3})).add("RUNNING_DESCRIPTIVE","RunningDescriptive",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:3})).add("DONE_DESCRIPTIVE","DoneDescriptive",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:4})).add("RUNNING_PREDICTIVE","RunningPredictive",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:4})).add("DONE_PREDICTIVE","DonePredictive",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:5})).add("REQUEST_TO_DELETE","RequestToDelete",new _({isTerminal:!0,canCancel:!1,canDelete:!1,canOpen:!1,tileViewIcon:c,listViewIcon:m,uiStatusType:o.DELETING})).add("FAILED","Failed",new _({isTerminal:!0,canCancel:!1,canDelete:!0,canOpen:!0,tileViewIcon:d,listViewIcon:p,uiStatusType:o.ERROR})).add("SUCCESS","Success",new _({isTerminal:!0,canCancel:!1,canDelete:!0,canOpen:!0,tileViewIcon:u,listViewIcon:g,uiStatusType:o.SUCCESS,stageIndex:6})).add("TIMED_OUT","TimedOut",new _({isTerminal:!0,canCancel:!1,canDelete:!0,canOpen:!0,tileViewIcon:d,listViewIcon:p,uiStatusType:o.ERROR})).add("RESIZING","Resizing",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:4})).add("FETCHING","Fetching",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.FETCHING})).add("QUEUED_FOR_FETCHING","QueuedForFetching",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.FETCHING})).add("QUEUED_FOR_POSTPROCESSING","QueuedForPostprocessing",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:5})).add("POSTPROCESSING","Postprocessing",new _({isTerminal:!1,canCancel:!0,canDelete:!1,canOpen:!0,tileViewIcon:a,listViewIcon:h,uiStatusType:o.ANALYZING,stageIndex:5})).finish()},81697:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>g});var i=r(83993),s=r(55430),n=r(51308),o=r(40651),a=r(67951),l=r(15207),u=r(95552),d=r(56873),c=r(52699),h=r(2326);const p="None";Object.freeze({NUMERIC:"Numeric",BINARY:"Binary",MULTI_CLASS:"MultiClass",COUNT:"Count",NONE:p}),Object.freeze({NONE:p,DISCOVERY:"Discovery"});class g extends a{constructor(e){super(e)}toJSON(){return this._json}getType(){return o.Z.STORY.getCode()}getId(){return this._json.id}getStatus(){return this._status||(this._status=d.Z.fromCode(this._json.status))}getError(){return this._error||(this._error=h.Z.getEnumByCode(this._json.errorCode))}getOutcome(){return this._outcome||(this._outcome=u.Z.fromCode(this._json.outcome.type).buildOutcome(this._json.outcome)),this._outcome}getOutcomeJson(){return this._json.outcome}getMessage(){return this._json.message||"Internal Server Error"}getSetup(){return this._json.setup}getLabel(){return this._json.label}getSourceType(){return this._sourceType||(this._sourceType=c.Z.fromCode(this._json.input.type))}getContainerAsset(){return this._containerAsset||(this._containerAsset=new n(this.getSourceType()===c.Z.ANALYTICS_DATASET?this._json.input.dataset:this._json.input.report))}getSourceAsset(){return this._sourceAsset||(this._sourceAsset=new n(this.getSourceType()===c.Z.ANALYTICS_DATASET?this._json.input.datasetVersion:this._json.input.reportInstance))}getUrl(){return this._json.url}getCreatedDate(){return this._createdDate||(this._createdDate=new Date(this._json.createdDate))}getCreatedBy(){return this._createdByUser||(this._createdByUser=new l.Z(this._json.createdBy))}getLastModifiedDate(){return this._lastModifiedDate||(this._lastModifiedDate=new Date(this._json.lastModifiedDate))}getLastModifiedBy(){return this._lastModifiedByUser||(this._lastModifiedByUser=new l.Z(this._json.lastModifiedBy))}getDescription(){return""}getFullyQualifiedName(){return(0,i.Oz)(this.getName(),this.getNamespace())}getNamespace(){return"story"}canView(){return!0}canModify(){return!0}canManage(){return!0}getFolderId(){return this.getFolder().getId()}getName(){return this.getLabel()}get(e){return this._json[e]}getIconUrl(){return s.getAssetIconUrl(this)}getCreatedById(){return this.getCreatedBy().getId()}getCreatedByName(){return this.getCreatedBy().getName()}getCreatedByPhotoUrl(){return s.getProfilePhotoUrl(this._json.createdBy)}getLastModified(){return this.getLastModifiedDate()}getLastModifiedId(){return this.getLastModifiedBy().getId()}getLastModifiedName(){return this.getLastModifiedBy().getName()}getFiles(){return[]}getPermissions(){return{view:!0}}getRefreshDate(){return 0}}},2326:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(723),s=r(8429);class n extends i{static getDefaultValue(){return n.INTERNAL_ERROR}getCode(){return this._value.code}getDescription(){return this._value.description}getMessage(e){return s.Z.getLabel("DiscoveryErrorCode",this._value.messageLabelKey||"genericMsg",e.getLabel())}isFallback(){return this._value.code>=700&&this._value.code<=799}isUserError(){return this._value.isUserError}getHelpLink(){return this._value.helpLink}}n.build(n,{DOWNLOAD_REPORT_METADATA_ERROR:{code:101,description:"Error in retrieving report metadata",isUserError:!1},DOWNLOAD_REPORT_CSV_ERROR:{code:102,description:"Error in downloading the report csv file",isUserError:!1},DOWNLOAD_MISSING_ROW_ERROR:{code:103,description:"Downloaded CSV row count does not match the expected row count",isUserError:!1},DATASET_FILE_NOT_FOUND:{code:104,description:"Cannot locate dataset file for run analysis",isUserError:!1},DOWNLOAD_DATASET_ERROR:{code:105,description:"Error in downloading the dataset csv file",isUserError:!1},NOT_ENOUGH_COLUMNS:{code:106,description:"The dataset to be analyzed does not satisfy the minimum number of columns requirement",isUserError:!0,messageLabelKey:"notEnoughColumns",helpLink:"https://help.salesforce.com/articleView?id=sf.ri_report_tips.htm&type=5"},TOO_MANY_COLUMNS:{code:107,description:"The dataset to be analyzed has too many columns",isUserError:!0,messageLabelKey:"tooManyColumns"},NOT_ENOUGH_ROWS:{code:108,description:"The dataset to be analyzed does not satisfy the minimum number of rows requirement",isUserError:!0,messageLabelKey:"notEnoughRows",helpLink:"https://help.salesforce.com/articleView?id=sf.ri_report_tips.htm&type=5"},TOO_MANY_ROWS:{code:109,description:"The dataset to be analyzed has too many rows",isUserError:!0,messageLabelKey:"tooManyRows"},CONSTANT_OUTCOME:{code:110,description:"The outcome column is constant",isUserError:!0,messageLabelKey:"constantOutcome"},TOO_MANY_BUCKETS:{code:111,description:"Too many buckets",isUserError:!0,messageLabelKey:"tooManyBuckets"},DESCRIPTIVE_ANALYSIS_START_ERROR:{code:201,description:"Failed to start descriptive analysis",isUserError:!1},DESCRIPTIVE_ANALYSIS_RUN_ERROR:{code:202,description:"Error in running the descriptive analysis",isUserError:!1},DESCRIPTIVE_ANALYSIS_SAVE_ERROR:{code:203,description:"Error in saving the descriptive analysis result",isUserError:!1},PREDICTIVE_ANALYSIS_START_ERROR:{code:301,description:"Failed to start predictive analysis",isUserError:!1},PREDICTIVE_ANALYSIS_RUN_ERROR:{code:302,description:"Error in running the predictive analysis",isUserError:!1},PREDICTIVE_ANALYSIS_SAVE_ERROR:{code:303,description:"Error in saving the predictive analysis result",isUserError:!1},PREDICTIVE_ANALYSIS_MISSING_MODEL:{code:304,description:"Missing model object for predictive analysis",isUserError:!1},METRIC_FILE_NOT_CREATED:{code:305,description:"Metric File not being successfully created",isUserError:!1},MODEL_MANAGER_UPDATE_ERROR:{code:306,description:"Model manager failed to update core",isUserError:!1},BAD_REQUEST_ERROR:{code:400,description:"Bad Request",isUserError:!1},NOT_AUTHORIZE_ERROR:{code:401,description:"Not Authorized",isUserError:!1},FORBIDDEN_ERROR:{code:403,description:"Forbidden",isUserError:!1},NOT_FOUND_ERROR:{code:404,description:"Not Found",isUserError:!1},ANALYSIS_FILE_NOT_FOUND:{code:412,description:"Analysis file not found",isUserError:!1},INTERNAL_ERROR:{code:500,description:"Encounter an internal error",isUserError:!1},CORE_ERROR:{code:501,description:"Core encountered an internal error",isUserError:!1},UPLOAD_ERROR:{code:600,description:"Not able to upload analysis file",isUserError:!1},NOT_ENOUGH_VARIATION:{code:700,description:"The value for the outcome column is constant in the dataset provided. Please provide variation in the outcome column and try again.",isUserError:!0,messageLabelKey:"notEnoughVariation"},NOT_ENOUGH_FEATURES:{code:701,description:"The dataset provided did not have strong enough features to create a story. No significant results were found.",isUserError:!0,messageLabelKey:"notEnoughFeatures"},NOT_ENOUGH_ROWS_FOR_PREDICTION:{code:702,description:"Einstein Discovery generated descriptive insights only. Predictive analysis requires at least 400 rows of data in your dataset.",isUserError:!0,messageLabelKey:"notEnoughRowsForPrediction"},BAD_MODEL:{code:703,description:"The model built does not meet Einstein Discoverys minimum quality criteria. This may be because not enough data was provided or because the data provided did not have a strong enough signal in it.",isUserError:!0,messageLabelKey:"badModel"}})},62547:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(88730);class s{constructor(e){this._json=e}getStories(){return this.getStoriesJson().map((e=>new i.Z(e)))}getUrl(){return this._json.url}getTotalSize(){return this._json.totalSize}getNextPageUrl(){return this._json.nextPageUrl||""}getStoriesJson(){return this._json.stories}getRawJson(){return this._json}}},88730:(e,t,r)=>{"use strict";r.d(t,{Z:()=>m});var i=r(83993),s=r(61506),n=r(18111),o=r(55430),a=r(40651),l=r(67951),u=r(15207),d=r(95552),c=r(56873),h=r(52699);class p{constructor(e){this._json=e}getId(){return this._json.id}getUrl(){return this._json.url}getCreatedDate(){return this._json.createdDate}}var g=r(2326);class m extends l{constructor(e){super(e)}toJSON(){return this._json}getType(){return a.Z.STORY}getId(){return this._json.id}getModelConfiguration(){return this._json.modelConfiguration}getRunId(){return this._json.runId}getStatus(){return this._status||(this._status=c.Z.fromCode(this._json.status))}getError(){return this._error||(this._error=g.Z.getEnumByCode(this._json.errorCode))}getOutcome(){return this._outcome||(this._outcome=d.Z.fromCode(this._json.outcome.type).buildOutcome(this._json.outcome)),this._outcome}getMessage(){return this._json.message||"Internal Server Error"}getLabel(){return this._json.label}getSourceType(){return this._sourceType||(this._sourceType=h.Z.fromCode(this._json.input.type))}getInput(){return this._json.input}getDatasetId(){return this._json.input?.dataset?.id}getUrl(){return this._json.url}getCreatedDate(){return this._createdDate||(this._createdDate=new Date(this._json.createdDate))}getCreatedBy(){return this._createdByUser||(this._json.createdBy?this._createdByUser=new u.Z(this._json.createdBy):null)}getLastModifiedDate(){return this._lastModifiedDate||(this._lastModifiedDate=new Date(this._json.lastModifiedDate))}getLastModifiedBy(){return this._lastModifiedByUser||(this._lastModifiedByUser=new u.Z(this._json.lastModifiedBy))}getDescription(){return"Story Asset"}getFullyQualifiedName(){return(0,i.Oz)(this.getName(),this.getNamespace())}getNamespace(){return this._json.namespace}isFromManagedPackage(){if(null!=this.getNamespace()){const e=s.Z.get(n).getOrgNamespace();return null==e||e!==this.getNamespace()}return!1}canView(){return!0}canModify(){return!0}canManage(){return!0}getFolderId(){return this.getFolder().getJson()?this.getFolder().getId():s.Z.get(n).getAppUser().getId()}getName(){return this.getLabel()}get(e){return this._json[e]}getIconUrl(){return o.getAssetIconUrl(this)}getCreatedById(){return this.getCreatedBy()?.getId()}getCreatedByName(){return this.getCreatedBy()?.getName()}getCreatedByPhotoUrl(){return o.getProfilePhotoUrl(this.get("createdBy"))}getLastModifiedName(){return this.getLastModifiedBy().getName()}getLastSuccessfulVersion(){return this._lastSuccessfulVersion||this._json.lastSuccessfulVersion&&(this._lastSuccessfulVersion=new p(this._json.lastSuccessfulVersion))}getFiles(){return[]}getPermissions(){return{view:!0}}getRefreshDate(){return 0}}},29882:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(8429);class s{constructor(e){this._json=e}getId(){return this._json.id}getCreatedDate(){return this._json.createdDate}toJSON(){return this._json}}var n=r(56873);class o extends s{constructor(e,t){super(e),this._versionName=i.Z.getLabel("StoryVersion","versionNumber",t)}getStatus(){if(!this._json.status)throw new Error("story status not found in the API response.");return n.Z.fromCode(this._json.status)}getLabel(){return null!=this._json.label?this._json.label:i.Z.getLabel("StoryVersion","addVersionDescription")}getVersionName(){return this._versionName}toJSON(){return{...super.toJSON(),versionName:this._versionName}}getCreatedDate(){return null!=this._json.createdDate?this._json.createdDate:""}}class a{constructor(e){this._json=e}getHistories(){const e=this.getHistoriesJson().length;return this.getHistoriesJson().map(((t,r)=>new o(t,e-r)))}getUrl(){return this._json.url}getTotalSize(){return this._json.totalSize}getNextPageUrl(){return this._json.nextPageUrl||""}getHistoriesJson(){return this._json.histories}getRawJson(){return this._json}}},86473:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var i=r(61506),s=r(22058),n=r(13132),o=r(79587),a=r(95812),l=r(45080);const u=new Set(["int"]),d=new Set(["string","url","textarea"]);class c{constructor(e){this._sObjectName=e}getXMD(){return this._xmdPromise||(this._xmdPromise=i.Z.get(s.Z).getSObject(this._sObjectName).then((e=>e.getFields().then((e=>{const t=[],r=[],i=[];for(const s of e)s.getType()===n.DATE||s.getType()===n.DATE_TIME?i.push(this._createDate(s)):u.has(s._metadata.type)?r.push(this._createMeasure(s)):d.has(s._metadata.type)||s._metadata.groupable?t.push(this._createDimension(s)):s._metadata.aggregatable&&r.push(this._createMeasure(s));return new o.Z({dimensions:t,measures:r,dates:i},l.Z.NEW)}))))),this._xmdPromise}_createDate(e){const t=e.getType()===n.DATE?a.ZP.DATE_ONLY:a.ZP.DATE_TIME;return{alias:e.getName(),firstDayOfWeek:-1,fiscalMonthOffset:0,fullyQualifiedName:e.getName(),label:e.getLabel(),showInExplorer:!0,type:t.getCode()}}_createDimension(e){return{conditionalFormatting:{},customActions:[],customActionsEnabled:!1,description:e.getName(),field:e.getName(),fullyQualifiedName:e.getName(),isMultiValue:!1,label:e.getLabel(),linkTemplateEnabled:!1,members:[],origin:"SObject",recordDisplayFields:[],salesforceActions:[],salesforceActionsEnabled:!1,showInExplorer:!0}}_createMeasure(e){return{description:e.getName(),field:e.getName(),format:{decimalDigits:0},fullyQualifiedName:e.getName(),label:e.getLabel(),origin:"SObject",showInExplorer:!0}}}},63024:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(40651),s=r(55430),n=r(67951),o=r(51308);class a extends n{constructor(e){super(e),this.id=e.id,this.folderSource=this._json.folderSource||this._json.folder?new o(this._json.folderSource||this._json.folder):null,this.createdDate=new Date(this._json.createdDate),this.lastModifiedDate=new Date(this._json.lastModifiedDate),this._json.icons?.templateBadge?.url?this.icon=new o(this._json.icons.templateBadge):this.icon=new o({url:"/WaveCommon/static/images/template/icons/default.png"})}getType(){return i.Z.TEMPLATE}getId(){return this.id}getDeveloperName(){return this._json.name}getName(){return this._json.label}getLabel(){return this._json.label}getTemplateType(){return this._json.templateType}getDescription(){return this._json.description}getIcon(){return this.icon}getIconUrl(){return s.getAssetIconUrl(this)}getFolderSource(){return this.folderSource}getCreatedDate(){return this.createdDate}getLastModifiedDate(){return this.lastModifiedDate}isPairedWithSourceApp(){return this.getFolderSource()?.getId()}}},54180:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486);const s=".";class n{constructor(e){this._assetExtendedMetadata=e}static getFullyFormedFieldName(e,t){return`${e}${s}${t}`}static getStepIdForField(e){const t=n._splitFieldId(e);if(t.length>1)return t[0];throw new Error(`Expected asset XMD field ID "${e}" to contain separator.`)}static getFieldNameForField(e){const t=n._splitFieldId(e)[0].length;return e.substr(t+1)}static isValidStepId(e){return!(0,i.includes)(e,s)}static _splitFieldId(e){return e.split(s)}getConditionalFormattingRulesForStep(e){const t=`${e}${s}`,r=new Map;for(const e of this._assetExtendedMetadata.getFields())(0,i.startsWith)(e.getName(),t)&&r.set(e.getName().substr(t.length),e);return this._assetExtendedMetadata.getConditionalFormattingRules(r)}getAllFieldsForStep(e){return this._assetExtendedMetadata.getFields().filter((t=>(0,i.startsWith)(t.getName(),`${e}${s}`)))}hasConditionalFormattingRuleDefinedForStep(e){return this._assetExtendedMetadata.getFields().some((t=>(0,i.startsWith)(t.getName(),`${e}${s}`)&&!(0,i.isEmpty)(t.getConditionalFormatting())))}}},75550:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{get connectName(){return this.name.toLowerCase()}}["Main","User","System","Asset"].forEach((e=>{s.add(e.toUpperCase(),e,new s)})),s.finish()},81693:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(69370),s=r(8429),n=r(84985),o=r(46194);class a extends i.Z{static getDefaultValue(){return a.BETWEEN}constructor({labelKey:e,displayTextKey:t,isRange:r,hasFieldTypeSpecificNaturalLanguage:i,hasNumValueSpecificNaturalLanguage:s,hasPastSpecificNaturalLanguage:n,arity:o,fieldTypes:a,fieldDataTypes:l}){super(),this._labelKey=e,this._displayTextKey=t,this._hasFieldTypeSpecificNaturalLanguage=i,this._hasNumValueSpecificNaturalLanguage=s,this._hasPastSpecificNaturalLanguage=n,this._isRange=r,this._arity=o,this._fieldTypes=a,this._fieldDataTypes=l}getCode(){return this.code}getLabel(){return s.Z.getLabel("FilterOperator",this._labelKey)}getDisplayText(){return s.Z.getLabel("InsightsSelector",this._displayTextKey)}getNaturalLanguageText(e,{numValues:t,isPastDateRange:r}){const i=[this._labelKey,this._hasFieldTypeSpecificNaturalLanguage&&e.getName(),this._hasNumValueSpecificNaturalLanguage&&(1===t?"singular":"plural"),e===n.Date&&this._hasPastSpecificNaturalLanguage&&(r?"past":"present")].filter(Boolean).join("_");return s.Z.getLabel("FilterOperatorNaturalLanguage",i)}isRange(){return this._isRange}arity(){return this._arity}getSupportedFieldTypes(){return this._fieldTypes}getSupportedFieldDataTypes(){return this._fieldDataTypes}}a.add("BETWEEN",">=<=",new a({labelKey:"operatorBetween",displayTextKey:"operator_between",isRange:!0,hasFieldTypeSpecificNaturalLanguage:!0,hasNumValueSpecificNaturalLanguage:!0,hasPastSpecificNaturalLanguage:!0,arity:2,fieldTypes:[n.Measure,n.Date],fieldDataTypes:[o.Z.NUMBER,o.Z.DATE_TIME]})).add("EQUALS","==",new a({labelKey:"operatorEquals",displayTextKey:"operator_equals",isRange:!0,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Measure],fieldDataTypes:[o.Z.NUMBER]})).add("NOT_EQUALS","!=",new a({labelKey:"operatorNotEquals",displayTextKey:"operator_not_equals",isRange:!0,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Measure],fieldDataTypes:[o.Z.NUMBER]})).add("LESS","<",new a({labelKey:"operatorLess",displayTextKey:"operator_less",isRange:!0,hasFieldTypeSpecificNaturalLanguage:!0,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Measure],fieldDataTypes:[o.Z.NUMBER]})).add("LESS_OR_EQUALS","<=",new a({labelKey:"operatorLessOrEqual",displayTextKey:"operator_less_equal",isRange:!0,hasFieldTypeSpecificNaturalLanguage:!0,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Measure,n.Date],fieldDataTypes:[o.Z.NUMBER,o.Z.DATE_TIME]})).add("GREATER",">",new a({labelKey:"operatorGreater",displayTextKey:"operator_greater",isRange:!0,hasFieldTypeSpecificNaturalLanguage:!0,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Measure],fieldDataTypes:[o.Z.NUMBER]})).add("GREATER_OR_EQUALS",">=",new a({labelKey:"operatorGreaterOrEqual",displayTextKey:"operator_greater_equal",isRange:!0,hasFieldTypeSpecificNaturalLanguage:!0,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Measure,n.Date],fieldDataTypes:[o.Z.NUMBER,o.Z.DATE_TIME]})).add("IN","in",new a({labelKey:"operatorIn",displayTextKey:"operator_equals",isRange:!1,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1/0,fieldTypes:[n.Dimension],fieldDataTypes:[o.Z.STRING]})).add("NOT_IN","not in",new a({labelKey:"operatorNotIn",displayTextKey:"operator_not_equals",isRange:!1,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1/0,fieldTypes:[n.Dimension],fieldDataTypes:[o.Z.STRING]})).add("MATCHES","matches",new a({labelKey:"operatorMatches",displayTextKey:"operator_contains",isRange:!1,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Dimension],fieldDataTypes:[o.Z.STRING]})).add("IS_NULL","isnull",new a({labelKey:"operatorIsNull",displayTextKey:"operator_is_null",isRange:!1,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:0,fieldTypes:[n.Measure,n.Dimension],fieldDataTypes:[o.Z.NUMBER,o.Z.STRING]})).add("IS_NOT_NULL","isnotnull",new a({labelKey:"operatorIsNotNull",displayTextKey:"operator_is_not_null",isRange:!1,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:0,fieldTypes:[n.Measure,n.Dimension],fieldDataTypes:[o.Z.NUMBER,o.Z.STRING]})).add("NOT_CONTAINS","not contains",new a({labelKey:"operatorNotContains",displayTextKey:"operator_not_contains",isRange:!1,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Dimension],fieldDataTypes:[o.Z.STRING]})).add("STARTS_WITH","starts with",new a({labelKey:"operatorStartsWith",displayTextKey:"operator_starts_with",isRange:!1,hasFieldTypeSpecificNaturalLanguage:!1,hasNumValueSpecificNaturalLanguage:!1,hasPastSpecificNaturalLanguage:!1,arity:1,fieldTypes:[n.Dimension],fieldDataTypes:[o.Z.STRING]}))},99212:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(96486),s=r(90554),n=r(62133),o=r(39554);const a=[["count","*"]];class l{static getColumnRef(e,t){if(t&&t.name)return t.name;if(e<26)return String.fromCharCode(65+e);{const t=e/26-1,r=e%26;return String.fromCharCode(65+t)+String.fromCharCode(65+r)}}static getColumnIndex(e="",t){if("string"==typeof e){if(l._isColumnRefInAtoZ(e))return e.charCodeAt(0)-65;if(l._isColumnRefInAAtoZZ(e))return 26*(e.charCodeAt(0)-64)+(e.charCodeAt(1)-65)}return(0,i.findIndex)(t,["name",e])}static getMeasuresForProjection(e){if(!e)return[];return e.map((function(e,t){if(!e.query||!e.query.measures)return;const{measures:r}=e.query,i=Array.isArray(r[0])?r[0].slice():[void 0,void 0];return i[2]=l.getColumnRef(t),i})).filter((e=>null!=e))}static measureNameFromQueryColumn(e,t){if(e){if(e.header)return e.header;{const{query:r}=e;if(r.formula){if(null!=e.name){const r=t.getField(e.name);return r&&r.isDerived()&&r.getLabel()?r.getLabel():e.name}return r.formula}return n.fullAggFctAndMeasureText(t,r.measures&&r.measures[0])}}}static cleanseColumnQuery(e){const{aggregateFilters:t,measures:r}=e;if(null!=t&&t.length>0&&null!=r&&r.length>0){const e=r[0];for(let r=0;r<t.length;r++){const s=t[r];if(!(0,i.isEqual)(s[0],e)){t.splice(r,1);break}}}o.cleanseQuery(e)}static makeColumnQueryWithDefaultMeasure(e){const t={};return t.measures=a,t.filters=e.filters,t.booleanFilterLogic=e.booleanFilterLogic,l.makeColumnQuery(t)}static makeColumnQuery(e){let t,r,i;if(null!=e.columns)return e;null!=e.order&&(t=e.order[0],r=t[0]===o.ORDERBY_MEASURE_TOKEN?0:o.getMeasureIndexFromName(t[0],e),i=r>-1);const n=(()=>{if(!e.measures||!e.measures.length)return[];const i=[];for(let n=0;n<e.measures.length;n++){const a=(0,s.deepCopy)(e);delete a.filters,delete a.booleanFilterLogic,a.measures=(a.measures||[]).slice(n,n+1),null!=t&&(r===n?a.order[0][0]=o.ORDERBY_MEASURE_TOKEN:delete a.order),l.cleanseColumnQuery(a),i.push({query:a})}return i})(),a={columns:n},u=l.getMeasuresForProjection(n);return u&&(a.measures=u),n[0].query.groups&&(a.groups=n[0].query.groups),e.filters&&(a.filters=e.filters,e.booleanFilterLogic&&(a.booleanFilterLogic=e.booleanFilterLogic)),e.order&&!i&&(a.order=e.order),a}static canCollapseColumns(e){const t={},r={},s={},n=e.columns||[];if(e.measures&&e.measures.length!==n.length)return!1;if(null!=e.timeSeries)return!1;for(let e=0;e<n.length;e++){const o=n[e];if(!0===o.showBars)return!1;if(!(0,i.isEmpty)(o.name))return!1;if(!(0,i.isEmpty)(o.header))return!1;if(!(0,i.isEmpty)(o.query.formula))return!1;if(o.query.order&&o.query.order.length&&o.query.order[0]&&o.query.order[0][1]&&!0===o.query.order[0][1].inner)return!1;if((0,i.isEmpty)(o.query.filters)){if(!(0,i.isEmpty)(t))return!1}else{const r=JSON.stringify(o.query.filters);if((0,i.isEmpty)(t)){if(e>0)return!1;t[r]=!0}else if(!t[r])return!1}if(o.query.aggregateFilters)for(const e of o.query.aggregateFilters){const t=JSON.stringify(e[0]),r=JSON.stringify(e);if(s[t]){if(r!==s[t])return!1}else s[t]=r}const a=JSON.stringify(o);if(r[a])return!1;r[a]=!0}return!0}static _isColumnRefInAtoZ(e){return 1===e.length&&e>="A"&&e<="Z"}static _isColumnRefInAAtoZZ(e){return 2===e.length&&e[0]>="A"&&e[0]<="Z"&&e[1]>="A"&&e[1]<="Z"}static isMultiQuery(e){return"string"!=typeof e&&(null!=e.sources||null!=e.columns)}}},87670:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(69370);class s extends i.Z{}},61915:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(69370),s=r(8429);class n extends i.Z{constructor(e,t,r,i,s,n,o=!1,a=!1){super(),this.type=e,this.outputDataTypes=t,this.example=i,this.caretPosition=s,this.insertText=n,this.hasWithinGroup=o,this.isNewDateVersionFunction=a,this._descriptionLabel=r}getDescription(){return s.Z.getLabel("SaqlFunctionDescription",this._descriptionLabel)}}},70999:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(96486);class s{constructor(e,t=!1,r=void 0,i=void 0){this._resultData=e,this._wasCached=t,this._responseTime=r,this._responseId=i}getData(){return this._resultData}wasCached(){return this._wasCached}getResponseTime(){return this._responseTime}getResponseId(){return this._responseId}serialize(){return JSON.stringify((0,i.omitBy)(this._getJson(),(e=>null==e)))}_getJson(){return{}}}},72977:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getColumnMapping:()=>g,performQuery:()=>c});var i=r(61506),s=r(72236),n=r(74850),o=r(16045),a=r(67737),l=r(70999),u=r(42652),d=r(78190);async function c(e,t,r=[]){const a=new u.Z,d=t?.getRequestLoggingContext(a.getQueryLoggingIdentifier(),r);return d&&d.tags.length>0&&i.Z.get(o.Z).trigger(new n.Z(d.appContext.appInstanceId,d.requestName,r)),new l.Z(function(e){if(!e)return[];const t=[];for(const r of e){for(const e of Object.keys(r))h(r,e);t.push(r)}return t}(await i.Z.get(s.Z).getRecordsRaw(e,{loggingContext:d})))}function h(e,t){const r=e[t];if(r&&"object"==typeof r){Object.prototype.hasOwnProperty.call(e,"attributes")&&delete e.attributes;for(const e of Object.keys(r))h(r,e);for(const[i,s]of Object.entries(r)){const r=t+"."+i;if(Object.prototype.hasOwnProperty.call(e,r))throw Error(`Flattened key '${r}' already exists.`);e[r]=s}delete e[t]}}const p=["expr0","expr1"];function g(e,t,r){return r?new l.Z(t.map((e=>Object.keys(e).reduce(((t,r)=>(r===p[0]?t.min=(0,a.qb)(e[r])||(0,a._J)(e[r])?(0,a.Qc)(e[r]):e[r]:r===p[1]?t.max=(0,a.qb)(e[r])||(0,a._J)(e[r])?(0,a.Qc)(e[r]):e[r]:t[r]=e[r],t)),{})))):new l.Z(t.map((t=>{const r={};for(const i in t)if(Object.hasOwnProperty.call(t,i)){const s=t[i];if(i.startsWith("expr")){const t=parseInt(i.substring(4));if(e.sources){const i=(0,d.makeImmutableQuery)(e).getSource(0).getColumn(t);if(!i)throw new Error("Compact form contains an invalid number of columns.");r[i.name]=s}else{if(!e.measures||!e.measures[t])throw new Error("Compact form must have measures and aggregate measure must be a string tuple.");const i=e.measures[t][0];if("count"===i)r.count=s;else{const n=e.measures[t][1];if(Array.isArray(n))throw new Error("Aggregate measure must be a string tuple.");r[i+"_"+n]=s}}}else r[i]=s}return r})))}},82389:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(61818);class s{constructor(e){this._extendedMetadata=e}cleanse(e){if("string"==typeof e)return e;let[t,r,s]=e;Array.isArray(r)&&1===r.length&&(r=r[0]);const[n,o]=i.unwrapDimOrMea(r);return"*"===o?(null==s&&(s=i.wrapDimOrMea("count",n)),["count",i.wrapDimOrMea("",n),s]):("count"===t&&this._extendedMetadata.isDimension(r)&&(t="unique"),null==s&&(s=t+"_"+r),[t,r,s])}}},28357:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(96486),s=r(27223),n=r(57244),o=r(66553),a=r(82389),l=r(8392),u=r(39554),d=r(62133),c=r(61818),h=r(33524);class p{static DEFAULT_MEASURE=[["count","*"]];static GROUPING_COLUMN_PREFIX="grouping_";constructor(e,t,r){this._edgemarts=e,this._extendedMetadata=t,this._nullsOrder=r,this._currentEdgemart=this._edgemarts[0]}build(){return s.checkImplemented()}setGlobalFilters(e){return this._globalFilters=e,this}setTotals(e){return this._isTotals=e,this}setSubtotals(e){return this._isSubtotals=e,this}setRowTotals(e){return this._isRowTotals=e,this}setColumnTotals(e){return this._isColumnTotals=e,this}setRowLimit(e){return this}getQueryObject(){return{}}getCurrentEdgemart(){return this._currentEdgemart}_applyFiltersToPigql(e,t){const r=new o.Z(this._extendedMetadata).build(t);let i=e;for(let[e,t]of r)e||(e=this.getCurrentEdgemart().getAlias()),i=u.filterLoads(i,e,[t]);return i}_buildGroupsProjection(e){const t=new Set;for(const r of e)if(null!=this._extendedMetadata.getDateTimeFieldGrain(r)){const e=this._extendedMetadata.getDateTimeFieldGrain(r);t.add(`${e.getProjection()} as ${c.getAlias(e.getAlias())}`)}else if(this._extendedMetadata.isDateDimension(r)){const e=h.fieldName(new l.Z(this._extendedMetadata).determine(r));t.add(`${e} as ${e}`)}else t.add(`${c.getProj(r)} as ${c.getAlias(r)}`);return Array.from(t.values())}_buildGroupingFunctionsProjection(e){const t=new Set;for(const r of e)if(null!=this._extendedMetadata.getDateTimeFieldGrain(r)){const e=this._extendedMetadata.getDateTimeFieldGrain(r);t.add(this._buildGroupingProjectionExpr(e.getProjection(),r))}else if(Array.isArray(r))for(const e of r){const r=this._extendedMetadata.getDateTimeFieldGrain(e);t.add(this._buildGroupingProjectionExpr(r.getProjection(),e))}else t.add(this._buildGroupingProjectionExpr(c.getProj(r),r));return Array.from(t.values())}_buildMeaProjection(e){const t=[];if(e)for(const r of e){const e=this._extendedMetadata.getDateTimeFieldGrain(r[1]);if(null!=e)t.push(`${r[0]}(${e.getProjection()}) as '${r[0]}_${e.getColumnName()}'`);else{const[e,i,s]=new a.Z(this._extendedMetadata).cleanse(r),n=c.getProj(i),o=c.getAlias(s);t.push(`${e}(${n}) as ${o}`)}}return t}_buildGroupClause(e){const t=new Set;if(e)for(let r of e)if(null!=this._extendedMetadata.getDateTimeFieldGrain(r)){const e=this._extendedMetadata.getDateTimeFieldGrain(r).getProjection();t.has(e)||t.add(e)}else{const e=c.getGroupingDim(r);if(Array.isArray(e))for(r of e)t.has(r)||t.add(r);else t.has(e)||t.add(e)}const r=Array.from(t);return 1===r.length?r[0]:`(${r.join(", ")})`}_formatExtraFiltersForSearch(e,t=!0,r="q"){if(!e)return"";let s=e;return(0,i.isObject)(s)&&!Array.isArray(s)&&(s=d.convertFilterMapToArray(s)),Array.isArray(s)&&(s=new o.Z(this._extendedMetadata).build(s),s=s.map((e=>e[1])).join(" && ")),t&&(null!=s?s.length:-1)>0?`${r} = filter ${r} by ${s};`:s}_emUrlForAlias(e){if(""===e)return this.getCurrentEdgemart().getReference();for(const t of this._edgemarts)if(t.getAlias()===e)return t.getReference();throw new Error(`Unable to find dataset URL for alias ${e}`)}_joinStatements(e){return e.filter((e=>e)).join("\n")}_buildNullsOrderExpr(e=!1){return this._nullsOrder?` nulls ${this._nullsOrder}`:e?" nulls last":""}_buildGroupingProjectionExpr(e,t){return`grouping(${e}) as '${this._getGroupingColumnName(t)}'`}_buildGroupingFilterExpr(e,t,r){return e.map((e=>`'${this._getGroupingColumnName(e)}' == ${t}`)).join(` ${r} `)}_getGroupingColumnName(e){return`${p.GROUPING_COLUMN_PREFIX}${this._getGroupName(e)}`}_getGroupName(e){const t=this._extendedMetadata.getDateTimeFieldGrain(e);return t?t.getAlias():String(e)}_flattenGroups(e){return e.reduce(((e,t)=>(!Array.isArray(t)||this._extendedMetadata.getDateTimeFieldGrain(t)?e.push(t):e.push.apply(e,t),e)),[])}_addLimitStatementForSummaryIfNeeded(e,t,r){!n.Z.has(n.Z.WAVE_QUERY_RESERVED_11)&&r>=1e4&&e.push(`${t} = limit ${t} ${r+1};`)}}},98818:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._serializer=e}traverse(e){if(e.isLeaf())return this._serializer.serializeLeaf(e.value);if(e.isUnaryOperator()){const t=this.traverse(e.children[0]);return this._serializer.serializeUnaryOperation(e.value,t)}{const t=e.children.map((e=>this.traverse(e)));return this._serializer.serializeBooleanOperation(e.value,t,e.parentheses)}}}},78190:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AGGREGATION_ALIAS:()=>c,ALIAS_JOIN:()=>h,DEFAULT_MEASURE:()=>p,MAX_ALIAS:()=>d,MIN_ALIAS:()=>u,buildAggMinMaxQueries:()=>v,buildDefaultQuery:()=>w,buildDimValuesQuery:()=>R,buildMinMaxQuery:()=>I,makeColumnJson:()=>b,makeDerivedSourceJson:()=>y,makeFormulaColumnJson:()=>C,makeImmutableQuery:()=>g,makeJoinJson:()=>E,makeJoinObjectJson:()=>S,makeMutableQuery:()=>m,makeOrderJson:()=>T,makeQueryJson:()=>_,makeSourceJson:()=>f});var i=r(96486),s=r(76162),n=r(32024),o=r(70706),a=r(80600),l=r(59958);const u="A",d="B",c="A",h="_",p=["count","*"];function g(e){if(e.sources)return e.sources[0].joins.length>0?new l.ZP(e):new a.Z(e);throw new Error("Cannot make immutable query")}function m(e){if(e.sources)return e.sources[0].joins.length>0?new l.ZP(e,!0):new a.Z(e,!0);throw new Error("Cannot make mutable query")}function _({sources:e,sourceFilters:t={},aggregateFilters:r=[],orders:i=[],limit:s,rowTotals:n=[],columnTotals:o=[],columnGroups:a=[]}={}){const l={sources:e,sourceFilters:t,aggregateFilters:r,orders:i,rowTotals:n,columnTotals:o,columnGroups:a};return null!=s&&(l.limit=s),l}function f(e,t=[],r=[a.U],i=[],s,n=[]){const o={columns:t,groups:r,filters:i,joins:n};return e&&(o.name=e),s&&(o.cogroupType=s.getCode()),o}function y(e){return{columns:e,groups:[],filters:[],joins:[]}}function b(e,t=["count","*"]){return{name:e,field:t}}function C(e,t="A + 1"){return{name:e,formula:t}}function E(e,t,r,i,s,n=o.Z.LEFT){return{source:S(e,t),target:S(r,i,s),type:n.code}}function S(e,t,r){const i={name:e,fields:t};return r&&(i.alias=r),i}function T(e,t=!0,r=[],i){return i?{name:e,ascending:t,filters:r,nulls:i}:{name:e,ascending:t,filters:r}}function I({field:e,assetMetadata:t,sourceFilterMap:r,joins:i=[]}){const n=_({sources:[f(t.getFullyQualifiedName(),[b(u,["min",e]),b(d,["max",e])],[a.U],[],void 0,i)],limit:1});return r&&s.addFiltersToQuery(n,r),n}function v({field:e,groups:t,assetMetadata:r,joins:o=[],sourceFilterMap:a,sourceFilterKey:l}){const u=r.getFullyQualifiedName(),d=_({sources:[f((0,i.isEmpty)(o)?u:void 0,[b(c,e)],t,[],void 0,o)],limit:1,orders:[{name:c,ascending:!0,filters:[]}]}),h=_({sources:[f((0,i.isEmpty)(o)?u:void 0,[b(c,e)],t,[],void 0,o)],limit:1,orders:[{name:c,ascending:!1,filters:[]}]}),p=l??u;if("count"!==e[0]){const t={[p]:{filters:[[e[1],[],n.Z.IS_NOT_NULL.code]]}};s.addFiltersToQuery(d,t),s.addFiltersToQuery(h,t)}return a&&(s.addFiltersToQuery(d,a),s.addFiltersToQuery(h,a)),[d,h]}function R({dimension:e,searchTerm:t,extMeta:r,sourceName:n,limit:o,sourceFilterMap:a,joins:l=[],sourceFilterKey:u=n}){const d={};(0,i.isEmpty)(t)||(d[u]={filters:[[e,[t],"matches"]]});const c=r.getDateTimeFieldGrainByColumnName(e),h=_({sources:[f(n,[],[c?c.getName():e],[],void 0,l)],sourceFilters:d,limit:o});return a&&s.addFiltersToQuery(h,a),h}function w(e,t,r=[]){return _({sources:[f(e,[b("A",p)],[a.U],[],null,r)],limit:t})}},8392:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._extendedMetadata=e}determine(e){const t=this._extendedMetadata.getFieldInfo(e);return t.getFullFieldName&&t.getFullFieldName()?t.getFullFieldName():e}}},94716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var i=r(63319),s=r(96486),n=r(74978),o=r(39554),a=r(67737),l=r(76093),u=r(40834),d=r(69370);class c extends d.Z{getCode(){return this.code}}c.add("COUNT","count",new c).add("SUM","sum",new c).add("AVERAGE","avg",new c).add("MINIMUM","min",new c).add("MAXIMUM","max",new c).add("COUNT_DISTINCT","unique",new c).finish();var h=r(42652);const p=[["count","*"]];class g{constructor(e,t,r){this._measures=e.measures||p,this._groups=e.groups||[],this._filters=e.filters||[],this._aggFilters=e.aggregateFilters||[],this._booleanFilterLogic=e.booleanFilterLogic,this._order=e.order||[],this._values=e.values||[],this._limit=e.limit,this._offset=e.offset,this._sObject=t,this._extendedMetadata=r}setTotals(e){return this}setSubtotals(e){return this}setRowTotals(e){return this}setColumnTotals(e){return this}setRowLimit(e){return this}build(){const e=[],t=new u.Z(this._extendedMetadata),r=this._groups&&this._groups.length?this._buildGroupSelects(this._groups):[],i=this._buildAggregations(this._measures),n=this._values&&this._values.length?this._values.join(", "):r.concat(i).join(", ");if(e.push(`SELECT ${n} FROM ${this._sObject}`),!(0,s.isEmpty)(this._filters)){const r=t.buildFilter(this._filters,this._booleanFilterLogic);e.push(`WHERE ${r}`)}if(!(0,s.isEmpty)(this._groups)){const t=this._buildGroupByClause(this._groups);e.push(`GROUP BY ${t}`)}if(!(0,s.isEmpty)(this._aggFilters)){const r=t.buildAggregateFilter(this._aggFilters);e.push(`HAVING ${r}`)}if((0,s.isEmpty)(this._order)){if(this._groups&&this._groups.length){const t=this._buildDefaultOrderByClause(this._groups);t&&e.push(`ORDER BY ${t}`)}}else{const t=this._buildOrderByClause(this._order);e.push(`ORDER BY ${t}`)}if(!(0,s.isEmpty)(this._groups)||!(0,s.isEmpty)(this._values)){const t=this._buildLimitClause(this._limit);e.push(`LIMIT ${t}`)}return this._offset&&e.push(`OFFSET ${this._offset}`),e.join(" ")}_buildGroupSelects(e){return e.map((e=>Array.isArray(e)?(0,a.Ex)([e[0],e[1]],!0):e))}_buildAggregations(e){const t=[];for(const r of e)t.push((0,l.gM)(r));return t}_buildGroupByClause(e){return e.map((e=>(0,a.y2)(e)?(0,a.Ex)([e[0],e[1]]):e)).join(", ")}_buildOrderByClause(e){const t=[];for(let[r,i]of e){if(r===o.ORDERBY_MEASURE_TOKEN){const e=this._measures[0];r=(0,l.gM)(e)}else if(Array.isArray(r))r=(0,a.Ex)([r[0],r[1]]);else if(this._isAggregation(r.toString()))if("count"===r)r="COUNT(Id)";else if("string"==typeof r){const e=r.indexOf("_"),t=r.substring(0,e),i=r.substring(e+1,r.length);r=(0,l.gM)([t,i])}const e=i.ascending?"ASC":"DESC";t.push(`${r} ${e}`)}return t.join(", ")}_buildDefaultOrderByClause(e){const t=new Set;for(const r of e){const e=Array.isArray(r)?(0,a.Ex)([r[0],r[1]]):r;t.add(`${e} ASC`)}const r=Array.from(t.values());if(r.length){return 1===r.length?r[0]:`${r.join(", ")}`}}_buildLimitClause(e){const t=new h.Z;return e&&e>0?e:this._values&&this._values.length?t.getDefaultValuesQueryLimit():t.getDefaultGroupQueryLimit()}_isAggregation(e){if(e===c.COUNT.getCode())return!0;if(e&&"string"==typeof e&&(0,n.contains)(e,"_")){const t=e.split("_")[0];return c.hasCode(t)}return!1}}var m=r(78444),_=r(46820),f=r(40651),y=r(94052),b=r(78190),C=r(97108),E=r(92425),S=r(37522);class T{static make(e,t,r,s){switch(t){case f.Z.SOBJECT:return e.sources?new m.Z((0,b.makeImmutableQuery)(e),s[0]):new g(e,r[0].getName(),s[0]);case f.Z.DATASET:if(r[0].getDatasetType()===C.Z.LIVE){if(e.sources){const t=S.Z.fromCode(r[0].getLiveConnection().connectionType),i=(0,b.makeImmutableQuery)(e);return _.Z.make(t.sqlType,i,s[0])}throw new Error("Invalid compact form version")}return e.sources?new i.ZP((0,b.makeImmutableQuery)(e),r,s):y.Z.make(e,r,s[0]);case f.Z.CDP_OBJECT:{const t=(0,b.makeImmutableQuery)(e);return _.Z.make(E.Z.CDP,t,s[0])}default:throw new Error("Invalid asset type for query building")}}}},74706:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(49655),s=r(8429),n=r(27223),o=r(5033);class a{_columns=new Map;constructor(e,t){this._query=e,this._formulaParser=t,this._initializeColumnMap();const{graphs:r,parsedFormulas:i}=this._buildFormulaDependencyGraphs();this._graphs=r,this._parsedFormulas=i}expandFormula(e,t){let r=e;for(const e of this._graphs){const i=e.getTopologicalOrder();if(!i)throw new Error("Expected topological sort order to exist.");const s=i.map((e=>e.getId()));if(!s.includes(t))continue;const n=s.indexOf(t),o=i.slice(n);for(const e of o){const t=this._getValueForReplacing(e),i=new RegExp(`'?\\b${e.getId()}\\b'?`,"g");r=r.replace(i,t)}}return r.trim()}hasWindowFunction(){return Array.from(this._parsedFormulas.values()).some((e=>e.hasWindowFunction()))}_buildFormulaDependencyGraphs(){const e=new i.Z,t=this._formulaParser,r=new Map;for(const[t,r]of this._columns)r.formula?e.addNode(t,r.formula):e.addNode(t,t);const n=Array.from(this._columns.keys());for(const[i,s]of this._columns)if(s.formula){const o=t.parse(s.formula);r.set(i,o);for(const t of o.getInputs())n.includes(t)&&e.hasNode(t)&&e.addEdge(i,t)}const a=e.getGraphs();for(const e of a)if(!e.isAcyclic()){const t=e.getNodes().map((e=>e.getId()));throw new o(s.Z.getLabel("FormulaError","circularReferenceError",t.join(", ")))}return{graphs:a,parsedFormulas:r}}_initializeColumnMap(){return n.checkImplemented()}_getValueForReplacing(e){return n.checkImplemented()}}},66553:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var i=r(96486),s=r(74978),n=r(8429),o=r(57244),a=r(72713),l=r(10647),u=r(61818),d=r(45080),c=r(14201),h=r(89827),p=r(33524),g=r(62133),m=r(82389),_=r(8392),f=r(98818),y=r(85829),b=r(81693);class C{constructor(e){this._extendedMetadata=e}build(e){return e?e.map((e=>this._analyzeFilter(e))).filter((([,e])=>e.length)):[]}buildSaqlFilterStatements(e,t,r="q"){const i=[],s=this.build(e);if(t){const e=this.buildBooleanFilterLogicClause(t,s);i.push(`${r} = filter ${r} by ${e};`)}else for(const[,e]of s)i.push(`${r} = filter ${r} by ${e};`);return i}buildDiscreteFilter(e,t,r){if(null!=r&&!h.DimOperatorEnum.hasEnumByValue(r))throw new Error(n.Z.getLabel("ErrorMsg","invalidOperatorForDim",r));const s=u.getGroupingDim(t),a=e.slice(),l=(0,i.remove)(a,(e=>null==e));switch(r){case h.DimOperatorEnum.operator_is_null.getValue():return`${s} is null`;case h.DimOperatorEnum.operator_is_not_null.getValue():return`${s} is not null`;case h.DimOperatorEnum.operator_starts_with.getValue():if(1===a.length&&"string"==typeof a[0]){return`${s} like "${a[0]+"%"}"`}return"";case h.DimOperatorEnum.operator_equals.getValue():if(a.length){const e=1===a.length?`${s} == ${p.joinDimsWithQuoting(a)}`:`${s} in [${p.joinDimsWithQuoting(a)}]`;return l.length?`(${e} || ${s} is null)`:e}return l.length?`${s} is null`:void 0;case h.DimOperatorEnum.operator_not_equals.getValue():if(a.length){const e=1!==a.length||o.Z.has(o.Z.ORG_HAS_WAVE_NULL_DIMENSIONS_SAQL_ENABLED)&&this._extendedMetadata.getField(t).isMultiValue()?`!(${s} in [${p.joinDimsWithQuoting(a)}])`:`${s} != ${p.joinDimsWithQuoting(a)}`;return l.length?`(${e} && ${s} is not null)`:`(${e} || ${s} is null)`}return l.length?`${s} is not null`:void 0;case h.DimOperatorEnum.operator_contains.getValue():if(1===a.length)return`${s} ${r} ${p.joinDimsWithQuoting(a)}`;if(0===a.length)return;throw new Error(n.Z.getLabel("ErrorMsg","invalidContainsOperation"));default:return}}buildMeasureFilter(e,t,r){if(null!=r&&!h.MeaOperatorEnum.hasEnumByValue(r))throw new Error(n.Z.getLabel("ErrorMsg","invalidOperatorForMea",r));if(!this._isNullOperator(r)&&((0,i.isEmpty)(t)||t.some((e=>null==e))))return null;if(h.MeaOperatorEnum.operator_between.getValue()===r){if(2!==t.length)throw new Error(n.Z.getLabel("ErrorMsg","invalidBetweenOperation"));return`${e} >= ${this._serializeValue(t[0])} && ${e} <= ${this._serializeValue(t[1])}`}if(h.MeaOperatorEnum.operator_is_null.getValue()===r)return`${e} is null`;if(h.MeaOperatorEnum.operator_is_not_null.getValue()===r)return`${e} is not null`;if(1!==t.length)throw new Error(n.Z.getLabel("ErrorMsg","invalidOperation",r));return`${e} ${r} ${this._serializeValue(t[0])}`}buildAggregateFilters(e){return e.map((e=>this._analyzeAggregateFilter(e))).filter((e=>{const[,t]=e;return t.length>0}))}buildBooleanFilterLogicClause(e,t){const r=new c.ZP(null,!1);if(r.validate(e,t.length),r.error)throw new Error(r.error);return new f.Z(new y.Z(t)).traverse(r.getTree())}_analyzeFilter(e){let t=e[0],r=e[1],s=e[2];const o=e.length>3&&e[3];if(Array.isArray(t)&&this._extendedMetadata.getDateVersion()===d.Z.LEGACY&&(t=(0,i.flatten)(t)),!t)return[void 0,""];const c=[],m=this._extendedMetadata.getDateTimeFieldGrain(t),f=a.isCompoundStr(t),y=a.isCompoundDim(t);if(r){let e;if(o){let i=[];for(e of t)a.isCompoundStr(e)?i=i.concat(a.compoundStrToCompoundDim(e)):i.push(e);const n=i.map((e=>this.buildDiscreteFilter(r,e,s)));c.push(`(${n.join(" || ")})`)}else if(null==m||m.isLegacy())if(this._isCompoundWithDateTimeGrains(t))c.push(this._buildFilterClauseForCompoundWithDateTimeGrains(t,r));else if(!y&&!f||r.length&&!a.isCompoundFilters(r)){Array.isArray(t)&&(t=t[0]);let e=u.quoteDimNameForGroup(t);if("all"!==r&&(null!==(C=r).value&&(!Array.isArray(C)||C.length||s===b.Z.IS_NULL.getCode()||s===b.Z.IS_NOT_NULL.getCode()))){Array.isArray(r)||(r=[r]);const{discretes:i,ranges:n,relativeDates:o}=g.splitFilterValues(r,t,this._extendedMetadata);if(i.length)null==s&&(s=h.DimOperatorEnum.operator_equals.getValue()),h.DimOperatorEnum.hasEnumByValue(s)&&c.push(this.buildDiscreteFilter(i,t,s));else if("date"===i.type){const e=i.value,{pigql:r}=g.getDateRepInfo(this._extendedMetadata,t,e);c.push(r)}else s!==b.Z.IS_NULL.code&&s!==b.Z.IS_NOT_NULL.code||!this._extendedMetadata.isDimension(t)&&!this._extendedMetadata.isDateDimension(t)||(this._extendedMetadata.isDateDimension(t)&&(e=p.fieldName(new _.Z(this._extendedMetadata).determine(t))),c.push(this.buildDiscreteFilter(i,t,s)));for(let r of n)if(this._extendedMetadata.isDateDimension(t))c.push(this._buildAbsoluteDateRangeFilterClause(t,r,s));else{s||([r,s]=l.calculateRangeOperator(r));const t=this.buildMeasureFilter(e,r,s);t&&c.push(t)}if(o.length>0)for(const e of o)c.push(this._buildRelativeDateRangeFilterClause(t,e))}}else{if(s&&s!==h.DimOperatorEnum.operator_equals.getValue())throw new Error(n.Z.getLabel("ErrorMsg","invalidOperatorForCompound"));if(Array.isArray(t)){const r=[];for(e of t)a.isCompoundStr(e)?r.push.apply(r,a.compoundStrToCompoundDim(e)):r.push(e);t=r}else f&&(t=a.compoundStrToCompoundDim(t));if(r=Array.isArray(r)?r.map((e=>{if(a.isCompoundStr(e))return a.compoundStrToCompoundDim(e);if(Array.isArray(e)){const t=[];for(const r of e)a.isCompoundStr(r)?t.push.apply(t,a.compoundStrToCompoundDim(r)):t.push(r);return t}return e})):r,!r.length)return[void 0,""];const i=Array.from(r).map((e=>a.getCompoundFilter(t,e)));c.push(`(${i.join(" || ")})`)}else Array.isArray(r)||(r=[r]),c.push(r.map((e=>`${this._buildFilterClauseForDateTimeGrain(m,e)}`)).join(" || "))}var C;const[E]=u.unwrapDimOrMea(t,this._extendedMetadata);return[E,c.join(" && ")]}_buildFilterClauseForCompoundWithDateTimeGrains(e,t){return t.map((t=>`(${e.map(((e,r)=>{let i;const s=this._extendedMetadata.getDateTimeFieldGrain(e);return i=Array.isArray(t)?t[r]:t,null!=s?this._buildFilterClauseForDateTimeGrain(s,i):`${u.quoteDimName(e)} == ${this._serializeValue(i)}`})).join(" && ")})`)).join(" || ")}_buildFilterClauseForDateTimeGrain(e,t){return`${e.getProjection()} == ${t}`}_isCompoundWithDateTimeGrains(e){return Array.isArray(e)&&null!=e.find((e=>{const t=this._extendedMetadata.getDateTimeFieldGrain(e);return null!=t&&!t.isLegacy()}))}_buildRelativeDateRangeFilterClause(e,t){if(this._isLegacyDate(e))return g.getDateRepInfo(this._extendedMetadata,e,t).pigql;{const r=t.map((e=>p.relativeDateString(e))).join("..");return`${p.fieldName(new _.Z(this._extendedMetadata).determine(e))} in [${r}]`}}_buildAbsoluteDateRangeFilterClause(e,t,r){if(!t.length)throw new Error(n.Z.getLabel("ErrorMsg","invalidDateRange"));if(this._isLegacyDate(e))return g.getDateRepInfo(this._extendedMetadata,e,t,r).pigql;return`${p.fieldName(new _.Z(this._extendedMetadata).determine(e))} in ${this._buildAbsoluteDateTimeRange(t,r)}`}_buildAbsoluteDateTimeRange(e,t){if(!e[0]&&!e[1])throw new Error(n.Z.getLabel("ErrorMsg","invalidDateRange"));return t===b.Z.LESS_OR_EQUALS.code||null==e[0]?`[.."${null!=e[1]?e[1]:e[0]}"]`:t===b.Z.GREATER_OR_EQUALS.code||null==e[1]?`["${e[0]}"..]`:`["${e[0]}".."${e[1]}"]`}_analyzeAggregateFilter(e){const t=e[0];let r,n=e[1],o=e[2];if(Array.isArray(t)?r=new m.Z(this._extendedMetadata).cleanse(t)[2]:"string"==typeof t&&(r=t),!r)return[null,""];r=u.quoteDimNameForGroup(r);const a=[];if(n&&"all"!==n&&null!==n.value){n=(0,i.castArray)(n);const{discretes:e,ranges:u}=g.splitFilterValues(n,t,this._extendedMetadata);e.length&&(1===n.length?a.push(`${r} == ${e.map(s.quoteValue)}`):a.push(`${r} in [${e.map(s.quoteValue).join(", ")}]`));for(let e of u){o||([e,o]=l.calculateRangeOperator(e));const t=this.buildMeasureFilter(r,e,o);t&&a.push(t)}}let[d]=u.unwrapDimOrMea(r,this._extendedMetadata);return[d]=u.unwrapDimOrMea(r,this._extendedMetadata),[d,a.join(" && ")]}_isNullOperator(e){return[h.MeaOperatorEnum.operator_is_null,h.MeaOperatorEnum.operator_is_not_null].includes(h.MeaOperatorEnum.getEnumByValue(e))}_isLegacyDate(e){return"function"!=typeof this._extendedMetadata.getField||this._extendedMetadata.getFieldInfo(e).isLegacy()}_serializeValue(e){return"string"==typeof e?(0,s.quoteValue)(e):String(e)}}},94052:(e,t,r)=>{"use strict";r.d(t,{Z:()=>A});var i=r(96486),s=r(49655),n=r(8429),o=r(57244),a=r(28357),l=r(66553),u=r(82389),d=r(62133),c=r(10655),h=r(72713),p=r(61818),g=r(16898),m=r(43794);class _{constructor(e,t,r){this._extendedMetadata=e,this._colRefs=t||[],this._curColRef=r}getExtendedMetadata(){return this._extendedMetadata}getColRefs(){return this._colRefs}getCurrentColRef(){return this._curColRef}}var f=r(5033),y=r(99212),b=r(66537),C=r(46308),E=r(6204),S=r(61760);const T="q",I="result",v=["avg","sum","min","max","count","median","percentile_disc","percentile_cont"];class R extends a.Z{constructor(e,t,r){if(super(t,r,e.nullsOrder),this._measures=e.measures||a.Z.DEFAULT_MEASURE,this._groups=e.groups||[],this._columns=e.columns||[],this._queries=(0,i.map)(this._columns,"query"),this._filters=e.filters||[],this._order=e.order||[],this._timeSeries=e.timeSeries,this._isTotals=!1,this._isSubtotals=!1,this._booleanFilterLogic=e.booleanFilterLogic,this._hasCogroupStatementWithRollups=!1,!this._queries.length)throw new Error("columns attribute must not be empty")}getQueryObject(){return{measures:this._measures,groups:this._groups,columns:this._columns}}build(){const e=[],t=this._edgemarts[0].getReference();this._streamAliases=this._queries.map((e=>T)),this._colRefs=this._columns.map(((e,t)=>y.Z.getColumnRef(t,e))),this._useRollupsForTotals=(this._isSubtotals||this._isTotals||this._isRowTotals&&this._groups.length>1)&&this._canUseRollupFeature(),e.push(`${T} = load "${t}";`),this._filters.length&&e.push(...new l.Z(this._extendedMetadata).buildSaqlFilterStatements(this._filters,this._booleanFilterLogic,T));for(let t=0;t<this._queries.length;t++){const r=this._queries[t];if(null!=r.filters&&null==r.formula){const s=this._getStreamAliasByIndex(t),n=new l.Z(this._extendedMetadata).build(r.filters);if((0,i.isEmpty)(n))continue;const o=n.map((e=>e[1])).join(" && ");e.push(`${s} = filter ${T} by ${o};`),this._streamAliases[t]=s}}const r=this._isColumnTotals&&this._groups.length>1&&this._canUseRollupFeature();if(r&&e.push(this._buildPivotedQueryStatement()),e.push(this._useRollupsForTotals?this._buildCogroupStatmentWithRollup():this._buildCogroupStatment()),null!=this._timeSeries?this._hasLegacyDateGroupings()?(e.push(this._buildCogroupProjStatement(!0)),e.push(this._buildTimeSeriesStatement()),e.push(this._buildCogroupProjStatement(!1,!0))):(e.push(this._buildCogroupProjStatement()),e.push(this._buildTimeSeriesStatement())):e.push(this._hasCogroupStatementWithRollups&&this._hasNullGroupsEnabled()?this._buildCogroupProjStatementForCogroupWithRollupWhenNullGroupsEnabled():this._buildCogroupProjStatement()),this._hasFormula(this._queries)&&e.push(this._buildFormulaProjections()),e.push(this._buildAggFilterStatement()),this._useRollupsForTotals){const t=this._flattenGroups(this._groups);if((this._isTotals||this._isRowTotals&&this._isColumnTotals)&&e.push(`summary = filter result by ${this._buildGroupingFilterExpr(t,1,"and")};`),this._isSubtotals){e.push(`result = filter result by ${this._buildGroupingFilterExpr(t,0,"or")};`);const r=this._groups.reduce(((e,t)=>(Array.isArray(t)&&!this._extendedMetadata.getDateTimeFieldGrain(t)&&e.push(`(${this._buildGroupingFilterExpr(t,0,"and")}) or (${this._buildGroupingFilterExpr(t,1,"and")})`),e)),[]);r.length>0&&e.push(`result = filter result by ${r.join(" and ")};`)}else if(this._isRowTotals&&this._groups.length>1){let t=this._buildGroupingFilterExpr(this._flattenGroups(this._groups.slice(0,-1)),0,"and");const r=(0,i.last)(this._groups);if(Array.isArray(r)&&!this._extendedMetadata.getDateTimeFieldGrain(r)){t+=` and ((${this._buildGroupingFilterExpr(r,0,"and")}) or (${this._buildGroupingFilterExpr(r,1,"and")}))`}e.push(`result = filter result by ${t};`)}else e.push(`result = filter result by ${this._buildGroupingFilterExpr(t,0,"and")};`)}return e.push(this._buildOrderStatement()),this._useRollupsForTotals?(e.push(this._buildLimitStatement()),this._isTotals?(e.push("result = union result, summary;"),this._addLimitStatementForSummaryIfNeeded(e,"result",this._getLimit())):r&&(e.push("result = union result, p, summary;"),e.push(this._buildLimitStatement(2*this._getLimit()+1)))):r?(e.push(this._buildLimitStatement()),e.push("result = union result, p;"),e.push(this._buildLimitStatement(2*this._getLimit()))):e.push(this._isTotals?this._buildSummaryProjStatement():this._buildLimitStatement()),(0,i.flatten)(e).join(" ")}_buildPivotedQueryStatement(){const e=[],t=this._groups.slice(-1);return e.push(this._buildCogroupStatment(t,"p")),e.push(this._buildCogroupProjStatement(!1,!1,t,"p",(e=>({expr:"0",alias:this._getGroupingColumnName(e),type:"measure"})))),this._hasFormula(this._queries)&&e.push(...this._buildFormulaProjections("p")),e.push(this._buildLimitStatement(this._getLimit(),"p")),e}_buildCogroupStatment(e=this._queries[0].groups||[],t=I){const r=(0,i.isEmpty)(e)?"all":this._buildGroupClause(e);let s=this._buildGroupExpressionList(r);return s=s.map(((e,t)=>t<s.length-1?`${String(e)} full`:e)),`${t} = group ${s.join(", ")};`}_buildCogroupStatmentWithRollup(e=this._groups,t=I){const r=this._flattenGroups(e),i=this._buildGroupExpressionList(this._buildGroupClauseWithRollup(r));if(i.length>1){if(this._hasCogroupStatementWithRollups=!0,this._hasNullGroupsEnabled())return this._buildCogroupStatmentWithRollupWhenNullGroupsEnabled(r,i);const e=[],s=this._buildGroupExpressionList(this._buildGroupClause(r)),n=this._getValidStreamAliases();for(let t=0;t<i.length;t++){const s=n[t],o=[];e.push(`${s} = group ${i[t]};`);for(const e of r)o.push(`${this._getGroupProjection(e)} asc nulls first`);e.push(`${s} = order ${s} by (${o.join(", ")});`)}return e.concat([`${t} = group ${s.map(((e,t)=>t<s.length-1?`${String(e)} full`:e)).join(", ")};`])}return[`${t} = group ${i[0]};`]}_buildGroupExpressionList(e){return this._queries.reduce(((t,r,i)=>{if(!r.formula||this._isRawFieldPresentInFormula(r.formula)){const r=`${this._streamAliases[i]} by ${e}`;t.includes(r)||t.push(r)}return t}),[]).sort()}_buildPostProjectionGroupStatement(e=[],t){let r="";if(e.length){let t;const i=e.map((e=>null!=(t=this._extendedMetadata.getDateTimeFieldGrain(e))?t.getAlias():p.getRawAlias(e)));r=this._buildGroupClause(i)}else r="all";return`${t} = group result by ${r};`}_buildCogroupProjStatement(e=!1,t=!1,r=this._queries[0].groups||[],i=I,s){const n=[];for(const i of r)if(e&&h.isCompoundDim(i))for(const e of i)n.push(this._buildDimProjExpr(e));else n.push(this._buildDimProjExpr(i,t));let o;for(let e=0;e<this._queries.length;e++)if(o=this._queries[e],(null==o.formula||!this._isWindowFunctionPresentInFormula(o.formula)&&this._isRawFieldPresentInFormula(o.formula))&&(t||this._columns[e].type!==C.Z.TIME_SERIES.getCode())){const r=this._colRefs[e];if(null!=o.formula)n.push({expr:t?r:this._formatFormulaWithRawMeasures(o.formula,this._streamAliases[e]),alias:r,type:"formula_rawField"});else{const i=o.measures&&o.measures[0]||["",""];if(n.push({expr:t?r:this._buildMeaProj(i,this._streamAliases[e]),alias:r,type:"measure"}),this._isTotals&&"avg"===i[0]){const t=["count","*"];n.push({expr:this._buildMeaProj(t,this._streamAliases[e]),alias:`${r}__count`,type:"measure"})}}}if(s)for(const e of this._flattenGroups(r))n.push(s(e));else if(this._useRollupsForTotals)for(const e of this._flattenGroups(r)){const t=this._getGroupingColumnName(e);this._hasCogroupStatementWithRollups?n.push({expr:`coalesce(${this._getValidStreamAliases().map((t=>this._getGroupProjectionExpression(e,t))).join(", ")})`,alias:t,type:"measure"}):n.push({expr:this._getGroupProjectionExpression(e,this._streamAliases[0]),alias:t,type:"measure"})}const a=n.map((e=>`${String(e.expr)} as ${p.getAlias(e.alias)}`));return this._projExpressions=n,`${i} = foreach ${i} generate ${a.join(", ")};`}_buildDimProjExpr(e,t=!1){const r=(0,i.uniqWith)(this._queries.reduce(((r,i,s)=>((null==i.formula||!this._isWindowFunctionPresentInFormula(i.formula)&&this._isRawFieldPresentInFormula(i.formula))&&r.push(this._buildDimProj(e,this._streamAliases[s],t)),r)),[]),i.isEqual),s=1===r.length?r[0]:`coalesce(${r.join(", ")})`,n=this._extendedMetadata.getDateTimeFieldGrain(e);return null!=n?{expr:s,alias:n.getAlias(),type:"dimension"}:{expr:s,alias:e,type:"dimension"}}_buildFormulaProjections(e=I){let t=[];const r=[];this._parsedFormulas={};const s=this._buildFormulaDependencyGraphs(this._queries),n=this._hasWindowFunction((0,i.values)(this._parsedFormulas));let o=!1;for(let e=0;e<this._queries.length;e++){const t=this._queries[e];if(null!=t.formula&&(this._isWindowFunctionPresentInFormula(t.formula)||!this._isRawFieldPresentInFormula(t.formula))){const r=this._colRefs[e];o=!0;const i=this._expandFormula(t.formula,r,s,n);this._projExpressions.push({expr:i,alias:r,type:"formula"})}}if(o&&(t=this._projExpressions.map((e=>"formula"===e.type?`${String(e.expr)} as ${p.getAlias(e.alias)}`:"formula_rawField"===e.type&&n||"measure"===e.type&&n?`first(${e.alias}) as ${p.getAlias(e.alias)}`:`${p.getAlias(e.alias)}`)),this._timeSeries&&!this._hasLegacyDateGroupings()))for(let e=0;e<this._columns.length;e++){this._columns[e].type===C.Z.TIME_SERIES.getCode()&&t.push(`first(${this._colRefs[e]}) as ${this._colRefs[e]}`)}return n&&r.push(this._buildPostProjectionGroupStatement(this._queries[0].groups,e)),o&&r.push(`${e} = foreach ${e} generate ${t.join(", ")};`),r}_hasAggregateFilters(){return this._queries.some((e=>e.aggregateFilters&&e.aggregateFilters.length))}_buildAggFilterStatement(){const e=[],t=this._queries.reduce(((e,t,r)=>{if(t.aggregateFilters&&t.aggregateFilters.length&&!t.formula){const i=t.aggregateFilters[0].slice();i[0]=this._colRefs[r],e.push(i)}return e}),[]);if(!t.length)return e;for(const[,r]of new l.Z(this._extendedMetadata).buildAggregateFilters(t))e.push(`result = filter result by ${r};`);return e}_buildOrderStatement(){let e=[];const t=e=>{switch("object"==typeof e?e.ascending:""){case!0:return"asc";case!1:return"desc";default:return""}},r=e=>{const t=this._extendedMetadata.getDateTimeFieldGrain(e),r=this._buildNullsOrderExpr()||(this._useRollupsForTotals?" nulls last":"");return`${null!=t?`'${t.getAlias()}'`:p.getAlias(e)} asc${r}`};if(Array.isArray(this._order)&&this._order.length)return this._order.forEach((r=>{const i=this._extendedMetadata.getDateTimeFieldGrain(r[0]);let s=r[0];i?s=i.getColumnName():d.isDateGroup(this._extendedMetadata,r[0])?s=p.getRawAlias(r[0]):Array.isArray(r[0])&&(s=r[0][0]);const n=r[1],o=t(n);e.push(`${p.quoteDimName(s)} ${o}${this._buildNullsOrderExpr()}`)})),`result = order result by (${e.join(", ")});`;for(let s=0;s<this._columns.length;s++){const n=this._columns[s],o=n.query.order;if(!(0,i.isEmpty)(o)||null!=n.sort){let a;const l=this._colRefs[s];let u;if((0,i.isEmpty)(o)){switch(n.sort){case g.Z.Ascending.code:case g.Z.InnerAscending.code:a="asc";break;case g.Z.Descending.code:case g.Z.InnerDescending.code:a="desc";break;default:a=""}u=[g.Z.InnerAscending.code,g.Z.InnerDescending.code].includes(n.sort)}else{const[,e]=o[0];a=t(e),u=!0===e.inner}if(u&&this._columns[0].query.groups&&this._columns[0].query.groups.length){const t=this._columns[0].query.groups.slice(0,-1)||[];for(const i of t)null!=i&&e.push(r(i))}return this._useRollupsForTotals&&e.push(`'${this._getGroupingColumnName((0,i.last)(this._groups))}' asc`),e.push(`${p.getProj(l)} ${a}${this._buildNullsOrderExpr()}`),`result = order result by (${e.join(", ")});`}}if(this._queries[0].groups&&this._queries[0].groups.length){e=[];for(const t of this._queries[0].groups)e.push(r(t));return`result = order result by (${e.join(", ")});`}return""}_buildLimitStatement(e=this._getLimit(),t="result"){return`${t} = limit ${t} ${e};`}_getLimit(){let e=(new c.Z).getDefaultGroupQueryLimit();for(const t of this._queries)if(null!=t.limit){const r=parseInt(t.limit);if("number"==typeof r&&r>0){e=r;break}}return e}_buildFormulaDependencyGraphs(e){let t,r;const i=new s.Z,o=new m.Z;for(let s=0;s<e.length;s++)r=e[s],t=this._colRefs[s],null!=r.formula?i.addNode(t,r.formula):i.addNode(t,t);for(let s=0;s<e.length;s++){r=e[s];const n=r.formula;if(null==n||S.nf.test(n))continue;t=this._colRefs[s];const a=o.parse(n),l=a.validate(new _(this._extendedMetadata,this._colRefs,t));if(!l.isValid())throw new f(l.getMessage(),n);this._parsedFormulas[t]=a;for(const e of a.getInputs())this._colRefs.includes(e)&&i.hasNode(e)&&i.addEdge(t,e)}const a=i.getGraphs();for(const e of a)if(!e.isAcyclic()){const t=e.getNodes().map((e=>e.getId()));throw new f(n.Z.getLabel("FormulaError","circularReferenceError",t.join(", ")))}return a}_expandFormula(e,t,r,i=!1){let s=e;for(const e of r){const r=e.getTopologicalOrder();if(!r)throw new Error("Expected topological sort order to exist.");const n=r.map((e=>e.getId()));if(!n.includes(t))continue;const o=n.indexOf(t),a=r.slice(o);for(const e of a){const t=i&&e.isLeaf()?`sum(${e.getValue()})`:e.isLeaf()?e.getValue():`(${e.getValue()})`;if(!this._isRawFieldPresentInFormula(t)){const r=new RegExp(`'?\\b${e.getId()}\\b'?`,"g");s=s.replace(r,t)}}}return s.trim()}_formatFormulaWithRawMeasures(e,t){if(S.nf.test(e))return e.trim();const r=(new m.Z).parse(e).getInputs();let i=e;for(let e=0;e<r.length;e++){const s=r[e],n=new RegExp(`'?\\b${s}\\b'?`,"g");i=i.replace(n,t+".'"+s+"'")}return i.trim()}_buildSummaryProjStatement(){let e;const t=[],r=[];t.push(this._buildPostProjectionGroupStatement(this._queries[0].groups,"summary"));for(let t=0;t<this._queries.length;t++){const i=this._queries[t],s=i.measures&&i.measures[0].slice();e=this._colRefs[t],s&&Array.isArray(s)&&(2===s.length||3===s.length)&&((i.formula||["count","unique"].includes(s[0]))&&(s[0]="sum"),s[1]=e,r.push({expr:this._buildSummaryMeaProj(s),alias:p.getAlias(`${e}_total`)}))}const i=r.map((e=>`${e.expr} as ${e.alias}`));t.push(`summary = foreach summary generate ${i.join(", ")};`),t.push("summary = limit summary 1;");const s=this._getLimit();return t.push(this._buildLimitStatement(s)),t.push("result = union result, summary;"),this._addLimitStatementForSummaryIfNeeded(t,"result",s),t}_isRawFieldPresentInFormula(e){if(null==e)return!1;const t=(new m.Z).parse(e),r=new Set(this._colRefs);for(const e of t.getInputs())if(r.has(e))return!1;return!0}_isWindowFunctionPresentInFormula(e){if(null==e)return!1;return(new m.Z).parse(e).hasWindowFunction()}_buildDimProj(e,t,r){const i=this._extendedMetadata.getDateTimeFieldGrain(e);return null!=i?this._buildDateGrainProj(i,t):h.isCompoundDim(e)?r?p.getProj(e):p.getProj(Array.from(e).map((e=>`${t}/${e}`))):p.getProj(`${t}/${String(e)}`)}_buildMeaProj(e,t,r=!1){let[i,s]=new u.Z(this._extendedMetadata).cleanse(e);if(Array.isArray(s)){const r=this._extendedMetadata.getDateTimeFieldGrain(e[1]);return`${e[0]}(${this._buildDateGrainProj(r,t)})`}return t&&(s=`${t}/${s}`),`${i}(${p.getProj(s)})`}_buildDateGrainProj(e,t){if(e.isLegacy())return null!=t?`${t}.${e.getProjection()}`:e.getProjection();if(null!=t){const r=e.getDateTimeField().getFullFieldName();return`${e.getDateGrain().getAccessFunction()}(${t}.'${r}')`}return e.getProjection()}_buildSummaryMeaProj(e){const[t,r]=new u.Z(this._extendedMetadata).cleanse(e),i=`${t}(${p.getProj(r)})`;if("avg"!==t){return`${v.includes(t)?t:"sum"}(${i}) over([..] partition by all)`}const s=`sum(${p.getProj(`${r}__count`)})`;return`${`sum(${i} * ${s}) over([..] partition by all)`} / ${`sum(${s}) over([..] partition by all)`}`}_hasFormula(e){return e.some((e=>null!=e.formula))}_hasWindowFunction(e){for(const t of e)if(t.hasWindowFunction())return!0;return!1}_getStreamAliasByIndex(e){return`q_${y.Z.getColumnRef(e)}`}_buildTimeSeriesStatement(){const e=[];if(null!=this._timeSeries){const t=[];for(let e=0;e<this._columns.length;e++){const r=this._columns[e];r.type===C.Z.TIME_SERIES.getCode()&&t.push(`${String(r.timeSeriesColumn)} as ${this._colRefs[e]}`)}const r=this._getDateCols(),i=[`dateCols=(${String(r)}), length=${String(this._timeSeries?this._timeSeries.length:0)}`];this._timeSeries&&null!=this._timeSeries.seasonality&&i.push(`seasonality=${this._timeSeries.seasonality}`),this._timeSeries&&this._timeSeries.model&&i.push(`model="${this._timeSeries.model}"`),this._timeSeries&&this._timeSeries.ignoreLast&&i.push(`ignoreLast=${String(this._timeSeries.ignoreLast)}`),e.push(`result = fill result by (dateCols=(${String(r)}));`),e.push(`result = timeseries result generate ${t.join(", ")} with (${i.join(", ")});`)}return e}_getDateCols(){const e=[],t=[];for(const r of this._groups){let i=this._extendedMetadata.getDateTimeFieldGrain(r);if(null!=i)t.push(this._getDateGrainFormat(b.getEnumByCode(i.getGrain()))),e.push(`'${i.getAlias()}'`);else for(const s of r)i=this._extendedMetadata.getDateTimeFieldGrain(s),null!=i&&(t.push(this._getDateGrainFormat(b.getEnumByCode(i.getGrain()))),e.push(`'${i.getAlias()}'`))}return[].concat(e,[`"${t.join("-")}"`])}_getDateGrainFormat(e){switch(e){case b.YEAR:case b.YEAR_FISCAL:return"Y";case b.MONTH:case b.MONTH_FISCAL:return"M";case b.QUARTER:case b.QUARTER_FISCAL:return"Q";default:return""}}_hasLegacyDateGroupings(){for(const e of this._groups||[])if(Array.isArray(e))for(const t of e){const e=this._extendedMetadata.getDateTimeFieldGrain(t);if(null!=e)return e.isLegacy()}return!1}_buildGroupClauseWithRollup(e){const t=this._buildGroupClause(e);return`rollup${Array.isArray(e)&&1===e.length?`(${t})`:t}`}_canUseRollupFeature(){return!(this._timeSeries||this._hasAggregateFilters()||!Array.isArray(this._queries[0].groups)||0===this._queries[0].groups.length)&&(!this._hasFormula(this._queries)||(this._parsedFormulas={},this._buildFormulaDependencyGraphs(this._queries),!this._hasWindowFunction((0,i.values)(this._parsedFormulas))))}_getValidStreamAliases(){return this._queries.reduce(((e,t,r)=>(t.formula&&!this._isRawFieldPresentInFormula(t.formula)||e.includes(this._streamAliases[r])||e.push(this._streamAliases[r]),e)),[]).sort()}_getGroupProjection(e){const t=this._extendedMetadata.getDateTimeFieldGrain(e);return t?t.getProjection():`'${String(e)}'`}_getGroupProjectionExpression(e,t){const r=this._extendedMetadata.getDateTimeFieldGrain(e);return r?`${E.Z.GROUPING.code}(${this._buildDateGrainProj(r,t)})`:this._buildMeaProj([E.Z.GROUPING.code,this._getGroupName(e)],t)}_buildGroupingFilterExpr(e,t,r){return e.map((e=>`'${this._getGroupingColumnName(e)}' == ${t}`)).join(` ${r} `)}_getGroupingColumnName(e){return`${a.Z.GROUPING_COLUMN_PREFIX}${this._getGroupName(e)}`}_hasNullGroupsEnabled(){return o.Z.has(o.Z.ORG_HAS_WAVE_NULL_DIMENSIONS_SAQL_ENABLED)}_buildCogroupStatmentWithRollupWhenNullGroupsEnabled(e,t){const r=[],i=this._getValidStreamAliases(),s=this._buildColumnsMapForCogroupWithRollupWhenNullGroupsEnabled();for(let n=0;n<t.length;n++){const o=i[n];r.push(`${o} = group ${t[n]};`),r.push(...this._buildGroupProjStatementForCogroupWithRollupWhenNullGroupsEnabled(o,e,s.get(o)||[]))}const n=[...e.map((e=>this._getGroupName(e))),...e.map((e=>this._getGroupingColumnName(e)))],o=this._buildGroupExpressionList(this._buildGroupClause(n));return r.push(`result = group ${o.join(" full, ")};`),r}_buildColumnsMapForCogroupWithRollupWhenNullGroupsEnabled(){return this._queries.reduce(((e,t,r)=>{if(!t.formula||this._isRawFieldPresentInFormula(t.formula)){const i=this._streamAliases[r],s={name:this._colRefs[r],query:t},n=e.get(i);n?n.push(s):e.set(i,[s])}return e}),new Map)}_buildGroupProjStatementForCogroupWithRollupWhenNullGroupsEnabled(e,t,r){const i=t.map((t=>{const r=this._extendedMetadata.getDateTimeFieldGrain(t);return{expr:this._buildDimProj(t,e,!1),alias:null!=r?r.getAlias():String(t),type:"dimension"}}));for(const t of r){const r=t.query,s=t.name||"";if(null!=r.formula)i.push({expr:this._formatFormulaWithRawMeasures(r.formula,e),alias:s,type:"formula_rawField"});else{const t=r.measures&&r.measures[0]||["",""];i.push({expr:this._buildMeaProj(t,e),alias:s,type:"measure"})}}for(const r of this._flattenGroups(t)){const t=this._getGroupingColumnName(r);i.push({expr:this._getGroupProjectionExpression(r,e),alias:t,type:"dimension"})}const s=i.map((e=>`${e.expr} as ${p.getAlias(e.alias)}`));return[`${e} = foreach ${e} generate ${s.join(", ")};`]}_buildCogroupProjStatementForCogroupWithRollupWhenNullGroupsEnabled(){const e=this._groups.map((e=>this._extendedMetadata.getDateTimeFieldGrain(e)?this._buildDimProjExpr(this._getGroupName(e)):this._buildDimProjExpr(e)));for(let t=0;t<this._queries.length;t++){const r=this._queries[t].formula;if(!r||this._isRawFieldPresentInFormula(r)){const r=this._colRefs[t];e.push({expr:this._buildMeaProj(["first",r],this._streamAliases[t]),alias:r,type:"measure"})}}for(const t of this._flattenGroups(this._groups))e.push(this._buildDimProjExpr(this._getGroupingColumnName(t)));const t=e.map((e=>`${e.expr} as ${p.getAlias(e.alias)}`));return this._projExpressions=e,[`result = foreach result generate ${t.join(", ")};`]}}var w=r(52703);class A{static make(e,t,r){if(!(0,i.isObject)(e))throw new Error("Invalid query");return null!=e.pigql||(0,i.isEmpty)(e.columns)?new w.Z(e,t,r):new R(e,t,r)}}},52703:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var i=r(96486),s=r(28357),n=r(66553),o=r(82389),a=r(39554),l=r(61818),u=r(31835);class d extends s.Z{constructor(e,t,r){super(t,r,e.nullsOrder),this._measures=e.measures||s.Z.DEFAULT_MEASURE,this._groups=e.groups||[],this._filters=e.filters||[],this._aggFilters=e.aggregateFilters||[],this._order=e.order||[],this._values=e.values||[],this._limit=e.limit,this._offset=e.offset,this._pigql=e.pigql,this._booleanFilterLogic=e.booleanFilterLogic}getQueryObject(){const e={measures:this._measures,groups:this._groups,filters:this._filters,aggregateFilters:this._aggFilters,order:this._order,values:this._values};return null!=this._limit&&(e.limit=this._limit),null!=this._offset&&(e.offset=this._offset),null!=this._pigql&&(e.pigql=this._pigql),e}build(){let e,t;if(this._pigql){const e=this._applyFiltersToPigql(this._pigql,this._filters);return a.replaceAliasesToRefs(e,this._edgemarts)}const r=[];this._globalFilters&&(t=this._formatExtraFiltersForSearch(this._globalFilters,!1)),r.push(`q = load "${this._edgemarts[0].getReference()}";`),t&&r.push(`q = filter q by ${t};`),this._filters.length&&r.push(...new n.Z(this._extendedMetadata).buildSaqlFilterStatements(this._filters,this._booleanFilterLogic));const s=this._getQueryLimit(),u=this._isColumnTotals&&(0,i.isEmpty)(this._aggFilters)&&this._groups.length>1;if(u){const t=this._groups.slice(-1);r.push(`p = group q by ${this._buildGroupClause(t)};`);const i=[...this._buildGroupsProjection(t),...this._buildMeaProjection(this._measures),...this._flattenGroups(t).map((e=>`0 as '${this._getGroupingColumnName(e)}'`))];r.push(`p = foreach p generate ${i.join(", ")};`),s&&r.push(`p = limit p ${s};`),e="q = union q, p;"}const d=this._isRowTotals&&(0,i.isEmpty)(this._aggFilters)&&this._groups.length>1;if(this._values&&this._values.length){if(this._isTotals){const t=this._buildValuesSummaryProjection(this._values);t.length&&(r.push("s = group q by all;"),r.push(`s = foreach s generate ${t.join(", ")};`),e="q = union q, s;")}const t=this._buildValuesProjection(this._values);r.push(`q = foreach q generate ${t.join(", ")};`)}else{const e=this._groups.length?this._buildGroupClause(this._groups):"all";r.push(`q = group q by ${d?"rollup":""}${e};`);const t=[...this._buildGroupsProjection(this._groups),...this._buildMeaProjection(this._measures),...d?this._buildGroupingFunctionsProjection(this._groups):[]];r.push(`q = foreach q generate ${t.join(", ")};`)}for(const[,e]of new n.Z(this._extendedMetadata).buildAggregateFilters(this._aggFilters))r.push(`q = filter q by ${e};`);if(d){u&&(r.push(`s = filter q by ${this._buildGroupingFilterExpr(this._flattenGroups(this._groups),1,"and")};`),e="q = union q, p, s;");let t=this._buildGroupingFilterExpr(this._flattenGroups(this._groups.slice(0,-1)),0,"and");const s=(0,i.last)(this._groups);if(Array.isArray(s)&&!this._extendedMetadata.getDateTimeFieldGrain(s)){t+=` and ((${this._buildGroupingFilterExpr(s,0,"and")}) or (${this._buildGroupingFilterExpr(s,1,"and")}))`}r.push(`q = filter q by ${t};`)}const c=new Set;if(this._order&&!(0,i.isEmpty)(this._order))for(let[e,t]of this._order){e===a.ORDERBY_MEASURE_TOKEN&&(e=new o.Z(this._extendedMetadata).cleanse(this._measures&&this._measures[0])[2]);const r=t.ascending?"asc":"desc",i=null!=this._extendedMetadata.getDateTimeFieldGrain(e)?l.getAlias(this._extendedMetadata.getDateTimeFieldGrain(e).getAlias()):l.getAlias(e);c.add(`${i} ${r}${this._buildNullsOrderExpr(d)}`)}else if(this._groups&&this._groups.length)for(const e of this._groups){const t=null!=this._extendedMetadata.getDateTimeFieldGrain(e)?this._extendedMetadata.getDateTimeFieldGrain(e).getAlias():e;c.add(`${l.getAlias(t)} asc${this._buildNullsOrderExpr(d)}`)}if(c.size>0){const e=Array.from(c.values()),t=1===e.length?e[0]:`(${e.join(", ")})`;r.push(`q = order q by ${t};`)}if(this._offset&&r.push(`q = offset q ${this._offset};`),s&&r.push(`q = limit q ${s};`),e){if(r.push(e),u&&s){const e=d?1:0;r.push(`q = limit q ${2*s+e};`)}this._addLimitStatementForSummaryIfNeeded(r,"q",s)}return r.join(" ")}_getQueryLimit(){return this._limit&&this._limit>0?this._limit:this._values&&this._values.length?u.Z.getDelegateFromAssetMetadata(this.getCurrentEdgemart()).getDefaultValuesQueryLimit():u.Z.getDelegateFromAssetMetadata(this.getCurrentEdgemart()).getDefaultGroupQueryLimit()}_buildValuesProjection(e){return Array.isArray(e)?this._buildGroupsProjection(e.slice().sort()):[]}_buildValuesSummaryProjection(e){return e.filter((e=>this._extendedMetadata.isMeasure(e))).sort().map((e=>this._buildSummaryMeaProj(e)))}_buildSummaryMeaProj(e){return`sum(${l.getProj(e)}) as ${l.getAlias(`${e.toString()}_total`)}`}}},85829:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._filterClauses=e}serializeLeaf(e){return this._filterClauses[e-1][1]}serializeUnaryOperation(e,t){return`${e.toLowerCase()} (${t})`}serializeBooleanOperation(e,t,r){let i=t.join(` ${e.toLowerCase()} `);return r&&(i=`(${i})`),i}}},17421:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(57244),n=r(32024),o=r(33524);class a{constructor(e,t){this._filter=e,this._extendedMetadata=t}build(){if(this._filter.isCompoundFilter)return this._buildCompoundFilterExpression(this._filter.columnName,this._filter.value);const e=this._filter.dateFunction;let t=`'${this._filter.fieldName}'`;e&&(t=`${e}(${t})`);const r=this._filter.operator;if(r.isDimensionOperator)return this._buildDimensionFilterExpression(t,r,this._filter.dimensionValues);if(r.isMeasureOperator)return this._buildMeasureFilterExpression(t,r,this._filter);if(r.isDateOperator)return this._filter.isRelativeDateRange?this._buildRelativeDateExpression(this._filter.fieldName,this._filter.relativeDateRange):this._buildAbsoluteDateFilterExpression(this._filter.fieldName,this._filter.absoluteDateRange);throw new Error("Invalid type of filter values or filter operator")}_buildCompoundFilterExpression(e,t){const r=e.map((e=>Array.isArray(e)?[`${e[0]}(${e[1]})`,!0]:[`'${e}'`,!1])),i=t.map((e=>r.map((([t,r],i)=>{const s=e[i];return null===s?`${t} is null`:r?`${t} == ${s}`:`${t} == "${s}"`})).join(" && ")));return`(${i.length>1?i.map((e=>`(${e})`)).join(" || "):i[0]})`}_buildDimensionFilterExpression(e,t,r){if(!r.length)throw new Error("Dimension values cannot be empty");const a=r.slice(),l=(0,i.remove)(a,(e=>null==e)),u="string"==typeof a[0]?o.joinDimsWithQuoting(a):a.join(", ");switch(t){case n.Z.STARTS_WITH:if(1===a.length&&"string"==typeof a[0]){return`${e} like "${a[0]+"%"}"`}return"";case n.Z.IN:if(a.length){const t=1===a.length?`${e} == ${u}`:`${e} in [${u}]`;return l.length?`(${t} || ${e} is null)`:t}return`${e} is null`;case n.Z.NOT_IN:if(a.length){const t=1!==a.length||s.Z.has(s.Z.ORG_HAS_WAVE_NULL_DIMENSIONS_SAQL_ENABLED)&&this._extendedMetadata.getField(this._filter.fieldName).isMultiValue()?`${e} not in [${u}]`:`${e} != ${u}`;return l.length?`(${t} && ${e} is not null)`:`(${t} || ${e} is null)`}return`${e} is not null`;default:if(1===a.length)return`${e} ${t.code} ${u}`;throw new Error("Invalid operator for discretes")}}_buildMeasureFilterExpression(e,t,r){if(n.Z.BETWEEN===t){const t=r.measureRange;return`${e} >= ${t[0]} && ${e} <= ${t[1]}`}return n.Z.IS_NULL===t?`${e} is null`:n.Z.IS_NOT_NULL===t?`${e} is not null`:`${e} ${t.code} ${r.measureValue}`}_buildAbsoluteDateFilterExpression(e,t){if(this._isLegacyDate(e)){let r,i;const s=this._extendedMetadata.getSubDimensions(e);return null==t[0]?(r=o.OPEN_ENDED_DATE_RANGE_LOWER_BOUND,i=o.toDateArray(t[1])):null==t[1]?(r=o.toDateArray(t[0]),i=o.OPEN_ENDED_DATE_RANGE_UPPER_BOUND):(r=o.toDateArray(t[0]),i=o.toDateArray(t[1])),`date('${s.year}', '${s.month}', '${s.day}') in [dateRange([${r}], [${i}])]`}return`'${e}' in [${null!=t[0]?`"${t[0]}"`:""}..${null!=t[1]?`"${t[1]}"`:""}]`}_buildRelativeDateExpression(e,t){const r=t.map((e=>o.relativeDateString(e))).join("..");if(this._isLegacyDate(e)){const t=this._extendedMetadata.getSubDimensions(e);return`date('${t.year}', '${t.month}', '${t.day}') in [${r}]`}return`'${e}' in [${r}]`}_isLegacyDate(e){return"function"!=typeof this._extendedMetadata.getField||this._extendedMetadata.getFieldInfo(e).isLegacy()}}},3742:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e,t){this._offset=e,this._streamAlias=t}build(){return`${this._streamAlias} = offset ${this._streamAlias} ${this._offset};`}}},63319:(e,t,r)=>{"use strict";r.d(t,{s5:()=>k,ZP:()=>H});var i=r(96486),s=r(22450),n=r(80600);class o{constructor(e,t,r=t){this._query=e,this._baseStream=t,this._newStream=r;const i=e.getDataSourceNames();this._uniqueStreamAliases=1===i.length?[t]:i.map(((e,r)=>t+(r+1))),this._streamAliases=[],this._query.sources.forEach((e=>{const r=i.findIndex((t=>t===e.name)),s=1===i.length?"":r+1;this._streamAliases.push(e.filters.length>0?t+s+"_"+e.columns[0].name:t+s)}))}getUniqueStreamAliasForSourceName(e){const t=this._query.getDataSourceNames().findIndex((t=>e===t));return this._uniqueStreamAliases[t]}getStreamAliasForSourceIndex(e){return this._streamAliases[e]}getAllStreamAliasForSourceName(e){const t=this._query.getAllSourceIndexesByDataSourceName(e);return t?.map((e=>this._streamAliases[e]))??[]}getNewStream(){return this._newStream}getBaseStream(){return this._baseStream}}var a=r(43794),l=r(74706);class u extends l.Z{#dr;constructor(e,t){super(e,new a.Z),this.#dr=t,this._assignStreamAlias()}_getValueForReplacing(e){return this.hasWindowFunction()&&e.isLeaf()?`sum(${e.getValue()})`:e.isLeaf()?e.getValue():`(${e.getValue()})`}_initializeColumnMap(){this._query.nonDerivedSources.forEach(((e,t)=>{for(const t of e.columns)this._columns.set(t.name,{field:t.field,rawFormula:t.formula,groups:e.groups})}));const e=this._query.derivedSource;if(e&&e.columns.length)for(const t of e.columns)this._columns.set(t.name,{formula:t.formula,groups:e.groups,streamAlias:""})}_assignStreamAlias(){this._query.nonDerivedSources.forEach(((e,t)=>{const r=this.#dr.getStreamAliasForSourceIndex(t);for(const t of e.columns)this._columns.get(t.name).streamAlias=r}))}}class d{constructor(e,t){this._streamAlias=t,this._dataSourceMetadata=e}build(){return`${this._streamAlias} = load "${this._dataSourceMetadata.getReference()}";`}}var c=r(17421);class h{constructor(e,t,r){this._filter=e,this._extendedMetadata=t,this._streamAlias=r}build(){const e=new c.Z(this._filter,this._extendedMetadata).build();return`${this._streamAlias} = filter ${this._streamAlias} by ${e};`}}class p{constructor(e,t,r,i){this._filters=e,this._extendedMetadata=t,this._sourceStreamAlias=r,this._columnStreamAlias=i}build(){const e=this._filters.map((e=>new c.Z(e,this._extendedMetadata).build())).join(" && ");return`${this._columnStreamAlias} = filter ${this._sourceStreamAlias} by ${e};`}}var g=r(14201),m=r(98818),_=r(85829);class f{constructor(e,t,r,i=r){this._sourceFilter=e,this._extendedMetadata=t,this._streamAlias=r,this._newStreamAlias=i}build(){if(this._sourceFilter.booleanFilterLogic){const e=this._sourceFilter.filters.map((e=>[void 0,new c.Z(e,this._extendedMetadata).build()])),t=new g.ZP(null,!1);if(t.validate(this._sourceFilter.booleanFilterLogic,e.length),t.error)throw new Error(t.error);{const r=new m.Z(new _.Z(e)).traverse(t.getTree());return`${this._newStreamAlias} = filter ${this._streamAlias} by ${r};`}}return this._sourceFilter.filters.map((e=>{const t=new c.Z(e,this._extendedMetadata).build();return`${this._newStreamAlias} = filter ${this._streamAlias} by ${t};`}))}}var y=r(16146);const b=` ${y.Z.FULL.getCode()}, `;class C{constructor(e,t,r){this._query=e,this._streamAliasAccessor=t,this._useRollup=r}build(){const e=this._query.isGroupedByAll,t=this._query.getUniqueSources();if(1===t.length){const r=this._streamAliasAccessor.getAllStreamAliasForSourceName(t[0].name).map((r=>this._buildSaqlGroupByExpression(e,r,t[0].groups)));return`${this._streamAliasAccessor.getNewStream()} = ${r.length>1?"cogroup":"group"} ${r.join(b)};`}{const t=this._query.nonDerivedSources.length-1,r=this._query.getUniqueSources().map(((r,i)=>{const s=this._streamAliasAccessor.getAllStreamAliasForSourceName(r.name),n=s.length-1;return s.map(((s,o)=>{let a=this._buildSaqlGroupByExpression(e,s,r.groups);return o===n?r.cogroupType&&i<t&&(a+=` ${r.cogroupType.getCode()}`):a+=` ${y.Z.FULL.getCode()}`,a})).join(", ")}));return`${this._streamAliasAccessor.getBaseStream()} = cogroup ${r.join(", ")};`}}_buildSaqlGroupByExpression(e,t,r){return`${t} by ${e?"all":this._buildSaqlGroupExpression(r)}`}_buildSaqlGroupExpression(e){const t=e.map((e=>e.isDate?`${e.dateAccessFunction}('${e.fieldName}')`:`'${e.fieldName}'`));return this._useRollup?`rollup(${t.join(", ")})`:1===t.length?t[0]:`(${t.join(", ")})`}}var E=r(61760);class S{_columns=new Map;constructor(e,t){this._query=e,this._streamAliasAccessor=t,this._query.nonDerivedSources.forEach(((e,t)=>{const r=this._streamAliasAccessor.getStreamAliasForSourceIndex(t);for(const t of e.columns)this._columns.set(t.name,{field:t.field,rawFormula:t.formula,groups:e.groups,streamAlias:r})}))}build(){const e=this._buildGroupProjections().concat(this._buildColumnProjections());return this._buildProjectionStatement(e)}_buildProjectionStatement(e){if(e.length<1)return"";const t=e.map((e=>`${e.expr} as '${e.alias}'`)),r=this._streamAliasAccessor.getNewStream();return`${r} = foreach ${r} generate ${t.join(", ")};`}_buildGroupProjections(){if(this._query.isGroupedByAll)return[];const e=this._query.nonDerivedSources;return e[0].groups.map(((t,r)=>{const i=t.columnName;if(1===e.length)return{alias:i,expr:this._buildSaqlGroupExpression(t,this._streamAliasAccessor.getBaseStream()),type:"group"};return{alias:i,expr:`coalesce(${e.map(((e,t)=>this._buildSaqlGroupExpression(e.groups[r],this._streamAliasAccessor.getStreamAliasForSourceIndex(t)))).join(", ")})`,type:"group"}}))}_buildSaqlGroupExpression(e,t){const r=`${t}.'${e.fieldName}'`;return e.isDate?`${e.dateAccessFunction}(${r})`:r}_buildColumnProjections(){const e=[];for(const[t,r]of this._columns)if(r.field){const i=this._buildSaqlColumnExpression(r.field,r.streamAlias);e.push({alias:t,expr:`${i}`,type:"aggregate"})}else if(r.rawFormula){const i=this._formatFormulaWithRawMeasures(r.rawFormula,r.streamAlias);e.push({alias:t,expr:`${i}`,type:"rawFormula"})}return e}_buildSaqlColumnExpression(e,t){let r;return e.aggregateFunction?(r="*"===e.fieldName?t:`${t}.'${e.fieldName}'`,e.isAggrOnDate&&(r=`${e.dateAccessFunction}(${r})`),`${e.aggregateFunction}(${r})`):(r=`${t}.'${e.fieldName}'`,e.isDate&&(r=`${e.dateAccessFunction}(${r})`),r)}_formatFormulaWithRawMeasures(e,t){if(E.nf.test(e))return e.trim();const r=(new a.Z).parse(e);let i=e;for(const e of r.getInputs()){const r=new RegExp(`'?\\b${e}\\b'?`,"g");i=i.replace(r,t+".'"+e+"'")}return i.trim()}}class T{constructor(e,t,r=t){this._groupNames=e,this._baseStream=t,this._resultStream=r}build(){const e=0===this._groupNames.length?["all"]:this._groupNames.map((e=>`'${e}'`)),t=1===e.length?e[0]:`(${e.join(", ")})`;return`${this._resultStream} = group ${this._baseStream} by ${t};`}}class I{constructor(e,t,r,i,s){this._groupNames=e,this._nonDerivedSourceColumnNames=t,this._formulaColumns=r,this._resultStream=i,this._formulaHelper=s}build(){const e=this._buildGroupProjections().concat(this._buildColumnProjections()),t=this._buildFormulaProjections();return this._buildProjectionStatement(e.concat(t))}_buildProjectionStatement(e){const t=this._formulaHelper.hasWindowFunction(),r=e.map((e=>"formula"===e.type?`${e.expr} as '${e.alias}'`:t&&"aggregate"===e.type?`first(${e.alias}) as '${e.alias}'`:`'${e.alias}'`));return`${this._resultStream} = foreach ${this._resultStream} generate ${r.join(", ")};`}_buildGroupProjections(){return 1===this._groupNames.length&&"all"===this._groupNames[0]?[]:this._groupNames.map((e=>({alias:e,expr:`${e}`,type:"group"})))}_buildColumnProjections(){return this._nonDerivedSourceColumnNames.map((e=>({alias:e,expr:`${e}`,type:"aggregate"})))}_buildFormulaProjections(){return this._formulaColumns.map((e=>({alias:e.name,expr:this._formulaHelper.expandFormula(e.formula,e.name),type:"formula"})))}}const v=new Set(["min","max","median","percentile_disc","percentile_cont"]);class R{constructor(e,t){this._query=e,this._resultStream=t}build(){const e=[];for(const t of this._query.sources)for(const r of t.columns){let t=r.field?.aggregateFunction;t&&t!==s.Z.COUNT.getCode()&&t!==s.Z.UNIQUE.getCode()||(t="sum");const i=this._buildSummaryProjectionExpr(r.name,t);e.push(`${i} as '${r.name}_total'`)}return`${this._resultStream} = foreach ${this._resultStream} generate ${e.join(", ")};`}_buildSummaryProjectionExpr(e,t){const r=`${t}('${e}')`;if(t!==s.Z.AVG.getCode()){return`${v.has(t)?t:s.Z.SUM.getCode()}(${r}) over([..] partition by all)`}const i=`sum('${e}__count')`;return`${`sum(${r} * ${i}) over([..] partition by all)`} / ${`sum(${i}) over([..] partition by all)`}`}}class w{constructor(e){this._streamAliases=e}build(){return`${this._streamAliases[0]} = union ${this._streamAliases.join(", ")};`}}class A{constructor(e,t){this._orders=e,this._streamAlias=t}build(){if(this._orders.length>0)return`${this._streamAlias} = order ${this._streamAlias} by ${this._buildSaqlOrderExpression(this._orders)};`}_buildSaqlOrderExpression(e){const t=e.map((e=>{const t=e.ascending?"asc":"desc";let r=`'${e.columnName}' ${t}`;return e.nulls&&(r+=` nulls ${e.nulls}`),r}));return 1===t.length?t[0]:`(${t.join(", ")})`}}var D=r(10655);class L{constructor(e,t,r){this._limit=e,this._isGrouped=t,this._streamAlias=r}build(){return`${this._streamAlias} = limit ${this._streamAlias} ${this._getQueryLimit()};`}_getQueryLimit(){return this._limit&&this._limit>0?this._limit:this._isGrouped?(new D.Z).getDefaultGroupQueryLimit():(new D.Z).getDefaultValuesQueryLimit()}}var M=r(3742),N=r(28357);class O{constructor(e,t,r,i,s){this._groupNames=e,this._totals=t,this._hasGrandTotal=r,this._includeDataRows=i,this._baseStream=s}build(){const e=[],t=e=>`(${e})`,r=(t,r)=>e.push(`${t} = filter ${this._baseStream} by ${r};`),s=this._groupNames.slice(0,1);this._hasGrandTotal&&r("s",this._createFilterClause(s,"==",1));const n=this._totals[0]===this._groupNames[0]?this._totals.slice(1):this._totals,o=s,a=[];let l=!0;for(let e=1;e<this._groupNames.length;e++){const t=this._groupNames[e];if(n.includes(t)){if((0,i.isEqual)(n,this._groupNames.slice(e)))break;l?(l=!1,a.push(this._createFilterClause(this._groupNames.slice(e),"==",0)),a.push(this._createFilterClause(this._groupNames.slice(e),"==",1))):a.push(this._createFilterClause(this._groupNames.slice(o.length,e),"==",0)+" and "+this._createFilterClause(this._groupNames.slice(e),"==",1))}else l&&o.push(t)}const u=[this._createFilterClause(o,"==",0)];return 1===a.length?u.push(a[0]):a.length>1&&u.push(t(a.map(t).join(" or "))),this._includeDataRows||u.push(this._createFilterClause(this._groupNames.slice(-1),"!=",0)),r(this._baseStream,u.join(" and ")),e}_createFilterClause(e,t,r){return e.map((e=>`'${N.Z.GROUPING_COLUMN_PREFIX}${e}' ${t} ${r}`)).join(" and ")}}var P=r(35450),x=r(94160),Z=r(28564),F=r(78190);const k="sorting_",B="q",W="m",G="p",U="s";class H{constructor(e,t,r){this._query=e,this._dataSourceMetadatas=t,this._extendedMetadatas=r}setTotals(e){return this}setSubtotals(e){return this}setRowTotals(e){return this}setColumnTotals(e){return this}setRowLimit(e){return this}build(){const e=new o(this._query,B),t=e.getBaseStream(),r=[...this._createLoadBuilders(e),...this._createSourceFilterBuilders(e)],s=[t],n=this._query.limit??(this._query.isGrouped?(new D.Z).getDefaultGroupQueryLimit():(new D.Z).getDefaultValuesQueryLimit());let a=n,l=!this._hasOffset()&&this._query.hasGrandTotals();if(this._query.isGrouped){const i=new u(this._query,e).hasWindowFunction(),o=this._query.getAggregateFilterCount()>0,d=!this._query.isGroupedByAll&&!i&&!o,c=this._query.getDataSourceNames().length>1&&this._query.hasColumnFilters(),h=this._query.orders.some((e=>e.hasFilters()));h&&(s.push(W),a+=n);const p=1===this._query.orders.length&&this._query.orders.every((e=>e.hasFilters())),g=d&&this._query.hasColumnGroups()&&(this._query.hasColumnTotals()||this._query.hasColumnSubtotals()&&!p);g&&(s.push(G),a+=n);const m=d&&(this._query.hasColumnGroups()?this._query.hasRowTotals():this._query.columnTotals.length>0);let _=!1;l&&!d&&(l=_=!this._query.hasColumnGroups());const f=_?this._addSpecialCountColumn(this._query):this._query;r.push(...h?this._createPivotSortingStreamStatementBuilders(e):[],...this._createColumnFilterBuilders(e),...g?this._createPivotedStreamStatementBuilders(e,p):[],...c?this._createMultipleDatasetGroupAndProjectionBuilders(e):this._createSingleDatasetGroupAndProjectionBuilders(f,e,d),...this._createAggregateFilterBuilders(e),...m?this._createGroupingFunctionFilterBuilders(l,t,p):[],new A(f.orders,t),..._?this._createNonRollupSummaryBuilders(f,e):[],new L(f.limit,f.isGrouped,t))}else r.push(...l?this._createGroupByAllSummaryBuilders(e):[],new S(this._query,e),new A(this._query.orders,t)),this._hasOffset()&&r.push(new M.Z(this._query.offset,t)),r.push(new L(this._query.limit,!1,t));return l&&(s.push(U),a+=1),s.length>1&&r.push(new w(s),new L(a,this._query.isGrouped,t)),(0,i.flatMap)(r,(e=>e.build())).filter((e=>!!e)).join(" ")}_hasOffset(){return!!this._query.offset}_createLoadBuilders(e){return this._query.getDataSourceNames().map((t=>{const r=e.getUniqueStreamAliasForSourceName(t),i=this._dataSourceMetadatas.filter((e=>e.getFullyQualifiedName()===t))[0];return new d(i,r)}))}_createPivotSortingStreamStatementBuilders(e){const t=this._query.nonDerivedSources,r=t[0].groups,i=[];if(i.push(this._createCompactFormSource({name:t[0].name,columns:[...t[0].columns,...this._getSortedColumnsFromOrders(t[0])],groups:r,filters:t[0].filters})),t.length>1)for(let e=1;e<t.length;e++)i.push(this._createCompactFormSource({name:t[e].name,columns:[...t[e].columns,...this._getSortedColumnsFromOrders(t[e])],groups:r,filters:t[e].filters}));const s=this._query.derivedSource;s&&i.push(this._createCompactFormSource({columns:[...s.columns,...this._getSortedColumnsFromOrders(s)]}));const n=this._createCompactFormQuery(i,this._query.orders),a=e.getBaseStream(),l=new o(n,W),u=this._query.orders.filter((e=>e.hasFilters())),d=[...u.length>0?[new p(u[0].filters,this._extendedMetadatas[0],a,W)]:[],...this._createColumnFilterBuilders(l),...this._createGroupAndProjectionBuilders(n,l,!1)];return d.push(new A(this._query.orders,W),new L(this._query.limit,this._query.isGrouped,W)),d}_createColumnFilterBuilders(e){const t=[],r=this._query.getDataSourceNames();return this._query.sources.forEach(((i,s)=>{if(i.filters.length>0){const n=r.findIndex((e=>e===i.name)),o=e.getUniqueStreamAliasForSourceName(i.name),a=e.getStreamAliasForSourceIndex(s);t.push(new p(i.filters,this._extendedMetadatas[n],o,a))}})),t}_createSourceFilterBuilders(e){const t=[],r=this._query.getDataSourceNames();for(const[i,s]of this._query.sourceFilters){const n=r.findIndex((e=>e===i));-1!==n&&t.push(new f(s,this._extendedMetadatas[n],e.getUniqueStreamAliasForSourceName(i)))}return t}_createAggregateFilterBuilders(e){const t=[],r=this._query.getDataSourceNames();for(const i of this._query.aggregateFilters){const{sourceIndex:s}=this._query.getSourceAndColumnIndex(i.columnName),n=this._query.getSourceName(s),o=r.findIndex((e=>e===n));-1!==s&&t.push(new h(i,this._extendedMetadatas[o],e.getBaseStream()))}return t}_createGroupingFunctionFilterBuilders(e,t,r){let i;return 0===this._query.columnGroups.length?i=this._query.columnTotals:(i=[],r||(i=[...this._query.columnTotals],this._query.hasColumnTotals()&&i.shift()),i.push(...this._query.rowTotals)),[new O(this._query.groupColumnNames,i,e,!0,t)]}_addSpecialCountColumn(e){if(!e.nonDerivedSources.some((e=>e.columns.some((e=>e.field?.aggregateFunction===s.Z.AVG.getCode())))))return e;const t=(0,F.makeMutableQuery)(e.json);for(const e of t.getNonDerivedMutableSources())for(let t=0;t<e.columns.length;t++){const r=e.columns[t];r.field?.aggregateFunction===s.Z.AVG.getCode()&&e.addColumn({name:`${r.name}__count`,field:["count","*"]},++t)}return t}_createGroupAndProjectionBuilders(e,t,r){const i=[new C(e,t,r),new S(e,t)],s=e.derivedSource;if(s){const r=new u(e,t),n=e.groupColumnNames;r.hasWindowFunction()&&i.push(new T(n,t.getBaseStream())),i.push(new I(n,e.getNonDerivedSourcesColumnNames(),s.columns,t.getNewStream(),r))}return i}_createSingleDatasetGroupAndProjectionBuilders(e,t,r){let i;const s=r&&(e.hasColumnGroups()?e.rowTotals.length>0:e.columnTotals.length>0);if(s){if(e.hasColumnFilters()&&e.nonDerivedSources.length>1)return this._createTotalsSubQueryBuildersWhenQueryHasColumnFilters(e,t);{const t=e.nonDerivedSources.map((e=>this._createCompactFormSource({name:e.name,columns:e.columns,groups:e.groups,filters:e.filters,getGroupingFunction:this._getGroupingFunction})));e.derivedSource&&t.push(new Z.Z(e.derivedSource.json)),i=this._createCompactFormQuery(t)}}return this._createGroupAndProjectionBuilders(i??e,t,s)}_createMultipleDatasetGroupAndProjectionBuilders(e){const t=[],r=[];this._query.getDataSourceNames().forEach((s=>{const n=this._query.sources.filter((e=>e.name===s));if(n.length>1){const a=(0,F.makeImmutableQuery)({sources:n.map((e=>e.json)),columnGroups:this._query.columnGroups}),l=new o(a,e.getUniqueStreamAliasForSourceName(s));t.push(...this._createGroupAndProjectionBuilders(a,l,!1)),r.push({name:n[0].name,groups:n[0].groupNames,columns:n.flatMap((e=>e.columns.map(this._convertToFirstFunction))),filters:[],cogroupType:(0,i.last)(n).cogroupType?.getCode(),joins:[]})}else r.push(n[0].json)})),this._query.derivedSource&&r.push(this._query.derivedSource.json);const s=(0,F.makeImmutableQuery)({sources:r,columnGroups:this._query.columnGroups}),n=new o(s,B);return t.push(...this._createGroupAndProjectionBuilders(s,n,!1)),t}_createPivotedStreamStatementBuilders(e,t){const r=this._query.nonDerivedSources,i=r[0].groups,s=this._query.hasColumnSubtotals()&&!t,n=e.getBaseStream(),a=this._query.columnGroups.map((e=>i.find((t=>t.columnName===e))));s&&a.push(...i.slice(0,i.length-this._query.columnGroups.length));const l=s&&this._query.hasColumnFilters()&&r.length>1,u=r.map(((e,t)=>{let r;return 0!==t||l||(r=s?this._getGroupingFunction:()=>"0"),this._createCompactFormSource({name:e.name,columns:e.columns,groups:a,filters:e.filters,getGroupingFunction:r})}));this._query.derivedSource&&u.push(this._query.derivedSource);const d=this._createCompactFormQuery(u),c=[];return l?c.push(...this._createTotalsSubQueryBuildersWhenQueryHasColumnFilters(d,new o(d,G))):c.push(...this._createGroupAndProjectionBuilders(d,new o(d,n,G),s)),s&&c.push(new O(a.map((e=>e.columnName)),this._query.columnTotals,!1,!1,G)),c.push(new L(this._query.limit,this._query.isGrouped,G)),c}_createGroupByAllSummaryBuilders(e){const t=[];for(const e of this._query.sources)for(const r of e.columns){const e=r.field?.json;this._extendedMetadatas[0].isMeasure(e)&&t.push({name:`${r.name}_total`,field:["sum",e]})}const r=this._query.sources[0].name,i=(0,F.makeImmutableQuery)((0,F.makeQueryJson)({sources:[(0,F.makeSourceJson)(r,t,[n.U])]})),s=new o(i,e.getNewStream(),U);return this._createGroupAndProjectionBuilders(i,s,!1)}_createNonRollupSummaryBuilders(e,t){return[new T(e.groupColumnNames,B,U),new R(e,U),new L(1,!0,U)]}_createTotalsSubQueryBuildersWhenQueryHasColumnFilters(e,t){const r=[];e.nonDerivedSources.forEach(((e,i)=>{const s=this._createCompactFormQuery([this._createCompactFormSource({name:e.name,columns:e.columns,groups:e.groups,filters:e.filters,getGroupingFunction:this._getGroupingFunction})]),n=new o(s,B,t.getStreamAliasForSourceIndex(i));r.push(...this._createGroupAndProjectionBuilders(s,n,!0))}));const i=e.nonDerivedSources.map((e=>this._createCompactFormSource({name:e.name,columns:e.columns.map((e=>new x.Z(this._convertToFirstFunction(e)))),groups:[...e.groups,...e.groups.map((e=>new P.Z(`${N.Z.GROUPING_COLUMN_PREFIX}${e.columnName}`)))],filters:e.filters})));e.derivedSource&&i.push(new Z.Z(e.derivedSource.json));const s=this._createCompactFormQuery(i);return r.push(...this._createGroupAndProjectionBuilders(s,new o(s,t.getBaseStream()),!1)),r}_createCompactFormSource({columns:e,groups:t=[],filters:r=[],name:i,getGroupingFunction:s}){const n=[...e.map((e=>e.json))];s&&n.push(...this._getGroupingColumns(t,s));const o={name:i,groups:t.map((e=>e.json)),columns:n,filters:r.map((e=>e.json)),joins:[]};return new Z.Z(o)}_createCompactFormQuery(e,t=[]){return(0,F.makeImmutableQuery)({sources:e.map((e=>e.json)),aggregateFilters:[],orders:t.map((e=>e.json))})}_convertToFirstFunction(e){return{name:e.name,field:[s.Z.FIRST.getCode(),e.name]}}_getGroupingColumns(e,t){return e.map((e=>({formula:t(e),name:`${N.Z.GROUPING_COLUMN_PREFIX}${e.columnName}`})))}_getGroupingFunction(e){return e.isDate?`grouping(${e.dateAccessFunction}('${e.fieldName}'))`:`grouping('${e.columnName}')`}_getSortedColumnsFromOrders(e){const t=this._query.orders.filter((e=>e.hasFilters()));return e.columns.filter((e=>t.find((t=>t.columnName===e.name)))).map((e=>new x.Z({name:`${k}${e.name}`,formula:"1"})))}}},80139:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});class i{constructor(e){this._filterClauses=e}serializeLeaf(e){return this._filterClauses[e-1]}serializeUnaryOperation(e,t){return`${e} (${t})`}serializeBooleanOperation(e,t,r){let i=t.join(` ${e} `);return r&&(i=`(${i})`),i}}},67737:(e,t,r)=>{"use strict";r.d(t,{Ex:()=>l,Qc:()=>p,Y_:()=>d,_J:()=>h,qb:()=>c,y2:()=>u});var i=r(66537);const s=new Map([["year","CALENDAR_YEAR"],["quarter","CALENDAR_QUARTER"],["month","CALENDAR_MONTH"],["week","WEEK_IN_YEAR"],["day","DAY_IN_MONTH"],["hour","HOUR_IN_DAY"]]),n=new Map([[-1,"YESTERDAY"],[0,"TODAY"],[1,"TOMORROW"]]),o=/^(\d{4})-(\d{2})-(\d{2})$/,a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})\.(\d{3})(?:Z|[+-]\d{4})$/;function l(e,t=!1){const r=e[0],i=e[1],n=`${s.get(r)}(${i})`;return t?`${n} ${r}_${i}`:n}function u(e){return Array.isArray(e)&&!Array.isArray(e[0])&&i.isValidCfQueryGrain(e[0])}function d(e){const t=e[0],r=Number(e[1]);if("day"===t&&r>=-1&&r<=1){return n.get(r)}if(0===r)return`THIS_${t.toUpperCase()}`;{const e=r<0?"LAST_N":"NEXT_N",i=`:${Math.abs(r)}`;return`${e}_${t.toUpperCase()}S`+i}}function c(e){return o.test(e)}function h(e){return a.test(e)}function p(e){let t=e.match(o);if(null==t&&(t=e.match(a)),null==t)throw new Error("Invalid date.");return Date.UTC(parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3]),parseInt(t[4]??0),parseInt(t[5]??0),parseInt(t[6]??0),parseInt(t[7]??0))}},62154:(e,t,r)=>{"use strict";r.d(t,{j:()=>l});var i=r(8429),s=r(74978),n=r(32024),o=r(67737),a=r(76093);function l(e,t,r,l){const d=Array.isArray(e)?(0,o.Ex)([e[0],e[1]]):e;switch(r){case n.Z.IN.code:return 1===t.length?`${d} = ${u(t)}`:`${d} ${r.toUpperCase()} (${u(t)})`;case n.Z.NOT_IN.code:return 1===t.length?`${d} != ${u(t)}`:`${d} ${r.toUpperCase()} (${u(t)})`;case n.Z.MATCHES.code:return`${d} LIKE '%${String(t[0])}%'`;case n.Z.DATE_BETWEEN.code:return function(e,t,r){if(2!==t.length)throw new Error(i.Z.getLabel("ErrorMsg","invalidBetweenOperation"));const s=(0,a.Nn)(t[0]),n=(0,a.Nn)(t[1]),o=r?`DAY_ONLY(${e})`:e;return null==s&&null!=n?`${o} <= ${n}`:null!=s&&null==n?`${o} >= ${s}`:null!=s&&null!=n?s===n?`${o} = ${s}`:`${o} >= ${s} AND ${o} <= ${n}`:""}(d,t,l);case n.Z.BETWEEN.code:return function(e,t){if(2!==t.length)throw new Error(i.Z.getLabel("ErrorMsg","invalidBetweenOperation"));const r=(0,a.Nn)(t[0]),s=(0,a.Nn)(t[1]);if(null==r||null==s)throw new Error("Invalid range filter.");return r===s?`${e} = ${r}`:`${e} >= ${r} AND ${e} <= ${s}`}(d,t);case n.Z.IS_NULL.code:return`${d} = null`;case n.Z.IS_NOT_NULL.code:return`${d} != null`;default:return function(e,t,r,i){let n;if(Array.isArray(r[0])){const e=(0,a.Nn)(r[0][0]),t=(0,a.Nn)(r[0][1]);if(n=null!=e?e:t,null==n)throw new Error("Invalid date filter value.")}else n=(0,s.quoteValue)(r[0],!0);const o=i?`DAY_ONLY(${e})`:e;return`${o} ${t} ${n}`}(d,r===n.Z.EQUALS.code?"=":r,t,l)}}function u(e){return e.map((e=>function(e){return"string"==typeof e?(0,s.quoteValue)(e,!0):String(e)}(e))).join(", ")}},40834:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i=r(8429),s=r(74978),n=r(14201),o=r(76093),a=r(67737),l=r(98818),u=r(80139),d=r(32024),c=r(95812);class h{constructor(e){this._extendedMetadata=e}buildFilter(e,t=null){const r=[];for(const[t,i,s]of e){const e=t,n=i;if(Array.isArray(e)&&!(0,a.y2)(e)){const t=[];if(n[0].length>1&&Array.isArray(n[0])){const t=n.map((t=>this._getSOQLCompoundFilter(e,t)));r.push(`(${t.join(" OR ")})`)}else{for(const r of e)t.push(this._buildFilterClause(r,n,s));r.push(t.join(" OR "))}}else r.push(this._buildFilterClause(e,n,s))}return t?this._buildBooleanFilterLogicClause(t,r):r.join(" AND ")}buildAggregateFilter(e){const t=[];for(const[r,i,s]of e){const e=(0,o.gM)(r);t.push(this._buildFilterClause(e,i,s))}return t.join(" AND ")}_buildFilterClause(e,t,r){const i=Array.isArray(e)?(0,a.Ex)([e[0],e[1]]):e;switch(r){case d.Z.IN.code:return 1===t.length?`${i} = ${this._joinWithQuotes(t)}`:`${i} ${r.toUpperCase()} (${this._joinWithQuotes(t)})`;case d.Z.NOT_IN.code:return 1===t.length?`${i} != ${this._joinWithQuotes(t)}`:`${i} ${r.toUpperCase()} (${this._joinWithQuotes(t)})`;case d.Z.MATCHES.code:return`${i} LIKE '%${String(t[0])}%'`;case d.Z.BETWEEN.code:{const e=t;return this._buildRangeFilter(i,e)}case d.Z.IS_NULL.code:return`${i} = null`;case d.Z.IS_NOT_NULL.code:return`${i} != null`;default:{const e=r===d.Z.EQUALS.code?"=":r,s=t;return this._buildInequalityFilter(i,e,s)}}}_buildRangeFilter(e,t){if(2!==t[0].length)throw new Error(i.Z.getLabel("ErrorMsg","invalidBetweenOperation"));const r=(0,o.Nn)(t[0][0]),s=(0,o.Nn)(t[0][1]);if(null==r||null==s)throw new Error("Invalid range filter.");const n=this._extendedMetadata.getField(e)?.getDateType?.()===c.ZP.DATE_TIME?`DAY_ONLY(${e})`:e;return r===s?`${n} = ${r}`:`${n} >= ${r} AND ${n} <= ${s}`}_buildInequalityFilter(e,t,r){let i;const n=this._extendedMetadata.getField(e)?.getDateType?.()===c.ZP.DATE_TIME;if(Array.isArray(r[0])){const e=(0,o.Nn)(r[0][0]),t=(0,o.Nn)(r[0][1]);if(i=null!=e?e:t,null==i)throw new Error("Invalid date filter value.")}else i=(0,s.quoteValue)(r[0],!0);return`${n?`DAY_ONLY(${e})`:e} ${t} ${i}`}_getSOQLCompoundFilter(e,t){const r=[];return e.forEach(((e,i)=>{const s=Array.isArray(e)?(0,a.Ex)(e):e;r.push(`${s} = ${this._serializeValue(t[i])}`)})),"("+r.join(" AND ")+")"}_buildBooleanFilterLogicClause(e,t){const r=new n.ZP(null,!1);if(r.validate(e,t.length),r.error)throw new Error(r.error);return new l.Z(new u.Z(t)).traverse(r.getTree())}_joinWithQuotes(e){return e.map((e=>this._serializeValue(e))).join(", ")}_serializeValue(e){return"string"==typeof e?(0,s.quoteValue)(e,!0):String(e)}}},78444:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var i=r(67737),s=r(76093);class n{constructor(e){this._query=e}build(){const e=this._query.sources[0],t=this._query.isGroupedByAll?[]:this._buildGroupSelects(e.groups),r=this._buildAggregations(e.columns),i=t.concat(r).join(", ");if(!e.name)throw new Error("Invalid compact form source");return`SELECT ${i} FROM ${e.name}`}_buildGroupSelects(e){return e.map((e=>e.dateFunction?(0,i.Ex)([e.dateFunction,e.fieldName],!0):e.columnName))}_buildAggregations(e){return e.reduce(((e,t)=>(t.field&&e.push((0,s.Kj)(t.field)),e)),[])}}var o=r(14201),a=r(98818),l=r(80139),u=r(62154),d=r(95812);class c{constructor(e,t){this._query=e,this._extendedMetadata=t}build(){const e=this._query.sources[0],t=e.name&&this._query.sourceFilters.get(e.name);if(t){const e=[];for(const r of t.filters){const t=this._extendedMetadata.getField(r.columnName)?.getDateType?.()===d.ZP.DATE_TIME;e.push((0,u.j)(...r.json,t))}return`WHERE ${t.booleanFilterLogic?this._buildBooleanFilterLogicClause(t.booleanFilterLogic,e):e.join(" AND ")}`}}_buildBooleanFilterLogicClause(e,t){const r=new o.ZP(null,!1);if(r.validate(e,t.length),r.error)throw new Error(r.error);return new a.Z(new l.Z(t)).traverse(r.getTree())}}class h{constructor(e,t){this._query=e,this._extendedMetadata=t}build(){if(this._query.aggregateFilters.length)return`HAVING ${this._query.aggregateFilters.reduce(((e,t)=>{const r=this._query.sources[0].findColumn(t.columnName);if(r&&r.field){const i=(0,s.Kj)(r.field),n=this._extendedMetadata.hasDateTimeFieldGrain(r.name);e.push((0,u.j)(i,t.value,t.operator.code,n))}return e}),[]).join(" AND ")}`}}class p{constructor(e){this._query=e}build(){const e=this._query.sources[0];if(!e.isGroupedByAll)return`GROUP BY ${e.groups.map((e=>e.dateFunction?(0,i.Ex)([e.dateFunction,e.fieldName]):e.fieldName)).join(", ")}`}}class g{constructor(e){this._query=e}build(){const e=this._query.sources[0];let t;if(this._query.orders.length?t=this._buildOrderByClause(e,this._query.orders):e.isGroupedByAll||(t=this._buildDefaultOrderByClause(e.groups)),t)return`ORDER BY ${t}`}_buildOrderByClause(e,t){const r=[];for(const n of t){let t=n.columnName;const o=e.findColumn(n.columnName);if(o&&o.field&&(o.field.isAggrOnDate&&o.field.dateFunction?t=(0,i.Ex)([o.field.dateFunction,o.field.fieldName]):o.field.aggregateFunction&&(t="count"===o.field.aggregateFunction?"COUNT(Id)":(0,s.Kj)(o.field))),t){const e=n.ascending?"ASC":"DESC";r.push(`${t} ${e}`)}}return r.join(", ")}_buildDefaultOrderByClause(e){const t=new Set;for(const r of e){const e=r.dateFunction?(0,i.Ex)([r.dateFunction,r.fieldName]):r.fieldName;t.add(`${e} ASC`)}return Array.from(t.values()).join(", ")}}class m{constructor(e){this._query=e}build(){if(this._query.limit&&this._query.limit>0&&!this._query.isGroupedByAll)return`LIMIT ${this._query.limit}`;if(!this._query.isGroupedByAll)throw new Error("A valid query limit must be specified")}}class _{constructor(e,t){this._query=e,this._extendedMetadata=t}setTotals(e){return this}setSubtotals(e){return this}setRowTotals(e){return this}setColumnTotals(e){return this}setRowLimit(e){return this}build(){return[new n(this._query),new c(this._query,this._extendedMetadata),new p(this._query),new h(this._query,this._extendedMetadata),new g(this._query),new m(this._query)].map((e=>e.build())).filter(Boolean).join(" ")}}},76093:(e,t,r)=>{"use strict";r.d(t,{Kj:()=>a,Nn:()=>l,gM:()=>o});var i=r(74978),s=r(67737);const n=2147483647;function o(e){if("*"===e[1])return"COUNT(Id)";{const t="unique"===e[0]?"count_distinct":e[0],r=Array.isArray(e[1])?(0,s.Ex)([e[1][0],e[1][1]]):e[1];return`${t.toUpperCase()}(${r})`}}function a(e){if(!e.aggregateFunction)throw new Error("Invalid field");if("*"===e.fieldName)return"COUNT(Id)";{const t="unique"===e.aggregateFunction?"count_distinct":e.aggregateFunction,r=e.isAggrOnDate&&e.dateFunction?(0,s.Ex)([e.dateFunction,e.fieldName]):e.fieldName;return`${t.toUpperCase()}(${r})`}}function l(e){return"number"==typeof e?Number.isInteger(e)&&Math.abs(e)>n?e.toFixed(2):e:Array.isArray(e)?(0,s.Y_)(e):"string"!=typeof e||(0,s.qb)(e)?e:(0,s._J)(e)?e.substring(0,e.indexOf("T")):(0,i.quoteValue)(e,!0)}},45189:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(96486),s=r(66537);class n{getDatePartFunctionTerm(e,t,r){return s.isEpochGrain(e)?this._getEpochFunctionTerm(e,t,r):`EXTRACT(${this._getDateGrainKeyWord(e)} FROM ${this.getQuotedName(t,r)})`}getAbsoluteDatePredicate(e,t){if(null!=t[0]&&null!=t[1])return`${e} BETWEEN date('${t[0]}') AND date('${t[1]}')`;if(null!=t[0])return`${e} >= date('${t[0]}')`;if(null!=t[1])return`${e} <= date('${t[1]}')`;throw new Error("date filter must contain at least one date")}getRelativeDatePredicate(e,t){return`(${this._getRelativeDateValue(e,!1,...t[0])} AND ${this._getRelativeDateValue(e,!0,...t[1])})`}getSourceAliasAndColumnName(e){const t=e.indexOf(".");return{sourceAlias:(0,i.isEmpty)(e.substring(0,t))?void 0:e.substring(0,t),columnName:e.substring(t+1)}}getQuotedName(e,t){return t?`"${t}"."${e}"`:`"${e}"`}getGroupSelect(e,t,r,i){return r?this.getDatePartFunctionTerm(r,e,i):this.getQuotedName(e,i)}_getEpochFunctionTerm(e,t,r){return e===s.EPOCH_DAY?`FLOOR(TO_UNIXTIME(${this.getQuotedName(t,r)}) / 86400)`:`TO_UNIXTIME(${this.getQuotedName(t,r)})`}_getRelativeDateValue(e,t,r,i){const s=t?i+1:i;return`${e} ${t?"<":">="} date_trunc('${r}', ${0===s?"current_date":`date_add('${r}', ${s}, current_date)`})`}_getDateGrainKeyWord(e){return s.getEnumByGrain(e).getCfQueryGrain()}}},23634:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(96486),s=r(74978),n=r(32024),o=r(64858);class a{#cr;#hr;#pr;#gr;constructor(e,t,r,i){this.#cr=e,this.#hr=t,this.#pr=r,this.#gr=i}build(){const e=this.#cr.fieldName;return this.#cr.isCompoundFilter?this.buildCompoundFilterExpression():this.#pr?.isDateTimeType(e)?this.#cr.operator===n.Z.IS_NULL||this.#cr.operator===n.Z.IS_NOT_NULL?this.buildDimensionPredicate():this.#cr.operator===n.Z.IN?this.buildDatePredicate():this.#cr.isRelativeDateRange?this.buildRelativeDatePredicate():this.buildAbsoluteDatePredicate():this.#pr?.isStringType(e)?this.buildDimensionPredicate():this.#pr?.isNumberType(e)?this._buildMeasurePredicate():""}buildCompoundFilterExpression(){return this.#cr.value.map((e=>`(${this.#cr.columnName.map(((t,r)=>{if(this.#pr?.isDateTimeType(t)){const{sourceAlias:i,columnName:s}=this.#hr.getSourceAliasAndColumnName(t[1]),n=this.#hr.getDatePartFunctionTerm(t[0],s,i??this.#gr);return null==e[r]?`${n} IS NULL`:`${n} = ${e[r]}`}{const{sourceAlias:i,columnName:s}=this.#hr.getSourceAliasAndColumnName(t),n=this.#hr.getQuotedName(s,i??this.#gr);return null==e[r]?`${n} IS NULL`:`${n} = '${e[r]}'`}})).join(" AND ")})`)).join(" OR ")}buildDatePredicate(){return this.#cr.value.map((e=>{const{sourceAlias:t,columnName:r}=this.#hr.getSourceAliasAndColumnName(this.#cr.columnName[1]),i=this.#hr.getDatePartFunctionTerm(this.#cr.columnName[0],r,t??this.#gr);return null==e?`${i} IS NULL`:`${i} = ${e}`})).join(" OR ")}buildDimensionPredicate(){if(Array.isArray(this.#cr.columnName)&&Array.isArray(this.#cr.value[0]))return this.#cr.value.map((e=>`(${this.#cr.columnName.map(((t,r)=>{const{sourceAlias:i,columnName:s}=this.#hr.getSourceAliasAndColumnName(t),n=this.#hr.getQuotedName(s,i??this.#gr);return null==e[r]?`${n} IS NULL`:`${n} = '${e[r]}'`})).join(" AND ")})`)).join(" OR ");const e=this.#cr.dimensionValues.slice(),t=(0,i.remove)(e,(e=>null==e));if(t.length>0&&this.#cr.operator!==n.Z.IN&&this.#cr.operator!==n.Z.NOT_IN)throw new Error(`Invalid operator: ${this.#cr.operator.code} with null dimension value`);const{sourceAlias:r,columnName:s}=this.#hr.getSourceAliasAndColumnName(this.#cr.fieldName),o=this.#hr.getQuotedName(s,r??this.#gr),a=(0,i.isEmpty)(e)||"string"!=typeof e[0]?e.join(", "):this._joinDimsWithQuoting(e);switch(this.#cr.operator){case n.Z.IS_NULL:return`${o} IS NULL`;case n.Z.IS_NOT_NULL:return`${o} IS NOT NULL`;case n.Z.IN:if(e.length){const r=1===e.length?`${o} = ${a}`:`${o} IN (${a})`;return t.length?`(${r} OR ${o} IS NULL)`:r}return`${o} IS NULL`;case n.Z.NOT_IN:if(e.length){const r=1===e.length?`${o} != ${a}`:`${o} NOT IN (${a})`;return t.length?`${r} AND ${o} IS NOT NULL`:`(${r} OR ${o} IS NULL)`}return`${o} IS NOT NULL`;case n.Z.MATCHES:if("string"!=typeof e[0])throw new Error(`Invalid type: ${typeof e[0]} for MATCHES operator`);return`lower(${o}) LIKE lower('%${e[0].toString()}%')`;default:throw new Error(`Invalid operator: ${this.#cr.operator.code}`)}}buildRelativeDatePredicate(){const{sourceAlias:e,columnName:t}=this.#hr.getSourceAliasAndColumnName(this.#cr.fieldName),r=this.#hr.getQuotedName(t,e??this.#gr);return this.#hr.getRelativeDatePredicate(r,this.#cr.relativeDateRange)}buildAbsoluteDatePredicate(){const{sourceAlias:e,columnName:t}=this.#hr.getSourceAliasAndColumnName(this.#cr.fieldName),r=this.#hr.getQuotedName(t,e??this.#gr),i=[(0,o._c)(this.#cr.absoluteDateRange[0]),(0,o._c)(this.#cr.absoluteDateRange[1])];return this.#hr.getAbsoluteDatePredicate(r,i)}_joinDimsWithQuoting(e){return e.map((e=>(0,s.quoteValue)("number"==typeof e?e.toString():e,!0))).join(", ")}_buildMeasurePredicate(){const{sourceAlias:e,columnName:t}=this.#hr.getSourceAliasAndColumnName(this.#cr.fieldName),r=this.#hr.getQuotedName(t,e??this.#gr);switch(this.#cr.operator){case n.Z.BETWEEN:return`${r} BETWEEN ${this.#cr.measureRange[0]} AND ${this.#cr.measureRange[1]}`;case n.Z.EQUALS:return`${r} = ${this.#cr.measureValue}`;case n.Z.NOT_EQUALS:case n.Z.LESS_THAN:case n.Z.LESS_EQUAL:case n.Z.GREATER_EQUAL:case n.Z.GREATER_THAN:return`${r} ${this.#cr.operator.code} ${this.#cr.measureValue}`;case n.Z.IS_NULL:return`${r} IS NULL`;case n.Z.IS_NOT_NULL:return`${r} IS NOT NULL`;default:throw new Error("Unsupported filter operator: "+this.#cr.operator.code)}}}},54624:(e,t,r)=>{"use strict";r.d(t,{Y:()=>E,Z:()=>S});var i=r(71178),s=r(22450),n=r(42323),o=r(74706);class a extends o.Z{constructor(e){super(e,new n.Z)}_getValueForReplacing(e){return e.isLeaf()?e.getValue():`(${e.getValue()})`}_initializeColumnMap(){this._query.nonDerivedSources.forEach(((e,t)=>{for(const t of e.columns)this._columns.set(t.name,{field:t.field,rawFormula:t.formula,groups:e.groups})}));const e=this._query.derivedSource;if(e&&e.columns.length)for(const t of e.columns)this._columns.set(t.name,{formula:t.formula,groups:e.groups})}}var l=r(78190),u=r(64858),d=r(4490);class c{#mr;#_r;#pr;#fr;#yr;#br;#hr;#Cr;constructor({query:e,extendedMetadata:t,multiplier:r,tableAliases:i,dimensionFieldTableAlias:s,sqlQueryFormatter:n,sqlQueryCapability:o,subQuery:a}){this.#mr=e,this.#_r=a,this.#pr=t,this.#fr=r,this.#yr=i,this.#br=s,this.#hr=n,this.#Cr=o}build(){const e=[];return this._addGroupingColumns(e),this.#_r?this.#mr.hasColumnOrRowRelatedTotals()||this._addSubQueryMeasureColumns(e):this._addQueryMeasureColumns(e),this.#mr.hasColumnOrRowRelatedTotals()||this._addColumnAliasFormulaColumns(e),this._addTotalColumns(e),this._addGroupingFunctionColumn(e),`SELECT ${e.join(", ")}`}_addTotalColumns(e){!this.#mr.isGrouped&&this.#mr.hasGrandTotals()?this.#mr.sources.forEach((t=>{t.columns.forEach((t=>{if(this.#pr?.isMeasure(t.name)){const{sourceAlias:r,columnName:i}=this.#hr.getSourceAliasAndColumnName(t.name);e.push(`SUM(${this.#hr.getQuotedName(i,r)}) OVER() AS "${t.name}${d.Z}"`)}}))})):this.#mr.hasColumnOrRowRelatedTotals()&&null!=this.#_r&&this.#mr.sources.forEach((t=>{t.columns.forEach((t=>{e.push(`SUM(${t.name}) AS ${t.name}`)}))})),this.#mr.isGroupedByAll&&this.#mr.hasGrandTotals()&&this.#mr.sources.forEach((t=>{t.columns.forEach((t=>{e.push(`SUM(${this._getMeasureFieldSelect(t)}) OVER() AS "${t.name}${d.Z}"`)}))}))}_addQueryMeasureColumns(e){for(let t=0;t<this.#mr.sources.length;t++){const r=this.#mr.sources[t],i=this.#yr&&this.#yr.length>0?this.#yr[t]:void 0;if(r.filtersCount>0){if(r.isGroupedByAll)this._addSubSelects(e,r);else if(i){const t=r.getColumn(0);e.push(`${this.#hr.getQuotedName(t.name,i)} AS ${this.#hr.getQuotedName(t.name)}`)}}else this._addFieldSelects(e,r,i)}}_addGroupingColumns(e){const t=this.#mr.getSource(0);if(!t.isGroupedByAll)for(const r of t.groups)e.push(this._getGroupFieldSelect(r,r.columnName))}_addGroupingFunctionColumn(e){if(!this.#mr.hasRowTotals()&&!this.#mr.hasColumnTotals()&&!this.#mr.hasColumnSubtotals())return;if(!this._isTotalQuerySupported())return;const t=this.#mr.getSource(0);if(!t.isGroupedByAll)for(const r of t.groups)e.push(this.#_r?`GROUPING(${this.#hr.getQuotedName(r.columnName)}) AS ${this.#hr.getQuotedName(E+r.columnName)}`:`${(0,u.rJ)(r,this.#hr,this.#br)} AS ${this.#hr.getQuotedName(E+r.columnName)}`)}_addSubQueryMeasureColumns(e){this.#_r?.sources.forEach((t=>{t.columns.forEach((t=>{e.push(t.name)}))}))}_addColumnAliasFormulaColumns(e){if(!this.#mr.derivedSource)return;const t=new a(this.#mr);this.#mr.derivedSource.columns.forEach((r=>{if(!r.formula)return;const i=t.expandFormula(r.formula,r.name);e.push(`${i} AS ${r.name}`)}))}_addSubSelects(e,t){const r=new i.Z(t.json);r.setFilters([]);const s=(0,l.makeMutableQuery)((0,l.makeQueryJson)({sources:[r.json]}));t.filters.forEach((e=>{s.addSourceFilter(s.getSourceFilterKey(t.name),e.json)}));const n=new S(s,this.#pr,this.#hr,this.#Cr),o=t.getColumn(0);e.push(`(${n.build()}) AS ${this.#hr.getQuotedName(o.name)}`)}_addFieldSelects(e,t,r){t.columns.forEach((t=>{const i=this._getMeasureFieldSelect(t,r);i.length>0&&e.push(`${i} AS ${this.#hr.getQuotedName(t.name)}`)}))}_getMeasureFieldSelect(e,t){let r="";if(e.formula)r=`${this._formatFormulaWithRawMeasures(e.formula,t)}`;else if(null!=e.field){const i=e.field,{sourceAlias:n,columnName:o}=this.#hr.getSourceAliasAndColumnName(i?.fieldName);if(i.aggregateFunction){const e=i.aggregateFunction;if(e===s.Z.UNIQUE.getCode())i.isAggrOnDate&&i.dateFunction?r+=`COUNT(DISTINCT ${this.#hr.getDatePartFunctionTerm(i.dateFunction,o,n)})`:r+=`COUNT(DISTINCT ${this.#hr.getQuotedName(o,n)})`;else if(i.dateFunction){const t=this.#hr.getDatePartFunctionTerm(i.dateFunction,o,n);i.isAggrOnDate?r+=`${e.toUpperCase()}(${t})`:r+=t}else{const i="*"===o?null:n??t,s="*"===o?"*":`${this.#hr.getQuotedName(o)}`;r+=`${e.toUpperCase()}(${i?`${this.#hr.getQuotedName(i)}.`+s:s})`}}else i.dateFunction?r+=this.#hr.getDatePartFunctionTerm(i.dateFunction,o,n):r+=`${this.#hr.getQuotedName(o,n)}`;r+=`${null!=this.#fr?` * ${this.#fr}`:""}`}return r}_getGroupFieldSelect(e,t){return this.#_r?this.#hr.getQuotedName(t):`${(0,u.V9)(e,this.#hr,this.#br)} AS ${this.#hr.getQuotedName(t)}`}_formatFormulaWithRawMeasures(e,t){const r=(new n.Z).parse(e);let i=e;for(const e of r.getInputs()){const{sourceAlias:r,columnName:s}=this.#hr.getSourceAliasAndColumnName(e),n=new RegExp(`'?\\b${e}\\b'?`,"g"),o=r||t;i=i.replace(n,o?this.#hr.getQuotedName(s,o):this.#hr.getQuotedName(e))}return i.trim()}_isTotalQuerySupported(){if(this.#Cr.isRollUpOnDateFunctionSupported())return!0;const e=this.#mr.getSource(0);return!!e.isGroupedByAll||e.groups.every((e=>!e.isDate))}}class h{#Er;#gr;#pr;#hr;#Cr;#_r;constructor(e,t,r,i,s,n){this.#Er=e,this.#gr=s,this.#hr=r,this.#Cr=i,this.#pr=t,this.#_r=n}build(){if(this.#_r){if(null==this.#gr)throw new Error("Table alias must be specified");return`FROM (${new S(this.#_r,this.#pr,this.#hr,this.#Cr).build()}) AS ${this.#gr}`}const e=this.#Er.isJoined?this.#Er.joins[0].source.name:this.#Er.name;return null!=this.#gr&&e?`FROM "${e}" AS ${this.#hr.getQuotedName(this.#gr)}`:`FROM "${e}"`}}class p{#mr;#pr;#gr;#Sr;#Tr;#hr;#Cr;constructor({query:e,extendedMetadata:t,tableAlias:r,outerTableGroups:i,outerTableAlias:s,sqlQueryFormatter:n,sqlQueryCapability:o}){this.#mr=e,this.#pr=t,this.#gr=r,this.#Sr=i,this.#Tr=s,this.#hr=n,this.#Cr=o}build(){if(this.#mr.getSourceCount()>1)throw new Error("Join to inner query with multiple sources is not supported.");if(this.#mr.isGroupedByAll||this.#mr.groupColumnNames.length!==this.#Sr.length)throw new Error("Number of grouping columns should match outer table.");return`LEFT OUTER JOIN (${new S(this.#mr,this.#pr,this.#hr,this.#Cr).build()}) AS ${this.#hr.getQuotedName(this.#gr)} ON ${this._getJoinFields()}`}_getJoinFields(){const e=[],t=this.#mr.getSource(0);for(let r=0;r<this.#Sr.length;r++){const i=this.#Sr[r],s=t.getGroup(r);e.push(`${this._getOuterTableSelect(i)} = ${this.#hr.getQuotedName(s.columnName,this.#gr)}`)}return e.join(" AND ")}_getOuterTableSelect(e){const{sourceAlias:t,columnName:r}=this.#hr.getSourceAliasAndColumnName(e.fieldName),i=this.#mr.isJoined?t:this.#Tr;return e.dateFunction?this.#hr.getDatePartFunctionTerm(e.dateFunction,r,i):this.#hr.getQuotedName(r,i)}}var g=r(41184);class m{#br;#hr;#Cr;#mr;#Ir;#vr;constructor({dimensionFieldTableAlias:e,query:t,hasSubQuery:r,sqlQueryFormatter:i,sqlQueryCapability:s,useColumName:n=!1}){this.#br=e,this.#hr=i,this.#Cr=s,this.#mr=t,this.#Ir=r,this.#vr=n}build(){let e=!1;const t=new Map,r=this.#mr.getSource(0).groups.map((r=>{e=e||r.isDate;const{sourceAlias:i,columnName:s}=this.#hr.getSourceAliasAndColumnName(r.fieldName);let n;return n=this.#vr?this.#Ir?this.#hr.getQuotedName(r.columnName,this.#br):this.#hr.getQuotedName(r.dateFunction?r.columnName:s,i??this.#br):this.#hr.getGroupSelect(s,r.columnName,r.dateFunction,i??this.#br),t.set(r.columnName,n),n}));if(this.#mr.hasColumnGroups()&&this.#mr.hasColumnOrRowRelatedTotals()&&(this.#Cr.isRollUpOnDateFunctionSupported()||!e)){const e=[],i=this.#mr.getSource(0).groupNames,s=new Set(this.#mr.columnGroups);if(e.push(`(${r.join(", ")})`),this.#mr.hasColumnTotals()){const r=[];for(const e of s)r.push(t.get(e));e.push(`(${r.join(", ")})`)}if(this.#mr.hasRowTotals()){const r=[];for(const e of i)s.has(e)||r.push(t.get(e));e.push(`(${r.join(", ")})`)}if(this.#mr.hasGrandTotals()&&e.push("()"),this.#mr.hasColumnSubtotals()){const t=i.findIndex((e=>s.has(e)));for(let s=this.#mr.hasColumnTotals()?1:0;s<this.#mr.columnTotals.length;s++){const n=i.indexOf(this.#mr.columnTotals[s]);e.push(`(${r.slice(0,n).concat(r.slice(t)).join(", ")})`),this.#mr.hasRowTotals()&&e.push(`(${r.slice(0,n).join(", ")})`)}}return`GROUP BY GROUPING SETS (${e.join(", ")})`}{const t=[...r],i=this.#mr.sources.filter((e=>e.filters.length>0)).map((e=>e.getColumn(0)));return i?.forEach((e=>r.push(`${this.#hr.getQuotedName(e.name)}`))),!this.#mr.hasColumnTotals()&&!this.#mr.hasColumnSubtotals()||!this.#Cr.isRollUpOnDateFunctionSupported()&&e?`GROUP BY ${r.join(", ")}`:`GROUP BY ROLLUP (${t.join(", ")})`}}}var _=r(32024);class f{#mr;#Ir;#hr;#Cr;#gr;#Rr;constructor(e,t,r,i,s,n=!1){this.#mr=e,this.#Ir=t,this.#hr=r,this.#Cr=i,this.#gr=s,this.#Rr=n}build(){const e=this.#Rr?[]:this.#mr.aggregateFilters.map((e=>this._buildPredicate(e))),t=this.#Cr.isRollUpOnDateFunctionSupported()||this.#mr.getSource(0).groups.every((e=>!e.isDate));if(!this.#mr.hasColumnGroups()&&t&&(this.#mr.hasColumnTotals()||this.#mr.hasColumnSubtotals())){const t=new Map;this.#mr.getSource(0).groups.forEach((e=>{const{sourceAlias:r}=this.#hr.getSourceAliasAndColumnName(e.fieldName);t.set(e.columnName,this.#Ir?`GROUPING(${this.#hr.getQuotedName(e.columnName)})`:(0,u.rJ)(e,this.#hr,r??this.#gr))}));const r=this.#mr.getSource(0).groupNames,i=this.#mr.columnTotals,s=[];for(let e=0;e<i.length;e++){const n=r.indexOf(i[e]),o=[];r.slice(0,n).forEach((e=>o.push(`${t.get(e)} = 0`))),r.slice(n).forEach((e=>o.push(`${t.get(e)} = 1`))),s.push(`(${o.join(" AND ")})`)}return`HAVING ${s.join(" OR ")} OR (${r.map((e=>`${t.get(e)} = 0`)).join(" AND ")})${e.length>0?" AND "+e.join(" AND "):""}`}return e.length?`HAVING ${e.join(" AND ")}`:""}_buildPredicate(e){const t=this.#mr.findColumn(e.fieldName);if(null==t)throw new Error("Cannot find column for aggregate filter.");const r=this._buildAggregate(t);switch(e.operator){case _.Z.BETWEEN:return`${r} BETWEEN ${e.measureRange[0]} AND ${e.measureRange[1]}`;case _.Z.EQUALS:return`${r} = ${e.measureValue}`;case _.Z.NOT_EQUALS:case _.Z.LESS_THAN:case _.Z.LESS_EQUAL:case _.Z.GREATER_EQUAL:case _.Z.GREATER_THAN:return`${r} ${e.operator.code} ${e.measureValue}`;case _.Z.IS_NULL:return`${r} IS NULL`;case _.Z.IS_NOT_NULL:return`${r} IS NOT NULL`;default:throw new Error("Unsupported filter operator: "+e.operator.code)}}_buildAggregate(e){let t="";const r=e.field;if(null==r)throw new Error("Cannot find field for aggregate filter.");const{sourceAlias:i,columnName:n}=this.#hr.getSourceAliasAndColumnName(r.fieldName);if(r.aggregateFunction===s.Z.UNIQUE.getCode())t+=`COUNT(DISTINCT ${this.#hr.getQuotedName(n,i??this.#gr)})`;else{if(!r.aggregateFunction)throw new Error("Missing aggregate function for aggregate filter.");{const e="*"===n?null:i??this.#gr,s="*"===n?"*":`${this.#hr.getQuotedName(n)}`;t+=`${r.aggregateFunction.toUpperCase()}(${e?`${this.#hr.getQuotedName(e)}.`+s:s})`}}return t}}class y{#mr;#hr;#Cr;constructor(e,t,r){this.#mr=e,this.#hr=t,this.#Cr=r}build(){const e=[];this.#mr.hasOrders()&&e.push(...this.#mr.orders.map((e=>{const t=e.ascending?"ASC":"DESC";return`${this.#hr.getQuotedName(e.columnName)} ${t}`})));const t=this.#Cr.isRollUpOnDateFunctionSupported()||this.#mr.getSource(0).groups.every((e=>!e.isDate));if(this.#mr.isGrouped&&!this.#mr.isGroupedByAll&&t)if(this.#mr.hasColumnGroups())this.#mr.hasColumnTotals()&&(e.splice(0,0,`${this.#hr.getQuotedName(E+this.#mr.columnTotals[0])} DESC`),this.#mr.hasGrandTotals()&&e.push(...this.#mr.rowTotals.map((e=>`${this.#hr.getQuotedName(E+e)} ASC`))));else if(this.#mr.hasGrandTotals()&&e.splice(0,0,`${this.#hr.getQuotedName(E+this.#mr.columnTotals[0])} DESC`),this.#mr.hasColumnSubtotals()){const t=this.#mr.hasGrandTotals()?this.#mr.columnTotals.slice(1):this.#mr.columnTotals;e.push(...t.map((e=>`${this.#hr.getQuotedName(E+e)} ASC`)))}return e.length>0?`ORDER BY ${e.join(", ")}`:""}}class b{#wr;constructor(e){this.#wr=e}build(){return`LIMIT ${this.#wr}`}}class C{#mr;#hr;constructor(e,t){this.#mr=e,this.#hr=t}build(){const e=[];return this.#mr.joins.forEach((t=>{e.push(t.target.alias?`${t.type.getQueryFragment()} "${t.target.name}" AS "${t.target.alias}" ON ${this._getJoinFields(t)}`:`${t.type.getQueryFragment()} "${t.target.name}" ON ${this._getJoinFields(t)}`)})),e.join(" ")}_getJoinFields(e){const{source:t,target:r}=e;return t.fields.map(((e,i)=>{const s=this.#hr.getQuotedName(e,t.alias??t.name),n=this.#hr.getQuotedName(r.fields[i],r.alias??r.name);return`(${s} = ${n} OR (${s} IS NULL AND ${n} IS NULL))`})).join(" AND ")}}const E="grouping_";class S{#mr;#pr;#hr;#Cr;#fr;#yr;#Ar;constructor(e,t,r,i){this.#mr=e,this.#pr=t,this.#hr=r,this.#Cr=i}setTotals(e){return this}setSubtotals(e){return this}setRowTotals(e){return this}setColumnTotals(e){return this}setMultiplier(e){return this.#fr=e,this}setRowLimit(e){return this.#Ar=e,this}build(){this._buildTableAliases();const e=[];if(this._shouldApplyNestedQueryForTotals()){const t=this._extractSubQueryWithTotals();this._buildSelectStatement(e,t,!1),this._buildFromStatement(e,t),this._buildGroupByStatement(e,!0,!1,!0),this._buildHavingStatement(e,!0,!1,!0)}else if(this.#mr.derivedSource){const t=this._extractSubQueryWithNonDerivedSources();this._buildSelectStatement(e,t),this._buildFromStatement(e,t)}else this._buildSelectStatement(e),this._buildFromStatement(e),this._buildJoinStatements(e),this._buildColumnFilterJoinStaments(e),this._buildWhereStatement(e),this._buildGroupByStatement(e),this._buildHavingStatement(e);return this._buildOrderByStatement(e),this._buildLimitStatement(e),e.filter(Boolean).join(" ")}_buildTableAliases(){null==this.#yr&&(this._isGroupedWithColumnFilters()||this.#mr.isJoined)&&(this.#yr=this.#mr.sources.map(((e,t)=>"q"+(t+1))))}_buildSelectStatement(e,t,r=!0){e.push(new c({query:this.#mr,extendedMetadata:this.#pr,multiplier:this.#fr,tableAliases:this.#yr,dimensionFieldTableAlias:r?this._getOuterTableAlias():void 0,sqlQueryFormatter:this.#hr,sqlQueryCapability:this.#Cr,subQuery:t}).build())}_buildFromStatement(e,t){const r=this.#mr.getSource(0);null==t&&r.filtersCount>0&&r.isGroupedByAll||e.push(new h(r,this.#pr,this.#hr,this.#Cr,null!=t?"t":this._getOuterTableAlias(),t).build())}_buildJoinStatements(e){!this.#mr.isJoined||this.#mr.hasColumnFilters()&&this.#mr.isGroupedByAll||e.push(new C(this.#mr,this.#hr).build())}_buildColumnFilterJoinStaments(e){if(this._isGroupedWithColumnFilters())for(let t=0;t<this.#mr.sources.length;t++){const r=this.#mr.sources[t];if(r.filters.length>0){const s=new i.Z(r.json);s.setFilters([]);const n=(0,l.makeMutableQuery)((0,l.makeQueryJson)({sources:[s.json]}));r.filters.forEach((e=>{n.addSourceFilter(this.#mr.getSourceFilterKey(r.name),e.json)})),e.push(new p({query:n,extendedMetadata:this.#pr,tableAlias:this.#yr[t],outerTableGroups:this.#mr.sources[0].groups,outerTableAlias:this._getOuterTableAlias(),sqlQueryFormatter:this.#hr,sqlQueryCapability:this.#Cr}).build())}}}_buildWhereStatement(e){const t=this.#mr.getSource(0),r=this.#mr.getSourceFiltersBySourceName(t.name);r&&e.push(new g.Z(r,this.#pr,this.#hr,this._getOuterTableAlias()).build())}_buildGroupByStatement(e,t=!1,r=!0,i=!1){const s=this.#mr.getSource(0);s.isGrouped&&!s.isGroupedByAll&&e.push(new m({dimensionFieldTableAlias:r?this._getOuterTableAlias():void 0,sqlQueryFormatter:this.#hr,sqlQueryCapability:this.#Cr,query:this.#mr,hasSubQuery:t,useColumName:i}).build())}_buildHavingStatement(e,t=!1,r=!0,i=!1){(this.#mr.aggregateFilters.length||!this.#mr.hasColumnGroups()&&(this.#mr.hasColumnTotals()||this.#mr.hasColumnSubtotals()))&&e.push(new f(this.#mr,t,this.#hr,this.#Cr,r?this._getOuterTableAlias():void 0,i).build())}_buildOrderByStatement(e){e.push(new y(this.#mr,this.#hr,this.#Cr).build())}_buildLimitStatement(e){const t=null==this.#Ar?this.#mr.limit:this.#Ar;null!=t&&e.push(new b(t).build())}_extractSubQueryWithNonDerivedSources(){const e=(0,l.makeMutableQuery)(this.#mr.json);return e.setOrders([]),e.removeSource(this.#mr.sources.length-1),e.deleteLimit(),e.setColumnTotals([]),e}_extractSubQueryWithTotals(){const e=(0,l.makeMutableQuery)(this.#mr.json);return e.setColumnTotals([]),e.setRowTotals([]),e}_isGroupedWithColumnFilters(){return this.#mr.hasColumnFilters()&&this.#mr.isGrouped&&!this.#mr.isGroupedByAll}_shouldApplyNestedQueryForTotals(){return(this.#mr.hasColumnFilters()||null!=this.#mr.derivedSource)&&this.#mr.hasColumnOrRowRelatedTotals()}_getOuterTableAlias(){if(!this.#yr)return;const e=this.#mr.getSource(0);return e.isJoined?e.joins[0].source.alias??e.joins[0].source.name:e.filters.length>0?"q":this.#yr[0]}}},46820:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(54624),s=r(92425);class n{static make(e,t,r){if(e===s.Z.SOBJECT)throw new Error("Invalid SQL Type");return new i.Z(t,r,e.sqlQueryFormatter,e.sqlQueryCapability)}}},64858:(e,t,r)=>{"use strict";r.d(t,{V9:()=>o,_c:()=>s,rJ:()=>n});var i=r(74978);function s(e){if("number"==typeof e){const t=new Date(e);return[t.getUTCFullYear(),(0,i.leftPad)(String(t.getUTCMonth()+1),2,"0"),(0,i.leftPad)(String(t.getUTCDate()),2,"0")].join("-")}return e}function n(e,t,r){const{sourceAlias:i,columnName:s}=t.getSourceAliasAndColumnName(e.columnName);return`GROUPING(${t.getQuotedName(s,i??r)})`}function o(e,t,r){const{sourceAlias:i,columnName:s}=t.getSourceAliasAndColumnName(e.fieldName);return e.dateFunction?t.getDatePartFunctionTerm(e.dateFunction,s,i??r):t.getQuotedName(s,i??r)}},41184:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(14201),s=r(98818);class n{#Dr;constructor(e){this.#Dr=e}serializeLeaf(e){return this.#Dr[e-1]}serializeUnaryOperation(e,t){return`${e} (${t})`}serializeBooleanOperation(e,t,r){let i=t.join(` ${e} `);return r&&(i=`(${i})`),i}}var o=r(23634);class a{#Lr;#pr;#hr;#gr;constructor(e,t,r,i){this.#Lr=e,this.#pr=t,this.#hr=r,this.#gr=i}build(){const e=this.#Lr.filters.map((e=>new o.Z(e,this.#hr,this.#pr,this.#gr).build()));return this.#Lr.booleanFilterLogic?`WHERE ${this._buildBooleanFilterWhereStatement(e,this.#Lr.booleanFilterLogic)}`:`WHERE ${e.join(" AND ")}`}_buildBooleanFilterWhereStatement(e,t){const r=new i.ZP(null,!1);if(r.validate(t,e.length),r.error)throw new Error(r.error);return new s.Z(new n(e)).traverse(r.getTree())}}},86060:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(61506),s=r(16045),n=r(78420),o=r(95838);class a{static getDatasetIdentifiers(e){try{return o.Z.parse(e,!0).getDatasetIdentifiers()}catch(e){return i.Z.get(s.Z).logError(e,"Failed to get dataset identifiers",n.Z.DEGRADED),new Set}}}},95838:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var i=r(51412),s=r(51007),n=r(2617),o=r(78497),a=r(18566);class l{constructor(e){this._statements=e}getStatements(){return this._statements}getLastInResultStream(e,t=!1,r=!1){const i=new Set,o=this._statements.length-1;this._statements[o].getInputStreams().forEach((e=>i.add(e))),i.add(this._statements[o].getOutputStream());for(let l=o;l>=0;l--){const o=this._statements[l];if(t&&o instanceof n.Z||r&&o instanceof a.Z)return s.ZP.none();if(!o.getOutputStream()||i.has(o.getOutputStream())){if(o instanceof e.getClass())return s.ZP.some({index:l,statement:o});o.getInputStreams().forEach((e=>i.add(e)))}}return s.ZP.none()}getDatasetIdentifiers(){const e=new Set;for(const t of this._statements)t instanceof o.Z&&e.add(t.getDatasetIdentifier());return e}getOutputStreamNames(){const e=new Set;for(const t of this._statements){const r=t.getOutputStream();null!=r&&""!==r&&e.add(r)}return e}}var u=r(51058);class d extends u.Z{static fromSaql(e){return new d(e,void 0,[])}}var c=r(98623);const h=/('((\\'|[^'])*?)')|("([^"]*?)")|(?:--.*)|(?:\/\/.*)|(?:\/\*(?:\*(?!\/)|[^*])*\*\/)/g,p=/<STRING_\d+>/g,g=/<COMMENT_\d+>/g,m=/;/,_=/(?:\s*'?\w+'?\s*=\s*)*([a-z]+).*/i,f=/\s*(\w+\s*=\s*load\s*"[\w/.]+"\s*(?:sample\(.*\))?\s*(?:repeatable\(.*\))?\s*;)\s*/gi,y=/\s*(\w+)\s*=\s*load\s*"([\w/.]+)"\s*(?:sample\(.*\))?\s*(?:repeatable\(.*\))?\s*;\s*/i,b=new i.Z(1e3);class C{static parse(e,t=!1){const r=t?`partial:{${e}}`:e;return b.getOrPut(r,(()=>new l(t?C._getLoadStatements(e):C._getSaqlStatements(e))))}static _getSaqlStatements(e){const t=[],r=e.match(h)||[],i=new Map;let s=0;return e.replace(h,(()=>{let e;return e=C._isStringLiteral(r[s])?`<STRING_${s}>`:`<COMMENT_${s}>`,i.set(e,r[s]),s++,e})).split(g).join("").trim().split(m).forEach(((e,r)=>{if(!e.trim().length)return;const s=e.replace(p,(e=>{const t=i.get(e);if(t)return t;throw new Error("Error occurred while replacing string literals in SAQL.")})).trim(),n=s.match(_);if(!n)throw new Error("SAQL statements should contain an operation.");const[,o]=n;t.push(c.Z.getClassFromCode(o).fromSaql(s))})),t}static _getLoadStatements(e){const t=[];return e.split(f).forEach(((e,r)=>{if(e.length)if(r%2==1){if(!e.match(y))throw new Error("Load statement should contain into variable and dataset identifier.");t.push(o.Z.fromSaql(e))}else t.push(d.fromSaql(e))})),t}static _isStringLiteral(e){const t=e.charAt(0),r=e.charAt(e.length-1);return"'"===t&&"'"===r||'"'===t&&'"'===r}}},38638:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51058);const s=/(?:\s*'?(\w+)'?\s*=\s*)?cogroup(?:\s+|\s*'?)(\w+)'?.*\s*/;class n extends i.Z{static fromSaql(e){const t=e.match(s);if(!t)throw new Error(`Error thrown when parsing SAQL statement: ${e}`);const[,r,i]=t;return new n(e,r,[i])}}},2617:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51058);const s=/(?:\s*'?(\w+)'?\s*=\s*)?foreach(?:\s+|\s*'?)(\w+)'?.*\s*/;class n extends i.Z{static fromSaql(e){const t=e.match(s);if(!t)throw new Error(`Error thrown when parsing SAQL statement: ${e}`);const[,r,i]=t;return new n(e,r,[i])}}},60972:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51058);const s=/(?:\s*'?(\w+)'?\s*=\s*)?group(?:\s+|\s*'?)(\w+)'?.*\s*/;class n extends i.Z{static fromSaql(e){const t=e.match(s);if(!t)throw new Error(`Error thrown when parsing SAQL statement: ${e}`);const[,r,i]=t;return new n(e,r,[i])}}},65958:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51058);const s=/(?:\s*'?(\w+)'?\s*=\s*)?limit(?:\s+|\s*'?)(\w+)'?.*\s*/;class n extends i.Z{static fromSaql(e){const t=e.match(s);if(!t)throw new Error(`Error thrown when parsing SAQL statement: ${e}`);const[,r,i]=t;return new n(e,r,[i])}}},78497:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51058);const s=/\s*'?(\w+)'?\s*=\s*load\s*"([\w/.]+)"\s*/i;class n extends i.Z{static fromSaql(e){const t=e.match(s);if(!t)throw new Error(`Error thrown when parsing SAQL statement: ${e}`);const[,r,i]=t;return new n(e,r,[],i)}constructor(e,t,r,i){super(e,t,r),this._outputStream=t,this._datasetIdentifier=i}getDatasetIdentifier(){return this._datasetIdentifier}}},18957:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51058);const s=/(?:\s*'?(\w+)'?\s*=\s*)?offset(?:\s+|\s*'?)(\w+)'?.*\s*/;class n extends i.Z{static fromSaql(e){const t=e.match(s);if(!t)throw new Error(`Error thrown when parsing SAQL statement: ${e}`);const[,r,i]=t;return new n(e,r,[i])}}},34778:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var i=r(95545),s=r(44244),n=r(51058);class o extends n.Z{static fromSaql(e){try{const t=i.parser.parse(e),{list:r,outputStream:n,inputStream:a}=t,l=r[0],u="arr"===l[1][0]?l[1][1]:l,d=new Map;for(let e of u){if("ord"!==e[0])continue;const t=e[2]?s.Z.DESC.getValue():s.Z.ASC.getValue();let r;if(e=e[1],"'"===e[0]||'"'===e[0])r=e[1];else{if("."!==e[0])throw new Error("Error occurred when parsing order statement: no field found.");r=e[2][1]}d.set(r,t)}return new o(e,n,[a],d)}catch(e){throw new Error("Error occurred when parsing order statement.")}}static fromSortInfo(e,t,r){const i=[];r.forEach(((e,t)=>{const r=i.length>0?", ":"";i.push(`'${r}${t}' ${e}`)}));const s=`order ${t[0]} by (${i.join("")})`;return new o(e?`${e} = `+s:s,e,t,r)}constructor(e,t,r,i){super(e,t,r),this._outputStream=t,this._inputStreams=r,this._sortInformation=i}getOutputStream(){return this._outputStream}getSortInformation(){return this._sortInformation}toSaql(){return this._originalSaql}}},51058:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});const i=/(?:\s*'?(\w+)'?\s*=\s*)?(?:[a-z]+)(?:\s+|\s*'?)(\w+)'?.*\s*/;class s{static fromSaql(e){const t=e.match(i);if(!t)throw new Error(`Error thrown when parsing SAQL statement: ${e}`);const[,r,n]=t;return new s(e,r,[n])}constructor(e,t,r=[]){this._originalSaql=e,this._outputStream=t,this._inputStreams=r}getOutputStream(){return this._outputStream}getInputStreams(){return this._inputStreams}getOriginalSaql(){return this._originalSaql}}},98623:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(69370),s=r(51058),n=r(2617),o=r(65958),a=r(78497),l=r(18957),u=r(34778),d=r(18566),c=r(60972),h=r(38638);class p extends i.Z{constructor(e){super(),this._saqlStatementClass=e}static getClassFromCode(e){return p.fromCode(e).getClass()}getClass(){return this._saqlStatementClass}}p.add("COGROUP","cogroup",new p(h.Z)).add("LOAD","load",new p(a.Z)).add("FILL","fill",new p(s.Z)).add("FILTER","filter",new p(s.Z)).add("FOREACH","foreach",new p(n.Z)).add("GROUP","group",new p(c.Z)).add("UNION","union",new p(d.Z)).add("ORDER","order",new p(u.Z)).add("LIMIT","limit",new p(o.Z)).add("OFFSET","offset",new p(l.Z)).add("TIMESERIES","timeseries",new p(s.Z)).finish()},18566:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(51058);const s=/(?:\s*'?(\w+)'?\s*=\s*)?union(?:\s+|\s*'?)(\w+)'?\s*,\s*(?:\s+|\s*'?)(\w+)'?/;class n extends i.Z{static fromSaql(e){const t=e.match(s);if(!t)throw new Error(`Error thrown when parsing SAQL statement: ${e}`);const[,r,i,o]=t;return new n(e,r,[i,o])}}},72831:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(31058);class n{deletable=!1;constructor(e,t,r,i){this.lowerBound=e,this.higherBound=t,this.lowest=r,this.highest=i,this.canAddMore=!this.highest}getLowerBound(){return this.lowerBound}getHigherBound(){return this.higherBound}getCanAddMore(){return this.canAddMore}isDeletable(){return this.deletable}isLowest(){return this.lowest}isHighest(){return this.highest}boundError(){return this.errorAtBound}setCanAddMore(e){this.canAddMore=e}setLowerBound(e){this.lowerBound=e}setHigherBound(e){this.higherBound=e}setDeletable(e){this.deletable=e}setIsHighest(e){this.highest=e}setIsLowest(e){this.lowest=e}setErrorAtBound(e){this.errorAtBound=e}flatten(e){return{canAddMore:this.canAddMore,isDeletable:this.isDeletable(),lowerBound:null!=this.lowerBound?this.lowerBound.toString():void 0,higherBound:null!=this.higherBound?this.higherBound.toString():void 0,id:e,isLowest:this.isLowest(),isHighest:this.isHighest(),boundError:this.errorAtBound}}clearErrors(){this.setErrorAtBound()}validateAndSetError(e){const t=null!=this.higherBound||this.isHighest()&&null!=this.lowerBound,r=this.isLowest()||this.isHighest()||(0,s.He)(this.lowerBound)<(0,s.He)(this.higherBound);return e&&(t?r?this.setErrorAtBound():this.setErrorAtBound(i.Z.getLabel("Rpt_Validation","bkt_range_min_max")):this.setErrorAtBound(i.Z.getLabel("ReportBuilder","requiredError"))),t&&r}}},76734:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(27223);class s{constructor(e=[],t){this._numberRanges=e,this._maxNumberOfRange=t,this._minNumberOfRange=2,this._updateRangeAttributes()}getRanges(){return this._numberRanges}flatten(){return Array.from(this._numberRanges).map(((e,t)=>e.flatten(t)))}deleteRange(e){this._numberRanges[e].isHighest()?(this._numberRanges[e-1].setHigherBound(this._numberRanges[e].getHigherBound()),this._numberRanges[e-1].setIsHighest(!0)):(this._numberRanges[e+1].setLowerBound(this._numberRanges[e].getLowerBound()),this._numberRanges[e+1].setIsLowest(this._numberRanges[e].isLowest())),this._numberRanges.splice(e,1),this._updateRangeAttributes()}addRange(e){const t=this._createDefaultRange(e);this._numberRanges[e+1].setLowerBound(null),this._numberRanges.splice(e+1,0,t),this._updateRangeAttributes()}_createDefaultRange(e){throw i.notImplemented()}updateRangeBound(e,t){this._numberRanges[e].setHigherBound(t),this._numberRanges[e+1].setLowerBound(t)}isValid(){return this._isValid??this.validateAndSetError(!1)}isAnyRangeDeletable(){return Array.from(this.getRanges()).some((e=>e.isDeletable()))}isAtMaxRangeCount(){return this.getRanges().length===this._maxNumberOfRange}clearErrors(){for(let e=0;e<this._numberRanges.length;e++)this._numberRanges[e].clearErrors()}validateAndSetError(e){let t=!0;for(let r=0;r<this._numberRanges.length;r++){t=this._numberRanges[r].validateAndSetError(e)&&!!t}return this._isValid=t,t}_updateRangeAttributes(){const e=this._numberRanges.length,t=e<this._maxNumberOfRange,r=e>this._minNumberOfRange;for(let i=0;i<e;i++){const s=this._numberRanges[i];s.setCanAddMore(i!==e-1&&t),s.setDeletable(r)}}}},90493:(e,t,r)=>{"use strict";r.r(t),r.d(t,{APPLICATION:()=>l,ASTRO:()=>D,BROWSE:()=>F,COLLECTION:()=>u,COMPARISON:()=>v,COMPONENT:()=>h,CONNECTIONS:()=>N,CREATED_BY_ME:()=>W,DASHBOARD:()=>d,DATAFLOWS:()=>M,DATAFLOW_EDITOR:()=>m,DATASET:()=>y,DATASETS:()=>O,DATA_MANAGER:()=>p,DATA_MANAGER_3:()=>Q,DATA_MANAGER_3_CONNECTIONS:()=>K,DATA_MANAGER_3_DATA:()=>Y,DATA_MANAGER_3_DATASET_DETAILS:()=>X,DATA_MANAGER_3_RECIPES:()=>J,DATA_PREP:()=>g,DISCOVERY_VERSION:()=>w,EDIT_DATASET:()=>b,FAVORITES:()=>k,GOAL:()=>I,HOME:()=>a,LEARNING_CENTER:()=>V,LENS:()=>c,LIGHTNING_DASHBOARD:()=>q,LIGHTNING_DASHBOARD_FOLDER:()=>$,MODEL_CARD:()=>R,MODEL_MANAGER:()=>E,NOTIFICATIONS:()=>G,OPTIMIZATION_DEF:()=>A,ORCHESTRATION:()=>f,PAGE_ID_QUERY_PARAM:()=>P,PERSONAL_SETTING_CLASSIC_PAGE:()=>te,PERSONAL_SETTING_PAGE:()=>ee,RECIPE:()=>_,RECIPES:()=>L,REPORT:()=>j,REPORT_FOLDER:()=>z,SAVED_VIEW_ID_QUERY_PARAM:()=>x,SHARED_WITH_ME:()=>B,STATE:()=>Z,STORY:()=>S,STORY_HISTORY:()=>T,SUBSCRIPTIONS:()=>U,TABLEAU_DASHBOARD:()=>re,TABLEAU_WORKBOOK:()=>ie,TRENDED_DATASET:()=>C,WATCH:()=>se,WATCHLIST:()=>H,buildPath:()=>ne,getAssetType:()=>ae,getBaseRoute:()=>oe,getBaseRouteFromTarget:()=>ue,getInstanceIdFromTarget:()=>de,isValidEntityId:()=>le});var i=r(61506),s=r(18111),n=r(40651),o=r(67951);const a="home",l="application",u="collection",d="dashboard",c="lens",h="component",p="dataManager",g="dataPrep",m="dataflowEditor",_="recipe",f="orchestration",y="dataset",b="editDataset",C="trendedDataset",E="modelManager",S="story",T="history",I="goal",v="comparison",R="modelCard",w="showEdVersion",A="optimization",D="astro",L="recipes",M="dataflows",N="connections",O="datasets",P="pageId",x="savedViewId",Z="state",F="browse",k="favorites",B="sharedWithMe",W="createdByMe",G="notifications",U="subscriptions",H="watchlist",V="learn",j="report",q="lightningdashboard",z="reportFolder",$="lightningDashboardFolder",Q="lightning/n/standard-AnalyticsDataManager",Y=Q+"?c__page=data&c__license=Wave",K=Q+"?c__page=connections&c__license=Wave",J=Q+"?c__page=recipes&c__license=Wave",X="lightning/r/EdgeMart",ee="lightning/settings/personal/PersonalInformation/home",te="setup/personalInformationSetup.apexp?retURL=/ui/setup/Setup?setupid=PersonalInfo&setupid=PersonalInformation",re="tableauDashboard",ie="tableauWorkbook",se="watch";function ne(e,t,r){let i="/"+e;return null!=t&&(i+="/"+t),null!=r&&(i+="/"+r),i}function oe(e){switch(e){case n.Z.FOLDER:return l;case n.Z.TABLEAU_DASHBOARD:return re;case n.Z.TABLEAU_WORKBOOK:return ie;default:return e.getCode()}}function ae(e){switch(e){case l:return n.Z.FOLDER;case re:return n.Z.TABLEAU_DASHBOARD;case ie:return n.Z.TABLEAU_WORKBOOK;default:return n.Z.fromCode(e)}}function le(e,t){const r=i.Z.get(s);return!r.isCmsMode()||null==r.getSanitizedInitialRoute()||(o.isNew(t)||e.isValidId(t))}function ue(e){return e.getBaseRoute()===a?e.getInstanceId():e.getBaseRoute()}function de(e){if(e.getBaseRoute()===a){const t=e.getExtendedHash(),r=t?t.split("/"):[];return r.length>0?r[0]:void 0}return e.getInstanceId()}},56263:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var i=r(87670),s=r(1611);class n extends i.Z{constructor(e){super(),this.columnType=e}getMetadataColumnType(){return this.columnType}}n.add("STRING","string",new n(s.Z.DIMENSION)).add("DATE","date",new n(s.Z.DATE)).add("NUMBER","number",new n(s.Z.MEASURE)).add("BOOLEAN","boolean",new n(s.Z.DIMENSION)).finish()},6204:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var i=r(8429),s=r(61915),n=r(56263),o=r(29937);const a={none:new Set,number:new Set([n.default.NUMBER]),date:new Set([n.default.DATE]),string:new Set([n.default.STRING]),all:new Set(n.default.enums())};class l extends s.Z{constructor(e,t,r,i,s,n,o=!1,a=!1){super(e,t,r,i,s,n,o,a)}getDescription(){return i.Z.getLabel("SaqlFunctionDescription",this._descriptionLabel)}}l.add("AVG","avg",new l(o.Z.AGGREGATE,a.number,"avgDescription","avg()",4,"avg(${1:field})")).add("AVERAGE","average",new l(o.Z.AGGREGATE,a.number,"avgDescription","average()",8,"average(${1:field})")).add("COUNT","count",new l(o.Z.AGGREGATE,a.number,"countDescription","count()",6,"count(${1:stream})")).add("FIRST","first",new l(o.Z.AGGREGATE,a.all,"firstDescription","first()",6,"first(${1:field})")).add("LAST","last",new l(o.Z.AGGREGATE,a.all,"lastDescription","last()",5,"last(${1:field})")).add("MAX","max",new l(o.Z.AGGREGATE,a.all,"maxDescription","max()",4,"max(${1:field})")).add("MEDIAN","median",new l(o.Z.AGGREGATE,a.number,"medianDescription","median()",7,"median(${1:field})")).add("MIN","min",new l(o.Z.AGGREGATE,a.all,"minDescription","min()",4,"min(${1:field})")).add("SUM","sum",new l(o.Z.AGGREGATE,a.number,"sumDescription","sum()",4,"sum(${1:field})")).add("UNIQUE","unique",new l(o.Z.AGGREGATE,a.number,"uniqueDescription","unique()",7,"unique(${1:field})")).add("STDDEV","stddev",new l(o.Z.AGGREGATE,a.number,"stddevDescription","stddev()",7,"stddev(${1:field})")).add("STDDEVP","stddevp",new l(o.Z.AGGREGATE,a.number,"stddevpDescription","stddevp()",8,"stddevp(${1:field})")).add("VAR","var",new l(o.Z.AGGREGATE,a.number,"varDescription","var()",4,"var(${1:field})")).add("VARP","varp",new l(o.Z.AGGREGATE,a.number,"varpDescription","varp()",5,"varp(${1:field})")).add("PERCENTILE_CONT","percentile_cont",new l(o.Z.AGGREGATE,a.number,"percentile_contDescription","percentile_cont(0.95) within group (order by )",45,"percentile_cont(${1:number})",!0)).add("PERCENTILE_DISC","percentile_disc",new l(o.Z.AGGREGATE,a.number,"percentile_discDescription","percentile_disc(0.95) within group (order by )",45,"percentile_disc(${1:number})",!0)).add("REGR_INTERCEPT","regr_intercept",new l(o.Z.AGGREGATE,a.number,"regr_interceptDescription","regr_intercept(y, x)",19,"regr_intercept(${1:field_y}, ${2:field_x})")).add("REGR_SLOPE","regr_slope",new l(o.Z.AGGREGATE,a.number,"regr_slopeDescription","regr_slope(y, x)",15,"regr_slope(${1:field_y}, ${2:field_x})")).add("REGR_R2","regr_r2",new l(o.Z.AGGREGATE,a.number,"regr_r2Description","regr_r2(y, x)",12,"regr_r2(${1:field_y}, ${2:field_x})")).add("GROUPING","grouping",new l(o.Z.AGGREGATE,a.number,"groupingDescription","grouping()",9,"grouping(${1:field})")).add("DAYS_BETWEEN","daysBetween",new l(o.Z.DATE,a.number,"daysBetweenDescription","daysBetween(start, end)",22,"daysBetween(${1:start_date}, ${2:end_date})")).add("DATE_DIFF","date_diff",new l(o.Z.DATE,a.number,"date_diffDescription",'date_diff("year", startdate, endate)',35,"date_diff(${1:date_part}, ${2:start_date}, ${3:end_date})")).add("NOW","now",new l(o.Z.DATE,a.date,"nowDescription","now()",4,"now()")).add("DATE","date",new l(o.Z.DATE,a.date,"dateDescription","date(year, month, day)",21,"date(${1:year}, ${2:month}, ${3:day})")).add("TO_DATE","toDate",new l(o.Z.DATE,a.date,"toDateDescription","toDate()",7,"toDate(${1:string}, ${2:formatString})")).add("DATE_TO_EPOCH","date_to_epoch",new l(o.Z.DATE,a.number,"date_to_epochDescription","date_to_epoch()",14,"date_to_epoch(${1:date})")).add("DATE_TO_STRING","date_to_string",new l(o.Z.DATE,a.string,"date_to_stringDescription",'date_to_string(date, "yyyy-MM-dd HH:mm:ss")',18,"date_to_string(${1:date}, ${2:formatString})")).add("TO_STRING","toString",new l(o.Z.DATE,a.string,"toStringDescription",'toString(date, "yyyy-MM-dd HH:mm:ss")',12,"toString(${1:date}, ${2:formatString})")).add("DATE_RANGE","dateRange",new l(o.Z.DATE,a.none,"dateRangeDescription","dateRange()",10,"dateRange(${1:startArray_y_m_d}, ${2:endArray_y_m_d})")).add("DAY_IN_WEEK","day_in_week",new l(o.Z.DATE,a.number,"day_in_weekDescription","day_in_week()",12,"day_in_week(${1:date})")).add("DAY_IN_MONTH","day_in_month",new l(o.Z.DATE,a.number,"day_in_monthDescription","day_in_month()",13,"day_in_month(${1:date})")).add("DAY_IN_QUARTER","day_in_quarter",new l(o.Z.DATE,a.number,"day_in_quarterDescription","day_in_quarter()",15,"day_in_quarter(${1:date})")).add("DAY_IN_YEAR","day_in_year",new l(o.Z.DATE,a.number,"day_in_yearDescription","day_in_year()",12,"day_in_year(${1:date})")).add("WEEK_FIRST_DAY","week_first_day",new l(o.Z.DATE,a.date,"week_first_dayDescription","week_first_day()",15,"week_first_day(${1:date})")).add("FISCAL_WEEK_FIRST_DAY","fiscal_week_first_day",new l(o.Z.DATE,a.date,"fiscal_week_first_dayDescription","fiscal_week_first_day()",22,"fiscal_week_first_day(${1:date})")).add("MONTH_FIRST_DAY","month_first_day",new l(o.Z.DATE,a.date,"month_first_dayDescription","month_first_day()",16,"month_first_day(${1:date})")).add("FISCAL_MONTH_FIRST_DAY","fiscal_month_first_day",new l(o.Z.DATE,a.date,"fiscal_month_first_dayDescription","fiscal_month_first_day()",23,"fiscal_month_first_day(${1:date})")).add("QUARTER_FIRST_DAY","quarter_first_day",new l(o.Z.DATE,a.date,"quarter_first_dayDescription","quarter_first_day()",18,"quarter_first_day(${1:date})")).add("FISCAL_QUARTER_FIRST_DAY","fiscal_quarter_first_day",new l(o.Z.DATE,a.date,"fiscal_quarter_first_dayDescription","fiscal_quarter_first_day()",25,"fiscal_quarter_first_day(${1:date})")).add("YEAR_FIRST_DAY","year_first_day",new l(o.Z.DATE,a.date,"year_first_dayDescription","year_first_day()",15,"year_first_day(${1:date})")).add("FISCAL_YEAR_FIRST_DAY","fiscal_year_first_day",new l(o.Z.DATE,a.date,"fiscal_year_first_dayDescription","fiscal_year_first_day()",22,"fiscal_year_first_day(${1:date})")).add("WEEK_LAST_DAY","week_last_day",new l(o.Z.DATE,a.date,"week_last_dayDescription","week_last_day()",14,"week_last_day(${1:date})")).add("FISCAL_WEEK_LAST_DAY","fiscal_week_last_day",new l(o.Z.DATE,a.date,"fiscal_week_last_dayDescription","fiscal_week_last_day()",21,"fiscal_week_last_day(${1:date})")).add("MONTH_LAST_DAY","month_last_day",new l(o.Z.DATE,a.date,"month_last_dayDescription","month_last_day()",15,"month_last_day(${1:date})")).add("FISCAL_MONTH_LAST_DAY","fiscal_month_last_day",new l(o.Z.DATE,a.date,"fiscal_month_last_dayDescription","fiscal_month_last_day()",22,"fiscal_month_last_day(${1:date})")).add("QUARTER_LAST_DAY","quarter_last_day",new l(o.Z.DATE,a.date,"quarter_last_dayDescription","quarter_last_day()",17,"quarter_last_day(${1:date})")).add("FISCAL_QUARTER_LAST_DAY","fiscal_quarter_last_day",new l(o.Z.DATE,a.date,"fiscal_quarter_last_dayDescription","fiscal_quarter_last_day()",24,"fiscal_quarter_last_day(${1:date})")).add("YEAR_LAST_DAY","year_last_day",new l(o.Z.DATE,a.date,"year_last_dayDescription","year_last_day()",14,"year_last_day(${1:date})")).add("FISCAL_YEAR_LAST_DAY","fiscal_year_last_day",new l(o.Z.DATE,a.date,"fiscal_year_last_dayDescription","fiscal_year_last_day()",21,"fiscal_year_last_day(${1:date})")).add("MONTH_DAYS","month_days",new l(o.Z.DATE,a.number,"month_daysDescription","month_days()",11,"month_days(${1:date})")).add("QUARTER_DAYS","quarter_days",new l(o.Z.DATE,a.number,"quarter_daysDescription","quarter_days()",13,"quarter_days(${1:date})")).add("YEAR_DAYS","year_days",new l(o.Z.DATE,a.number,"year_daysDescription","year_days()",10,"year_days(${1:date})")).add("YEAR","year",new l(o.Z.DATE,a.number,"yearDescription","year()",5,"year()",!1,!0)).add("FISCAL_YEAR","fiscalYear",new l(o.Z.DATE,a.number,"fiscalYearDescription","fiscalYear()",11,"fiscalYear()")).add("QUARTER","quarter",new l(o.Z.DATE,a.number,"quarterDescription","quarter()",8,"quarter()",!1,!0)).add("FISCAL_QUARTER","fiscalQuarter",new l(o.Z.DATE,a.number,"fiscalQuarterDescription","fiscalQuarter()",14,"fiscalQuarter()")).add("MONTH","month",new l(o.Z.DATE,a.number,"monthDescription","month()",6,"month()",!1,!0)).add("FISCAL_MONTH","fiscalMonth",new l(o.Z.DATE,a.number,"fiscalMonthDescription","fiscalMonth()",12,"fiscalMonth()")).add("WEEK","week",new l(o.Z.DATE,a.number,"weekDescription","week()",5,"week()",!1,!0)).add("FISCAL_WEEK","fiscalWeek",new l(o.Z.DATE,a.number,"fiscalWeekDescription","fiscalWeek()",11,"fiscalWeek()")).add("DAY","day",new l(o.Z.DATE,a.number,"dayDescription","day()",4,"day()",!1,!0)).add("HOUR","hour",new l(o.Z.DATE,a.number,"hourDescription","hour()",5,"hour()",!1,!0)).add("MINUTE","minute",new l(o.Z.DATE,a.number,"minuteDescription","minute()",7,"minute()",!1,!0)).add("SECOND","second",new l(o.Z.DATE,a.number,"secondDescription","second()",7,"second()",!1,!0)).add("EPOCH_DAY","epochDay",new l(o.Z.DATE,a.number,"epochDayDescription","epochDay()",9,"epochDay()")).add("EPOCH_SECOND","epochSecond",new l(o.Z.DATE,a.number,"epochSecondDescription","epochSecond()",12,"epochSecond()")).add("ASCII","ascii",new l(o.Z.STRING,a.number,"asciiDescription","ascii()",6,"ascii(${1:character})")).add("CHR","char",new l(o.Z.STRING,a.string,"chrDescription","chr()",4,"chr(${1:integer})")).add("ENDS_WITH","ends_with",new l(o.Z.STRING,a.string,"ends_withDescription","ends_with(string, suffix)",24,"ends_with(${1:string}, ${2:suffix})")).add("INDEX_OF","index_of",new l(o.Z.STRING,a.number,"index_ofDescription","index_of(string, search)",23,"index_of(${1:string}, ${2:searchStr}, ${3:position}, ${4:occurence})")).add("LEN","len",new l(o.Z.STRING,a.number,"lenDescription","len()",4,"len(${1:string})")).add("LOWER","lower",new l(o.Z.STRING,a.string,"lowerDescription","lower()",6,"lower(${1:string})")).add("LTRIM","ltrim",new l(o.Z.STRING,a.string,"ltrimDescription","ltrim()",6,"ltrim(${1:string}, ${2:substr})")).add("NUMBER_TO_STRING","number_to_string",new l(o.Z.STRING,a.string,"number_to_stringDescription",'number_to_string(number, "#,###.##")',23,"number_to_string(${1:number}, ${2:number_format})")).add("REPLACE","replace",new l(o.Z.STRING,a.string,"replaceDescription","replace(string, search, replace)",31,"replace(${1:sting}, ${2:searchStr}, ${3:replaceStr})")).add("RTRIM","rtrim",new l(o.Z.STRING,a.string,"rtrimDescription","rtrim()",6,"rtrim(${1:string}, ${2:substr})")).add("STARTS_WITH","starts_with",new l(o.Z.STRING,a.string,"starts_withDescription","starts_with(string, prefix)",26,"starts_with(${1:string}, ${2:prefix})")).add("STRING_TO_NUMBER","string_to_number",new l(o.Z.STRING,a.number,"string_to_numberDescription","string_to_number()",17,"string_to_number(${1:string})")).add("SUBSTR","substr",new l(o.Z.STRING,a.string,"substrDescription","substr()",7,"substr(${1:string}, ${2:position}, ${3:length})")).add("TRIM","trim",new l(o.Z.STRING,a.string,"trimDescription","trim()",5,"trim(${1:string}, ${2:substr})")).add("UPPER","upper",new l(o.Z.STRING,a.string,"upperDescription","upper()",6,"upper(${1:string})")).add("ABS","abs",new l(o.Z.MATH,a.number,"absDescription","abs()",4,"abs(${1:number})")).add("ACOS","acos",new l(o.Z.MATH,a.number,"acosDescription","acos()",5,"acos(${1:number})")).add("ASIN","asin",new l(o.Z.MATH,a.number,"asinDescription","asin()",5,"asin(${1:number})")).add("ATAN","atan",new l(o.Z.MATH,a.number,"atanDescription","atan()",5,"atan(${1:number})")).add("CEIL","ceil",new l(o.Z.MATH,a.number,"ceilDescription","ceil()",5,"ceil(${1:number})")).add("COS","cos",new l(o.Z.MATH,a.number,"cosDescription","cos()",4,"cos(${1:number})")).add("DEGREES","degrees",new l(o.Z.MATH,a.number,"degreesDescription","degrees()",8,"degrees(${1:number})")).add("EXP","exp",new l(o.Z.MATH,a.number,"expDescription","exp()",4,"exp(${1:number})")).add("FLOOR","floor",new l(o.Z.MATH,a.number,"floorDescription","floor()",6,"floor(${1:number})")).add("LOG","log",new l(o.Z.MATH,a.number,"logDescription","log(m, n)",8,"log(${1:base}, ${2:number})")).add("PI","pi",new l(o.Z.MATH,a.number,"piDescription","pi()",3,"pi()")).add("POWER","power",new l(o.Z.MATH,a.number,"powerDescription","power(m, n)",10,"power(${1:number}, ${2:power})")).add("RADIANS","radians",new l(o.Z.MATH,a.number,"radiansDescription","radians(m)",8,"radians(${1:number})")).add("ROUND","round",new l(o.Z.MATH,a.number,"roundDescription","round()",6,"round(${1:number}, ${2:decimal})")).add("SIGN","sign",new l(o.Z.MATH,a.number,"signDescription","sign(m)",5,"sign(${1:number})")).add("SIN","sin",new l(o.Z.MATH,a.number,"sinDescription","sin(n)",4,"sin(${1:number})")).add("SQRT","sqrt",new l(o.Z.MATH,a.number,"sqrtDescription","sqrt()",5,"sqrt(${1:number})")).add("TAN","tan",new l(o.Z.MATH,a.number,"tanDescription","tan(m)",4,"tan(${1:number})")).add("TRUNC","trunc",new l(o.Z.MATH,a.number,"truncDescription","trunc()",6,"trunc(${1:number})")).add("RANK","rank",new l(o.Z.RANK,a.number,"rankDescription","rank() over([..] partition by all order by )",43,"rank()")).add("DENSE_RANK","dense_rank",new l(o.Z.RANK,a.number,"dense_rankDescription","dense_rank() over([..] partition",32,"dense_rank()")).add("CUME_DIST","cume_dist",new l(o.Z.RANK,a.number,"cume_distDescription","cume_dist() over([..] partition",31,"cume_dist()")).add("ROW_NUMBER","row_number",new l(o.Z.RANK,a.number,"row_numberDescription","row_number() over([..] partition",32,"row_number()")).add("COALESCE","coalesce",new l(null,a.all,"coalesceDescription","coalesce()",9,"coalesce(${1:value1}, ${2:value2}, ${3:value3})")).finish()},36836:(e,t,r)=>{"use strict";function i(e){return e.replace(/;[\n\s]*/g,";")}r.d(t,{T:()=>i})},99642:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(70999);class s extends i.Z{constructor(e,t){super(e.results.records,t,e.responseTime,e.responseId),this._json=e}getLineage(){return this._json.results.metadata[0].lineage}_getJson(){return{...super._getJson(),type:"saql",result:this._json}}}},40643:(e,t,r)=>{"use strict";r.d(t,{K:()=>d,Z:()=>c});var i=r(640),s=r(51412),n=r(64259);class o{constructor(e,t,r={},i,s){this.query=e,this.metadata=t,this.headers=r,this.timezone=i,this.queryLanguage=s}}var a=r(99642),l=r(73700),u=r(36836);const d="wave-query";class c extends i.Z{constructor(e,t=new s.Z(1e3),r){super(),this._saqlQueryApi=e,this._cache=t,this._cacheTTLProvider=r}executeSaql(e,{timezone:t,queryLanguage:r,loggingContext:i,headers:s,signal:n,originalQueryHash:u,datasetMetadatas:c,requestTags:h=[],hasBindings:p}){const g=this.getCacheKey(e,c,t),m=i?.getRequestLoggingContext(d,h),_=[u,...h.filter((e=>e.includes("binding")))].filter(Boolean).join(",");return this._cache.getOrPut(g,(()=>{const d=this._saqlQueryApi.executeQuery(new o(e,{querySequenceId:i?.sequenceId??-1,queryId:null!=i?i.id:-1,uiSessionId:null!=i?i.appContext.appInstanceId:"<MISSING>",uiTabId:null!=i?i.tabId:"<MISSING>",originalQueryHash:u},s,t,r),{loggingContext:m,signal:n}).then((e=>"sql"===r?new l.Z(e.results):new a.Z(e,!1)));return d.catch((e=>{this._cache.delete(g)})),d}),this._cacheTTLProvider?()=>this._cacheTTLProvider?.getCacheTTL(e,r??"saql",t,c)||0:void 0,{loggingContext:m,details:_,bypassStorage:p})}getCacheKey(e,t,r){let i=u.T(e);if(t){const e=[...t];e.sort(((e,t)=>e.getId()<t.getId()?-1:1)),e.forEach((e=>{const t=e.getCurrentVersionPredicate();t?.predicate&&(i=i.concat(t.predicate,t.predicateVersion.toString()))}))}return null!=r&&(i=i.concat(r)),(0,n.a)(i)}flushCache(){this._cache.flush()}}},81634:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(15207);class s{constructor(e){this._json=e}getId(){return this._json._uid}getName(){return this._json.username}getRoleName(){return this._json.roleName}getRoleId(){return this._json.roleId}getUsername(){return this._json.preferred_username}isAdmin(){return this._json.isAdmin}getProfilePhotoUrl(){return this._json.profilePhotoUrl}getEmail(){return this._json.email}getLocale(){return this._json.locale}getTimezone(){return this._json.timezone}getUtcOffset(){return this._json.utcOffset}toReference(){const e={id:this.getId(),name:this.getName()},t=this.getProfilePhotoUrl();return null!=t&&Object.assign(e,{profilePhotoUrl:t}),new i.Z(e)}getLocaleDateFormat(){return this._json.localeDateFormat}getLocaleUserLanguageTag(){return this._json.localeUserLanguageTag}getLocaleCurrencyCode(){return this._json.localeCurrencyCode}getLocaleCurrencySymbol(){return this._json.localeCurrencySymbol}getLocaleNumberGroupingSeparator(){return this._json.localeNumberGroupingSeparator}getLocaleNumberDecimalSeparator(){return this._json.localeNumberDecimalSeparator}isSetupAdmin(){return this._json.isSetupAdmin}}},29937:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var i=r(79646);class s extends i.Z{}s.add("AGGREGATE",new s).add("STRING",new s).add("DATE",new s).add("MATH",new s).add("RANK",new s).finish()},16011:(e,t,r)=>{"use strict";r.r(t),r.d(t,{buildDateRangeArray:()=>p,buildRelativeDateArray:()=>h,convertToDateRange:()=>g,getDefaultRelativeRange:()=>c,isAbsoluteValue:()=>m});var i=r(99322),s=r(13728),n=r(33044),o=r(73096),a=r(5082),l=r(28537),u=r(77114);const d=/^(\d{4})-(\d{2})-(\d{2})$/;function c(e=!1,t=i.YEAR){return new o.Z(new a.Z(t.getDateTimeGrain(),t.hasExtraTodayTick()?0:-1,e),new a.Z(s.Z.DAY,0,!1))}function h(e){const t=e.getGrain().name.toLowerCase();return[e.isFiscal()?`fiscal_${t}`:t,e.getOffset()]}function p(e,t=!1,r=!1){return e instanceof o.Z?[[this.buildRelativeDateArray(e.getFromDate()),this.buildRelativeDateArray(e.getToDate())]]:e instanceof n.Z?[[f(e.getFromDate(),t,r),f(e.getToDate(),t,r)]]:null}function g(e){let t,r;if(this.isAbsoluteValue(e[0]))return new n.Z(_(e[0][0]),_(e[0][1]));{const i=e[0][0],s=e[0][1];return r=null!=i&&Array.isArray(i)?u.getEnumByCode(i[0]).getRelativeDate(i[1]):null,t=null!=s&&Array.isArray(s)?u.getEnumByCode(s[0]).getRelativeDate(s[1]):null,new o.Z(r,t)}}function m(e){return Array.isArray(e)&&!Array.isArray(e[0])||!Array.isArray(e[1])}function _(e){const t="string"==typeof e?function(e){const t=e.match(d);if(null==t)throw new Error("Invalid date.");return Date.UTC(parseInt(t[1]),parseInt(t[2])-1,parseInt(t[3]))}(e):e;return"number"==typeof t?new l.Z(t):null}function f(e,t,r){return null==e?null:r||t?e.toDateString():e.getEpochMillis()}},74104:(e,t,r)=>{"use strict";r.d(t,{r:()=>a,w:()=>o});var i=r(57244),s=r(61506),n=r(39213);function o(){return i.Z.hasAll([i.Z.USER_CAN_EXPLORE_IN_TABLEAU,i.Z.USER_CAN_USE_SERVICE_INTEL])}async function a(e,t){for(const r of e){t(r,await s.Z.get(n.Z).getDMONameFromDataset(r))}}},90249:(e,t,r)=>{"use strict";r.d(t,{B$:()=>m,Ix:()=>g,ZP:()=>E,k3:()=>f});var i=r(8429),s=r(97589),n=r(61506),o=r(88912),a=r(67883);const l=/^(\d{4,})-(\d{2})-(\d{2})$/,u=/^N_MONTHS_AGO:(\d{1,})$/,d=/^FIRST_DAY_N_MONTHS_AGO:(\d{1,})$/,c=/^N_WEEKS_AGO:(\d{1,})$/,h=/^FIRST_DAY_N_WEEKS_AGO:(\d{1,})$/,p=/^N_DAYS_AGO:(\d{1,})$/,g="SnapshotDate",m={name:g,dateGranularity:"day",sortOrder:"Asc",sortAggregate:null},_={dataType:"date",filterValues:[],filterable:!1,groupingLevel:0,inactiveFilterValues:[],isLookup:!1,label:""},f={equals:!0,notEqual:!0},y=(e,t)=>e.exec(t)||["",""];class b{constructor(e,t,r,i,s,n){this._reportMetadata=e,this._reportExtendedMetadata=t,this._reportTypeMetadata=r,this._baseColumnMap=i,this._snapshotDatesLabelMap=s,this._isHistoricalReport=n;const o={},a={},l=Array.isArray(e.detailColumns)?e.detailColumns:[];this._columnMetadata=l.map(((s,n)=>{const l=t.historicalColumnInfo&&t.historicalColumnInfo[s],u=t.detailColumnInfo&&t.detailColumnInfo[s],d=l&&l.baseField,c=l&&l.historicalColumn;let h=null;if(!l)return a[s]=!0,null;if(l.isHistoricalChange&&(c||d)){const t=c||d&&i[d],r=e.presentationOptions;if(t&&r&&r.historicalColumns){const e=r.historicalColumns[t];a[s]=e&&e.showChanges}else a[s]=!1}else a[s]=!0;return l.isHistoricalChange&&(o[s]=!0),l.historicalColumn&&r&&r.categories.some((e=>!!e.columns[l.historicalColumn]&&(h=e.columns[l.historicalColumn],!0))),{historicalColumnInfo:l,detailColumnInfo:u,baseColumnInfo:null,historicalParentColumnInfo:h}})),this._baseColumns=l.map((e=>!!this._baseColumnMap[e])),this._changeColumns=l.map((e=>!!o[e]))}getColumnMetadata(e){return this._columnMetadata[e]}getHistoricalPresentationOptions(e){const t=this.getHistoricalParentColumnName(e),r=this._reportMetadata.presentationOptions;return null!=t?r?.historicalColumns?.[t]:void 0}getHistoricalParentColumnName(e){const t=this.getColumnName(e);if(this.isHistoricalBaseColumn(e))return this._baseColumnMap[t];const r=this.getColumnMetadata(e),i=r&&r.historicalColumnInfo,s=i&&i.historicalColumn;if(this.isHistoricalChangeColumn(e)&&i){const e=i.baseField;return this._baseColumnMap[e]}return s}isHistoricalBaseColumn(e){return this._baseColumns[e]}isHistoricalColumn(e){const t=this.getColumnMetadata(e);return!!(t&&t.historicalColumnInfo&&t.historicalColumnInfo.historicalColumn)}getColumnName(e){return this._reportMetadata.detailColumns[e]}getColumnIndex(e){return this._reportMetadata.detailColumns.findIndex((t=>t===e))}isHistoricalChangeColumn(e){return this._changeColumns[e]}getColumnIndexResponsibleForChangeColoring(e){const t=this.getHistoricalPresentationOptions(e),r=t&&t.showChanges,i=this.isHistoricalChangeColumn(e),s=this.getHistoricalParentColumnName(e),n=this.getColumnMetadata(e);return r&&i?e:!r&&!i&&n&&n.historicalColumnInfo&&n.historicalColumnInfo.historicalSnapshotDate&&this.isHistoricalChangeColumn(e+1)&&this.getHistoricalParentColumnName(e+1)===s||!r&&!i&&this.isHistoricalBaseColumn(e)&&this.isHistoricalChangeColumn(e+1)&&this.getHistoricalParentColumnName(e+1)===s?e+1:null}getSignOfChange(e,t,r){if(!this._isHistoricalReport||!this.isHistoricalChangeColumn(e))return 0;const i=this.getValueOfCell(t);return this.isIncreasingPositive(e,r)&&i>0||!this.isIncreasingPositive(e,r)&&i<0?1:this.isIncreasingPositive(e,r)&&i<0||!this.isIncreasingPositive(e,r)&&i>0?-1:0}getValueOfCell(e){if(!e)return 0;let t=e.value;return t&&"object"==typeof t&&Object.keys(t)&&(t=Number(t.amount)),Number(t)}isIncreasingPositive(e,t){const r=this.getHistoricalParentColumnName(e);let i=this.getHistoricalPresentationOptions(e);return t&&r&&t[r]&&(i=t[r]),!i||!i.decreaseIsPositive}isColumnShown(e,t){if(!this.isHistoricalChangeColumn(e))return!0;const r=this.getHistoricalParentColumnName(e);let i=this.getHistoricalPresentationOptions(e);return t&&r&&t[r]&&(i=t[r]),!!i&&i.showChanges}isHistoricalFormattingSupported(e){let t=!1;switch(e){case"double":case"int":case"currency":case"date":case"datetime":t=!0}return t}}class C{constructor(e,t,r){if(!e||!e.detailColumns||!t)return;_.label=i.Z.getLabel("reportBuilder","snapshotDate"),this._reportMetadata=e,this._reportExtendedMetadata=t,this._reportTypeMetadata=r,this._baseColumnMap={},this._snapshotDatesLabelMap={},this._localizationService=n.Z.has(s)?n.Z.get(s):void 0,this._dateFormat=this._localizationService&&o.get().getLocalizedDateInputFormat();const l=this._reportExtendedMetadata&&this._reportExtendedMetadata.historicalColumnInfo;l&&Object.keys(l).forEach((e=>{const t=l[e],r=t&&t.baseField;r&&t.historicalColumn&&(this._baseColumnMap[r]=t.historicalColumn)}));const u=r&&r.rollingSnapshotDateInfo;u&&u.values.forEach((e=>{e.values.forEach((e=>{this._snapshotDatesLabelMap[e.value]=e.label}))})),e.reportFormat===a.TABULAR.getValue()&&(this._tabularColumnMetadata=new b(this._reportMetadata,this._reportExtendedMetadata,this._reportTypeMetadata,this._baseColumnMap,this._snapshotDatesLabelMap,this.isHistoricalReport()))}getTabularColumnMetadata(){return this._tabularColumnMetadata}isHistoricalReport(){const e=this.getSnapshotDates();return!!e&&Boolean(e.length)}getSnapshotDates(){return this._reportMetadata?this._reportMetadata.historicalSnapshotDates:null}getRollingSnapshotDateInfo(){return this._reportTypeMetadata?.rollingSnapshotDateInfo}getHistoricalSubColumnInfo(e){const t=this._reportExtendedMetadata&&this._reportExtendedMetadata.historicalColumnInfo;return t&&t[e]?t[e]:e===g?_:void 0}getSnapshotDateLabel(e){const t=this._snapshotDatesLabelMap[e];return!t&&this._localizationService?this._localizationService.formatDate(e,this._dateFormat):t}getHistoricalColumnName(e){return this._baseColumnMap[e]}getBaseColumnInfo(e){const t=this._reportExtendedMetadata.historicalColumnInfo;return t&&t[e]}getRenderedToCleansedColumnIndexMap(e){const t={};let r=-1;return e.reduce(((e,i,s)=>{const n=this._reportExtendedMetadata.historicalColumnInfo&&this._reportExtendedMetadata.historicalColumnInfo[i];if(n&&n.historicalSnapshotDate){const i=t[n.historicalColumn];return t[n.historicalColumn]=!0,i?(e[s]=r,e):(r++,e[s]=r,e)}return n&&n.isHistoricalChange?(e[s]=r,e):(r++,e[s]=r,e)}),{})}cleanseDetailColumns(e){const t={};return e.reduce(((e,r)=>{const i=this._reportExtendedMetadata.historicalColumnInfo&&this._reportExtendedMetadata.historicalColumnInfo[r];if(i&&i.historicalSnapshotDate){const r=t[i.historicalColumn];return t[i.historicalColumn]=!0,r||e.push(i.historicalColumn),e}return i&&i.isHistoricalChange||e.push(r),e}),[])}reconstituteDetailColumns(e){const t=this._reportExtendedMetadata.historicalColumnInfo,r=this.getTabularColumnMetadata();if(!t||!r)return[].concat(e);const i=new Set(this._reportMetadata.historicalSnapshotDates),s={},n={};return Object.keys(t).forEach((r=>{const o=t[r],a=e.indexOf(r)>-1;o.historicalColumn||!o.isHistoricalChange||a?(o.isHistoricalChange||o.historicalSnapshotDate)&&i.has(o.historicalSnapshotDate)&&(o.isHistoricalChange&&o.historicalSnapshotDate===this.getSortedSnapshotDates()[0]||(s[o.historicalColumn]=s[o.historicalColumn]||[],s[o.historicalColumn].push(r))):n[o.baseField]=r})),e.reduce(((e,t)=>{if(n[t]){e.push(t);const r=this.getHistoricalDetailColumnsFromBaseColumn(t);r&&r.length>0&&e.push(n[t])}else s[t]?Array.prototype.push.apply(e,s[t]):e.push(t);return e}),[])}convertToCleansedColumnIndices(e){const t=this.getRenderedToCleansedColumnIndexMap(this._reportMetadata.detailColumns),r=[];for(const i of e)r.push(t[i]);return r}convertToCleansedColumnIndex(e){return this.getRenderedToCleansedColumnIndexMap(this._reportMetadata.detailColumns)[e]}isLastCleansedDetailColumn(e){const t=this._reportMetadata.detailColumns,r=this.getRenderedToCleansedColumnIndexMap(t),i=Object.keys(r).reduce(((e,t)=>{const i=parseInt(t,10);return r[i]>e?r[i]:e}),-1/0);return r[e]>=i}getHistoricalColumnsFromBaseColumn(e){const t=[],r=this._reportExtendedMetadata&&this._reportExtendedMetadata.historicalColumnInfo;return r&&Object.keys(r).forEach((i=>{const s=r[i];s&&s.baseField===e&&t.push(i)})),t}getHistoricalDetailColumnsFromBaseColumn(e){const t=this.getHistoricalColumnsFromBaseColumn(e)||[],r=this._reportMetadata.detailColumns.reduce(((e,t)=>(e[t]=!0,e)),{});return t.filter((e=>r[e]))}removeSnapshotDate(e){if(!this._reportMetadata)return;const t=this._reportMetadata.historicalSnapshotDates.indexOf(e);if(t>-1){if(this._reportMetadata.historicalSnapshotDates.splice(t,1).length>0){const e=this.cleanseDetailColumns(this._reportMetadata.detailColumns);if(e){const t=this.reconstituteDetailColumns(e);t&&(this._reportMetadata.detailColumns=t)}}}return this._reportMetadata.detailColumns}deriveHistoricalParentColumnName(e){const t=this._reportExtendedMetadata.historicalColumnInfo,r=t&&t[e];return r?r.historicalColumn||r.baseField:e}convertSnapshotToDate(e){if(l.test(e)){const t=y(l,e);return new Date(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10))}const t=new Date,r=t.getFullYear(),i=t.getMonth(),s=t.getDate(),n=t.getDay();if(u.test(e)){const t=parseInt(y(u,e)[1],0);return new Date(r,i-t,s)}if(d.test(e)){const t=parseInt(y(d,e)[1],0);return new Date(r,i-t,1)}if(c.test(e)){const t=parseInt(y(c,e)[1],0);return new Date(r,i,s-7*t)}if(h.test(e)){const t=parseInt(y(h,e)[1],0);return new Date(r,i,s-7*t-n)}if(p.test(e)){const t=parseInt(y(p,e)[1],0);return new Date(r,i,s-t)}return t}getSortedSnapshotDates(){return[].concat(this._reportMetadata.historicalSnapshotDates).sort(((e,t)=>this.convertSnapshotToDate(e)-this.convertSnapshotToDate(t)))}getEarliestAllowedDate(){const e=new Date;return new Date(e.getFullYear(),e.getMonth()-3,1,0,0,0,0)}}class E{static getHistoricalTrackingMetadata({reportMetadata:e,reportExtendedMetadata:t,reportTypeMetadata:r}){return new C(e,t,r)}}},13234:(e,t,r)=>{"use strict";r.r(t),r.d(t,{getLoadOADashboardFoldersQuery:()=>h,getLoadOADashboardPlatformActionQuery:()=>g,getLoadOADashboardSearchQuery:()=>p,getLoadOADashboardsQuery:()=>c,getLoadReportFoldersQuery:()=>d,getLoadReportsQuery:()=>u});var i=r(61506),s=r(18111),n=r(95044);const o=10,a="Title",l="SourceEntity";function u({folderId:e,pageSize:t,order:r,scope:i}){return m({sObjectName:"Report",fields:["Id","Name","Description","LastRunDate","LastModifiedDate","CreatedBy.Id","CreatedBy.Name","LastModifiedBy.Id","LastModifiedBy.Name","Owner.Id","Owner.Name"],folderId:e,pageSize:t,order:r,scope:i},"Owner.Id","LastRunDate")}function d({folderId:e,pageSize:t,order:r,scope:i}){return m({sObjectName:"Folder",fields:["Id","Name","CreatedBy.Id","LastModifiedDate","CreatedBy.Name","LastModifiedBy.Id","LastModifiedBy.Name","ParentId"],folderId:e,pageSize:t,order:r,scope:i},"ParentId","LastModifiedDate",["Type = 'Report' AND DeveloperName !=''"])}function c({folderId:e,pageSize:t,order:r,scope:i}){return m({sObjectName:"Dashboard",fields:["Id","Title","Description","LastViewedDate","LastModifiedDate","CreatedBy.Id","CreatedBy.Name","LastModifiedBy.Id","LastModifiedBy.Name","Folder.Id","Folder.Name"],folderId:e,pageSize:t,order:r,scope:i},"Folder.Id","LastViewedDate")}function h({folderId:e,pageSize:t,order:r,scope:i}){return m({sObjectName:"Folder",fields:["Id","Name","CreatedBy.Id","LastModifiedDate","CreatedBy.Name","LastModifiedBy.Id","LastModifiedBy.Name","ParentId"],folderId:e,pageSize:t,order:r,scope:i},"ParentId","LastModifiedDate",["Type = 'Dashboard' AND DeveloperName !=''"])}function p({searchTerm:e}){const t=e??"";return`SELECT Id, ${a}, LastModifiedBy.Name, FolderName FROM Dashboard USING SCOPE mru WHERE ${a} like '% ${t}%' OR ${a} like '${t}%' OR ${a} like '%${t}%' LIMIT ${o}`}function g({sourceEntity:e}){let t="";return e&&(t=t.concat(`WHERE ${l} in ('`).concat(e.join("','")).concat("') AND ApiName='DashboardEditAction' AND ActionListContext = 'ListViewRecord' AND DeviceFormat = 'Desktop'")),`SELECT SourceEntity FROM PlatformAction ${t} LIMIT ${o}`}function m({sObjectName:e,fields:t,folderId:r,pageSize:o,order:a,scope:l},u,d,c){const h=i.Z.get(s).getAppUser().getId();let p="";null!==o&&(p=`LIMIT ${o}`);let g="";const m=c||[];return r&&m.push(`${u} = '${r}'`),r||"Folder"!==e||m.push(`${u} = null`),l!==n.Z.CREATED_BY_ME.code&&l!==n.Z.SHARED_WITH_ME.code||(l===n.Z.CREATED_BY_ME.code?m.push(`CreatedBy.Id = '${h}'`):l===n.Z.SHARED_WITH_ME.code&&m.push(`CreatedBy.Id != '${h}'`)),m.length&&(g=`WHERE ${m.join(" AND ")}`),`SELECT ${t.join(", ")} FROM ${e} ${g} ORDER BY ${d} DESC NULLS FIRST ${p}`}},40321:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var i=r(70847),s=r(96486),n=r(62133);const o=e=>e+"";class a{static getMeasureFormatter(e,t,r=!1,a,l,u,d){let c,h,p=e.isMeasure(t)?[null,t]:n.measureForField(t);if(!p&&a)p=n.measureByAlias(a,t);else if(a&&1===a.length){const e=a[0];p[0]===e[0]&&p[1]===e[1]&&e&&e[3].format&&(p=e)}if(p&&(c=p[3]&&p[3].format?n.measureNameForFormat(p[3].format):p[1]),l&&u)h={formatString:l,multiplier:u,delimiters:d};else if(c){const t=e.getMeasureFormat(c),r=Array.isArray(t);h={formatString:r?t[0]:t.customFormat[0],multiplier:r?t[1]:t.customFormat[1],delimiters:t.delimiters}}return h?r?e=>(0,i.formatCompact)(e,(0,s.extend)(h,{byOriginalFormatString:!0,minCompactDecimalDigits:1,minMidRangeCompactDecimalDigits:0})):e=>(0,i.format)(e,h):o}}},42816:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var i=r(8429),s=r(19929);function n(e){return null!=e&&e.getId()?e.getId().startsWith(s.Z.USER.idPrefix)?i.Z.getLabel("InsightsHomePage","userApplicationName"):e.getLabel():""}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return n[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=n,a.c=o,a.amdO={},e=[],a.O=(t,r,i,s)=>{if(!r){var n=1/0;for(d=0;d<e.length;d++){for(var[r,i,s]=e[d],o=!0,l=0;l<r.length;l++)(!1&s||n>=s)&&Object.keys(a.O).every((e=>a.O[e](r[l])))?r.splice(l--,1):(o=!1,s<n&&(n=s));if(o){e.splice(d--,1);var u=i();void 0!==u&&(t=u)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[r,i,s]},a.F={},a.E=e=>{Object.keys(a.F).map((t=>{a.F[t](e)}))},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var s=Object.create(null);a.r(s);var n={};t=t||[null,r({}),r([]),r(r)];for(var o=2&i&&e;"object"==typeof o&&!~t.indexOf(o);o=r(o))Object.getOwnPropertyNames(o).forEach((t=>n[t]=()=>e[t]));return n.default=()=>e,a.d(s,n),s},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>"js/report."+{42:"rangeWidget",61:"stepCreationWizard",96:"componentPicker",114:"listWidget",254:"lwcErrorModal",276:"tableWidget",288:"dateTimeWidget",471:"widget-reportTable",474:"ed-recommender2",479:"widget-queryBuilder",486:"globalFilterPopover",498:"richTextInput",502:"massRecordAction",571:"legacyGlobalFilterWidget",592:"common",619:"customQuery",661:"richTextViewer",713:"dashboardIdeModal",739:"globalFilterCreator",798:"componentWidget",946:"monacoEditor",989:"imageManagerModal"}[e]+".chunk."+{42:"ef861c542c7ade2c1cdc",61:"094cea6ed5b66709e6d5",96:"a01eba957f07e84753c6",114:"2e9fd55edfdcd4474f1e",254:"2cba4400eadb6207f14b",276:"39ff07bbb4d835feac5b",288:"a6194403616fe34a2de4",471:"485edc1be9ff5b5a6ab0",474:"9209e18696c5eabca903",479:"cc8a540b166e1238399a",486:"bc52e8fc7f062fd4719b",498:"59227bd80c721f59c19b",502:"8cc51bb1aaa4ad950ed7",571:"bbc7943f7543ccd6eb77",592:"76fca42cdb98e8594235",619:"8c94d12ffc9d4cfd0217",661:"41b9c69b4bee086e2ebb",713:"7ea21f05c502782e828d",739:"837a324742f9994a2c43",798:"29abacbad57d1a5a009d",946:"9a148475f181320fc726",989:"c2a702633f6884365ea8"}[e]+".js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},s="WaveUI:",a.l=(e,t,r,n)=>{if(i[e])i[e].push(t);else{var o,l;if(void 0!==r)for(var u=document.getElementsByTagName("script"),d=0;d<u.length;d++){var c=u[d];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==s+r){o=c;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",s+r),o.src=e),i[e]=[t];var h=(t,r)=>{o.onerror=o.onload=null,clearTimeout(p);var s=i[e];if(delete i[e],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),a.p="../projRes/insights/gen/static/reports/",(()=>{a.b=document.baseURI||self.location.href;var e={110:0};a.f.j=(t,r)=>{var i=a.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((r,s)=>i=e[t]=[r,s]));r.push(i[2]=s);var n=a.p+a.u(t),o=new Error;a.l(n,(r=>{if(a.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+n+")",o.name="ChunkLoadError",o.type=s,o.request=n,i[1](o)}}),"chunk-"+t,t)}},a.F.j=t=>{if(!a.o(e,t)||void 0===e[t]){e[t]=null;var r=document.createElement("link");a.nc&&r.setAttribute("nonce",a.nc),r.rel="prefetch",r.as="script",r.href=a.p+a.u(t),document.head.appendChild(r)}},a.O.j=t=>0===e[t];var t=(t,r)=>{var i,s,[n,o,l]=r,u=0;if(n.some((t=>0!==e[t]))){for(i in o)a.o(o,i)&&(a.m[i]=o[i]);if(l)var d=l(a)}for(t&&t(r);u<n.length;u++)s=n[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(d)},r=globalThis.webpackChunkWaveUI=globalThis.webpackChunkWaveUI||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),a.nc=void 0,a.O(0,[110],(()=>{[441,425,592,276].map(a.E)}),5);var l=a.O(void 0,[441,425],(()=>a(a.s=82104)));l=a.O(l)})();